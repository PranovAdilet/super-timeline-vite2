"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const G=require("react"),Xy=require("react-dom"),Qd=require("zustand"),Zy=require("@remotion/player"),Xt=require("remotion"),ef=require("@radix-ui/themes"),W=require("fabric");function Ky(t){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>t[r]})}}return n.default=t,Object.freeze(n)}const C=Ky(G);var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xa={exports:{}},Jr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd;function qy(){if(fd)return Jr;fd=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(s,a,c){var u=null;if(c!==void 0&&(u=""+c),a.key!==void 0&&(u=""+a.key),"key"in a){c={};for(var d in a)d!=="key"&&(c[d]=a[d])}else c=a;return a=c.ref,{$$typeof:t,type:s,key:u,ref:a!==void 0?a:null,props:c}}return Jr.Fragment=n,Jr.jsx=r,Jr.jsxs=r,Jr}var Qr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd;function Jy(){return hd||(hd=1,process.env.NODE_ENV!=="production"&&function(){function t(S){if(S==null)return null;if(typeof S=="function")return S.$$typeof===Ce?null:S.displayName||S.name||null;if(typeof S=="string")return S;switch(S){case K:return"Fragment";case J:return"Portal";case q:return"Profiler";case Q:return"StrictMode";case V:return"Suspense";case he:return"SuspenseList"}if(typeof S=="object")switch(typeof S.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),S.$$typeof){case te:return(S.displayName||"Context")+".Provider";case X:return(S._context.displayName||"Context")+".Consumer";case ne:var $=S.render;return S=S.displayName,S||(S=$.displayName||$.name||"",S=S!==""?"ForwardRef("+S+")":"ForwardRef"),S;case Ie:return $=S.displayName||null,$!==null?$:t(S.type)||"Memo";case Ne:$=S._payload,S=S._init;try{return t(S($))}catch{}}return null}function n(S){return""+S}function r(S){try{n(S);var $=!1}catch{$=!0}if($){$=console;var Y=$.error,ye=typeof Symbol=="function"&&Symbol.toStringTag&&S[Symbol.toStringTag]||S.constructor.name||"Object";return Y.call($,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",ye),n(S)}}function s(){}function a(){if(Qt===0){en=console.log,Un=console.info,Ei=console.warn,bn=console.error,yn=console.group,Ci=console.groupCollapsed,zn=console.groupEnd;var S={configurable:!0,enumerable:!0,value:s,writable:!0};Object.defineProperties(console,{info:S,log:S,warn:S,error:S,group:S,groupCollapsed:S,groupEnd:S})}Qt++}function c(){if(Qt--,Qt===0){var S={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:se({},S,{value:en}),info:se({},S,{value:Un}),warn:se({},S,{value:Ei}),error:se({},S,{value:bn}),group:se({},S,{value:yn}),groupCollapsed:se({},S,{value:Ci}),groupEnd:se({},S,{value:zn})})}0>Qt&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function u(S){if(_n===void 0)try{throw Error()}catch(Y){var $=Y.stack.trim().match(/\n( *(at )?)/);_n=$&&$[1]||"",Pr=-1<Y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+S+Pr}function d(S,$){if(!S||it)return"";var Y=tn.get(S);if(Y!==void 0)return Y;it=!0,Y=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var ye=null;ye=Re.H,Re.H=null,a();try{var Fe={DetermineComponentFrameRoot:function(){try{if($){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch(mt){var Sn=mt}Reflect.construct(S,[],Et)}else{try{Et.call()}catch(mt){Sn=mt}S.call(Et.prototype)}}else{try{throw Error()}catch(mt){Sn=mt}(Et=S())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch(mt){if(mt&&Sn&&typeof mt.stack=="string")return[mt.stack,Sn.stack]}return[null,null]}};Fe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Oe=Object.getOwnPropertyDescriptor(Fe.DetermineComponentFrameRoot,"name");Oe&&Oe.configurable&&Object.defineProperty(Fe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var oe=Fe.DetermineComponentFrameRoot(),et=oe[0],Vt=oe[1];if(et&&Vt){var $e=et.split(`
`),jt=Vt.split(`
`);for(oe=Oe=0;Oe<$e.length&&!$e[Oe].includes("DetermineComponentFrameRoot");)Oe++;for(;oe<jt.length&&!jt[oe].includes("DetermineComponentFrameRoot");)oe++;if(Oe===$e.length||oe===jt.length)for(Oe=$e.length-1,oe=jt.length-1;1<=Oe&&0<=oe&&$e[Oe]!==jt[oe];)oe--;for(;1<=Oe&&0<=oe;Oe--,oe--)if($e[Oe]!==jt[oe]){if(Oe!==1||oe!==1)do if(Oe--,oe--,0>oe||$e[Oe]!==jt[oe]){var nn=`
`+$e[Oe].replace(" at new "," at ");return S.displayName&&nn.includes("<anonymous>")&&(nn=nn.replace("<anonymous>",S.displayName)),typeof S=="function"&&tn.set(S,nn),nn}while(1<=Oe&&0<=oe);break}}}finally{it=!1,Re.H=ye,c(),Error.prepareStackTrace=Y}return $e=($e=S?S.displayName||S.name:"")?u($e):"",typeof S=="function"&&tn.set(S,$e),$e}function h(S){if(S==null)return"";if(typeof S=="function"){var $=S.prototype;return d(S,!(!$||!$.isReactComponent))}if(typeof S=="string")return u(S);switch(S){case V:return u("Suspense");case he:return u("SuspenseList")}if(typeof S=="object")switch(S.$$typeof){case ne:return S=d(S.render,!1),S;case Ie:return h(S.type);case Ne:$=S._payload,S=S._init;try{return h(S($))}catch{}}return""}function m(){var S=Re.A;return S===null?null:S.getOwner()}function b(S){if(dt.call(S,"key")){var $=Object.getOwnPropertyDescriptor(S,"key").get;if($&&$.isReactWarning)return!1}return S.key!==void 0}function _(S,$){function Y(){It||(It=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",$))}Y.isReactWarning=!0,Object.defineProperty(S,"key",{get:Y,configurable:!0})}function x(){var S=t(this.type);return Lr[S]||(Lr[S]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),S=this.props.ref,S!==void 0?S:null}function E(S,$,Y,ye,Fe,Oe){return Y=Oe.ref,S={$$typeof:U,type:S,key:$,props:Oe,_owner:Fe},(Y!==void 0?Y:null)!==null?Object.defineProperty(S,"ref",{enumerable:!1,get:x}):Object.defineProperty(S,"ref",{enumerable:!1,value:null}),S._store={},Object.defineProperty(S._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(S,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.freeze&&(Object.freeze(S.props),Object.freeze(S)),S}function O(S,$,Y,ye,Fe,Oe){if(typeof S=="string"||typeof S=="function"||S===K||S===q||S===Q||S===V||S===he||S===Se||typeof S=="object"&&S!==null&&(S.$$typeof===Ne||S.$$typeof===Ie||S.$$typeof===te||S.$$typeof===X||S.$$typeof===ne||S.$$typeof===or||S.getModuleId!==void 0)){var oe=$.children;if(oe!==void 0)if(ye)if(Fn(oe)){for(ye=0;ye<oe.length;ye++)k(oe[ye],S);Object.freeze&&Object.freeze(oe)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else k(oe,S)}else oe="",(S===void 0||typeof S=="object"&&S!==null&&Object.keys(S).length===0)&&(oe+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),S===null?ye="null":Fn(S)?ye="array":S!==void 0&&S.$$typeof===U?(ye="<"+(t(S.type)||"Unknown")+" />",oe=" Did you accidentally export a JSX literal instead of a component?"):ye=typeof S,console.error("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ye,oe);if(dt.call($,"key")){oe=t(S);var et=Object.keys($).filter(function($e){return $e!=="key"});ye=0<et.length?"{key: someKey, "+et.join(": ..., ")+": ...}":"{key: someKey}",Ai[oe+ye]||(et=0<et.length?"{"+et.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ye,oe,et,oe),Ai[oe+ye]=!0)}if(oe=null,Y!==void 0&&(r(Y),oe=""+Y),b($)&&(r($.key),oe=""+$.key),"key"in $){Y={};for(var Vt in $)Vt!=="key"&&(Y[Vt]=$[Vt])}else Y=$;return oe&&_(Y,typeof S=="function"?S.displayName||S.name||"Unknown":S),E(S,oe,Oe,Fe,m(),Y)}function k(S,$){if(typeof S=="object"&&S&&S.$$typeof!==qs){if(Fn(S))for(var Y=0;Y<S.length;Y++){var ye=S[Y];A(ye)&&D(ye,$)}else if(A(S))S._store&&(S._store.validated=1);else if(S===null||typeof S!="object"?Y=null:(Y=Ee&&S[Ee]||S["@@iterator"],Y=typeof Y=="function"?Y:null),typeof Y=="function"&&Y!==S.entries&&(Y=Y.call(S),Y!==S))for(;!(S=Y.next()).done;)A(S.value)&&D(S.value,$)}}function A(S){return typeof S=="object"&&S!==null&&S.$$typeof===U}function D(S,$){if(S._store&&!S._store.validated&&S.key==null&&(S._store.validated=1,$=P($),!wn[$])){wn[$]=!0;var Y="";S&&S._owner!=null&&S._owner!==m()&&(Y=null,typeof S._owner.tag=="number"?Y=t(S._owner.type):typeof S._owner.name=="string"&&(Y=S._owner.name),Y=" It was passed a child from "+Y+".");var ye=Re.getCurrentStack;Re.getCurrentStack=function(){var Fe=h(S.type);return ye&&(Fe+=ye()||""),Fe},console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',$,Y),Re.getCurrentStack=ye}}function P(S){var $="",Y=m();return Y&&(Y=t(Y.type))&&($=`

Check the render method of \``+Y+"`."),$||(S=t(S))&&($=`

Check the top-level render call using <`+S+">."),$}var j=G,U=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),Ee=Symbol.iterator,Ce=Symbol.for("react.client.reference"),Re=j.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt=Object.prototype.hasOwnProperty,se=Object.assign,or=Symbol.for("react.client.reference"),Fn=Array.isArray,Qt=0,en,Un,Ei,bn,yn,Ci,zn;s.__reactDisabledLog=!0;var _n,Pr,it=!1,tn=new(typeof WeakMap=="function"?WeakMap:Map),qs=Symbol.for("react.client.reference"),It,Lr={},Ai={},wn={};Qr.Fragment=K,Qr.jsx=function(S,$,Y,ye,Fe){return O(S,$,Y,!1,ye,Fe)},Qr.jsxs=function(S,$,Y,ye,Fe){return O(S,$,Y,!0,ye,Fe)}}()),Qr}process.env.NODE_ENV==="production"?xa.exports=qy():xa.exports=Jy();var v=xa.exports;function pd(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function tf(...t){return n=>{let r=!1;const s=t.map(a=>{const c=pd(a,n);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let a=0;a<s.length;a++){const c=s[a];typeof c=="function"?c():pd(t[a],null)}}}}function ct(...t){return C.useCallback(tf(...t),t)}var oi=C.forwardRef((t,n)=>{const{children:r,...s}=t,a=C.Children.toArray(r),c=a.find(e_);if(c){const u=c.props.children,d=a.map(h=>h===c?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:h);return v.jsx(Ta,{...s,ref:n,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return v.jsx(Ta,{...s,ref:n,children:r})});oi.displayName="Slot";var Ta=C.forwardRef((t,n)=>{const{children:r,...s}=t;if(C.isValidElement(r)){const a=n_(r),c=t_(s,r.props);return r.type!==C.Fragment&&(c.ref=n?tf(n,a):a),C.cloneElement(r,c)}return C.Children.count(r)>1?C.Children.only(null):null});Ta.displayName="SlotClone";var Qy=({children:t})=>v.jsx(v.Fragment,{children:t});function e_(t){return C.isValidElement(t)&&t.type===Qy}function t_(t,n){const r={...n};for(const s in n){const a=t[s],c=n[s];/^on[A-Z]/.test(s)?a&&c?r[s]=(...d)=>{c(...d),a(...d)}:a&&(r[s]=a):s==="style"?r[s]={...a,...c}:s==="className"&&(r[s]=[a,c].filter(Boolean).join(" "))}return{...t,...r}}function n_(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function nf(t){var n,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=nf(t[n]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function rf(){for(var t,n,r=0,s="",a=arguments.length;r<a;r++)(t=arguments[r])&&(n=nf(t))&&(s&&(s+=" "),s+=n);return s}const gd=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,md=rf,r_=(t,n)=>r=>{var s;if(n?.variants==null)return md(t,r?.class,r?.className);const{variants:a,defaultVariants:c}=n,u=Object.keys(a).map(m=>{const b=r?.[m],_=c?.[m];if(b===null)return null;const x=gd(b)||gd(_);return a[m][x]}),d=r&&Object.entries(r).reduce((m,b)=>{let[_,x]=b;return x===void 0||(m[_]=x),m},{}),h=n==null||(s=n.compoundVariants)===null||s===void 0?void 0:s.reduce((m,b)=>{let{class:_,className:x,...E}=b;return Object.entries(E).every(O=>{let[k,A]=O;return Array.isArray(A)?A.includes({...c,...d}[k]):{...c,...d}[k]===A})?[...m,_,x]:m},[]);return md(t,u,h,r?.class,r?.className)},Ya="-",i_=t=>{const n=o_(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:u=>{const d=u.split(Ya);return d[0]===""&&d.length!==1&&d.shift(),sf(d,n)||s_(u)},getConflictingClassGroupIds:(u,d)=>{const h=r[u]||[];return d&&s[u]?[...h,...s[u]]:h}}},sf=(t,n)=>{if(t.length===0)return n.classGroupId;const r=t[0],s=n.nextPart.get(r),a=s?sf(t.slice(1),s):void 0;if(a)return a;if(n.validators.length===0)return;const c=t.join(Ya);return n.validators.find(({validator:u})=>u(c))?.classGroupId},vd=/^\[(.+)\]$/,s_=t=>{if(vd.test(t)){const n=vd.exec(t)[1],r=n?.substring(0,n.indexOf(":"));if(r)return"arbitrary.."+r}},o_=t=>{const{theme:n,prefix:r}=t,s={nextPart:new Map,validators:[]};return c_(Object.entries(t.classGroups),r).forEach(([c,u])=>{Ia(u,s,c,n)}),s},Ia=(t,n,r,s)=>{t.forEach(a=>{if(typeof a=="string"){const c=a===""?n:bd(n,a);c.classGroupId=r;return}if(typeof a=="function"){if(a_(a)){Ia(a(s),n,r,s);return}n.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([c,u])=>{Ia(u,bd(n,c),r,s)})})},bd=(t,n)=>{let r=t;return n.split(Ya).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},a_=t=>t.isThemeGetter,c_=(t,n)=>n?t.map(([r,s])=>{const a=s.map(c=>typeof c=="string"?n+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([u,d])=>[n+u,d])):c);return[r,a]}):t,l_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,r=new Map,s=new Map;const a=(c,u)=>{r.set(c,u),n++,n>t&&(n=0,s=r,r=new Map)};return{get(c){let u=r.get(c);if(u!==void 0)return u;if((u=s.get(c))!==void 0)return a(c,u),u},set(c,u){r.has(c)?r.set(c,u):a(c,u)}}},of="!",u_=t=>{const{separator:n,experimentalParseClassName:r}=t,s=n.length===1,a=n[0],c=n.length,u=d=>{const h=[];let m=0,b=0,_;for(let A=0;A<d.length;A++){let D=d[A];if(m===0){if(D===a&&(s||d.slice(A,A+c)===n)){h.push(d.slice(b,A)),b=A+c;continue}if(D==="/"){_=A;continue}}D==="["?m++:D==="]"&&m--}const x=h.length===0?d:d.substring(b),E=x.startsWith(of),O=E?x.substring(1):x,k=_&&_>b?_-b:void 0;return{modifiers:h,hasImportantModifier:E,baseClassName:O,maybePostfixModifierPosition:k}};return r?d=>r({className:d,parseClassName:u}):u},d_=t=>{if(t.length<=1)return t;const n=[];let r=[];return t.forEach(s=>{s[0]==="["?(n.push(...r.sort(),s),r=[]):r.push(s)}),n.push(...r.sort()),n},f_=t=>({cache:l_(t.cacheSize),parseClassName:u_(t),...i_(t)}),h_=/\s+/,p_=(t,n)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=n,c=[],u=t.trim().split(h_);let d="";for(let h=u.length-1;h>=0;h-=1){const m=u[h],{modifiers:b,hasImportantModifier:_,baseClassName:x,maybePostfixModifierPosition:E}=r(m);let O=!!E,k=s(O?x.substring(0,E):x);if(!k){if(!O){d=m+(d.length>0?" "+d:d);continue}if(k=s(x),!k){d=m+(d.length>0?" "+d:d);continue}O=!1}const A=d_(b).join(":"),D=_?A+of:A,P=D+k;if(c.includes(P))continue;c.push(P);const j=a(k,O);for(let U=0;U<j.length;++U){const J=j[U];c.push(D+J)}d=m+(d.length>0?" "+d:d)}return d};function g_(){let t=0,n,r,s="";for(;t<arguments.length;)(n=arguments[t++])&&(r=af(n))&&(s&&(s+=" "),s+=r);return s}const af=t=>{if(typeof t=="string")return t;let n,r="";for(let s=0;s<t.length;s++)t[s]&&(n=af(t[s]))&&(r&&(r+=" "),r+=n);return r};function m_(t,...n){let r,s,a,c=u;function u(h){const m=n.reduce((b,_)=>_(b),t());return r=f_(m),s=r.cache.get,a=r.cache.set,c=d,d(h)}function d(h){const m=s(h);if(m)return m;const b=p_(h,r);return a(h,b),b}return function(){return c(g_.apply(null,arguments))}}const De=t=>{const n=r=>r[t]||[];return n.isThemeGetter=!0,n},cf=/^\[(?:([a-z-]+):)?(.+)\]$/i,v_=/^\d+\/\d+$/,b_=new Set(["px","full","screen"]),y_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,__=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,w_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,S_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,x_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hn=t=>Sr(t)||b_.has(t)||v_.test(t),Mn=t=>Ir(t,"length",O_),Sr=t=>!!t&&!Number.isNaN(Number(t)),ha=t=>Ir(t,"number",Sr),ei=t=>!!t&&Number.isInteger(Number(t)),T_=t=>t.endsWith("%")&&Sr(t.slice(0,-1)),ue=t=>cf.test(t),Dn=t=>y_.test(t),I_=new Set(["length","size","percentage"]),E_=t=>Ir(t,I_,lf),C_=t=>Ir(t,"position",lf),A_=new Set(["image","url"]),k_=t=>Ir(t,A_,D_),R_=t=>Ir(t,"",M_),ti=()=>!0,Ir=(t,n,r)=>{const s=cf.exec(t);return s?s[1]?typeof n=="string"?s[1]===n:n.has(s[1]):r(s[2]):!1},O_=t=>__.test(t)&&!w_.test(t),lf=()=>!1,M_=t=>S_.test(t),D_=t=>x_.test(t),P_=()=>{const t=De("colors"),n=De("spacing"),r=De("blur"),s=De("brightness"),a=De("borderColor"),c=De("borderRadius"),u=De("borderSpacing"),d=De("borderWidth"),h=De("contrast"),m=De("grayscale"),b=De("hueRotate"),_=De("invert"),x=De("gap"),E=De("gradientColorStops"),O=De("gradientColorStopPositions"),k=De("inset"),A=De("margin"),D=De("opacity"),P=De("padding"),j=De("saturate"),U=De("scale"),J=De("sepia"),K=De("skew"),Q=De("space"),q=De("translate"),X=()=>["auto","contain","none"],te=()=>["auto","hidden","clip","visible","scroll"],ne=()=>["auto",ue,n],V=()=>[ue,n],he=()=>["",hn,Mn],Ie=()=>["auto",Sr,ue],Ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Se=()=>["solid","dashed","dotted","double","none"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>["start","end","center","between","around","evenly","stretch"],Re=()=>["","0",ue],dt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[Sr,ue];return{cacheSize:500,separator:":",theme:{colors:[ti],spacing:[hn,Mn],blur:["none","",Dn,ue],brightness:se(),borderColor:[t],borderRadius:["none","","full",Dn,ue],borderSpacing:V(),borderWidth:he(),contrast:se(),grayscale:Re(),hueRotate:se(),invert:Re(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[T_,Mn],inset:ne(),margin:ne(),opacity:se(),padding:V(),saturate:se(),scale:se(),sepia:Re(),skew:se(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",ue]}],container:["container"],columns:[{columns:[Dn]}],"break-after":[{"break-after":dt()}],"break-before":[{"break-before":dt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ne(),ue]}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ei,ue]}],basis:[{basis:ne()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ue]}],grow:[{grow:Re()}],shrink:[{shrink:Re()}],order:[{order:["first","last","none",ei,ue]}],"grid-cols":[{"grid-cols":[ti]}],"col-start-end":[{col:["auto",{span:["full",ei,ue]},ue]}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":[ti]}],"row-start-end":[{row:["auto",{span:[ei,ue]},ue]}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ue]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...Ce()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ce(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ce(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[Q]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Q]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ue,n]}],"min-w":[{"min-w":[ue,n,"min","max","fit"]}],"max-w":[{"max-w":[ue,n,"none","full","min","max","fit","prose",{screen:[Dn]},Dn]}],h:[{h:[ue,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ue,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ue,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ue,n,"auto","min","max","fit"]}],"font-size":[{text:["base",Dn,Mn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ha]}],"font-family":[{font:[ti]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ue]}],"line-clamp":[{"line-clamp":["none",Sr,ha]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hn,ue]}],"list-image":[{"list-image":["none",ue]}],"list-style-type":[{list:["none","disc","decimal",ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[D]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[D]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hn,Mn]}],"underline-offset":[{"underline-offset":["auto",hn,ue]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[D]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ne(),C_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",E_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},k_]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[O]}],"gradient-via-pos":[{via:[O]}],"gradient-to-pos":[{to:[O]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[D]}],"border-style":[{border:[...Se(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[D]}],"divide-style":[{divide:Se()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Se()]}],"outline-offset":[{"outline-offset":[hn,ue]}],"outline-w":[{outline:[hn,Mn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[D]}],"ring-offset-w":[{"ring-offset":[hn,Mn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Dn,R_]}],"shadow-color":[{shadow:[ti]}],opacity:[{opacity:[D]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ee()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Dn,ue]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[b]}],invert:[{invert:[_]}],saturate:[{saturate:[j]}],sepia:[{sepia:[J]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[b]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[D]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[J]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ue]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",ue]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[U]}],"scale-x":[{"scale-x":[U]}],"scale-y":[{"scale-y":[U]}],rotate:[{rotate:[ei,ue]}],"translate-x":[{"translate-x":[q]}],"translate-y":[{"translate-y":[q]}],"skew-x":[{"skew-x":[K]}],"skew-y":[{"skew-y":[K]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ue]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ue]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ue]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[hn,Mn,ha]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},L_=m_(P_);function rt(...t){return L_(rf(t))}function N_(t,n={}){const{decimals:r=0,sizeType:s="normal"}=n,a=["Bytes","KB","MB","GB","TB"],c=["Bytes","KiB","MiB","GiB","TiB"];if(t===0)return"0 Byte";const u=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,u)).toFixed(r)} ${s==="accurate"?c[u]??"Bytest":a[u]??"Bytes"}`}const uf=r_("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Le=C.forwardRef(({className:t,variant:n,size:r,asChild:s=!1,...a},c)=>{const u=s?oi:"button";return v.jsx(u,{className:rt(uf({variant:n,size:r,className:t})),ref:c,...a})});Le.displayName="Button";function Xa(t,[n,r]){return Math.min(r,Math.max(n,t))}function He(t,n,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return n?.(a)}}function bi(t,n=[]){let r=[];function s(c,u){const d=C.createContext(u),h=r.length;r=[...r,u];const m=_=>{const{scope:x,children:E,...O}=_,k=x?.[t]?.[h]||d,A=C.useMemo(()=>O,Object.values(O));return v.jsx(k.Provider,{value:A,children:E})};m.displayName=c+"Provider";function b(_,x){const E=x?.[t]?.[h]||d,O=C.useContext(E);if(O)return O;if(u!==void 0)return u;throw new Error(`\`${_}\` must be used within \`${c}\``)}return[m,b]}const a=()=>{const c=r.map(u=>C.createContext(u));return function(d){const h=d?.[t]||c;return C.useMemo(()=>({[`__scope${t}`]:{...d,[t]:h}}),[d,h])}};return a.scopeName=t,[s,j_(a,...n)]}function j_(...t){const n=t[0];if(t.length===1)return n;const r=()=>{const s=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const u=s.reduce((d,{useScope:h,scopeName:m})=>{const _=h(c)[`__scope${m}`];return{...d,..._}},{});return C.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return r.scopeName=n.scopeName,r}function Zt(t){const n=C.useRef(t);return C.useEffect(()=>{n.current=t}),C.useMemo(()=>(...r)=>n.current?.(...r),[])}function Za({prop:t,defaultProp:n,onChange:r=()=>{}}){const[s,a]=F_({defaultProp:n,onChange:r}),c=t!==void 0,u=c?t:s,d=Zt(r),h=C.useCallback(m=>{if(c){const _=typeof m=="function"?m(t):m;_!==t&&d(_)}else a(m)},[c,t,a,d]);return[u,h]}function F_({defaultProp:t,onChange:n}){const r=C.useState(t),[s]=r,a=C.useRef(s),c=Zt(n);return C.useEffect(()=>{a.current!==s&&(c(s),a.current=s)},[s,a,c]),r}var U_=C.createContext(void 0);function Ds(t){const n=C.useContext(U_);return t||n||"ltr"}function z_(t){const n=C.useRef({value:t,previous:t});return C.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var ai=globalThis?.document?C.useLayoutEffect:()=>{};function H_(t){const[n,r]=C.useState(void 0);return ai(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const c=a[0];let u,d;if("borderBoxSize"in c){const h=c.borderBoxSize,m=Array.isArray(h)?h[0]:h;u=m.inlineSize,d=m.blockSize}else u=t.offsetWidth,d=t.offsetHeight;r({width:u,height:d})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),n}var W_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],lt=W_.reduce((t,n)=>{const r=C.forwardRef((s,a)=>{const{asChild:c,...u}=s,d=c?oi:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:a})});return r.displayName=`Primitive.${n}`,{...t,[n]:r}},{});function df(t){const n=t+"CollectionProvider",[r,s]=bi(n),[a,c]=r(n,{collectionRef:{current:null},itemMap:new Map}),u=E=>{const{scope:O,children:k}=E,A=G.useRef(null),D=G.useRef(new Map).current;return v.jsx(a,{scope:O,itemMap:D,collectionRef:A,children:k})};u.displayName=n;const d=t+"CollectionSlot",h=G.forwardRef((E,O)=>{const{scope:k,children:A}=E,D=c(d,k),P=ct(O,D.collectionRef);return v.jsx(oi,{ref:P,children:A})});h.displayName=d;const m=t+"CollectionItemSlot",b="data-radix-collection-item",_=G.forwardRef((E,O)=>{const{scope:k,children:A,...D}=E,P=G.useRef(null),j=ct(O,P),U=c(m,k);return G.useEffect(()=>(U.itemMap.set(P,{ref:P,...D}),()=>void U.itemMap.delete(P))),v.jsx(oi,{[b]:"",ref:j,children:A})});_.displayName=m;function x(E){const O=c(t+"CollectionConsumer",E);return G.useCallback(()=>{const A=O.collectionRef.current;if(!A)return[];const D=Array.from(A.querySelectorAll(`[${b}]`));return Array.from(O.itemMap.values()).sort((U,J)=>D.indexOf(U.ref.current)-D.indexOf(J.ref.current))},[O.collectionRef,O.itemMap])}return[{Provider:u,Slot:h,ItemSlot:_},x,s]}var ff=["PageUp","PageDown"],hf=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pf={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Er="Slider",[Ea,B_,V_]=df(Er),[gf,oI]=bi(Er,[V_]),[$_,Ps]=gf(Er),mf=C.forwardRef((t,n)=>{const{name:r,min:s=0,max:a=100,step:c=1,orientation:u="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:m=[s],value:b,onValueChange:_=()=>{},onValueCommit:x=()=>{},inverted:E=!1,form:O,...k}=t,A=C.useRef(new Set),D=C.useRef(0),j=u==="horizontal"?G_:Y_,[U=[],J]=Za({prop:b,defaultProp:m,onChange:ne=>{[...A.current][D.current]?.focus(),_(ne)}}),K=C.useRef(U);function Q(ne){const V=J_(U,ne);te(ne,V)}function q(ne){te(ne,D.current)}function X(){const ne=K.current[D.current];U[D.current]!==ne&&x(U)}function te(ne,V,{commit:he}={commit:!1}){const Ie=n5(c),Ne=r5(Math.round((ne-s)/c)*c+s,Ie),Se=Xa(Ne,[s,a]);J((Ee=[])=>{const Ce=K_(Ee,Se,V);if(t5(Ce,h*c)){D.current=Ce.indexOf(Se);const Re=String(Ce)!==String(Ee);return Re&&he&&x(Ce),Re?Ce:Ee}else return Ee})}return v.jsx($_,{scope:t.__scopeSlider,name:r,disabled:d,min:s,max:a,valueIndexToChangeRef:D,thumbs:A.current,values:U,orientation:u,form:O,children:v.jsx(Ea.Provider,{scope:t.__scopeSlider,children:v.jsx(Ea.Slot,{scope:t.__scopeSlider,children:v.jsx(j,{"aria-disabled":d,"data-disabled":d?"":void 0,...k,ref:n,onPointerDown:He(k.onPointerDown,()=>{d||(K.current=U)}),min:s,max:a,inverted:E,onSlideStart:d?void 0:Q,onSlideMove:d?void 0:q,onSlideEnd:d?void 0:X,onHomeKeyDown:()=>!d&&te(s,0,{commit:!0}),onEndKeyDown:()=>!d&&te(a,U.length-1,{commit:!0}),onStepKeyDown:({event:ne,direction:V})=>{if(!d){const Ne=ff.includes(ne.key)||ne.shiftKey&&hf.includes(ne.key)?10:1,Se=D.current,Ee=U[Se],Ce=c*Ne*V;te(Ee+Ce,Se,{commit:!0})}}})})})})});mf.displayName=Er;var[vf,bf]=gf(Er,{startEdge:"left",endEdge:"right",size:"width",direction:1}),G_=C.forwardRef((t,n)=>{const{min:r,max:s,dir:a,inverted:c,onSlideStart:u,onSlideMove:d,onSlideEnd:h,onStepKeyDown:m,...b}=t,[_,x]=C.useState(null),E=ct(n,j=>x(j)),O=C.useRef(void 0),k=Ds(a),A=k==="ltr",D=A&&!c||!A&&c;function P(j){const U=O.current||_.getBoundingClientRect(),J=[0,U.width],Q=Ka(J,D?[r,s]:[s,r]);return O.current=U,Q(j-U.left)}return v.jsx(vf,{scope:t.__scopeSlider,startEdge:D?"left":"right",endEdge:D?"right":"left",direction:D?1:-1,size:"width",children:v.jsx(yf,{dir:k,"data-orientation":"horizontal",...b,ref:E,style:{...b.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const U=P(j.clientX);u?.(U)},onSlideMove:j=>{const U=P(j.clientX);d?.(U)},onSlideEnd:()=>{O.current=void 0,h?.()},onStepKeyDown:j=>{const J=pf[D?"from-left":"from-right"].includes(j.key);m?.({event:j,direction:J?-1:1})}})})}),Y_=C.forwardRef((t,n)=>{const{min:r,max:s,inverted:a,onSlideStart:c,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h,...m}=t,b=C.useRef(null),_=ct(n,b),x=C.useRef(void 0),E=!a;function O(k){const A=x.current||b.current.getBoundingClientRect(),D=[0,A.height],j=Ka(D,E?[s,r]:[r,s]);return x.current=A,j(k-A.top)}return v.jsx(vf,{scope:t.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:v.jsx(yf,{"data-orientation":"vertical",...m,ref:_,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:k=>{const A=O(k.clientY);c?.(A)},onSlideMove:k=>{const A=O(k.clientY);u?.(A)},onSlideEnd:()=>{x.current=void 0,d?.()},onStepKeyDown:k=>{const D=pf[E?"from-bottom":"from-top"].includes(k.key);h?.({event:k,direction:D?-1:1})}})})}),yf=C.forwardRef((t,n)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:c,onHomeKeyDown:u,onEndKeyDown:d,onStepKeyDown:h,...m}=t,b=Ps(Er,r);return v.jsx(lt.span,{...m,ref:n,onKeyDown:He(t.onKeyDown,_=>{_.key==="Home"?(u(_),_.preventDefault()):_.key==="End"?(d(_),_.preventDefault()):ff.concat(hf).includes(_.key)&&(h(_),_.preventDefault())}),onPointerDown:He(t.onPointerDown,_=>{const x=_.target;x.setPointerCapture(_.pointerId),_.preventDefault(),b.thumbs.has(x)?x.focus():s(_)}),onPointerMove:He(t.onPointerMove,_=>{_.target.hasPointerCapture(_.pointerId)&&a(_)}),onPointerUp:He(t.onPointerUp,_=>{const x=_.target;x.hasPointerCapture(_.pointerId)&&(x.releasePointerCapture(_.pointerId),c(_))})})}),_f="SliderTrack",wf=C.forwardRef((t,n)=>{const{__scopeSlider:r,...s}=t,a=Ps(_f,r);return v.jsx(lt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:n})});wf.displayName=_f;var Ca="SliderRange",Sf=C.forwardRef((t,n)=>{const{__scopeSlider:r,...s}=t,a=Ps(Ca,r),c=bf(Ca,r),u=C.useRef(null),d=ct(n,u),h=a.values.length,m=a.values.map(x=>Tf(x,a.min,a.max)),b=h>1?Math.min(...m):0,_=100-Math.max(...m);return v.jsx(lt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:d,style:{...t.style,[c.startEdge]:b+"%",[c.endEdge]:_+"%"}})});Sf.displayName=Ca;var Aa="SliderThumb",xf=C.forwardRef((t,n)=>{const r=B_(t.__scopeSlider),[s,a]=C.useState(null),c=ct(n,d=>a(d)),u=C.useMemo(()=>s?r().findIndex(d=>d.ref.current===s):-1,[r,s]);return v.jsx(X_,{...t,ref:c,index:u})}),X_=C.forwardRef((t,n)=>{const{__scopeSlider:r,index:s,name:a,...c}=t,u=Ps(Aa,r),d=bf(Aa,r),[h,m]=C.useState(null),b=ct(n,P=>m(P)),_=h?u.form||!!h.closest("form"):!0,x=H_(h),E=u.values[s],O=E===void 0?0:Tf(E,u.min,u.max),k=q_(s,u.values.length),A=x?.[d.size],D=A?Q_(A,O,d.direction):0;return C.useEffect(()=>{if(h)return u.thumbs.add(h),()=>{u.thumbs.delete(h)}},[h,u.thumbs]),v.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${O}% + ${D}px)`},children:[v.jsx(Ea.ItemSlot,{scope:t.__scopeSlider,children:v.jsx(lt.span,{role:"slider","aria-label":t["aria-label"]||k,"aria-valuemin":u.min,"aria-valuenow":E,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...c,ref:b,style:E===void 0?{display:"none"}:t.style,onFocus:He(t.onFocus,()=>{u.valueIndexToChangeRef.current=s})})}),_&&v.jsx(Z_,{name:a??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:E},s)]})});xf.displayName=Aa;var Z_=t=>{const{value:n,...r}=t,s=C.useRef(null),a=z_(n);return C.useEffect(()=>{const c=s.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==n&&h){const m=new Event("input",{bubbles:!0});h.call(c,n),c.dispatchEvent(m)}},[a,n]),v.jsx("input",{style:{display:"none"},...r,ref:s,defaultValue:n})};function K_(t=[],n,r){const s=[...t];return s[r]=n,s.sort((a,c)=>a-c)}function Tf(t,n,r){const c=100/(r-n)*(t-n);return Xa(c,[0,100])}function q_(t,n){return n>2?`Value ${t+1} of ${n}`:n===2?["Minimum","Maximum"][t]:void 0}function J_(t,n){if(t.length===1)return 0;const r=t.map(a=>Math.abs(a-n)),s=Math.min(...r);return r.indexOf(s)}function Q_(t,n,r){const s=t/2,c=Ka([0,50],[0,s]);return(s-c(n)*r)*r}function e5(t){return t.slice(0,-1).map((n,r)=>t[r+1]-n)}function t5(t,n){if(n>0){const r=e5(t);return Math.min(...r)>=n}return!0}function Ka(t,n){return r=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(t[1]-t[0]);return n[0]+s*(r-t[0])}}function n5(t){return(String(t).split(".")[1]||"").length}function r5(t,n){const r=Math.pow(10,n);return Math.round(t*r)/r}var If=mf,i5=wf,s5=Sf,o5=xf;const Ef=C.forwardRef(({className:t,...n},r)=>v.jsxs(If,{ref:r,className:rt("relative flex w-full touch-none select-none items-center",t),...n,children:[v.jsx(i5,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:v.jsx(s5,{className:"absolute h-full bg-primary"})}),v.jsx(o5,{className:"block h-4 w-4 cursor-pointer rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Ef.displayName=If.displayName;function a5(t,n){return C.useReducer((r,s)=>n[r][s]??r,t)}var Cr=t=>{const{present:n,children:r}=t,s=c5(n),a=typeof r=="function"?r({present:s.isPresent}):C.Children.only(r),c=ct(s.ref,l5(a));return typeof r=="function"||s.isPresent?C.cloneElement(a,{ref:c}):null};Cr.displayName="Presence";function c5(t){const[n,r]=C.useState(),s=C.useRef({}),a=C.useRef(t),c=C.useRef("none"),u=t?"mounted":"unmounted",[d,h]=a5(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const m=vs(s.current);c.current=d==="mounted"?m:"none"},[d]),ai(()=>{const m=s.current,b=a.current;if(b!==t){const x=c.current,E=vs(m);t?h("MOUNT"):E==="none"||m?.display==="none"?h("UNMOUNT"):h(b&&x!==E?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,h]),ai(()=>{if(n){let m;const b=n.ownerDocument.defaultView??window,_=E=>{const k=vs(s.current).includes(E.animationName);if(E.target===n&&k&&(h("ANIMATION_END"),!a.current)){const A=n.style.animationFillMode;n.style.animationFillMode="forwards",m=b.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=A)})}},x=E=>{E.target===n&&(c.current=vs(s.current))};return n.addEventListener("animationstart",x),n.addEventListener("animationcancel",_),n.addEventListener("animationend",_),()=>{b.clearTimeout(m),n.removeEventListener("animationstart",x),n.removeEventListener("animationcancel",_),n.removeEventListener("animationend",_)}}else h("ANIMATION_END")},[n,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:C.useCallback(m=>{m&&(s.current=getComputedStyle(m)),r(m)},[])}}function vs(t){return t?.animationName||"none"}function l5(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function u5(t,n){return C.useReducer((r,s)=>n[r][s]??r,t)}var qa="ScrollArea",[Cf,aI]=bi(qa),[d5,Nt]=Cf(qa),Af=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:c=600,...u}=t,[d,h]=C.useState(null),[m,b]=C.useState(null),[_,x]=C.useState(null),[E,O]=C.useState(null),[k,A]=C.useState(null),[D,P]=C.useState(0),[j,U]=C.useState(0),[J,K]=C.useState(!1),[Q,q]=C.useState(!1),X=ct(n,ne=>h(ne)),te=Ds(a);return v.jsx(d5,{scope:r,type:s,dir:te,scrollHideDelay:c,scrollArea:d,viewport:m,onViewportChange:b,content:_,onContentChange:x,scrollbarX:E,onScrollbarXChange:O,scrollbarXEnabled:J,onScrollbarXEnabledChange:K,scrollbarY:k,onScrollbarYChange:A,scrollbarYEnabled:Q,onScrollbarYEnabledChange:q,onCornerWidthChange:P,onCornerHeightChange:U,children:v.jsx(lt.div,{dir:te,...u,ref:X,style:{position:"relative","--radix-scroll-area-corner-width":D+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});Af.displayName=qa;var kf="ScrollAreaViewport",Rf=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,children:s,nonce:a,...c}=t,u=Nt(kf,r),d=C.useRef(null),h=ct(n,d,u.onViewportChange);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),v.jsx(lt.div,{"data-radix-scroll-area-viewport":"",...c,ref:h,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...t.style},children:v.jsx("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});Rf.displayName=kf;var Jt="ScrollAreaScrollbar",Ls=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=Nt(Jt,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:u}=a,d=t.orientation==="horizontal";return C.useEffect(()=>(d?c(!0):u(!0),()=>{d?c(!1):u(!1)}),[d,c,u]),a.type==="hover"?v.jsx(f5,{...s,ref:n,forceMount:r}):a.type==="scroll"?v.jsx(h5,{...s,ref:n,forceMount:r}):a.type==="auto"?v.jsx(Of,{...s,ref:n,forceMount:r}):a.type==="always"?v.jsx(Ja,{...s,ref:n}):null});Ls.displayName=Jt;var f5=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=Nt(Jt,t.__scopeScrollArea),[c,u]=C.useState(!1);return C.useEffect(()=>{const d=a.scrollArea;let h=0;if(d){const m=()=>{window.clearTimeout(h),u(!0)},b=()=>{h=window.setTimeout(()=>u(!1),a.scrollHideDelay)};return d.addEventListener("pointerenter",m),d.addEventListener("pointerleave",b),()=>{window.clearTimeout(h),d.removeEventListener("pointerenter",m),d.removeEventListener("pointerleave",b)}}},[a.scrollArea,a.scrollHideDelay]),v.jsx(Cr,{present:r||c,children:v.jsx(Of,{"data-state":c?"visible":"hidden",...s,ref:n})})}),h5=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=Nt(Jt,t.__scopeScrollArea),c=t.orientation==="horizontal",u=js(()=>h("SCROLL_END"),100),[d,h]=u5("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(d==="idle"){const m=window.setTimeout(()=>h("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(m)}},[d,a.scrollHideDelay,h]),C.useEffect(()=>{const m=a.viewport,b=c?"scrollLeft":"scrollTop";if(m){let _=m[b];const x=()=>{const E=m[b];_!==E&&(h("SCROLL"),u()),_=E};return m.addEventListener("scroll",x),()=>m.removeEventListener("scroll",x)}},[a.viewport,c,h,u]),v.jsx(Cr,{present:r||d!=="hidden",children:v.jsx(Ja,{"data-state":d==="hidden"?"hidden":"visible",...s,ref:n,onPointerEnter:He(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:He(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),Of=C.forwardRef((t,n)=>{const r=Nt(Jt,t.__scopeScrollArea),{forceMount:s,...a}=t,[c,u]=C.useState(!1),d=t.orientation==="horizontal",h=js(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,b=r.viewport.offsetHeight<r.viewport.scrollHeight;u(d?m:b)}},10);return xr(r.viewport,h),xr(r.content,h),v.jsx(Cr,{present:s||c,children:v.jsx(Ja,{"data-state":c?"visible":"hidden",...a,ref:n})})}),Ja=C.forwardRef((t,n)=>{const{orientation:r="vertical",...s}=t,a=Nt(Jt,t.__scopeScrollArea),c=C.useRef(null),u=C.useRef(0),[d,h]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=Lf(d.viewport,d.content),b={...s,sizes:d,onSizesChange:h,hasThumb:m>0&&m<1,onThumbChange:x=>c.current=x,onThumbPointerUp:()=>u.current=0,onThumbPointerDown:x=>u.current=x};function _(x,E){return y5(x,u.current,d,E)}return r==="horizontal"?v.jsx(p5,{...b,ref:n,onThumbPositionChange:()=>{if(a.viewport&&c.current){const x=a.viewport.scrollLeft,E=yd(x,d,a.dir);c.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollLeft=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollLeft=_(x,a.dir))}}):r==="vertical"?v.jsx(g5,{...b,ref:n,onThumbPositionChange:()=>{if(a.viewport&&c.current){const x=a.viewport.scrollTop,E=yd(x,d);c.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollTop=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollTop=_(x))}}):null}),p5=C.forwardRef((t,n)=>{const{sizes:r,onSizesChange:s,...a}=t,c=Nt(Jt,t.__scopeScrollArea),[u,d]=C.useState(),h=C.useRef(null),m=ct(n,h,c.onScrollbarXChange);return C.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),v.jsx(Df,{"data-orientation":"horizontal",...a,ref:m,sizes:r,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ns(r)+"px",...t.style},onThumbPointerDown:b=>t.onThumbPointerDown(b.x),onDragScroll:b=>t.onDragScroll(b.x),onWheelScroll:(b,_)=>{if(c.viewport){const x=c.viewport.scrollLeft+b.deltaX;t.onWheelScroll(x),jf(x,_)&&b.preventDefault()}},onResize:()=>{h.current&&c.viewport&&u&&s({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Ss(u.paddingLeft),paddingEnd:Ss(u.paddingRight)}})}})}),g5=C.forwardRef((t,n)=>{const{sizes:r,onSizesChange:s,...a}=t,c=Nt(Jt,t.__scopeScrollArea),[u,d]=C.useState(),h=C.useRef(null),m=ct(n,h,c.onScrollbarYChange);return C.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),v.jsx(Df,{"data-orientation":"vertical",...a,ref:m,sizes:r,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ns(r)+"px",...t.style},onThumbPointerDown:b=>t.onThumbPointerDown(b.y),onDragScroll:b=>t.onDragScroll(b.y),onWheelScroll:(b,_)=>{if(c.viewport){const x=c.viewport.scrollTop+b.deltaY;t.onWheelScroll(x),jf(x,_)&&b.preventDefault()}},onResize:()=>{h.current&&c.viewport&&u&&s({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Ss(u.paddingTop),paddingEnd:Ss(u.paddingBottom)}})}})}),[m5,Mf]=Cf(Jt),Df=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:c,onThumbPointerUp:u,onThumbPointerDown:d,onThumbPositionChange:h,onDragScroll:m,onWheelScroll:b,onResize:_,...x}=t,E=Nt(Jt,r),[O,k]=C.useState(null),A=ct(n,X=>k(X)),D=C.useRef(null),P=C.useRef(""),j=E.viewport,U=s.content-s.viewport,J=Zt(b),K=Zt(h),Q=js(_,10);function q(X){if(D.current){const te=X.clientX-D.current.left,ne=X.clientY-D.current.top;m({x:te,y:ne})}}return C.useEffect(()=>{const X=te=>{const ne=te.target;O?.contains(ne)&&J(te,U)};return document.addEventListener("wheel",X,{passive:!1}),()=>document.removeEventListener("wheel",X,{passive:!1})},[j,O,U,J]),C.useEffect(K,[s,K]),xr(O,Q),xr(E.content,Q),v.jsx(m5,{scope:r,scrollbar:O,hasThumb:a,onThumbChange:Zt(c),onThumbPointerUp:Zt(u),onThumbPositionChange:K,onThumbPointerDown:Zt(d),children:v.jsx(lt.div,{...x,ref:A,style:{position:"absolute",...x.style},onPointerDown:He(t.onPointerDown,X=>{X.button===0&&(X.target.setPointerCapture(X.pointerId),D.current=O.getBoundingClientRect(),P.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),q(X))}),onPointerMove:He(t.onPointerMove,q),onPointerUp:He(t.onPointerUp,X=>{const te=X.target;te.hasPointerCapture(X.pointerId)&&te.releasePointerCapture(X.pointerId),document.body.style.webkitUserSelect=P.current,E.viewport&&(E.viewport.style.scrollBehavior=""),D.current=null})})})}),ws="ScrollAreaThumb",Qa=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=Mf(ws,t.__scopeScrollArea);return v.jsx(Cr,{present:r||a.hasThumb,children:v.jsx(v5,{ref:n,...s})})}),v5=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,style:s,...a}=t,c=Nt(ws,r),u=Mf(ws,r),{onThumbPositionChange:d}=u,h=ct(n,_=>u.onThumbChange(_)),m=C.useRef(void 0),b=js(()=>{m.current&&(m.current(),m.current=void 0)},100);return C.useEffect(()=>{const _=c.viewport;if(_){const x=()=>{if(b(),!m.current){const E=_5(_,d);m.current=E,d()}};return d(),_.addEventListener("scroll",x),()=>_.removeEventListener("scroll",x)}},[c.viewport,b,d]),v.jsx(lt.div,{"data-state":u.hasThumb?"visible":"hidden",...a,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:He(t.onPointerDownCapture,_=>{const E=_.target.getBoundingClientRect(),O=_.clientX-E.left,k=_.clientY-E.top;u.onThumbPointerDown({x:O,y:k})}),onPointerUp:He(t.onPointerUp,u.onThumbPointerUp)})});Qa.displayName=ws;var ec="ScrollAreaCorner",Pf=C.forwardRef((t,n)=>{const r=Nt(ec,t.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?v.jsx(b5,{...t,ref:n}):null});Pf.displayName=ec;var b5=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,...s}=t,a=Nt(ec,r),[c,u]=C.useState(0),[d,h]=C.useState(0),m=!!(c&&d);return xr(a.scrollbarX,()=>{const b=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(b),h(b)}),xr(a.scrollbarY,()=>{const b=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(b),u(b)}),m?v.jsx(lt.div,{...s,ref:n,style:{width:c,height:d,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ss(t){return t?parseInt(t,10):0}function Lf(t,n){const r=t/n;return isNaN(r)?0:r}function Ns(t){const n=Lf(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-r)*n;return Math.max(s,18)}function y5(t,n,r,s="ltr"){const a=Ns(r),c=a/2,u=n||c,d=a-u,h=r.scrollbar.paddingStart+u,m=r.scrollbar.size-r.scrollbar.paddingEnd-d,b=r.content-r.viewport,_=s==="ltr"?[0,b]:[b*-1,0];return Nf([h,m],_)(t)}function yd(t,n,r="ltr"){const s=Ns(n),a=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,c=n.scrollbar.size-a,u=n.content-n.viewport,d=c-s,h=r==="ltr"?[0,u]:[u*-1,0],m=Xa(t,h);return Nf([0,u],[0,d])(m)}function Nf(t,n){return r=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(t[1]-t[0]);return n[0]+s*(r-t[0])}}function jf(t,n){return t>0&&t<n}var _5=(t,n=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},s=0;return function a(){const c={left:t.scrollLeft,top:t.scrollTop},u=r.left!==c.left,d=r.top!==c.top;(u||d)&&n(),r=c,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function js(t,n){const r=Zt(t),s=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(s.current),[]),C.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,n)},[r,n])}function xr(t,n){const r=Zt(n);ai(()=>{let s=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(s),a.unobserve(t)}}},[t,r])}var xs=Af,ka=Rf,_d=Ls,wd=Qa,w5=Pf;const rr=C.forwardRef(({className:t,children:n,...r},s)=>v.jsxs(xs,{ref:s,className:rt("relative overflow-hidden",t),...r,children:[v.jsx(ka,{className:"h-full w-full rounded-[inherit]",children:n}),v.jsx(tc,{}),v.jsx(w5,{})]}));rr.displayName=xs.displayName;const tc=C.forwardRef(({className:t,orientation:n="vertical",...r},s)=>v.jsx(Ls,{ref:s,orientation:n,className:rt("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:v.jsx(Qa,{className:"relative flex-1 rounded-full bg-border"})}));tc.displayName=Ls.displayName;const yi=({children:t,renderCustomPreview:n,data:r={},shouldDisplayPreview:s=!0})=>{const[a,c]=G.useState(!1),[u,d]=G.useState({x:0,y:0}),h=G.useRef(null),m=E=>{c(!0),E.dataTransfer.setDragImage(new Image,0,0),E.dataTransfer.setData(JSON.stringify(r),JSON.stringify(r)),d({x:E.clientX,y:E.clientY})},b=()=>{c(!1)},_=E=>{a&&d({x:E.clientX,y:E.clientY})},x=G.cloneElement(t,{draggable:!0,onDragStart:m,onDragEnd:b,onDrag:_,style:{...t.props.style}});return v.jsxs(v.Fragment,{children:[x,a&&s&&n?Xy.createPortal(v.jsx("div",{ref:h,style:{position:"fixed",left:u.x,top:u.y,pointerEvents:"none",zIndex:9999,transform:"translate(-50%, -50%)"},children:n}),document.body):null]})};var S5=C.useId||(()=>{}),x5=0;function Ff(t){const[n,r]=C.useState(S5());return ai(()=>{r(s=>s??String(x5++))},[t]),n?`radix-${n}`:""}var pa="rovingFocusGroup.onEntryFocus",T5={bubbles:!1,cancelable:!0},Fs="RovingFocusGroup",[Ra,Uf,I5]=df(Fs),[E5,zf]=bi(Fs,[I5]),[C5,A5]=E5(Fs),Hf=C.forwardRef((t,n)=>v.jsx(Ra.Provider,{scope:t.__scopeRovingFocusGroup,children:v.jsx(Ra.Slot,{scope:t.__scopeRovingFocusGroup,children:v.jsx(k5,{...t,ref:n})})}));Hf.displayName=Fs;var k5=C.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:b=!1,..._}=t,x=C.useRef(null),E=ct(n,x),O=Ds(c),[k=null,A]=Za({prop:u,defaultProp:d,onChange:h}),[D,P]=C.useState(!1),j=Zt(m),U=Uf(r),J=C.useRef(!1),[K,Q]=C.useState(0);return C.useEffect(()=>{const q=x.current;if(q)return q.addEventListener(pa,j),()=>q.removeEventListener(pa,j)},[j]),v.jsx(C5,{scope:r,orientation:s,dir:O,loop:a,currentTabStopId:k,onItemFocus:C.useCallback(q=>A(q),[A]),onItemShiftTab:C.useCallback(()=>P(!0),[]),onFocusableItemAdd:C.useCallback(()=>Q(q=>q+1),[]),onFocusableItemRemove:C.useCallback(()=>Q(q=>q-1),[]),children:v.jsx(lt.div,{tabIndex:D||K===0?-1:0,"data-orientation":s,..._,ref:E,style:{outline:"none",...t.style},onMouseDown:He(t.onMouseDown,()=>{J.current=!0}),onFocus:He(t.onFocus,q=>{const X=!J.current;if(q.target===q.currentTarget&&X&&!D){const te=new CustomEvent(pa,T5);if(q.currentTarget.dispatchEvent(te),!te.defaultPrevented){const ne=U().filter(Se=>Se.focusable),V=ne.find(Se=>Se.active),he=ne.find(Se=>Se.id===k),Ne=[V,he,...ne].filter(Boolean).map(Se=>Se.ref.current);Vf(Ne,b)}}J.current=!1}),onBlur:He(t.onBlur,()=>P(!1))})})}),Wf="RovingFocusGroupItem",Bf=C.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:c,...u}=t,d=Ff(),h=c||d,m=A5(Wf,r),b=m.currentTabStopId===h,_=Uf(r),{onFocusableItemAdd:x,onFocusableItemRemove:E}=m;return C.useEffect(()=>{if(s)return x(),()=>E()},[s,x,E]),v.jsx(Ra.ItemSlot,{scope:r,id:h,focusable:s,active:a,children:v.jsx(lt.span,{tabIndex:b?0:-1,"data-orientation":m.orientation,...u,ref:n,onMouseDown:He(t.onMouseDown,O=>{s?m.onItemFocus(h):O.preventDefault()}),onFocus:He(t.onFocus,()=>m.onItemFocus(h)),onKeyDown:He(t.onKeyDown,O=>{if(O.key==="Tab"&&O.shiftKey){m.onItemShiftTab();return}if(O.target!==O.currentTarget)return;const k=M5(O,m.orientation,m.dir);if(k!==void 0){if(O.metaKey||O.ctrlKey||O.altKey||O.shiftKey)return;O.preventDefault();let D=_().filter(P=>P.focusable).map(P=>P.ref.current);if(k==="last")D.reverse();else if(k==="prev"||k==="next"){k==="prev"&&D.reverse();const P=D.indexOf(O.currentTarget);D=m.loop?D5(D,P+1):D.slice(P+1)}setTimeout(()=>Vf(D))}})})})});Bf.displayName=Wf;var R5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function O5(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function M5(t,n,r){const s=O5(t.key,r);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return R5[s]}function Vf(t,n=!1){const r=document.activeElement;for(const s of t)if(s===r||(s.focus({preventScroll:n}),document.activeElement!==r))return}function D5(t,n){return t.map((r,s)=>t[(n+s)%t.length])}var P5=Hf,L5=Bf,nc="Tabs",[N5,cI]=bi(nc,[zf]),$f=zf(),[j5,rc]=N5(nc),Gf=C.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:c,orientation:u="horizontal",dir:d,activationMode:h="automatic",...m}=t,b=Ds(d),[_,x]=Za({prop:s,onChange:a,defaultProp:c});return v.jsx(j5,{scope:r,baseId:Ff(),value:_,onValueChange:x,orientation:u,dir:b,activationMode:h,children:v.jsx(lt.div,{dir:b,"data-orientation":u,...m,ref:n})})});Gf.displayName=nc;var Yf="TabsList",Xf=C.forwardRef((t,n)=>{const{__scopeTabs:r,loop:s=!0,...a}=t,c=rc(Yf,r),u=$f(r);return v.jsx(P5,{asChild:!0,...u,orientation:c.orientation,dir:c.dir,loop:s,children:v.jsx(lt.div,{role:"tablist","aria-orientation":c.orientation,...a,ref:n})})});Xf.displayName=Yf;var Zf="TabsTrigger",Kf=C.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...c}=t,u=rc(Zf,r),d=$f(r),h=Qf(u.baseId,s),m=eh(u.baseId,s),b=s===u.value;return v.jsx(L5,{asChild:!0,...d,focusable:!a,active:b,children:v.jsx(lt.button,{type:"button",role:"tab","aria-selected":b,"aria-controls":m,"data-state":b?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:h,...c,ref:n,onMouseDown:He(t.onMouseDown,_=>{!a&&_.button===0&&_.ctrlKey===!1?u.onValueChange(s):_.preventDefault()}),onKeyDown:He(t.onKeyDown,_=>{[" ","Enter"].includes(_.key)&&u.onValueChange(s)}),onFocus:He(t.onFocus,()=>{const _=u.activationMode!=="manual";!b&&!a&&_&&u.onValueChange(s)})})})});Kf.displayName=Zf;var qf="TabsContent",Jf=C.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,forceMount:a,children:c,...u}=t,d=rc(qf,r),h=Qf(d.baseId,s),m=eh(d.baseId,s),b=s===d.value,_=C.useRef(b);return C.useEffect(()=>{const x=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(x)},[]),v.jsx(Cr,{present:a||b,children:({present:x})=>v.jsx(lt.div,{"data-state":b?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!x,id:m,tabIndex:0,...u,ref:n,style:{...t.style,animationDuration:_.current?"0s":void 0},children:x&&c})})});Jf.displayName=qf;function Qf(t,n){return`${t}-trigger-${n}`}function eh(t,n){return`${t}-content-${n}`}var F5=Gf,th=Xf,nh=Kf,rh=Jf;const ih=F5,ic=C.forwardRef(({className:t,...n},r)=>v.jsx(th,{ref:r,className:rt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n}));ic.displayName=th.displayName;const Ts=C.forwardRef(({className:t,...n},r)=>v.jsx(nh,{ref:r,className:rt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n}));Ts.displayName=nh.displayName;const Is=C.forwardRef(({className:t,...n},r)=>v.jsx(rh,{ref:r,className:rt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n}));Is.displayName=rh.displayName;const U5="add",z5="track",H5="trackItems",W5="track:changed",B5="trackItems:changed",V5="state",$5="state:changed",sh="add",sc="add:text",Ar="add:video",kr="add:audio",G5="add:placeholder",Rr="add:image",Y5="add:mask",X5="add:transition",Z5="add:animation",K5="edit",q5="edit:object",J5="edit:text",Q5="edit:shape",ew="enterEditMode",oh="player",oc="player:play",ac="player:pause",ah="player:seek",tw="player:seekTo",ch="player:seekBy",lh="player:togglePlay",uh="active",nw="active:set",cc="active:delete",rw="active:paste",lc="active:clone",uc="active:split",dh="layer",iw="layer:locked",sw="layer:hidden",ow="layer:move",aw="layer:select",dc="layer:selection",cw="layer:sendTo",lw="layer:rename",uw="layer:editingName",dw="layer:copy",fw="layer:paste",hw="layer:clone",pw="layer:split",gw="layer:cut",mw="layer:delete",fh="history",fc="history:undo",hc="history:redo",vw="history:reset",hh="scale",pc="scale:changed",ph="drag",gc="drag:start",ci="drag:end",gh="timeline",mc="timeline:boundingChanged";var Oa=function(t,n){return Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},Oa(t,n)};function Or(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Oa(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}function Ma(t){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&t[n],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Da(t,n){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),a,c=[],u;try{for(;(n===void 0||n-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(d){u={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(u)throw u.error}}return c}function Pa(t,n,r){if(r||arguments.length===2)for(var s=0,a=n.length,c;s<a;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return t.concat(c||Array.prototype.slice.call(n))}function Kt(t){return typeof t=="function"}function mh(t){var n=function(s){Error.call(s),s.stack=new Error().stack},r=t(n);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var ga=mh(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(s,a){return a+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function La(t,n){if(t){var r=t.indexOf(n);0<=r&&t.splice(r,1)}}var Us=function(){function t(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var n,r,s,a,c;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var d=Ma(u),h=d.next();!h.done;h=d.next()){var m=h.value;m.remove(this)}}catch(k){n={error:k}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}else u.remove(this);var b=this.initialTeardown;if(Kt(b))try{b()}catch(k){c=k instanceof ga?k.errors:[k]}var _=this._finalizers;if(_){this._finalizers=null;try{for(var x=Ma(_),E=x.next();!E.done;E=x.next()){var O=E.value;try{Sd(O)}catch(k){c=c??[],k instanceof ga?c=Pa(Pa([],Da(c)),Da(k.errors)):c.push(k)}}}catch(k){s={error:k}}finally{try{E&&!E.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}}if(c)throw new ga(c)}},t.prototype.add=function(n){var r;if(n&&n!==this)if(this.closed)Sd(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(n)}},t.prototype._hasParent=function(n){var r=this._parentage;return r===n||Array.isArray(r)&&r.includes(n)},t.prototype._addParent=function(n){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(n),r):r?[r,n]:n},t.prototype._removeParent=function(n){var r=this._parentage;r===n?this._parentage=null:Array.isArray(r)&&La(r,n)},t.prototype.remove=function(n){var r=this._finalizers;r&&La(r,n),n instanceof t&&n._removeParent(this)},t.EMPTY=function(){var n=new t;return n.closed=!0,n}(),t}(),vh=Us.EMPTY;function bh(t){return t instanceof Us||t&&"closed"in t&&Kt(t.remove)&&Kt(t.add)&&Kt(t.unsubscribe)}function Sd(t){Kt(t)?t():t.unsubscribe()}var bw={Promise:void 0},yw={setTimeout:function(t,n){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];return setTimeout.apply(void 0,Pa([t,n],Da(r)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function _w(t){yw.setTimeout(function(){throw t})}function xd(){}function _s(t){t()}var vc=function(t){Or(n,t);function n(r){var s=t.call(this)||this;return s.isStopped=!1,r?(s.destination=r,bh(r)&&r.add(s)):s.destination=xw,s}return n.create=function(r,s,a){return new Na(r,s,a)},n.prototype.next=function(r){this.isStopped||this._next(r)},n.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(r){this.destination.next(r)},n.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(Us),ww=function(){function t(n){this.partialObserver=n}return t.prototype.next=function(n){var r=this.partialObserver;if(r.next)try{r.next(n)}catch(s){bs(s)}},t.prototype.error=function(n){var r=this.partialObserver;if(r.error)try{r.error(n)}catch(s){bs(s)}else bs(n)},t.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(r){bs(r)}},t}(),Na=function(t){Or(n,t);function n(r,s,a){var c=t.call(this)||this,u;return Kt(r)||!r?u={next:r??void 0,error:s??void 0,complete:a??void 0}:u=r,c.destination=new ww(u),c}return n}(vc);function bs(t){_w(t)}function Sw(t){throw t}var xw={closed:!0,next:xd,error:Sw,complete:xd},Tw=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Iw(t){return t}function Ew(t){return t.length===0?Iw:t.length===1?t[0]:function(r){return t.reduce(function(s,a){return a(s)},r)}}var Td=function(){function t(n){n&&(this._subscribe=n)}return t.prototype.lift=function(n){var r=new t;return r.source=this,r.operator=n,r},t.prototype.subscribe=function(n,r,s){var a=this,c=Aw(n)?n:new Na(n,r,s);return _s(function(){var u=a,d=u.operator,h=u.source;c.add(d?d.call(c,h):h?a._subscribe(c):a._trySubscribe(c))}),c},t.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(r){n.error(r)}},t.prototype.forEach=function(n,r){var s=this;return r=Id(r),new r(function(a,c){var u=new Na({next:function(d){try{n(d)}catch(h){c(h),u.unsubscribe()}},error:c,complete:a});s.subscribe(u)})},t.prototype._subscribe=function(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)},t.prototype[Tw]=function(){return this},t.prototype.pipe=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Ew(n)(this)},t.prototype.toPromise=function(n){var r=this;return n=Id(n),new n(function(s,a){var c;r.subscribe(function(u){return c=u},function(u){return a(u)},function(){return s(c)})})},t.create=function(n){return new t(n)},t}();function Id(t){var n;return(n=t??bw.Promise)!==null&&n!==void 0?n:Promise}function Cw(t){return t&&Kt(t.next)&&Kt(t.error)&&Kt(t.complete)}function Aw(t){return t&&t instanceof vc||Cw(t)&&bh(t)}function kw(t){return Kt(t?.lift)}function Rw(t){return function(n){if(kw(n))return n.lift(function(r){try{return t(r,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ow(t,n,r,s,a){return new Mw(t,n,r,s,a)}var Mw=function(t){Or(n,t);function n(r,s,a,c,u,d){var h=t.call(this,r)||this;return h.onFinalize=u,h.shouldUnsubscribe=d,h._next=s?function(m){try{s(m)}catch(b){r.error(b)}}:t.prototype._next,h._error=c?function(m){try{c(m)}catch(b){r.error(b)}finally{this.unsubscribe()}}:t.prototype._error,h._complete=a?function(){try{a()}catch(m){r.error(m)}finally{this.unsubscribe()}}:t.prototype._complete,h}return n.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;t.prototype.unsubscribe.call(this),!s&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},n}(vc),Dw=mh(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),bc=function(t){Or(n,t);function n(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return n.prototype.lift=function(r){var s=new Ed(this,this);return s.operator=r,s},n.prototype._throwIfClosed=function(){if(this.closed)throw new Dw},n.prototype.next=function(r){var s=this;_s(function(){var a,c;if(s._throwIfClosed(),!s.isStopped){s.currentObservers||(s.currentObservers=Array.from(s.observers));try{for(var u=Ma(s.currentObservers),d=u.next();!d.done;d=u.next()){var h=d.value;h.next(r)}}catch(m){a={error:m}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(a)throw a.error}}}})},n.prototype.error=function(r){var s=this;_s(function(){if(s._throwIfClosed(),!s.isStopped){s.hasError=s.isStopped=!0,s.thrownError=r;for(var a=s.observers;a.length;)a.shift().error(r)}})},n.prototype.complete=function(){var r=this;_s(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var s=r.observers;s.length;)s.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},n.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},n.prototype._innerSubscribe=function(r){var s=this,a=this,c=a.hasError,u=a.isStopped,d=a.observers;return c||u?vh:(this.currentObservers=null,d.push(r),new Us(function(){s.currentObservers=null,La(d,r)}))},n.prototype._checkFinalizedStatuses=function(r){var s=this,a=s.hasError,c=s.thrownError,u=s.isStopped;a?r.error(c):u&&r.complete()},n.prototype.asObservable=function(){var r=new Td;return r.source=this,r},n.create=function(r,s){return new Ed(r,s)},n}(Td),Ed=function(t){Or(n,t);function n(r,s){var a=t.call(this)||this;return a.destination=r,a.source=s,a}return n.prototype.next=function(r){var s,a;(a=(s=this.destination)===null||s===void 0?void 0:s.next)===null||a===void 0||a.call(s,r)},n.prototype.error=function(r){var s,a;(a=(s=this.destination)===null||s===void 0?void 0:s.error)===null||a===void 0||a.call(s,r)},n.prototype.complete=function(){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||s===void 0||s.call(r)},n.prototype._subscribe=function(r){var s,a;return(a=(s=this.source)===null||s===void 0?void 0:s.subscribe(r))!==null&&a!==void 0?a:vh},n}(bc),Cd=function(t){Or(n,t);function n(r){var s=t.call(this)||this;return s._value=r,s}return Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(r){var s=t.prototype._subscribe.call(this,r);return!s.closed&&r.next(this._value),s},n.prototype.getValue=function(){var r=this,s=r.hasError,a=r.thrownError,c=r._value;if(s)throw a;return this._throwIfClosed(),c},n.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},n}(bc);function gn(t,n){return Rw(function(r,s){var a=0;r.subscribe(Ow(s,function(c){return t.call(n,c,a++)&&s.next(c)}))})}const yh=new bc,Pw=(t,n)=>{yh.next({key:t,value:n})},ve={subject:yh,dispatch:Pw},Qe=[];for(let t=0;t<256;++t)Qe.push((t+256).toString(16).slice(1));function Lw(t,n=0){return(Qe[t[n+0]]+Qe[t[n+1]]+Qe[t[n+2]]+Qe[t[n+3]]+"-"+Qe[t[n+4]]+Qe[t[n+5]]+"-"+Qe[t[n+6]]+Qe[t[n+7]]+"-"+Qe[t[n+8]]+Qe[t[n+9]]+"-"+Qe[t[n+10]]+Qe[t[n+11]]+Qe[t[n+12]]+Qe[t[n+13]]+Qe[t[n+14]]+Qe[t[n+15]]).toLowerCase()}let ma;const Nw=new Uint8Array(16);function jw(){if(!ma){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ma=crypto.getRandomValues.bind(crypto)}return ma(Nw)}const Fw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ad={randomUUID:Fw};function Ze(t,n,r){if(Ad.randomUUID&&!t)return Ad.randomUUID();t=t||{};const s=t.random??t.rng?.()??jw();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Lw(s)}var _h=(t=>(t.IMAGE="image",t.VIDEO="video",t.AUDIO="audio",t))(_h||{});const Uw=t=>{const[n,r]=G.useState(!1),[s,a]=G.useState(!1),c=G.useCallback(b=>{const _={...b,id:Ze()};switch(b.type){case"image":ve.dispatch(Rr,{payload:_});break;case"video":ve.dispatch(Ar,{payload:_});break;case"audio":ve.dispatch(kr,{payload:_});break}},[]),u=G.useCallback(b=>{b.preventDefault();try{const _=b.dataTransfer?.types[0],x=JSON.parse(_);if(!Object.values(_h).includes(x.type))return;a(!0),r(!0),t?.(!0)}catch(_){console.error("Error parsing dragged data:",_)}},[t]),d=G.useCallback(b=>{b.preventDefault(),n&&(a(!0),t?.(!0))},[n,t]),h=G.useCallback(b=>{if(s){b.preventDefault(),a(!1),t?.(!1);try{const _=b.dataTransfer?.types[0],x=JSON.parse(b.dataTransfer.getData(_));c(x)}catch(_){console.error("Error parsing dropped data:",_)}}},[s,t,c]),m=G.useCallback(b=>{b.preventDefault(),b.currentTarget.contains(b.relatedTarget)||(a(!1),r(!1),t?.(!1))},[t]);return{onDragEnter:u,onDragOver:d,onDrop:h,onDragLeave:m,isDraggingOver:s}},wh=({children:t,className:n,style:r,onDragStateChange:s,id:a})=>{const{onDragEnter:c,onDragOver:u,onDrop:d,onDragLeave:h}=Uw(s);return v.jsx("div",{id:a,onDragEnter:c,onDrop:d,onDragOver:u,onDragLeave:h,className:n,style:r,role:"region","aria-label":"Droppable area for images, videos, and audio",children:t})},zw=({size:t,children:n})=>{const[r,s]=G.useState(!1);return v.jsxs(wh,{id:"artboard",onDragStateChange:s,style:{width:t.width,height:t.height},className:"designcombo_scene pointer-events-auto mt-3.5 bg-black",children:[v.jsx("div",{style:{width:t.width,height:t.height},className:`pointer-events-none absolute z-50 mt-3.5 transition-colors duration-200 ease-in-out ${r?"border-4 border-dashed border-white bg-white/[0.075]":"bg-transparent"} shadow-[0_0_0_5000px_#1D1D1F]`}),n]})},Hw=100,Ww=30,Bw=18,Vw=14,$w=30,Gw=24,Yw=16,Sh=12,Xw="Regular",xh="sans-serif",_i=188,Es=40,Zw=4e3,Th=1920,Ih=1080,Eh=60,Ch=1e3/Eh,Kw=2e6,qw=1e7,Jw=48e3,Qw=192e3,yc=2.3,eS=Th/yc,tS=Ih/yc,nS=184,rS=348,iS=512,sS=300,oS=0,aS=5e3,cS=1,lS=0,uS=0,dS=0,fS=359,hS=1,pS=0,gS=!1,mS=!1,vS=0,bS=2,yS=.01,_S=1,wS=0,SS=3,xS=.01,TS=1,IS=0,ES=1,CS=.01,AS=.5,kS=-1e3,RS=1e3,OS=1,MS=1,DS=0,PS=1,LS=.01,NS=1,jS=0,FS=1,US=.01,zS=0,HS=.5,WS=10,BS=.01,VS=1,$S=0,GS=1,YS=.01,XS=1,zs=16,ja=80;function Ah(t){if(!t)return"0";const n=t/_i,r=Math.trunc(n)%60,s=Math.trunc(n/60)%60,a=Math.trunc(n/3600)%60,u=[Math.trunc(n/216e3).toString(),a.toString(),s.toString(),r.toString()];return n<60?`${u[3].padStart(2,"0")}f`:n<3600?`${u[2].padStart(1,"0")}s`:n<216e3?`${u[1].padStart(2,"0")}:${u[2].padStart(2,"0")}`:`${u[0].padStart(2,"0")}:${u[1].padStart(2,"0")}:${u[2].padStart(2,"0")}`}function ZS(t,n=!1){if(!t)return"00:00";const s=1e3/60;if(t<1e3)return n?`${Math.floor(t/s)}f`:`${(t/1e3).toFixed(1)}s`;const a=Math.floor(t/1e3);if(a<60)return`${a}s`;const c=Math.floor(a/60);if(c<60){const m=a%60;return`${c.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`}const u=Math.floor(c/60),d=c%60,h=a%60;return`${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}function li(t,n){return t.map(r=>({...r,items:r.items.filter(s=>!n.includes(s))}))}const kh=({frame:t},{fps:n})=>{const r=t/n,s=Math.floor(r/3600),a=r%3600,c=Math.floor(a/60),u=Math.floor(a%60),d=Math.floor((a-Math.floor(a))*100);return s>0?`${s}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},Rh=({time:t})=>{const n=t/1e3,r=Math.floor(n/3600),s=n%3600,a=Math.floor(s/60),c=Math.floor(s%60),u=Math.floor((s-Math.floor(s))*100);return r>0?`${r}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`:`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},Oh=()=>{const t=document.getElementById("video-current-time");return(t?parseFloat(t.getAttribute("data-current-time")??""):0)*1e3},Wt=[{index:0,unit:18e3,zoom:1/18e3,segments:5},{index:1,unit:10800,zoom:1/10800,segments:3},{index:2,unit:7200,zoom:1/7200,segments:2},{index:3,unit:3600,zoom:1/3600,segments:1},{index:4,unit:1800,zoom:1/1800,segments:2},{index:5,unit:900,zoom:1/900,segments:3},{index:6,unit:600,zoom:1/600,segments:2},{index:7,unit:300,zoom:1/300,segments:5},{index:8,unit:180,zoom:1/180,segments:3},{index:9,unit:120,zoom:1/120,segments:10},{index:10,unit:60,zoom:1/60,segments:5},{index:11,unit:60,zoom:1/60,segments:5},{index:12,unit:30,zoom:1/30,segments:2},{index:13,unit:15,zoom:1/15,segments:3},{index:14,unit:10,zoom:1/10,segments:2},{index:15,unit:5,zoom:1/5,segments:5},{index:16,unit:3,zoom:1/3,segments:3},{index:17,unit:2,zoom:1/2,segments:5},{index:18,unit:1,zoom:1,segments:5},{index:19,unit:1,zoom:2,segments:5},{index:20,unit:1,zoom:4,segments:10}];function _c(t,n){let r=-1,s=t.length-1;for(;1+r<s;){const a=r+(s-r>>1);n(t[a],a,t)?s=a:r=a}return s}function KS(t,n=1){const r=()=>{const h=Math.max(0,Es),b=document.getElementById("designcombo-timeline-canvas")?.offsetWidth??document.body.offsetWidth;return Math.max(1,b-h)},s=()=>typeof t=="number"?Ve(t,n):jh(t,n),a=r()/s(),c=n*a;return{segments:5,index:_c(Wt,d=>d.zoom>c),zoom:c,unit:1/c}}function qS(t){return Wt[t]}function Mh(t){return Dh(t)||Wt[0]}const Dh=t=>{const n=Wt.filter(s=>s.zoom<t.zoom);return n.length===0?null:n.reduce((s,a)=>a.zoom>s.zoom?a:s)},Ph=t=>{const n=Wt.filter(s=>s.zoom>t.zoom);return n.length===0?null:n.reduce((s,a)=>a.zoom<s.zoom?a:s)};function Lh(t){return Ph(t)||Wt[Wt.length-1]}function JS(t){const n=Wt.at(-1),r=t===n,a=Nh(t)-(r?1:2);return Math.max(0,a)}function Nh(t){const n=_c(Wt,r=>r.zoom>t.zoom);return Math.min(Wt.length-1,n)}function Ve(t,n=1,r=1){const s=_i*n;return t*(60/1e3)*s/r}function Pn(t,n=1){const r=_i*n;return t/r*Ch}function jh(t,n=1){return Ve(t,n)}const QS=Math.floor(Math.random()*1e3)+1;function wc(t,n=1){const r=[],s=Math.floor(n),a=(c,u)=>{for(const d of c)Array.isArray(d)&&u<s?a(d,u+1):r.push(d)};return a(t,0),r}function Sc(t,n){const r=n.sort((a,c)=>a.tempIndex-c.tempIndex),s=[];for(const a of r)a.tempIndex<0&&s.push(a);s.push(t);for(const a of r)a.tempIndex>=0&&s.push(a);return s}const Fa={id:"font_UwdNKSyVq2iiMiuHSRRsUIOu",family:"Roboto",fullName:"Roboto Bold",postScriptName:"Roboto-Bold",preview:"https://ik.imagekit.io/lh/fonts/v2/5zQgS86djScKA0ri67BBCqW7.png",style:"Roboto-Bold",url:"https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmWUlvAx05IsDqlA.ttf",category:"sans-serif",createdAt:"2023-06-20T04:42:55.909Z",updatedAt:"2023-06-20T04:42:55.909Z",userId:null},Fh=t=>{const n=t.map(r=>new FontFace(r.fontFamily,`url(${r.fontUrl})`).load());return n.length===0?Promise.resolve(!0):new Promise((r,s)=>{Promise.all(n).then(a=>{a.forEach(c=>{c instanceof FontFace&&c.family&&(document.fonts.add(c),r(!0))})}).catch(a=>{s(a)})})},qt=Qd.create(t=>({timeline:null,size:{width:1080,height:1920},duration:5e3,fps:30,scale:{index:7,unit:300,zoom:1/300,segments:5},scroll:{left:0,top:0},playerRef:null,activeIds:[],targetIds:[],tracks:[],trackItemIds:[],transitionIds:[],transitionsMap:{},trackItemDetailsMap:{},trackItemsMap:{},setTimeline:n=>{t(()=>({timeline:n}))},setScale:n=>{t(()=>({scale:n}))},setScroll:n=>{t(()=>({scroll:n}))},setState:async n=>{t({...n})},setPlayerRef:n=>{t({playerRef:n})}}));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uh=(...t)=>t.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=G.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:u,...d},h)=>G.createElement("svg",{ref:h,...t3,width:n,height:n,stroke:t,strokeWidth:s?Number(r)*24/Number(n):r,className:Uh("lucide",a),...d},[...u.map(([m,b])=>G.createElement(m,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(t,n)=>{const r=G.forwardRef(({className:s,...a},c)=>G.createElement(n3,{ref:c,iconNode:n,className:Uh(`lucide-${e3(t)}`,s),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=ut("Captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=ut("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=ut("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=ut("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=ut("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=ut("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=ut("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=ut("SquareSplitHorizontal",[["path",{d:"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3",key:"lubmu8"}],["path",{d:"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3",key:"1ag34g"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=ut("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=ut("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ut("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=ut("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=ut("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=ut("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Hs=t=>{const n=G.useCallback(s=>{if(!t?.current)return()=>{};const a=()=>{s()};return t.current.addEventListener("frameupdate",a),()=>{t.current&&t.current.removeEventListener("frameupdate",a)}},[t]);return G.useSyncExternalStore(n,()=>t?.current?.getCurrentFrame()??0,()=>0)},wi=()=>{const[t,n]=G.useState(!1);return G.useEffect(()=>{const s=ve.subject.pipe(gn(({key:a})=>a.startsWith(ph))).subscribe(a=>{a.key===gc?n(!0):a.key===ci&&n(!1)});return()=>s.unsubscribe()},[]),t},Hh=()=>{const[t,n]=G.useState(!1),{duration:r,fps:s,scale:a,playerRef:c,activeIds:u}=qt(),d=Hs(c),h=()=>{ve.dispatch(cc)},m=()=>{ve.dispatch(uc,{payload:{},options:{time:Oh()}})},b=E=>{ve.dispatch(pc,{payload:{scale:E}})},_=()=>{ve.dispatch(oc)},x=()=>{ve.dispatch(ac)};return G.useEffect(()=>(c?.current?.addEventListener("play",()=>{n(!0)}),c?.current?.addEventListener("pause",()=>{n(!1)}),()=>{c?.current?.removeEventListener("play",()=>{n(!0)}),c?.current?.removeEventListener("pause",()=>{n(!1)})}),[c]),v.jsx("div",{style:{position:"relative",height:"50px",boxShadow:"inset 0 1px 0 0 #27272a",flex:"none"},className:"bg-background",children:v.jsx("div",{style:{position:"absolute",height:50,width:"100%",display:"flex",alignItems:"center"},children:v.jsxs("div",{style:{height:36,width:"100%",display:"grid",gridTemplateColumns:"1fr 260px 1fr",alignItems:"center"},children:[v.jsxs("div",{className:"flex px-2",children:[v.jsxs(Le,{disabled:!u.length,onClick:h,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[v.jsx(l3,{size:14})," Delete"]}),v.jsxs(Le,{disabled:!u.length,onClick:m,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[v.jsx(kd,{size:15})," Split"]}),v.jsxs(Le,{disabled:!u.length,onClick:()=>{ve.dispatch(lc)},variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[v.jsx(kd,{size:15})," Clone"]})]}),v.jsxs("div",{className:"flex items-center justify-center",children:[v.jsxs("div",{children:[v.jsx(Le,{onClick:h,variant:"ghost",size:"icon",children:v.jsx(a3,{size:14})}),v.jsx(Le,{onClick:()=>{if(t)return x();_()},variant:"ghost",size:"icon",children:t?v.jsx(s3,{size:14}):v.jsx(o3,{size:14})}),v.jsx(Le,{onClick:m,variant:"ghost",size:"icon",children:v.jsx(c3,{size:14})})]}),v.jsxs("div",{className:"text-xs font-light",style:{display:"grid",alignItems:"center",gridTemplateColumns:"54px 4px 54px",paddingTop:"2px",justifyContent:"center"},children:[v.jsx("div",{className:"font-medium text-zinc-200",style:{display:"flex",justifyContent:"center"},"data-current-time":d/s,id:"video-current-time",children:kh({frame:d},{fps:s})}),v.jsx("span",{children:"/"}),v.jsx("div",{className:"text-muted-foreground",style:{display:"flex",justifyContent:"center"},children:Rh({time:r})})]})]}),v.jsx(g3,{scale:a,onChangeTimelineScale:b,duration:r})]})})})},g3=({scale:t,onChangeTimelineScale:n,duration:r})=>{const s=()=>{const c=Mh(t);n(c)},a=()=>{const c=Lh(t);n(c)};return v.jsx("div",{className:"flex items-center justify-end",children:v.jsxs("div",{className:"flex border-l border-border pl-4 pr-2",children:[v.jsx(Le,{size:"icon",variant:"ghost",onClick:s,disabled:t.index===0,children:v.jsx(p3,{size:16})}),v.jsx(Le,{size:"icon",variant:"ghost",onClick:a,disabled:t.index===20,children:v.jsx(h3,{size:16})})]})})},Wh=[{id:"1",details:{src:"https://cdn.designcombo.dev/audio/Dawn%20of%20change.mp3",text:"Voiceover"},name:"Dawn of change",type:"audio",metadata:{author:"Roman Senyk"},display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/audio/Hope.mp3"},name:"Hope",type:"audio",metadata:{author:"Hugo Dujardin"}},{id:"3",details:{src:"https://cdn.designcombo.dev/audio/Tenderness.mp3"},name:"Tenderness",type:"audio",metadata:{author:"Benjamin Tissot"}},{id:"4",details:{src:"https://cdn.designcombo.dev/audio/Piano%20Moment.mp3"},name:"Piano moment",type:"audio",metadata:{author:"Benjamin Tissot"}}],Bh=[{id:"1",details:{src:"https://ik.imagekit.io/wombo/images/img1.jpg"},preview:"https://ik.imagekit.io/wombo/images/img1.jpg?tr=w-190",type:"image"},{id:"2",details:{src:"https://ik.imagekit.io/wombo/images/img2.jpg"},preview:"https://ik.imagekit.io/wombo/images/img2.jpg?tr=w-190",type:"image"},{id:"3",details:{src:"https://ik.imagekit.io/wombo/images/img3.jpg"},preview:"https://ik.imagekit.io/wombo/images/img3.jpg?tr=w-190",type:"image"},{id:"4",details:{src:"https://ik.imagekit.io/wombo/images/img4.jpg"},preview:"https://ik.imagekit.io/wombo/images/img4.jpg?tr=w-190",type:"image"},{id:"5",details:{src:"https://ik.imagekit.io/wombo/images/img5.jpg"},preview:"https://ik.imagekit.io/wombo/images/img5.jpg?tr=w-190",type:"image"},,{id:"6",details:{src:"https://ik.imagekit.io/wombo/images/img6.jpg"},preview:"https://ik.imagekit.io/wombo/images/img6.jpg?tr=w-190",type:"image"},{id:"7",details:{src:"https://ik.imagekit.io/wombo/images/img7.jpg"},preview:"https://ik.imagekit.io/wombo/images/img7.jpg?tr=w-190",type:"image"}],Vh=[{id:"1",details:{src:"https://cdn.designcombo.dev/videos/demo-video-1.mp4",text:"Scene"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-1.png",duration:17e3,display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/videos/demo-video-2.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-2.png"},{id:"3",details:{src:"https://cdn.designcombo.dev/videos/demo-video-3.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-3.png",duration:2e4},{id:"4",details:{src:"https://cdn.designcombo.dev/videos/demo-video-4.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-4.png",duration:2e4},{id:"5",details:{src:"https://cdn.designcombo.dev/videos/demo-video-5.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-5.png",duration:23e3},{id:"6",details:{src:"https://cdn.designcombo.dev/videos/demo-video-6.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-6.png",duration:1e4},{id:"7",details:{src:"https://cdn.designcombo.dev/videos/demo-video-7.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-7.png",duration:12e3},{id:"8",details:{src:"https://cdn.designcombo.dev/videos/demo-video-8.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-8.png",duration:15e3},{id:"9",details:{src:"https://cdn.designcombo.dev/videos/demo-video-9.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-9.png",duration:15e3},{id:"10",details:{src:"https://cdn.designcombo.dev/videos/demo-video-10.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-10.png",duration:5e3},{id:"11",details:{src:"https://cdn.designcombo.dev/videos/demo-video-11.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-11.png",duration:5e3}],$h=[{id:"1",kind:"none",duration:0,preview:"https://ik.imagekit.io/wombo/transitions-v2/transition-none.png",type:"transition"},{id:"2",kind:"fade",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/fade.webp",type:"transition"},{id:"3",kind:"slide",name:"slide up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-up.webp",type:"transition",direction:"from-bottom"},{id:"4",kind:"slide",name:"slide down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-down.webp",type:"transition",direction:"from-top"},{id:"5",kind:"slide",name:"slide left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-left.webp",type:"transition",direction:"from-right"},{id:"6",kind:"slide",name:"slide right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-right.webp",type:"transition",direction:"from-left"},{id:"7",kind:"wipe",name:"wipe up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-up.webp",type:"transition",direction:"from-bottom"},{id:"8",kind:"wipe",name:"wipe down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-down.webp",type:"transition",direction:"from-top"},{id:"9",kind:"wipe",name:"wipe left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-left.webp",type:"transition",direction:"from-right"},{id:"10",kind:"wipe",name:"wipe right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-right.webp",type:"transition",direction:"from-left"},{id:"11",kind:"flip",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/flip.webp",type:"transition"},{id:"12",kind:"clockWipe",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/clock-wipe.webp",type:"transition"},{id:"13",kind:"star",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/star.webp",type:"transition"},{id:"14",kind:"circle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/circle.webp",type:"transition"},{id:"15",kind:"rectangle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/rectangle.webp",type:"transition"}],m3=[{id:"1",src:"https://ik.imagekit.io/snapmotion/upload-video-1.mp4",type:"video"},{id:"2",src:"https://ik.imagekit.io/snapmotion/upload-video-2.mp4",type:"video"},{id:"3",src:"https://ik.imagekit.io/snapmotion/upload-video-3.mp4",type:"video"}],v3=()=>{const t=wi();return v.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Transitions"}),v.jsx(rr,{children:v.jsx("div",{className:"grid grid-cols-3 gap-2 px-4",children:$h.map((n,r)=>v.jsx(b3,{transition:n,shouldDisplayPreview:!t},r))})})]})},b3=({transition:t,shouldDisplayPreview:n})=>{const r=G.useMemo(()=>({backgroundImage:`url(${t.preview})`,backgroundSize:"cover",width:"70px",height:"70px"}),[t.preview]);return v.jsx(yi,{data:t,renderCustomPreview:v.jsx("div",{style:r}),shouldDisplayPreview:n,children:v.jsxs("div",{children:[v.jsx("div",{children:v.jsx("div",{style:r,draggable:!1})}),v.jsx("div",{className:"flex h-6 items-center overflow-ellipsis text-nowrap text-[12px] capitalize text-muted-foreground",children:t.name||t.type})]})})},y3=()=>{const t=()=>{ve.dispatch(sc,{payload:{id:Ze(),display:{from:0,to:5e3},details:{text:"Heading and some body",fontSize:120,width:600,fontUrl:Fa.url,fontFamily:Fa.postScriptName,color:"#ffffff",wordWrap:"break-word",textAlign:"center",borderWidth:0,borderColor:"#000000",boxShadow:{color:"#ffffff",x:0,y:0,blur:0}}},options:{}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Text"}),v.jsx("div",{className:"flex flex-col gap-2 px-4",children:v.jsx(Le,{draggable:!1,onClick:t,variant:"secondary",className:"w-full",children:"Add text"})})]})},_3=()=>{const t=G.useRef(null),n=s=>{r(s)},r=async s=>{const a=s[0].type;a.includes("audio")&&ve.dispatch(kr,{payload:{id:Ze(),details:{src:URL.createObjectURL(s[0]),volume:50}}}),a.includes("video")&&ve.dispatch(Ar,{payload:{id:Ze(),display:{from:2e3,to:7e3},details:{src:URL.createObjectURL(s[0]),name:s[0].name}}}),a.includes("image")&&ve.dispatch(Rr,{payload:{id:Ze(),details:{src:URL.createObjectURL(s[0])}}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Your media"}),v.jsx("input",{ref:t,id:"file-upload-handle",type:"file",accept:"audio/*,video/*,image/*",onChange:s=>n(Array.from(s.target.files||[])),className:"hidden"}),v.jsx("div",{className:"px-4 py-2",children:v.jsx("div",{children:v.jsxs(ih,{defaultValue:"projects",className:"w-full",children:[v.jsxs(ic,{className:"grid w-full grid-cols-2",children:[v.jsx(Ts,{value:"projects",children:"Project"}),v.jsx(Ts,{value:"workspace",children:"Workspace"})]}),v.jsxs(Is,{value:"projects",children:[v.jsxs(Le,{onClick:()=>{t.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[v.jsx(Rd,{size:16})," Upload"]}),v.jsx("div",{})]}),v.jsx(Is,{value:"workspace",children:v.jsxs(Le,{onClick:()=>{t.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[v.jsx(Rd,{size:16})," Upload"]})})]})})}),v.jsx(rr,{children:v.jsx("div",{className:"masonry-sm px-4"})})]})},w3=()=>{const t=wi(),n=r=>{ve.dispatch(kr,{payload:r,options:{}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Audios"}),v.jsx(rr,{children:v.jsx("div",{className:"flex flex-col px-2",children:Wh.map((r,s)=>v.jsx(S3,{shouldDisplayPreview:!t,handleAddAudio:n,audio:r},s))})})]})},S3=({handleAddAudio:t,audio:n,shouldDisplayPreview:r})=>{const s=G.useMemo(()=>({backgroundImage:"url(https://cdn.designcombo.dev/thumbnails/music-preview.png)",backgroundSize:"cover",width:"70px",height:"70px"}),[]);return v.jsx(yi,{data:n,renderCustomPreview:v.jsx("div",{style:s}),shouldDisplayPreview:r,children:v.jsxs("div",{draggable:!1,onClick:()=>t(n),style:{display:"grid",gridTemplateColumns:"48px 1fr"},className:"flex cursor-pointer gap-4 px-2 py-1 text-sm hover:bg-zinc-800/70",children:[v.jsx("div",{className:"flex h-12 items-center justify-center bg-zinc-800",children:v.jsx(zh,{width:16})}),v.jsxs("div",{className:"flex flex-col justify-center",children:[v.jsx("div",{children:n.name}),v.jsx("div",{className:"text-zinc-400",children:n.metadata?.author})]})]})})},x3=()=>{const t=wi(),n=r=>{ve.dispatch(Rr,{payload:r,options:{trackId:"main"}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Photos"}),v.jsx(rr,{children:v.jsx("div",{className:"masonry-sm px-4",children:Bh.map((r,s)=>v.jsx(T3,{image:r,shouldDisplayPreview:!t,handleAddImage:n},s))})})]})},T3=({handleAddImage:t,image:n,shouldDisplayPreview:r})=>{const s=G.useMemo(()=>({backgroundImage:`url(${n.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[n.preview]);return v.jsx(yi,{data:n,renderCustomPreview:v.jsx("div",{style:s}),shouldDisplayPreview:r,children:v.jsx("div",{onClick:()=>t({id:Ze(),details:{src:n.details.src}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:v.jsx("img",{draggable:!1,src:n.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},I3=()=>{const t=wi(),n=r=>{ve.dispatch(Ar,{payload:r,options:{resourceId:"main"}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Videos"}),v.jsx(rr,{children:v.jsx("div",{className:"masonry-sm px-4",children:Vh.map((r,s)=>v.jsx(E3,{video:r,shouldDisplayPreview:!t,handleAddVideo:n},s))})})]})},E3=({handleAddVideo:t,video:n,shouldDisplayPreview:r})=>{const s=G.useMemo(()=>({backgroundImage:`url(${n.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[n.preview]);return v.jsx(yi,{data:n,renderCustomPreview:v.jsx("div",{style:s,className:"draggable"}),shouldDisplayPreview:r,children:v.jsx("div",{onClick:()=>t({...n,id:Ze(),details:{src:n.details.src,...n.details}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:v.jsx("img",{draggable:!1,src:n.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},Ws=Qd.create(t=>({activeMenuItem:null,showMenuItem:!1,cropTarget:null,showControlItem:!1,showToolboxItem:!1,activeToolboxItem:null,setCropTarget:n=>t({cropTarget:n}),setActiveMenuItem:n=>t({activeMenuItem:n}),setShowMenuItem:n=>t({showMenuItem:n}),setShowControlItem:n=>t({showControlItem:n}),setShowToolboxItem:n=>t({showToolboxItem:n}),setActiveToolboxItem:n=>t({activeToolboxItem:n})})),C3=({children:t})=>{const{showMenuItem:n,setShowMenuItem:r}=Ws(),s=()=>{r(!1)};return v.jsxs("div",{style:{left:n?"0":"-100%",transition:"left 0.25s ease-in-out",zIndex:200},className:"absolute top-1/2 mt-6 flex h-[calc(100%-32px-64px)] w-[340px] -translate-y-1/2 rounded-lg shadow-lg",children:[v.jsx("div",{className:"w-[74px]"}),v.jsxs("div",{className:"relative flex flex-1 bg-background/80 backdrop-blur-lg backdrop-filter",children:[v.jsx(Le,{variant:"ghost",className:"absolute right-2 top-2 h-8 w-8 text-muted-foreground",size:"icon",children:v.jsx(f3,{width:16,onClick:s})}),t]})]})},A3=()=>{const{activeMenuItem:t}=Ws();return t==="transitions"?v.jsx(v3,{}):t==="texts"?v.jsx(y3,{}):t==="videos"?v.jsx(I3,{}):t==="audios"?v.jsx(w3,{}):t==="images"?v.jsx(x3,{}):t==="uploads"?v.jsx(_3,{}):null},Gh=()=>v.jsx(C3,{children:v.jsx(A3,{})}),pn={audio:zh,captions:r3,image:i3,redo:({...t})=>v.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2957 4.15721C13.9052 3.76669 13.9052 3.13352 14.2957 2.743C14.6862 2.35247 15.3194 2.35247 15.7099 2.743L20.953 7.98603C21.1387 8.16758 21.2539 8.42087 21.2539 8.70108C21.2539 8.70111 21.2539 8.70114 21.2539 8.70117C21.2539 8.70431 21.2539 8.70744 21.2539 8.71057C21.2518 8.93273 21.1773 9.13757 21.0528 9.30262C21.0249 9.33973 20.9942 9.37505 20.961 9.40828L15.7099 14.6593C15.3194 15.0499 14.6862 15.0499 14.2957 14.6593C13.9052 14.2688 13.9052 13.6357 14.2957 13.2451L17.8398 9.70108H9.22665C8.59943 9.70108 7.97836 9.82462 7.39888 10.0646C6.81941 10.3047 6.29289 10.6565 5.84938 11.1C5.40587 11.5435 5.05406 12.07 4.81403 12.6495C4.57401 13.229 4.45047 13.85 4.45047 14.4773C4.45047 15.1045 4.57401 15.7256 4.81403 16.305C5.05406 16.8845 5.40587 17.411 5.84938 17.8545C6.29289 18.298 6.81941 18.6498 7.39888 18.8899C7.97836 19.1299 8.59943 19.2534 9.22665 19.2534H12.9024C13.4547 19.2534 13.9024 19.7012 13.9024 20.2534C13.9024 20.8057 13.4547 21.2534 12.9024 21.2534H9.22665C8.33679 21.2534 7.45564 21.0782 6.63352 20.7376C5.81139 20.3971 5.06439 19.898 4.43517 19.2687C3.80594 18.6395 3.30681 17.8925 2.96627 17.0704C2.62574 16.2483 2.45047 15.3671 2.45047 14.4773C2.45047 13.5874 2.62574 12.7063 2.96627 11.8841C3.30681 11.062 3.80594 10.315 4.43517 9.68578C5.06439 9.05655 5.81139 8.55742 6.63352 8.21689C7.45564 7.87635 8.33679 7.70108 9.22665 7.70108H17.8396L14.2957 4.15721Z",fill:"currentColor"})}),shapes:({...t})=>v.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[v.jsx("g",{clipPath:"url(#clip0_2077_2705)",children:v.jsx("path",{d:"M3.75 12H2.25V20.25C2.25 20.6478 2.40804 21.0294 2.68934 21.3107C2.97064 21.592 3.35218 21.75 3.75 21.75H9.75V20.25H3.75V12ZM21 21.75H12.75C12.6197 21.75 12.4916 21.716 12.3784 21.6514C12.2652 21.5868 12.1708 21.4938 12.1045 21.3816C12.0382 21.2694 12.0022 21.1419 12.0002 21.0116C11.9982 20.8813 12.0302 20.7527 12.093 20.6385L16.218 13.1385C16.2821 13.0203 16.377 12.9218 16.4928 12.8534C16.6085 12.7849 16.7406 12.7492 16.875 12.75C17.1322 12.75 17.3895 12.879 17.532 13.1385L21.657 20.6385C21.7198 20.7527 21.7518 20.8813 21.7498 21.0116C21.7478 21.1419 21.7118 21.2694 21.6455 21.3816C21.5792 21.4938 21.4848 21.5868 21.3716 21.6514C21.2584 21.716 21.1303 21.75 21 21.75ZM14.0182 20.25H19.7318L16.875 15.0563L14.0182 20.25ZM20.25 2.25H12V3.75H20.25V14.244H21.75V3.75C21.75 3.35218 21.592 2.97064 21.3107 2.68934C21.0294 2.40804 20.6478 2.25 20.25 2.25ZM8.25 2.25H3.75C3.35218 2.25 2.97064 2.40804 2.68934 2.68934C2.40804 2.97064 2.25 3.35218 2.25 3.75V8.25C2.25 8.64782 2.40804 9.02936 2.68934 9.31066C2.97064 9.59196 3.35218 9.75 3.75 9.75H8.25C8.64782 9.75 9.02936 9.59196 9.31066 9.31066C9.59196 9.02936 9.75 8.64782 9.75 8.25V3.75C9.75 3.35218 9.59196 2.97064 9.31066 2.68934C9.02936 2.40804 8.64782 2.25 8.25 2.25ZM8.25 8.25H3.75V3.75H8.25V8.25Z",fill:"currentColor"})}),v.jsx("defs",{children:v.jsx("clipPath",{id:"clip0_2077_2705",children:v.jsx("rect",{width:"24",height:"24",fill:"white"})})})]}),type:u3,undo:({...t})=>v.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.60387 4.30711C9.99439 3.91659 9.99439 3.28342 9.60387 2.8929C9.21334 2.50238 8.58018 2.50237 8.18965 2.8929L2.8925 8.19004C2.70497 8.37758 2.59961 8.63193 2.59961 8.89715C2.59961 9.16237 2.70497 9.41672 2.8925 9.60426L8.18965 14.9014C8.58018 15.2919 9.21334 15.2919 9.60387 14.9014C9.99439 14.5109 9.99439 13.8777 9.60387 13.4872L5.86478 9.7481H15.1044C15.7383 9.7481 16.366 9.87295 16.9516 10.1155C17.5372 10.3581 18.0693 10.7136 18.5176 11.1619C18.9658 11.6101 19.3213 12.1422 19.5639 12.7278C19.8065 13.3134 19.9313 13.9411 19.9313 14.575C19.9313 15.2088 19.8065 15.8365 19.5639 16.4221C19.3213 17.0077 18.9658 17.5398 18.5176 17.9881C18.0693 18.4363 17.5372 18.7918 16.9516 19.0344C16.366 19.277 15.7383 19.4018 15.1044 19.4018H11.3964C10.8442 19.4018 10.3964 19.8495 10.3964 20.4018C10.3964 20.9541 10.8442 21.4018 11.3964 21.4018H15.1044C16.001 21.4018 16.8887 21.2252 17.717 20.8822C18.5452 20.5391 19.2978 20.0362 19.9318 19.4023C20.5657 18.7683 21.0686 18.0158 21.4116 17.1875C21.7547 16.3592 21.9313 15.4715 21.9313 14.575C21.9313 13.6784 21.7547 12.7907 21.4116 11.9624C21.0686 11.1342 20.5657 10.3816 19.9318 9.74764C19.2978 9.11371 18.5452 8.61085 17.717 8.26777C16.8887 7.92469 16.001 7.7481 15.1044 7.7481H6.16287L9.60387 4.30711Z",fill:"currentColor"})}),upload:({...t})=>v.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[v.jsxs("g",{clipPath:"url(#clip0_2077_2699)",children:[v.jsx("path",{d:"M8.25 13.5L9.3075 14.5575L11.25 12.6225V21.75H12.75V12.6225L14.6925 14.5575L15.75 13.5L12 9.75L8.25 13.5Z",fill:"currentColor"}),v.jsx("path",{d:"M17.6249 16.5004H17.2499V15.0004H17.6249C18.52 15.0362 19.3927 14.715 20.0509 14.1074C20.7092 13.4997 21.0991 12.6555 21.1349 11.7604C21.1707 10.8653 20.8495 9.99264 20.2418 9.33438C19.6342 8.67613 18.79 8.28621 17.8949 8.25041H17.2499L17.1749 7.63541C17.0085 6.37275 16.3888 5.21362 15.4312 4.37395C14.4736 3.53428 13.2435 3.07132 11.9699 3.07132C10.6963 3.07132 9.46616 3.53428 8.50857 4.37395C7.55099 5.21362 6.93129 6.37275 6.76489 7.63541L6.74989 8.25041H6.10489C5.20979 8.28621 4.36557 8.67613 3.75795 9.33438C3.15033 9.99264 2.82909 10.8653 2.86489 11.7604C2.9007 12.6555 3.29062 13.4997 3.94887 14.1074C4.60712 14.715 5.47979 15.0362 6.37489 15.0004H6.74989V16.5004H6.37489C5.1722 16.4928 4.01477 16.0409 3.12513 15.2315C2.2355 14.4221 1.67646 13.3124 1.55549 12.1158C1.43453 10.9192 1.76018 9.72009 2.46983 8.74905C3.17949 7.77801 4.22305 7.10357 5.39989 6.85541C5.72367 5.3453 6.55552 3.99189 7.75663 3.02101C8.95774 2.05013 10.4555 1.52051 11.9999 1.52051C13.5443 1.52051 15.042 2.05013 16.2432 3.02101C17.4443 3.99189 18.2761 5.3453 18.5999 6.85541C19.7767 7.10357 20.8203 7.77801 21.53 8.74905C22.2396 9.72009 22.5653 10.9192 22.4443 12.1158C22.3233 13.3124 21.7643 14.4221 20.8747 15.2315C19.985 16.0409 18.8276 16.4928 17.6249 16.5004Z",fill:"currentColor"})]}),v.jsx("defs",{children:v.jsx("clipPath",{id:"clip0_2077_2699",children:v.jsx("rect",{width:"24",height:"24",fill:"white"})})})]}),video:d3};function k3(){const{setActiveMenuItem:t,setShowMenuItem:n,activeMenuItem:r,showMenuItem:s}=Ws();return v.jsxs("div",{style:{zIndex:201},className:"absolute left-2.5 top-1/2 mt-6 flex w-14 -translate-y-1/2 flex-col items-center rounded-lg bg-background/80 py-2 shadow-lg backdrop-blur-lg backdrop-filter",children:[v.jsx(Le,{onClick:()=>{t("uploads"),n(!0)},className:rt(s&&r==="uploads"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(pn.upload,{width:20})}),v.jsx(Le,{onClick:()=>{t("texts"),n(!0)},className:rt(s&&r==="texts"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(pn.type,{width:20})}),v.jsx(Le,{onClick:()=>{t("videos"),n(!0)},className:rt(s&&r==="videos"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(pn.video,{width:20})}),v.jsx(Le,{onClick:()=>{t("captions"),n(!0)},className:rt(s&&r==="captions"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(pn.captions,{width:20})}),v.jsx(Le,{onClick:()=>{t("images"),n(!0)},className:rt(s&&r==="images"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(pn.image,{width:20})}),v.jsx(Le,{onClick:()=>{t("shapes"),n(!0)},className:rt(s&&r==="shapes"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(pn.shapes,{width:20})}),v.jsx(Le,{onClick:()=>{t("audios"),n(!0)},className:rt(s&&r==="audios"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(pn.audio,{width:20})}),v.jsx(Le,{onClick:()=>{t("transitions"),n(!0)},className:rt(s&&r==="transitions"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx("svg",{width:20,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{d:"M3 5.30359C3 3.93159 4.659 3.24359 5.629 4.21359L11.997 10.5826L10.583 11.9966L5 6.41359V17.5856L10.586 11.9996L10.583 11.9966L11.997 10.5826L12 10.5856L18.371 4.21459C19.341 3.24459 21 3.93159 21 5.30359V18.6956C21 20.0676 19.341 20.7556 18.371 19.7856L12 13.5L13.414 11.9996L19 17.5866V6.41359L13.414 11.9996L13.421 12.0056L12.006 13.4206L12 13.4136L5.629 19.7846C4.659 20.7546 3 20.0676 3 18.6956V5.30359Z",fill:"currentColor"})})})]})}function Yh(){const t=()=>{ve.dispatch(fc)},n=()=>{ve.dispatch(hc)};return v.jsx("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr 320px"},className:"pointer-events-none absolute left-0 right-0 top-0 z-[205] flex h-[72px] items-center px-2",children:v.jsxs("div",{className:"pointer-events-auto flex h-14 items-center gap-2",children:[v.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-background"}),v.jsxs("div",{className:"flex h-12 items-center bg-background px-1.5",children:[v.jsx(Le,{onClick:t,className:"text-muted-foreground",variant:"ghost",size:"icon",children:v.jsx(pn.undo,{width:20})}),v.jsx(Le,{onClick:n,className:"text-muted-foreground",variant:"ghost",size:"icon",children:v.jsx(pn.redo,{width:20})})]})]})})}const ys=(t,n)=>{const r=t.from/1e3*n,s=t.to/1e3*n-r;return{from:r,durationInFrames:s}},Xh={text:(t,n)=>{const{fps:r,height:s,width:a}=n,{from:c,durationInFrames:u}=ys(t.display,r);return v.jsx(Xt.Sequence,{from:c,durationInFrames:u,"data-track-item":"transition-element",style:{position:"absolute",width:t.details.width??300,height:t.details.height??400,transform:t.details.transform??"none",fontSize:t.details.fontSize||"16px",textAlign:t.details.textAlign||"left",top:t.details.top??300,left:t.details.left??600,color:t.details.color||"#000000",backgroundColor:t.details.backgroundColor||"transparent",border:t.details.border??"none",opacity:t.details.opacity??100/100,fontFamily:t.details.fontFamily||"Arial",textDecoration:t.details.textDecoration||"none",fontWeight:t.details.fontWeight||"normal",lineHeight:t.details.lineHeight||"normal",letterSpacing:t.details.letterSpacing||"normal",wordSpacing:t.details.wordSpacing||"normal",wordWrap:t.details.wordWrap||"normal",wordBreak:t.details.wordBreak||"normal",pointerEvents:"auto"},children:v.jsx("div",{children:t.details.text})},t.id)},image:(t,n)=>{const{fps:r}=n,{from:s,durationInFrames:a}=ys(t.display,r);return v.jsx(Xt.Sequence,{from:s,durationInFrames:a,style:{width:t.details.width??"100%",height:t.details.height??"auto",transform:t.details.transform??"none",opacity:(t.details.opacity??100)/100||1,border:t.details.border??"none",borderRadius:t.details.borderRadius??"0",boxShadow:t.details.boxShadow??"none",filter:t.details.filter||"none",top:t.details.top??0,left:t.details.left??0},children:v.jsx(Xt.AbsoluteFill,{style:{pointerEvents:"none"},children:v.jsx(Xt.Img,{style:{pointerEvents:"none"},"data-id":t.id,src:t.details.src})})},t.id)},video:(t,n)=>{const{fps:r}=n,{from:s,durationInFrames:a}=ys(t.display,r),c=t.trim,u=t.details.crop||{x:0,y:0,width:t.details.width,height:t.details.height};return c?v.jsx(Xt.Sequence,{premountFor:30*5,from:s,durationInFrames:a,style:{width:u.width||"100%",height:u.height||"auto",transform:t.details.transform??"none",opacity:(t.details.opacity??100)/100||1,border:t.details.border??"none",borderRadius:t.details.borderRadius??"0",boxShadow:t.details.boxShadow??"none",top:t.details.top??0,left:t.details.left??0,overflow:"hidden"},children:v.jsx(Xt.AbsoluteFill,{style:{pointerEvents:"none",width:t.details.width,height:t.details.height,top:-u.y,left:-u.x},children:v.jsx(Xt.OffthreadVideo,{startFrom:c.from/1e3*r,endAt:c.to/1e3*r,src:t.details.src,volume:(t.details.volume??100)/100,style:{pointerEvents:"none",width:t.details.width,height:t.details.height}})})},t.id):v.jsx(v.Fragment,{})},audio:(t,n)=>{const{fps:r}=n,{from:s,durationInFrames:a}=ys(t.display,r),c=t.trim;return c?v.jsx(Xt.Sequence,{className:`moonshine-scene-item id-${t.id} moonshine-scene-item-type-${t.type}`,from:s,durationInFrames:a,style:{userSelect:"none",pointerEvents:"none"},children:v.jsx(Xt.AbsoluteFill,{children:v.jsx(Xt.Audio,{startFrom:c.from/1e3*r,endAt:c.to/1e3*r,src:t.details.src,volume:(t.details.volume??100)/100})})},t.id):v.jsx(v.Fragment,{})}};var Cs={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Cs.exports;(function(t,n){(function(){var r,s="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",d="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",m=500,b="__lodash_placeholder__",_=1,x=2,E=4,O=1,k=2,A=1,D=2,P=4,j=8,U=16,J=32,K=64,Q=128,q=256,X=512,te=30,ne="...",V=800,he=16,Ie=1,Ne=2,Se=3,Ee=1/0,Ce=9007199254740991,Re=17976931348623157e292,dt=NaN,se=4294967295,or=se-1,Fn=se>>>1,Qt=[["ary",Q],["bind",A],["bindKey",D],["curry",j],["curryRight",U],["flip",X],["partial",J],["partialRight",K],["rearg",q]],en="[object Arguments]",Un="[object Array]",Ei="[object AsyncFunction]",bn="[object Boolean]",yn="[object Date]",Ci="[object DOMException]",zn="[object Error]",_n="[object Function]",Pr="[object GeneratorFunction]",it="[object Map]",tn="[object Number]",qs="[object Null]",It="[object Object]",Lr="[object Promise]",Ai="[object Proxy]",wn="[object RegExp]",S="[object Set]",$="[object String]",Y="[object Symbol]",ye="[object Undefined]",Fe="[object WeakMap]",Oe="[object WeakSet]",oe="[object ArrayBuffer]",et="[object DataView]",Vt="[object Float32Array]",$e="[object Float64Array]",jt="[object Int8Array]",nn="[object Int16Array]",Et="[object Int32Array]",Sn="[object Uint8Array]",mt="[object Uint8ClampedArray]",Js="[object Uint16Array]",Qs="[object Uint32Array]",g1=/\b__p \+= '';/g,m1=/\b(__p \+=) '' \+/g,v1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,jc=/&(?:amp|lt|gt|quot|#39);/g,Fc=/[&<>"']/g,b1=RegExp(jc.source),y1=RegExp(Fc.source),_1=/<%-([\s\S]+?)%>/g,w1=/<%([\s\S]+?)%>/g,Uc=/<%=([\s\S]+?)%>/g,S1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x1=/^\w*$/,T1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eo=/[\\^$.*+?()[\]{}|]/g,I1=RegExp(eo.source),to=/^\s+/,E1=/\s/,C1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,A1=/\{\n\/\* \[wrapped with (.+)\] \*/,k1=/,? & /,R1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,O1=/[()=,{}\[\]\/\s]/,M1=/\\(\\)?/g,D1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zc=/\w*$/,P1=/^[-+]0x[0-9a-f]+$/i,L1=/^0b[01]+$/i,N1=/^\[object .+?Constructor\]$/,j1=/^0o[0-7]+$/i,F1=/^(?:0|[1-9]\d*)$/,U1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ki=/($^)/,z1=/['\n\r\u2028\u2029\\]/g,Ri="\\ud800-\\udfff",H1="\\u0300-\\u036f",W1="\\ufe20-\\ufe2f",B1="\\u20d0-\\u20ff",Hc=H1+W1+B1,Wc="\\u2700-\\u27bf",Bc="a-z\\xdf-\\xf6\\xf8-\\xff",V1="\\xac\\xb1\\xd7\\xf7",$1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",G1="\\u2000-\\u206f",Y1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vc="A-Z\\xc0-\\xd6\\xd8-\\xde",$c="\\ufe0e\\ufe0f",Gc=V1+$1+G1+Y1,no="['’]",X1="["+Ri+"]",Yc="["+Gc+"]",Oi="["+Hc+"]",Xc="\\d+",Z1="["+Wc+"]",Zc="["+Bc+"]",Kc="[^"+Ri+Gc+Xc+Wc+Bc+Vc+"]",ro="\\ud83c[\\udffb-\\udfff]",K1="(?:"+Oi+"|"+ro+")",qc="[^"+Ri+"]",io="(?:\\ud83c[\\udde6-\\uddff]){2}",so="[\\ud800-\\udbff][\\udc00-\\udfff]",ar="["+Vc+"]",Jc="\\u200d",Qc="(?:"+Zc+"|"+Kc+")",q1="(?:"+ar+"|"+Kc+")",el="(?:"+no+"(?:d|ll|m|re|s|t|ve))?",tl="(?:"+no+"(?:D|LL|M|RE|S|T|VE))?",nl=K1+"?",rl="["+$c+"]?",J1="(?:"+Jc+"(?:"+[qc,io,so].join("|")+")"+rl+nl+")*",Q1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",il=rl+nl+J1,tg="(?:"+[Z1,io,so].join("|")+")"+il,ng="(?:"+[qc+Oi+"?",Oi,io,so,X1].join("|")+")",rg=RegExp(no,"g"),ig=RegExp(Oi,"g"),oo=RegExp(ro+"(?="+ro+")|"+ng+il,"g"),sg=RegExp([ar+"?"+Zc+"+"+el+"(?="+[Yc,ar,"$"].join("|")+")",q1+"+"+tl+"(?="+[Yc,ar+Qc,"$"].join("|")+")",ar+"?"+Qc+"+"+el,ar+"+"+tl,eg,Q1,Xc,tg].join("|"),"g"),og=RegExp("["+Jc+Ri+Hc+$c+"]"),ag=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lg=-1,Me={};Me[Vt]=Me[$e]=Me[jt]=Me[nn]=Me[Et]=Me[Sn]=Me[mt]=Me[Js]=Me[Qs]=!0,Me[en]=Me[Un]=Me[oe]=Me[bn]=Me[et]=Me[yn]=Me[zn]=Me[_n]=Me[it]=Me[tn]=Me[It]=Me[wn]=Me[S]=Me[$]=Me[Fe]=!1;var ke={};ke[en]=ke[Un]=ke[oe]=ke[et]=ke[bn]=ke[yn]=ke[Vt]=ke[$e]=ke[jt]=ke[nn]=ke[Et]=ke[it]=ke[tn]=ke[It]=ke[wn]=ke[S]=ke[$]=ke[Y]=ke[Sn]=ke[mt]=ke[Js]=ke[Qs]=!0,ke[zn]=ke[_n]=ke[Fe]=!1;var ug={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},dg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pg=parseFloat,gg=parseInt,sl=typeof qr=="object"&&qr&&qr.Object===Object&&qr,mg=typeof self=="object"&&self&&self.Object===Object&&self,qe=sl||mg||Function("return this")(),ao=n&&!n.nodeType&&n,Hn=ao&&!0&&t&&!t.nodeType&&t,ol=Hn&&Hn.exports===ao,co=ol&&sl.process,Ct=function(){try{var T=Hn&&Hn.require&&Hn.require("util").types;return T||co&&co.binding&&co.binding("util")}catch{}}(),al=Ct&&Ct.isArrayBuffer,cl=Ct&&Ct.isDate,ll=Ct&&Ct.isMap,ul=Ct&&Ct.isRegExp,dl=Ct&&Ct.isSet,fl=Ct&&Ct.isTypedArray;function vt(T,M,R){switch(R.length){case 0:return T.call(M);case 1:return T.call(M,R[0]);case 2:return T.call(M,R[0],R[1]);case 3:return T.call(M,R[0],R[1],R[2])}return T.apply(M,R)}function vg(T,M,R,B){for(var ae=-1,_e=T==null?0:T.length;++ae<_e;){var Ge=T[ae];M(B,Ge,R(Ge),T)}return B}function At(T,M){for(var R=-1,B=T==null?0:T.length;++R<B&&M(T[R],R,T)!==!1;);return T}function bg(T,M){for(var R=T==null?0:T.length;R--&&M(T[R],R,T)!==!1;);return T}function hl(T,M){for(var R=-1,B=T==null?0:T.length;++R<B;)if(!M(T[R],R,T))return!1;return!0}function xn(T,M){for(var R=-1,B=T==null?0:T.length,ae=0,_e=[];++R<B;){var Ge=T[R];M(Ge,R,T)&&(_e[ae++]=Ge)}return _e}function Mi(T,M){var R=T==null?0:T.length;return!!R&&cr(T,M,0)>-1}function lo(T,M,R){for(var B=-1,ae=T==null?0:T.length;++B<ae;)if(R(M,T[B]))return!0;return!1}function Pe(T,M){for(var R=-1,B=T==null?0:T.length,ae=Array(B);++R<B;)ae[R]=M(T[R],R,T);return ae}function Tn(T,M){for(var R=-1,B=M.length,ae=T.length;++R<B;)T[ae+R]=M[R];return T}function uo(T,M,R,B){var ae=-1,_e=T==null?0:T.length;for(B&&_e&&(R=T[++ae]);++ae<_e;)R=M(R,T[ae],ae,T);return R}function yg(T,M,R,B){var ae=T==null?0:T.length;for(B&&ae&&(R=T[--ae]);ae--;)R=M(R,T[ae],ae,T);return R}function fo(T,M){for(var R=-1,B=T==null?0:T.length;++R<B;)if(M(T[R],R,T))return!0;return!1}var _g=ho("length");function wg(T){return T.split("")}function Sg(T){return T.match(R1)||[]}function pl(T,M,R){var B;return R(T,function(ae,_e,Ge){if(M(ae,_e,Ge))return B=_e,!1}),B}function Di(T,M,R,B){for(var ae=T.length,_e=R+(B?1:-1);B?_e--:++_e<ae;)if(M(T[_e],_e,T))return _e;return-1}function cr(T,M,R){return M===M?Pg(T,M,R):Di(T,gl,R)}function xg(T,M,R,B){for(var ae=R-1,_e=T.length;++ae<_e;)if(B(T[ae],M))return ae;return-1}function gl(T){return T!==T}function ml(T,M){var R=T==null?0:T.length;return R?go(T,M)/R:dt}function ho(T){return function(M){return M==null?r:M[T]}}function po(T){return function(M){return T==null?r:T[M]}}function vl(T,M,R,B,ae){return ae(T,function(_e,Ge,Ae){R=B?(B=!1,_e):M(R,_e,Ge,Ae)}),R}function Tg(T,M){var R=T.length;for(T.sort(M);R--;)T[R]=T[R].value;return T}function go(T,M){for(var R,B=-1,ae=T.length;++B<ae;){var _e=M(T[B]);_e!==r&&(R=R===r?_e:R+_e)}return R}function mo(T,M){for(var R=-1,B=Array(T);++R<T;)B[R]=M(R);return B}function Ig(T,M){return Pe(M,function(R){return[R,T[R]]})}function bl(T){return T&&T.slice(0,Sl(T)+1).replace(to,"")}function bt(T){return function(M){return T(M)}}function vo(T,M){return Pe(M,function(R){return T[R]})}function Nr(T,M){return T.has(M)}function yl(T,M){for(var R=-1,B=T.length;++R<B&&cr(M,T[R],0)>-1;);return R}function _l(T,M){for(var R=T.length;R--&&cr(M,T[R],0)>-1;);return R}function Eg(T,M){for(var R=T.length,B=0;R--;)T[R]===M&&++B;return B}var Cg=po(ug),Ag=po(dg);function kg(T){return"\\"+hg[T]}function Rg(T,M){return T==null?r:T[M]}function lr(T){return og.test(T)}function Og(T){return ag.test(T)}function Mg(T){for(var M,R=[];!(M=T.next()).done;)R.push(M.value);return R}function bo(T){var M=-1,R=Array(T.size);return T.forEach(function(B,ae){R[++M]=[ae,B]}),R}function wl(T,M){return function(R){return T(M(R))}}function In(T,M){for(var R=-1,B=T.length,ae=0,_e=[];++R<B;){var Ge=T[R];(Ge===M||Ge===b)&&(T[R]=b,_e[ae++]=R)}return _e}function Pi(T){var M=-1,R=Array(T.size);return T.forEach(function(B){R[++M]=B}),R}function Dg(T){var M=-1,R=Array(T.size);return T.forEach(function(B){R[++M]=[B,B]}),R}function Pg(T,M,R){for(var B=R-1,ae=T.length;++B<ae;)if(T[B]===M)return B;return-1}function Lg(T,M,R){for(var B=R+1;B--;)if(T[B]===M)return B;return B}function ur(T){return lr(T)?jg(T):_g(T)}function Ft(T){return lr(T)?Fg(T):wg(T)}function Sl(T){for(var M=T.length;M--&&E1.test(T.charAt(M)););return M}var Ng=po(fg);function jg(T){for(var M=oo.lastIndex=0;oo.test(T);)++M;return M}function Fg(T){return T.match(oo)||[]}function Ug(T){return T.match(sg)||[]}var zg=function T(M){M=M==null?qe:dr.defaults(qe.Object(),M,dr.pick(qe,cg));var R=M.Array,B=M.Date,ae=M.Error,_e=M.Function,Ge=M.Math,Ae=M.Object,yo=M.RegExp,Hg=M.String,kt=M.TypeError,Li=R.prototype,Wg=_e.prototype,fr=Ae.prototype,Ni=M["__core-js_shared__"],ji=Wg.toString,Te=fr.hasOwnProperty,Bg=0,xl=function(){var e=/[^.]+$/.exec(Ni&&Ni.keys&&Ni.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fi=fr.toString,Vg=ji.call(Ae),$g=qe._,Gg=yo("^"+ji.call(Te).replace(eo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ui=ol?M.Buffer:r,En=M.Symbol,zi=M.Uint8Array,Tl=Ui?Ui.allocUnsafe:r,Hi=wl(Ae.getPrototypeOf,Ae),Il=Ae.create,El=fr.propertyIsEnumerable,Wi=Li.splice,Cl=En?En.isConcatSpreadable:r,jr=En?En.iterator:r,Wn=En?En.toStringTag:r,Bi=function(){try{var e=Yn(Ae,"defineProperty");return e({},"",{}),e}catch{}}(),Yg=M.clearTimeout!==qe.clearTimeout&&M.clearTimeout,Xg=B&&B.now!==qe.Date.now&&B.now,Zg=M.setTimeout!==qe.setTimeout&&M.setTimeout,Vi=Ge.ceil,$i=Ge.floor,_o=Ae.getOwnPropertySymbols,Kg=Ui?Ui.isBuffer:r,Al=M.isFinite,qg=Li.join,Jg=wl(Ae.keys,Ae),Ye=Ge.max,tt=Ge.min,Qg=B.now,em=M.parseInt,kl=Ge.random,tm=Li.reverse,wo=Yn(M,"DataView"),Fr=Yn(M,"Map"),So=Yn(M,"Promise"),hr=Yn(M,"Set"),Ur=Yn(M,"WeakMap"),zr=Yn(Ae,"create"),Gi=Ur&&new Ur,pr={},nm=Xn(wo),rm=Xn(Fr),im=Xn(So),sm=Xn(hr),om=Xn(Ur),Yi=En?En.prototype:r,Hr=Yi?Yi.valueOf:r,Rl=Yi?Yi.toString:r;function p(e){if(Ue(e)&&!ce(e)&&!(e instanceof me)){if(e instanceof Rt)return e;if(Te.call(e,"__wrapped__"))return Ou(e)}return new Rt(e)}var gr=function(){function e(){}return function(i){if(!je(i))return{};if(Il)return Il(i);e.prototype=i;var o=new e;return e.prototype=r,o}}();function Xi(){}function Rt(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}p.templateSettings={escape:_1,evaluate:w1,interpolate:Uc,variable:"",imports:{_:p}},p.prototype=Xi.prototype,p.prototype.constructor=p,Rt.prototype=gr(Xi.prototype),Rt.prototype.constructor=Rt;function me(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function am(){var e=new me(this.__wrapped__);return e.__actions__=ft(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ft(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ft(this.__views__),e}function cm(){if(this.__filtered__){var e=new me(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function lm(){var e=this.__wrapped__.value(),i=this.__dir__,o=ce(e),l=i<0,f=o?e.length:0,g=w0(0,f,this.__views__),y=g.start,w=g.end,I=w-y,L=l?w:y-1,N=this.__iteratees__,F=N.length,H=0,Z=tt(I,this.__takeCount__);if(!o||!l&&f==I&&Z==I)return eu(e,this.__actions__);var re=[];e:for(;I--&&H<Z;){L+=i;for(var de=-1,ie=e[L];++de<F;){var pe=N[de],be=pe.iteratee,wt=pe.type,at=be(ie);if(wt==Ne)ie=at;else if(!at){if(wt==Ie)continue e;break e}}re[H++]=ie}return re}me.prototype=gr(Xi.prototype),me.prototype.constructor=me;function Bn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var l=e[i];this.set(l[0],l[1])}}function um(){this.__data__=zr?zr(null):{},this.size=0}function dm(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function fm(e){var i=this.__data__;if(zr){var o=i[e];return o===h?r:o}return Te.call(i,e)?i[e]:r}function hm(e){var i=this.__data__;return zr?i[e]!==r:Te.call(i,e)}function pm(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=zr&&i===r?h:i,this}Bn.prototype.clear=um,Bn.prototype.delete=dm,Bn.prototype.get=fm,Bn.prototype.has=hm,Bn.prototype.set=pm;function rn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var l=e[i];this.set(l[0],l[1])}}function gm(){this.__data__=[],this.size=0}function mm(e){var i=this.__data__,o=Zi(i,e);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():Wi.call(i,o,1),--this.size,!0}function vm(e){var i=this.__data__,o=Zi(i,e);return o<0?r:i[o][1]}function bm(e){return Zi(this.__data__,e)>-1}function ym(e,i){var o=this.__data__,l=Zi(o,e);return l<0?(++this.size,o.push([e,i])):o[l][1]=i,this}rn.prototype.clear=gm,rn.prototype.delete=mm,rn.prototype.get=vm,rn.prototype.has=bm,rn.prototype.set=ym;function sn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var l=e[i];this.set(l[0],l[1])}}function _m(){this.size=0,this.__data__={hash:new Bn,map:new(Fr||rn),string:new Bn}}function wm(e){var i=as(this,e).delete(e);return this.size-=i?1:0,i}function Sm(e){return as(this,e).get(e)}function xm(e){return as(this,e).has(e)}function Tm(e,i){var o=as(this,e),l=o.size;return o.set(e,i),this.size+=o.size==l?0:1,this}sn.prototype.clear=_m,sn.prototype.delete=wm,sn.prototype.get=Sm,sn.prototype.has=xm,sn.prototype.set=Tm;function Vn(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new sn;++i<o;)this.add(e[i])}function Im(e){return this.__data__.set(e,h),this}function Em(e){return this.__data__.has(e)}Vn.prototype.add=Vn.prototype.push=Im,Vn.prototype.has=Em;function Ut(e){var i=this.__data__=new rn(e);this.size=i.size}function Cm(){this.__data__=new rn,this.size=0}function Am(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function km(e){return this.__data__.get(e)}function Rm(e){return this.__data__.has(e)}function Om(e,i){var o=this.__data__;if(o instanceof rn){var l=o.__data__;if(!Fr||l.length<a-1)return l.push([e,i]),this.size=++o.size,this;o=this.__data__=new sn(l)}return o.set(e,i),this.size=o.size,this}Ut.prototype.clear=Cm,Ut.prototype.delete=Am,Ut.prototype.get=km,Ut.prototype.has=Rm,Ut.prototype.set=Om;function Ol(e,i){var o=ce(e),l=!o&&Zn(e),f=!o&&!l&&On(e),g=!o&&!l&&!f&&yr(e),y=o||l||f||g,w=y?mo(e.length,Hg):[],I=w.length;for(var L in e)(i||Te.call(e,L))&&!(y&&(L=="length"||f&&(L=="offset"||L=="parent")||g&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||ln(L,I)))&&w.push(L);return w}function Ml(e){var i=e.length;return i?e[Do(0,i-1)]:r}function Mm(e,i){return cs(ft(e),$n(i,0,e.length))}function Dm(e){return cs(ft(e))}function xo(e,i,o){(o!==r&&!zt(e[i],o)||o===r&&!(i in e))&&on(e,i,o)}function Wr(e,i,o){var l=e[i];(!(Te.call(e,i)&&zt(l,o))||o===r&&!(i in e))&&on(e,i,o)}function Zi(e,i){for(var o=e.length;o--;)if(zt(e[o][0],i))return o;return-1}function Pm(e,i,o,l){return Cn(e,function(f,g,y){i(l,f,o(f),y)}),l}function Dl(e,i){return e&&Gt(i,Ke(i),e)}function Lm(e,i){return e&&Gt(i,pt(i),e)}function on(e,i,o){i=="__proto__"&&Bi?Bi(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function To(e,i){for(var o=-1,l=i.length,f=R(l),g=e==null;++o<l;)f[o]=g?r:ia(e,i[o]);return f}function $n(e,i,o){return e===e&&(o!==r&&(e=e<=o?e:o),i!==r&&(e=e>=i?e:i)),e}function Ot(e,i,o,l,f,g){var y,w=i&_,I=i&x,L=i&E;if(o&&(y=f?o(e,l,f,g):o(e)),y!==r)return y;if(!je(e))return e;var N=ce(e);if(N){if(y=x0(e),!w)return ft(e,y)}else{var F=nt(e),H=F==_n||F==Pr;if(On(e))return ru(e,w);if(F==It||F==en||H&&!f){if(y=I||H?{}:Su(e),!w)return I?f0(e,Lm(y,e)):d0(e,Dl(y,e))}else{if(!ke[F])return f?e:{};y=T0(e,F,w)}}g||(g=new Ut);var Z=g.get(e);if(Z)return Z;g.set(e,y),qu(e)?e.forEach(function(ie){y.add(Ot(ie,i,o,ie,e,g))}):Zu(e)&&e.forEach(function(ie,pe){y.set(pe,Ot(ie,i,o,pe,e,g))});var re=L?I?Vo:Bo:I?pt:Ke,de=N?r:re(e);return At(de||e,function(ie,pe){de&&(pe=ie,ie=e[pe]),Wr(y,pe,Ot(ie,i,o,pe,e,g))}),y}function Nm(e){var i=Ke(e);return function(o){return Pl(o,e,i)}}function Pl(e,i,o){var l=o.length;if(e==null)return!l;for(e=Ae(e);l--;){var f=o[l],g=i[f],y=e[f];if(y===r&&!(f in e)||!g(y))return!1}return!0}function Ll(e,i,o){if(typeof e!="function")throw new kt(u);return Zr(function(){e.apply(r,o)},i)}function Br(e,i,o,l){var f=-1,g=Mi,y=!0,w=e.length,I=[],L=i.length;if(!w)return I;o&&(i=Pe(i,bt(o))),l?(g=lo,y=!1):i.length>=a&&(g=Nr,y=!1,i=new Vn(i));e:for(;++f<w;){var N=e[f],F=o==null?N:o(N);if(N=l||N!==0?N:0,y&&F===F){for(var H=L;H--;)if(i[H]===F)continue e;I.push(N)}else g(i,F,l)||I.push(N)}return I}var Cn=cu($t),Nl=cu(Eo,!0);function jm(e,i){var o=!0;return Cn(e,function(l,f,g){return o=!!i(l,f,g),o}),o}function Ki(e,i,o){for(var l=-1,f=e.length;++l<f;){var g=e[l],y=i(g);if(y!=null&&(w===r?y===y&&!_t(y):o(y,w)))var w=y,I=g}return I}function Fm(e,i,o,l){var f=e.length;for(o=le(o),o<0&&(o=-o>f?0:f+o),l=l===r||l>f?f:le(l),l<0&&(l+=f),l=o>l?0:Qu(l);o<l;)e[o++]=i;return e}function jl(e,i){var o=[];return Cn(e,function(l,f,g){i(l,f,g)&&o.push(l)}),o}function Je(e,i,o,l,f){var g=-1,y=e.length;for(o||(o=E0),f||(f=[]);++g<y;){var w=e[g];i>0&&o(w)?i>1?Je(w,i-1,o,l,f):Tn(f,w):l||(f[f.length]=w)}return f}var Io=lu(),Fl=lu(!0);function $t(e,i){return e&&Io(e,i,Ke)}function Eo(e,i){return e&&Fl(e,i,Ke)}function qi(e,i){return xn(i,function(o){return un(e[o])})}function Gn(e,i){i=kn(i,e);for(var o=0,l=i.length;e!=null&&o<l;)e=e[Yt(i[o++])];return o&&o==l?e:r}function Ul(e,i,o){var l=i(e);return ce(e)?l:Tn(l,o(e))}function st(e){return e==null?e===r?ye:qs:Wn&&Wn in Ae(e)?_0(e):D0(e)}function Co(e,i){return e>i}function Um(e,i){return e!=null&&Te.call(e,i)}function zm(e,i){return e!=null&&i in Ae(e)}function Hm(e,i,o){return e>=tt(i,o)&&e<Ye(i,o)}function Ao(e,i,o){for(var l=o?lo:Mi,f=e[0].length,g=e.length,y=g,w=R(g),I=1/0,L=[];y--;){var N=e[y];y&&i&&(N=Pe(N,bt(i))),I=tt(N.length,I),w[y]=!o&&(i||f>=120&&N.length>=120)?new Vn(y&&N):r}N=e[0];var F=-1,H=w[0];e:for(;++F<f&&L.length<I;){var Z=N[F],re=i?i(Z):Z;if(Z=o||Z!==0?Z:0,!(H?Nr(H,re):l(L,re,o))){for(y=g;--y;){var de=w[y];if(!(de?Nr(de,re):l(e[y],re,o)))continue e}H&&H.push(re),L.push(Z)}}return L}function Wm(e,i,o,l){return $t(e,function(f,g,y){i(l,o(f),g,y)}),l}function Vr(e,i,o){i=kn(i,e),e=Eu(e,i);var l=e==null?e:e[Yt(Dt(i))];return l==null?r:vt(l,e,o)}function zl(e){return Ue(e)&&st(e)==en}function Bm(e){return Ue(e)&&st(e)==oe}function Vm(e){return Ue(e)&&st(e)==yn}function $r(e,i,o,l,f){return e===i?!0:e==null||i==null||!Ue(e)&&!Ue(i)?e!==e&&i!==i:$m(e,i,o,l,$r,f)}function $m(e,i,o,l,f,g){var y=ce(e),w=ce(i),I=y?Un:nt(e),L=w?Un:nt(i);I=I==en?It:I,L=L==en?It:L;var N=I==It,F=L==It,H=I==L;if(H&&On(e)){if(!On(i))return!1;y=!0,N=!1}if(H&&!N)return g||(g=new Ut),y||yr(e)?yu(e,i,o,l,f,g):b0(e,i,I,o,l,f,g);if(!(o&O)){var Z=N&&Te.call(e,"__wrapped__"),re=F&&Te.call(i,"__wrapped__");if(Z||re){var de=Z?e.value():e,ie=re?i.value():i;return g||(g=new Ut),f(de,ie,o,l,g)}}return H?(g||(g=new Ut),y0(e,i,o,l,f,g)):!1}function Gm(e){return Ue(e)&&nt(e)==it}function ko(e,i,o,l){var f=o.length,g=f,y=!l;if(e==null)return!g;for(e=Ae(e);f--;){var w=o[f];if(y&&w[2]?w[1]!==e[w[0]]:!(w[0]in e))return!1}for(;++f<g;){w=o[f];var I=w[0],L=e[I],N=w[1];if(y&&w[2]){if(L===r&&!(I in e))return!1}else{var F=new Ut;if(l)var H=l(L,N,I,e,i,F);if(!(H===r?$r(N,L,O|k,l,F):H))return!1}}return!0}function Hl(e){if(!je(e)||A0(e))return!1;var i=un(e)?Gg:N1;return i.test(Xn(e))}function Ym(e){return Ue(e)&&st(e)==wn}function Xm(e){return Ue(e)&&nt(e)==S}function Zm(e){return Ue(e)&&ps(e.length)&&!!Me[st(e)]}function Wl(e){return typeof e=="function"?e:e==null?gt:typeof e=="object"?ce(e)?$l(e[0],e[1]):Vl(e):ud(e)}function Ro(e){if(!Xr(e))return Jg(e);var i=[];for(var o in Ae(e))Te.call(e,o)&&o!="constructor"&&i.push(o);return i}function Km(e){if(!je(e))return M0(e);var i=Xr(e),o=[];for(var l in e)l=="constructor"&&(i||!Te.call(e,l))||o.push(l);return o}function Oo(e,i){return e<i}function Bl(e,i){var o=-1,l=ht(e)?R(e.length):[];return Cn(e,function(f,g,y){l[++o]=i(f,g,y)}),l}function Vl(e){var i=Go(e);return i.length==1&&i[0][2]?Tu(i[0][0],i[0][1]):function(o){return o===e||ko(o,e,i)}}function $l(e,i){return Xo(e)&&xu(i)?Tu(Yt(e),i):function(o){var l=ia(o,e);return l===r&&l===i?sa(o,e):$r(i,l,O|k)}}function Ji(e,i,o,l,f){e!==i&&Io(i,function(g,y){if(f||(f=new Ut),je(g))qm(e,i,y,o,Ji,l,f);else{var w=l?l(Ko(e,y),g,y+"",e,i,f):r;w===r&&(w=g),xo(e,y,w)}},pt)}function qm(e,i,o,l,f,g,y){var w=Ko(e,o),I=Ko(i,o),L=y.get(I);if(L){xo(e,o,L);return}var N=g?g(w,I,o+"",e,i,y):r,F=N===r;if(F){var H=ce(I),Z=!H&&On(I),re=!H&&!Z&&yr(I);N=I,H||Z||re?ce(w)?N=w:We(w)?N=ft(w):Z?(F=!1,N=ru(I,!0)):re?(F=!1,N=iu(I,!0)):N=[]:Kr(I)||Zn(I)?(N=w,Zn(w)?N=ed(w):(!je(w)||un(w))&&(N=Su(I))):F=!1}F&&(y.set(I,N),f(N,I,l,g,y),y.delete(I)),xo(e,o,N)}function Gl(e,i){var o=e.length;if(o)return i+=i<0?o:0,ln(i,o)?e[i]:r}function Yl(e,i,o){i.length?i=Pe(i,function(g){return ce(g)?function(y){return Gn(y,g.length===1?g[0]:g)}:g}):i=[gt];var l=-1;i=Pe(i,bt(ee()));var f=Bl(e,function(g,y,w){var I=Pe(i,function(L){return L(g)});return{criteria:I,index:++l,value:g}});return Tg(f,function(g,y){return u0(g,y,o)})}function Jm(e,i){return Xl(e,i,function(o,l){return sa(e,l)})}function Xl(e,i,o){for(var l=-1,f=i.length,g={};++l<f;){var y=i[l],w=Gn(e,y);o(w,y)&&Gr(g,kn(y,e),w)}return g}function Qm(e){return function(i){return Gn(i,e)}}function Mo(e,i,o,l){var f=l?xg:cr,g=-1,y=i.length,w=e;for(e===i&&(i=ft(i)),o&&(w=Pe(e,bt(o)));++g<y;)for(var I=0,L=i[g],N=o?o(L):L;(I=f(w,N,I,l))>-1;)w!==e&&Wi.call(w,I,1),Wi.call(e,I,1);return e}function Zl(e,i){for(var o=e?i.length:0,l=o-1;o--;){var f=i[o];if(o==l||f!==g){var g=f;ln(f)?Wi.call(e,f,1):No(e,f)}}return e}function Do(e,i){return e+$i(kl()*(i-e+1))}function e0(e,i,o,l){for(var f=-1,g=Ye(Vi((i-e)/(o||1)),0),y=R(g);g--;)y[l?g:++f]=e,e+=o;return y}function Po(e,i){var o="";if(!e||i<1||i>Ce)return o;do i%2&&(o+=e),i=$i(i/2),i&&(e+=e);while(i);return o}function fe(e,i){return qo(Iu(e,i,gt),e+"")}function t0(e){return Ml(_r(e))}function n0(e,i){var o=_r(e);return cs(o,$n(i,0,o.length))}function Gr(e,i,o,l){if(!je(e))return e;i=kn(i,e);for(var f=-1,g=i.length,y=g-1,w=e;w!=null&&++f<g;){var I=Yt(i[f]),L=o;if(I==="__proto__"||I==="constructor"||I==="prototype")return e;if(f!=y){var N=w[I];L=l?l(N,I,w):r,L===r&&(L=je(N)?N:ln(i[f+1])?[]:{})}Wr(w,I,L),w=w[I]}return e}var Kl=Gi?function(e,i){return Gi.set(e,i),e}:gt,r0=Bi?function(e,i){return Bi(e,"toString",{configurable:!0,enumerable:!1,value:aa(i),writable:!0})}:gt;function i0(e){return cs(_r(e))}function Mt(e,i,o){var l=-1,f=e.length;i<0&&(i=-i>f?0:f+i),o=o>f?f:o,o<0&&(o+=f),f=i>o?0:o-i>>>0,i>>>=0;for(var g=R(f);++l<f;)g[l]=e[l+i];return g}function s0(e,i){var o;return Cn(e,function(l,f,g){return o=i(l,f,g),!o}),!!o}function Qi(e,i,o){var l=0,f=e==null?l:e.length;if(typeof i=="number"&&i===i&&f<=Fn){for(;l<f;){var g=l+f>>>1,y=e[g];y!==null&&!_t(y)&&(o?y<=i:y<i)?l=g+1:f=g}return f}return Lo(e,i,gt,o)}function Lo(e,i,o,l){var f=0,g=e==null?0:e.length;if(g===0)return 0;i=o(i);for(var y=i!==i,w=i===null,I=_t(i),L=i===r;f<g;){var N=$i((f+g)/2),F=o(e[N]),H=F!==r,Z=F===null,re=F===F,de=_t(F);if(y)var ie=l||re;else L?ie=re&&(l||H):w?ie=re&&H&&(l||!Z):I?ie=re&&H&&!Z&&(l||!de):Z||de?ie=!1:ie=l?F<=i:F<i;ie?f=N+1:g=N}return tt(g,or)}function ql(e,i){for(var o=-1,l=e.length,f=0,g=[];++o<l;){var y=e[o],w=i?i(y):y;if(!o||!zt(w,I)){var I=w;g[f++]=y===0?0:y}}return g}function Jl(e){return typeof e=="number"?e:_t(e)?dt:+e}function yt(e){if(typeof e=="string")return e;if(ce(e))return Pe(e,yt)+"";if(_t(e))return Rl?Rl.call(e):"";var i=e+"";return i=="0"&&1/e==-1/0?"-0":i}function An(e,i,o){var l=-1,f=Mi,g=e.length,y=!0,w=[],I=w;if(o)y=!1,f=lo;else if(g>=a){var L=i?null:m0(e);if(L)return Pi(L);y=!1,f=Nr,I=new Vn}else I=i?[]:w;e:for(;++l<g;){var N=e[l],F=i?i(N):N;if(N=o||N!==0?N:0,y&&F===F){for(var H=I.length;H--;)if(I[H]===F)continue e;i&&I.push(F),w.push(N)}else f(I,F,o)||(I!==w&&I.push(F),w.push(N))}return w}function No(e,i){return i=kn(i,e),e=Eu(e,i),e==null||delete e[Yt(Dt(i))]}function Ql(e,i,o,l){return Gr(e,i,o(Gn(e,i)),l)}function es(e,i,o,l){for(var f=e.length,g=l?f:-1;(l?g--:++g<f)&&i(e[g],g,e););return o?Mt(e,l?0:g,l?g+1:f):Mt(e,l?g+1:0,l?f:g)}function eu(e,i){var o=e;return o instanceof me&&(o=o.value()),uo(i,function(l,f){return f.func.apply(f.thisArg,Tn([l],f.args))},o)}function jo(e,i,o){var l=e.length;if(l<2)return l?An(e[0]):[];for(var f=-1,g=R(l);++f<l;)for(var y=e[f],w=-1;++w<l;)w!=f&&(g[f]=Br(g[f]||y,e[w],i,o));return An(Je(g,1),i,o)}function tu(e,i,o){for(var l=-1,f=e.length,g=i.length,y={};++l<f;){var w=l<g?i[l]:r;o(y,e[l],w)}return y}function Fo(e){return We(e)?e:[]}function Uo(e){return typeof e=="function"?e:gt}function kn(e,i){return ce(e)?e:Xo(e,i)?[e]:Ru(xe(e))}var o0=fe;function Rn(e,i,o){var l=e.length;return o=o===r?l:o,!i&&o>=l?e:Mt(e,i,o)}var nu=Yg||function(e){return qe.clearTimeout(e)};function ru(e,i){if(i)return e.slice();var o=e.length,l=Tl?Tl(o):new e.constructor(o);return e.copy(l),l}function zo(e){var i=new e.constructor(e.byteLength);return new zi(i).set(new zi(e)),i}function a0(e,i){var o=i?zo(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function c0(e){var i=new e.constructor(e.source,zc.exec(e));return i.lastIndex=e.lastIndex,i}function l0(e){return Hr?Ae(Hr.call(e)):{}}function iu(e,i){var o=i?zo(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function su(e,i){if(e!==i){var o=e!==r,l=e===null,f=e===e,g=_t(e),y=i!==r,w=i===null,I=i===i,L=_t(i);if(!w&&!L&&!g&&e>i||g&&y&&I&&!w&&!L||l&&y&&I||!o&&I||!f)return 1;if(!l&&!g&&!L&&e<i||L&&o&&f&&!l&&!g||w&&o&&f||!y&&f||!I)return-1}return 0}function u0(e,i,o){for(var l=-1,f=e.criteria,g=i.criteria,y=f.length,w=o.length;++l<y;){var I=su(f[l],g[l]);if(I){if(l>=w)return I;var L=o[l];return I*(L=="desc"?-1:1)}}return e.index-i.index}function ou(e,i,o,l){for(var f=-1,g=e.length,y=o.length,w=-1,I=i.length,L=Ye(g-y,0),N=R(I+L),F=!l;++w<I;)N[w]=i[w];for(;++f<y;)(F||f<g)&&(N[o[f]]=e[f]);for(;L--;)N[w++]=e[f++];return N}function au(e,i,o,l){for(var f=-1,g=e.length,y=-1,w=o.length,I=-1,L=i.length,N=Ye(g-w,0),F=R(N+L),H=!l;++f<N;)F[f]=e[f];for(var Z=f;++I<L;)F[Z+I]=i[I];for(;++y<w;)(H||f<g)&&(F[Z+o[y]]=e[f++]);return F}function ft(e,i){var o=-1,l=e.length;for(i||(i=R(l));++o<l;)i[o]=e[o];return i}function Gt(e,i,o,l){var f=!o;o||(o={});for(var g=-1,y=i.length;++g<y;){var w=i[g],I=l?l(o[w],e[w],w,o,e):r;I===r&&(I=e[w]),f?on(o,w,I):Wr(o,w,I)}return o}function d0(e,i){return Gt(e,Yo(e),i)}function f0(e,i){return Gt(e,_u(e),i)}function ts(e,i){return function(o,l){var f=ce(o)?vg:Pm,g=i?i():{};return f(o,e,ee(l,2),g)}}function mr(e){return fe(function(i,o){var l=-1,f=o.length,g=f>1?o[f-1]:r,y=f>2?o[2]:r;for(g=e.length>3&&typeof g=="function"?(f--,g):r,y&&ot(o[0],o[1],y)&&(g=f<3?r:g,f=1),i=Ae(i);++l<f;){var w=o[l];w&&e(i,w,l,g)}return i})}function cu(e,i){return function(o,l){if(o==null)return o;if(!ht(o))return e(o,l);for(var f=o.length,g=i?f:-1,y=Ae(o);(i?g--:++g<f)&&l(y[g],g,y)!==!1;);return o}}function lu(e){return function(i,o,l){for(var f=-1,g=Ae(i),y=l(i),w=y.length;w--;){var I=y[e?w:++f];if(o(g[I],I,g)===!1)break}return i}}function h0(e,i,o){var l=i&A,f=Yr(e);function g(){var y=this&&this!==qe&&this instanceof g?f:e;return y.apply(l?o:this,arguments)}return g}function uu(e){return function(i){i=xe(i);var o=lr(i)?Ft(i):r,l=o?o[0]:i.charAt(0),f=o?Rn(o,1).join(""):i.slice(1);return l[e]()+f}}function vr(e){return function(i){return uo(cd(ad(i).replace(rg,"")),e,"")}}function Yr(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=gr(e.prototype),l=e.apply(o,i);return je(l)?l:o}}function p0(e,i,o){var l=Yr(e);function f(){for(var g=arguments.length,y=R(g),w=g,I=br(f);w--;)y[w]=arguments[w];var L=g<3&&y[0]!==I&&y[g-1]!==I?[]:In(y,I);if(g-=L.length,g<o)return gu(e,i,ns,f.placeholder,r,y,L,r,r,o-g);var N=this&&this!==qe&&this instanceof f?l:e;return vt(N,this,y)}return f}function du(e){return function(i,o,l){var f=Ae(i);if(!ht(i)){var g=ee(o,3);i=Ke(i),o=function(w){return g(f[w],w,f)}}var y=e(i,o,l);return y>-1?f[g?i[y]:y]:r}}function fu(e){return cn(function(i){var o=i.length,l=o,f=Rt.prototype.thru;for(e&&i.reverse();l--;){var g=i[l];if(typeof g!="function")throw new kt(u);if(f&&!y&&os(g)=="wrapper")var y=new Rt([],!0)}for(l=y?l:o;++l<o;){g=i[l];var w=os(g),I=w=="wrapper"?$o(g):r;I&&Zo(I[0])&&I[1]==(Q|j|J|q)&&!I[4].length&&I[9]==1?y=y[os(I[0])].apply(y,I[3]):y=g.length==1&&Zo(g)?y[w]():y.thru(g)}return function(){var L=arguments,N=L[0];if(y&&L.length==1&&ce(N))return y.plant(N).value();for(var F=0,H=o?i[F].apply(this,L):N;++F<o;)H=i[F].call(this,H);return H}})}function ns(e,i,o,l,f,g,y,w,I,L){var N=i&Q,F=i&A,H=i&D,Z=i&(j|U),re=i&X,de=H?r:Yr(e);function ie(){for(var pe=arguments.length,be=R(pe),wt=pe;wt--;)be[wt]=arguments[wt];if(Z)var at=br(ie),St=Eg(be,at);if(l&&(be=ou(be,l,f,Z)),g&&(be=au(be,g,y,Z)),pe-=St,Z&&pe<L){var Be=In(be,at);return gu(e,i,ns,ie.placeholder,o,be,Be,w,I,L-pe)}var Ht=F?o:this,fn=H?Ht[e]:e;return pe=be.length,w?be=P0(be,w):re&&pe>1&&be.reverse(),N&&I<pe&&(be.length=I),this&&this!==qe&&this instanceof ie&&(fn=de||Yr(fn)),fn.apply(Ht,be)}return ie}function hu(e,i){return function(o,l){return Wm(o,e,i(l),{})}}function rs(e,i){return function(o,l){var f;if(o===r&&l===r)return i;if(o!==r&&(f=o),l!==r){if(f===r)return l;typeof o=="string"||typeof l=="string"?(o=yt(o),l=yt(l)):(o=Jl(o),l=Jl(l)),f=e(o,l)}return f}}function Ho(e){return cn(function(i){return i=Pe(i,bt(ee())),fe(function(o){var l=this;return e(i,function(f){return vt(f,l,o)})})})}function is(e,i){i=i===r?" ":yt(i);var o=i.length;if(o<2)return o?Po(i,e):i;var l=Po(i,Vi(e/ur(i)));return lr(i)?Rn(Ft(l),0,e).join(""):l.slice(0,e)}function g0(e,i,o,l){var f=i&A,g=Yr(e);function y(){for(var w=-1,I=arguments.length,L=-1,N=l.length,F=R(N+I),H=this&&this!==qe&&this instanceof y?g:e;++L<N;)F[L]=l[L];for(;I--;)F[L++]=arguments[++w];return vt(H,f?o:this,F)}return y}function pu(e){return function(i,o,l){return l&&typeof l!="number"&&ot(i,o,l)&&(o=l=r),i=dn(i),o===r?(o=i,i=0):o=dn(o),l=l===r?i<o?1:-1:dn(l),e0(i,o,l,e)}}function ss(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Pt(i),o=Pt(o)),e(i,o)}}function gu(e,i,o,l,f,g,y,w,I,L){var N=i&j,F=N?y:r,H=N?r:y,Z=N?g:r,re=N?r:g;i|=N?J:K,i&=~(N?K:J),i&P||(i&=-4);var de=[e,i,f,Z,F,re,H,w,I,L],ie=o.apply(r,de);return Zo(e)&&Cu(ie,de),ie.placeholder=l,Au(ie,e,i)}function Wo(e){var i=Ge[e];return function(o,l){if(o=Pt(o),l=l==null?0:tt(le(l),292),l&&Al(o)){var f=(xe(o)+"e").split("e"),g=i(f[0]+"e"+(+f[1]+l));return f=(xe(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-l))}return i(o)}}var m0=hr&&1/Pi(new hr([,-0]))[1]==Ee?function(e){return new hr(e)}:ua;function mu(e){return function(i){var o=nt(i);return o==it?bo(i):o==S?Dg(i):Ig(i,e(i))}}function an(e,i,o,l,f,g,y,w){var I=i&D;if(!I&&typeof e!="function")throw new kt(u);var L=l?l.length:0;if(L||(i&=-97,l=f=r),y=y===r?y:Ye(le(y),0),w=w===r?w:le(w),L-=f?f.length:0,i&K){var N=l,F=f;l=f=r}var H=I?r:$o(e),Z=[e,i,o,l,f,N,F,g,y,w];if(H&&O0(Z,H),e=Z[0],i=Z[1],o=Z[2],l=Z[3],f=Z[4],w=Z[9]=Z[9]===r?I?0:e.length:Ye(Z[9]-L,0),!w&&i&(j|U)&&(i&=-25),!i||i==A)var re=h0(e,i,o);else i==j||i==U?re=p0(e,i,w):(i==J||i==(A|J))&&!f.length?re=g0(e,i,o,l):re=ns.apply(r,Z);var de=H?Kl:Cu;return Au(de(re,Z),e,i)}function vu(e,i,o,l){return e===r||zt(e,fr[o])&&!Te.call(l,o)?i:e}function bu(e,i,o,l,f,g){return je(e)&&je(i)&&(g.set(i,e),Ji(e,i,r,bu,g),g.delete(i)),e}function v0(e){return Kr(e)?r:e}function yu(e,i,o,l,f,g){var y=o&O,w=e.length,I=i.length;if(w!=I&&!(y&&I>w))return!1;var L=g.get(e),N=g.get(i);if(L&&N)return L==i&&N==e;var F=-1,H=!0,Z=o&k?new Vn:r;for(g.set(e,i),g.set(i,e);++F<w;){var re=e[F],de=i[F];if(l)var ie=y?l(de,re,F,i,e,g):l(re,de,F,e,i,g);if(ie!==r){if(ie)continue;H=!1;break}if(Z){if(!fo(i,function(pe,be){if(!Nr(Z,be)&&(re===pe||f(re,pe,o,l,g)))return Z.push(be)})){H=!1;break}}else if(!(re===de||f(re,de,o,l,g))){H=!1;break}}return g.delete(e),g.delete(i),H}function b0(e,i,o,l,f,g,y){switch(o){case et:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case oe:return!(e.byteLength!=i.byteLength||!g(new zi(e),new zi(i)));case bn:case yn:case tn:return zt(+e,+i);case zn:return e.name==i.name&&e.message==i.message;case wn:case $:return e==i+"";case it:var w=bo;case S:var I=l&O;if(w||(w=Pi),e.size!=i.size&&!I)return!1;var L=y.get(e);if(L)return L==i;l|=k,y.set(e,i);var N=yu(w(e),w(i),l,f,g,y);return y.delete(e),N;case Y:if(Hr)return Hr.call(e)==Hr.call(i)}return!1}function y0(e,i,o,l,f,g){var y=o&O,w=Bo(e),I=w.length,L=Bo(i),N=L.length;if(I!=N&&!y)return!1;for(var F=I;F--;){var H=w[F];if(!(y?H in i:Te.call(i,H)))return!1}var Z=g.get(e),re=g.get(i);if(Z&&re)return Z==i&&re==e;var de=!0;g.set(e,i),g.set(i,e);for(var ie=y;++F<I;){H=w[F];var pe=e[H],be=i[H];if(l)var wt=y?l(be,pe,H,i,e,g):l(pe,be,H,e,i,g);if(!(wt===r?pe===be||f(pe,be,o,l,g):wt)){de=!1;break}ie||(ie=H=="constructor")}if(de&&!ie){var at=e.constructor,St=i.constructor;at!=St&&"constructor"in e&&"constructor"in i&&!(typeof at=="function"&&at instanceof at&&typeof St=="function"&&St instanceof St)&&(de=!1)}return g.delete(e),g.delete(i),de}function cn(e){return qo(Iu(e,r,Pu),e+"")}function Bo(e){return Ul(e,Ke,Yo)}function Vo(e){return Ul(e,pt,_u)}var $o=Gi?function(e){return Gi.get(e)}:ua;function os(e){for(var i=e.name+"",o=pr[i],l=Te.call(pr,i)?o.length:0;l--;){var f=o[l],g=f.func;if(g==null||g==e)return f.name}return i}function br(e){var i=Te.call(p,"placeholder")?p:e;return i.placeholder}function ee(){var e=p.iteratee||ca;return e=e===ca?Wl:e,arguments.length?e(arguments[0],arguments[1]):e}function as(e,i){var o=e.__data__;return C0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function Go(e){for(var i=Ke(e),o=i.length;o--;){var l=i[o],f=e[l];i[o]=[l,f,xu(f)]}return i}function Yn(e,i){var o=Rg(e,i);return Hl(o)?o:r}function _0(e){var i=Te.call(e,Wn),o=e[Wn];try{e[Wn]=r;var l=!0}catch{}var f=Fi.call(e);return l&&(i?e[Wn]=o:delete e[Wn]),f}var Yo=_o?function(e){return e==null?[]:(e=Ae(e),xn(_o(e),function(i){return El.call(e,i)}))}:da,_u=_o?function(e){for(var i=[];e;)Tn(i,Yo(e)),e=Hi(e);return i}:da,nt=st;(wo&&nt(new wo(new ArrayBuffer(1)))!=et||Fr&&nt(new Fr)!=it||So&&nt(So.resolve())!=Lr||hr&&nt(new hr)!=S||Ur&&nt(new Ur)!=Fe)&&(nt=function(e){var i=st(e),o=i==It?e.constructor:r,l=o?Xn(o):"";if(l)switch(l){case nm:return et;case rm:return it;case im:return Lr;case sm:return S;case om:return Fe}return i});function w0(e,i,o){for(var l=-1,f=o.length;++l<f;){var g=o[l],y=g.size;switch(g.type){case"drop":e+=y;break;case"dropRight":i-=y;break;case"take":i=tt(i,e+y);break;case"takeRight":e=Ye(e,i-y);break}}return{start:e,end:i}}function S0(e){var i=e.match(A1);return i?i[1].split(k1):[]}function wu(e,i,o){i=kn(i,e);for(var l=-1,f=i.length,g=!1;++l<f;){var y=Yt(i[l]);if(!(g=e!=null&&o(e,y)))break;e=e[y]}return g||++l!=f?g:(f=e==null?0:e.length,!!f&&ps(f)&&ln(y,f)&&(ce(e)||Zn(e)))}function x0(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&Te.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function Su(e){return typeof e.constructor=="function"&&!Xr(e)?gr(Hi(e)):{}}function T0(e,i,o){var l=e.constructor;switch(i){case oe:return zo(e);case bn:case yn:return new l(+e);case et:return a0(e,o);case Vt:case $e:case jt:case nn:case Et:case Sn:case mt:case Js:case Qs:return iu(e,o);case it:return new l;case tn:case $:return new l(e);case wn:return c0(e);case S:return new l;case Y:return l0(e)}}function I0(e,i){var o=i.length;if(!o)return e;var l=o-1;return i[l]=(o>1?"& ":"")+i[l],i=i.join(o>2?", ":" "),e.replace(C1,`{
/* [wrapped with `+i+`] */
`)}function E0(e){return ce(e)||Zn(e)||!!(Cl&&e&&e[Cl])}function ln(e,i){var o=typeof e;return i=i??Ce,!!i&&(o=="number"||o!="symbol"&&F1.test(e))&&e>-1&&e%1==0&&e<i}function ot(e,i,o){if(!je(o))return!1;var l=typeof i;return(l=="number"?ht(o)&&ln(i,o.length):l=="string"&&i in o)?zt(o[i],e):!1}function Xo(e,i){if(ce(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||_t(e)?!0:x1.test(e)||!S1.test(e)||i!=null&&e in Ae(i)}function C0(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Zo(e){var i=os(e),o=p[i];if(typeof o!="function"||!(i in me.prototype))return!1;if(e===o)return!0;var l=$o(o);return!!l&&e===l[0]}function A0(e){return!!xl&&xl in e}var k0=Ni?un:fa;function Xr(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||fr;return e===o}function xu(e){return e===e&&!je(e)}function Tu(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==r||e in Ae(o))}}function R0(e){var i=fs(e,function(l){return o.size===m&&o.clear(),l}),o=i.cache;return i}function O0(e,i){var o=e[1],l=i[1],f=o|l,g=f<(A|D|Q),y=l==Q&&o==j||l==Q&&o==q&&e[7].length<=i[8]||l==(Q|q)&&i[7].length<=i[8]&&o==j;if(!(g||y))return e;l&A&&(e[2]=i[2],f|=o&A?0:P);var w=i[3];if(w){var I=e[3];e[3]=I?ou(I,w,i[4]):w,e[4]=I?In(e[3],b):i[4]}return w=i[5],w&&(I=e[5],e[5]=I?au(I,w,i[6]):w,e[6]=I?In(e[5],b):i[6]),w=i[7],w&&(e[7]=w),l&Q&&(e[8]=e[8]==null?i[8]:tt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=f,e}function M0(e){var i=[];if(e!=null)for(var o in Ae(e))i.push(o);return i}function D0(e){return Fi.call(e)}function Iu(e,i,o){return i=Ye(i===r?e.length-1:i,0),function(){for(var l=arguments,f=-1,g=Ye(l.length-i,0),y=R(g);++f<g;)y[f]=l[i+f];f=-1;for(var w=R(i+1);++f<i;)w[f]=l[f];return w[i]=o(y),vt(e,this,w)}}function Eu(e,i){return i.length<2?e:Gn(e,Mt(i,0,-1))}function P0(e,i){for(var o=e.length,l=tt(i.length,o),f=ft(e);l--;){var g=i[l];e[l]=ln(g,o)?f[g]:r}return e}function Ko(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Cu=ku(Kl),Zr=Zg||function(e,i){return qe.setTimeout(e,i)},qo=ku(r0);function Au(e,i,o){var l=i+"";return qo(e,I0(l,L0(S0(l),o)))}function ku(e){var i=0,o=0;return function(){var l=Qg(),f=he-(l-o);if(o=l,f>0){if(++i>=V)return arguments[0]}else i=0;return e.apply(r,arguments)}}function cs(e,i){var o=-1,l=e.length,f=l-1;for(i=i===r?l:i;++o<i;){var g=Do(o,f),y=e[g];e[g]=e[o],e[o]=y}return e.length=i,e}var Ru=R0(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(T1,function(o,l,f,g){i.push(f?g.replace(M1,"$1"):l||o)}),i});function Yt(e){if(typeof e=="string"||_t(e))return e;var i=e+"";return i=="0"&&1/e==-1/0?"-0":i}function Xn(e){if(e!=null){try{return ji.call(e)}catch{}try{return e+""}catch{}}return""}function L0(e,i){return At(Qt,function(o){var l="_."+o[0];i&o[1]&&!Mi(e,l)&&e.push(l)}),e.sort()}function Ou(e){if(e instanceof me)return e.clone();var i=new Rt(e.__wrapped__,e.__chain__);return i.__actions__=ft(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function N0(e,i,o){(o?ot(e,i,o):i===r)?i=1:i=Ye(le(i),0);var l=e==null?0:e.length;if(!l||i<1)return[];for(var f=0,g=0,y=R(Vi(l/i));f<l;)y[g++]=Mt(e,f,f+=i);return y}function j0(e){for(var i=-1,o=e==null?0:e.length,l=0,f=[];++i<o;){var g=e[i];g&&(f[l++]=g)}return f}function F0(){var e=arguments.length;if(!e)return[];for(var i=R(e-1),o=arguments[0],l=e;l--;)i[l-1]=arguments[l];return Tn(ce(o)?ft(o):[o],Je(i,1))}var U0=fe(function(e,i){return We(e)?Br(e,Je(i,1,We,!0)):[]}),z0=fe(function(e,i){var o=Dt(i);return We(o)&&(o=r),We(e)?Br(e,Je(i,1,We,!0),ee(o,2)):[]}),H0=fe(function(e,i){var o=Dt(i);return We(o)&&(o=r),We(e)?Br(e,Je(i,1,We,!0),r,o):[]});function W0(e,i,o){var l=e==null?0:e.length;return l?(i=o||i===r?1:le(i),Mt(e,i<0?0:i,l)):[]}function B0(e,i,o){var l=e==null?0:e.length;return l?(i=o||i===r?1:le(i),i=l-i,Mt(e,0,i<0?0:i)):[]}function V0(e,i){return e&&e.length?es(e,ee(i,3),!0,!0):[]}function $0(e,i){return e&&e.length?es(e,ee(i,3),!0):[]}function G0(e,i,o,l){var f=e==null?0:e.length;return f?(o&&typeof o!="number"&&ot(e,i,o)&&(o=0,l=f),Fm(e,i,o,l)):[]}function Mu(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=o==null?0:le(o);return f<0&&(f=Ye(l+f,0)),Di(e,ee(i,3),f)}function Du(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=l-1;return o!==r&&(f=le(o),f=o<0?Ye(l+f,0):tt(f,l-1)),Di(e,ee(i,3),f,!0)}function Pu(e){var i=e==null?0:e.length;return i?Je(e,1):[]}function Y0(e){var i=e==null?0:e.length;return i?Je(e,Ee):[]}function X0(e,i){var o=e==null?0:e.length;return o?(i=i===r?1:le(i),Je(e,i)):[]}function Z0(e){for(var i=-1,o=e==null?0:e.length,l={};++i<o;){var f=e[i];l[f[0]]=f[1]}return l}function Lu(e){return e&&e.length?e[0]:r}function K0(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=o==null?0:le(o);return f<0&&(f=Ye(l+f,0)),cr(e,i,f)}function q0(e){var i=e==null?0:e.length;return i?Mt(e,0,-1):[]}var J0=fe(function(e){var i=Pe(e,Fo);return i.length&&i[0]===e[0]?Ao(i):[]}),Q0=fe(function(e){var i=Dt(e),o=Pe(e,Fo);return i===Dt(o)?i=r:o.pop(),o.length&&o[0]===e[0]?Ao(o,ee(i,2)):[]}),ev=fe(function(e){var i=Dt(e),o=Pe(e,Fo);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===e[0]?Ao(o,r,i):[]});function tv(e,i){return e==null?"":qg.call(e,i)}function Dt(e){var i=e==null?0:e.length;return i?e[i-1]:r}function nv(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=l;return o!==r&&(f=le(o),f=f<0?Ye(l+f,0):tt(f,l-1)),i===i?Lg(e,i,f):Di(e,gl,f,!0)}function rv(e,i){return e&&e.length?Gl(e,le(i)):r}var iv=fe(Nu);function Nu(e,i){return e&&e.length&&i&&i.length?Mo(e,i):e}function sv(e,i,o){return e&&e.length&&i&&i.length?Mo(e,i,ee(o,2)):e}function ov(e,i,o){return e&&e.length&&i&&i.length?Mo(e,i,r,o):e}var av=cn(function(e,i){var o=e==null?0:e.length,l=To(e,i);return Zl(e,Pe(i,function(f){return ln(f,o)?+f:f}).sort(su)),l});function cv(e,i){var o=[];if(!(e&&e.length))return o;var l=-1,f=[],g=e.length;for(i=ee(i,3);++l<g;){var y=e[l];i(y,l,e)&&(o.push(y),f.push(l))}return Zl(e,f),o}function Jo(e){return e==null?e:tm.call(e)}function lv(e,i,o){var l=e==null?0:e.length;return l?(o&&typeof o!="number"&&ot(e,i,o)?(i=0,o=l):(i=i==null?0:le(i),o=o===r?l:le(o)),Mt(e,i,o)):[]}function uv(e,i){return Qi(e,i)}function dv(e,i,o){return Lo(e,i,ee(o,2))}function fv(e,i){var o=e==null?0:e.length;if(o){var l=Qi(e,i);if(l<o&&zt(e[l],i))return l}return-1}function hv(e,i){return Qi(e,i,!0)}function pv(e,i,o){return Lo(e,i,ee(o,2),!0)}function gv(e,i){var o=e==null?0:e.length;if(o){var l=Qi(e,i,!0)-1;if(zt(e[l],i))return l}return-1}function mv(e){return e&&e.length?ql(e):[]}function vv(e,i){return e&&e.length?ql(e,ee(i,2)):[]}function bv(e){var i=e==null?0:e.length;return i?Mt(e,1,i):[]}function yv(e,i,o){return e&&e.length?(i=o||i===r?1:le(i),Mt(e,0,i<0?0:i)):[]}function _v(e,i,o){var l=e==null?0:e.length;return l?(i=o||i===r?1:le(i),i=l-i,Mt(e,i<0?0:i,l)):[]}function wv(e,i){return e&&e.length?es(e,ee(i,3),!1,!0):[]}function Sv(e,i){return e&&e.length?es(e,ee(i,3)):[]}var xv=fe(function(e){return An(Je(e,1,We,!0))}),Tv=fe(function(e){var i=Dt(e);return We(i)&&(i=r),An(Je(e,1,We,!0),ee(i,2))}),Iv=fe(function(e){var i=Dt(e);return i=typeof i=="function"?i:r,An(Je(e,1,We,!0),r,i)});function Ev(e){return e&&e.length?An(e):[]}function Cv(e,i){return e&&e.length?An(e,ee(i,2)):[]}function Av(e,i){return i=typeof i=="function"?i:r,e&&e.length?An(e,r,i):[]}function Qo(e){if(!(e&&e.length))return[];var i=0;return e=xn(e,function(o){if(We(o))return i=Ye(o.length,i),!0}),mo(i,function(o){return Pe(e,ho(o))})}function ju(e,i){if(!(e&&e.length))return[];var o=Qo(e);return i==null?o:Pe(o,function(l){return vt(i,r,l)})}var kv=fe(function(e,i){return We(e)?Br(e,i):[]}),Rv=fe(function(e){return jo(xn(e,We))}),Ov=fe(function(e){var i=Dt(e);return We(i)&&(i=r),jo(xn(e,We),ee(i,2))}),Mv=fe(function(e){var i=Dt(e);return i=typeof i=="function"?i:r,jo(xn(e,We),r,i)}),Dv=fe(Qo);function Pv(e,i){return tu(e||[],i||[],Wr)}function Lv(e,i){return tu(e||[],i||[],Gr)}var Nv=fe(function(e){var i=e.length,o=i>1?e[i-1]:r;return o=typeof o=="function"?(e.pop(),o):r,ju(e,o)});function Fu(e){var i=p(e);return i.__chain__=!0,i}function jv(e,i){return i(e),e}function ls(e,i){return i(e)}var Fv=cn(function(e){var i=e.length,o=i?e[0]:0,l=this.__wrapped__,f=function(g){return To(g,e)};return i>1||this.__actions__.length||!(l instanceof me)||!ln(o)?this.thru(f):(l=l.slice(o,+o+(i?1:0)),l.__actions__.push({func:ls,args:[f],thisArg:r}),new Rt(l,this.__chain__).thru(function(g){return i&&!g.length&&g.push(r),g}))});function Uv(){return Fu(this)}function zv(){return new Rt(this.value(),this.__chain__)}function Hv(){this.__values__===r&&(this.__values__=Ju(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function Wv(){return this}function Bv(e){for(var i,o=this;o instanceof Xi;){var l=Ou(o);l.__index__=0,l.__values__=r,i?f.__wrapped__=l:i=l;var f=l;o=o.__wrapped__}return f.__wrapped__=e,i}function Vv(){var e=this.__wrapped__;if(e instanceof me){var i=e;return this.__actions__.length&&(i=new me(this)),i=i.reverse(),i.__actions__.push({func:ls,args:[Jo],thisArg:r}),new Rt(i,this.__chain__)}return this.thru(Jo)}function $v(){return eu(this.__wrapped__,this.__actions__)}var Gv=ts(function(e,i,o){Te.call(e,o)?++e[o]:on(e,o,1)});function Yv(e,i,o){var l=ce(e)?hl:jm;return o&&ot(e,i,o)&&(i=r),l(e,ee(i,3))}function Xv(e,i){var o=ce(e)?xn:jl;return o(e,ee(i,3))}var Zv=du(Mu),Kv=du(Du);function qv(e,i){return Je(us(e,i),1)}function Jv(e,i){return Je(us(e,i),Ee)}function Qv(e,i,o){return o=o===r?1:le(o),Je(us(e,i),o)}function Uu(e,i){var o=ce(e)?At:Cn;return o(e,ee(i,3))}function zu(e,i){var o=ce(e)?bg:Nl;return o(e,ee(i,3))}var eb=ts(function(e,i,o){Te.call(e,o)?e[o].push(i):on(e,o,[i])});function tb(e,i,o,l){e=ht(e)?e:_r(e),o=o&&!l?le(o):0;var f=e.length;return o<0&&(o=Ye(f+o,0)),gs(e)?o<=f&&e.indexOf(i,o)>-1:!!f&&cr(e,i,o)>-1}var nb=fe(function(e,i,o){var l=-1,f=typeof i=="function",g=ht(e)?R(e.length):[];return Cn(e,function(y){g[++l]=f?vt(i,y,o):Vr(y,i,o)}),g}),rb=ts(function(e,i,o){on(e,o,i)});function us(e,i){var o=ce(e)?Pe:Bl;return o(e,ee(i,3))}function ib(e,i,o,l){return e==null?[]:(ce(i)||(i=i==null?[]:[i]),o=l?r:o,ce(o)||(o=o==null?[]:[o]),Yl(e,i,o))}var sb=ts(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function ob(e,i,o){var l=ce(e)?uo:vl,f=arguments.length<3;return l(e,ee(i,4),o,f,Cn)}function ab(e,i,o){var l=ce(e)?yg:vl,f=arguments.length<3;return l(e,ee(i,4),o,f,Nl)}function cb(e,i){var o=ce(e)?xn:jl;return o(e,hs(ee(i,3)))}function lb(e){var i=ce(e)?Ml:t0;return i(e)}function ub(e,i,o){(o?ot(e,i,o):i===r)?i=1:i=le(i);var l=ce(e)?Mm:n0;return l(e,i)}function db(e){var i=ce(e)?Dm:i0;return i(e)}function fb(e){if(e==null)return 0;if(ht(e))return gs(e)?ur(e):e.length;var i=nt(e);return i==it||i==S?e.size:Ro(e).length}function hb(e,i,o){var l=ce(e)?fo:s0;return o&&ot(e,i,o)&&(i=r),l(e,ee(i,3))}var pb=fe(function(e,i){if(e==null)return[];var o=i.length;return o>1&&ot(e,i[0],i[1])?i=[]:o>2&&ot(i[0],i[1],i[2])&&(i=[i[0]]),Yl(e,Je(i,1),[])}),ds=Xg||function(){return qe.Date.now()};function gb(e,i){if(typeof i!="function")throw new kt(u);return e=le(e),function(){if(--e<1)return i.apply(this,arguments)}}function Hu(e,i,o){return i=o?r:i,i=e&&i==null?e.length:i,an(e,Q,r,r,r,r,i)}function Wu(e,i){var o;if(typeof i!="function")throw new kt(u);return e=le(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=r),o}}var ea=fe(function(e,i,o){var l=A;if(o.length){var f=In(o,br(ea));l|=J}return an(e,l,i,o,f)}),Bu=fe(function(e,i,o){var l=A|D;if(o.length){var f=In(o,br(Bu));l|=J}return an(i,l,e,o,f)});function Vu(e,i,o){i=o?r:i;var l=an(e,j,r,r,r,r,r,i);return l.placeholder=Vu.placeholder,l}function $u(e,i,o){i=o?r:i;var l=an(e,U,r,r,r,r,r,i);return l.placeholder=$u.placeholder,l}function Gu(e,i,o){var l,f,g,y,w,I,L=0,N=!1,F=!1,H=!0;if(typeof e!="function")throw new kt(u);i=Pt(i)||0,je(o)&&(N=!!o.leading,F="maxWait"in o,g=F?Ye(Pt(o.maxWait)||0,i):g,H="trailing"in o?!!o.trailing:H);function Z(Be){var Ht=l,fn=f;return l=f=r,L=Be,y=e.apply(fn,Ht),y}function re(Be){return L=Be,w=Zr(pe,i),N?Z(Be):y}function de(Be){var Ht=Be-I,fn=Be-L,dd=i-Ht;return F?tt(dd,g-fn):dd}function ie(Be){var Ht=Be-I,fn=Be-L;return I===r||Ht>=i||Ht<0||F&&fn>=g}function pe(){var Be=ds();if(ie(Be))return be(Be);w=Zr(pe,de(Be))}function be(Be){return w=r,H&&l?Z(Be):(l=f=r,y)}function wt(){w!==r&&nu(w),L=0,l=I=f=w=r}function at(){return w===r?y:be(ds())}function St(){var Be=ds(),Ht=ie(Be);if(l=arguments,f=this,I=Be,Ht){if(w===r)return re(I);if(F)return nu(w),w=Zr(pe,i),Z(I)}return w===r&&(w=Zr(pe,i)),y}return St.cancel=wt,St.flush=at,St}var mb=fe(function(e,i){return Ll(e,1,i)}),vb=fe(function(e,i,o){return Ll(e,Pt(i)||0,o)});function bb(e){return an(e,X)}function fs(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new kt(u);var o=function(){var l=arguments,f=i?i.apply(this,l):l[0],g=o.cache;if(g.has(f))return g.get(f);var y=e.apply(this,l);return o.cache=g.set(f,y)||g,y};return o.cache=new(fs.Cache||sn),o}fs.Cache=sn;function hs(e){if(typeof e!="function")throw new kt(u);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function yb(e){return Wu(2,e)}var _b=o0(function(e,i){i=i.length==1&&ce(i[0])?Pe(i[0],bt(ee())):Pe(Je(i,1),bt(ee()));var o=i.length;return fe(function(l){for(var f=-1,g=tt(l.length,o);++f<g;)l[f]=i[f].call(this,l[f]);return vt(e,this,l)})}),ta=fe(function(e,i){var o=In(i,br(ta));return an(e,J,r,i,o)}),Yu=fe(function(e,i){var o=In(i,br(Yu));return an(e,K,r,i,o)}),wb=cn(function(e,i){return an(e,q,r,r,r,i)});function Sb(e,i){if(typeof e!="function")throw new kt(u);return i=i===r?i:le(i),fe(e,i)}function xb(e,i){if(typeof e!="function")throw new kt(u);return i=i==null?0:Ye(le(i),0),fe(function(o){var l=o[i],f=Rn(o,0,i);return l&&Tn(f,l),vt(e,this,f)})}function Tb(e,i,o){var l=!0,f=!0;if(typeof e!="function")throw new kt(u);return je(o)&&(l="leading"in o?!!o.leading:l,f="trailing"in o?!!o.trailing:f),Gu(e,i,{leading:l,maxWait:i,trailing:f})}function Ib(e){return Hu(e,1)}function Eb(e,i){return ta(Uo(i),e)}function Cb(){if(!arguments.length)return[];var e=arguments[0];return ce(e)?e:[e]}function Ab(e){return Ot(e,E)}function kb(e,i){return i=typeof i=="function"?i:r,Ot(e,E,i)}function Rb(e){return Ot(e,_|E)}function Ob(e,i){return i=typeof i=="function"?i:r,Ot(e,_|E,i)}function Mb(e,i){return i==null||Pl(e,i,Ke(i))}function zt(e,i){return e===i||e!==e&&i!==i}var Db=ss(Co),Pb=ss(function(e,i){return e>=i}),Zn=zl(function(){return arguments}())?zl:function(e){return Ue(e)&&Te.call(e,"callee")&&!El.call(e,"callee")},ce=R.isArray,Lb=al?bt(al):Bm;function ht(e){return e!=null&&ps(e.length)&&!un(e)}function We(e){return Ue(e)&&ht(e)}function Nb(e){return e===!0||e===!1||Ue(e)&&st(e)==bn}var On=Kg||fa,jb=cl?bt(cl):Vm;function Fb(e){return Ue(e)&&e.nodeType===1&&!Kr(e)}function Ub(e){if(e==null)return!0;if(ht(e)&&(ce(e)||typeof e=="string"||typeof e.splice=="function"||On(e)||yr(e)||Zn(e)))return!e.length;var i=nt(e);if(i==it||i==S)return!e.size;if(Xr(e))return!Ro(e).length;for(var o in e)if(Te.call(e,o))return!1;return!0}function zb(e,i){return $r(e,i)}function Hb(e,i,o){o=typeof o=="function"?o:r;var l=o?o(e,i):r;return l===r?$r(e,i,r,o):!!l}function na(e){if(!Ue(e))return!1;var i=st(e);return i==zn||i==Ci||typeof e.message=="string"&&typeof e.name=="string"&&!Kr(e)}function Wb(e){return typeof e=="number"&&Al(e)}function un(e){if(!je(e))return!1;var i=st(e);return i==_n||i==Pr||i==Ei||i==Ai}function Xu(e){return typeof e=="number"&&e==le(e)}function ps(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ce}function je(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Ue(e){return e!=null&&typeof e=="object"}var Zu=ll?bt(ll):Gm;function Bb(e,i){return e===i||ko(e,i,Go(i))}function Vb(e,i,o){return o=typeof o=="function"?o:r,ko(e,i,Go(i),o)}function $b(e){return Ku(e)&&e!=+e}function Gb(e){if(k0(e))throw new ae(c);return Hl(e)}function Yb(e){return e===null}function Xb(e){return e==null}function Ku(e){return typeof e=="number"||Ue(e)&&st(e)==tn}function Kr(e){if(!Ue(e)||st(e)!=It)return!1;var i=Hi(e);if(i===null)return!0;var o=Te.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&ji.call(o)==Vg}var ra=ul?bt(ul):Ym;function Zb(e){return Xu(e)&&e>=-9007199254740991&&e<=Ce}var qu=dl?bt(dl):Xm;function gs(e){return typeof e=="string"||!ce(e)&&Ue(e)&&st(e)==$}function _t(e){return typeof e=="symbol"||Ue(e)&&st(e)==Y}var yr=fl?bt(fl):Zm;function Kb(e){return e===r}function qb(e){return Ue(e)&&nt(e)==Fe}function Jb(e){return Ue(e)&&st(e)==Oe}var Qb=ss(Oo),e2=ss(function(e,i){return e<=i});function Ju(e){if(!e)return[];if(ht(e))return gs(e)?Ft(e):ft(e);if(jr&&e[jr])return Mg(e[jr]());var i=nt(e),o=i==it?bo:i==S?Pi:_r;return o(e)}function dn(e){if(!e)return e===0?e:0;if(e=Pt(e),e===Ee||e===-1/0){var i=e<0?-1:1;return i*Re}return e===e?e:0}function le(e){var i=dn(e),o=i%1;return i===i?o?i-o:i:0}function Qu(e){return e?$n(le(e),0,se):0}function Pt(e){if(typeof e=="number")return e;if(_t(e))return dt;if(je(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=je(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=bl(e);var o=L1.test(e);return o||j1.test(e)?gg(e.slice(2),o?2:8):P1.test(e)?dt:+e}function ed(e){return Gt(e,pt(e))}function t2(e){return e?$n(le(e),-9007199254740991,Ce):e===0?e:0}function xe(e){return e==null?"":yt(e)}var n2=mr(function(e,i){if(Xr(i)||ht(i)){Gt(i,Ke(i),e);return}for(var o in i)Te.call(i,o)&&Wr(e,o,i[o])}),td=mr(function(e,i){Gt(i,pt(i),e)}),ms=mr(function(e,i,o,l){Gt(i,pt(i),e,l)}),r2=mr(function(e,i,o,l){Gt(i,Ke(i),e,l)}),i2=cn(To);function s2(e,i){var o=gr(e);return i==null?o:Dl(o,i)}var o2=fe(function(e,i){e=Ae(e);var o=-1,l=i.length,f=l>2?i[2]:r;for(f&&ot(i[0],i[1],f)&&(l=1);++o<l;)for(var g=i[o],y=pt(g),w=-1,I=y.length;++w<I;){var L=y[w],N=e[L];(N===r||zt(N,fr[L])&&!Te.call(e,L))&&(e[L]=g[L])}return e}),a2=fe(function(e){return e.push(r,bu),vt(nd,r,e)});function c2(e,i){return pl(e,ee(i,3),$t)}function l2(e,i){return pl(e,ee(i,3),Eo)}function u2(e,i){return e==null?e:Io(e,ee(i,3),pt)}function d2(e,i){return e==null?e:Fl(e,ee(i,3),pt)}function f2(e,i){return e&&$t(e,ee(i,3))}function h2(e,i){return e&&Eo(e,ee(i,3))}function p2(e){return e==null?[]:qi(e,Ke(e))}function g2(e){return e==null?[]:qi(e,pt(e))}function ia(e,i,o){var l=e==null?r:Gn(e,i);return l===r?o:l}function m2(e,i){return e!=null&&wu(e,i,Um)}function sa(e,i){return e!=null&&wu(e,i,zm)}var v2=hu(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=Fi.call(i)),e[i]=o},aa(gt)),b2=hu(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=Fi.call(i)),Te.call(e,i)?e[i].push(o):e[i]=[o]},ee),y2=fe(Vr);function Ke(e){return ht(e)?Ol(e):Ro(e)}function pt(e){return ht(e)?Ol(e,!0):Km(e)}function _2(e,i){var o={};return i=ee(i,3),$t(e,function(l,f,g){on(o,i(l,f,g),l)}),o}function w2(e,i){var o={};return i=ee(i,3),$t(e,function(l,f,g){on(o,f,i(l,f,g))}),o}var S2=mr(function(e,i,o){Ji(e,i,o)}),nd=mr(function(e,i,o,l){Ji(e,i,o,l)}),x2=cn(function(e,i){var o={};if(e==null)return o;var l=!1;i=Pe(i,function(g){return g=kn(g,e),l||(l=g.length>1),g}),Gt(e,Vo(e),o),l&&(o=Ot(o,_|x|E,v0));for(var f=i.length;f--;)No(o,i[f]);return o});function T2(e,i){return rd(e,hs(ee(i)))}var I2=cn(function(e,i){return e==null?{}:Jm(e,i)});function rd(e,i){if(e==null)return{};var o=Pe(Vo(e),function(l){return[l]});return i=ee(i),Xl(e,o,function(l,f){return i(l,f[0])})}function E2(e,i,o){i=kn(i,e);var l=-1,f=i.length;for(f||(f=1,e=r);++l<f;){var g=e==null?r:e[Yt(i[l])];g===r&&(l=f,g=o),e=un(g)?g.call(e):g}return e}function C2(e,i,o){return e==null?e:Gr(e,i,o)}function A2(e,i,o,l){return l=typeof l=="function"?l:r,e==null?e:Gr(e,i,o,l)}var id=mu(Ke),sd=mu(pt);function k2(e,i,o){var l=ce(e),f=l||On(e)||yr(e);if(i=ee(i,4),o==null){var g=e&&e.constructor;f?o=l?new g:[]:je(e)?o=un(g)?gr(Hi(e)):{}:o={}}return(f?At:$t)(e,function(y,w,I){return i(o,y,w,I)}),o}function R2(e,i){return e==null?!0:No(e,i)}function O2(e,i,o){return e==null?e:Ql(e,i,Uo(o))}function M2(e,i,o,l){return l=typeof l=="function"?l:r,e==null?e:Ql(e,i,Uo(o),l)}function _r(e){return e==null?[]:vo(e,Ke(e))}function D2(e){return e==null?[]:vo(e,pt(e))}function P2(e,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Pt(o),o=o===o?o:0),i!==r&&(i=Pt(i),i=i===i?i:0),$n(Pt(e),i,o)}function L2(e,i,o){return i=dn(i),o===r?(o=i,i=0):o=dn(o),e=Pt(e),Hm(e,i,o)}function N2(e,i,o){if(o&&typeof o!="boolean"&&ot(e,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof e=="boolean"&&(o=e,e=r)),e===r&&i===r?(e=0,i=1):(e=dn(e),i===r?(i=e,e=0):i=dn(i)),e>i){var l=e;e=i,i=l}if(o||e%1||i%1){var f=kl();return tt(e+f*(i-e+pg("1e-"+((f+"").length-1))),i)}return Do(e,i)}var j2=vr(function(e,i,o){return i=i.toLowerCase(),e+(o?od(i):i)});function od(e){return oa(xe(e).toLowerCase())}function ad(e){return e=xe(e),e&&e.replace(U1,Cg).replace(ig,"")}function F2(e,i,o){e=xe(e),i=yt(i);var l=e.length;o=o===r?l:$n(le(o),0,l);var f=o;return o-=i.length,o>=0&&e.slice(o,f)==i}function U2(e){return e=xe(e),e&&y1.test(e)?e.replace(Fc,Ag):e}function z2(e){return e=xe(e),e&&I1.test(e)?e.replace(eo,"\\$&"):e}var H2=vr(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),W2=vr(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),B2=uu("toLowerCase");function V2(e,i,o){e=xe(e),i=le(i);var l=i?ur(e):0;if(!i||l>=i)return e;var f=(i-l)/2;return is($i(f),o)+e+is(Vi(f),o)}function $2(e,i,o){e=xe(e),i=le(i);var l=i?ur(e):0;return i&&l<i?e+is(i-l,o):e}function G2(e,i,o){e=xe(e),i=le(i);var l=i?ur(e):0;return i&&l<i?is(i-l,o)+e:e}function Y2(e,i,o){return o||i==null?i=0:i&&(i=+i),em(xe(e).replace(to,""),i||0)}function X2(e,i,o){return(o?ot(e,i,o):i===r)?i=1:i=le(i),Po(xe(e),i)}function Z2(){var e=arguments,i=xe(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var K2=vr(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function q2(e,i,o){return o&&typeof o!="number"&&ot(e,i,o)&&(i=o=r),o=o===r?se:o>>>0,o?(e=xe(e),e&&(typeof i=="string"||i!=null&&!ra(i))&&(i=yt(i),!i&&lr(e))?Rn(Ft(e),0,o):e.split(i,o)):[]}var J2=vr(function(e,i,o){return e+(o?" ":"")+oa(i)});function Q2(e,i,o){return e=xe(e),o=o==null?0:$n(le(o),0,e.length),i=yt(i),e.slice(o,o+i.length)==i}function ey(e,i,o){var l=p.templateSettings;o&&ot(e,i,o)&&(i=r),e=xe(e),i=ms({},i,l,vu);var f=ms({},i.imports,l.imports,vu),g=Ke(f),y=vo(f,g),w,I,L=0,N=i.interpolate||ki,F="__p += '",H=yo((i.escape||ki).source+"|"+N.source+"|"+(N===Uc?D1:ki).source+"|"+(i.evaluate||ki).source+"|$","g"),Z="//# sourceURL="+(Te.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lg+"]")+`
`;e.replace(H,function(ie,pe,be,wt,at,St){return be||(be=wt),F+=e.slice(L,St).replace(z1,kg),pe&&(w=!0,F+=`' +
__e(`+pe+`) +
'`),at&&(I=!0,F+=`';
`+at+`;
__p += '`),be&&(F+=`' +
((__t = (`+be+`)) == null ? '' : __t) +
'`),L=St+ie.length,ie}),F+=`';
`;var re=Te.call(i,"variable")&&i.variable;if(!re)F=`with (obj) {
`+F+`
}
`;else if(O1.test(re))throw new ae(d);F=(I?F.replace(g1,""):F).replace(m1,"$1").replace(v1,"$1;"),F="function("+(re||"obj")+`) {
`+(re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(w?", __e = _.escape":"")+(I?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var de=ld(function(){return _e(g,Z+"return "+F).apply(r,y)});if(de.source=F,na(de))throw de;return de}function ty(e){return xe(e).toLowerCase()}function ny(e){return xe(e).toUpperCase()}function ry(e,i,o){if(e=xe(e),e&&(o||i===r))return bl(e);if(!e||!(i=yt(i)))return e;var l=Ft(e),f=Ft(i),g=yl(l,f),y=_l(l,f)+1;return Rn(l,g,y).join("")}function iy(e,i,o){if(e=xe(e),e&&(o||i===r))return e.slice(0,Sl(e)+1);if(!e||!(i=yt(i)))return e;var l=Ft(e),f=_l(l,Ft(i))+1;return Rn(l,0,f).join("")}function sy(e,i,o){if(e=xe(e),e&&(o||i===r))return e.replace(to,"");if(!e||!(i=yt(i)))return e;var l=Ft(e),f=yl(l,Ft(i));return Rn(l,f).join("")}function oy(e,i){var o=te,l=ne;if(je(i)){var f="separator"in i?i.separator:f;o="length"in i?le(i.length):o,l="omission"in i?yt(i.omission):l}e=xe(e);var g=e.length;if(lr(e)){var y=Ft(e);g=y.length}if(o>=g)return e;var w=o-ur(l);if(w<1)return l;var I=y?Rn(y,0,w).join(""):e.slice(0,w);if(f===r)return I+l;if(y&&(w+=I.length-w),ra(f)){if(e.slice(w).search(f)){var L,N=I;for(f.global||(f=yo(f.source,xe(zc.exec(f))+"g")),f.lastIndex=0;L=f.exec(N);)var F=L.index;I=I.slice(0,F===r?w:F)}}else if(e.indexOf(yt(f),w)!=w){var H=I.lastIndexOf(f);H>-1&&(I=I.slice(0,H))}return I+l}function ay(e){return e=xe(e),e&&b1.test(e)?e.replace(jc,Ng):e}var cy=vr(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),oa=uu("toUpperCase");function cd(e,i,o){return e=xe(e),i=o?r:i,i===r?Og(e)?Ug(e):Sg(e):e.match(i)||[]}var ld=fe(function(e,i){try{return vt(e,r,i)}catch(o){return na(o)?o:new ae(o)}}),ly=cn(function(e,i){return At(i,function(o){o=Yt(o),on(e,o,ea(e[o],e))}),e});function uy(e){var i=e==null?0:e.length,o=ee();return e=i?Pe(e,function(l){if(typeof l[1]!="function")throw new kt(u);return[o(l[0]),l[1]]}):[],fe(function(l){for(var f=-1;++f<i;){var g=e[f];if(vt(g[0],this,l))return vt(g[1],this,l)}})}function dy(e){return Nm(Ot(e,_))}function aa(e){return function(){return e}}function fy(e,i){return e==null||e!==e?i:e}var hy=fu(),py=fu(!0);function gt(e){return e}function ca(e){return Wl(typeof e=="function"?e:Ot(e,_))}function gy(e){return Vl(Ot(e,_))}function my(e,i){return $l(e,Ot(i,_))}var vy=fe(function(e,i){return function(o){return Vr(o,e,i)}}),by=fe(function(e,i){return function(o){return Vr(e,o,i)}});function la(e,i,o){var l=Ke(i),f=qi(i,l);o==null&&!(je(i)&&(f.length||!l.length))&&(o=i,i=e,e=this,f=qi(i,Ke(i)));var g=!(je(o)&&"chain"in o)||!!o.chain,y=un(e);return At(f,function(w){var I=i[w];e[w]=I,y&&(e.prototype[w]=function(){var L=this.__chain__;if(g||L){var N=e(this.__wrapped__),F=N.__actions__=ft(this.__actions__);return F.push({func:I,args:arguments,thisArg:e}),N.__chain__=L,N}return I.apply(e,Tn([this.value()],arguments))})}),e}function yy(){return qe._===this&&(qe._=$g),this}function ua(){}function _y(e){return e=le(e),fe(function(i){return Gl(i,e)})}var wy=Ho(Pe),Sy=Ho(hl),xy=Ho(fo);function ud(e){return Xo(e)?ho(Yt(e)):Qm(e)}function Ty(e){return function(i){return e==null?r:Gn(e,i)}}var Iy=pu(),Ey=pu(!0);function da(){return[]}function fa(){return!1}function Cy(){return{}}function Ay(){return""}function ky(){return!0}function Ry(e,i){if(e=le(e),e<1||e>Ce)return[];var o=se,l=tt(e,se);i=ee(i),e-=se;for(var f=mo(l,i);++o<e;)i(o);return f}function Oy(e){return ce(e)?Pe(e,Yt):_t(e)?[e]:ft(Ru(xe(e)))}function My(e){var i=++Bg;return xe(e)+i}var Dy=rs(function(e,i){return e+i},0),Py=Wo("ceil"),Ly=rs(function(e,i){return e/i},1),Ny=Wo("floor");function jy(e){return e&&e.length?Ki(e,gt,Co):r}function Fy(e,i){return e&&e.length?Ki(e,ee(i,2),Co):r}function Uy(e){return ml(e,gt)}function zy(e,i){return ml(e,ee(i,2))}function Hy(e){return e&&e.length?Ki(e,gt,Oo):r}function Wy(e,i){return e&&e.length?Ki(e,ee(i,2),Oo):r}var By=rs(function(e,i){return e*i},1),Vy=Wo("round"),$y=rs(function(e,i){return e-i},0);function Gy(e){return e&&e.length?go(e,gt):0}function Yy(e,i){return e&&e.length?go(e,ee(i,2)):0}return p.after=gb,p.ary=Hu,p.assign=n2,p.assignIn=td,p.assignInWith=ms,p.assignWith=r2,p.at=i2,p.before=Wu,p.bind=ea,p.bindAll=ly,p.bindKey=Bu,p.castArray=Cb,p.chain=Fu,p.chunk=N0,p.compact=j0,p.concat=F0,p.cond=uy,p.conforms=dy,p.constant=aa,p.countBy=Gv,p.create=s2,p.curry=Vu,p.curryRight=$u,p.debounce=Gu,p.defaults=o2,p.defaultsDeep=a2,p.defer=mb,p.delay=vb,p.difference=U0,p.differenceBy=z0,p.differenceWith=H0,p.drop=W0,p.dropRight=B0,p.dropRightWhile=V0,p.dropWhile=$0,p.fill=G0,p.filter=Xv,p.flatMap=qv,p.flatMapDeep=Jv,p.flatMapDepth=Qv,p.flatten=Pu,p.flattenDeep=Y0,p.flattenDepth=X0,p.flip=bb,p.flow=hy,p.flowRight=py,p.fromPairs=Z0,p.functions=p2,p.functionsIn=g2,p.groupBy=eb,p.initial=q0,p.intersection=J0,p.intersectionBy=Q0,p.intersectionWith=ev,p.invert=v2,p.invertBy=b2,p.invokeMap=nb,p.iteratee=ca,p.keyBy=rb,p.keys=Ke,p.keysIn=pt,p.map=us,p.mapKeys=_2,p.mapValues=w2,p.matches=gy,p.matchesProperty=my,p.memoize=fs,p.merge=S2,p.mergeWith=nd,p.method=vy,p.methodOf=by,p.mixin=la,p.negate=hs,p.nthArg=_y,p.omit=x2,p.omitBy=T2,p.once=yb,p.orderBy=ib,p.over=wy,p.overArgs=_b,p.overEvery=Sy,p.overSome=xy,p.partial=ta,p.partialRight=Yu,p.partition=sb,p.pick=I2,p.pickBy=rd,p.property=ud,p.propertyOf=Ty,p.pull=iv,p.pullAll=Nu,p.pullAllBy=sv,p.pullAllWith=ov,p.pullAt=av,p.range=Iy,p.rangeRight=Ey,p.rearg=wb,p.reject=cb,p.remove=cv,p.rest=Sb,p.reverse=Jo,p.sampleSize=ub,p.set=C2,p.setWith=A2,p.shuffle=db,p.slice=lv,p.sortBy=pb,p.sortedUniq=mv,p.sortedUniqBy=vv,p.split=q2,p.spread=xb,p.tail=bv,p.take=yv,p.takeRight=_v,p.takeRightWhile=wv,p.takeWhile=Sv,p.tap=jv,p.throttle=Tb,p.thru=ls,p.toArray=Ju,p.toPairs=id,p.toPairsIn=sd,p.toPath=Oy,p.toPlainObject=ed,p.transform=k2,p.unary=Ib,p.union=xv,p.unionBy=Tv,p.unionWith=Iv,p.uniq=Ev,p.uniqBy=Cv,p.uniqWith=Av,p.unset=R2,p.unzip=Qo,p.unzipWith=ju,p.update=O2,p.updateWith=M2,p.values=_r,p.valuesIn=D2,p.without=kv,p.words=cd,p.wrap=Eb,p.xor=Rv,p.xorBy=Ov,p.xorWith=Mv,p.zip=Dv,p.zipObject=Pv,p.zipObjectDeep=Lv,p.zipWith=Nv,p.entries=id,p.entriesIn=sd,p.extend=td,p.extendWith=ms,la(p,p),p.add=Dy,p.attempt=ld,p.camelCase=j2,p.capitalize=od,p.ceil=Py,p.clamp=P2,p.clone=Ab,p.cloneDeep=Rb,p.cloneDeepWith=Ob,p.cloneWith=kb,p.conformsTo=Mb,p.deburr=ad,p.defaultTo=fy,p.divide=Ly,p.endsWith=F2,p.eq=zt,p.escape=U2,p.escapeRegExp=z2,p.every=Yv,p.find=Zv,p.findIndex=Mu,p.findKey=c2,p.findLast=Kv,p.findLastIndex=Du,p.findLastKey=l2,p.floor=Ny,p.forEach=Uu,p.forEachRight=zu,p.forIn=u2,p.forInRight=d2,p.forOwn=f2,p.forOwnRight=h2,p.get=ia,p.gt=Db,p.gte=Pb,p.has=m2,p.hasIn=sa,p.head=Lu,p.identity=gt,p.includes=tb,p.indexOf=K0,p.inRange=L2,p.invoke=y2,p.isArguments=Zn,p.isArray=ce,p.isArrayBuffer=Lb,p.isArrayLike=ht,p.isArrayLikeObject=We,p.isBoolean=Nb,p.isBuffer=On,p.isDate=jb,p.isElement=Fb,p.isEmpty=Ub,p.isEqual=zb,p.isEqualWith=Hb,p.isError=na,p.isFinite=Wb,p.isFunction=un,p.isInteger=Xu,p.isLength=ps,p.isMap=Zu,p.isMatch=Bb,p.isMatchWith=Vb,p.isNaN=$b,p.isNative=Gb,p.isNil=Xb,p.isNull=Yb,p.isNumber=Ku,p.isObject=je,p.isObjectLike=Ue,p.isPlainObject=Kr,p.isRegExp=ra,p.isSafeInteger=Zb,p.isSet=qu,p.isString=gs,p.isSymbol=_t,p.isTypedArray=yr,p.isUndefined=Kb,p.isWeakMap=qb,p.isWeakSet=Jb,p.join=tv,p.kebabCase=H2,p.last=Dt,p.lastIndexOf=nv,p.lowerCase=W2,p.lowerFirst=B2,p.lt=Qb,p.lte=e2,p.max=jy,p.maxBy=Fy,p.mean=Uy,p.meanBy=zy,p.min=Hy,p.minBy=Wy,p.stubArray=da,p.stubFalse=fa,p.stubObject=Cy,p.stubString=Ay,p.stubTrue=ky,p.multiply=By,p.nth=rv,p.noConflict=yy,p.noop=ua,p.now=ds,p.pad=V2,p.padEnd=$2,p.padStart=G2,p.parseInt=Y2,p.random=N2,p.reduce=ob,p.reduceRight=ab,p.repeat=X2,p.replace=Z2,p.result=E2,p.round=Vy,p.runInContext=T,p.sample=lb,p.size=fb,p.snakeCase=K2,p.some=hb,p.sortedIndex=uv,p.sortedIndexBy=dv,p.sortedIndexOf=fv,p.sortedLastIndex=hv,p.sortedLastIndexBy=pv,p.sortedLastIndexOf=gv,p.startCase=J2,p.startsWith=Q2,p.subtract=$y,p.sum=Gy,p.sumBy=Yy,p.template=ey,p.times=Ry,p.toFinite=dn,p.toInteger=le,p.toLength=Qu,p.toLower=ty,p.toNumber=Pt,p.toSafeInteger=t2,p.toString=xe,p.toUpper=ny,p.trim=ry,p.trimEnd=iy,p.trimStart=sy,p.truncate=oy,p.unescape=ay,p.uniqueId=My,p.upperCase=cy,p.upperFirst=oa,p.each=Uu,p.eachRight=zu,p.first=Lu,la(p,function(){var e={};return $t(p,function(i,o){Te.call(p.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),p.VERSION=s,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),At(["drop","take"],function(e,i){me.prototype[e]=function(o){o=o===r?1:Ye(le(o),0);var l=this.__filtered__&&!i?new me(this):this.clone();return l.__filtered__?l.__takeCount__=tt(o,l.__takeCount__):l.__views__.push({size:tt(o,se),type:e+(l.__dir__<0?"Right":"")}),l},me.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),At(["filter","map","takeWhile"],function(e,i){var o=i+1,l=o==Ie||o==Se;me.prototype[e]=function(f){var g=this.clone();return g.__iteratees__.push({iteratee:ee(f,3),type:o}),g.__filtered__=g.__filtered__||l,g}}),At(["head","last"],function(e,i){var o="take"+(i?"Right":"");me.prototype[e]=function(){return this[o](1).value()[0]}}),At(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");me.prototype[e]=function(){return this.__filtered__?new me(this):this[o](1)}}),me.prototype.compact=function(){return this.filter(gt)},me.prototype.find=function(e){return this.filter(e).head()},me.prototype.findLast=function(e){return this.reverse().find(e)},me.prototype.invokeMap=fe(function(e,i){return typeof e=="function"?new me(this):this.map(function(o){return Vr(o,e,i)})}),me.prototype.reject=function(e){return this.filter(hs(ee(e)))},me.prototype.slice=function(e,i){e=le(e);var o=this;return o.__filtered__&&(e>0||i<0)?new me(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==r&&(i=le(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},me.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},me.prototype.toArray=function(){return this.take(se)},$t(me.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),l=/^(?:head|last)$/.test(i),f=p[l?"take"+(i=="last"?"Right":""):i],g=l||/^find/.test(i);f&&(p.prototype[i]=function(){var y=this.__wrapped__,w=l?[1]:arguments,I=y instanceof me,L=w[0],N=I||ce(y),F=function(pe){var be=f.apply(p,Tn([pe],w));return l&&H?be[0]:be};N&&o&&typeof L=="function"&&L.length!=1&&(I=N=!1);var H=this.__chain__,Z=!!this.__actions__.length,re=g&&!H,de=I&&!Z;if(!g&&N){y=de?y:new me(this);var ie=e.apply(y,w);return ie.__actions__.push({func:ls,args:[F],thisArg:r}),new Rt(ie,H)}return re&&de?e.apply(this,w):(ie=this.thru(F),re?l?ie.value()[0]:ie.value():ie)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var i=Li[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var f=arguments;if(l&&!this.__chain__){var g=this.value();return i.apply(ce(g)?g:[],f)}return this[o](function(y){return i.apply(ce(y)?y:[],f)})}}),$t(me.prototype,function(e,i){var o=p[i];if(o){var l=o.name+"";Te.call(pr,l)||(pr[l]=[]),pr[l].push({name:i,func:o})}}),pr[ns(r,D).name]=[{name:"wrapper",func:r}],me.prototype.clone=am,me.prototype.reverse=cm,me.prototype.value=lm,p.prototype.at=Fv,p.prototype.chain=Uv,p.prototype.commit=zv,p.prototype.next=Hv,p.prototype.plant=Bv,p.prototype.reverse=Vv,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=$v,p.prototype.first=p.prototype.head,jr&&(p.prototype[jr]=Wv),p},dr=zg();Hn?((Hn.exports=dr)._=dr,ao._=dr):qe._=dr}).call(qr)})(Cs,Cs.exports);var we=Cs.exports;const R3=()=>{const{trackItemIds:t,trackItemsMap:n,fps:r,trackItemDetailsMap:s}=qt(),a=we.merge(n,s);return v.jsx(v.Fragment,{children:t.map(c=>{const u=a[c];return Xh[u.type](u,{fps:r})})})},Zh=()=>{const t=G.useRef(null),{setPlayerRef:n,duration:r,fps:s,size:a}=qt();return G.useEffect(()=>{n(t)},[]),v.jsx(ef.Flex,{className:"size-full",children:v.jsx(Zy.Player,{ref:t,component:R3,durationInFrames:Math.round(r/1e3*s)||5*30,compositionWidth:1920,compositionHeight:1080,style:{width:"100%",height:"100%"},inputProps:{},fps:s,controls:!0})})},Kh=({scrollLeft:t})=>{const n=G.useRef(null),{playerRef:r,fps:s,scale:a}=qt(),c=Hs(r??void 0),u=Ve(c/s*1e3,a.zoom)-t,[d,h]=G.useState(!1),[m,b]=G.useState(0),[_,x]=G.useState(u),E=()=>{h(!1)},O=A=>{h(!0);const D="touches"in A?A.touches[0].clientX:A.clientX;b(D),x(u)},k=A=>{if(d){const P=("touches"in A?A.touches[0].clientX:A.clientX)-m,j=_+P,U=Pn(j,a.zoom);r?.current?.seekTo(U*s/1e3)}};return G.useEffect(()=>{const A=D=>{D.preventDefault()};return d?(document.addEventListener("mousemove",k),document.addEventListener("mouseup",E),document.addEventListener("touchmove",k),document.addEventListener("touchend",E),document.addEventListener("dragstart",A)):(document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",E)),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",E),document.removeEventListener("dragstart",A)}},[d,k,E]),v.jsx("div",{ref:n,role:"button",tabIndex:0,onMouseDown:A=>{O(A)},onTouchStart:A=>{O(A)},onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&O(A)},style:{position:"absolute",left:40+zs+u,top:80,width:1,height:"calc(100% - 80px)",background:"#d4d4d8",zIndex:10,cursor:"pointer"},children:v.jsxs("div",{className:"relative h-full",children:[v.jsx("div",{className:"absolute top-0  h-full w-3 -translate-x-1/2"}),v.jsx("div",{className:"absolute top-0  h-full w-0.5 -translate-x-1/2 bg-white/50"}),v.jsx("div",{style:{borderRadius:"0 0 20px 20px"},className:"absolute h-3 -translate-x-1/2 px-1.5",children:v.jsx("svg",{height:"12",viewBox:"0 0 12 12",fill:"none",children:v.jsx("path",{fill:"currentColor",d:"M11.6585 7.04881L6.6585 11.4238C6.28148 11.7537 5.71852 11.7537 5.3415 11.4238L0.341495 7.04881C0.12448 6.85892 0 6.58459 0 6.29623V1C0 0.447715 0.447715 0 1 0H11C11.5523 0 12 0.447715 12 1V6.29623C12 6.58459 11.8755 6.85892 11.6585 7.04881Z"})})})]})})},qh=t=>{const{height:n=40,longLineSize:r=8,shortLineSize:s=6,offsetX:a=Es+zs,textOffsetY:c=12,textFormat:u=Ah,scrollLeft:d=0,onClick:h}=t,{scale:m}=qt(),b=G.useRef(null),[_,x]=G.useState(null),[E,O]=G.useState({width:0,height:n});G.useEffect(()=>{const P=b.current;if(P){const j=P.getContext("2d");x(j),k(P,j,d)}},[]),G.useEffect(()=>{_&&k(b.current,_,d)},[_,d,m]);const k=(P,j,U)=>{if(!P||!j)return;const K=P.offsetParent.offsetWidth??P.offsetWidth,Q=E.height;P.width=K,P.height=Q,A(j,U,K,Q),O({width:K,height:Q})},A=(P,j,U,J)=>{const K=m.zoom,Q=m.unit,q=m.segments;P.clearRect(0,0,U,J),P.save(),P.strokeStyle="#71717a",P.fillStyle="#71717a",P.lineWidth=1,P.font=`${Sh}px ${xh}`,P.textBaseline="top",P.translate(.5,0),P.beginPath();const X=Q*K*_i,te=Math.floor(j/X),V=Math.ceil((j+U)/X)-te;for(let he=0;he<=V;++he){const Ie=he+te;if(Ie<0)continue;const Ne=Ie*X/K,Se=(Ne-j/K)*K;if(Se<-X||Se>=U+X)continue;const Ee=u(Ne),Re=-P.measureText(Ee).width/2;P.fillText(Ee,Se+Re+a,c)}for(let he=0;he<=V;++he){const Ie=he+te;if(Ie<0)continue;const Se=Ie*X-j+a;for(let Ee=0;Ee<q;++Ee){const Ce=Se+Ee/q*X;if(Ce<0||Ce>=U)continue;const Re=Ee%q?s:r;Re===s?P.strokeStyle="#a1a1aa":P.strokeStyle="#d4d4d8";const dt=32,[se,or]=[Ce,dt],[Fn,Qt]=[se,or+Re];P.beginPath(),P.moveTo(se,or),P.lineTo(Fn,Qt),P.stroke()}}P.restore()},D=P=>{const j=b.current;if(!j)return;const U=j.getBoundingClientRect(),K=P.clientX-U.left+d-Es;h?.(K)};return v.jsx("div",{className:"border-border border-t",style:{position:"relative",width:"100%",height:`${E.height}px`,backgroundColor:"transparent"},children:v.jsx("canvas",{onClick:D,ref:b,height:E.height})})},Jh=()=>v.jsx(ef.Flex,{flexGrow:"1",justify:"center",width:"100%",height:"100%",className:"bg-scene py-3",children:v.jsx("div",{className:"max-w-3xl flex-1  w-full h-full flex relative",children:v.jsx(Zh,{})})});class Qh{___eventListeners;___activeObjects;constructor(){this.___activeObjects=[],this.___eventListeners={}}pauseEventListeners(){this.___eventListeners=this.__eventListeners,this.__eventListeners={};const n=this.getActiveObjects();this.discardActiveObject(),this.___activeObjects=n}resumeEventListeners(){this.__eventListeners=this.___eventListeners,this.___eventListeners={};const n=this.___activeObjects;if(!n.length)return this.requestRenderAll(),!1;if(n.length===1)this.setActiveObject(n[0]);else{const r=new W.ActiveSelection(n);this.setActiveObject(r)}this.requestRenderAll()}}class qn extends W.Rect{isSelected=!1;text;tScale;display;id;backgroundColor;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default",fontSize:16,fontFamily:"Arial",fontColor:"#ffffff",textAlign:"center"};static type="Text";constructor(n){super(n),Object.assign(this,qn.ownDefaults),this.id=n.id,this.tScale=n.tScale,this.display=n.display,this.text=n.text||"",this.backgroundColor=n.backgroundColor||"transparent"}static createControls(){return{controls:xc()}}static getDefaults(){return{...super.getDefaults(),...qn.ownDefaults}}setSelected(n){this.isSelected=n,this.set({dirty:!0})}_render(n){super._render(n),this.updateSelected(n)}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,6),n.lineWidth=2,n.strokeStyle="rgba(0, 216, 214,1.0)",n.stroke(),n.restore())}}function vn(t,n,r,s,a){t.save(),t.translate(n,r),t.rotate(W.util.degreesToRadians(90+a.angle)),t.beginPath(),t.lineWidth=4,t.lineCap="round",t.strokeStyle="#dfe2e8",t.moveTo(-6,0),t.lineTo(6,0),t.stroke(),t.restore()}function xc(){return{mr:new W.Control({x:.5,y:0,actionHandler:ui,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:vn}),ml:new W.Control({x:-.5,y:0,actionHandler:ui,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:vn})}}const ui=W.controlsUtils.wrapWithFireEvent("resizing",W.controlsUtils.wrapWithFixedAnchor((t,n,r,s)=>{const a=W.controlsUtils.getLocalPoint(n,n.originX,n.originY,r,s);if(O3(n.originX)||D3(n.originX)&&a.x<0||M3(n.originX)&&a.x>0){const c=n.target,u=c.strokeWidth/(c.strokeUniform?c.scaleX:1),d=P3(n)?2:1,h=c.width,m=Math.ceil(Math.abs(a.x*d/c.scaleX)-u);if(n.corner==="ml"){const _=h-m;if(c.left+_<0)return c.set("width",c.width+c.left),!0}return c.set("width",Math.max(m,0)),h!==c.width}return!1})),ep={left:-.5,top:-.5,center:0,bottom:.5,right:.5},ge=t=>typeof t=="string"?ep[t]:t-.5,O3=t=>ge(t)===ge("center"),M3=t=>ge(t)===ge("left"),D3=t=>ge(t)===ge("right");function P3(t){return ge(t.originX)===ge("center")&&ge(t.originY)===ge("center")}W.classRegistry.setClass(qn,"Text");class Lt extends W.Rect{static type="Transition";id;duration;fromId;toId;static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0, 0, 0, 0.5)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};isSelected=!1;constructor(n){super(n),this.id=n.id,this.fromId=n.fromId,this.toId=n.toId,Object.assign(this,{duration:n.duration,fromId:n.fromId,toId:n.toId,kind:n.kind,tScale:n.tScale,strokeDashArray:n.strokeDashArray||[],isSelected:!1,centeredScaling:!0,strokeWidth:0}),Object.assign(this,Lt.ownDefaults)}static createControls(){return{controls:L3()}}static getDefaults(){return{...super.getDefaults(),...Lt.ownDefaults}}updateCoords(){}_render(n){super._render(n),this.updateSelected(n)}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,this.strokeDashArray&&n.setLineDash(this.strokeDashArray),n.strokeStyle=this.isSelected?"rgba(255, 255, 255,1.0)":"rgba(255, 255, 255,0.15)",n.stroke(),n.restore()}}W.classRegistry.setClass(Lt,"Transition");const L3=()=>({mr:new W.Control({x:.5,y:0,actionHandler:Od,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:vn}),ml:new W.Control({x:-.5,y:0,actionHandler:Od,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:vn})});W.classRegistry.setClass(Lt,"Transition");const{wrapWithFireEvent:N3,getLocalPoint:j3}=W.controlsUtils,Ua="center",F3="left",U3="right";function z3(t){return(n,r,s,a)=>{const{target:c,originX:u,originY:d}=r,h=c.getRelativeCenterPoint(),m=c.translateToOriginPoint(h,u,d),b=t(n,r,s,a);return c.setPositionByOrigin(m,u,d),b}}const H3=(t,n,r,s)=>{const a=j3(n,n.originX,n.originY,r,s);if(ge(n.originX)===ge(Ua)||ge(n.originX)===ge(U3)&&a.x<0||ge(n.originX)===ge(F3)&&a.x>0){const{target:c}=n,u=c.strokeWidth/(c.strokeUniform?c.scaleX:1),d=W3(n)?2:1,h=c.width,m=Math.ceil(Math.abs(a.x*d/c.scaleX)-u),b=Pn(m,c.tScale);return b>=1500||b<500?!1:(c.set("width",Math.max(m,0)),c.set("duration",b),c.setCoords(),c.canvas&&c.canvas.renderAll(),h!==c.width)}return!1};function W3(t){return ge(t.originX)===ge(Ua)&&ge(t.originY)===ge(Ua)}const Od=N3("resizing",z3(H3));class Tr extends W.Rect{static type="Placeholder";guideItemId;distXToActCenter;trackItemType;defaultPos;draggedObject=null;for;id;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",strokeWidth:0,fill:"rgba(255, 211, 42, 0.1)",stroke:"rgba(255, 211, 42, 1.0)",selectable:!1,borderOpacityWhenMoving:1,hoverCursor:"default",strokeDashArray:[5,1],evented:!1};constructor(n){super(n),this.id=n.id,this.for=n.for,Object.assign(this,Tr.ownDefaults)}static getDefaults(){return{...super.getDefaults(),...Tr.ownDefaults}}_render(n){super._render(n),this.updateSelected(n)}updateSelected(n){n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,this.strokeDashArray&&n.setLineDash(this.strokeDashArray),n.strokeStyle="rgba(0, 216, 214,1.0)",n.stroke(),n.restore()}}W.classRegistry.setClass(Tr,"Placeholder");const B3={top:{top:35,guideHeight:2,bottom:3},center:{top:3,guideHeight:2,bottom:3},bottom:{top:3,guideHeight:2,bottom:35}},Si="rgba(0, 216, 214, 1.0)",va=(t,n,r)=>new W.Rect({top:t,left:0,strokeWidth:0,fill:"transparent",selectable:!0,height:r,width:n});class ri extends W.Group{static type="Helper";static defaultSettings={selectable:!1,evented:!1};static ownDefaults={...ri.defaultSettings};guide;topGuide;bottomGuide;id;metadata={};tScale;kind;constructor(n){const r=B3[n.kind],s=va(0,n.width,r.top),a=va(r.top,n.width,r.guideHeight),c=va(r.top+r.guideHeight,n.width,r.bottom);super([s,a,c],{...ri.defaultSettings,...n}),this.topGuide=s,this.guide=a,this.bottomGuide=c,this.id=n.id,this.metadata=n.metadata??{},this.tScale=n.tScale,this.kind=n.kind}static getDefaults(){return{...super.getDefaults(),...ri.defaultSettings}}updateCoords(n){this.scaleToWidth(n),this.set("scaleY",1)}setSelected(n){this.guide.set("fill",n?Si:"transparent")}}const Mr=ri;W.classRegistry.setClass(Mr,"Helper");class Ln extends W.Rect{static ownDefaults={selectable:!1,evented:!1,strokeWidth:0,stroke:"transparent"};static type="Track";id;accepts;metadata;items;borderColor="transparent";stroke="transparent";strokeWidth=0;constructor(n){super(n),Object.assign(this,Ln.ownDefaults),this.id=n.id,this.accepts=n.accepts||["audio","video","image","text"],this.items=n.items||[],this.metadata=n.metadata}static getDefaults(){return{...super.getDefaults(),...Ln.ownDefaults}}updateCoords(n){this.width=n}}W.classRegistry.setClass(Ln,"Track");class As extends W.Rect{isSelected;tScale;display;id;src;itemType;static ownDefaults={rx:8,ry:8,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",fill:"#27272a"};static type="Image";constructor(n){super(n),this.itemType="image",this.isSelected=!1,Object.assign(this,As.ownDefaults),this.id=n.id,this.src=n.src,this.display=n.display,this.tScale=n.tScale}static createControls(){return{controls:xc()}}static getDefaults(){return{...super.getDefaults(),...As.ownDefaults}}_render(n){super._render(n),this.updateSelected(n)}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,n.strokeStyle=Si,n.stroke(),n.restore())}}const Bs=As;W.classRegistry.setClass(Bs,"Image");class ir extends W.Rect{id;tScale;isSelected=!1;display;trim;static type="Video";static defaultProps={objectCaching:!1,rx:8,ry:8,fill:"#27272a"};constructor(n){super(Object.assign({},ir.defaultProps,n)),this.id=n.id,this.tScale=n.tScale,this.display=n.display,this.trim=n.trim}static createControls(){return{controls:tp()}}_render(n){super._render(n),this.updateSelected(n)}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,n.strokeStyle=Si,n.stroke(),n.restore())}}W.classRegistry.setClass(ir,"Video");const tp=()=>({mr:new W.Control({x:.5,y:0,render:vn,actionHandler:Md,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new W.Control({x:-.5,y:0,render:vn,actionHandler:Md,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:V3,getLocalPoint:$3}=W.controlsUtils,G3=(t,n,r,s)=>{const a=$3(n,n.originX,n.originY,r,s);if(ge(n.originX)===ge("center")||ge(n.originX)===ge("right")&&a.x<0||ge(n.originX)===ge("left")&&a.x>0){const{target:c}=n;return c.width!==c.width}return!1};function Tc(t){return(n,r,s,a)=>{const{target:c,originX:u,originY:d}=r,h=c.getRelativeCenterPoint(),m=c.translateToOriginPoint(h,u,d),b=t(n,r,s,a);return c.setPositionByOrigin(m,u,d),b}}const Md=V3("resizing",Tc(G3));class mn extends W.Rect{id;itemType="audio";isSelected=!1;trim;src;tScale;display;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default"};static type="Audio";constructor(n){super({...mn.getDefaults(),...n}),this.id=n.id,this.tScale=n.tScale,this.display=n.display,this.trim=n.trim,this.src=n.src}static getDefaults(){return{...super.getDefaults(),...mn.ownDefaults}}static createControls(){return{controls:np()}}setSelected(n){this.isSelected=n,this.set({dirty:!0})}_render(n){super._render(n),this.updateSelected(n)}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,mn.ownDefaults.rx),n.lineWidth=2,n.strokeStyle=Si,n.stroke(),n.restore())}}W.classRegistry.setClass(mn,"Audio");const np=()=>({mr:new W.Control({x:.5,y:0,render:vn,actionHandler:Dd,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new W.Control({x:-.5,y:0,render:vn,actionHandler:Dd,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:Y3,getLocalPoint:X3}=W.controlsUtils,Z3=(t,n,r,s)=>{const a=X3(n,n.originX,n.originY,r,s);if(ge(n.originX)===ge("center")||ge(n.originX)===ge("right")&&a.x<0||ge(n.originX)===ge("left")&&a.x>0){const{target:c}=n,u=c.strokeWidth/(c.strokeUniform?c.scaleX:1),d=K3(n)?2:1,h=c.width,m=Math.ceil(Math.abs(a.x*d/c.scaleX)-u);if(n.corner==="mr"){const b=c.trim.to,_=m-h,x=Pn(_,c.tScale),E=b+x;if(E>c.duration)return!1;c.set("width",Math.max(m,0)),c.trim.to=E}else{if(c.left<0)return!1;const b=h-m;if(c.left+b<0)return c.set("width",c.width+c.left),!0;const _=m-h,x=c.trim.from,E=Pn(_,c.tScale),O=x-E;if(O<0)return!1;c.set("width",Math.max(m,0)),c.trim.from=O}return h!==c.width}return!1};function K3(t){return ge(t.originX)===ge("center")&&ge(t.originY)===ge("center")}const Dd=Y3("resizing",Tc(Z3));class di extends W.Rect{static type="TransitionGuide";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0,0,0,0.85)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};tScale;duration=0;fromId;toId;itemType="none";isSelected=!1;id;constructor(n){super(n),Object.assign(this,di.ownDefaults),this.id=n.id}static createControls(){return{controls:rp()}}static getDefaults(){return{...super.getDefaults(),...di.ownDefaults}}updateCoords(){const n=this.canvas;if(!n)return;const r=n.getObjects().find(c=>c.id===this.fromId);if(!r)return;const s=Ve(this.duration,this.tScale),a=r.left+r.width-s/2;this.set({width:s,left:a})}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M3 5.30359C3 3.93159 4.659 3.24359 5.629 4.21359L11.997 10.5826L10.583 11.9966L5 6.41359V17.5856L10.586 11.9996L10.583 11.9966L11.997 10.5826L12 10.5856L18.371 4.21459C19.341 3.24459 21 3.93159 21 5.30359V18.6956C21 20.0676 19.341 20.7556 18.371 19.7856L12 13.5L13.414 11.9996L19 17.5866V6.41359L13.414 11.9996L13.421 12.0056L12.006 13.4206L12 13.4136L5.629 19.7846C4.659 20.7546 3 20.0676 3 18.6956V5.30359Z");n.save(),n.translate(-12,-12),n.fillStyle="#ffffff",n.fill(r),n.restore()}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=1,n.strokeStyle="rgba(255, 255, 255,1.0)",n.stroke(),n.restore())}}function rp(){return{mr:new W.Control({x:.5,y:0,actionHandler:ui,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:Pd}),ml:new W.Control({x:-.5,y:0,actionHandler:ui,cursorStyleHandler:W.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:Pd})}}function Pd(t,n,r,s,a){t.save(),t.translate(n,r),t.rotate(W.util.degreesToRadians(90+a.angle)),t.lineWidth=6,t.lineCap="round",t.strokeStyle="white",t.beginPath(),t.moveTo(-6,0),t.lineTo(6,0),t.stroke(),t.lineWidth=4,t.strokeStyle="black",t.beginPath(),t.moveTo(-6,0),t.lineTo(6,0),t.stroke(),t.restore()}class fi extends W.Rect{static type="PreviewTrackItem";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",rx:4,ry:4};duration=0;fromId="";toId="";isSelected=!1;name;durationString;id;constructor(n){super(n),Object.assign(this,fi.ownDefaults),this.id=n.id,this.name=n.name||"item",this.durationString="00:05",this.fill="#27272a"}static getDefaults(){return{...super.getDefaults(),...fi.ownDefaults}}_render(n){n.save(),super._render(n),n.beginPath(),n.rect(-this.width/2,-this.height/2,this.width,this.height),n.clip(),this.drawTextIdentity(n),n.restore()}drawTextIdentity(n){n.font="600 12px 'Geist variable'",n.textAlign="left";const h=n.measureText(this.name).width,m=n.measureText(this.durationString).width,b=-this.height/2+4,_=-this.width/2,x=_+h+8*2+4,E=h+8*2;this.drawRoundedRect(n,_,b,E,20,4),n.fillStyle="#f4f4f5",n.fillText(this.name,_+8,b+12+2);const O=m+8*2;this.drawRoundedRect(n,x,b,O,20,4),n.fillStyle="#f4f4f5",n.fillText(this.durationString,x+8,b+12+2)}drawRoundedRect(n,r,s,a,c,u){n.fillStyle="rgba(0, 0, 0, 0.5)",n.roundRect?(n.beginPath(),n.roundRect(r,s,a,c,u),n.fill()):n.fillRect(r,s,a,c)}}function ip(t,n){n.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(s=>{if(s!=="constructor"){const a=Object.getOwnPropertyDescriptor(r.prototype,s);a&&Object.defineProperty(t.prototype,s,a)}})})}const Vs=(t,n)=>{const r={x:t.size.width/2,y:t.size.height/2},s={x:n.width/2,y:n.height/2},a=r.x-s.x,c=r.y-s.y,u=Math.min(t.size.width/n.width,t.size.height/n.height);return{top:`${c}px`,left:`${a}px`,transform:`scale(${u})`}},sp=t=>new Promise((n,r)=>{const s=new Audio;s.preload="auto",s.addEventListener("loadedmetadata",()=>{const a=s.duration*1e3;n({duration:a})}),s.addEventListener("error",a=>{r(a)}),s.src=t,s.crossOrigin="anonymous",s.load()}),op=t=>new Promise((n,r)=>{const s=new Image;console.warn("Consider updating CDN config for CORS issues?"),s.onload=()=>{const a=s.width,c=s.height;n({width:a,height:c})},s.onerror=a=>{r(a)},s.crossOrigin="anonymous",s.src=t}),ap=t=>new Promise((n,r)=>{const s=document.createElement("video");s.preload="auto",s.addEventListener("loadedmetadata",()=>{const a=s.duration*1e3,c=s.videoWidth,u=s.videoHeight;n({duration:a,width:c,height:u})}),s.addEventListener("error",a=>{r(a)}),s.src=t,s.load()}),ii=(t,n)=>{const r=document.createElement("div");Object.keys(n).forEach(a=>{a!=="height"&&(r.style[a]=n[a])}),document.body.appendChild(r),r.textContent=t,r.style.width=`${n.width}px`,r.style.fontSize=`${n.fontSize}px`;const s=getComputedStyle(r).height;return document.body.removeChild(r),parseFloat(s)},Bt=t=>Object.keys(t).reduce((n,r)=>{const{display:{to:s}}=t[r];return Math.max(n,s)},0),cp=(t,n)=>{if(!t)return{from:0,to:n.duration};const{from:r,to:s}=t;return{from:r??0,to:s??n.duration}},lp=(t,n)=>{const{duration:r,trim:s}=n,a=s?s.to-s.from:r||5e3,c={from:0,to:a};if(!t)return c;if(t.from!==void 0&&t.from<0)return console.error("'from' must be a non-negative number. Returning default display."),c;if(t.from!==void 0&&t.to===void 0)return{from:t.from,to:t.from+a};if(t.to!==void 0){if(t.to<0)return console.error("'to' must be a non-negative number. Returning default display."),c;if(t.to<t.from)return console.error("'to' must be greater than or equal to 'from'. Returning default display."),c}return t};function up(t,n){return t.map(r=>{const s=r.items.filter(a=>!n.includes(a));return{...r,items:s}}).filter(r=>r.items.length>0)}const dp=async(t,n)=>{const r=t.details,s=await op(r.src),a=Vs(n,s);return{id:t.id,type:"image",name:"",display:{from:n.origin||0,to:(n.origin||5e3)+5e3},details:{src:r.src||"",width:r.width||s.width||100,height:r.height||s.height||100,opacity:r.opacity??100,transform:a.transform,border:r.border||"none",borderRadius:r.borderRadius||"0",boxShadow:r.boxShadow||"none",top:a.top||"0px",left:a.left||"0px"},metadata:t.metadata||{}}},fp=async(t,n)=>{const r=t.details.src,s=await ap(r),a=Vs(n,{...s}),c=cp(t.trim,{duration:s.duration}),u={width:s.width,height:s.height,duration:s.duration,src:r,volume:t.details.volume??100,top:t.details.top||a.top||"0px",left:t.details.left||a.left||"0px",text:t.details.text};return{...t,trim:c,type:"video",details:u,display:lp(t?.display,{duration:s.duration,trim:c})}},hp=async t=>{const n=t.details,r=(await sp(n.src)).duration,s=t?.display?.from??0;return{id:t.id,name:"",type:"audio",display:{from:s,to:s+r},trim:{from:0,to:r},details:{src:n.src,duration:r,volume:n.volume??100,text:n.text},metadata:{...t.metadata}}},q3=5e3,Ic=async(t,n)=>{const r=t.id;await Fh([{fontFamily:t.details.fontFamily??"",fontUrl:t.details.fontUrl??""}]);const s={fontFamily:t.details.fontFamily??"Arial",fontSize:t.details.fontSize??"16px",fontWeight:t.details.fontWeight??"normal",fontStyle:t.details.fontStyle??"normal",textDecoration:t.details.textDecoration??"none",textAlign:t.details.textAlign??"left",lineHeight:t.details.lineHeight??"normal",letterSpacing:t.details.letterSpacing??"normal",wordSpacing:t.details.wordSpacing??"normal",color:t.details.color??"#ffffff",backgroundColor:t.details.backgroundColor??"transparent",border:t.details.border??"none",textShadow:t.details.textShadow??"none",text:t.details.text??"",opacity:t.details.opacity??100,width:t.details.width??300,wordWrap:t.details.wordWrap??"normal",wordBreak:t.details.wordBreak??"normal",WebkitTextStrokeColor:t.details.WebkitTextStrokeColor??"#ffffff",WebkitTextStrokeWidth:t.details.WebkitTextStrokeWidth??"0px",top:t.details.top??"0px",left:t.details.left??"0px"},a=ii(t.details.text??"",s),c=Vs(n,{width:s.width??0,height:a});return{id:r,name:"",type:"text",display:{from:0,to:q3},details:{...s,height:a,top:c.top,left:c.left,fontUrl:t.details.fontUrl,text:t.details.text??""},metadata:{}}},pp=(t,n)=>{const r=t.display,s=Ve(r.from,n.tScale),a=Ve(r.to-r.from,n.tScale),c=W.classRegistry.getClass("Audio")||mn;return new c({width:a,height:42,top:10,left:s,id:t.id,display:r,text:t.details.text,trim:t.trim||{from:0,to:t.details.duration},duration:t.details.duration,src:t.details.src,tScale:n.tScale})},gp=(t,n)=>{const r=Ve(t.display.from,n.tScale),s=Ve(t.details.duration||5e3,n.tScale),a=W.classRegistry.getClass("Image")||Bs;return new a({width:s,height:42,id:t.id,src:t.details.src,tScale:n.tScale,top:10,left:r,display:t.display})},mp=(t,n)=>{const r=Ve(t.trim.from,n.tScale),s=Ve(t.trim.to-t.trim.from,n.tScale),a=W.classRegistry.getClass("Video")||ir;return new a({width:s,height:42,id:t.id,tScale:n.tScale,fill:"#333333",top:10,left:r,display:t.trim,trim:t.trim,text:t.details.text})},vp=(t,n)=>{const r=t.display,s=Ve(r.from,n.tScale),a=Ve(r.to-r.from,n.tScale),c=W.classRegistry.getClass("Text")||qn;return new c({width:a,height:42,id:t.id,display:r,top:10,left:s,text:t.details.text,tScale:n.tScale})},bp={video:42,image:42,audio:42,text:42,caption:42,template:42},yp=(t={})=>{const n={...bp,...t};return Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="number"))};let _p=class extends mn{static type="Audio";text;constructor(n){super(n),this.text=n.text??"Audio"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M8.24092 0C8.24092 2.51565 10.2795 4.55419 12.7951 4.55419C12.9677 4.55419 13.1331 4.62274 13.2552 4.74475C13.3772 4.86676 13.4457 5.03224 13.4457 5.20479C13.4457 5.37734 13.3772 5.54282 13.2552 5.66483C13.1331 5.78685 12.9677 5.85539 12.7951 5.85539C11.9218 5.85605 11.0594 5.66105 10.2713 5.28471C9.48319 4.90838 8.78942 4.36027 8.24092 3.68066V13.8794C8.24094 14.8271 7.91431 15.7458 7.31606 16.4808C6.71781 17.2157 5.88451 17.722 4.95657 17.9143C4.02863 18.1066 3.06276 17.9731 2.22172 17.5364C1.38067 17.0997 0.715856 16.3865 0.339286 15.5169C-0.0372842 14.6473 -0.10259 13.6744 0.154372 12.7622C0.411334 11.8501 0.974857 11.0544 1.74999 10.5092C2.52512 9.96403 3.46449 9.7027 4.40981 9.76924C5.35512 9.83579 6.24861 10.2261 6.93972 10.8745V0H8.24092ZM6.93972 13.8794C6.93972 13.1317 6.6427 12.4146 6.11398 11.8859C5.58527 11.3572 4.86818 11.0602 4.12046 11.0602C3.37275 11.0602 2.65566 11.3572 2.12694 11.8859C1.59823 12.4146 1.3012 13.1317 1.3012 13.8794C1.3012 14.6272 1.59823 15.3443 2.12694 15.873C2.65566 16.4017 3.37275 16.6987 4.12046 16.6987C4.86818 16.6987 5.58527 16.4017 6.11398 15.873C6.6427 15.3443 6.93972 14.6272 6.93972 13.8794Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,10),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,14),n.translate(10,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}};class wp extends ir{static type="Video";text;constructor(n){super(n),this.text=n.text??"Video"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M16.5625 0.925L12.5 3.275V0.625L11.875 0H0.625L0 0.625V9.375L0.625 10H11.875L12.5 9.375V6.875L16.5625 9.2125L17.5 8.625V1.475L16.5625 0.925ZM11.25 8.75H1.25V1.25H11.25V8.75ZM16.25 7.5L12.5 5.375V4.725L16.25 2.5V7.5Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,14),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,10),n.translate(8,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}}class Ec extends qn{static type="Text";constructor(n){super(n),this.fill="#303030"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M6.23982 0.361968C6.18894 0.253743 6.10832 0.162234 6.00736 0.0981357C5.9064 0.034038 5.78929 0 5.6697 0C5.55012 0 5.433 0.034038 5.33204 0.0981357C5.23109 0.162234 5.15046 0.253743 5.09959 0.361968L0.0599035 11.0713C0.0246926 11.1462 0.00457285 11.2272 0.000693114 11.3099C-0.00318662 11.3925 0.00924959 11.4751 0.0372917 11.553C0.0939253 11.7102 0.210687 11.8384 0.361891 11.9095C0.513095 11.9806 0.686354 11.9888 0.843555 11.9322C1.00076 11.8755 1.12902 11.7588 1.20013 11.6075L2.51202 8.81998H8.82738L10.1393 11.6075C10.1745 11.6824 10.2241 11.7496 10.2853 11.8053C10.3465 11.861 10.418 11.9041 10.4958 11.9322C10.5737 11.9602 10.6563 11.9726 10.7389 11.9687C10.8216 11.9649 10.9026 11.9447 10.9775 11.9095C11.0524 11.8743 11.1196 11.8247 11.1753 11.7635C11.231 11.7023 11.2741 11.6308 11.3021 11.553C11.3302 11.4751 11.3426 11.3925 11.3387 11.3099C11.3348 11.2272 11.3147 11.1462 11.2795 11.0713L6.23982 0.361968ZM3.10498 7.56005L5.6697 2.11011L8.23443 7.56005H3.10498ZM15.1191 3.78029C14.1143 3.78029 13.3292 4.05354 12.7859 4.59294C12.6721 4.71153 12.6092 4.86987 12.6106 5.03419C12.6119 5.19851 12.6774 5.3558 12.7931 5.4725C12.9088 5.58921 13.0655 5.6561 13.2298 5.6589C13.3941 5.6617 13.553 5.60018 13.6726 5.48748C13.9718 5.19062 14.46 5.04021 15.1191 5.04021C16.1609 5.04021 17.009 5.74892 17.009 6.61511V6.86867C16.45 6.49465 15.7917 6.29663 15.1191 6.30013C13.382 6.30013 11.9693 7.57187 11.9693 9.13495C11.9693 10.698 13.382 11.9698 15.1191 11.9698C15.792 11.9727 16.4503 11.7739 17.009 11.3989C17.0168 11.566 17.0907 11.7231 17.2144 11.8357C17.3381 11.9483 17.5014 12.0071 17.6685 11.9993C17.8356 11.9915 17.9927 11.9176 18.1053 11.7939C18.2179 11.6702 18.2767 11.5069 18.2689 11.3398V6.61511C18.2689 5.05202 16.8562 3.78029 15.1191 3.78029ZM15.1191 10.7099C14.0773 10.7099 13.2292 10.0012 13.2292 9.13495C13.2292 8.26876 14.0773 7.56005 15.1191 7.56005C16.1609 7.56005 17.009 8.26876 17.009 9.13495C17.009 10.0012 16.1609 10.7099 15.1191 10.7099Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,12),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,12),n.translate(8,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}}let Sp=class extends Bs{static type="Image";text;constructor(n){super(n),this.text=n.text??"Image"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M1.55556 0H14.4444C15.3031 0 16 0.696889 16 1.55556V14.4444C16 14.857 15.8361 15.2527 15.5444 15.5444C15.2527 15.8361 14.857 16 14.4444 16H1.55556C1.143 16 0.747335 15.8361 0.455612 15.5444C0.163889 15.2527 0 14.857 0 14.4444V1.55556C0 0.696889 0.696889 0 1.55556 0ZM14.4444 1.33333H1.55556C1.49662 1.33333 1.4401 1.35675 1.39842 1.39842C1.35675 1.4401 1.33333 1.49662 1.33333 1.55556V14.4444C1.33333 14.5671 1.43289 14.6667 1.55556 14.6667H1.72444L10.456 5.93511C10.6004 5.79065 10.7719 5.67605 10.9607 5.59787C11.1494 5.51968 11.3517 5.47944 11.556 5.47944C11.7603 5.47944 11.9626 5.51968 12.1513 5.59787C12.3401 5.67605 12.5116 5.79065 12.656 5.93511L14.6667 7.94578V1.55556C14.6667 1.49662 14.6433 1.4401 14.6016 1.39842C14.5599 1.35675 14.5034 1.33333 14.4444 1.33333ZM14.6667 9.83111L11.7129 6.87733C11.6922 6.85664 11.6677 6.84022 11.6407 6.82902C11.6137 6.81781 11.5848 6.81205 11.5556 6.81205C11.5263 6.81205 11.4974 6.81781 11.4704 6.82902C11.4434 6.84022 11.4189 6.85664 11.3982 6.87733L3.60978 14.6667H14.4444C14.5034 14.6667 14.5599 14.6433 14.6016 14.6016C14.6433 14.5599 14.6667 14.5034 14.6667 14.4444V9.83111ZM4.88889 7.11111C4.29952 7.11111 3.73429 6.87699 3.31754 6.46024C2.90079 6.04349 2.66667 5.47826 2.66667 4.88889C2.66667 4.29952 2.90079 3.73429 3.31754 3.31754C3.73429 2.90079 4.29952 2.66667 4.88889 2.66667C5.47826 2.66667 6.04349 2.90079 6.46024 3.31754C6.87699 3.73429 7.11111 4.29952 7.11111 4.88889C7.11111 5.47826 6.87699 6.04349 6.46024 6.46024C6.04349 6.87699 5.47826 7.11111 4.88889 7.11111ZM4.88889 5.77778C5.12464 5.77778 5.35073 5.68413 5.51743 5.51743C5.68413 5.35073 5.77778 5.12464 5.77778 4.88889C5.77778 4.65314 5.68413 4.42705 5.51743 4.26035C5.35073 4.09365 5.12464 4 4.88889 4C4.65314 4 4.42705 4.09365 4.26035 4.26035C4.09365 4.42705 4 4.65314 4 4.88889C4 5.12464 4.09365 5.35073 4.26035 5.51743C4.42705 5.68413 4.65314 5.77778 4.88889 5.77778Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,12),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,12),n.translate(8,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}};class xp extends Ln{static type="Track";constructor(n){super(n),this.fill="#18181b"}_render(n){super._render(n);const r=new Path2D("M14.4444 13.3263H11.0667C12.5384 12.3991 13.6259 10.9716 14.1289 9.30644C14.632 7.64131 14.5169 5.85051 13.8048 4.26348C13.0927 2.67645 11.8314 1.39993 10.2531 0.668736C8.67478 -0.0624548 6.8855 -0.199136 5.21442 0.283835C3.54334 0.766806 2.10285 1.83695 1.15794 3.2974C0.213035 4.75785 -0.172743 6.51038 0.0715766 8.23261C0.315896 9.95484 1.17388 11.5309 2.4877 12.671C3.80151 13.811 5.4828 14.4383 7.22227 14.4374H14.4444C14.5918 14.4374 14.7331 14.3789 14.8373 14.2747C14.9415 14.1705 15 14.0292 15 13.8819C15 13.7345 14.9415 13.5932 14.8373 13.489C14.7331 13.3848 14.5918 13.3263 14.4444 13.3263ZM1.1112 7.21523C1.1112 6.00658 1.46961 4.82506 2.14111 3.8201C2.8126 2.81514 3.76702 2.03187 4.88367 1.56934C6.00032 1.10681 7.22905 0.985789 8.41449 1.22159C9.59992 1.45738 10.6888 2.03941 11.5435 2.89405C12.3981 3.7487 12.9801 4.83759 13.2159 6.02302C13.4517 7.20845 13.3307 8.43719 12.8682 9.55384C12.4056 10.6705 11.6224 11.6249 10.6174 12.2964C9.61244 12.9679 8.43093 13.3263 7.22227 13.3263C5.60208 13.3245 4.04878 12.68 2.90313 11.5344C1.75748 10.3887 1.11304 8.83542 1.1112 7.21523ZM7.22227 5.54858C7.55191 5.54858 7.87414 5.45083 8.14822 5.2677C8.4223 5.08456 8.63592 4.82426 8.76206 4.51972C8.88821 4.21518 8.92121 3.88007 8.85691 3.55677C8.7926 3.23347 8.63386 2.9365 8.40078 2.70342C8.16769 2.47033 7.87072 2.3116 7.54742 2.24729C7.22412 2.18298 6.88901 2.21599 6.58447 2.34213C6.27993 2.46828 6.01964 2.6819 5.8365 2.95598C5.65337 3.23006 5.55562 3.55229 5.55562 3.88192C5.55562 4.32395 5.73121 4.74787 6.04377 5.06043C6.35633 5.37298 6.78025 5.54858 7.22227 5.54858ZM7.22227 3.32637C7.33215 3.32637 7.43956 3.35895 7.53092 3.42C7.62228 3.48104 7.69349 3.56781 7.73554 3.66932C7.77759 3.77084 7.78859 3.88254 7.76715 3.9903C7.74572 4.09807 7.6928 4.19706 7.61511 4.27476C7.53741 4.35245 7.43842 4.40536 7.33066 4.4268C7.22289 4.44824 7.11119 4.43723 7.00967 4.39519C6.90816 4.35314 6.82139 4.28193 6.76035 4.19057C6.69931 4.09921 6.66672 3.9918 6.66672 3.88192C6.66672 3.73458 6.72525 3.59327 6.82944 3.48909C6.93363 3.3849 7.07493 3.32637 7.22227 3.32637ZM8.88893 10.5485C8.88893 10.2189 8.79118 9.89668 8.60805 9.6226C8.42491 9.34852 8.16462 9.1349 7.86008 9.00875C7.55553 8.88261 7.22043 8.8496 6.89713 8.91391C6.57383 8.97822 6.27686 9.13695 6.04377 9.37004C5.81069 9.60313 5.65195 9.9001 5.58764 10.2234C5.52334 10.5467 5.55634 10.8818 5.68249 11.1863C5.80863 11.4909 6.02225 11.7512 6.29633 11.9343C6.57041 12.1175 6.89264 12.2152 7.22227 12.2152C7.6643 12.2152 8.08822 12.0396 8.40078 11.727C8.71334 11.4145 8.88893 10.9906 8.88893 10.5485ZM6.66672 10.5485C6.66672 10.4387 6.69931 10.3313 6.76035 10.2399C6.82139 10.1485 6.90816 10.0773 7.00967 10.0353C7.11119 9.99323 7.22289 9.98223 7.33066 10.0037C7.43842 10.0251 7.53741 10.078 7.61511 10.1557C7.6928 10.2334 7.74572 10.3324 7.76715 10.4402C7.78859 10.5479 7.77759 10.6596 7.73554 10.7611C7.69349 10.8627 7.62228 10.9494 7.53092 11.0105C7.43956 11.0715 7.33215 11.1041 7.22227 11.1041C7.07493 11.1041 6.93363 11.0456 6.82944 10.9414C6.72525 10.8372 6.66672 10.6959 6.66672 10.5485ZM10.5556 8.88189C10.8852 8.88189 11.2074 8.78414 11.4815 8.60101C11.7556 8.41787 11.9692 8.15758 12.0954 7.85303C12.2215 7.54849 12.2545 7.21338 12.1902 6.89008C12.1259 6.56678 11.9672 6.26982 11.7341 6.03673C11.501 5.80364 11.204 5.64491 10.8807 5.5806C10.5574 5.51629 10.2223 5.5493 9.91778 5.67544C9.61324 5.80159 9.35295 6.01521 9.16981 6.28929C8.98668 6.56337 8.88893 6.8856 8.88893 7.21523C8.88893 7.65726 9.06452 8.08118 9.37708 8.39374C9.68964 8.70629 10.1136 8.88189 10.5556 8.88189ZM10.5556 6.65968C10.6655 6.65968 10.7729 6.69226 10.8642 6.75331C10.9556 6.81435 11.0268 6.90112 11.0688 7.00263C11.1109 7.10415 11.1219 7.21585 11.1005 7.32362C11.079 7.43138 11.0261 7.53037 10.9484 7.60807C10.8707 7.68576 10.7717 7.73867 10.664 7.76011C10.5562 7.78155 10.4445 7.77054 10.343 7.7285C10.2415 7.68645 10.1547 7.61524 10.0937 7.52388C10.0326 7.43252 10 7.32511 10 7.21523C10 7.06789 10.0586 6.92658 10.1628 6.8224C10.2669 6.71821 10.4082 6.65968 10.5556 6.65968ZM3.88896 5.54858C3.55933 5.54858 3.2371 5.64633 2.96302 5.82946C2.68894 6.01259 2.47532 6.27289 2.34918 6.57743C2.22303 6.88197 2.19002 7.21708 2.25433 7.54038C2.31864 7.86368 2.47737 8.16065 2.71046 8.39374C2.94355 8.62682 3.24052 8.78556 3.56382 8.84986C3.88711 8.91417 4.22222 8.88117 4.52677 8.75502C4.83131 8.62888 5.0916 8.41526 5.27474 8.14118C5.45787 7.8671 5.55562 7.54487 5.55562 7.21523C5.55562 6.77321 5.38003 6.34929 5.06747 6.03673C4.75491 5.72417 4.33099 5.54858 3.88896 5.54858ZM3.88896 7.77078C3.77909 7.77078 3.67168 7.7382 3.58032 7.67716C3.48896 7.61611 3.41775 7.52935 3.3757 7.42783C3.33365 7.32632 3.32265 7.21462 3.34409 7.10685C3.36552 6.99908 3.41843 6.90009 3.49613 6.8224C3.57382 6.7447 3.67281 6.69179 3.78058 6.67036C3.88835 6.64892 4.00005 6.65992 4.10156 6.70197C4.20308 6.74402 4.28984 6.81522 4.35089 6.90658C4.41193 6.99794 4.44452 7.10535 4.44452 7.21523C4.44452 7.36257 4.38598 7.50388 4.2818 7.60807C4.17761 7.71225 4.03631 7.77078 3.88896 7.77078Z");this.items.length||(n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,12),n.font="600 12px 'Geist variable'",n.fillStyle="#A0A4A2",n.textAlign="left",n.clip(),n.fillText("Drag and drop media here",32,12),n.translate(8,1),n.fillStyle="#A0A4A2",n.fill(r),n.restore())}}class Tp extends Mr{static type="Helper";constructor(n){n.activeGuideFill="#ffffff",super(n)}}class Ip{addTrackItem(n){const r=n.id,s=ba(n,{tScale:this.tScale,sizesMap:this.sizesMap});this.add(s),this.trackItemIds.push(r),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=Bt(this.trackItemsMap)}alignItemsToTrack(){this.pauseEventListeners();const n=new Map(this.getObjects("Track").map(s=>[s.id,s])),r=this.getObjects("Image","Video","Text","Audio");this.trackItemIds.forEach(s=>{const a=this.tracks.find(d=>d.items.includes(s));if(!a)return;const c=n.get(a.id);this.duration;const u=this.getObjects().find(d=>d.id===s);u&&c&&(u.isMain=!1,this.trackItemsMap[s].isMain=!1,u.set({top:c.top}),u.setCoords())}),n.forEach(s=>{s.items=r.filter(a=>a.top===s.top).map(a=>a.id)}),this.resumeEventListeners()}updateTrackItemsPosition(){const n=this.getObjects("Image","Text","Video","Audio");n.sort((r,s)=>r.top-s.top),this.trackItemIds=n.map(r=>r.id).reverse()}restoreTrackItemPositions(){}updateTrackItemsState(){this.pauseEventListeners();const n=this.getObjects("Image","Video","Text","Audio"),r={};n.forEach(s=>{const{id:a,left:c,width:u}=s,d=this.trackItemsMap[a],h=Pn(c,this.tScale),m=h+Pn(u,this.tScale),b={from:h,to:m},_={...d,display:b,trim:s instanceof ir||s instanceof mn?s.trim:void 0};s.display=b,r[a]=_}),this.trackItemsMap=r,this.resumeEventListeners()}deleteActiveTrackItem(){const n=this.getActiveObjects();if(!n.length)return!1;const r=n.map(a=>a.id),s=li(this.tracks,r);this.trackItemsMap=Object.keys(this.trackItemsMap).reduce((a,c)=>(r.includes(c)||(a[c]=this.trackItemsMap[c]),a),{}),this.trackItemIds=this.trackItemIds.filter(a=>!r.includes(a)),this.tracks=s,this.discardActiveObject(),this.remove(...n),this.setActiveIds([]),this.renderTracks(),this.alignItemsToTrack(),this.updateState({updateHistory:!0,kind:"remove"})}updateTrackItemsToHistory(){this.pauseEventListeners();const n=this.getObjects();this.trackItemIds.forEach(r=>{const s=this.tracks.find(m=>m.items.includes(r)),a=n.find(m=>m.id===s?.id)?.top;if(!a){console.warn(`Track top not found for trackItemId: ${r}`);return}const c=this.trackItemsMap[r],u=n.find(m=>m.id===r);if(!u){console.warn(`Object not found for trackItemId: ${r}`);return}const d=Ve(c.display.from,this.tScale),h=Ve(c.display.to-c.display.from,this.tScale);u.set({left:d,width:h,top:a}),u.setCoords()}),this.requestRenderAll(),this.resumeEventListeners()}cloneActiveTrackItem(n){const r=n?.trackItemId||this.activeIds[0];if(!r)return!1;const a={...this.trackItemsMap[r],id:Ze()},c=this.tracks.find(b=>b.items.includes(r)),u=this.tracks.findIndex(b=>b.id===c?.id)+1;this.findOrCreateTrack(a,{trackIndex:u});const d=ba(a,{tScale:this.tScale});d&&this.add(d);const{audioData:h,...m}=a.metadata||{};a.metadata=m,this.trackItemsMap[a.id]=a,this.trackItemIds.push(a.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}splitActiveTrackItem(n){const r=n.trackItemId??this.activeIds[0];if(!r||this.activeIds.length>1)return!1;const s=this.trackItemsMap[r],a=n.time;if(s.display.from>=a||s.display.to<=a)return!1;const c={...s,display:{from:s.display.from,to:a}},u={...s,display:{from:a,to:s.display.to},id:Ze()};if(s.type==="video"||s.type==="audio"){const b=a-c.display.from;c.trim={from:s.trim.from,to:s.trim.from+b},u.trim={from:c.trim.to,to:s.trim.to}}const d=this.getObjects().find(b=>b.id===r);d.display=c.display,this.tracks.find(b=>b.items.includes(r))?.items.push(u.id);const m=ba(u,{tScale:this.tScale});m&&this.add(m),this.trackItemsMap[u.id]=u,this.trackItemsMap[r]=c,this.trackItemIds.push(u.id),this.updateTrackItemCoords(c.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}updateTrackItemCoords(n){const r=this.getObjects().find(u=>u.id===n),s=this.trackItemsMap[n],a=Ve(s.display.from,this.tScale),c=Ve(s.display.to-s.display.from,this.tScale);r?.set({left:a,width:c}),r?.setCoords()}updateTrackItemDetails(n,r){const s=r?.trackItemId;if(!s)return!1;const a=this.trackItemsMap[s],c={...a.details,...n.details};("fontSize"in c||"lineHeight"in c)&&(c.height=ii(c.text,c)),this.trackItemsMap[s]={...a,...n,details:c},this.updateState()}updateTrackItem(n,r){const s=r.trackItemId;if(!s)return!1;const a=this.trackItemsMap[s],c={...a.details,...n.details};if(a.type==="text"&&n.details.text){const u=this.getObjects("Text").find(d=>d.id===s);u instanceof Ec&&(u.text=n.details.text,this.requestRenderAll())}("fontSize"in c||"lineHeight"in c)&&(c.height=ii(c.text,c)),this.trackItemsMap[s]={...a,...n,details:c},this.updateState()}updateTrackItemsDetails(n,r){r?.trackItemIds?.forEach((s,a)=>{const c=this.trackItemsMap[s],u={...c.details,...n[a].details};("fontSize"in u||"lineHeight"in u)&&(u.height=ii(u.text,u)),this.trackItemsMap[s]={...c,...n[a],details:u}}),this.updateState()}getTrackItems(){return this.getObjects(...J3)}setActiveTrackItemCoords(){this.getActiveObjects().forEach(n=>n.setCoords())}deleteTrackItemById(n){const r=this.getObjects().filter(s=>n.includes(s.id));this.tracks=li(this.tracks,n),this.trackItemsMap=Object.keys(this.trackItemsMap).filter(s=>!n.includes(s)).reduce((s,a)=>(s[a]=this.trackItemsMap[a],s),{}),this.trackItemIds=this.trackItemIds.filter(s=>!n.includes(s)),this.discardActiveObject(),this.remove(...r),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=Bt(this.trackItemsMap)}selectTrackItemByIds(n){const r=this.getActiveObjects().map(a=>a.id);if(we.isEqual(r,n))return;const s=this.getTrackItems().filter(a=>n.includes(a.id));if(s.length===0)this.discardActiveObject();else if(s.length===1)this.setActiveObject(s[0]);else{const a=new W.ActiveSelection(s);this.setActiveObject(a)}this.requestRenderAll()}}const J3=["Image","Text","Video","Audio","Caption","Template"],ba=(t,n)=>{const s={text:vp,video:mp,image:gp,audio:pp}[t.type];return s(t,n)},wr={text:32,image:40,video:40,audio:32,main:40},Ld=t=>{switch(t){case"text":return wr.text;case"image":return wr.image;case"video":return wr.video;case"audio":return wr.audio;case"helperTop":return 40;case"helperBottom":return 40;case"helperCenter":return 8;case"main":return wr.main;default:return wr.text}};class Ep{findOrCreateTrack(n,{trackId:r,trackIndex:s}){const a=r;if(a){const u=this.tracks.find(d=>d.id===a);if(u)return u.items.push(n.id),a}const c={id:Ze(),items:[n.id],type:n.type,accepts:this.acceptsMap?.[n.type]};return s!==void 0?this.tracks.splice(s,0,c):this.tracks.push(c),this.renderTracks(),c.id}removeTracks(){this.getObjects("Track","Helper")?.forEach(n=>this.remove(n))}renderTracks(){this.updateTracksState(),this.removeTracks();const n=this.width,r=this.tracks.flatMap(d=>[d,{id:`after-${d.id}`,type:"helper",items:[],accepts:[]}]).slice(0,-1);let s=0;const a=W.classRegistry.getClass("Helper")||Mr,c=new a({id:"helperLineTop",top:s,selectable:!1,evented:!1,tScale:this.tScale,width:n,kind:"top",metadata:{}});s+=Ld("helperTop"),this.insertAt(0,c),r.forEach((d,h)=>{if(d.type==="helper"){const m=Ld("helperCenter"),b=new a({id:d.id,top:s,tScale:this.tScale,width:n,height:m,metadata:{order:(h+1)/2},kind:"center"});s+=m,this.insertAt(0,b)}else{const m=W.classRegistry.getClass("Track")||Ln,b=new m({id:d.id,top:s,left:0,fill:"#18181b",height:42,width:n,tScale:this.tScale,accepts:this.acceptsMap?.[d.type]||[],items:d.items});s+=42,this.insertAt(0,b)}});const u=new a({id:"helperLineBottom",top:s,selectable:!1,evented:!1,tScale:this.tScale,width:n,kind:"bottom",metadata:{}});this.insertAt(0,u)}updateTracksState(){const n=this.tracks.filter(s=>s.items.length||s.type==="main"),r=new Map;n.forEach(s=>r.set(s.id,s)),this.tracks=Array.from(r.values())}updateTrackCoords(){const n=this.bounding.width+this.spacing.right;this.getObjects("Track","Helper").forEach(r=>{r.updateCoords(n),r.setCoords()})}}const Q3=60,ex=188;function Nd(t,n=1,r=1){const s=ex*n;return t*(Q3/1e3)*s/r}class Cp{removeTransitions(){const n=this.getObjects("Transition");this.remove(...n)}renderTransitions(){this.removeTransitions(),this.transitionIds.forEach(n=>{const r=this.transitionsMap[n],s=r.fromId,a=r.toId,c=this.getObjects(),u=c.find(x=>x.id===s),d=c.find(x=>x.id===a);if(!u||!d)return;const h=Nd(r.duration,this.tScale),m=u.left+u.width-h/2,b=u.height,_=new Lt({id:r.id,left:m,top:u.top,height:b,width:h,tScale:this.tScale,duration:r.duration,fromId:u.id,toId:d.id,kind:r.kind});r.kind==="none"&&(_.visible=!1),this.add(_)})}updateTransitionCoordinates(){this.pauseEventListeners(),this.getObjects("Transition").forEach(n=>{n.tScale=this.tScale,n.updateCoords(),n.setCoords()}),this.resumeEventListeners()}alignTransitionsToTrack(){this.pauseEventListeners(),this.transitionIds.forEach(n=>{const r=this.getObjects("Transition").find(s=>s.id===n);if(r instanceof Lt){const s=this.getObjects().find(u=>u.id===r.fromId);if(!s)return;const a=Nd(r.duration,this.tScale),c=s.left+s.width-a/2;r.set({left:c,top:s.top}),r.setCoords()}}),this.resumeEventListeners()}updateTransitions(n=!0){n&&this.pauseEventListeners();const r=this.getObjects("Track"),s=this.getObjects("Video","Image");this.removeTransitions();const a={},c=[];r.forEach(u=>{const d=s.filter(h=>u.items.includes(h.id)).sort((h,m)=>h.left-m.left);for(let h=0;h<d.length-1;h++){const m=d[h],b=d[h+1];if(Math.abs(m.left+m.width-b.left)<=1){const _=`${m.id}-${b.id}`;if(this.transitionIds.includes(_))a[_]=this.transitionsMap[_];else{const x={id:_,duration:1500,fromId:m.id,toId:b.id,kind:"none",trackId:u.id,type:"transition"};a[_]=x}c.push(_)}}}),this.transitionIds=c,this.transitionsMap=a,this.renderTransitions(),n&&this.resumeEventListeners()}}const z={canvas:null,enableGuideRedraw:!0,isPointerOverHelperTrack:!1,draggingOverTrack:null,primaryMovingObjects:[],secondaryMovingObjects:[],placeholderMovingObjects:[],objectInitialPositions:{},originTrack:{},trackToItemsMap:{},activeTrackToItemsMap:{},trackTopToIdMap:{},trackTops:[],activeObjects:[],primaryTracks:{},secondaryTracks:{}},ze={guide:null,object:null,objects:[]},tx=()=>z,nx=t=>{Object.assign(z,t)},rx=t=>{t.on("before:transform",Ap.bind(t))},ix=t=>{t.off("before:transform",Ap.bind(t))};function Ap(t){z.canvas=this,z.activeTrackToItemsMap={},z.primaryTracks={},z.secondaryTracks={},z.trackTops=[],z.trackToItemsMap={},z.activeObjects=[],z.trackTopToIdMap={},z.canvas.trackIdAfterTransform="",z.canvas.positionAfterTransform={};const n=z.canvas.getActiveObject();if(!n)return;z.activeObjects=n instanceof W.ActiveSelection?n.getObjects():[n];const r=z.canvas.getScenePoint(t.e),s=z.canvas.getObjects("Track");z.originTrack=s.find(u=>{const d=u.getBoundingRect();return r.x>=d.left&&r.x<=d.left+d.width&&r.y>=d.top&&r.y<=d.top+d.height})??{};const a=z.canvas.getObjects("Video","Image","Audio","Text","Element");s.forEach(u=>{const d=a.filter(h=>u.items.includes(h.id));z.trackToItemsMap[u.id]=d,z.trackTopToIdMap[u.top]=u.id,z.trackTops.push(u.top)}),z.trackTops.sort((u,d)=>u-d),z.activeObjects.forEach(u=>{const d=s?.find(m=>m.items.includes(u.id));if(!d)return;const h=d.id;z.activeTrackToItemsMap[h]?z.activeTrackToItemsMap[h].push(u):z.activeTrackToItemsMap[h]=[u]}),z.primaryMovingObjects=z.activeObjects.filter(u=>{const d=u.getBoundingRect();return r.y>=d.top&&r.y<=d.top+d.height&&!(u instanceof Lt)}),z.primaryMovingObjects.forEach(u=>{const d=u.getBoundingRect().top,h=z.trackTopToIdMap[d];if(z.primaryTracks[h])z.primaryTracks[h].objects.push(u);else{const m=za(z.trackTops,z.originTrack.top,d);if(typeof m!="number")return;z.primaryTracks[h]={objects:[u],index:m}}}),z.primaryMovingObjects=z.primaryMovingObjects.sort((u,d)=>u.left-d.left),z.secondaryMovingObjects=z.activeObjects.filter(u=>!z.primaryMovingObjects.includes(u)&&!(u instanceof Lt)),z.secondaryMovingObjects.forEach(u=>{const d=u.getBoundingRect().top,h=z.trackTopToIdMap[u.getBoundingRect().top];if(z.secondaryTracks[h])z.secondaryTracks[h].objects.push(u);else{const m=za(z.trackTops,z.originTrack.top,d);if(typeof m!="number")return;z.secondaryTracks[h]={objects:[u],index:m}}}),z.originTrack&&(z.canvas.trackOriginBeforeTransform=z.originTrack.id),n&&(z.canvas.positionBeforeTransform={top:n.top,left:n.left}),("transform"in t?t.transform:{}).action==="drag"&&(z.placeholderMovingObjects=z.primaryMovingObjects.map(u=>{const d=u.getBoundingRect();z.objectInitialPositions[u.id]={top:d.top,left:d.left};const h=new Tr({id:`${u.id}-placeholder`,left:d.left,top:d.top,width:d.width,height:d.height,for:sx[u.type]});return h.draggedObject=u,h}),z.canvas.add(...z.placeholderMovingObjects))}function za(t,n,r){const s=t.indexOf(n),a=t.indexOf(r);return s===-1||a===-1?null:a-s}const sx={trackitemvideo:"video",trackitemimage:"image",trackitemaudio:"audio",trackitemtext:"text"};function kp(t){if(!ze.guide)return!1;t.e.preventDefault();const n=this,r=n.getViewportPoint(t.e);ze.guide.set({left:r.x-16,top:r.y-ze.guide.height/2});const s=ox(r,ze.objects);s&&(ze.object=s,s.strokeDashArray=[5,1],s.setSelected(!0)),ze.objects.forEach(a=>{a!==s&&a.setSelected(!1)}),n.requestRenderAll()}function ox(t,n){let r=1/0,s=null;const a=new W.Point(t.x,t.y);return n.forEach(c=>{const u=ax(c,a);u<r&&(r=u,s=c)}),s}function ax(t,n){return Math.sqrt(Math.pow(t.left-n.x,2)+Math.pow(t.top-n.y,2))}const cx=["transition","image","video","audio","caption","text"];function Rp(t){const n=t.e.dataTransfer?.types[0];if(!n)return;const r=JSON.parse(n),{type:s,duration:a=5e3}=r;if(!cx.includes(s))return;const c=this;c.discardActiveObject();const u=Ve(a,c.tScale);ze.guide=lx({width:u,height:48,id:"TransitionGuide",left:0,top:0,type:s}),c.add(ze.guide),s==="transition"&&(ze.objects=c.getObjects("Transition"),ze.objects.forEach(d=>{d.visible=!0})),ve.dispatch(gc)}function lx({width:t,height:n,id:r,left:s,top:a,type:c}){return c==="transition"?new di({top:0,left:0,height:48,width:48,id:"TransitionGuide"}):new fi({top:a,left:s,height:n,width:t,id:r,name:"Rivers in the mountains"})}function Op(){if(!ze.guide)return;ve.dispatch(ci);const t=this;ux(ze.objects),t.remove(ze.guide)}function ux(t){t.forEach(n=>{n.strokeDashArray=[],n.setSelected(!1),n.kind==="none"&&(n.visible=!1)})}var dx=typeof global=="object"&&global&&global.Object===Object&&global,fx=typeof self=="object"&&self&&self.Object===Object&&self,Cc=dx||fx||Function("return this")(),Nn=Cc.Symbol,Mp=Object.prototype,hx=Mp.hasOwnProperty,px=Mp.toString,ni=Nn?Nn.toStringTag:void 0;function gx(t){var n=hx.call(t,ni),r=t[ni];try{t[ni]=void 0;var s=!0}catch{}var a=px.call(t);return s&&(n?t[ni]=r:delete t[ni]),a}var mx=Object.prototype,vx=mx.toString;function bx(t){return vx.call(t)}var yx="[object Null]",_x="[object Undefined]",jd=Nn?Nn.toStringTag:void 0;function Ac(t){return t==null?t===void 0?_x:yx:jd&&jd in Object(t)?gx(t):bx(t)}function kc(t){return t!=null&&typeof t=="object"}var wx="[object Symbol]";function Rc(t){return typeof t=="symbol"||kc(t)&&Ac(t)==wx}function Sx(t,n){for(var r=-1,s=t==null?0:t.length,a=Array(s);++r<s;)a[r]=n(t[r],r,t);return a}var xi=Array.isArray,Fd=Nn?Nn.prototype:void 0,Ud=Fd?Fd.toString:void 0;function Dp(t){if(typeof t=="string")return t;if(xi(t))return Sx(t,Dp)+"";if(Rc(t))return Ud?Ud.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}function ks(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function xx(t){return t}var Tx="[object AsyncFunction]",Ix="[object Function]",Ex="[object GeneratorFunction]",Cx="[object Proxy]";function Ax(t){if(!ks(t))return!1;var n=Ac(t);return n==Ix||n==Ex||n==Tx||n==Cx}var ya=Cc["__core-js_shared__"],zd=function(){var t=/[^.]+$/.exec(ya&&ya.keys&&ya.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function kx(t){return!!zd&&zd in t}var Rx=Function.prototype,Ox=Rx.toString;function Mx(t){if(t!=null){try{return Ox.call(t)}catch{}try{return t+""}catch{}}return""}var Dx=/[\\^$.*+?()[\]{}|]/g,Px=/^\[object .+?Constructor\]$/,Lx=Function.prototype,Nx=Object.prototype,jx=Lx.toString,Fx=Nx.hasOwnProperty,Ux=RegExp("^"+jx.call(Fx).replace(Dx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zx(t){if(!ks(t)||kx(t))return!1;var n=Ax(t)?Ux:Px;return n.test(Mx(t))}function Hx(t,n){return t?.[n]}function Oc(t,n){var r=Hx(t,n);return zx(r)?r:void 0}function Wx(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}var Bx=800,Vx=16,$x=Date.now;function Gx(t){var n=0,r=0;return function(){var s=$x(),a=Vx-(s-r);if(r=s,a>0){if(++n>=Bx)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function Yx(t){return function(){return t}}var Rs=function(){try{var t=Oc(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Xx=Rs?function(t,n){return Rs(t,"toString",{configurable:!0,enumerable:!1,value:Yx(n),writable:!0})}:xx,Zx=Gx(Xx),Kx=9007199254740991,qx=/^(?:0|[1-9]\d*)$/;function Pp(t,n){var r=typeof t;return n=n??Kx,!!n&&(r=="number"||r!="symbol"&&qx.test(t))&&t>-1&&t%1==0&&t<n}function Jx(t,n,r){n=="__proto__"&&Rs?Rs(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}function Lp(t,n){return t===n||t!==t&&n!==n}var Qx=Object.prototype,eT=Qx.hasOwnProperty;function tT(t,n,r){var s=t[n];(!(eT.call(t,n)&&Lp(s,r))||r===void 0&&!(n in t))&&Jx(t,n,r)}var Hd=Math.max;function nT(t,n,r){return n=Hd(n===void 0?t.length-1:n,0),function(){for(var s=arguments,a=-1,c=Hd(s.length-n,0),u=Array(c);++a<c;)u[a]=s[n+a];a=-1;for(var d=Array(n+1);++a<n;)d[a]=s[a];return d[n]=r(u),Wx(t,this,d)}}var rT=9007199254740991;function iT(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rT}var sT="[object Arguments]";function Wd(t){return kc(t)&&Ac(t)==sT}var Np=Object.prototype,oT=Np.hasOwnProperty,aT=Np.propertyIsEnumerable,jp=Wd(function(){return arguments}())?Wd:function(t){return kc(t)&&oT.call(t,"callee")&&!aT.call(t,"callee")},cT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lT=/^\w*$/;function uT(t,n){if(xi(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Rc(t)?!0:lT.test(t)||!cT.test(t)||n!=null&&t in Object(n)}var hi=Oc(Object,"create");function dT(){this.__data__=hi?hi(null):{},this.size=0}function fT(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var hT="__lodash_hash_undefined__",pT=Object.prototype,gT=pT.hasOwnProperty;function mT(t){var n=this.__data__;if(hi){var r=n[t];return r===hT?void 0:r}return gT.call(n,t)?n[t]:void 0}var vT=Object.prototype,bT=vT.hasOwnProperty;function yT(t){var n=this.__data__;return hi?n[t]!==void 0:bT.call(n,t)}var _T="__lodash_hash_undefined__";function wT(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hi&&n===void 0?_T:n,this}function Jn(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var s=t[n];this.set(s[0],s[1])}}Jn.prototype.clear=dT;Jn.prototype.delete=fT;Jn.prototype.get=mT;Jn.prototype.has=yT;Jn.prototype.set=wT;function ST(){this.__data__=[],this.size=0}function $s(t,n){for(var r=t.length;r--;)if(Lp(t[r][0],n))return r;return-1}var xT=Array.prototype,TT=xT.splice;function IT(t){var n=this.__data__,r=$s(n,t);if(r<0)return!1;var s=n.length-1;return r==s?n.pop():TT.call(n,r,1),--this.size,!0}function ET(t){var n=this.__data__,r=$s(n,t);return r<0?void 0:n[r][1]}function CT(t){return $s(this.__data__,t)>-1}function AT(t,n){var r=this.__data__,s=$s(r,t);return s<0?(++this.size,r.push([t,n])):r[s][1]=n,this}function Dr(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var s=t[n];this.set(s[0],s[1])}}Dr.prototype.clear=ST;Dr.prototype.delete=IT;Dr.prototype.get=ET;Dr.prototype.has=CT;Dr.prototype.set=AT;var kT=Oc(Cc,"Map");function RT(){this.size=0,this.__data__={hash:new Jn,map:new(kT||Dr),string:new Jn}}function OT(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Gs(t,n){var r=t.__data__;return OT(n)?r[typeof n=="string"?"string":"hash"]:r.map}function MT(t){var n=Gs(this,t).delete(t);return this.size-=n?1:0,n}function DT(t){return Gs(this,t).get(t)}function PT(t){return Gs(this,t).has(t)}function LT(t,n){var r=Gs(this,t),s=r.size;return r.set(t,n),this.size+=r.size==s?0:1,this}function sr(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var s=t[n];this.set(s[0],s[1])}}sr.prototype.clear=RT;sr.prototype.delete=MT;sr.prototype.get=DT;sr.prototype.has=PT;sr.prototype.set=LT;var NT="Expected a function";function Mc(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(NT);var r=function(){var s=arguments,a=n?n.apply(this,s):s[0],c=r.cache;if(c.has(a))return c.get(a);var u=t.apply(this,s);return r.cache=c.set(a,u)||c,u};return r.cache=new(Mc.Cache||sr),r}Mc.Cache=sr;var jT=500;function FT(t){var n=Mc(t,function(s){return r.size===jT&&r.clear(),s}),r=n.cache;return n}var UT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zT=/\\(\\)?/g,HT=FT(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(UT,function(r,s,a,c){n.push(a?c.replace(zT,"$1"):s||r)}),n});function WT(t){return t==null?"":Dp(t)}function Ys(t,n){return xi(t)?t:uT(t,n)?[t]:HT(WT(t))}function Dc(t){if(typeof t=="string"||Rc(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}function BT(t,n){n=Ys(n,t);for(var r=0,s=n.length;t!=null&&r<s;)t=t[Dc(n[r++])];return r&&r==s?t:void 0}function VT(t,n){for(var r=-1,s=n.length,a=t.length;++r<s;)t[a+r]=n[r];return t}var Bd=Nn?Nn.isConcatSpreadable:void 0;function $T(t){return xi(t)||jp(t)||!!(Bd&&t&&t[Bd])}function GT(t,n,r,s,a){var c=-1,u=t.length;for(r||(r=$T),a||(a=[]);++c<u;){var d=t[c];r(d)?VT(a,d):a[a.length]=d}return a}function YT(t){var n=t==null?0:t.length;return n?GT(t):[]}function XT(t){return Zx(nT(t,void 0,YT),t+"")}function ZT(t,n){return t!=null&&n in Object(t)}function KT(t,n,r){n=Ys(n,t);for(var s=-1,a=n.length,c=!1;++s<a;){var u=Dc(n[s]);if(!(c=t!=null&&r(t,u)))break;t=t[u]}return c||++s!=a?c:(a=t==null?0:t.length,!!a&&iT(a)&&Pp(u,a)&&(xi(t)||jp(t)))}function qT(t,n){return t!=null&&KT(t,n,ZT)}function JT(t,n,r,s){if(!ks(t))return t;n=Ys(n,t);for(var a=-1,c=n.length,u=c-1,d=t;d!=null&&++a<c;){var h=Dc(n[a]),m=r;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(a!=u){var b=d[h];m=void 0,m===void 0&&(m=ks(b)?b:Pp(n[a+1])?[]:{})}tT(d,h,m),d=d[h]}return t}function QT(t,n,r){for(var s=-1,a=n.length,c={};++s<a;){var u=n[s],d=BT(t,u);r(d,u)&&JT(c,Ys(u,t),d)}return c}function e4(t,n){return QT(t,n,function(r,s){return qT(t,s)})}var t4=XT(function(t,n){return t==null?{}:e4(t,n)});function Fp(t){const n=t.e.dataTransfer?.types[0];if(!n)return;const r=JSON.parse(t.e.dataTransfer.getData(n)),s=this;if(r.type!=="transition"){n4(r),s.remove(ze.guide),s.requestRenderAll(),ve.dispatch(ci);return}ze.guide&&(ze.object&&r4(r,s),ze.objects.forEach(a=>{a.strokeDashArray=[],a.setSelected(!1),a.kind==="none"&&(a.visible=!1)}),s.remove(ze.guide),s.requestRenderAll(),ve.dispatch(ci))}function n4(t){const n={...t,id:Ze()};switch(t.type){case"image":ve.dispatch(Rr,{payload:n});break;case"video":ve.dispatch(Ar,{payload:n});break;case"audio":ve.dispatch(kr,{payload:n});break}}function r4(t,n){const r=ze.object?.id,s=t4(t,["kind","direction"]);Object.entries(s).forEach(([a,c])=>{a==="kind"?ze.object.kind=c:ze.object[a]=c}),n.transitionsMap[r]={...n.transitionsMap[r],...s},n.updateState()}const i4=t=>{t.on("dragover",kp),t.on("dragenter",Rp),t.on("dragleave",Op),t.on("drop",Fp)},s4=t=>{t.off("dragover",kp),t.off("dragenter",Rp),t.off("dragleave",Op),t.off("drop",Fp)},Up=t=>{const n=t.target.canvas,r=t.target;if(t.action==="resizing"&&r instanceof Lt&&n){const s=r.id,a=n.getObjects("Transition").find(c=>c.id===s);if(a&&a instanceof Lt){const c=we.cloneDeep(n.transitionsMap),u={...c,[s]:{...c[s],width:a.width,duration:a.duration}};n.transitionsMap=u,n.updateState()}}n&&(o4(n,n.getObjects()),a4(n.getObjects("Helper")),z.isPointerOverHelperTrack=!1,z.draggingOverTrack=null)},o4=(t,n)=>{n.forEach(r=>{r.isAlignmentAuxiliary&&t.remove(r)})},a4=t=>{t.forEach(n=>n.setSelected(!1))};function zp(t){const n=t.target.canvas;if(!n)return;const r=n.getActiveObject();if(!r||!n.positionBeforeTransform)return;const s=n.getScenePoint(t.e),a=n.getObjects("Track","Helper").find(c=>{const u=c.getBoundingRect();return s.x>=u.left&&s.x<=u.left+u.width&&s.y>=u.top&&s.y<=u.top+u.height});if(t.action==="resizing"){const c=(z.trackToItemsMap[z.originTrack.id]||[]).filter(d=>d!==r);r.setCoords();const u=Xs(c,r.getBoundingRect());return n.fire("track-items:resized",{trackId:z.originTrack.id,trackItemIds:[r.id],isOverlapped:!!u}),!1}if(!a)return r&&(r?.set(n.positionBeforeTransform),r?.setCoords()),!1;if(a instanceof Mr){let c;switch(a.kind){case"top":c=0;break;case"center":c=a.metadata.order||0;break;case"bottom":c=-1;break;default:return}const u={isSecondaryOverlapped:!1,secondaryTracks:z.secondaryTracks,primaryTracks:z.primaryTracks,primaryPositions:{trackIndex:c,trackId:n.trackIdAfterTransform,positions:n.positionAfterTransform}};d4(u)}else if(a instanceof Ln){const c={isSecondaryOverlapped:l4(),secondaryTracks:z.secondaryTracks,primaryTracks:z.primaryTracks,primaryPositions:{trackId:n.trackIdAfterTransform,positions:n.positionAfterTransform}};c4(c)}}const c4=t=>{z.canvas&&z.canvas.fire("track-items:moved",t)};function l4(){const t=u4();return Object.keys(t).some(n=>{const r=z.trackToItemsMap[n],s=t[n].objects;return r?.length?r.filter(a=>!s.includes(a)).some(a=>Xs(s,a.getBoundingRect())):!0})}function u4(){const[t]=z.primaryMovingObjects,n=t.id,s=z.canvas.positionAfterTransform[n].top-t.getBoundingRect().top,a={};return z.secondaryMovingObjects.forEach(c=>{const u=c.getBoundingRect().top+s,d=z.trackTopToIdMap[u],h=za(z.trackTops,z.originTrack.top,u);a[d]?a[d].objects.push(c):a[d]={objects:[c],index:h}}),a}const d4=t=>{z.canvas&&z.canvas.fire("track:create",t)};function Xs(t,n){return t.find(r=>{const s=r.getBoundingRect();return n.left<s.left+s.width&&n.left+n.width>s.left&&n.top<s.top+s.height&&n.top+n.height>s.top})}const f4=t=>{t.on("object:modified",Up),t.on("object:modified",zp)},h4=t=>{t.off("object:modified",Up),t.off("object:modified",zp)};function p4(t,n){t.remove(...n),n.length=0}function Hp(){p4(this,z.placeholderMovingObjects)}function Wp(t){const n=this.height<this.bounding.height,r=this.width<this.bounding.width;if(!n&&!r)return;const s=this.viewportTransform;let a=s[4],c=s[5];const u=2;t.e.shiftKey?a=s[4]-t.e.deltaY*u:(n&&(c=s[5]-t.e.deltaY*u),a=s[4]-t.e.deltaX*u),this.setViewportPos(a,c)}const g4=t=>{t.on("mouse:wheel",Wp),t.on("mouse:up",Hp.bind(t))},m4=t=>{t.off("mouse:wheel",Wp),t.off("mouse:up",Hp.bind(t))};function Bp(t){const n=this;if(!n)return;const r=n.getScenePoint(t.e),s=n.getObjects("Helper","Track");z.draggingOverTrack=s.find(m=>{const b=m.getBoundingRect();return r.x>=b.left&&r.x<=b.left+b.width&&r.y>=b.top&&r.y<=b.top+b.height})??null,s.forEach(m=>{if($d(m)){const b=z.draggingOverTrack;m.setSelected(m===b)}}),z.isPointerOverHelperTrack=$d(z.draggingOverTrack),n.getObjects();const a=t.target;a.getBoundingRect(),a.setCoords();const c=[a,...n.getActiveObjects(),...n.getObjects("Track","Helper","Transition","Placeholder")],u=v4(c,n),d=y4(a);b4(u,d).forEach(m=>{m.orientation==="V"?a.left=m.lineGuide+m.offset:a.top=m.lineGuide+m.offset})}const v4=(t,n)=>{const r=[],s=[];return n.getObjects().filter(a=>a.visible).forEach(a=>{if(t.some(d=>d.id===a.id)||a.isAlignmentAuxiliary)return;const u=a.getBoundingRect();r.push(Vd(u.left,u.width,u.top,u.height)),s.push(Vd(u.top,u.height,u.left,u.width))}),{vertical:r.flat(),horizontal:[]}},Vd=(t,n,r,s)=>[t,t+n].map(a=>({val:a,start:r,end:r+s})),b4=(t,n)=>{const r=[],s=[];t.vertical.forEach(h=>{n.vertical.forEach(m=>{const b=Math.abs(h.val-m.guide);b<10&&r.push({lineGuide:h.val,diff:b,orientation:"V",snap:m.snap,offset:m.offset,targetDim:{start:h.start,end:h.end}})})}),t.horizontal.forEach(h=>{n.horizontal.forEach(m=>{const b=Math.abs(h.val-m.guide);b<10&&s.push({lineGuide:h.val,diff:b,orientation:"H",snap:m.snap,offset:m.offset,targetDim:{start:h.start,end:h.end}})})});const c=[],u=r.sort((h,m)=>h.diff-m.diff)[0],d=s.sort((h,m)=>h.diff-m.diff)[0];return u&&c.push({lineGuide:u.lineGuide,offset:u.offset,orientation:"V",snap:u.snap,targetDim:u.targetDim}),d&&c.push({lineGuide:d.lineGuide,offset:d.offset,orientation:"H",snap:d.snap,targetDim:d.targetDim}),c},y4=t=>{const n=t.getBoundingRect();return{vertical:[{guide:Math.round(n.left),offset:Math.round(t.left-n.left),snap:"start"},{guide:Math.round(n.left+n.width),offset:Math.round(t.left-n.left-n.width),snap:"end"}],horizontal:[{guide:Math.round(n.top),offset:Math.round(t.top-n.top),snap:"start"},{guide:Math.round(n.top+n.height),offset:Math.round(t.top-n.top-n.height),snap:"end"}]}},$d=t=>t instanceof Mr;function _4(t){t.opacity=z.isPointerOverHelperTrack?0:1}const Vp=C4(t=>{const n=t.target.canvas;if(A4(t),!z.draggingOverTrack)return;const r=z.placeholderMovingObjects.map(c=>c.draggedObject),s=(z.trackToItemsMap[z.draggingOverTrack.id]||[]).filter(c=>!r.includes(c)),a=s.find(c=>Xs(r,c.getBoundingRect()));z.placeholderMovingObjects.forEach(c=>{const u=c.draggedObject;u?.setCoords(),_4(c);const d=w4(u,s,a,z.placeholderMovingObjects.length>1);n.trackIdAfterTransform=z.trackTopToIdMap[d.top],n.positionAfterTransform[u?.id]={top:d.top,left:d.left},c.left=d.left,c.top=d.top})},5),w4=(t,n,r,s)=>!S4(t)||s&&r?$p(t):r?x4(t,r,n):E4(t),S4=t=>z.draggingOverTrack?z.draggingOverTrack.accepts?.includes(t.type)??!1:!1,$p=t=>({top:z.objectInitialPositions[t.id].top,left:z.objectInitialPositions[t.id].left}),x4=(t,n,r)=>{const s=T4(t,n);return!I4(r,t,s)||z.activeObjects.length!==1?$p(t):{left:s,top:n.top}},T4=(t,n)=>{const r=t.left+t.width/2,s=n.left+n.width/2;return r<s?n.left-t.width:n.left+n.width},I4=(t,n,r)=>!(r<0||Xs(t,{...n.getBoundingRect(),left:r})),E4=t=>({left:t.getBoundingRect().left,top:z.draggingOverTrack?.top??0});function C4(t,n){let r=null;return function(...s){const a=Date.now();(r===null||a-r>=n)&&(r=a,t(...s))}}function A4(t){const n=t.target,r=n.canvas,s=n.top,a=-n.height*.75,c=r.height+n.height*.75;n.top=Math.min(Math.max(s,a),c-n.height);const u=n.left;n.left=Math.max(u,0)}const k4=t=>{t.on("object:moving",Bp.bind(t)),t.on("object:moving",Vp)},R4=t=>{t.off("object:moving",Bp.bind(t)),t.off("object:moving",Vp)};function Gp(){const t=this,n=t.getActiveObject(),r=t.getActiveObjects().map(s=>s.id);n instanceof W.Group?(n.borderColor="rgba(0, 216, 214, 0.75)",n.hasControls=!1,n.hoverCursor="default",n.borderScaleFactor=1,n.padding=0,n.getObjects().forEach(s=>{s.setSelected(!0)})):n?.setSelected(!0),this.setActiveIds(r)}function Yp(t){const n=this,r=n.getActiveObject();r instanceof W.Group&&(r.borderColor="transparent",r.hasControls=!1,r.hoverCursor="default"),t.selected.forEach(a=>{a.setSelected(!0)}),t.deselected.forEach(a=>{a.setSelected(!1)});const s=n.getActiveObjects().map(a=>a.id);this.setActiveIds(s)}function Xp(t){this.getObjects().forEach(r=>{r.isSelected&&(r.isSelected=!1)}),t.deselected.forEach(r=>{r.setSelected(!1)});const n=this.getActiveObjects().map(r=>r.id);this.setActiveIds(n)}const O4=t=>{t.on("selection:created",Gp),t.on("selection:updated",Yp),t.on("selection:cleared",Xp)},M4=t=>{t.off("selection:created",Gp),t.off("selection:updated",Yp),t.off("selection:cleared",Xp)};let Zp,Kp,qp;const D4=t=>{const{state:n}=t;Zp=n.subscribeToActiveIds(({activeIds:r})=>{if(r.length===1){const s=r[0],{trackItemIds:a,trackItemsMap:c}=n.getState();a.forEach(u=>{c[u].type}),t.selectTrackItemByIds([s])}else t.selectTrackItemByIds(r)}),Kp=n.subscribeToHistory(r=>{const{tracks:s,trackItemsMap:a,trackItemIds:c,trackItemDetailsMap:u}=r;t.tracks=s,t.trackItemsMap=a,t.trackItemIds=c,t.trackItemDetailsMap=u,t.renderTracks(),t.updateTrackItemsToHistory(),t.alignItemsToTrack(),t.calcBounding(),t.updateTransitions(),t.duration=Bt(t.trackItemsMap)}),qp=n.subscribeToAddOrRemoveItems(()=>{const r=t.getTrackItems().map(d=>d.id),{trackItemIds:s,trackItemsMap:a,trackItemDetailsMap:c}=n.getState(),u=[];r.forEach(d=>{s.includes(d)||u.push(d)}),t.deleteTrackItemById(u),t.tracks=n.getState().tracks,t.trackItemsMap=a,t.trackItemDetailsMap=c,s.forEach(d=>{if(!r.includes(d)){const h={...a[d],details:{...c[d].details}};t.addTrackItem(h)}}),t.renderTracks(),t.alignItemsToTrack(),s.forEach(d=>{t.updateTrackItemCoords(d)}),t.updateTransitions(),t.updateTrackCoords()})},P4=t=>{Zp.unsubscribe(),Kp.unsubscribe(),qp.unsubscribe()};function Jp(t){const{isSecondaryOverlapped:n,secondaryTracks:r,primaryTracks:s,primaryPositions:a}=t,{trackId:c,positions:u}=a,d=this.tracks.findIndex(E=>E.id===c),h=wc(Object.keys(r).map(E=>r[E].objects.map(O=>O.id))),m=li(this.tracks,[...Object.keys(u),...h]);Object.keys(s).forEach(E=>{this.pauseEventListeners();const{objects:O}=s[E];O.forEach(A=>{const D=u[A.id];A.left=D.left}),this.resumeEventListeners();const k=m.find(A=>A.id===c);k&&k.items.push(...Object.keys(u)),this.tracks=m});const b=this.tracks[d],_=[];Object.keys(r).forEach(E=>{const{objects:O,index:k}=r[E],A=O.map(j=>j.id),[D]=A,P=this.trackItemsMap[D];if(n){const j={id:Ze(),items:A,type:P.type,accepts:this.acceptsMap?.[P.type],tempIndex:k};_.push(j)}else{const j=m[d+k];j&&j.items.push(...A),this.tracks=m}});const x=Sc(b,_);x.length&&m.splice(d,1,...x),this.tracks=m,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}function Qp({trackItemIds:t,isOverlapped:n}){const[r]=t;if(r){if(!this.getObjects("Transition").find(s=>s.id===r)){const s=this.tracks.find(a=>a.items.includes(r));if(n){const a=L4(this.tracks,t),c={id:Ze(),items:[r],type:s?.type,accepts:s?.accepts},u=this.tracks.findIndex(d=>d.id===s?.id);a.splice(u,0,c),this.tracks=a}}this.renderTracks(),this.alignItemsToTrack(),this.alignTransitionsToTrack(),this.updateTransitions(),this.updateTrackItemsPosition(),this.updateState({updateHistory:!0,kind:"update"})}}function L4(t,n){return t.map(r=>({...r,items:r.items.filter(s=>!n.includes(s))}))}function e1(t){const{secondaryTracks:n,primaryTracks:r,primaryPositions:s}=t,{positions:a,trackIndex:c}=s,u=c===-1?this.tracks.length:c,[d]=Object.keys(r),h=this.tracks.find(k=>k.id==d),m=r[d],b={id:Ze(),items:m.objects.map(k=>k.id),type:h?.type,accepts:h?.accepts},_=wc(Object.keys(n).map(k=>n[k].objects.map(A=>A.id))),x=li(this.tracks,[...Object.keys(a),..._]),E=[];Object.keys(n).forEach(k=>{const{objects:A,index:D}=n[k],P=this.tracks.find(J=>J.id==k),j=A.map(J=>J.id),U={id:Ze(),items:j,type:P?.type,accepts:P?.accepts,tempIndex:D};E.push(U)});const O=Sc(b,E);O.length&&x.splice(u,0,...O),this.tracks=x,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}const N4=t=>{t.on("track:create",e1.bind(t)),t.on("track-items:resized",Qp.bind(t)),t.on("track-items:moved",Jp.bind(t))},j4=t=>{t.off("track:create",e1.bind(t)),t.off("track-items:resized",Qp.bind(t)),t.off("track-items:moved",Jp.bind(t))},t1=t=>{i4(t),f4(t),g4(t),k4(t),N4(t),O4(t),rx(t),D4(t)},n1=t=>{s4(t),h4(t),m4(t),R4(t),j4(t),M4(t),ix(t),P4()},F4={video:["*"],image:["*"],audio:["*"],text:["*"]},U4=["video","image","audio","text"];let Zs=class extends W.Canvas{acceptsMap;tracks=[];trackItemsMap={};trackItemIds=[];transitionIds=[];transitionsMap={};trackItemDetailsMap={};bounding;onScroll;tScale;store;state;activeIds=[];spacing;scale;sizesMap;duration;setupFabricDefaults(){W.FabricObject.ownDefaults.borderColor="transparent",W.FabricObject.ownDefaults.cornerColor="white",W.FabricObject.ownDefaults.cornerStrokeColor="transparent",W.FabricObject.ownDefaults.strokeWidth=0,W.FabricObject.ownDefaults.borderOpacityWhenMoving=1,W.FabricObject.ownDefaults.borderScaleFactor=1,W.FabricObject.ownDefaults.cornerSize=8,W.FabricObject.ownDefaults.cornerStyle="rect",W.FabricObject.ownDefaults.centeredScaling=!1,W.FabricObject.ownDefaults.centeredRotation=!0,W.FabricObject.ownDefaults.transparentCorners=!1}constructor(n,r){super(n,r),this.bounding=r.bounding||{width:r.width||0,height:r.height||0},this.spacing={left:16,right:80,...r.spacing};const s=this.viewportTransform;s[4]=this.spacing.left,this.tScale=r.tScale||1/300,this.store=r.store,this.state=r.state,this.scale=r.scale,this.onScroll=r.onScroll,this.acceptsMap=this.createAcceptsItemMap(r.acceptsMap),this.sizesMap=yp(r.sizesMap),this.setupFabricDefaults(),this.initEventListeners()}createAcceptsItemMap(n=F4){const r={};return Object.keys(n).forEach(s=>{const a=n[s];r[s]=a.includes("*")?U4:a}),r}setActiveIds(n){this.activeIds=n,this.getObjects("Transition").some(s=>n.includes(s.id))||(this.state?.updateState({activeIds:we.cloneDeep(this.activeIds)}),ve.dispatch(dc,{payload:{activeIds:this.activeIds}}))}purge(){n1(this),this.dispose()}static registerItems(n){Object.keys(n).forEach(r=>{W.classRegistry.setClass(n[r],r)})}initEventListeners(){t1(this)}getUpdatedState(){const n=Bt(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,scale:this.scale,duration:n}}getState(){const n=Bt(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,trackItemDetailsMap:this.trackItemDetailsMap,scale:this.scale,duration:n}}notify(n={updateHistory:!1}){const r=this.getUpdatedState();this.state.updateState(r,n)}updateState(n){this.updateTracksState(),this.updateTrackItemsState(),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords();const r=this.getUpdatedState();this.state.updateState(r,n)}scrollTo({scrollLeft:n,scrollTop:r}){const s=[...this.viewportTransform];let a=!1;if(typeof n=="number"&&(s[4]=-n+this.spacing.left,a=!0),typeof r=="number"&&(s[5]=-r,a=!0),a){this.viewportTransform=s;const c=this.getActiveObject();c&&c.setCoords(),this.requestRenderAll()}}setBoundingBox(n){this.bounding=n}calcBounding(){const n=this.getTrackItems().reduce((r,s)=>{const{left:a,top:c,width:u,height:d}=s.getBoundingRect();return{left:Math.min(r.left,a),top:Math.min(r.top,c),width:Math.max(r.width,a+u),height:Math.max(r.height,c+d)}},{left:1/0,top:1/0,width:this.width,height:0});this.bounding=n,ve.dispatch(mc,{payload:{bounding:n}})}setScale(n){this.pauseEventListeners(),this.tScale=n.zoom,this.scale=n;const r=this.getState();this.getObjects("Video","Image","Text","Audio").forEach(s=>{const a=r.trackItemsMap[s.id],{from:c,to:u}=a.display,d=Ve(c,this.tScale),h=Ve(u-c,this.tScale,s.playbackRate);s.set({left:d,width:h,tScale:n.zoom}),s.setCoords()}),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords(),this.updateTransitions(!1),this.resumeEventListeners(),this.notify()}setViewportPos(n,r){const s=this.getViewportPos(n,r),a=this.viewportTransform;a[4]=s.x,a[5]=s.y,this.requestRenderAll(),this.setActiveTrackItemCoords();const c=this.onScroll;c&&c.call(this,{scrollTop:s.y,scrollLeft:s.x-this.spacing.left})}getViewportPos(n,r){const s=this.bounding.width-100>=this.width?this.spacing.right:0,a=this.width-this.bounding.width-s,c=this.spacing.left,u=Math.max(a,Math.min(n,c));if(this.bounding.height<this.height)return{x:u,y:0};const d=this.height-this.bounding.height-40,h=Math.max(d,Math.min(r,0));return{x:u,y:h}}};ip(Zs,[Qh,Ip,Ep,Cp]);function r1(t){const n=ve.subject.pipe(gn(({key:r})=>r.startsWith(hh))).subscribe(r=>{if(r.key===pc){const s=r.value;t.setScale(s?.payload.scale??void 0)}});return{unsubscribe:()=>{n.unsubscribe()}}}Zs.registerItems({Text:Ec,Image:Sp,Video:wp,Audio:_p,Track:xp,Helper:Tp});const i1=({stateManager:t})=>{const n=G.useRef(!1),[r,s]=G.useState(0),a=G.useRef(null),c=G.useRef(null),u=G.useRef(null),d=G.useRef(null),h=G.useRef(null),[m,b]=G.useState({width:0,height:0}),[_,x]=G.useState({width:0,height:0}),{scale:E,playerRef:O,fps:k,setState:A,timeline:D}=qt(),{setTimeline:P}=qt(),j=Hs(O??void 0),U=q=>{h.current&&d.current&&(d.current.scrollTop=-q.scrollTop,h.current.scrollLeft=-q.scrollLeft,s(-q.scrollLeft))};G.useEffect(()=>{const q=Ve(j/k*1e3,E.zoom),X=c.current?.getBoundingClientRect().x+c.current?.clientWidth;if(q-r+40>=X){const ne=h.current?.clientWidth,V=h.current?.scrollWidth,he=h.current?.scrollLeft,Ne=(V-(ne+he))/ne;Ne>=0&&(Ne>1?h.current?.scrollTo({left:he+ne}):h.current?.scrollTo({left:V-ne}))}},[j]),G.useEffect(()=>{const q=c.current,X=a.current;if(!q||!X)return;const te=X.clientWidth,ne=X.clientHeight,V=new Zs(q,{width:te,height:ne,bounding:{width:te,height:0},selectionColor:"rgba(0, 216, 214,0.1)",selectionBorderColor:"rgba(0, 216, 214,1.0)",onScroll:U,state:t,scale:E,spacing:{left:zs,right:ja}}),he=r1(V);u.current=V,b({width:te,height:ne}),x({width:te,height:0}),P(V);const Ie=t.subscribeToSize(se=>{A(se)}),Ne=t.subscribeToScale(se=>{A(se)}),Se=t.subscribeToTracks(se=>{A(se)}),Ee=t.subscribeToDuration(se=>{A(se)}),Ce=t.subscribeToUpdateTrackItem(()=>{const se=t.getState();A({duration:se.duration,trackItemsMap:se.trackItemsMap})}),Re=t.subscribeToAddOrRemoveItems(()=>{const se=t.getState();A({trackItemDetailsMap:se.trackItemDetailsMap,trackItemsMap:se.trackItemsMap,trackItemIds:se.trackItemIds,tracks:se.tracks})}),dt=t.subscribeToUpdateItemDetails(()=>{const se=t.getState();A({trackItemDetailsMap:se.trackItemDetailsMap})});return()=>{he.unsubscribe(),V.purge(),Ne.unsubscribe(),Se.unsubscribe(),Ee.unsubscribe(),Re.unsubscribe(),Ce.unsubscribe(),dt.unsubscribe(),Ie.unsubscribe()}},[]),G.useEffect(()=>{const X=ve.subject.pipe(gn(({key:te})=>te.startsWith(gh))).subscribe(te=>{if(te.key===mc){const ne=te.value?.payload?.bounding;ne&&x({width:ne.width,height:ne.height})}});return()=>{X.unsubscribe()}},[]);const J=q=>{const X=q.currentTarget.scrollLeft;n.current&&u.current.scrollTo({scrollLeft:X}),s(X)},K=q=>{const X=q.currentTarget.scrollTop;n.current&&u.current.scrollTo({scrollTop:X})};G.useEffect(()=>{const q=h.current?.scrollWidth;if(!q||!D)return;const X=D.width;q<X+r&&D.scrollTo({scrollLeft:q-X})},[E]);const Q=q=>{if(!u.current)return;const te=Pn(q,E.zoom);O?.current?.seekTo(te*k/1e3)};return v.jsxs("div",{className:"relative overflow-hidden h-80 w-full",children:[v.jsx(Hh,{}),v.jsx(qh,{onClick:Q,scrollLeft:r}),v.jsx(Kh,{scrollLeft:r}),v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"relative w-10 flex-none"}),v.jsxs("div",{className:"relative h-[230px] flex-1",children:[v.jsx("div",{ref:a,className:"absolute top-0 h-[230px] w-full text-sm text-white ",children:v.jsx("canvas",{ref:c,id:"designcombo-timeline-canvas"})}),v.jsxs(xs,{type:"always",style:{position:"absolute",width:"calc(100vw - 40px)",height:"10px"},className:"ScrollAreaRootH",children:[v.jsx(ka,{onScroll:J,className:"ScrollAreaViewport",id:"viewportH",ref:h,children:v.jsx("div",{style:{width:_.width>m.width?_.width+ja:_.width},className:"pointer-events-none h-[10px]"})}),v.jsx(_d,{className:"ScrollAreaScrollbar",orientation:"horizontal",children:v.jsx(wd,{className:"ScrollAreaThumb",onMouseDown:()=>{n.current=!0},onMouseUp:()=>{n.current=!1}})})]}),v.jsxs(xs,{type:"always",style:{position:"absolute",height:"230px",width:"10px"},className:"ScrollAreaRootV",children:[v.jsx(ka,{onScroll:K,className:"ScrollAreaViewport",ref:d,children:v.jsx("div",{style:{height:_.height>m.height?_.height+40:m.height},className:"pointer-events-none w-[10px]"})}),v.jsx(_d,{className:"ScrollAreaScrollbar",orientation:"vertical",children:v.jsx(wd,{className:"ScrollAreaThumb",onMouseDown:()=>{n.current=!0},onMouseUp:()=>{n.current=!1}})})]})]})]})]})},z4={Date:!0,RegExp:!0,String:!0,Number:!0};function s1(t,n,r={cyclesFix:!0},s=[]){let a=[];const c=Array.isArray(t);for(const d in t){const h=t[d],m=c?+d:d;if(!(d in n)){a.push({type:"REMOVE",path:[m],oldValue:t[d]});continue}const b=n[d],_=typeof h=="object"&&typeof b=="object"&&Array.isArray(h)===Array.isArray(b);h&&b&&_&&!z4[Object.getPrototypeOf(h)?.constructor?.name]&&(!r.cyclesFix||!s.includes(h))?a.push.apply(a,s1(h,b,r,r.cyclesFix?s.concat([h]):[]).map(x=>(x.path.unshift(m),x))):h!==b&&!(Number.isNaN(h)&&Number.isNaN(b))&&!(_&&(isNaN(h)?h+""==b+"":+h==+b))&&a.push({path:[m],type:"CHANGE",value:b,oldValue:h})}const u=Array.isArray(n);for(const d in n)d in t||a.push({type:"CREATE",path:[u?+d:d],value:n[d]});return a}var Pc=Symbol.for("immer-nothing"),si=Symbol.for("immer-draftable"),xt=Symbol.for("immer-state"),o1=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Xe(t,...n){if(process.env.NODE_ENV!=="production"){const r=o1[t],s=typeof r=="function"?r.apply(null,n):r;throw new Error(`[Immer] ${s}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Qn=Object.getPrototypeOf;function er(t){return!!t&&!!t[xt]}function jn(t){return t?a1(t)||Array.isArray(t)||!!t[si]||!!t.constructor?.[si]||Ti(t)||Ii(t):!1}var H4=Object.prototype.constructor.toString();function a1(t){if(!t||typeof t!="object")return!1;const n=Qn(t);if(n===null)return!0;const r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===H4}function pi(t,n){tr(t)===0?Reflect.ownKeys(t).forEach(r=>{n(r,t[r],t)}):t.forEach((r,s)=>n(s,r,t))}function tr(t){const n=t[xt];return n?n.type_:Array.isArray(t)?1:Ti(t)?2:Ii(t)?3:0}function gi(t,n){return tr(t)===2?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function _a(t,n){return tr(t)===2?t.get(n):t[n]}function c1(t,n,r){const s=tr(t);s===2?t.set(n,r):s===3?t.add(r):t[n]=r}function W4(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}function Ti(t){return t instanceof Map}function Ii(t){return t instanceof Set}function Kn(t){return t.copy_||t.base_}function Ha(t,n){if(Ti(t))return new Map(t);if(Ii(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=a1(t);if(n===!0||n==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(t);delete s[xt];let a=Reflect.ownKeys(s);for(let c=0;c<a.length;c++){const u=a[c],d=s[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(s[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:t[u]})}return Object.create(Qn(t),s)}else{const s=Qn(t);if(s!==null&&r)return{...t};const a=Object.create(s);return Object.assign(a,t)}}function Lc(t,n=!1){return Ks(t)||er(t)||!jn(t)||(tr(t)>1&&(t.set=t.add=t.clear=t.delete=B4),Object.freeze(t),n&&Object.entries(t).forEach(([r,s])=>Lc(s,!0))),t}function B4(){Xe(2)}function Ks(t){return Object.isFrozen(t)}var Wa={};function nr(t){const n=Wa[t];return n||Xe(0,t),n}function V4(t,n){Wa[t]||(Wa[t]=n)}var mi;function l1(){return mi}function $4(t,n){return{drafts_:[],parent_:t,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Gd(t,n){n&&(nr("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=n)}function Ba(t){Va(t),t.drafts_.forEach(G4),t.drafts_=null}function Va(t){t===mi&&(mi=t.parent_)}function Yd(t){return mi=$4(mi,t)}function G4(t){const n=t[xt];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function Xd(t,n){n.unfinalizedDrafts_=n.drafts_.length;const r=n.drafts_[0];return t!==void 0&&t!==r?(r[xt].modified_&&(Ba(n),Xe(4)),jn(t)&&(t=Os(n,t),n.parent_||Ms(n,t)),n.patches_&&nr("Patches").generateReplacementPatches_(r[xt].base_,t,n.patches_,n.inversePatches_)):t=Os(n,r,[]),Ba(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),t!==Pc?t:void 0}function Os(t,n,r){if(Ks(n))return n;const s=n[xt];if(!s)return pi(n,(a,c)=>Zd(t,s,n,a,c,r)),n;if(s.scope_!==t)return n;if(!s.modified_)return Ms(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let c=a,u=!1;s.type_===3&&(c=new Set(a),a.clear(),u=!0),pi(c,(d,h)=>Zd(t,s,a,d,h,r,u)),Ms(t,a,!1),r&&t.patches_&&nr("Patches").generatePatches_(s,r,t.patches_,t.inversePatches_)}return s.copy_}function Zd(t,n,r,s,a,c,u){if(process.env.NODE_ENV!=="production"&&a===r&&Xe(5),er(a)){const d=c&&n&&n.type_!==3&&!gi(n.assigned_,s)?c.concat(s):void 0,h=Os(t,a,d);if(c1(r,s,h),er(h))t.canAutoFreeze_=!1;else return}else u&&r.add(a);if(jn(a)&&!Ks(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Os(t,a),(!n||!n.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,s)&&Ms(t,a)}}function Ms(t,n,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Lc(n,r)}function Y4(t,n){const r=Array.isArray(t),s={type_:r?1:0,scope_:n?n.scope_:l1(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,c=Nc;r&&(a=[s],c=vi);const{revoke:u,proxy:d}=Proxy.revocable(a,c);return s.draft_=d,s.revoke_=u,d}var Nc={get(t,n){if(n===xt)return t;const r=Kn(t);if(!gi(r,n))return X4(t,r,n);const s=r[n];return t.finalized_||!jn(s)?s:s===wa(t.base_,n)?(Sa(t),t.copy_[n]=Ga(s,t)):s},has(t,n){return n in Kn(t)},ownKeys(t){return Reflect.ownKeys(Kn(t))},set(t,n,r){const s=u1(Kn(t),n);if(s?.set)return s.set.call(t.draft_,r),!0;if(!t.modified_){const a=wa(Kn(t),n),c=a?.[xt];if(c&&c.base_===r)return t.copy_[n]=r,t.assigned_[n]=!1,!0;if(W4(r,a)&&(r!==void 0||gi(t.base_,n)))return!0;Sa(t),$a(t)}return t.copy_[n]===r&&(r!==void 0||n in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[n])||(t.copy_[n]=r,t.assigned_[n]=!0),!0},deleteProperty(t,n){return wa(t.base_,n)!==void 0||n in t.base_?(t.assigned_[n]=!1,Sa(t),$a(t)):delete t.assigned_[n],t.copy_&&delete t.copy_[n],!0},getOwnPropertyDescriptor(t,n){const r=Kn(t),s=Reflect.getOwnPropertyDescriptor(r,n);return s&&{writable:!0,configurable:t.type_!==1||n!=="length",enumerable:s.enumerable,value:r[n]}},defineProperty(){Xe(11)},getPrototypeOf(t){return Qn(t.base_)},setPrototypeOf(){Xe(12)}},vi={};pi(Nc,(t,n)=>{vi[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});vi.deleteProperty=function(t,n){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(n))&&Xe(13),vi.set.call(this,t,n,void 0)};vi.set=function(t,n,r){return process.env.NODE_ENV!=="production"&&n!=="length"&&isNaN(parseInt(n))&&Xe(14),Nc.set.call(this,t[0],n,r,t[0])};function wa(t,n){const r=t[xt];return(r?Kn(r):t)[n]}function X4(t,n,r){const s=u1(n,r);return s?"value"in s?s.value:s.get?.call(t.draft_):void 0}function u1(t,n){if(!(n in t))return;let r=Qn(t);for(;r;){const s=Object.getOwnPropertyDescriptor(r,n);if(s)return s;r=Qn(r)}}function $a(t){t.modified_||(t.modified_=!0,t.parent_&&$a(t.parent_))}function Sa(t){t.copy_||(t.copy_=Ha(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Z4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,r,s)=>{if(typeof n=="function"&&typeof r!="function"){const c=r;r=n;const u=this;return function(h=c,...m){return u.produce(h,b=>r.call(this,b,...m))}}typeof r!="function"&&Xe(6),s!==void 0&&typeof s!="function"&&Xe(7);let a;if(jn(n)){const c=Yd(this),u=Ga(n,void 0);let d=!0;try{a=r(u),d=!1}finally{d?Ba(c):Va(c)}return Gd(c,s),Xd(a,c)}else if(!n||typeof n!="object"){if(a=r(n),a===void 0&&(a=n),a===Pc&&(a=void 0),this.autoFreeze_&&Lc(a,!0),s){const c=[],u=[];nr("Patches").generateReplacementPatches_(n,a,c,u),s(c,u)}return a}else Xe(1,n)},this.produceWithPatches=(n,r)=>{if(typeof n=="function")return(u,...d)=>this.produceWithPatches(u,h=>n(h,...d));let s,a;return[this.produce(n,r,(u,d)=>{s=u,a=d}),s,a]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){jn(t)||Xe(8),er(t)&&(t=K4(t));const n=Yd(this),r=Ga(t,void 0);return r[xt].isManual_=!0,Va(n),r}finishDraft(t,n){const r=t&&t[xt];(!r||!r.isManual_)&&Xe(9);const{scope_:s}=r;return Gd(s,n),Xd(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const s=nr("Patches").applyPatches_;return er(t)?s(t,n):this.produce(t,a=>s(a,n))}};function Ga(t,n){const r=Ti(t)?nr("MapSet").proxyMap_(t,n):Ii(t)?nr("MapSet").proxySet_(t,n):Y4(t,n);return(n?n.scope_:l1()).drafts_.push(r),r}function K4(t){return er(t)||Xe(10,t),d1(t)}function d1(t){if(!jn(t)||Ks(t))return t;const n=t[xt];let r;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=Ha(t,n.scope_.immer_.useStrictShallowCopy_)}else r=Ha(t,!0);return pi(r,(s,a)=>{c1(r,s,d1(a))}),n&&(n.finalized_=!1),r}function Kd(){process.env.NODE_ENV!=="production"&&o1.push('Sets cannot have "replace" patches.',function(x){return"Unsupported patch operation: "+x},function(x){return"Cannot apply patch, path doesn't resolve: "+x},"Patching reserved attributes like __proto__, prototype and constructor is not allowed");const n="replace",r="add",s="remove";function a(x,E,O,k){switch(x.type_){case 0:case 2:return u(x,E,O,k);case 1:return c(x,E,O,k);case 3:return d(x,E,O,k)}}function c(x,E,O,k){let{base_:A,assigned_:D}=x,P=x.copy_;P.length<A.length&&([A,P]=[P,A],[O,k]=[k,O]);for(let j=0;j<A.length;j++)if(D[j]&&P[j]!==A[j]){const U=E.concat([j]);O.push({op:n,path:U,value:_(P[j])}),k.push({op:n,path:U,value:_(A[j])})}for(let j=A.length;j<P.length;j++){const U=E.concat([j]);O.push({op:r,path:U,value:_(P[j])})}for(let j=P.length-1;A.length<=j;--j){const U=E.concat([j]);k.push({op:s,path:U})}}function u(x,E,O,k){const{base_:A,copy_:D}=x;pi(x.assigned_,(P,j)=>{const U=_a(A,P),J=_a(D,P),K=j?gi(A,P)?n:r:s;if(U===J&&K===n)return;const Q=E.concat(P);O.push(K===s?{op:K,path:Q}:{op:K,path:Q,value:J}),k.push(K===r?{op:s,path:Q}:K===s?{op:r,path:Q,value:_(U)}:{op:n,path:Q,value:_(U)})})}function d(x,E,O,k){let{base_:A,copy_:D}=x,P=0;A.forEach(j=>{if(!D.has(j)){const U=E.concat([P]);O.push({op:s,path:U,value:j}),k.unshift({op:r,path:U,value:j})}P++}),P=0,D.forEach(j=>{if(!A.has(j)){const U=E.concat([P]);O.push({op:r,path:U,value:j}),k.unshift({op:s,path:U,value:j})}P++})}function h(x,E,O,k){O.push({op:n,path:[],value:E===Pc?void 0:E}),k.push({op:n,path:[],value:x})}function m(x,E){return E.forEach(O=>{const{path:k,op:A}=O;let D=x;for(let J=0;J<k.length-1;J++){const K=tr(D);let Q=k[J];typeof Q!="string"&&typeof Q!="number"&&(Q=""+Q),(K===0||K===1)&&(Q==="__proto__"||Q==="constructor")&&Xe(19),typeof D=="function"&&Q==="prototype"&&Xe(19),D=_a(D,Q),typeof D!="object"&&Xe(18,k.join("/"))}const P=tr(D),j=b(O.value),U=k[k.length-1];switch(A){case n:switch(P){case 2:return D.set(U,j);case 3:Xe(16);default:return D[U]=j}case r:switch(P){case 1:return U==="-"?D.push(j):D.splice(U,0,j);case 2:return D.set(U,j);case 3:return D.add(j);default:return D[U]=j}case s:switch(P){case 1:return D.splice(U,1);case 2:return D.delete(U);case 3:return D.delete(O.value);default:return delete D[U]}default:Xe(17,A)}}),x}function b(x){if(!jn(x))return x;if(Array.isArray(x))return x.map(b);if(Ti(x))return new Map(Array.from(x.entries()).map(([O,k])=>[O,b(k)]));if(Ii(x))return new Set(Array.from(x).map(b));const E=Object.create(Qn(x));for(const O in x)E[O]=b(x[O]);return gi(x,si)&&(E[si]=x[si]),E}function _(x){return er(x)?b(x):x}V4("Patches",{applyPatches_:m,generatePatches_:a,generateReplacementPatches_:h})}var Tt=new Z4,q4=Tt.produce;Tt.produceWithPatches.bind(Tt);Tt.setAutoFreeze.bind(Tt);Tt.setUseStrictShallowCopy.bind(Tt);var J4=Tt.applyPatches.bind(Tt);Tt.createDraft.bind(Tt);Tt.finishDraft.bind(Tt);function Q4(t){const n=t.value,r=[];if(n?.payload?.trackItemIds){const s=n.payload.trackItemIds;r.push(s),this.updateState({activeIds:r})}if(t.key===cc){const s=t.value?.payload.trackItemIds,a=we.cloneDeep(this.getState()),c=s?.length?s:a.activeIds,u=a.trackItemIds.filter(_=>!c.includes(_)),d=Object.fromEntries(Object.entries(a.trackItemDetailsMap).filter(([_])=>!c.includes(_))),h=up(a.tracks,c),m=Object.fromEntries(Object.entries(a.trackItemsMap).filter(([_])=>!c.includes(_))),b=Bt(m);this.updateState({trackItemIds:u,trackItemDetailsMap:d,activeIds:[],trackItemsMap:m,tracks:h,duration:b},{updateHistory:!0,kind:"remove"})}if(t.key===lc){const s=we.cloneDeep(this.getState()),a=[],c=t.value?.payload.trackItemIds||s.activeIds;if(c.length===0)return;c.forEach(d=>{const h=s.trackItemsMap[d],m=s.trackItemDetailsMap[d],b=Ze();a.push(b),s.trackItemsMap={...s.trackItemsMap,[b]:{...we.cloneDeep(h),id:b}},s.trackItemDetailsMap={...s.trackItemDetailsMap,[b]:{...we.cloneDeep(m)}},s.trackItemIds.push(b)});const u=s.tracks.map(d=>{const h={...d,id:Ze(),items:d.items.filter(m=>c.includes(m)).map(m=>{const b=c.indexOf(m);return a[b]})};return h.items.length?h:null}).filter(Boolean);s.tracks.unshift(...u),this.updateState({trackItemDetailsMap:s.trackItemDetailsMap,tracks:s.tracks,trackItemIds:s.trackItemIds,trackItemsMap:s.trackItemsMap},{updateHistory:!0,kind:"update"})}if(t.key===uc){const s=we.cloneDeep(this.getState()),a=t.value?.options.time;if(s.activeIds.length!==1)return;const c=s.activeIds[0],u=s.trackItemsMap[c];if(a<=u.display.from||a>=u.display.to)return;const d=Ze(),h={...u,id:d,display:{from:a,to:u.display.to},trim:{from:a,to:u.display.to}};s.trackItemsMap[c].display.to=a,s.trackItemsMap[d]=h,s.trackItemDetailsMap[d]=s.trackItemDetailsMap[c],s.trackItemIds.push(d),s.tracks.forEach(m=>{m.items.includes(c)&&m.items.push(d)}),this.updateState({trackItemsMap:s.trackItemsMap,trackItemDetailsMap:s.trackItemDetailsMap,trackItemIds:s.trackItemIds,tracks:s.tracks},{updateHistory:!0,kind:"update"})}}async function eI(t){if(t.key==="scene:load"){const n=t.value?.payload,r=n.size,s=n.trackItemIds,a=n.trackItemsMap,c=n.trackItemDetailsMap;if(!s)return;const u=s?.map(async h=>{try{const m=c[h],b=a[h];if(m.type==="text"){const _=await Ic({id:h,details:m.details,...b},{size:r}),{details:x,...E}=_;c[h]={type:"text",details:x},a[h]=E}return!0}catch{return!1}});await Promise.all(u);const d=Bt(a);this.updateState({...n,trackItemsMap:a,duration:d})}}async function tI(t){const n=we.cloneDeep(this.getState()),r=t.value?.options?.trackId,s=t.value?.options?.trackIndex;let a=[],c;if(t.key===Ar){c="video";const d=await fp(t.value?.payload,{size:n.size}),{details:h,...m}=d;n.trackItemDetailsMap[m.id]={type:c,details:h},n.trackItemsMap[m.id]=m,n.trackItemIds.push(m.id),a=[m.id]}if(t.key===Rr){c="image";const d=await dp(t.value?.payload,{size:n.size}),{details:h,...m}=d;n.trackItemDetailsMap[m.id]={type:c,details:h},n.trackItemsMap[m.id]=m,n.trackItemIds.push(m.id),a=[m.id]}if(t.key===kr){c="audio";const d=await hp(t.value?.payload),{details:h,...m}=d;n.trackItemDetailsMap[m.id]={type:c,details:h},n.trackItemsMap[m.id]=m,n.trackItemIds.push(m.id),a=[m.id]}if(t.key===sc){c="text";const{details:d,...h}=await Ic(t.value?.payload??void 0,{size:n.size});n.trackItemDetailsMap[h.id]={type:c,details:d},n.trackItemsMap[h.id]=h,n.trackItemIds.push(h.id),a.push(h.id)}const u=nI(a,n.tracks,n.trackItemsMap,r,s);if(u.trackId)n.tracks.find(h=>h.id===u.trackId)?.items.push(...a);else if(u.trackIndex!==void 0){const d=qd(c,a);n.tracks.splice(u.trackIndex,0,d)}else{const d=qd(c,a);n.tracks.unshift(d)}n.duration=Bt(n.trackItemsMap),this.updateState({trackItemIds:n.trackItemIds,trackItemDetailsMap:n.trackItemDetailsMap,trackItemsMap:n.trackItemsMap,tracks:n.tracks,duration:n.duration,structure:n.structure},{updateHistory:!0,kind:"add"})}function qd(t,n){return{id:Ze(),accepts:["text","audio","helper","video","image"],type:t,items:n,magnetic:!1,static:!1}}const nI=(t,n,r,s,a)=>{if(s===void 0&&a===void 0)return{trackId:void 0,trackIndex:void 0};const c=a!==void 0?n[Math.max(0,Math.min(a,n.length-1))]:n.find(h=>h.id===s);if(!c)return{trackId:void 0,trackIndex:a!==void 0?Math.max(0,Math.min(a,n.length-1)):void 0};const u=c.items.map(h=>r[h]),d=t.map(h=>r[h]);for(const h of u){const m=h.display.from,b=h.display.to;for(const _ of d){const x=_.display.from;if(!(_.display.to<=m||x>=b))return{trackId:void 0,trackIndex:n.indexOf(c)}}}return{trackId:c.id,trackIndex:n.indexOf(c)}},Jd=["tracks","trackItemsMap","trackItemDetailsMap","transitionIds","transitionsMap","trackItemIds"],rI={size:{width:1080,height:1920},tracks:[],trackItemIds:[],trackItemsMap:{},transitionIds:[],transitionsMap:{},scale:{unit:1,zoom:1,segments:1,index:1},duration:0,activeIds:[],trackItemDetailsMap:{},structure:[]};class f1{stateSubject;stateHistorySubject;prevState;undos;redos;listener;constructor(n){this.stateSubject=null,this.stateHistorySubject=null,this.prevState=null,this.undos=[],this.redos=[],this.listener=null;const r=n||rI;this.stateSubject=new Cd(r),this.stateHistorySubject=new Cd({handleRedo:!1,handleUndo:!1}),this.prevState=r,this.initListeners()}initListeners(){h1(this)}destroyListeners(){this.listener&&this.listener.unsubscribe()}purge(){this.destroyListeners()}updateHistory(n,r){const s=we.pick(n,Jd),a=we.pick(this.getState(),Jd),c=s1(a,s);c.length&&(this.undos.push({undos:c,type:r}),this.redos=[])}getStateHistory(){return this.stateHistorySubject.getValue()}subscribeHistory(n){return this.stateHistorySubject.subscribe(n)}getState(){return this.stateSubject.getValue()}subscribe(n){return this.stateSubject.subscribe(n)}updateState(n,r={updateHistory:!1,kind:void 0}){const s=this.getState(),a={...s,...n};if(!we.isEqual(s,a)){r.updateHistory&&this.updateHistory(a,r.kind);const{duration:c,trackItemsMap:u,...d}=s;this.prevState={...d,duration:this.prevState.duration,trackItemsMap:this.prevState.trackItemsMap},this.stateSubject.next(a)}}subscribeToSize(n){return this.stateSubject.asObservable().subscribe(r=>{we.isEqual(r.size,this.prevState.size)||n({size:r.size})})}subscribeToScale(n){return this.stateSubject.asObservable().subscribe(r=>{we.isEqual(r.scale,this.prevState.scale)||n({scale:r.scale})})}subscribeToUpdateTrackItem(n){return this.stateSubject.asObservable().subscribe(r=>{we.isEqual(r.trackItemsMap,this.prevState.trackItemsMap)||n({trackItemsMap:r.trackItemsMap})})}subscribeToUpdateItemDetails(n){return this.stateSubject.asObservable().subscribe(r=>{we.isEqual(r.trackItemDetailsMap,this.prevState.trackItemDetailsMap)||n({trackItemDetailsMap:r.trackItemDetailsMap})})}subscribeToDuration(n){return this.stateSubject.asObservable().subscribe(r=>{r.duration!==this.prevState.duration&&n({duration:r.duration})})}subscribeToHistory(n){return this.stateHistorySubject.asObservable().subscribe(r=>{if(r.handleRedo){const s=this.undos[this.undos.length-1]?.type;s==="update"&&n({...this.getState(),type:s}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}if(r.handleUndo){const s=this.redos[this.redos.length-1]?.type;s==="update"&&n({...this.getState(),type:s}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}})}subscribeToAddOrRemoveItems(n){return this.stateSubject.asObservable().subscribe(r=>{(!r.trackItemIds?.every(s=>this.prevState.trackItemIds?.includes(s))||!we.isEqual(r.tracks,this.prevState.tracks))&&n({trackItemIds:r.trackItemIds})})}subscribeToActiveIds(n){return this.stateSubject.asObservable().subscribe(r=>{we.isEqual(r.activeIds,this.prevState.activeIds)||n({activeIds:r.activeIds})})}subscribeToTracks(n){return this.stateSubject.asObservable().subscribe(r=>{(!we.isEqual(r.tracks,this.prevState.tracks)||!we.isEqual(r.trackItemIds,this.prevState.trackItemIds)||!we.isEqual(r.trackItemsMap,this.prevState.trackItemsMap)||!we.isEqual(r.transitionIds,this.prevState.transitionIds)||!we.isEqual(r.transitionsMap,this.prevState.transitionsMap)||!we.isEqual(r.trackItemDetailsMap,this.prevState.trackItemDetailsMap))&&n({tracks:r.tracks,trackItemIds:r.trackItemIds,trackItemsMap:r.trackItemsMap,transitionIds:r.transitionIds,transitionsMap:r.transitionsMap,trackItemDetailsMap:r.trackItemDetailsMap})})}undo(){const n=this.undos.pop(),r=n?.undos,s=n?.type;if(!r||!s)return;Kd();const{trackItemDetailsMap:a,trackItemIds:c,tracks:u,transitionIds:d,transitionsMap:h,trackItemsMap:m}=this.getState(),b=we.cloneDeep({trackItemDetailsMap:a,trackItemIds:c,tracks:u,transitionIds:d,transitionsMap:h,trackItemsMap:m}),_=[],x=[],E=[],O=[],k=[],A=[];r.forEach(V=>{let he;const Ie=V.path.slice(1);V.type==="CREATE"?he={path:Ie,op:"remove",value:V.value}:V.type==="CHANGE"?he={path:Ie,op:"replace",value:V.oldValue}:he={path:Ie,op:"add",value:V.oldValue},V.path.includes("trackItemIds")?E.push(he):V.path.includes("transitionIds")?x.push(he):V.path.includes("trackItemsMap")?k.push(he):V.path.includes("transitionsMap")?O.push(he):V.path.includes("tracks")?_.push(he):V.path.includes("trackItemDetailsMap")&&A.push(he)});const D=this.applyPatch(b.tracks,_),P=this.applyPatch(b.transitionIds,x),j=this.applyPatch(b.trackItemIds,E),U=this.applyPatch(b.transitionsMap,O),J=this.applyPatch(b.trackItemsMap,k),K=this.applyPatch(b.trackItemDetailsMap,A),Q=we.cloneDeep({tracks:D,transitionIds:P,trackItemIds:j,transitionsMap:U,trackItemsMap:J,trackItemDetailsMap:K}),q=we.cloneDeep(this.getState()),X={...q,...Q};this.prevState=q;const te={redos:r,type:s};this.redos.push(te);const ne=Bt(X.trackItemsMap);this.stateSubject.next({...X,duration:ne}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!0})}redo(){const n=this.redos.pop();if(!n?.redos||!n?.type)return;Kd();const r=this.getState(),{trackItemDetailsMap:s,trackItemIds:a,tracks:c,transitionIds:u,transitionsMap:d,trackItemsMap:h}=r,m=we.cloneDeep({trackItemDetailsMap:s,trackItemIds:a,tracks:c,transitionIds:u,transitionsMap:d,trackItemsMap:h}),b=[],_=[],x=[],E=[],O=[],k=[];n.redos.forEach(U=>{const J=U.path.slice(1);let K={};switch(U.type){case"CREATE":K={path:J,op:"add",value:U.value};break;case"CHANGE":K={path:J,op:"replace",value:U.value};break;case"REMOVE":K={path:J,op:"remove",value:U.oldValue};break;default:return null}U.path.includes("trackItemIds")?x.push(K):U.path.includes("transitionIds")?_.push(K):U.path.includes("trackItemsMap")?O.push(K):U.path.includes("transitionsMap")?E.push(K):U.path.includes("trackItemDetailsMap")?k.push(K):b.push(K)});const A={tracks:this.applyPatch(m.tracks,b),transitionIds:this.applyPatch(m.transitionIds,_),trackItemIds:this.applyPatch(m.trackItemIds,x),transitionsMap:this.applyPatch(m.transitionsMap,E),trackItemsMap:this.applyPatch(m.trackItemsMap,O),trackItemDetailsMap:this.applyPatch(m.trackItemDetailsMap,k)},D=we.cloneDeep(A),P={...we.cloneDeep(r),...D};this.prevState=r,this.undos.push({undos:n.redos,type:n.type});const j=Bt(P.trackItemsMap);this.stateSubject.next({...P,duration:j}),this.stateHistorySubject.next({handleRedo:!0,handleUndo:!1})}applyPatch(n,r){return r.reverse().reduce((s,a)=>q4(s,c=>{J4(c,[a])}),n)}}function h1(t){const n=ve.subject.pipe(gn(({key:c})=>c.startsWith(fh))).subscribe(c=>{c.key===fc&&t.undo(),c.key===hc&&t.redo()}),r=ve.subject.pipe(gn(({key:c,value:u})=>c.startsWith(sh))).subscribe(c=>{tI.bind(t)(c)}),s=ve.subject.pipe(gn(({key:c,value:u})=>c.startsWith("scene"))).subscribe(async c=>{await eI.bind(t)(c)}),a=ve.subject.pipe(gn(({key:c})=>c.startsWith(uh))).subscribe(async c=>{Q4.bind(t)(c)});return()=>{n.unsubscribe(),r.unsubscribe(),a.unsubscribe(),s.unsubscribe()}}const p1=()=>{const{playerRef:t,fps:n,timeline:r,setState:s}=qt();G.useEffect(()=>{const c=ve.subject.pipe(gn(({key:u})=>u.startsWith(oh))).subscribe(u=>{if(u.key===ah){const{time:d}=u.value?.payload;t?.current?.seekTo(d/1e3*n)}else if(u.key===oc)t?.current?.play();else if(u.key===ac)t?.current?.pause();else if(u.key===lh)t?.current?.isPlaying()?t.current.pause():t?.current?.play();else if(u.key===ch){const{frames:d}=u.value?.payload;t?.current?.seekTo(Math.round(t.current.getCurrentFrame())+d)}});return()=>{c.unsubscribe()}},[t,n]),G.useEffect(()=>{const c=ve.subject.pipe(gn(({key:u})=>u.startsWith(dh))).subscribe(u=>{u.key===dc&&s({activeIds:u.value?.payload.activeIds})});return()=>{c.unsubscribe()}},[r])},iI=new f1,sI=()=>{const{playerRef:t}=qt();p1();const[n,r]=G.useState([]);return v.jsxs("div",{className:"relative flex h-screen w-screen flex-col bg-background ",children:[v.jsx(Yh,{}),v.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",flex:1,overflow:"hidden"},children:[v.jsx(k3,{}),v.jsx(Gh,{}),v.jsx(Jh,{})]}),v.jsx("div",{className:"h-70 w-full ",children:t&&v.jsx(i1,{stateManager:iI})})]})};exports.ACTIVE_CLONE=lc;exports.ACTIVE_DELETE=cc;exports.ACTIVE_PASTE=rw;exports.ACTIVE_PREFIX=uh;exports.ACTIVE_SET=nw;exports.ACTIVE_SPLIT=uc;exports.ADD_ANIMATION=Z5;exports.ADD_AUDIO=kr;exports.ADD_IMAGE=Rr;exports.ADD_MASK=Y5;exports.ADD_PLACEHOLDER=G5;exports.ADD_PREFIX=sh;exports.ADD_SUFFIX=U5;exports.ADD_TEXT=sc;exports.ADD_TRANSITION=X5;exports.ADD_VIDEO=Ar;exports.AUDIOS=Wh;exports.AppComponent=sI;exports.Audio=_p;exports.AudioObject=mn;exports.BASE_TIMELINE_ELEMENT_DURATION_MS=Zw;exports.Button=Le;exports.CanvasMixin=Qh;exports.DEFAULT_AUDIO_BITRATE=Qw;exports.DEFAULT_AUDIO_SAMPLE_RATE=Jw;exports.DEFAULT_BLUR=zS;exports.DEFAULT_BLUR_STEP=US;exports.DEFAULT_BRIGHTNESS=_S;exports.DEFAULT_BRIGHTNESS_STEP=yS;exports.DEFAULT_CONTRAST=MS;exports.DEFAULT_CONTRAST_STEP=OS;exports.DEFAULT_FADE_IN=lS;exports.DEFAULT_FADE_OUT=uS;exports.DEFAULT_FADE_STEP=cS;exports.DEFAULT_FLIP_X=gS;exports.DEFAULT_FLIP_Y=mS;exports.DEFAULT_FONT=Fa;exports.DEFAULT_FRAMERATE=Eh;exports.DEFAULT_MAX_BLUR=FS;exports.DEFAULT_MAX_BRIGHTNESS=bS;exports.DEFAULT_MAX_CONTRAST=RS;exports.DEFAULT_MAX_FADE=aS;exports.DEFAULT_MAX_OPACITY=PS;exports.DEFAULT_MAX_ROTATION=fS;exports.DEFAULT_MAX_SATURATION=SS;exports.DEFAULT_MAX_SPEED=WS;exports.DEFAULT_MAX_TEMPERATURE=ES;exports.DEFAULT_MAX_VOLUME=GS;exports.DEFAULT_MEDIA_PANEL_WIDTH=rS;exports.DEFAULT_MIN_BLUR=jS;exports.DEFAULT_MIN_BRIGHTNESS=vS;exports.DEFAULT_MIN_CONTRAST=kS;exports.DEFAULT_MIN_FADE=oS;exports.DEFAULT_MIN_OPACITY=DS;exports.DEFAULT_MIN_ROTATION=dS;exports.DEFAULT_MIN_SATURATION=wS;exports.DEFAULT_MIN_SPEED=HS;exports.DEFAULT_MIN_TEMPERATURE=IS;exports.DEFAULT_MIN_VOLUME=$S;exports.DEFAULT_OPACITY=NS;exports.DEFAULT_OPACITY_STEP=LS;exports.DEFAULT_PREVIEW_HEIGHT=tS;exports.DEFAULT_PREVIEW_SCALE=yc;exports.DEFAULT_PREVIEW_WIDTH=eS;exports.DEFAULT_ROTATION=pS;exports.DEFAULT_ROTATION_STEP=hS;exports.DEFAULT_SATURATION=TS;exports.DEFAULT_SATURATION_STEP=xS;exports.DEFAULT_SETTINGS_PANEL_WIDTH=sS;exports.DEFAULT_SPEED=VS;exports.DEFAULT_SPEED_STEP=BS;exports.DEFAULT_TEMPERATURE=AS;exports.DEFAULT_TEMPERATURE_STEP=CS;exports.DEFAULT_VIDEO_HEIGHT=Ih;exports.DEFAULT_VIDEO_MAX_BITRATE=qw;exports.DEFAULT_VIDEO_MIN_BITRATE=Kw;exports.DEFAULT_VIDEO_WIDTH=Th;exports.DEFAULT_VOLUME=XS;exports.DEFAULT_VOLUME_STEP=YS;exports.DEFAULT_WEIGHT=Xw;exports.DRAG_END=ci;exports.DRAG_PREFIX=ph;exports.DRAG_START=gc;exports.Draggable=yi;exports.DroppableArea=wh;exports.EDIT_OBJECT=q5;exports.EDIT_PREFIX=K5;exports.EDIT_SHAPE=Q5;exports.EDIT_TEXT=J5;exports.ENTER_EDIT_MODE=ew;exports.FRAME_INTERVAL=Ch;exports.GIANT_ICON_SIZE=Hw;exports.HISTORY_PREFIX=fh;exports.HISTORY_REDO=hc;exports.HISTORY_RESET=vw;exports.HISTORY_UNDO=fc;exports.Header=Hh;exports.Helper=Tp;exports.HelperObject=Mr;exports.IMAGES=Bh;exports.Image=Sp;exports.ImageObject=Bs;exports.LARGER_FONT_SIZE=$w;exports.LARGE_FONT_SIZE=Gw;exports.LARGE_ICON_SIZE=Ww;exports.LAYER_CLONE=hw;exports.LAYER_COPY=dw;exports.LAYER_CUT=gw;exports.LAYER_DELETE=mw;exports.LAYER_EDITING_NAME=uw;exports.LAYER_HIDDEN=sw;exports.LAYER_LOCKED=iw;exports.LAYER_MOVE=ow;exports.LAYER_PASTE=fw;exports.LAYER_PREFIX=dh;exports.LAYER_RENAME=lw;exports.LAYER_SELECT=aw;exports.LAYER_SELECTION=dc;exports.LAYER_SEND_TO=cw;exports.LAYER_SPLIT=pw;exports.MAX_MEDIA_PANEL_WIDTH=iS;exports.MIN_MEDIA_PANEL_WIDTH=nS;exports.MenuItem=Gh;exports.NORMAL_FONT_SIZE=Yw;exports.NORMAL_ICON_SIZE=Bw;exports.NavbarComponent=Yh;exports.PLAYER_PAUSE=ac;exports.PLAYER_PLAY=oc;exports.PLAYER_PREFIX=oh;exports.PLAYER_SEEK=ah;exports.PLAYER_SEEK_BY=ch;exports.PLAYER_SEEK_TO=tw;exports.PLAYER_TOGGLE_PLAY=lh;exports.PREVIEW_FRAME_WIDTH=_i;exports.Placeholder=Tr;exports.Player=Zh;exports.PlayheadComponent=Kh;exports.PreviewTrackItem=fi;exports.RulerComponent=qh;exports.SECONDARY_FONT=xh;exports.SMALL_FONT_SIZE=Sh;exports.SMALL_ICON_SIZE=Vw;exports.STATE_CHANGED=$5;exports.STATE_PREFIX=V5;exports.Scene=Jh;exports.SceneBoard=zw;exports.ScrollArea=rr;exports.ScrollBar=tc;exports.SequenceItem=Xh;exports.Slider=Ef;exports.StateManager=f1;exports.TIMELINE_BOUNDING_CHANGED=mc;exports.TIMELINE_OFFSET_CANVAS_LEFT=zs;exports.TIMELINE_OFFSET_CANVAS_RIGHT=ja;exports.TIMELINE_OFFSET_X=Es;exports.TIMELINE_PREFIX=gh;exports.TIMELINE_SCALE_CHANGED=pc;exports.TIMELINE_SCALE_PREFIX=hh;exports.TIMELINE_ZOOM_LEVELS=Wt;exports.TRACKS_CHANGED=W5;exports.TRACK_ITEMS_CHANGED=B5;exports.TRACK_ITEMS_PREFIX=H5;exports.TRACK_PREFIX=z5;exports.TRANSITIONS=$h;exports.Tabs=ih;exports.TabsContent=Is;exports.TabsList=ic;exports.TabsTrigger=Ts;exports.Text=Ec;exports.TextObject=qn;exports.Timeline=Zs;exports.TimelineComponent=i1;exports.Track=xp;exports.TrackItemsMixin=Ip;exports.TrackObject=Ln;exports.TracksMixin=Ep;exports.Transition=Lt;exports.TransitionGuide=di;exports.TransitionsMixin=Cp;exports.UPLOADS=m3;exports.VIDEOS=Vh;exports.Video=wp;exports.VideoObject=ir;exports.addEventListeners=t1;exports.applyMixins=ip;exports.buttonVariants=uf;exports.calculateDisplayRange=lp;exports.calculateDuration=Bt;exports.calculatePosition=Vs;exports.calculateTimelineWidth=jh;exports.calculateTrim=cp;exports.cn=rt;exports.createAudioControls=np;exports.createControls=rp;exports.createMediaControls=tp;exports.createResizeControls=xc;exports.defaultColor=Si;exports.defaultSizes=bp;exports.filterAndCleanTracks=up;exports.findIndex=_c;exports.formatBytes=N_;exports.formatTimeToHumanReadable=ZS;exports.formatTimelineUnit=Ah;exports.frameToTimeString=kh;exports.getCurrentTime=Oh;exports.getFitZoomLevel=KS;exports.getMovingState=tx;exports.getNextZoom=Ph;exports.getNextZoomIndex=Nh;exports.getNextZoomLevel=Lh;exports.getOffset=ge;exports.getPreviousZoom=Dh;exports.getPreviousZoomIndex=JS;exports.getPreviousZoomLevel=Mh;exports.getTextHeight=ii;exports.getZoomByIndex=qS;exports.handleEvents=r1;exports.handleResize=ui;exports.loadAudio=sp;exports.loadAudioItem=hp;exports.loadAudioObject=pp;exports.loadFonts=Fh;exports.loadImage=op;exports.loadImageItem=dp;exports.loadImageObject=gp;exports.loadTextItem=Ic;exports.loadTextObject=vp;exports.loadVideo=ap;exports.loadVideoItem=fp;exports.loadVideoObject=mp;exports.mergeSizes=yp;exports.mergeTrackObjects=wc;exports.movingState=z;exports.positionOffsets=ep;exports.randomInt=QS;exports.removeEventListeners=n1;exports.removeItemsFromTrack=li;exports.renderControl=vn;exports.reorderTracksByIndex=Sc;exports.setupHistoryListeners=h1;exports.timeMsToUnits=Ve;exports.timeToString=Rh;exports.transitionStore=ze;exports.unitsToTimeMs=Pn;exports.updateMovingState=nx;exports.useCurrentPlayerFrame=Hs;exports.useIsDraggingOverTimeline=wi;exports.useLayoutStore=Ws;exports.useStore=qt;exports.useTimelineEvents=p1;exports.wrapResizeWithAnchorPosition=Tc;
