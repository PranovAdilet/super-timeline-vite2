"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const G=require("react"),Xy=require("react-dom"),kf=require("zustand"),Zy=require("@remotion/player"),Jt=require("remotion"),Rf=require("@radix-ui/themes"),B=require("fabric");function Ky(t){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>t[r]})}}return n.default=t,Object.freeze(n)}const C=Ky(G);var Ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nc={exports:{}},xi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd;function qy(){if(Hd)return xi;Hd=1;var t=G,n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,m){var b,w={},T=null,E=null;m!==void 0&&(T=""+m),h.key!==void 0&&(T=""+h.key),h.ref!==void 0&&(E=h.ref);for(b in h)s.call(h,b)&&!c.hasOwnProperty(b)&&(w[b]=h[b]);if(d&&d.defaultProps)for(b in h=d.defaultProps,h)w[b]===void 0&&(w[b]=h[b]);return{$$typeof:n,type:d,key:T,ref:E,props:w,_owner:a.current}}return xi.Fragment=r,xi.jsx=u,xi.jsxs=u,xi}var Ii={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd;function Jy(){return Wd||(Wd=1,process.env.NODE_ENV!=="production"&&function(){var t=G,n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),O=Symbol.iterator,k="@@iterator";function A(_){if(_===null||typeof _!="object")return null;var z=O&&_[O]||_[k];return typeof z=="function"?z:null}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function M(_){{for(var z=arguments.length,V=new Array(z>1?z-1:0),se=1;se<z;se++)V[se-1]=arguments[se];N("error",_,V)}}function N(_,z,V){{var se=D.ReactDebugCurrentFrame,Se=se.getStackAddendum();Se!==""&&(z+="%s",V=V.concat([Se]));var Ee=V.map(function(ve){return String(ve)});Ee.unshift("Warning: "+z),Function.prototype.apply.call(console[_],console,Ee)}}var U=!1,J=!1,q=!1,Q=!1,K=!1,X;X=Symbol.for("react.module.reference");function re(_){return!!(typeof _=="string"||typeof _=="function"||_===s||_===c||K||_===a||_===m||_===b||Q||_===E||U||J||q||typeof _=="object"&&_!==null&&(_.$$typeof===T||_.$$typeof===w||_.$$typeof===u||_.$$typeof===d||_.$$typeof===h||_.$$typeof===X||_.getModuleId!==void 0))}function ie(_,z,V){var se=_.displayName;if(se)return se;var Se=z.displayName||z.name||"";return Se!==""?V+"("+Se+")":V}function Y(_){return _.displayName||"Context"}function le(_){if(_==null)return null;if(typeof _.tag=="number"&&M("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case s:return"Fragment";case r:return"Portal";case c:return"Profiler";case a:return"StrictMode";case m:return"Suspense";case b:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case d:var z=_;return Y(z)+".Consumer";case u:var V=_;return Y(V._context)+".Provider";case h:return ie(_,_.render,"ForwardRef");case w:var se=_.displayName||null;return se!==null?se:le(_.type)||"Memo";case T:{var Se=_,Ee=Se._payload,ve=Se._init;try{return le(ve(Ee))}catch{return null}}}return null}var we=Object.assign,De=0,Te,Re,ke,Ye,ht,oe,Wn;function dr(){}dr.__reactDisabledLog=!0;function Xr(){{if(De===0){Te=console.log,Re=console.info,ke=console.warn,Ye=console.error,ht=console.group,oe=console.groupCollapsed,Wn=console.groupEnd;var _={configurable:!0,enumerable:!0,value:dr,writable:!0};Object.defineProperties(console,{info:_,log:_,warn:_,error:_,group:_,groupCollapsed:_,groupEnd:_})}De++}}function wn(){{if(De--,De===0){var _={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:we({},_,{value:Te}),info:we({},_,{value:Re}),warn:we({},_,{value:ke}),error:we({},_,{value:Ye}),group:we({},_,{value:ht}),groupCollapsed:we({},_,{value:oe}),groupEnd:we({},_,{value:Wn})})}De<0&&M("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Sn=D.ReactCurrentDispatcher,Zr;function Yt(_,z,V){{if(Zr===void 0)try{throw Error()}catch(Se){var se=Se.stack.trim().match(/\n( *(at )?)/);Zr=se&&se[1]||""}return`
`+Zr+_}}var rn=!1,fr;{var hr=typeof WeakMap=="function"?WeakMap:Map;fr=new hr}function Bn(_,z){if(!_||rn)return"";{var V=fr.get(_);if(V!==void 0)return V}var se;rn=!0;var Se=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ee;Ee=Sn.current,Sn.current=null,Xr();try{if(z){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(Xe){se=Xe}Reflect.construct(_,[],ve)}else{try{ve.call()}catch(Xe){se=Xe}_.call(ve.prototype)}}else{try{throw Error()}catch(Xe){se=Xe}_()}}catch(Xe){if(Xe&&se&&typeof Xe.stack=="string"){for(var pe=Xe.stack.split(`
`),et=se.stack.split(`
`),Fe=pe.length-1,ze=et.length-1;Fe>=1&&ze>=0&&pe[Fe]!==et[ze];)ze--;for(;Fe>=1&&ze>=0;Fe--,ze--)if(pe[Fe]!==et[ze]){if(Fe!==1||ze!==1)do if(Fe--,ze--,ze<0||pe[Fe]!==et[ze]){var pt=`
`+pe[Fe].replace(" at new "," at ");return _.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",_.displayName)),typeof _=="function"&&fr.set(_,pt),pt}while(Fe>=1&&ze>=0);break}}}finally{rn=!1,Sn.current=Ee,wn(),Error.prepareStackTrace=Se}var zt=_?_.displayName||_.name:"",on=zt?Yt(zt):"";return typeof _=="function"&&fr.set(_,on),on}function Ji(_,z,V){return Bn(_,!1)}function yt(_){var z=_.prototype;return!!(z&&z.isReactComponent)}function Xt(_,z,V){if(_==null)return"";if(typeof _=="function")return Bn(_,yt(_));if(typeof _=="string")return Yt(_);switch(_){case m:return Yt("Suspense");case b:return Yt("SuspenseList")}if(typeof _=="object")switch(_.$$typeof){case h:return Ji(_.render);case w:return Xt(_.type,z,V);case T:{var se=_,Se=se._payload,Ee=se._init;try{return Xt(Ee(Se),z,V)}catch{}}}return""}var Vn=Object.prototype.hasOwnProperty,kt={},Kr=D.ReactDebugCurrentFrame;function pr(_){if(_){var z=_._owner,V=Xt(_.type,_._source,z?z.type:null);Kr.setExtraStackFrame(V)}else Kr.setExtraStackFrame(null)}function $n(_,z,V,se,Se){{var Ee=Function.call.bind(Vn);for(var ve in _)if(Ee(_,ve)){var pe=void 0;try{if(typeof _[ve]!="function"){var et=Error((se||"React class")+": "+V+" type `"+ve+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof _[ve]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw et.name="Invariant Violation",et}pe=_[ve](z,ve,se,V,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Fe){pe=Fe}pe&&!(pe instanceof Error)&&(pr(Se),M("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",se||"React class",V,ve,typeof pe),pr(null)),pe instanceof Error&&!(pe.message in kt)&&(kt[pe.message]=!0,pr(Se),M("Failed %s type: %s",V,pe.message),pr(null))}}}var _t=Array.isArray;function sn(_){return _t(_)}function gr(_){{var z=typeof Symbol=="function"&&Symbol.toStringTag,V=z&&_[Symbol.toStringTag]||_.constructor.name||"Object";return V}}function Eo(_){try{return Tn(_),!1}catch{return!0}}function Tn(_){return""+_}function Qi(_){if(Eo(_))return M("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",gr(_)),Tn(_)}var xn=D.ReactCurrentOwner,In={key:!0,ref:!0,__self:!0,__source:!0},mr,vr;function qr(_){if(Vn.call(_,"ref")){var z=Object.getOwnPropertyDescriptor(_,"ref").get;if(z&&z.isReactWarning)return!1}return _.ref!==void 0}function Jr(_){if(Vn.call(_,"key")){var z=Object.getOwnPropertyDescriptor(_,"key").get;if(z&&z.isReactWarning)return!1}return _.key!==void 0}function Qr(_,z){typeof _.ref=="string"&&xn.current}function ei(_,z){{var V=function(){mr||(mr=!0,M("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",z))};V.isReactWarning=!0,Object.defineProperty(_,"key",{get:V,configurable:!0})}}function ti(_,z){{var V=function(){vr||(vr=!0,M("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",z))};V.isReactWarning=!0,Object.defineProperty(_,"ref",{get:V,configurable:!0})}}var ni=function(_,z,V,se,Se,Ee,ve){var pe={$$typeof:n,type:_,key:z,ref:V,props:ve,_owner:Ee};return pe._store={},Object.defineProperty(pe._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(pe,"_self",{configurable:!1,enumerable:!1,writable:!1,value:se}),Object.defineProperty(pe,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Se}),Object.freeze&&(Object.freeze(pe.props),Object.freeze(pe)),pe};function ri(_,z,V,se,Se){{var Ee,ve={},pe=null,et=null;V!==void 0&&(Qi(V),pe=""+V),Jr(z)&&(Qi(z.key),pe=""+z.key),qr(z)&&(et=z.ref,Qr(z,Se));for(Ee in z)Vn.call(z,Ee)&&!In.hasOwnProperty(Ee)&&(ve[Ee]=z[Ee]);if(_&&_.defaultProps){var Fe=_.defaultProps;for(Ee in Fe)ve[Ee]===void 0&&(ve[Ee]=Fe[Ee])}if(pe||et){var ze=typeof _=="function"?_.displayName||_.name||"Unknown":_;pe&&ei(ve,ze),et&&ti(ve,ze)}return ni(_,pe,et,Se,se,xn.current,ve)}}var ii=D.ReactCurrentOwner,es=D.ReactDebugCurrentFrame;function En(_){if(_){var z=_._owner,V=Xt(_.type,_._source,z?z.type:null);es.setExtraStackFrame(V)}else es.setExtraStackFrame(null)}var br;br=!1;function yr(_){return typeof _=="object"&&_!==null&&_.$$typeof===n}function ts(){{if(ii.current){var _=le(ii.current.type);if(_)return`

Check the render method of \``+_+"`."}return""}}function Co(_){return""}var ns={};function Ao(_){{var z=ts();if(!z){var V=typeof _=="string"?_:_.displayName||_.name;V&&(z=`

Check the top-level render call using <`+V+">.")}return z}}function si(_,z){{if(!_._store||_._store.validated||_.key!=null)return;_._store.validated=!0;var V=Ao(z);if(ns[V])return;ns[V]=!0;var se="";_&&_._owner&&_._owner!==ii.current&&(se=" It was passed a child from "+le(_._owner.type)+"."),En(_),M('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',V,se),En(null)}}function rs(_,z){{if(typeof _!="object")return;if(sn(_))for(var V=0;V<_.length;V++){var se=_[V];yr(se)&&si(se,z)}else if(yr(_))_._store&&(_._store.validated=!0);else if(_){var Se=A(_);if(typeof Se=="function"&&Se!==_.entries)for(var Ee=Se.call(_),ve;!(ve=Ee.next()).done;)yr(ve.value)&&si(ve.value,z)}}}function ko(_){{var z=_.type;if(z==null||typeof z=="string")return;var V;if(typeof z=="function")V=z.propTypes;else if(typeof z=="object"&&(z.$$typeof===h||z.$$typeof===w))V=z.propTypes;else return;if(V){var se=le(z);$n(V,_.props,"prop",se,_)}else if(z.PropTypes!==void 0&&!br){br=!0;var Se=le(z);M("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Se||"Unknown")}typeof z.getDefaultProps=="function"&&!z.getDefaultProps.isReactClassApproved&&M("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ro(_){{for(var z=Object.keys(_.props),V=0;V<z.length;V++){var se=z[V];if(se!=="children"&&se!=="key"){En(_),M("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",se),En(null);break}}_.ref!==null&&(En(_),M("Invalid attribute `ref` supplied to `React.Fragment`."),En(null))}}var _r={};function is(_,z,V,se,Se,Ee){{var ve=re(_);if(!ve){var pe="";(_===void 0||typeof _=="object"&&_!==null&&Object.keys(_).length===0)&&(pe+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var et=Co();et?pe+=et:pe+=ts();var Fe;_===null?Fe="null":sn(_)?Fe="array":_!==void 0&&_.$$typeof===n?(Fe="<"+(le(_.type)||"Unknown")+" />",pe=" Did you accidentally export a JSX literal instead of a component?"):Fe=typeof _,M("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Fe,pe)}var ze=ri(_,z,V,Se,Ee);if(ze==null)return ze;if(ve){var pt=z.children;if(pt!==void 0)if(se)if(sn(pt)){for(var zt=0;zt<pt.length;zt++)rs(pt[zt],_);Object.freeze&&Object.freeze(pt)}else M("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else rs(pt,_)}if(Vn.call(z,"key")){var on=le(_),Xe=Object.keys(z).filter(function(Lo){return Lo!=="key"}),ai=Xe.length>0?"{key: someKey, "+Xe.join(": ..., ")+": ...}":"{key: someKey}";if(!_r[on+ai]){var Po=Xe.length>0?"{"+Xe.join(": ..., ")+": ...}":"{}";M(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ai,on,Po,on),_r[on+ai]=!0}}return _===s?Ro(ze):ko(ze),ze}}function oi(_,z,V){return is(_,z,V,!0)}function Oo(_,z,V){return is(_,z,V,!1)}var Mo=Oo,Do=oi;Ii.Fragment=s,Ii.jsx=Mo,Ii.jsxs=Do}()),Ii}process.env.NODE_ENV==="production"?nc.exports=qy():nc.exports=Jy();var v=nc.exports;function Bd(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function Of(...t){return n=>{let r=!1;const s=t.map(a=>{const c=Bd(a,n);return!r&&typeof c=="function"&&(r=!0),c});if(r)return()=>{for(let a=0;a<s.length;a++){const c=s[a];typeof c=="function"?c():Bd(t[a],null)}}}}function ut(...t){return C.useCallback(Of(...t),t)}var Mi=C.forwardRef((t,n)=>{const{children:r,...s}=t,a=C.Children.toArray(r),c=a.find(e_);if(c){const u=c.props.children,d=a.map(h=>h===c?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:h);return v.jsx(rc,{...s,ref:n,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return v.jsx(rc,{...s,ref:n,children:r})});Mi.displayName="Slot";var rc=C.forwardRef((t,n)=>{const{children:r,...s}=t;if(C.isValidElement(r)){const a=n_(r),c=t_(s,r.props);return r.type!==C.Fragment&&(c.ref=n?Of(n,a):a),C.cloneElement(r,c)}return C.Children.count(r)>1?C.Children.only(null):null});rc.displayName="SlotClone";var Qy=({children:t})=>v.jsx(v.Fragment,{children:t});function e_(t){return C.isValidElement(t)&&t.type===Qy}function t_(t,n){const r={...n};for(const s in n){const a=t[s],c=n[s];/^on[A-Z]/.test(s)?a&&c?r[s]=(...d)=>{c(...d),a(...d)}:a&&(r[s]=a):s==="style"?r[s]={...a,...c}:s==="className"&&(r[s]=[a,c].filter(Boolean).join(" "))}return{...t,...r}}function n_(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Mf(t){var n,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=Mf(t[n]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Df(){for(var t,n,r=0,s="",a=arguments.length;r<a;r++)(t=arguments[r])&&(n=Mf(t))&&(s&&(s+=" "),s+=n);return s}const Vd=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$d=Df,r_=(t,n)=>r=>{var s;if(n?.variants==null)return $d(t,r?.class,r?.className);const{variants:a,defaultVariants:c}=n,u=Object.keys(a).map(m=>{const b=r?.[m],w=c?.[m];if(b===null)return null;const T=Vd(b)||Vd(w);return a[m][T]}),d=r&&Object.entries(r).reduce((m,b)=>{let[w,T]=b;return T===void 0||(m[w]=T),m},{}),h=n==null||(s=n.compoundVariants)===null||s===void 0?void 0:s.reduce((m,b)=>{let{class:w,className:T,...E}=b;return Object.entries(E).every(O=>{let[k,A]=O;return Array.isArray(A)?A.includes({...c,...d}[k]):{...c,...d}[k]===A})?[...m,w,T]:m},[]);return $d(t,u,h,r?.class,r?.className)},Ec="-",i_=t=>{const n=o_(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:u=>{const d=u.split(Ec);return d[0]===""&&d.length!==1&&d.shift(),Pf(d,n)||s_(u)},getConflictingClassGroupIds:(u,d)=>{const h=r[u]||[];return d&&s[u]?[...h,...s[u]]:h}}},Pf=(t,n)=>{if(t.length===0)return n.classGroupId;const r=t[0],s=n.nextPart.get(r),a=s?Pf(t.slice(1),s):void 0;if(a)return a;if(n.validators.length===0)return;const c=t.join(Ec);return n.validators.find(({validator:u})=>u(c))?.classGroupId},Gd=/^\[(.+)\]$/,s_=t=>{if(Gd.test(t)){const n=Gd.exec(t)[1],r=n?.substring(0,n.indexOf(":"));if(r)return"arbitrary.."+r}},o_=t=>{const{theme:n,prefix:r}=t,s={nextPart:new Map,validators:[]};return c_(Object.entries(t.classGroups),r).forEach(([c,u])=>{ic(u,s,c,n)}),s},ic=(t,n,r,s)=>{t.forEach(a=>{if(typeof a=="string"){const c=a===""?n:Yd(n,a);c.classGroupId=r;return}if(typeof a=="function"){if(a_(a)){ic(a(s),n,r,s);return}n.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([c,u])=>{ic(u,Yd(n,c),r,s)})})},Yd=(t,n)=>{let r=t;return n.split(Ec).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},a_=t=>t.isThemeGetter,c_=(t,n)=>n?t.map(([r,s])=>{const a=s.map(c=>typeof c=="string"?n+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([u,d])=>[n+u,d])):c);return[r,a]}):t,l_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,r=new Map,s=new Map;const a=(c,u)=>{r.set(c,u),n++,n>t&&(n=0,s=r,r=new Map)};return{get(c){let u=r.get(c);if(u!==void 0)return u;if((u=s.get(c))!==void 0)return a(c,u),u},set(c,u){r.has(c)?r.set(c,u):a(c,u)}}},Lf="!",u_=t=>{const{separator:n,experimentalParseClassName:r}=t,s=n.length===1,a=n[0],c=n.length,u=d=>{const h=[];let m=0,b=0,w;for(let A=0;A<d.length;A++){let D=d[A];if(m===0){if(D===a&&(s||d.slice(A,A+c)===n)){h.push(d.slice(b,A)),b=A+c;continue}if(D==="/"){w=A;continue}}D==="["?m++:D==="]"&&m--}const T=h.length===0?d:d.substring(b),E=T.startsWith(Lf),O=E?T.substring(1):T,k=w&&w>b?w-b:void 0;return{modifiers:h,hasImportantModifier:E,baseClassName:O,maybePostfixModifierPosition:k}};return r?d=>r({className:d,parseClassName:u}):u},d_=t=>{if(t.length<=1)return t;const n=[];let r=[];return t.forEach(s=>{s[0]==="["?(n.push(...r.sort(),s),r=[]):r.push(s)}),n.push(...r.sort()),n},f_=t=>({cache:l_(t.cacheSize),parseClassName:u_(t),...i_(t)}),h_=/\s+/,p_=(t,n)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=n,c=[],u=t.trim().split(h_);let d="";for(let h=u.length-1;h>=0;h-=1){const m=u[h],{modifiers:b,hasImportantModifier:w,baseClassName:T,maybePostfixModifierPosition:E}=r(m);let O=!!E,k=s(O?T.substring(0,E):T);if(!k){if(!O){d=m+(d.length>0?" "+d:d);continue}if(k=s(T),!k){d=m+(d.length>0?" "+d:d);continue}O=!1}const A=d_(b).join(":"),D=w?A+Lf:A,M=D+k;if(c.includes(M))continue;c.push(M);const N=a(k,O);for(let U=0;U<N.length;++U){const J=N[U];c.push(D+J)}d=m+(d.length>0?" "+d:d)}return d};function g_(){let t=0,n,r,s="";for(;t<arguments.length;)(n=arguments[t++])&&(r=jf(n))&&(s&&(s+=" "),s+=r);return s}const jf=t=>{if(typeof t=="string")return t;let n,r="";for(let s=0;s<t.length;s++)t[s]&&(n=jf(t[s]))&&(r&&(r+=" "),r+=n);return r};function m_(t,...n){let r,s,a,c=u;function u(h){const m=n.reduce((b,w)=>w(b),t());return r=f_(m),s=r.cache.get,a=r.cache.set,c=d,d(h)}function d(h){const m=s(h);if(m)return m;const b=p_(h,r);return a(h,b),b}return function(){return c(g_.apply(null,arguments))}}const Le=t=>{const n=r=>r[t]||[];return n.isThemeGetter=!0,n},Nf=/^\[(?:([a-z-]+):)?(.+)\]$/i,v_=/^\d+\/\d+$/,b_=new Set(["px","full","screen"]),y_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,__=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,w_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,S_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mn=t=>jr(t)||b_.has(t)||v_.test(t),jn=t=>Ur(t,"length",O_),jr=t=>!!t&&!Number.isNaN(Number(t)),Ga=t=>Ur(t,"number",jr),Ei=t=>!!t&&Number.isInteger(Number(t)),x_=t=>t.endsWith("%")&&jr(t.slice(0,-1)),de=t=>Nf.test(t),Nn=t=>y_.test(t),I_=new Set(["length","size","percentage"]),E_=t=>Ur(t,I_,Ff),C_=t=>Ur(t,"position",Ff),A_=new Set(["image","url"]),k_=t=>Ur(t,A_,D_),R_=t=>Ur(t,"",M_),Ci=()=>!0,Ur=(t,n,r)=>{const s=Nf.exec(t);return s?s[1]?typeof n=="string"?s[1]===n:n.has(s[1]):r(s[2]):!1},O_=t=>__.test(t)&&!w_.test(t),Ff=()=>!1,M_=t=>S_.test(t),D_=t=>T_.test(t),P_=()=>{const t=Le("colors"),n=Le("spacing"),r=Le("blur"),s=Le("brightness"),a=Le("borderColor"),c=Le("borderRadius"),u=Le("borderSpacing"),d=Le("borderWidth"),h=Le("contrast"),m=Le("grayscale"),b=Le("hueRotate"),w=Le("invert"),T=Le("gap"),E=Le("gradientColorStops"),O=Le("gradientColorStopPositions"),k=Le("inset"),A=Le("margin"),D=Le("opacity"),M=Le("padding"),N=Le("saturate"),U=Le("scale"),J=Le("sepia"),q=Le("skew"),Q=Le("space"),K=Le("translate"),X=()=>["auto","contain","none"],re=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto",de,n],Y=()=>[de,n],le=()=>["",mn,jn],we=()=>["auto",jr,de],De=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Te=()=>["solid","dashed","dotted","double","none"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>["start","end","center","between","around","evenly","stretch"],Ye=()=>["","0",de],ht=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>[jr,de];return{cacheSize:500,separator:":",theme:{colors:[Ci],spacing:[mn,jn],blur:["none","",Nn,de],brightness:oe(),borderColor:[t],borderRadius:["none","","full",Nn,de],borderSpacing:Y(),borderWidth:le(),contrast:oe(),grayscale:Ye(),hueRotate:oe(),invert:Ye(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[x_,jn],inset:ie(),margin:ie(),opacity:oe(),padding:Y(),saturate:oe(),scale:oe(),sepia:Ye(),skew:oe(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[Nn]}],"break-after":[{"break-after":ht()}],"break-before":[{"break-before":ht()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...De(),de]}],overflow:[{overflow:re()}],"overflow-x":[{"overflow-x":re()}],"overflow-y":[{"overflow-y":re()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ei,de]}],basis:[{basis:ie()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:Ye()}],shrink:[{shrink:Ye()}],order:[{order:["first","last","none",Ei,de]}],"grid-cols":[{"grid-cols":[Ci]}],"col-start-end":[{col:["auto",{span:["full",Ei,de]},de]}],"col-start":[{"col-start":we()}],"col-end":[{"col-end":we()}],"grid-rows":[{"grid-rows":[Ci]}],"row-start-end":[{row:["auto",{span:[Ei,de]},de]}],"row-start":[{"row-start":we()}],"row-end":[{"row-end":we()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[T]}],"gap-x":[{"gap-x":[T]}],"gap-y":[{"gap-y":[T]}],"justify-content":[{justify:["normal",...ke()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ke(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ke(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[Q]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Q]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,n]}],"min-w":[{"min-w":[de,n,"min","max","fit"]}],"max-w":[{"max-w":[de,n,"none","full","min","max","fit","prose",{screen:[Nn]},Nn]}],h:[{h:[de,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,n,"auto","min","max","fit"]}],"font-size":[{text:["base",Nn,jn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ga]}],"font-family":[{font:[Ci]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",jr,Ga]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",mn,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[D]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[D]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",mn,jn]}],"underline-offset":[{"underline-offset":["auto",mn,de]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[D]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...De(),C_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",E_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},k_]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[O]}],"gradient-via-pos":[{via:[O]}],"gradient-to-pos":[{to:[O]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[D]}],"border-style":[{border:[...Te(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[D]}],"divide-style":[{divide:Te()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Te()]}],"outline-offset":[{"outline-offset":[mn,de]}],"outline-w":[{outline:[mn,jn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[D]}],"ring-offset-w":[{"ring-offset":[mn,jn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Nn,R_]}],"shadow-color":[{shadow:[Ci]}],opacity:[{opacity:[D]}],"mix-blend":[{"mix-blend":[...Re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Re()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Nn,de]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[b]}],invert:[{invert:[w]}],saturate:[{saturate:[N]}],sepia:[{sepia:[J]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[b]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[D]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[J]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[U]}],"scale-x":[{"scale-x":[U]}],"scale-y":[{"scale-y":[U]}],rotate:[{rotate:[Ei,de]}],"translate-x":[{"translate-x":[K]}],"translate-y":[{"translate-y":[K]}],"skew-x":[{"skew-x":[q]}],"skew-y":[{"skew-y":[q]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[mn,jn,Ga]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},L_=m_(P_);function ot(...t){return L_(Df(t))}function j_(t,n={}){const{decimals:r=0,sizeType:s="normal"}=n,a=["Bytes","KB","MB","GB","TB"],c=["Bytes","KiB","MiB","GiB","TiB"];if(t===0)return"0 Byte";const u=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,u)).toFixed(r)} ${s==="accurate"?c[u]??"Bytest":a[u]??"Bytes"}`}const Uf=r_("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ne=C.forwardRef(({className:t,variant:n,size:r,asChild:s=!1,...a},c)=>{const u=s?Mi:"button";return v.jsx(u,{className:ot(Uf({variant:n,size:r,className:t})),ref:c,...a})});Ne.displayName="Button";function Cc(t,[n,r]){return Math.min(r,Math.max(n,t))}function Be(t,n,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return n?.(a)}}function Vi(t,n=[]){let r=[];function s(c,u){const d=C.createContext(u),h=r.length;r=[...r,u];const m=w=>{const{scope:T,children:E,...O}=w,k=T?.[t]?.[h]||d,A=C.useMemo(()=>O,Object.values(O));return v.jsx(k.Provider,{value:A,children:E})};m.displayName=c+"Provider";function b(w,T){const E=T?.[t]?.[h]||d,O=C.useContext(E);if(O)return O;if(u!==void 0)return u;throw new Error(`\`${w}\` must be used within \`${c}\``)}return[m,b]}const a=()=>{const c=r.map(u=>C.createContext(u));return function(d){const h=d?.[t]||c;return C.useMemo(()=>({[`__scope${t}`]:{...d,[t]:h}}),[d,h])}};return a.scopeName=t,[s,N_(a,...n)]}function N_(...t){const n=t[0];if(t.length===1)return n;const r=()=>{const s=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const u=s.reduce((d,{useScope:h,scopeName:m})=>{const w=h(c)[`__scope${m}`];return{...d,...w}},{});return C.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return r.scopeName=n.scopeName,r}function Qt(t){const n=C.useRef(t);return C.useEffect(()=>{n.current=t}),C.useMemo(()=>(...r)=>n.current?.(...r),[])}function Ac({prop:t,defaultProp:n,onChange:r=()=>{}}){const[s,a]=F_({defaultProp:n,onChange:r}),c=t!==void 0,u=c?t:s,d=Qt(r),h=C.useCallback(m=>{if(c){const w=typeof m=="function"?m(t):m;w!==t&&d(w)}else a(m)},[c,t,a,d]);return[u,h]}function F_({defaultProp:t,onChange:n}){const r=C.useState(t),[s]=r,a=C.useRef(s),c=Qt(n);return C.useEffect(()=>{a.current!==s&&(c(s),a.current=s)},[s,a,c]),r}var U_=C.createContext(void 0);function ao(t){const n=C.useContext(U_);return t||n||"ltr"}function z_(t){const n=C.useRef({value:t,previous:t});return C.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var Di=globalThis?.document?C.useLayoutEffect:()=>{};function H_(t){const[n,r]=C.useState(void 0);return Di(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const c=a[0];let u,d;if("borderBoxSize"in c){const h=c.borderBoxSize,m=Array.isArray(h)?h[0]:h;u=m.inlineSize,d=m.blockSize}else u=t.offsetWidth,d=t.offsetHeight;r({width:u,height:d})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),n}var W_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],dt=W_.reduce((t,n)=>{const r=C.forwardRef((s,a)=>{const{asChild:c,...u}=s,d=c?Mi:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:a})});return r.displayName=`Primitive.${n}`,{...t,[n]:r}},{});function zf(t){const n=t+"CollectionProvider",[r,s]=Vi(n),[a,c]=r(n,{collectionRef:{current:null},itemMap:new Map}),u=E=>{const{scope:O,children:k}=E,A=G.useRef(null),D=G.useRef(new Map).current;return v.jsx(a,{scope:O,itemMap:D,collectionRef:A,children:k})};u.displayName=n;const d=t+"CollectionSlot",h=G.forwardRef((E,O)=>{const{scope:k,children:A}=E,D=c(d,k),M=ut(O,D.collectionRef);return v.jsx(Mi,{ref:M,children:A})});h.displayName=d;const m=t+"CollectionItemSlot",b="data-radix-collection-item",w=G.forwardRef((E,O)=>{const{scope:k,children:A,...D}=E,M=G.useRef(null),N=ut(O,M),U=c(m,k);return G.useEffect(()=>(U.itemMap.set(M,{ref:M,...D}),()=>void U.itemMap.delete(M))),v.jsx(Mi,{[b]:"",ref:N,children:A})});w.displayName=m;function T(E){const O=c(t+"CollectionConsumer",E);return G.useCallback(()=>{const A=O.collectionRef.current;if(!A)return[];const D=Array.from(A.querySelectorAll(`[${b}]`));return Array.from(O.itemMap.values()).sort((U,J)=>D.indexOf(U.ref.current)-D.indexOf(J.ref.current))},[O.collectionRef,O.itemMap])}return[{Provider:u,Slot:h,ItemSlot:w},T,s]}var Hf=["PageUp","PageDown"],Wf=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Bf={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},zr="Slider",[sc,B_,V_]=zf(zr),[Vf,oI]=Vi(zr,[V_]),[$_,co]=Vf(zr),$f=C.forwardRef((t,n)=>{const{name:r,min:s=0,max:a=100,step:c=1,orientation:u="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:m=[s],value:b,onValueChange:w=()=>{},onValueCommit:T=()=>{},inverted:E=!1,form:O,...k}=t,A=C.useRef(new Set),D=C.useRef(0),N=u==="horizontal"?G_:Y_,[U=[],J]=Ac({prop:b,defaultProp:m,onChange:ie=>{[...A.current][D.current]?.focus(),w(ie)}}),q=C.useRef(U);function Q(ie){const Y=J_(U,ie);re(ie,Y)}function K(ie){re(ie,D.current)}function X(){const ie=q.current[D.current];U[D.current]!==ie&&T(U)}function re(ie,Y,{commit:le}={commit:!1}){const we=n5(c),De=r5(Math.round((ie-s)/c)*c+s,we),Te=Cc(De,[s,a]);J((Re=[])=>{const ke=K_(Re,Te,Y);if(t5(ke,h*c)){D.current=ke.indexOf(Te);const Ye=String(ke)!==String(Re);return Ye&&le&&T(ke),Ye?ke:Re}else return Re})}return v.jsx($_,{scope:t.__scopeSlider,name:r,disabled:d,min:s,max:a,valueIndexToChangeRef:D,thumbs:A.current,values:U,orientation:u,form:O,children:v.jsx(sc.Provider,{scope:t.__scopeSlider,children:v.jsx(sc.Slot,{scope:t.__scopeSlider,children:v.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,...k,ref:n,onPointerDown:Be(k.onPointerDown,()=>{d||(q.current=U)}),min:s,max:a,inverted:E,onSlideStart:d?void 0:Q,onSlideMove:d?void 0:K,onSlideEnd:d?void 0:X,onHomeKeyDown:()=>!d&&re(s,0,{commit:!0}),onEndKeyDown:()=>!d&&re(a,U.length-1,{commit:!0}),onStepKeyDown:({event:ie,direction:Y})=>{if(!d){const De=Hf.includes(ie.key)||ie.shiftKey&&Wf.includes(ie.key)?10:1,Te=D.current,Re=U[Te],ke=c*De*Y;re(Re+ke,Te,{commit:!0})}}})})})})});$f.displayName=zr;var[Gf,Yf]=Vf(zr,{startEdge:"left",endEdge:"right",size:"width",direction:1}),G_=C.forwardRef((t,n)=>{const{min:r,max:s,dir:a,inverted:c,onSlideStart:u,onSlideMove:d,onSlideEnd:h,onStepKeyDown:m,...b}=t,[w,T]=C.useState(null),E=ut(n,N=>T(N)),O=C.useRef(void 0),k=ao(a),A=k==="ltr",D=A&&!c||!A&&c;function M(N){const U=O.current||w.getBoundingClientRect(),J=[0,U.width],Q=kc(J,D?[r,s]:[s,r]);return O.current=U,Q(N-U.left)}return v.jsx(Gf,{scope:t.__scopeSlider,startEdge:D?"left":"right",endEdge:D?"right":"left",direction:D?1:-1,size:"width",children:v.jsx(Xf,{dir:k,"data-orientation":"horizontal",...b,ref:E,style:{...b.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const U=M(N.clientX);u?.(U)},onSlideMove:N=>{const U=M(N.clientX);d?.(U)},onSlideEnd:()=>{O.current=void 0,h?.()},onStepKeyDown:N=>{const J=Bf[D?"from-left":"from-right"].includes(N.key);m?.({event:N,direction:J?-1:1})}})})}),Y_=C.forwardRef((t,n)=>{const{min:r,max:s,inverted:a,onSlideStart:c,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h,...m}=t,b=C.useRef(null),w=ut(n,b),T=C.useRef(void 0),E=!a;function O(k){const A=T.current||b.current.getBoundingClientRect(),D=[0,A.height],N=kc(D,E?[s,r]:[r,s]);return T.current=A,N(k-A.top)}return v.jsx(Gf,{scope:t.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:v.jsx(Xf,{"data-orientation":"vertical",...m,ref:w,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:k=>{const A=O(k.clientY);c?.(A)},onSlideMove:k=>{const A=O(k.clientY);u?.(A)},onSlideEnd:()=>{T.current=void 0,d?.()},onStepKeyDown:k=>{const D=Bf[E?"from-bottom":"from-top"].includes(k.key);h?.({event:k,direction:D?-1:1})}})})}),Xf=C.forwardRef((t,n)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:c,onHomeKeyDown:u,onEndKeyDown:d,onStepKeyDown:h,...m}=t,b=co(zr,r);return v.jsx(dt.span,{...m,ref:n,onKeyDown:Be(t.onKeyDown,w=>{w.key==="Home"?(u(w),w.preventDefault()):w.key==="End"?(d(w),w.preventDefault()):Hf.concat(Wf).includes(w.key)&&(h(w),w.preventDefault())}),onPointerDown:Be(t.onPointerDown,w=>{const T=w.target;T.setPointerCapture(w.pointerId),w.preventDefault(),b.thumbs.has(T)?T.focus():s(w)}),onPointerMove:Be(t.onPointerMove,w=>{w.target.hasPointerCapture(w.pointerId)&&a(w)}),onPointerUp:Be(t.onPointerUp,w=>{const T=w.target;T.hasPointerCapture(w.pointerId)&&(T.releasePointerCapture(w.pointerId),c(w))})})}),Zf="SliderTrack",Kf=C.forwardRef((t,n)=>{const{__scopeSlider:r,...s}=t,a=co(Zf,r);return v.jsx(dt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:n})});Kf.displayName=Zf;var oc="SliderRange",qf=C.forwardRef((t,n)=>{const{__scopeSlider:r,...s}=t,a=co(oc,r),c=Yf(oc,r),u=C.useRef(null),d=ut(n,u),h=a.values.length,m=a.values.map(T=>Qf(T,a.min,a.max)),b=h>1?Math.min(...m):0,w=100-Math.max(...m);return v.jsx(dt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:d,style:{...t.style,[c.startEdge]:b+"%",[c.endEdge]:w+"%"}})});qf.displayName=oc;var ac="SliderThumb",Jf=C.forwardRef((t,n)=>{const r=B_(t.__scopeSlider),[s,a]=C.useState(null),c=ut(n,d=>a(d)),u=C.useMemo(()=>s?r().findIndex(d=>d.ref.current===s):-1,[r,s]);return v.jsx(X_,{...t,ref:c,index:u})}),X_=C.forwardRef((t,n)=>{const{__scopeSlider:r,index:s,name:a,...c}=t,u=co(ac,r),d=Yf(ac,r),[h,m]=C.useState(null),b=ut(n,M=>m(M)),w=h?u.form||!!h.closest("form"):!0,T=H_(h),E=u.values[s],O=E===void 0?0:Qf(E,u.min,u.max),k=q_(s,u.values.length),A=T?.[d.size],D=A?Q_(A,O,d.direction):0;return C.useEffect(()=>{if(h)return u.thumbs.add(h),()=>{u.thumbs.delete(h)}},[h,u.thumbs]),v.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${O}% + ${D}px)`},children:[v.jsx(sc.ItemSlot,{scope:t.__scopeSlider,children:v.jsx(dt.span,{role:"slider","aria-label":t["aria-label"]||k,"aria-valuemin":u.min,"aria-valuenow":E,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...c,ref:b,style:E===void 0?{display:"none"}:t.style,onFocus:Be(t.onFocus,()=>{u.valueIndexToChangeRef.current=s})})}),w&&v.jsx(Z_,{name:a??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:E},s)]})});Jf.displayName=ac;var Z_=t=>{const{value:n,...r}=t,s=C.useRef(null),a=z_(n);return C.useEffect(()=>{const c=s.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==n&&h){const m=new Event("input",{bubbles:!0});h.call(c,n),c.dispatchEvent(m)}},[a,n]),v.jsx("input",{style:{display:"none"},...r,ref:s,defaultValue:n})};function K_(t=[],n,r){const s=[...t];return s[r]=n,s.sort((a,c)=>a-c)}function Qf(t,n,r){const c=100/(r-n)*(t-n);return Cc(c,[0,100])}function q_(t,n){return n>2?`Value ${t+1} of ${n}`:n===2?["Minimum","Maximum"][t]:void 0}function J_(t,n){if(t.length===1)return 0;const r=t.map(a=>Math.abs(a-n)),s=Math.min(...r);return r.indexOf(s)}function Q_(t,n,r){const s=t/2,c=kc([0,50],[0,s]);return(s-c(n)*r)*r}function e5(t){return t.slice(0,-1).map((n,r)=>t[r+1]-n)}function t5(t,n){if(n>0){const r=e5(t);return Math.min(...r)>=n}return!0}function kc(t,n){return r=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(t[1]-t[0]);return n[0]+s*(r-t[0])}}function n5(t){return(String(t).split(".")[1]||"").length}function r5(t,n){const r=Math.pow(10,n);return Math.round(t*r)/r}var eh=$f,i5=Kf,s5=qf,o5=Jf;const th=C.forwardRef(({className:t,...n},r)=>v.jsxs(eh,{ref:r,className:ot("relative flex w-full touch-none select-none items-center",t),...n,children:[v.jsx(i5,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:v.jsx(s5,{className:"absolute h-full bg-primary"})}),v.jsx(o5,{className:"block h-4 w-4 cursor-pointer rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));th.displayName=eh.displayName;function a5(t,n){return C.useReducer((r,s)=>n[r][s]??r,t)}var Hr=t=>{const{present:n,children:r}=t,s=c5(n),a=typeof r=="function"?r({present:s.isPresent}):C.Children.only(r),c=ut(s.ref,l5(a));return typeof r=="function"||s.isPresent?C.cloneElement(a,{ref:c}):null};Hr.displayName="Presence";function c5(t){const[n,r]=C.useState(),s=C.useRef({}),a=C.useRef(t),c=C.useRef("none"),u=t?"mounted":"unmounted",[d,h]=a5(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const m=$s(s.current);c.current=d==="mounted"?m:"none"},[d]),Di(()=>{const m=s.current,b=a.current;if(b!==t){const T=c.current,E=$s(m);t?h("MOUNT"):E==="none"||m?.display==="none"?h("UNMOUNT"):h(b&&T!==E?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,h]),Di(()=>{if(n){let m;const b=n.ownerDocument.defaultView??window,w=E=>{const k=$s(s.current).includes(E.animationName);if(E.target===n&&k&&(h("ANIMATION_END"),!a.current)){const A=n.style.animationFillMode;n.style.animationFillMode="forwards",m=b.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=A)})}},T=E=>{E.target===n&&(c.current=$s(s.current))};return n.addEventListener("animationstart",T),n.addEventListener("animationcancel",w),n.addEventListener("animationend",w),()=>{b.clearTimeout(m),n.removeEventListener("animationstart",T),n.removeEventListener("animationcancel",w),n.removeEventListener("animationend",w)}}else h("ANIMATION_END")},[n,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:C.useCallback(m=>{m&&(s.current=getComputedStyle(m)),r(m)},[])}}function $s(t){return t?.animationName||"none"}function l5(t){let n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function u5(t,n){return C.useReducer((r,s)=>n[r][s]??r,t)}var Rc="ScrollArea",[nh,aI]=Vi(Rc),[d5,Ut]=nh(Rc),rh=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:c=600,...u}=t,[d,h]=C.useState(null),[m,b]=C.useState(null),[w,T]=C.useState(null),[E,O]=C.useState(null),[k,A]=C.useState(null),[D,M]=C.useState(0),[N,U]=C.useState(0),[J,q]=C.useState(!1),[Q,K]=C.useState(!1),X=ut(n,ie=>h(ie)),re=ao(a);return v.jsx(d5,{scope:r,type:s,dir:re,scrollHideDelay:c,scrollArea:d,viewport:m,onViewportChange:b,content:w,onContentChange:T,scrollbarX:E,onScrollbarXChange:O,scrollbarXEnabled:J,onScrollbarXEnabledChange:q,scrollbarY:k,onScrollbarYChange:A,scrollbarYEnabled:Q,onScrollbarYEnabledChange:K,onCornerWidthChange:M,onCornerHeightChange:U,children:v.jsx(dt.div,{dir:re,...u,ref:X,style:{position:"relative","--radix-scroll-area-corner-width":D+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});rh.displayName=Rc;var ih="ScrollAreaViewport",sh=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,children:s,nonce:a,...c}=t,u=Ut(ih,r),d=C.useRef(null),h=ut(n,d,u.onViewportChange);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),v.jsx(dt.div,{"data-radix-scroll-area-viewport":"",...c,ref:h,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...t.style},children:v.jsx("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});sh.displayName=ih;var nn="ScrollAreaScrollbar",lo=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=Ut(nn,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:u}=a,d=t.orientation==="horizontal";return C.useEffect(()=>(d?c(!0):u(!0),()=>{d?c(!1):u(!1)}),[d,c,u]),a.type==="hover"?v.jsx(f5,{...s,ref:n,forceMount:r}):a.type==="scroll"?v.jsx(h5,{...s,ref:n,forceMount:r}):a.type==="auto"?v.jsx(oh,{...s,ref:n,forceMount:r}):a.type==="always"?v.jsx(Oc,{...s,ref:n}):null});lo.displayName=nn;var f5=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=Ut(nn,t.__scopeScrollArea),[c,u]=C.useState(!1);return C.useEffect(()=>{const d=a.scrollArea;let h=0;if(d){const m=()=>{window.clearTimeout(h),u(!0)},b=()=>{h=window.setTimeout(()=>u(!1),a.scrollHideDelay)};return d.addEventListener("pointerenter",m),d.addEventListener("pointerleave",b),()=>{window.clearTimeout(h),d.removeEventListener("pointerenter",m),d.removeEventListener("pointerleave",b)}}},[a.scrollArea,a.scrollHideDelay]),v.jsx(Hr,{present:r||c,children:v.jsx(oh,{"data-state":c?"visible":"hidden",...s,ref:n})})}),h5=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=Ut(nn,t.__scopeScrollArea),c=t.orientation==="horizontal",u=fo(()=>h("SCROLL_END"),100),[d,h]=u5("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(d==="idle"){const m=window.setTimeout(()=>h("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(m)}},[d,a.scrollHideDelay,h]),C.useEffect(()=>{const m=a.viewport,b=c?"scrollLeft":"scrollTop";if(m){let w=m[b];const T=()=>{const E=m[b];w!==E&&(h("SCROLL"),u()),w=E};return m.addEventListener("scroll",T),()=>m.removeEventListener("scroll",T)}},[a.viewport,c,h,u]),v.jsx(Hr,{present:r||d!=="hidden",children:v.jsx(Oc,{"data-state":d==="hidden"?"hidden":"visible",...s,ref:n,onPointerEnter:Be(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:Be(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),oh=C.forwardRef((t,n)=>{const r=Ut(nn,t.__scopeScrollArea),{forceMount:s,...a}=t,[c,u]=C.useState(!1),d=t.orientation==="horizontal",h=fo(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,b=r.viewport.offsetHeight<r.viewport.scrollHeight;u(d?m:b)}},10);return Nr(r.viewport,h),Nr(r.content,h),v.jsx(Hr,{present:s||c,children:v.jsx(Oc,{"data-state":c?"visible":"hidden",...a,ref:n})})}),Oc=C.forwardRef((t,n)=>{const{orientation:r="vertical",...s}=t,a=Ut(nn,t.__scopeScrollArea),c=C.useRef(null),u=C.useRef(0),[d,h]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=uh(d.viewport,d.content),b={...s,sizes:d,onSizesChange:h,hasThumb:m>0&&m<1,onThumbChange:T=>c.current=T,onThumbPointerUp:()=>u.current=0,onThumbPointerDown:T=>u.current=T};function w(T,E){return y5(T,u.current,d,E)}return r==="horizontal"?v.jsx(p5,{...b,ref:n,onThumbPositionChange:()=>{if(a.viewport&&c.current){const T=a.viewport.scrollLeft,E=Xd(T,d,a.dir);c.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:T=>{a.viewport&&(a.viewport.scrollLeft=T)},onDragScroll:T=>{a.viewport&&(a.viewport.scrollLeft=w(T,a.dir))}}):r==="vertical"?v.jsx(g5,{...b,ref:n,onThumbPositionChange:()=>{if(a.viewport&&c.current){const T=a.viewport.scrollTop,E=Xd(T,d);c.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:T=>{a.viewport&&(a.viewport.scrollTop=T)},onDragScroll:T=>{a.viewport&&(a.viewport.scrollTop=w(T))}}):null}),p5=C.forwardRef((t,n)=>{const{sizes:r,onSizesChange:s,...a}=t,c=Ut(nn,t.__scopeScrollArea),[u,d]=C.useState(),h=C.useRef(null),m=ut(n,h,c.onScrollbarXChange);return C.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),v.jsx(ch,{"data-orientation":"horizontal",...a,ref:m,sizes:r,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":uo(r)+"px",...t.style},onThumbPointerDown:b=>t.onThumbPointerDown(b.x),onDragScroll:b=>t.onDragScroll(b.x),onWheelScroll:(b,w)=>{if(c.viewport){const T=c.viewport.scrollLeft+b.deltaX;t.onWheelScroll(T),fh(T,w)&&b.preventDefault()}},onResize:()=>{h.current&&c.viewport&&u&&s({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Ks(u.paddingLeft),paddingEnd:Ks(u.paddingRight)}})}})}),g5=C.forwardRef((t,n)=>{const{sizes:r,onSizesChange:s,...a}=t,c=Ut(nn,t.__scopeScrollArea),[u,d]=C.useState(),h=C.useRef(null),m=ut(n,h,c.onScrollbarYChange);return C.useEffect(()=>{h.current&&d(getComputedStyle(h.current))},[h]),v.jsx(ch,{"data-orientation":"vertical",...a,ref:m,sizes:r,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":uo(r)+"px",...t.style},onThumbPointerDown:b=>t.onThumbPointerDown(b.y),onDragScroll:b=>t.onDragScroll(b.y),onWheelScroll:(b,w)=>{if(c.viewport){const T=c.viewport.scrollTop+b.deltaY;t.onWheelScroll(T),fh(T,w)&&b.preventDefault()}},onResize:()=>{h.current&&c.viewport&&u&&s({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Ks(u.paddingTop),paddingEnd:Ks(u.paddingBottom)}})}})}),[m5,ah]=nh(nn),ch=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:c,onThumbPointerUp:u,onThumbPointerDown:d,onThumbPositionChange:h,onDragScroll:m,onWheelScroll:b,onResize:w,...T}=t,E=Ut(nn,r),[O,k]=C.useState(null),A=ut(n,X=>k(X)),D=C.useRef(null),M=C.useRef(""),N=E.viewport,U=s.content-s.viewport,J=Qt(b),q=Qt(h),Q=fo(w,10);function K(X){if(D.current){const re=X.clientX-D.current.left,ie=X.clientY-D.current.top;m({x:re,y:ie})}}return C.useEffect(()=>{const X=re=>{const ie=re.target;O?.contains(ie)&&J(re,U)};return document.addEventListener("wheel",X,{passive:!1}),()=>document.removeEventListener("wheel",X,{passive:!1})},[N,O,U,J]),C.useEffect(q,[s,q]),Nr(O,Q),Nr(E.content,Q),v.jsx(m5,{scope:r,scrollbar:O,hasThumb:a,onThumbChange:Qt(c),onThumbPointerUp:Qt(u),onThumbPositionChange:q,onThumbPointerDown:Qt(d),children:v.jsx(dt.div,{...T,ref:A,style:{position:"absolute",...T.style},onPointerDown:Be(t.onPointerDown,X=>{X.button===0&&(X.target.setPointerCapture(X.pointerId),D.current=O.getBoundingClientRect(),M.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),K(X))}),onPointerMove:Be(t.onPointerMove,K),onPointerUp:Be(t.onPointerUp,X=>{const re=X.target;re.hasPointerCapture(X.pointerId)&&re.releasePointerCapture(X.pointerId),document.body.style.webkitUserSelect=M.current,E.viewport&&(E.viewport.style.scrollBehavior=""),D.current=null})})})}),Zs="ScrollAreaThumb",Mc=C.forwardRef((t,n)=>{const{forceMount:r,...s}=t,a=ah(Zs,t.__scopeScrollArea);return v.jsx(Hr,{present:r||a.hasThumb,children:v.jsx(v5,{ref:n,...s})})}),v5=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,style:s,...a}=t,c=Ut(Zs,r),u=ah(Zs,r),{onThumbPositionChange:d}=u,h=ut(n,w=>u.onThumbChange(w)),m=C.useRef(void 0),b=fo(()=>{m.current&&(m.current(),m.current=void 0)},100);return C.useEffect(()=>{const w=c.viewport;if(w){const T=()=>{if(b(),!m.current){const E=_5(w,d);m.current=E,d()}};return d(),w.addEventListener("scroll",T),()=>w.removeEventListener("scroll",T)}},[c.viewport,b,d]),v.jsx(dt.div,{"data-state":u.hasThumb?"visible":"hidden",...a,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Be(t.onPointerDownCapture,w=>{const E=w.target.getBoundingClientRect(),O=w.clientX-E.left,k=w.clientY-E.top;u.onThumbPointerDown({x:O,y:k})}),onPointerUp:Be(t.onPointerUp,u.onThumbPointerUp)})});Mc.displayName=Zs;var Dc="ScrollAreaCorner",lh=C.forwardRef((t,n)=>{const r=Ut(Dc,t.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?v.jsx(b5,{...t,ref:n}):null});lh.displayName=Dc;var b5=C.forwardRef((t,n)=>{const{__scopeScrollArea:r,...s}=t,a=Ut(Dc,r),[c,u]=C.useState(0),[d,h]=C.useState(0),m=!!(c&&d);return Nr(a.scrollbarX,()=>{const b=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(b),h(b)}),Nr(a.scrollbarY,()=>{const b=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(b),u(b)}),m?v.jsx(dt.div,{...s,ref:n,style:{width:c,height:d,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ks(t){return t?parseInt(t,10):0}function uh(t,n){const r=t/n;return isNaN(r)?0:r}function uo(t){const n=uh(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-r)*n;return Math.max(s,18)}function y5(t,n,r,s="ltr"){const a=uo(r),c=a/2,u=n||c,d=a-u,h=r.scrollbar.paddingStart+u,m=r.scrollbar.size-r.scrollbar.paddingEnd-d,b=r.content-r.viewport,w=s==="ltr"?[0,b]:[b*-1,0];return dh([h,m],w)(t)}function Xd(t,n,r="ltr"){const s=uo(n),a=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,c=n.scrollbar.size-a,u=n.content-n.viewport,d=c-s,h=r==="ltr"?[0,u]:[u*-1,0],m=Cc(t,h);return dh([0,u],[0,d])(m)}function dh(t,n){return r=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(t[1]-t[0]);return n[0]+s*(r-t[0])}}function fh(t,n){return t>0&&t<n}var _5=(t,n=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},s=0;return function a(){const c={left:t.scrollLeft,top:t.scrollTop},u=r.left!==c.left,d=r.top!==c.top;(u||d)&&n(),r=c,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function fo(t,n){const r=Qt(t),s=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(s.current),[]),C.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,n)},[r,n])}function Nr(t,n){const r=Qt(n);Di(()=>{let s=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(s),a.unobserve(t)}}},[t,r])}var qs=rh,cc=sh,Zd=lo,Kd=Mc,w5=lh;const cr=C.forwardRef(({className:t,children:n,...r},s)=>v.jsxs(qs,{ref:s,className:ot("relative overflow-hidden",t),...r,children:[v.jsx(cc,{className:"h-full w-full rounded-[inherit]",children:n}),v.jsx(Pc,{}),v.jsx(w5,{})]}));cr.displayName=qs.displayName;const Pc=C.forwardRef(({className:t,orientation:n="vertical",...r},s)=>v.jsx(lo,{ref:s,orientation:n,className:ot("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:v.jsx(Mc,{className:"relative flex-1 rounded-full bg-border"})}));Pc.displayName=lo.displayName;const $i=({children:t,renderCustomPreview:n,data:r={},shouldDisplayPreview:s=!0})=>{const[a,c]=G.useState(!1),[u,d]=G.useState({x:0,y:0}),h=G.useRef(null),m=E=>{c(!0),E.dataTransfer.setDragImage(new Image,0,0),E.dataTransfer.setData(JSON.stringify(r),JSON.stringify(r)),d({x:E.clientX,y:E.clientY})},b=()=>{c(!1)},w=E=>{a&&d({x:E.clientX,y:E.clientY})},T=G.cloneElement(t,{draggable:!0,onDragStart:m,onDragEnd:b,onDrag:w,style:{...t.props.style}});return v.jsxs(v.Fragment,{children:[T,a&&s&&n?Xy.createPortal(v.jsx("div",{ref:h,style:{position:"fixed",left:u.x,top:u.y,pointerEvents:"none",zIndex:9999,transform:"translate(-50%, -50%)"},children:n}),document.body):null]})};var S5=C.useId||(()=>{}),T5=0;function hh(t){const[n,r]=C.useState(S5());return Di(()=>{r(s=>s??String(T5++))},[t]),n?`radix-${n}`:""}var Ya="rovingFocusGroup.onEntryFocus",x5={bubbles:!1,cancelable:!0},ho="RovingFocusGroup",[lc,ph,I5]=zf(ho),[E5,gh]=Vi(ho,[I5]),[C5,A5]=E5(ho),mh=C.forwardRef((t,n)=>v.jsx(lc.Provider,{scope:t.__scopeRovingFocusGroup,children:v.jsx(lc.Slot,{scope:t.__scopeRovingFocusGroup,children:v.jsx(k5,{...t,ref:n})})}));mh.displayName=ho;var k5=C.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:b=!1,...w}=t,T=C.useRef(null),E=ut(n,T),O=ao(c),[k=null,A]=Ac({prop:u,defaultProp:d,onChange:h}),[D,M]=C.useState(!1),N=Qt(m),U=ph(r),J=C.useRef(!1),[q,Q]=C.useState(0);return C.useEffect(()=>{const K=T.current;if(K)return K.addEventListener(Ya,N),()=>K.removeEventListener(Ya,N)},[N]),v.jsx(C5,{scope:r,orientation:s,dir:O,loop:a,currentTabStopId:k,onItemFocus:C.useCallback(K=>A(K),[A]),onItemShiftTab:C.useCallback(()=>M(!0),[]),onFocusableItemAdd:C.useCallback(()=>Q(K=>K+1),[]),onFocusableItemRemove:C.useCallback(()=>Q(K=>K-1),[]),children:v.jsx(dt.div,{tabIndex:D||q===0?-1:0,"data-orientation":s,...w,ref:E,style:{outline:"none",...t.style},onMouseDown:Be(t.onMouseDown,()=>{J.current=!0}),onFocus:Be(t.onFocus,K=>{const X=!J.current;if(K.target===K.currentTarget&&X&&!D){const re=new CustomEvent(Ya,x5);if(K.currentTarget.dispatchEvent(re),!re.defaultPrevented){const ie=U().filter(Te=>Te.focusable),Y=ie.find(Te=>Te.active),le=ie.find(Te=>Te.id===k),De=[Y,le,...ie].filter(Boolean).map(Te=>Te.ref.current);yh(De,b)}}J.current=!1}),onBlur:Be(t.onBlur,()=>M(!1))})})}),vh="RovingFocusGroupItem",bh=C.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:c,...u}=t,d=hh(),h=c||d,m=A5(vh,r),b=m.currentTabStopId===h,w=ph(r),{onFocusableItemAdd:T,onFocusableItemRemove:E}=m;return C.useEffect(()=>{if(s)return T(),()=>E()},[s,T,E]),v.jsx(lc.ItemSlot,{scope:r,id:h,focusable:s,active:a,children:v.jsx(dt.span,{tabIndex:b?0:-1,"data-orientation":m.orientation,...u,ref:n,onMouseDown:Be(t.onMouseDown,O=>{s?m.onItemFocus(h):O.preventDefault()}),onFocus:Be(t.onFocus,()=>m.onItemFocus(h)),onKeyDown:Be(t.onKeyDown,O=>{if(O.key==="Tab"&&O.shiftKey){m.onItemShiftTab();return}if(O.target!==O.currentTarget)return;const k=M5(O,m.orientation,m.dir);if(k!==void 0){if(O.metaKey||O.ctrlKey||O.altKey||O.shiftKey)return;O.preventDefault();let D=w().filter(M=>M.focusable).map(M=>M.ref.current);if(k==="last")D.reverse();else if(k==="prev"||k==="next"){k==="prev"&&D.reverse();const M=D.indexOf(O.currentTarget);D=m.loop?D5(D,M+1):D.slice(M+1)}setTimeout(()=>yh(D))}})})})});bh.displayName=vh;var R5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function O5(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function M5(t,n,r){const s=O5(t.key,r);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return R5[s]}function yh(t,n=!1){const r=document.activeElement;for(const s of t)if(s===r||(s.focus({preventScroll:n}),document.activeElement!==r))return}function D5(t,n){return t.map((r,s)=>t[(n+s)%t.length])}var P5=mh,L5=bh,Lc="Tabs",[j5,cI]=Vi(Lc,[gh]),_h=gh(),[N5,jc]=j5(Lc),wh=C.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:c,orientation:u="horizontal",dir:d,activationMode:h="automatic",...m}=t,b=ao(d),[w,T]=Ac({prop:s,onChange:a,defaultProp:c});return v.jsx(N5,{scope:r,baseId:hh(),value:w,onValueChange:T,orientation:u,dir:b,activationMode:h,children:v.jsx(dt.div,{dir:b,"data-orientation":u,...m,ref:n})})});wh.displayName=Lc;var Sh="TabsList",Th=C.forwardRef((t,n)=>{const{__scopeTabs:r,loop:s=!0,...a}=t,c=jc(Sh,r),u=_h(r);return v.jsx(P5,{asChild:!0,...u,orientation:c.orientation,dir:c.dir,loop:s,children:v.jsx(dt.div,{role:"tablist","aria-orientation":c.orientation,...a,ref:n})})});Th.displayName=Sh;var xh="TabsTrigger",Ih=C.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...c}=t,u=jc(xh,r),d=_h(r),h=Ah(u.baseId,s),m=kh(u.baseId,s),b=s===u.value;return v.jsx(L5,{asChild:!0,...d,focusable:!a,active:b,children:v.jsx(dt.button,{type:"button",role:"tab","aria-selected":b,"aria-controls":m,"data-state":b?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:h,...c,ref:n,onMouseDown:Be(t.onMouseDown,w=>{!a&&w.button===0&&w.ctrlKey===!1?u.onValueChange(s):w.preventDefault()}),onKeyDown:Be(t.onKeyDown,w=>{[" ","Enter"].includes(w.key)&&u.onValueChange(s)}),onFocus:Be(t.onFocus,()=>{const w=u.activationMode!=="manual";!b&&!a&&w&&u.onValueChange(s)})})})});Ih.displayName=xh;var Eh="TabsContent",Ch=C.forwardRef((t,n)=>{const{__scopeTabs:r,value:s,forceMount:a,children:c,...u}=t,d=jc(Eh,r),h=Ah(d.baseId,s),m=kh(d.baseId,s),b=s===d.value,w=C.useRef(b);return C.useEffect(()=>{const T=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(T)},[]),v.jsx(Hr,{present:a||b,children:({present:T})=>v.jsx(dt.div,{"data-state":b?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":h,hidden:!T,id:m,tabIndex:0,...u,ref:n,style:{...t.style,animationDuration:w.current?"0s":void 0},children:T&&c})})});Ch.displayName=Eh;function Ah(t,n){return`${t}-trigger-${n}`}function kh(t,n){return`${t}-content-${n}`}var F5=wh,Rh=Th,Oh=Ih,Mh=Ch;const Dh=F5,Nc=C.forwardRef(({className:t,...n},r)=>v.jsx(Rh,{ref:r,className:ot("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n}));Nc.displayName=Rh.displayName;const Js=C.forwardRef(({className:t,...n},r)=>v.jsx(Oh,{ref:r,className:ot("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n}));Js.displayName=Oh.displayName;const Qs=C.forwardRef(({className:t,...n},r)=>v.jsx(Mh,{ref:r,className:ot("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n}));Qs.displayName=Mh.displayName;const U5="add",z5="track",H5="trackItems",W5="track:changed",B5="trackItems:changed",V5="state",$5="state:changed",Ph="add",Fc="add:text",Wr="add:video",Br="add:audio",G5="add:placeholder",Vr="add:image",Y5="add:mask",X5="add:transition",Z5="add:animation",K5="edit",q5="edit:object",J5="edit:text",Q5="edit:shape",ew="enterEditMode",Lh="player",Uc="player:play",zc="player:pause",jh="player:seek",tw="player:seekTo",Nh="player:seekBy",Fh="player:togglePlay",Uh="active",nw="active:set",Hc="active:delete",rw="active:paste",Wc="active:clone",Bc="active:split",zh="layer",iw="layer:locked",sw="layer:hidden",ow="layer:move",aw="layer:select",Vc="layer:selection",cw="layer:sendTo",lw="layer:rename",uw="layer:editingName",dw="layer:copy",fw="layer:paste",hw="layer:clone",pw="layer:split",gw="layer:cut",mw="layer:delete",Hh="history",$c="history:undo",Gc="history:redo",vw="history:reset",Wh="scale",Yc="scale:changed",Bh="drag",Xc="drag:start",Pi="drag:end",Vh="timeline",Zc="timeline:boundingChanged";var uc=function(t,n){return uc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},uc(t,n)};function $r(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");uc(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}function dc(t){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&t[n],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function fc(t,n){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),a,c=[],u;try{for(;(n===void 0||n-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(d){u={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(u)throw u.error}}return c}function hc(t,n,r){if(r||arguments.length===2)for(var s=0,a=n.length,c;s<a;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return t.concat(c||Array.prototype.slice.call(n))}function en(t){return typeof t=="function"}function $h(t){var n=function(s){Error.call(s),s.stack=new Error().stack},r=t(n);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Xa=$h(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(s,a){return a+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function pc(t,n){if(t){var r=t.indexOf(n);0<=r&&t.splice(r,1)}}var po=function(){function t(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var n,r,s,a,c;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var d=dc(u),h=d.next();!h.done;h=d.next()){var m=h.value;m.remove(this)}}catch(k){n={error:k}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}else u.remove(this);var b=this.initialTeardown;if(en(b))try{b()}catch(k){c=k instanceof Xa?k.errors:[k]}var w=this._finalizers;if(w){this._finalizers=null;try{for(var T=dc(w),E=T.next();!E.done;E=T.next()){var O=E.value;try{qd(O)}catch(k){c=c??[],k instanceof Xa?c=hc(hc([],fc(c)),fc(k.errors)):c.push(k)}}}catch(k){s={error:k}}finally{try{E&&!E.done&&(a=T.return)&&a.call(T)}finally{if(s)throw s.error}}}if(c)throw new Xa(c)}},t.prototype.add=function(n){var r;if(n&&n!==this)if(this.closed)qd(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(n)}},t.prototype._hasParent=function(n){var r=this._parentage;return r===n||Array.isArray(r)&&r.includes(n)},t.prototype._addParent=function(n){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(n),r):r?[r,n]:n},t.prototype._removeParent=function(n){var r=this._parentage;r===n?this._parentage=null:Array.isArray(r)&&pc(r,n)},t.prototype.remove=function(n){var r=this._finalizers;r&&pc(r,n),n instanceof t&&n._removeParent(this)},t.EMPTY=function(){var n=new t;return n.closed=!0,n}(),t}(),Gh=po.EMPTY;function Yh(t){return t instanceof po||t&&"closed"in t&&en(t.remove)&&en(t.add)&&en(t.unsubscribe)}function qd(t){en(t)?t():t.unsubscribe()}var bw={Promise:void 0},yw={setTimeout:function(t,n){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];return setTimeout.apply(void 0,hc([t,n],fc(r)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function _w(t){yw.setTimeout(function(){throw t})}function Jd(){}function Xs(t){t()}var Kc=function(t){$r(n,t);function n(r){var s=t.call(this)||this;return s.isStopped=!1,r?(s.destination=r,Yh(r)&&r.add(s)):s.destination=Tw,s}return n.create=function(r,s,a){return new gc(r,s,a)},n.prototype.next=function(r){this.isStopped||this._next(r)},n.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(r){this.destination.next(r)},n.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(po),ww=function(){function t(n){this.partialObserver=n}return t.prototype.next=function(n){var r=this.partialObserver;if(r.next)try{r.next(n)}catch(s){Gs(s)}},t.prototype.error=function(n){var r=this.partialObserver;if(r.error)try{r.error(n)}catch(s){Gs(s)}else Gs(n)},t.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(r){Gs(r)}},t}(),gc=function(t){$r(n,t);function n(r,s,a){var c=t.call(this)||this,u;return en(r)||!r?u={next:r??void 0,error:s??void 0,complete:a??void 0}:u=r,c.destination=new ww(u),c}return n}(Kc);function Gs(t){_w(t)}function Sw(t){throw t}var Tw={closed:!0,next:Jd,error:Sw,complete:Jd},xw=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Iw(t){return t}function Ew(t){return t.length===0?Iw:t.length===1?t[0]:function(r){return t.reduce(function(s,a){return a(s)},r)}}var Qd=function(){function t(n){n&&(this._subscribe=n)}return t.prototype.lift=function(n){var r=new t;return r.source=this,r.operator=n,r},t.prototype.subscribe=function(n,r,s){var a=this,c=Aw(n)?n:new gc(n,r,s);return Xs(function(){var u=a,d=u.operator,h=u.source;c.add(d?d.call(c,h):h?a._subscribe(c):a._trySubscribe(c))}),c},t.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(r){n.error(r)}},t.prototype.forEach=function(n,r){var s=this;return r=ef(r),new r(function(a,c){var u=new gc({next:function(d){try{n(d)}catch(h){c(h),u.unsubscribe()}},error:c,complete:a});s.subscribe(u)})},t.prototype._subscribe=function(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)},t.prototype[xw]=function(){return this},t.prototype.pipe=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Ew(n)(this)},t.prototype.toPromise=function(n){var r=this;return n=ef(n),new n(function(s,a){var c;r.subscribe(function(u){return c=u},function(u){return a(u)},function(){return s(c)})})},t.create=function(n){return new t(n)},t}();function ef(t){var n;return(n=t??bw.Promise)!==null&&n!==void 0?n:Promise}function Cw(t){return t&&en(t.next)&&en(t.error)&&en(t.complete)}function Aw(t){return t&&t instanceof Kc||Cw(t)&&Yh(t)}function kw(t){return en(t?.lift)}function Rw(t){return function(n){if(kw(n))return n.lift(function(r){try{return t(r,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ow(t,n,r,s,a){return new Mw(t,n,r,s,a)}var Mw=function(t){$r(n,t);function n(r,s,a,c,u,d){var h=t.call(this,r)||this;return h.onFinalize=u,h.shouldUnsubscribe=d,h._next=s?function(m){try{s(m)}catch(b){r.error(b)}}:t.prototype._next,h._error=c?function(m){try{c(m)}catch(b){r.error(b)}finally{this.unsubscribe()}}:t.prototype._error,h._complete=a?function(){try{a()}catch(m){r.error(m)}finally{this.unsubscribe()}}:t.prototype._complete,h}return n.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;t.prototype.unsubscribe.call(this),!s&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},n}(Kc),Dw=$h(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),qc=function(t){$r(n,t);function n(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return n.prototype.lift=function(r){var s=new tf(this,this);return s.operator=r,s},n.prototype._throwIfClosed=function(){if(this.closed)throw new Dw},n.prototype.next=function(r){var s=this;Xs(function(){var a,c;if(s._throwIfClosed(),!s.isStopped){s.currentObservers||(s.currentObservers=Array.from(s.observers));try{for(var u=dc(s.currentObservers),d=u.next();!d.done;d=u.next()){var h=d.value;h.next(r)}}catch(m){a={error:m}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(a)throw a.error}}}})},n.prototype.error=function(r){var s=this;Xs(function(){if(s._throwIfClosed(),!s.isStopped){s.hasError=s.isStopped=!0,s.thrownError=r;for(var a=s.observers;a.length;)a.shift().error(r)}})},n.prototype.complete=function(){var r=this;Xs(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var s=r.observers;s.length;)s.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},n.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},n.prototype._innerSubscribe=function(r){var s=this,a=this,c=a.hasError,u=a.isStopped,d=a.observers;return c||u?Gh:(this.currentObservers=null,d.push(r),new po(function(){s.currentObservers=null,pc(d,r)}))},n.prototype._checkFinalizedStatuses=function(r){var s=this,a=s.hasError,c=s.thrownError,u=s.isStopped;a?r.error(c):u&&r.complete()},n.prototype.asObservable=function(){var r=new Qd;return r.source=this,r},n.create=function(r,s){return new tf(r,s)},n}(Qd),tf=function(t){$r(n,t);function n(r,s){var a=t.call(this)||this;return a.destination=r,a.source=s,a}return n.prototype.next=function(r){var s,a;(a=(s=this.destination)===null||s===void 0?void 0:s.next)===null||a===void 0||a.call(s,r)},n.prototype.error=function(r){var s,a;(a=(s=this.destination)===null||s===void 0?void 0:s.error)===null||a===void 0||a.call(s,r)},n.prototype.complete=function(){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||s===void 0||s.call(r)},n.prototype._subscribe=function(r){var s,a;return(a=(s=this.source)===null||s===void 0?void 0:s.subscribe(r))!==null&&a!==void 0?a:Gh},n}(qc),nf=function(t){$r(n,t);function n(r){var s=t.call(this)||this;return s._value=r,s}return Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(r){var s=t.prototype._subscribe.call(this,r);return!s.closed&&r.next(this._value),s},n.prototype.getValue=function(){var r=this,s=r.hasError,a=r.thrownError,c=r._value;if(s)throw a;return this._throwIfClosed(),c},n.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},n}(qc);function bn(t,n){return Rw(function(r,s){var a=0;r.subscribe(Ow(s,function(c){return t.call(n,c,a++)&&s.next(c)}))})}const Xh=new qc,Pw=(t,n)=>{Xh.next({key:t,value:n})},ye={subject:Xh,dispatch:Pw},rt=[];for(let t=0;t<256;++t)rt.push((t+256).toString(16).slice(1));function Lw(t,n=0){return(rt[t[n+0]]+rt[t[n+1]]+rt[t[n+2]]+rt[t[n+3]]+"-"+rt[t[n+4]]+rt[t[n+5]]+"-"+rt[t[n+6]]+rt[t[n+7]]+"-"+rt[t[n+8]]+rt[t[n+9]]+"-"+rt[t[n+10]]+rt[t[n+11]]+rt[t[n+12]]+rt[t[n+13]]+rt[t[n+14]]+rt[t[n+15]]).toLowerCase()}let Za;const jw=new Uint8Array(16);function Nw(){if(!Za){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Za=crypto.getRandomValues.bind(crypto)}return Za(jw)}const Fw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rf={randomUUID:Fw};function Je(t,n,r){if(rf.randomUUID&&!t)return rf.randomUUID();t=t||{};const s=t.random??t.rng?.()??Nw();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Lw(s)}var Zh=(t=>(t.IMAGE="image",t.VIDEO="video",t.AUDIO="audio",t))(Zh||{});const Uw=t=>{const[n,r]=G.useState(!1),[s,a]=G.useState(!1),c=G.useCallback(b=>{const w={...b,id:Je()};switch(b.type){case"image":ye.dispatch(Vr,{payload:w});break;case"video":ye.dispatch(Wr,{payload:w});break;case"audio":ye.dispatch(Br,{payload:w});break}},[]),u=G.useCallback(b=>{b.preventDefault();try{const w=b.dataTransfer?.types[0],T=JSON.parse(w);if(!Object.values(Zh).includes(T.type))return;a(!0),r(!0),t?.(!0)}catch(w){console.error("Error parsing dragged data:",w)}},[t]),d=G.useCallback(b=>{b.preventDefault(),n&&(a(!0),t?.(!0))},[n,t]),h=G.useCallback(b=>{if(s){b.preventDefault(),a(!1),t?.(!1);try{const w=b.dataTransfer?.types[0],T=JSON.parse(b.dataTransfer.getData(w));c(T)}catch(w){console.error("Error parsing dropped data:",w)}}},[s,t,c]),m=G.useCallback(b=>{b.preventDefault(),b.currentTarget.contains(b.relatedTarget)||(a(!1),r(!1),t?.(!1))},[t]);return{onDragEnter:u,onDragOver:d,onDrop:h,onDragLeave:m,isDraggingOver:s}},Kh=({children:t,className:n,style:r,onDragStateChange:s,id:a})=>{const{onDragEnter:c,onDragOver:u,onDrop:d,onDragLeave:h}=Uw(s);return v.jsx("div",{id:a,onDragEnter:c,onDrop:d,onDragOver:u,onDragLeave:h,className:n,style:r,role:"region","aria-label":"Droppable area for images, videos, and audio",children:t})},zw=({size:t,children:n})=>{const[r,s]=G.useState(!1);return v.jsxs(Kh,{id:"artboard",onDragStateChange:s,style:{width:t.width,height:t.height},className:"designcombo_scene pointer-events-auto mt-3.5 bg-black",children:[v.jsx("div",{style:{width:t.width,height:t.height},className:`pointer-events-none absolute z-50 mt-3.5 transition-colors duration-200 ease-in-out ${r?"border-4 border-dashed border-white bg-white/[0.075]":"bg-transparent"} shadow-[0_0_0_5000px_#1D1D1F]`}),n]})},Hw=100,Ww=30,Bw=18,Vw=14,$w=30,Gw=24,Yw=16,qh=12,Xw="Regular",Jh="sans-serif",Gi=188,eo=40,Zw=4e3,Qh=1920,ep=1080,tp=60,np=1e3/tp,Kw=2e6,qw=1e7,Jw=48e3,Qw=192e3,Jc=2.3,eS=Qh/Jc,tS=ep/Jc,nS=184,rS=348,iS=512,sS=300,oS=0,aS=5e3,cS=1,lS=0,uS=0,dS=0,fS=359,hS=1,pS=0,gS=!1,mS=!1,vS=0,bS=2,yS=.01,_S=1,wS=0,SS=3,TS=.01,xS=1,IS=0,ES=1,CS=.01,AS=.5,kS=-1e3,RS=1e3,OS=1,MS=1,DS=0,PS=1,LS=.01,jS=1,NS=0,FS=1,US=.01,zS=0,HS=.5,WS=10,BS=.01,VS=1,$S=0,GS=1,YS=.01,XS=1,go=16,mc=80;function rp(t){if(!t)return"0";const n=t/Gi,r=Math.trunc(n)%60,s=Math.trunc(n/60)%60,a=Math.trunc(n/3600)%60,u=[Math.trunc(n/216e3).toString(),a.toString(),s.toString(),r.toString()];return n<60?`${u[3].padStart(2,"0")}f`:n<3600?`${u[2].padStart(1,"0")}s`:n<216e3?`${u[1].padStart(2,"0")}:${u[2].padStart(2,"0")}`:`${u[0].padStart(2,"0")}:${u[1].padStart(2,"0")}:${u[2].padStart(2,"0")}`}function ZS(t,n=!1){if(!t)return"00:00";const s=1e3/60;if(t<1e3)return n?`${Math.floor(t/s)}f`:`${(t/1e3).toFixed(1)}s`;const a=Math.floor(t/1e3);if(a<60)return`${a}s`;const c=Math.floor(a/60);if(c<60){const m=a%60;return`${c.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`}const u=Math.floor(c/60),d=c%60,h=a%60;return`${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}function Li(t,n){return t.map(r=>({...r,items:r.items.filter(s=>!n.includes(s))}))}const ip=({frame:t},{fps:n})=>{const r=t/n,s=Math.floor(r/3600),a=r%3600,c=Math.floor(a/60),u=Math.floor(a%60),d=Math.floor((a-Math.floor(a))*100);return s>0?`${s}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},sp=({time:t})=>{const n=t/1e3,r=Math.floor(n/3600),s=n%3600,a=Math.floor(s/60),c=Math.floor(s%60),u=Math.floor((s-Math.floor(s))*100);return r>0?`${r}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`:`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},op=()=>{const t=document.getElementById("video-current-time");return(t?parseFloat(t.getAttribute("data-current-time")??""):0)*1e3},$t=[{index:0,unit:18e3,zoom:1/18e3,segments:5},{index:1,unit:10800,zoom:1/10800,segments:3},{index:2,unit:7200,zoom:1/7200,segments:2},{index:3,unit:3600,zoom:1/3600,segments:1},{index:4,unit:1800,zoom:1/1800,segments:2},{index:5,unit:900,zoom:1/900,segments:3},{index:6,unit:600,zoom:1/600,segments:2},{index:7,unit:300,zoom:1/300,segments:5},{index:8,unit:180,zoom:1/180,segments:3},{index:9,unit:120,zoom:1/120,segments:10},{index:10,unit:60,zoom:1/60,segments:5},{index:11,unit:60,zoom:1/60,segments:5},{index:12,unit:30,zoom:1/30,segments:2},{index:13,unit:15,zoom:1/15,segments:3},{index:14,unit:10,zoom:1/10,segments:2},{index:15,unit:5,zoom:1/5,segments:5},{index:16,unit:3,zoom:1/3,segments:3},{index:17,unit:2,zoom:1/2,segments:5},{index:18,unit:1,zoom:1,segments:5},{index:19,unit:1,zoom:2,segments:5},{index:20,unit:1,zoom:4,segments:10}];function Qc(t,n){let r=-1,s=t.length-1;for(;1+r<s;){const a=r+(s-r>>1);n(t[a],a,t)?s=a:r=a}return s}function KS(t,n=1){const r=()=>{const h=Math.max(0,eo),b=document.getElementById("designcombo-timeline-canvas")?.offsetWidth??document.body.offsetWidth;return Math.max(1,b-h)},s=()=>typeof t=="number"?Ge(t,n):fp(t,n),a=r()/s(),c=n*a;return{segments:5,index:Qc($t,d=>d.zoom>c),zoom:c,unit:1/c}}function qS(t){return $t[t]}function ap(t){return cp(t)||$t[0]}const cp=t=>{const n=$t.filter(s=>s.zoom<t.zoom);return n.length===0?null:n.reduce((s,a)=>a.zoom>s.zoom?a:s)},lp=t=>{const n=$t.filter(s=>s.zoom>t.zoom);return n.length===0?null:n.reduce((s,a)=>a.zoom<s.zoom?a:s)};function up(t){return lp(t)||$t[$t.length-1]}function JS(t){const n=$t.at(-1),r=t===n,a=dp(t)-(r?1:2);return Math.max(0,a)}function dp(t){const n=Qc($t,r=>r.zoom>t.zoom);return Math.min($t.length-1,n)}function Ge(t,n=1,r=1){const s=Gi*n;return t*(60/1e3)*s/r}function Fn(t,n=1){const r=Gi*n;return t/r*np}function fp(t,n=1){return Ge(t,n)}const QS=Math.floor(Math.random()*1e3)+1;function el(t,n=1){const r=[],s=Math.floor(n),a=(c,u)=>{for(const d of c)Array.isArray(d)&&u<s?a(d,u+1):r.push(d)};return a(t,0),r}function tl(t,n){const r=n.sort((a,c)=>a.tempIndex-c.tempIndex),s=[];for(const a of r)a.tempIndex<0&&s.push(a);s.push(t);for(const a of r)a.tempIndex>=0&&s.push(a);return s}const vc={id:"font_UwdNKSyVq2iiMiuHSRRsUIOu",family:"Roboto",fullName:"Roboto Bold",postScriptName:"Roboto-Bold",preview:"https://ik.imagekit.io/lh/fonts/v2/5zQgS86djScKA0ri67BBCqW7.png",style:"Roboto-Bold",url:"https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmWUlvAx05IsDqlA.ttf",category:"sans-serif",createdAt:"2023-06-20T04:42:55.909Z",updatedAt:"2023-06-20T04:42:55.909Z",userId:null},hp=t=>{const n=t.map(r=>new FontFace(r.fontFamily,`url(${r.fontUrl})`).load());return n.length===0?Promise.resolve(!0):new Promise((r,s)=>{Promise.all(n).then(a=>{a.forEach(c=>{c instanceof FontFace&&c.family&&(document.fonts.add(c),r(!0))})}).catch(a=>{s(a)})})},tn=kf.create(t=>({timeline:null,size:{width:1080,height:1920},duration:5e3,fps:30,scale:{index:7,unit:300,zoom:1/300,segments:5},scroll:{left:0,top:0},playerRef:null,activeIds:[],targetIds:[],tracks:[],trackItemIds:[],transitionIds:[],transitionsMap:{},trackItemDetailsMap:{},trackItemsMap:{},setTimeline:n=>{t(()=>({timeline:n}))},setScale:n=>{t(()=>({scale:n}))},setScroll:n=>{t(()=>({scroll:n}))},setState:async n=>{t({...n})},setPlayerRef:n=>{t({playerRef:n})}}));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pp=(...t)=>t.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=G.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:u,...d},h)=>G.createElement("svg",{ref:h,...t3,width:n,height:n,stroke:t,strokeWidth:s?Number(r)*24/Number(n):r,className:pp("lucide",a),...d},[...u.map(([m,b])=>G.createElement(m,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=(t,n)=>{const r=G.forwardRef(({className:s,...a},c)=>G.createElement(n3,{ref:c,iconNode:n,className:pp(`lucide-${e3(t)}`,s),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=ft("Captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=ft("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=ft("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=ft("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=ft("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=ft("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=ft("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=ft("SquareSplitHorizontal",[["path",{d:"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3",key:"lubmu8"}],["path",{d:"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3",key:"1ag34g"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=ft("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=ft("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ft("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=ft("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=ft("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=ft("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=ft("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),mo=t=>{const n=G.useCallback(s=>{if(!t?.current)return()=>{};const a=()=>{s()};return t.current.addEventListener("frameupdate",a),()=>{t.current&&t.current.removeEventListener("frameupdate",a)}},[t]);return G.useSyncExternalStore(n,()=>t?.current?.getCurrentFrame()??0,()=>0)},Yi=()=>{const[t,n]=G.useState(!1);return G.useEffect(()=>{const s=ye.subject.pipe(bn(({key:a})=>a.startsWith(Bh))).subscribe(a=>{a.key===Xc?n(!0):a.key===Pi&&n(!1)});return()=>s.unsubscribe()},[]),t},mp=()=>{const[t,n]=G.useState(!1),{duration:r,fps:s,scale:a,playerRef:c,activeIds:u}=tn(),d=mo(c),h=()=>{ye.dispatch(Hc)},m=()=>{ye.dispatch(Bc,{payload:{},options:{time:op()}})},b=E=>{ye.dispatch(Yc,{payload:{scale:E}})},w=()=>{ye.dispatch(Uc)},T=()=>{ye.dispatch(zc)};return G.useEffect(()=>(c?.current?.addEventListener("play",()=>{n(!0)}),c?.current?.addEventListener("pause",()=>{n(!1)}),()=>{c?.current?.removeEventListener("play",()=>{n(!0)}),c?.current?.removeEventListener("pause",()=>{n(!1)})}),[c]),v.jsx("div",{style:{position:"relative",height:"50px",boxShadow:"inset 0 1px 0 0 #27272a",flex:"none"},className:"bg-background",children:v.jsx("div",{style:{position:"absolute",height:50,width:"100%",display:"flex",alignItems:"center"},children:v.jsxs("div",{style:{height:36,width:"100%",display:"grid",gridTemplateColumns:"1fr 260px 1fr",alignItems:"center"},children:[v.jsxs("div",{className:"flex px-2",children:[v.jsxs(Ne,{disabled:!u.length,onClick:h,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[v.jsx(l3,{size:14})," Delete"]}),v.jsxs(Ne,{disabled:!u.length,onClick:m,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[v.jsx(sf,{size:15})," Split"]}),v.jsxs(Ne,{disabled:!u.length,onClick:()=>{ye.dispatch(Wc)},variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[v.jsx(sf,{size:15})," Clone"]})]}),v.jsxs("div",{className:"flex items-center justify-center",children:[v.jsxs("div",{children:[v.jsx(Ne,{onClick:h,variant:"ghost",size:"icon",children:v.jsx(a3,{size:14})}),v.jsx(Ne,{onClick:()=>{if(t)return T();w()},variant:"ghost",size:"icon",children:t?v.jsx(s3,{size:14}):v.jsx(o3,{size:14})}),v.jsx(Ne,{onClick:m,variant:"ghost",size:"icon",children:v.jsx(c3,{size:14})})]}),v.jsxs("div",{className:"text-xs font-light",style:{display:"grid",alignItems:"center",gridTemplateColumns:"54px 4px 54px",paddingTop:"2px",justifyContent:"center"},children:[v.jsx("div",{className:"font-medium text-zinc-200",style:{display:"flex",justifyContent:"center"},"data-current-time":d/s,id:"video-current-time",children:ip({frame:d},{fps:s})}),v.jsx("span",{children:"/"}),v.jsx("div",{className:"text-muted-foreground",style:{display:"flex",justifyContent:"center"},children:sp({time:r})})]})]}),v.jsx(g3,{scale:a,onChangeTimelineScale:b,duration:r})]})})})},g3=({scale:t,onChangeTimelineScale:n,duration:r})=>{const s=()=>{const c=ap(t);n(c)},a=()=>{const c=up(t);n(c)};return v.jsx("div",{className:"flex items-center justify-end",children:v.jsxs("div",{className:"flex border-l border-border pl-4 pr-2",children:[v.jsx(Ne,{size:"icon",variant:"ghost",onClick:s,disabled:t.index===0,children:v.jsx(p3,{size:16})}),v.jsx(Ne,{size:"icon",variant:"ghost",onClick:a,disabled:t.index===20,children:v.jsx(h3,{size:16})})]})})},vp=[{id:"1",details:{src:"https://cdn.designcombo.dev/audio/Dawn%20of%20change.mp3",text:"Voiceover"},name:"Dawn of change",type:"audio",metadata:{author:"Roman Senyk"},display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/audio/Hope.mp3"},name:"Hope",type:"audio",metadata:{author:"Hugo Dujardin"}},{id:"3",details:{src:"https://cdn.designcombo.dev/audio/Tenderness.mp3"},name:"Tenderness",type:"audio",metadata:{author:"Benjamin Tissot"}},{id:"4",details:{src:"https://cdn.designcombo.dev/audio/Piano%20Moment.mp3"},name:"Piano moment",type:"audio",metadata:{author:"Benjamin Tissot"}}],bp=[{id:"1",details:{src:"https://ik.imagekit.io/wombo/images/img1.jpg"},preview:"https://ik.imagekit.io/wombo/images/img1.jpg?tr=w-190",type:"image"},{id:"2",details:{src:"https://ik.imagekit.io/wombo/images/img2.jpg"},preview:"https://ik.imagekit.io/wombo/images/img2.jpg?tr=w-190",type:"image"},{id:"3",details:{src:"https://ik.imagekit.io/wombo/images/img3.jpg"},preview:"https://ik.imagekit.io/wombo/images/img3.jpg?tr=w-190",type:"image"},{id:"4",details:{src:"https://ik.imagekit.io/wombo/images/img4.jpg"},preview:"https://ik.imagekit.io/wombo/images/img4.jpg?tr=w-190",type:"image"},{id:"5",details:{src:"https://ik.imagekit.io/wombo/images/img5.jpg"},preview:"https://ik.imagekit.io/wombo/images/img5.jpg?tr=w-190",type:"image"},,{id:"6",details:{src:"https://ik.imagekit.io/wombo/images/img6.jpg"},preview:"https://ik.imagekit.io/wombo/images/img6.jpg?tr=w-190",type:"image"},{id:"7",details:{src:"https://ik.imagekit.io/wombo/images/img7.jpg"},preview:"https://ik.imagekit.io/wombo/images/img7.jpg?tr=w-190",type:"image"}],yp=[{id:"1",details:{src:"https://cdn.designcombo.dev/videos/demo-video-1.mp4",text:"Scene"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-1.png",duration:17e3,display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/videos/demo-video-2.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-2.png"},{id:"3",details:{src:"https://cdn.designcombo.dev/videos/demo-video-3.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-3.png",duration:2e4},{id:"4",details:{src:"https://cdn.designcombo.dev/videos/demo-video-4.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-4.png",duration:2e4},{id:"5",details:{src:"https://cdn.designcombo.dev/videos/demo-video-5.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-5.png",duration:23e3},{id:"6",details:{src:"https://cdn.designcombo.dev/videos/demo-video-6.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-6.png",duration:1e4},{id:"7",details:{src:"https://cdn.designcombo.dev/videos/demo-video-7.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-7.png",duration:12e3},{id:"8",details:{src:"https://cdn.designcombo.dev/videos/demo-video-8.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-8.png",duration:15e3},{id:"9",details:{src:"https://cdn.designcombo.dev/videos/demo-video-9.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-9.png",duration:15e3},{id:"10",details:{src:"https://cdn.designcombo.dev/videos/demo-video-10.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-10.png",duration:5e3},{id:"11",details:{src:"https://cdn.designcombo.dev/videos/demo-video-11.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-11.png",duration:5e3}],_p=[{id:"1",kind:"none",duration:0,preview:"https://ik.imagekit.io/wombo/transitions-v2/transition-none.png",type:"transition"},{id:"2",kind:"fade",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/fade.webp",type:"transition"},{id:"3",kind:"slide",name:"slide up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-up.webp",type:"transition",direction:"from-bottom"},{id:"4",kind:"slide",name:"slide down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-down.webp",type:"transition",direction:"from-top"},{id:"5",kind:"slide",name:"slide left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-left.webp",type:"transition",direction:"from-right"},{id:"6",kind:"slide",name:"slide right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-right.webp",type:"transition",direction:"from-left"},{id:"7",kind:"wipe",name:"wipe up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-up.webp",type:"transition",direction:"from-bottom"},{id:"8",kind:"wipe",name:"wipe down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-down.webp",type:"transition",direction:"from-top"},{id:"9",kind:"wipe",name:"wipe left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-left.webp",type:"transition",direction:"from-right"},{id:"10",kind:"wipe",name:"wipe right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-right.webp",type:"transition",direction:"from-left"},{id:"11",kind:"flip",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/flip.webp",type:"transition"},{id:"12",kind:"clockWipe",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/clock-wipe.webp",type:"transition"},{id:"13",kind:"star",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/star.webp",type:"transition"},{id:"14",kind:"circle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/circle.webp",type:"transition"},{id:"15",kind:"rectangle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/rectangle.webp",type:"transition"}],m3=[{id:"1",src:"https://ik.imagekit.io/snapmotion/upload-video-1.mp4",type:"video"},{id:"2",src:"https://ik.imagekit.io/snapmotion/upload-video-2.mp4",type:"video"},{id:"3",src:"https://ik.imagekit.io/snapmotion/upload-video-3.mp4",type:"video"}],v3=()=>{const t=Yi();return v.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Transitions"}),v.jsx(cr,{children:v.jsx("div",{className:"grid grid-cols-3 gap-2 px-4",children:_p.map((n,r)=>v.jsx(b3,{transition:n,shouldDisplayPreview:!t},r))})})]})},b3=({transition:t,shouldDisplayPreview:n})=>{const r=G.useMemo(()=>({backgroundImage:`url(${t.preview})`,backgroundSize:"cover",width:"70px",height:"70px"}),[t.preview]);return v.jsx($i,{data:t,renderCustomPreview:v.jsx("div",{style:r}),shouldDisplayPreview:n,children:v.jsxs("div",{children:[v.jsx("div",{children:v.jsx("div",{style:r,draggable:!1})}),v.jsx("div",{className:"flex h-6 items-center overflow-ellipsis text-nowrap text-[12px] capitalize text-muted-foreground",children:t.name||t.type})]})})},y3=()=>{const t=()=>{ye.dispatch(Fc,{payload:{id:Je(),display:{from:0,to:5e3},details:{text:"Heading and some body",fontSize:120,width:600,fontUrl:vc.url,fontFamily:vc.postScriptName,color:"#ffffff",wordWrap:"break-word",textAlign:"center",borderWidth:0,borderColor:"#000000",boxShadow:{color:"#ffffff",x:0,y:0,blur:0}}},options:{}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Text"}),v.jsx("div",{className:"flex flex-col gap-2 px-4",children:v.jsx(Ne,{draggable:!1,onClick:t,variant:"secondary",className:"w-full",children:"Add text"})})]})},_3=()=>{const t=G.useRef(null),n=s=>{r(s)},r=async s=>{const a=s[0].type;a.includes("audio")&&ye.dispatch(Br,{payload:{id:Je(),details:{src:URL.createObjectURL(s[0]),volume:50}}}),a.includes("video")&&ye.dispatch(Wr,{payload:{id:Je(),display:{from:2e3,to:7e3},details:{src:URL.createObjectURL(s[0]),name:s[0].name}}}),a.includes("image")&&ye.dispatch(Vr,{payload:{id:Je(),details:{src:URL.createObjectURL(s[0])}}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Your media"}),v.jsx("input",{ref:t,id:"file-upload-handle",type:"file",accept:"audio/*,video/*,image/*",onChange:s=>n(Array.from(s.target.files||[])),className:"hidden"}),v.jsx("div",{className:"px-4 py-2",children:v.jsx("div",{children:v.jsxs(Dh,{defaultValue:"projects",className:"w-full",children:[v.jsxs(Nc,{className:"grid w-full grid-cols-2",children:[v.jsx(Js,{value:"projects",children:"Project"}),v.jsx(Js,{value:"workspace",children:"Workspace"})]}),v.jsxs(Qs,{value:"projects",children:[v.jsxs(Ne,{onClick:()=>{t.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[v.jsx(of,{size:16})," Upload"]}),v.jsx("div",{})]}),v.jsx(Qs,{value:"workspace",children:v.jsxs(Ne,{onClick:()=>{t.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[v.jsx(of,{size:16})," Upload"]})})]})})}),v.jsx(cr,{children:v.jsx("div",{className:"masonry-sm px-4"})})]})},w3=()=>{const t=Yi(),n=r=>{ye.dispatch(Br,{payload:r,options:{}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Audios"}),v.jsx(cr,{children:v.jsx("div",{className:"flex flex-col px-2",children:vp.map((r,s)=>v.jsx(S3,{shouldDisplayPreview:!t,handleAddAudio:n,audio:r},s))})})]})},S3=({handleAddAudio:t,audio:n,shouldDisplayPreview:r})=>{const s=G.useMemo(()=>({backgroundImage:"url(https://cdn.designcombo.dev/thumbnails/music-preview.png)",backgroundSize:"cover",width:"70px",height:"70px"}),[]);return v.jsx($i,{data:n,renderCustomPreview:v.jsx("div",{style:s}),shouldDisplayPreview:r,children:v.jsxs("div",{draggable:!1,onClick:()=>t(n),style:{display:"grid",gridTemplateColumns:"48px 1fr"},className:"flex cursor-pointer gap-4 px-2 py-1 text-sm hover:bg-zinc-800/70",children:[v.jsx("div",{className:"flex h-12 items-center justify-center bg-zinc-800",children:v.jsx(gp,{width:16})}),v.jsxs("div",{className:"flex flex-col justify-center",children:[v.jsx("div",{children:n.name}),v.jsx("div",{className:"text-zinc-400",children:n.metadata?.author})]})]})})},T3=()=>{const t=Yi(),n=r=>{ye.dispatch(Vr,{payload:r,options:{trackId:"main"}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Photos"}),v.jsx(cr,{children:v.jsx("div",{className:"masonry-sm px-4",children:bp.map((r,s)=>v.jsx(x3,{image:r,shouldDisplayPreview:!t,handleAddImage:n},s))})})]})},x3=({handleAddImage:t,image:n,shouldDisplayPreview:r})=>{const s=G.useMemo(()=>({backgroundImage:`url(${n.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[n.preview]);return v.jsx($i,{data:n,renderCustomPreview:v.jsx("div",{style:s}),shouldDisplayPreview:r,children:v.jsx("div",{onClick:()=>t({id:Je(),details:{src:n.details.src}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:v.jsx("img",{draggable:!1,src:n.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},I3=()=>{const t=Yi(),n=r=>{ye.dispatch(Wr,{payload:r,options:{resourceId:"main"}})};return v.jsxs("div",{className:"flex flex-1 flex-col",children:[v.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Videos"}),v.jsx(cr,{children:v.jsx("div",{className:"masonry-sm px-4",children:yp.map((r,s)=>v.jsx(E3,{video:r,shouldDisplayPreview:!t,handleAddVideo:n},s))})})]})},E3=({handleAddVideo:t,video:n,shouldDisplayPreview:r})=>{const s=G.useMemo(()=>({backgroundImage:`url(${n.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[n.preview]);return v.jsx($i,{data:n,renderCustomPreview:v.jsx("div",{style:s,className:"draggable"}),shouldDisplayPreview:r,children:v.jsx("div",{onClick:()=>t({...n,id:Je(),details:{src:n.details.src,...n.details}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:v.jsx("img",{draggable:!1,src:n.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},vo=kf.create(t=>({activeMenuItem:null,showMenuItem:!1,cropTarget:null,showControlItem:!1,showToolboxItem:!1,activeToolboxItem:null,setCropTarget:n=>t({cropTarget:n}),setActiveMenuItem:n=>t({activeMenuItem:n}),setShowMenuItem:n=>t({showMenuItem:n}),setShowControlItem:n=>t({showControlItem:n}),setShowToolboxItem:n=>t({showToolboxItem:n}),setActiveToolboxItem:n=>t({activeToolboxItem:n})})),C3=({children:t})=>{const{showMenuItem:n,setShowMenuItem:r}=vo(),s=()=>{r(!1)};return v.jsxs("div",{style:{left:n?"0":"-100%",transition:"left 0.25s ease-in-out",zIndex:200},className:"absolute top-1/2 mt-6 flex h-[calc(100%-32px-64px)] w-[340px] -translate-y-1/2 rounded-lg shadow-lg",children:[v.jsx("div",{className:"w-[74px]"}),v.jsxs("div",{className:"relative flex flex-1 bg-background/80 backdrop-blur-lg backdrop-filter",children:[v.jsx(Ne,{variant:"ghost",className:"absolute right-2 top-2 h-8 w-8 text-muted-foreground",size:"icon",children:v.jsx(f3,{width:16,onClick:s})}),t]})]})},A3=()=>{const{activeMenuItem:t}=vo();return t==="transitions"?v.jsx(v3,{}):t==="texts"?v.jsx(y3,{}):t==="videos"?v.jsx(I3,{}):t==="audios"?v.jsx(w3,{}):t==="images"?v.jsx(T3,{}):t==="uploads"?v.jsx(_3,{}):null},wp=()=>v.jsx(C3,{children:v.jsx(A3,{})}),vn={audio:gp,captions:r3,image:i3,redo:({...t})=>v.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2957 4.15721C13.9052 3.76669 13.9052 3.13352 14.2957 2.743C14.6862 2.35247 15.3194 2.35247 15.7099 2.743L20.953 7.98603C21.1387 8.16758 21.2539 8.42087 21.2539 8.70108C21.2539 8.70111 21.2539 8.70114 21.2539 8.70117C21.2539 8.70431 21.2539 8.70744 21.2539 8.71057C21.2518 8.93273 21.1773 9.13757 21.0528 9.30262C21.0249 9.33973 20.9942 9.37505 20.961 9.40828L15.7099 14.6593C15.3194 15.0499 14.6862 15.0499 14.2957 14.6593C13.9052 14.2688 13.9052 13.6357 14.2957 13.2451L17.8398 9.70108H9.22665C8.59943 9.70108 7.97836 9.82462 7.39888 10.0646C6.81941 10.3047 6.29289 10.6565 5.84938 11.1C5.40587 11.5435 5.05406 12.07 4.81403 12.6495C4.57401 13.229 4.45047 13.85 4.45047 14.4773C4.45047 15.1045 4.57401 15.7256 4.81403 16.305C5.05406 16.8845 5.40587 17.411 5.84938 17.8545C6.29289 18.298 6.81941 18.6498 7.39888 18.8899C7.97836 19.1299 8.59943 19.2534 9.22665 19.2534H12.9024C13.4547 19.2534 13.9024 19.7012 13.9024 20.2534C13.9024 20.8057 13.4547 21.2534 12.9024 21.2534H9.22665C8.33679 21.2534 7.45564 21.0782 6.63352 20.7376C5.81139 20.3971 5.06439 19.898 4.43517 19.2687C3.80594 18.6395 3.30681 17.8925 2.96627 17.0704C2.62574 16.2483 2.45047 15.3671 2.45047 14.4773C2.45047 13.5874 2.62574 12.7063 2.96627 11.8841C3.30681 11.062 3.80594 10.315 4.43517 9.68578C5.06439 9.05655 5.81139 8.55742 6.63352 8.21689C7.45564 7.87635 8.33679 7.70108 9.22665 7.70108H17.8396L14.2957 4.15721Z",fill:"currentColor"})}),shapes:({...t})=>v.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[v.jsx("g",{clipPath:"url(#clip0_2077_2705)",children:v.jsx("path",{d:"M3.75 12H2.25V20.25C2.25 20.6478 2.40804 21.0294 2.68934 21.3107C2.97064 21.592 3.35218 21.75 3.75 21.75H9.75V20.25H3.75V12ZM21 21.75H12.75C12.6197 21.75 12.4916 21.716 12.3784 21.6514C12.2652 21.5868 12.1708 21.4938 12.1045 21.3816C12.0382 21.2694 12.0022 21.1419 12.0002 21.0116C11.9982 20.8813 12.0302 20.7527 12.093 20.6385L16.218 13.1385C16.2821 13.0203 16.377 12.9218 16.4928 12.8534C16.6085 12.7849 16.7406 12.7492 16.875 12.75C17.1322 12.75 17.3895 12.879 17.532 13.1385L21.657 20.6385C21.7198 20.7527 21.7518 20.8813 21.7498 21.0116C21.7478 21.1419 21.7118 21.2694 21.6455 21.3816C21.5792 21.4938 21.4848 21.5868 21.3716 21.6514C21.2584 21.716 21.1303 21.75 21 21.75ZM14.0182 20.25H19.7318L16.875 15.0563L14.0182 20.25ZM20.25 2.25H12V3.75H20.25V14.244H21.75V3.75C21.75 3.35218 21.592 2.97064 21.3107 2.68934C21.0294 2.40804 20.6478 2.25 20.25 2.25ZM8.25 2.25H3.75C3.35218 2.25 2.97064 2.40804 2.68934 2.68934C2.40804 2.97064 2.25 3.35218 2.25 3.75V8.25C2.25 8.64782 2.40804 9.02936 2.68934 9.31066C2.97064 9.59196 3.35218 9.75 3.75 9.75H8.25C8.64782 9.75 9.02936 9.59196 9.31066 9.31066C9.59196 9.02936 9.75 8.64782 9.75 8.25V3.75C9.75 3.35218 9.59196 2.97064 9.31066 2.68934C9.02936 2.40804 8.64782 2.25 8.25 2.25ZM8.25 8.25H3.75V3.75H8.25V8.25Z",fill:"currentColor"})}),v.jsx("defs",{children:v.jsx("clipPath",{id:"clip0_2077_2705",children:v.jsx("rect",{width:"24",height:"24",fill:"white"})})})]}),type:u3,undo:({...t})=>v.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.60387 4.30711C9.99439 3.91659 9.99439 3.28342 9.60387 2.8929C9.21334 2.50238 8.58018 2.50237 8.18965 2.8929L2.8925 8.19004C2.70497 8.37758 2.59961 8.63193 2.59961 8.89715C2.59961 9.16237 2.70497 9.41672 2.8925 9.60426L8.18965 14.9014C8.58018 15.2919 9.21334 15.2919 9.60387 14.9014C9.99439 14.5109 9.99439 13.8777 9.60387 13.4872L5.86478 9.7481H15.1044C15.7383 9.7481 16.366 9.87295 16.9516 10.1155C17.5372 10.3581 18.0693 10.7136 18.5176 11.1619C18.9658 11.6101 19.3213 12.1422 19.5639 12.7278C19.8065 13.3134 19.9313 13.9411 19.9313 14.575C19.9313 15.2088 19.8065 15.8365 19.5639 16.4221C19.3213 17.0077 18.9658 17.5398 18.5176 17.9881C18.0693 18.4363 17.5372 18.7918 16.9516 19.0344C16.366 19.277 15.7383 19.4018 15.1044 19.4018H11.3964C10.8442 19.4018 10.3964 19.8495 10.3964 20.4018C10.3964 20.9541 10.8442 21.4018 11.3964 21.4018H15.1044C16.001 21.4018 16.8887 21.2252 17.717 20.8822C18.5452 20.5391 19.2978 20.0362 19.9318 19.4023C20.5657 18.7683 21.0686 18.0158 21.4116 17.1875C21.7547 16.3592 21.9313 15.4715 21.9313 14.575C21.9313 13.6784 21.7547 12.7907 21.4116 11.9624C21.0686 11.1342 20.5657 10.3816 19.9318 9.74764C19.2978 9.11371 18.5452 8.61085 17.717 8.26777C16.8887 7.92469 16.001 7.7481 15.1044 7.7481H6.16287L9.60387 4.30711Z",fill:"currentColor"})}),upload:({...t})=>v.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[v.jsxs("g",{clipPath:"url(#clip0_2077_2699)",children:[v.jsx("path",{d:"M8.25 13.5L9.3075 14.5575L11.25 12.6225V21.75H12.75V12.6225L14.6925 14.5575L15.75 13.5L12 9.75L8.25 13.5Z",fill:"currentColor"}),v.jsx("path",{d:"M17.6249 16.5004H17.2499V15.0004H17.6249C18.52 15.0362 19.3927 14.715 20.0509 14.1074C20.7092 13.4997 21.0991 12.6555 21.1349 11.7604C21.1707 10.8653 20.8495 9.99264 20.2418 9.33438C19.6342 8.67613 18.79 8.28621 17.8949 8.25041H17.2499L17.1749 7.63541C17.0085 6.37275 16.3888 5.21362 15.4312 4.37395C14.4736 3.53428 13.2435 3.07132 11.9699 3.07132C10.6963 3.07132 9.46616 3.53428 8.50857 4.37395C7.55099 5.21362 6.93129 6.37275 6.76489 7.63541L6.74989 8.25041H6.10489C5.20979 8.28621 4.36557 8.67613 3.75795 9.33438C3.15033 9.99264 2.82909 10.8653 2.86489 11.7604C2.9007 12.6555 3.29062 13.4997 3.94887 14.1074C4.60712 14.715 5.47979 15.0362 6.37489 15.0004H6.74989V16.5004H6.37489C5.1722 16.4928 4.01477 16.0409 3.12513 15.2315C2.2355 14.4221 1.67646 13.3124 1.55549 12.1158C1.43453 10.9192 1.76018 9.72009 2.46983 8.74905C3.17949 7.77801 4.22305 7.10357 5.39989 6.85541C5.72367 5.3453 6.55552 3.99189 7.75663 3.02101C8.95774 2.05013 10.4555 1.52051 11.9999 1.52051C13.5443 1.52051 15.042 2.05013 16.2432 3.02101C17.4443 3.99189 18.2761 5.3453 18.5999 6.85541C19.7767 7.10357 20.8203 7.77801 21.53 8.74905C22.2396 9.72009 22.5653 10.9192 22.4443 12.1158C22.3233 13.3124 21.7643 14.4221 20.8747 15.2315C19.985 16.0409 18.8276 16.4928 17.6249 16.5004Z",fill:"currentColor"})]}),v.jsx("defs",{children:v.jsx("clipPath",{id:"clip0_2077_2699",children:v.jsx("rect",{width:"24",height:"24",fill:"white"})})})]}),video:d3};function k3(){const{setActiveMenuItem:t,setShowMenuItem:n,activeMenuItem:r,showMenuItem:s}=vo();return v.jsxs("div",{style:{zIndex:201},className:"absolute left-2.5 top-1/2 mt-6 flex w-14 -translate-y-1/2 flex-col items-center rounded-lg bg-background/80 py-2 shadow-lg backdrop-blur-lg backdrop-filter",children:[v.jsx(Ne,{onClick:()=>{t("uploads"),n(!0)},className:ot(s&&r==="uploads"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(vn.upload,{width:20})}),v.jsx(Ne,{onClick:()=>{t("texts"),n(!0)},className:ot(s&&r==="texts"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(vn.type,{width:20})}),v.jsx(Ne,{onClick:()=>{t("videos"),n(!0)},className:ot(s&&r==="videos"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(vn.video,{width:20})}),v.jsx(Ne,{onClick:()=>{t("captions"),n(!0)},className:ot(s&&r==="captions"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(vn.captions,{width:20})}),v.jsx(Ne,{onClick:()=>{t("images"),n(!0)},className:ot(s&&r==="images"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(vn.image,{width:20})}),v.jsx(Ne,{onClick:()=>{t("shapes"),n(!0)},className:ot(s&&r==="shapes"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(vn.shapes,{width:20})}),v.jsx(Ne,{onClick:()=>{t("audios"),n(!0)},className:ot(s&&r==="audios"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx(vn.audio,{width:20})}),v.jsx(Ne,{onClick:()=>{t("transitions"),n(!0)},className:ot(s&&r==="transitions"?"bg-secondary":"text-muted-foreground"),variant:"ghost",size:"icon",children:v.jsx("svg",{width:20,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{d:"M3 5.30359C3 3.93159 4.659 3.24359 5.629 4.21359L11.997 10.5826L10.583 11.9966L5 6.41359V17.5856L10.586 11.9996L10.583 11.9966L11.997 10.5826L12 10.5856L18.371 4.21459C19.341 3.24459 21 3.93159 21 5.30359V18.6956C21 20.0676 19.341 20.7556 18.371 19.7856L12 13.5L13.414 11.9996L19 17.5866V6.41359L13.414 11.9996L13.421 12.0056L12.006 13.4206L12 13.4136L5.629 19.7846C4.659 20.7546 3 20.0676 3 18.6956V5.30359Z",fill:"currentColor"})})})]})}function Sp(){const t=()=>{ye.dispatch($c)},n=()=>{ye.dispatch(Gc)};return v.jsx("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr 320px"},className:"pointer-events-none absolute left-0 right-0 top-0 z-[205] flex h-[72px] items-center px-2",children:v.jsxs("div",{className:"pointer-events-auto flex h-14 items-center gap-2",children:[v.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-background"}),v.jsxs("div",{className:"flex h-12 items-center bg-background px-1.5",children:[v.jsx(Ne,{onClick:t,className:"text-muted-foreground",variant:"ghost",size:"icon",children:v.jsx(vn.undo,{width:20})}),v.jsx(Ne,{onClick:n,className:"text-muted-foreground",variant:"ghost",size:"icon",children:v.jsx(vn.redo,{width:20})})]})]})})}const Ys=(t,n)=>{const r=t.from/1e3*n,s=t.to/1e3*n-r;return{from:r,durationInFrames:s}},Tp={text:(t,n)=>{const{fps:r,height:s,width:a}=n,{from:c,durationInFrames:u}=Ys(t.display,r);return v.jsx(Jt.Sequence,{from:c,durationInFrames:u,"data-track-item":"transition-element",style:{position:"absolute",width:t.details.width??300,height:t.details.height??400,transform:t.details.transform??"none",fontSize:t.details.fontSize||"16px",textAlign:t.details.textAlign||"left",top:t.details.top??300,left:t.details.left??600,color:t.details.color||"#000000",backgroundColor:t.details.backgroundColor||"transparent",border:t.details.border??"none",opacity:t.details.opacity??100/100,fontFamily:t.details.fontFamily||"Arial",textDecoration:t.details.textDecoration||"none",fontWeight:t.details.fontWeight||"normal",lineHeight:t.details.lineHeight||"normal",letterSpacing:t.details.letterSpacing||"normal",wordSpacing:t.details.wordSpacing||"normal",wordWrap:t.details.wordWrap||"normal",wordBreak:t.details.wordBreak||"normal",pointerEvents:"auto"},children:v.jsx("div",{children:t.details.text})},t.id)},image:(t,n)=>{const{fps:r}=n,{from:s,durationInFrames:a}=Ys(t.display,r);return v.jsx(Jt.Sequence,{from:s,durationInFrames:a,style:{width:t.details.width??"100%",height:t.details.height??"auto",transform:t.details.transform??"none",opacity:(t.details.opacity??100)/100||1,border:t.details.border??"none",borderRadius:t.details.borderRadius??"0",boxShadow:t.details.boxShadow??"none",filter:t.details.filter||"none",top:t.details.top??0,left:t.details.left??0},children:v.jsx(Jt.AbsoluteFill,{style:{pointerEvents:"none"},children:v.jsx(Jt.Img,{style:{pointerEvents:"none"},"data-id":t.id,src:t.details.src})})},t.id)},video:(t,n)=>{const{fps:r}=n,{from:s,durationInFrames:a}=Ys(t.display,r),c=t.trim,u=t.details.crop||{x:0,y:0,width:t.details.width,height:t.details.height};return c?v.jsx(Jt.Sequence,{premountFor:30*5,from:s,durationInFrames:a,style:{width:u.width||"100%",height:u.height||"auto",transform:t.details.transform??"none",opacity:(t.details.opacity??100)/100||1,border:t.details.border??"none",borderRadius:t.details.borderRadius??"0",boxShadow:t.details.boxShadow??"none",top:t.details.top??0,left:t.details.left??0,overflow:"hidden"},children:v.jsx(Jt.AbsoluteFill,{style:{pointerEvents:"none",width:t.details.width,height:t.details.height,top:-u.y,left:-u.x},children:v.jsx(Jt.OffthreadVideo,{startFrom:c.from/1e3*r,endAt:c.to/1e3*r,src:t.details.src,volume:(t.details.volume??100)/100,style:{pointerEvents:"none",width:t.details.width,height:t.details.height}})})},t.id):v.jsx(v.Fragment,{})},audio:(t,n)=>{const{fps:r}=n,{from:s,durationInFrames:a}=Ys(t.display,r),c=t.trim;return c?v.jsx(Jt.Sequence,{className:`moonshine-scene-item id-${t.id} moonshine-scene-item-type-${t.type}`,from:s,durationInFrames:a,style:{userSelect:"none",pointerEvents:"none"},children:v.jsx(Jt.AbsoluteFill,{children:v.jsx(Jt.Audio,{startFrom:c.from/1e3*r,endAt:c.to/1e3*r,src:t.details.src,volume:(t.details.volume??100)/100})})},t.id):v.jsx(v.Fragment,{})}};var to={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */to.exports;(function(t,n){(function(){var r,s="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",d="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",m=500,b="__lodash_placeholder__",w=1,T=2,E=4,O=1,k=2,A=1,D=2,M=4,N=8,U=16,J=32,q=64,Q=128,K=256,X=512,re=30,ie="...",Y=800,le=16,we=1,De=2,Te=3,Re=1/0,ke=9007199254740991,Ye=17976931348623157e292,ht=NaN,oe=4294967295,Wn=oe-1,dr=oe>>>1,Xr=[["ary",Q],["bind",A],["bindKey",D],["curry",N],["curryRight",U],["flip",X],["partial",J],["partialRight",q],["rearg",K]],wn="[object Arguments]",Sn="[object Array]",Zr="[object AsyncFunction]",Yt="[object Boolean]",rn="[object Date]",fr="[object DOMException]",hr="[object Error]",Bn="[object Function]",Ji="[object GeneratorFunction]",yt="[object Map]",Xt="[object Number]",Vn="[object Null]",kt="[object Object]",Kr="[object Promise]",pr="[object Proxy]",$n="[object RegExp]",_t="[object Set]",sn="[object String]",gr="[object Symbol]",Eo="[object Undefined]",Tn="[object WeakMap]",Qi="[object WeakSet]",xn="[object ArrayBuffer]",In="[object DataView]",mr="[object Float32Array]",vr="[object Float64Array]",qr="[object Int8Array]",Jr="[object Int16Array]",Qr="[object Int32Array]",ei="[object Uint8Array]",ti="[object Uint8ClampedArray]",ni="[object Uint16Array]",ri="[object Uint32Array]",ii=/\b__p \+= '';/g,es=/\b(__p \+=) '' \+/g,En=/(__e\(.*?\)|\b__t\)) \+\n'';/g,br=/&(?:amp|lt|gt|quot|#39);/g,yr=/[&<>"']/g,ts=RegExp(br.source),Co=RegExp(yr.source),ns=/<%-([\s\S]+?)%>/g,Ao=/<%([\s\S]+?)%>/g,si=/<%=([\s\S]+?)%>/g,rs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ko=/^\w*$/,Ro=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_r=/[\\^$.*+?()[\]{}|]/g,is=RegExp(_r.source),oi=/^\s+/,Oo=/\s/,Mo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Do=/\{\n\/\* \[wrapped with (.+)\] \*/,_=/,? & /,z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,V=/[()=,{}\[\]\/\s]/,se=/\\(\\)?/g,Se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ee=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,et=/^\[object .+?Constructor\]$/,Fe=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,pt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zt=/($^)/,on=/['\n\r\u2028\u2029\\]/g,Xe="\\ud800-\\udfff",ai="\\u0300-\\u036f",Po="\\ufe20-\\ufe2f",Lo="\\u20d0-\\u20ff",ml=ai+Po+Lo,vl="\\u2700-\\u27bf",bl="a-z\\xdf-\\xf6\\xf8-\\xff",V1="\\xac\\xb1\\xd7\\xf7",$1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",G1="\\u2000-\\u206f",Y1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yl="A-Z\\xc0-\\xd6\\xd8-\\xde",_l="\\ufe0e\\ufe0f",wl=V1+$1+G1+Y1,jo="[']",X1="["+Xe+"]",Sl="["+wl+"]",ss="["+ml+"]",Tl="\\d+",Z1="["+vl+"]",xl="["+bl+"]",Il="[^"+Xe+wl+Tl+vl+bl+yl+"]",No="\\ud83c[\\udffb-\\udfff]",K1="(?:"+ss+"|"+No+")",El="[^"+Xe+"]",Fo="(?:\\ud83c[\\udde6-\\uddff]){2}",Uo="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+yl+"]",Cl="\\u200d",Al="(?:"+xl+"|"+Il+")",q1="(?:"+wr+"|"+Il+")",kl="(?:"+jo+"(?:d|ll|m|re|s|t|ve))?",Rl="(?:"+jo+"(?:D|LL|M|RE|S|T|VE))?",Ol=K1+"?",Ml="["+_l+"]?",J1="(?:"+Cl+"(?:"+[El,Fo,Uo].join("|")+")"+Ml+Ol+")*",Q1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dl=Ml+Ol+J1,tg="(?:"+[Z1,Fo,Uo].join("|")+")"+Dl,ng="(?:"+[El+ss+"?",ss,Fo,Uo,X1].join("|")+")",rg=RegExp(jo,"g"),ig=RegExp(ss,"g"),zo=RegExp(No+"(?="+No+")|"+ng+Dl,"g"),sg=RegExp([wr+"?"+xl+"+"+kl+"(?="+[Sl,wr,"$"].join("|")+")",q1+"+"+Rl+"(?="+[Sl,wr+Al,"$"].join("|")+")",wr+"?"+Al+"+"+kl,wr+"+"+Rl,eg,Q1,Tl,tg].join("|"),"g"),og=RegExp("["+Cl+Xe+ml+_l+"]"),ag=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lg=-1,Pe={};Pe[mr]=Pe[vr]=Pe[qr]=Pe[Jr]=Pe[Qr]=Pe[ei]=Pe[ti]=Pe[ni]=Pe[ri]=!0,Pe[wn]=Pe[Sn]=Pe[xn]=Pe[Yt]=Pe[In]=Pe[rn]=Pe[hr]=Pe[Bn]=Pe[yt]=Pe[Xt]=Pe[kt]=Pe[$n]=Pe[_t]=Pe[sn]=Pe[Tn]=!1;var Me={};Me[wn]=Me[Sn]=Me[xn]=Me[In]=Me[Yt]=Me[rn]=Me[mr]=Me[vr]=Me[qr]=Me[Jr]=Me[Qr]=Me[yt]=Me[Xt]=Me[kt]=Me[$n]=Me[_t]=Me[sn]=Me[gr]=Me[ei]=Me[ti]=Me[ni]=Me[ri]=!0,Me[hr]=Me[Bn]=Me[Tn]=!1;var ug={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},dg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pg=parseFloat,gg=parseInt,Pl=typeof Ti=="object"&&Ti&&Ti.Object===Object&&Ti,mg=typeof self=="object"&&self&&self.Object===Object&&self,tt=Pl||mg||Function("return this")(),Ho=n&&!n.nodeType&&n,Gn=Ho&&!0&&t&&!t.nodeType&&t,Ll=Gn&&Gn.exports===Ho,Wo=Ll&&Pl.process,Rt=function(){try{var x=Gn&&Gn.require&&Gn.require("util").types;return x||Wo&&Wo.binding&&Wo.binding("util")}catch{}}(),jl=Rt&&Rt.isArrayBuffer,Nl=Rt&&Rt.isDate,Fl=Rt&&Rt.isMap,Ul=Rt&&Rt.isRegExp,zl=Rt&&Rt.isSet,Hl=Rt&&Rt.isTypedArray;function wt(x,P,R){switch(R.length){case 0:return x.call(P);case 1:return x.call(P,R[0]);case 2:return x.call(P,R[0],R[1]);case 3:return x.call(P,R[0],R[1],R[2])}return x.apply(P,R)}function vg(x,P,R,$){for(var ae=-1,xe=x==null?0:x.length;++ae<xe;){var Ze=x[ae];P($,Ze,R(Ze),x)}return $}function Ot(x,P){for(var R=-1,$=x==null?0:x.length;++R<$&&P(x[R],R,x)!==!1;);return x}function bg(x,P){for(var R=x==null?0:x.length;R--&&P(x[R],R,x)!==!1;);return x}function Wl(x,P){for(var R=-1,$=x==null?0:x.length;++R<$;)if(!P(x[R],R,x))return!1;return!0}function Cn(x,P){for(var R=-1,$=x==null?0:x.length,ae=0,xe=[];++R<$;){var Ze=x[R];P(Ze,R,x)&&(xe[ae++]=Ze)}return xe}function os(x,P){var R=x==null?0:x.length;return!!R&&Sr(x,P,0)>-1}function Bo(x,P,R){for(var $=-1,ae=x==null?0:x.length;++$<ae;)if(R(P,x[$]))return!0;return!1}function je(x,P){for(var R=-1,$=x==null?0:x.length,ae=Array($);++R<$;)ae[R]=P(x[R],R,x);return ae}function An(x,P){for(var R=-1,$=P.length,ae=x.length;++R<$;)x[ae+R]=P[R];return x}function Vo(x,P,R,$){var ae=-1,xe=x==null?0:x.length;for($&&xe&&(R=x[++ae]);++ae<xe;)R=P(R,x[ae],ae,x);return R}function yg(x,P,R,$){var ae=x==null?0:x.length;for($&&ae&&(R=x[--ae]);ae--;)R=P(R,x[ae],ae,x);return R}function $o(x,P){for(var R=-1,$=x==null?0:x.length;++R<$;)if(P(x[R],R,x))return!0;return!1}var _g=Go("length");function wg(x){return x.split("")}function Sg(x){return x.match(z)||[]}function Bl(x,P,R){var $;return R(x,function(ae,xe,Ze){if(P(ae,xe,Ze))return $=xe,!1}),$}function as(x,P,R,$){for(var ae=x.length,xe=R+($?1:-1);$?xe--:++xe<ae;)if(P(x[xe],xe,x))return xe;return-1}function Sr(x,P,R){return P===P?Pg(x,P,R):as(x,Vl,R)}function Tg(x,P,R,$){for(var ae=R-1,xe=x.length;++ae<xe;)if($(x[ae],P))return ae;return-1}function Vl(x){return x!==x}function $l(x,P){var R=x==null?0:x.length;return R?Xo(x,P)/R:ht}function Go(x){return function(P){return P==null?r:P[x]}}function Yo(x){return function(P){return x==null?r:x[P]}}function Gl(x,P,R,$,ae){return ae(x,function(xe,Ze,Oe){R=$?($=!1,xe):P(R,xe,Ze,Oe)}),R}function xg(x,P){var R=x.length;for(x.sort(P);R--;)x[R]=x[R].value;return x}function Xo(x,P){for(var R,$=-1,ae=x.length;++$<ae;){var xe=P(x[$]);xe!==r&&(R=R===r?xe:R+xe)}return R}function Zo(x,P){for(var R=-1,$=Array(x);++R<x;)$[R]=P(R);return $}function Ig(x,P){return je(P,function(R){return[R,x[R]]})}function Yl(x){return x&&x.slice(0,ql(x)+1).replace(oi,"")}function St(x){return function(P){return x(P)}}function Ko(x,P){return je(P,function(R){return x[R]})}function ci(x,P){return x.has(P)}function Xl(x,P){for(var R=-1,$=x.length;++R<$&&Sr(P,x[R],0)>-1;);return R}function Zl(x,P){for(var R=x.length;R--&&Sr(P,x[R],0)>-1;);return R}function Eg(x,P){for(var R=x.length,$=0;R--;)x[R]===P&&++$;return $}var Cg=Yo(ug),Ag=Yo(dg);function kg(x){return"\\"+hg[x]}function Rg(x,P){return x==null?r:x[P]}function Tr(x){return og.test(x)}function Og(x){return ag.test(x)}function Mg(x){for(var P,R=[];!(P=x.next()).done;)R.push(P.value);return R}function qo(x){var P=-1,R=Array(x.size);return x.forEach(function($,ae){R[++P]=[ae,$]}),R}function Kl(x,P){return function(R){return x(P(R))}}function kn(x,P){for(var R=-1,$=x.length,ae=0,xe=[];++R<$;){var Ze=x[R];(Ze===P||Ze===b)&&(x[R]=b,xe[ae++]=R)}return xe}function cs(x){var P=-1,R=Array(x.size);return x.forEach(function($){R[++P]=$}),R}function Dg(x){var P=-1,R=Array(x.size);return x.forEach(function($){R[++P]=[$,$]}),R}function Pg(x,P,R){for(var $=R-1,ae=x.length;++$<ae;)if(x[$]===P)return $;return-1}function Lg(x,P,R){for(var $=R+1;$--;)if(x[$]===P)return $;return $}function xr(x){return Tr(x)?Ng(x):_g(x)}function Ht(x){return Tr(x)?Fg(x):wg(x)}function ql(x){for(var P=x.length;P--&&Oo.test(x.charAt(P)););return P}var jg=Yo(fg);function Ng(x){for(var P=zo.lastIndex=0;zo.test(x);)++P;return P}function Fg(x){return x.match(zo)||[]}function Ug(x){return x.match(sg)||[]}var zg=function x(P){P=P==null?tt:Ir.defaults(tt.Object(),P,Ir.pick(tt,cg));var R=P.Array,$=P.Date,ae=P.Error,xe=P.Function,Ze=P.Math,Oe=P.Object,Jo=P.RegExp,Hg=P.String,Mt=P.TypeError,ls=R.prototype,Wg=xe.prototype,Er=Oe.prototype,us=P["__core-js_shared__"],ds=Wg.toString,Ae=Er.hasOwnProperty,Bg=0,Jl=function(){var e=/[^.]+$/.exec(us&&us.keys&&us.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),fs=Er.toString,Vg=ds.call(Oe),$g=tt._,Gg=Jo("^"+ds.call(Ae).replace(_r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hs=Ll?P.Buffer:r,Rn=P.Symbol,ps=P.Uint8Array,Ql=hs?hs.allocUnsafe:r,gs=Kl(Oe.getPrototypeOf,Oe),eu=Oe.create,tu=Er.propertyIsEnumerable,ms=ls.splice,nu=Rn?Rn.isConcatSpreadable:r,li=Rn?Rn.iterator:r,Yn=Rn?Rn.toStringTag:r,vs=function(){try{var e=Jn(Oe,"defineProperty");return e({},"",{}),e}catch{}}(),Yg=P.clearTimeout!==tt.clearTimeout&&P.clearTimeout,Xg=$&&$.now!==tt.Date.now&&$.now,Zg=P.setTimeout!==tt.setTimeout&&P.setTimeout,bs=Ze.ceil,ys=Ze.floor,Qo=Oe.getOwnPropertySymbols,Kg=hs?hs.isBuffer:r,ru=P.isFinite,qg=ls.join,Jg=Kl(Oe.keys,Oe),Ke=Ze.max,it=Ze.min,Qg=$.now,em=P.parseInt,iu=Ze.random,tm=ls.reverse,ea=Jn(P,"DataView"),ui=Jn(P,"Map"),ta=Jn(P,"Promise"),Cr=Jn(P,"Set"),di=Jn(P,"WeakMap"),fi=Jn(Oe,"create"),_s=di&&new di,Ar={},nm=Qn(ea),rm=Qn(ui),im=Qn(ta),sm=Qn(Cr),om=Qn(di),ws=Rn?Rn.prototype:r,hi=ws?ws.valueOf:r,su=ws?ws.toString:r;function p(e){if(He(e)&&!ce(e)&&!(e instanceof be)){if(e instanceof Dt)return e;if(Ae.call(e,"__wrapped__"))return od(e)}return new Dt(e)}var kr=function(){function e(){}return function(i){if(!Ue(i))return{};if(eu)return eu(i);e.prototype=i;var o=new e;return e.prototype=r,o}}();function Ss(){}function Dt(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}p.templateSettings={escape:ns,evaluate:Ao,interpolate:si,variable:"",imports:{_:p}},p.prototype=Ss.prototype,p.prototype.constructor=p,Dt.prototype=kr(Ss.prototype),Dt.prototype.constructor=Dt;function be(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=oe,this.__views__=[]}function am(){var e=new be(this.__wrapped__);return e.__actions__=gt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gt(this.__views__),e}function cm(){if(this.__filtered__){var e=new be(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function lm(){var e=this.__wrapped__.value(),i=this.__dir__,o=ce(e),l=i<0,f=o?e.length:0,g=w0(0,f,this.__views__),y=g.start,S=g.end,I=S-y,L=l?S:y-1,j=this.__iteratees__,F=j.length,W=0,Z=it(I,this.__takeCount__);if(!o||!l&&f==I&&Z==I)return ku(e,this.__actions__);var te=[];e:for(;I--&&W<Z;){L+=i;for(var fe=-1,ne=e[L];++fe<F;){var ge=j[fe],_e=ge.iteratee,It=ge.type,lt=_e(ne);if(It==De)ne=lt;else if(!lt){if(It==we)continue e;break e}}te[W++]=ne}return te}be.prototype=kr(Ss.prototype),be.prototype.constructor=be;function Xn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var l=e[i];this.set(l[0],l[1])}}function um(){this.__data__=fi?fi(null):{},this.size=0}function dm(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function fm(e){var i=this.__data__;if(fi){var o=i[e];return o===h?r:o}return Ae.call(i,e)?i[e]:r}function hm(e){var i=this.__data__;return fi?i[e]!==r:Ae.call(i,e)}function pm(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=fi&&i===r?h:i,this}Xn.prototype.clear=um,Xn.prototype.delete=dm,Xn.prototype.get=fm,Xn.prototype.has=hm,Xn.prototype.set=pm;function an(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var l=e[i];this.set(l[0],l[1])}}function gm(){this.__data__=[],this.size=0}function mm(e){var i=this.__data__,o=Ts(i,e);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():ms.call(i,o,1),--this.size,!0}function vm(e){var i=this.__data__,o=Ts(i,e);return o<0?r:i[o][1]}function bm(e){return Ts(this.__data__,e)>-1}function ym(e,i){var o=this.__data__,l=Ts(o,e);return l<0?(++this.size,o.push([e,i])):o[l][1]=i,this}an.prototype.clear=gm,an.prototype.delete=mm,an.prototype.get=vm,an.prototype.has=bm,an.prototype.set=ym;function cn(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var l=e[i];this.set(l[0],l[1])}}function _m(){this.size=0,this.__data__={hash:new Xn,map:new(ui||an),string:new Xn}}function wm(e){var i=Ls(this,e).delete(e);return this.size-=i?1:0,i}function Sm(e){return Ls(this,e).get(e)}function Tm(e){return Ls(this,e).has(e)}function xm(e,i){var o=Ls(this,e),l=o.size;return o.set(e,i),this.size+=o.size==l?0:1,this}cn.prototype.clear=_m,cn.prototype.delete=wm,cn.prototype.get=Sm,cn.prototype.has=Tm,cn.prototype.set=xm;function Zn(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new cn;++i<o;)this.add(e[i])}function Im(e){return this.__data__.set(e,h),this}function Em(e){return this.__data__.has(e)}Zn.prototype.add=Zn.prototype.push=Im,Zn.prototype.has=Em;function Wt(e){var i=this.__data__=new an(e);this.size=i.size}function Cm(){this.__data__=new an,this.size=0}function Am(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o}function km(e){return this.__data__.get(e)}function Rm(e){return this.__data__.has(e)}function Om(e,i){var o=this.__data__;if(o instanceof an){var l=o.__data__;if(!ui||l.length<a-1)return l.push([e,i]),this.size=++o.size,this;o=this.__data__=new cn(l)}return o.set(e,i),this.size=o.size,this}Wt.prototype.clear=Cm,Wt.prototype.delete=Am,Wt.prototype.get=km,Wt.prototype.has=Rm,Wt.prototype.set=Om;function ou(e,i){var o=ce(e),l=!o&&er(e),f=!o&&!l&&Ln(e),g=!o&&!l&&!f&&Dr(e),y=o||l||f||g,S=y?Zo(e.length,Hg):[],I=S.length;for(var L in e)(i||Ae.call(e,L))&&!(y&&(L=="length"||f&&(L=="offset"||L=="parent")||g&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||fn(L,I)))&&S.push(L);return S}function au(e){var i=e.length;return i?e[fa(0,i-1)]:r}function Mm(e,i){return js(gt(e),Kn(i,0,e.length))}function Dm(e){return js(gt(e))}function na(e,i,o){(o!==r&&!Bt(e[i],o)||o===r&&!(i in e))&&ln(e,i,o)}function pi(e,i,o){var l=e[i];(!(Ae.call(e,i)&&Bt(l,o))||o===r&&!(i in e))&&ln(e,i,o)}function Ts(e,i){for(var o=e.length;o--;)if(Bt(e[o][0],i))return o;return-1}function Pm(e,i,o,l){return On(e,function(f,g,y){i(l,f,o(f),y)}),l}function cu(e,i){return e&&Kt(i,Qe(i),e)}function Lm(e,i){return e&&Kt(i,vt(i),e)}function ln(e,i,o){i=="__proto__"&&vs?vs(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o}function ra(e,i){for(var o=-1,l=i.length,f=R(l),g=e==null;++o<l;)f[o]=g?r:Na(e,i[o]);return f}function Kn(e,i,o){return e===e&&(o!==r&&(e=e<=o?e:o),i!==r&&(e=e>=i?e:i)),e}function Pt(e,i,o,l,f,g){var y,S=i&w,I=i&T,L=i&E;if(o&&(y=f?o(e,l,f,g):o(e)),y!==r)return y;if(!Ue(e))return e;var j=ce(e);if(j){if(y=T0(e),!S)return gt(e,y)}else{var F=st(e),W=F==Bn||F==Ji;if(Ln(e))return Mu(e,S);if(F==kt||F==wn||W&&!f){if(y=I||W?{}:qu(e),!S)return I?f0(e,Lm(y,e)):d0(e,cu(y,e))}else{if(!Me[F])return f?e:{};y=x0(e,F,S)}}g||(g=new Wt);var Z=g.get(e);if(Z)return Z;g.set(e,y),Ed(e)?e.forEach(function(ne){y.add(Pt(ne,i,o,ne,e,g))}):xd(e)&&e.forEach(function(ne,ge){y.set(ge,Pt(ne,i,o,ge,e,g))});var te=L?I?Ta:Sa:I?vt:Qe,fe=j?r:te(e);return Ot(fe||e,function(ne,ge){fe&&(ge=ne,ne=e[ge]),pi(y,ge,Pt(ne,i,o,ge,e,g))}),y}function jm(e){var i=Qe(e);return function(o){return lu(o,e,i)}}function lu(e,i,o){var l=o.length;if(e==null)return!l;for(e=Oe(e);l--;){var f=o[l],g=i[f],y=e[f];if(y===r&&!(f in e)||!g(y))return!1}return!0}function uu(e,i,o){if(typeof e!="function")throw new Mt(u);return wi(function(){e.apply(r,o)},i)}function gi(e,i,o,l){var f=-1,g=os,y=!0,S=e.length,I=[],L=i.length;if(!S)return I;o&&(i=je(i,St(o))),l?(g=Bo,y=!1):i.length>=a&&(g=ci,y=!1,i=new Zn(i));e:for(;++f<S;){var j=e[f],F=o==null?j:o(j);if(j=l||j!==0?j:0,y&&F===F){for(var W=L;W--;)if(i[W]===F)continue e;I.push(j)}else g(i,F,l)||I.push(j)}return I}var On=Nu(Zt),du=Nu(sa,!0);function Nm(e,i){var o=!0;return On(e,function(l,f,g){return o=!!i(l,f,g),o}),o}function xs(e,i,o){for(var l=-1,f=e.length;++l<f;){var g=e[l],y=i(g);if(y!=null&&(S===r?y===y&&!xt(y):o(y,S)))var S=y,I=g}return I}function Fm(e,i,o,l){var f=e.length;for(o=ue(o),o<0&&(o=-o>f?0:f+o),l=l===r||l>f?f:ue(l),l<0&&(l+=f),l=o>l?0:Ad(l);o<l;)e[o++]=i;return e}function fu(e,i){var o=[];return On(e,function(l,f,g){i(l,f,g)&&o.push(l)}),o}function nt(e,i,o,l,f){var g=-1,y=e.length;for(o||(o=E0),f||(f=[]);++g<y;){var S=e[g];i>0&&o(S)?i>1?nt(S,i-1,o,l,f):An(f,S):l||(f[f.length]=S)}return f}var ia=Fu(),hu=Fu(!0);function Zt(e,i){return e&&ia(e,i,Qe)}function sa(e,i){return e&&hu(e,i,Qe)}function Is(e,i){return Cn(i,function(o){return hn(e[o])})}function qn(e,i){i=Dn(i,e);for(var o=0,l=i.length;e!=null&&o<l;)e=e[qt(i[o++])];return o&&o==l?e:r}function pu(e,i,o){var l=i(e);return ce(e)?l:An(l,o(e))}function at(e){return e==null?e===r?Eo:Vn:Yn&&Yn in Oe(e)?_0(e):D0(e)}function oa(e,i){return e>i}function Um(e,i){return e!=null&&Ae.call(e,i)}function zm(e,i){return e!=null&&i in Oe(e)}function Hm(e,i,o){return e>=it(i,o)&&e<Ke(i,o)}function aa(e,i,o){for(var l=o?Bo:os,f=e[0].length,g=e.length,y=g,S=R(g),I=1/0,L=[];y--;){var j=e[y];y&&i&&(j=je(j,St(i))),I=it(j.length,I),S[y]=!o&&(i||f>=120&&j.length>=120)?new Zn(y&&j):r}j=e[0];var F=-1,W=S[0];e:for(;++F<f&&L.length<I;){var Z=j[F],te=i?i(Z):Z;if(Z=o||Z!==0?Z:0,!(W?ci(W,te):l(L,te,o))){for(y=g;--y;){var fe=S[y];if(!(fe?ci(fe,te):l(e[y],te,o)))continue e}W&&W.push(te),L.push(Z)}}return L}function Wm(e,i,o,l){return Zt(e,function(f,g,y){i(l,o(f),g,y)}),l}function mi(e,i,o){i=Dn(i,e),e=td(e,i);var l=e==null?e:e[qt(jt(i))];return l==null?r:wt(l,e,o)}function gu(e){return He(e)&&at(e)==wn}function Bm(e){return He(e)&&at(e)==xn}function Vm(e){return He(e)&&at(e)==rn}function vi(e,i,o,l,f){return e===i?!0:e==null||i==null||!He(e)&&!He(i)?e!==e&&i!==i:$m(e,i,o,l,vi,f)}function $m(e,i,o,l,f,g){var y=ce(e),S=ce(i),I=y?Sn:st(e),L=S?Sn:st(i);I=I==wn?kt:I,L=L==wn?kt:L;var j=I==kt,F=L==kt,W=I==L;if(W&&Ln(e)){if(!Ln(i))return!1;y=!0,j=!1}if(W&&!j)return g||(g=new Wt),y||Dr(e)?Xu(e,i,o,l,f,g):b0(e,i,I,o,l,f,g);if(!(o&O)){var Z=j&&Ae.call(e,"__wrapped__"),te=F&&Ae.call(i,"__wrapped__");if(Z||te){var fe=Z?e.value():e,ne=te?i.value():i;return g||(g=new Wt),f(fe,ne,o,l,g)}}return W?(g||(g=new Wt),y0(e,i,o,l,f,g)):!1}function Gm(e){return He(e)&&st(e)==yt}function ca(e,i,o,l){var f=o.length,g=f,y=!l;if(e==null)return!g;for(e=Oe(e);f--;){var S=o[f];if(y&&S[2]?S[1]!==e[S[0]]:!(S[0]in e))return!1}for(;++f<g;){S=o[f];var I=S[0],L=e[I],j=S[1];if(y&&S[2]){if(L===r&&!(I in e))return!1}else{var F=new Wt;if(l)var W=l(L,j,I,e,i,F);if(!(W===r?vi(j,L,O|k,l,F):W))return!1}}return!0}function mu(e){if(!Ue(e)||A0(e))return!1;var i=hn(e)?Gg:et;return i.test(Qn(e))}function Ym(e){return He(e)&&at(e)==$n}function Xm(e){return He(e)&&st(e)==_t}function Zm(e){return He(e)&&Ws(e.length)&&!!Pe[at(e)]}function vu(e){return typeof e=="function"?e:e==null?bt:typeof e=="object"?ce(e)?_u(e[0],e[1]):yu(e):Ud(e)}function la(e){if(!_i(e))return Jg(e);var i=[];for(var o in Oe(e))Ae.call(e,o)&&o!="constructor"&&i.push(o);return i}function Km(e){if(!Ue(e))return M0(e);var i=_i(e),o=[];for(var l in e)l=="constructor"&&(i||!Ae.call(e,l))||o.push(l);return o}function ua(e,i){return e<i}function bu(e,i){var o=-1,l=mt(e)?R(e.length):[];return On(e,function(f,g,y){l[++o]=i(f,g,y)}),l}function yu(e){var i=Ia(e);return i.length==1&&i[0][2]?Qu(i[0][0],i[0][1]):function(o){return o===e||ca(o,e,i)}}function _u(e,i){return Ca(e)&&Ju(i)?Qu(qt(e),i):function(o){var l=Na(o,e);return l===r&&l===i?Fa(o,e):vi(i,l,O|k)}}function Es(e,i,o,l,f){e!==i&&ia(i,function(g,y){if(f||(f=new Wt),Ue(g))qm(e,i,y,o,Es,l,f);else{var S=l?l(ka(e,y),g,y+"",e,i,f):r;S===r&&(S=g),na(e,y,S)}},vt)}function qm(e,i,o,l,f,g,y){var S=ka(e,o),I=ka(i,o),L=y.get(I);if(L){na(e,o,L);return}var j=g?g(S,I,o+"",e,i,y):r,F=j===r;if(F){var W=ce(I),Z=!W&&Ln(I),te=!W&&!Z&&Dr(I);j=I,W||Z||te?ce(S)?j=S:Ve(S)?j=gt(S):Z?(F=!1,j=Mu(I,!0)):te?(F=!1,j=Du(I,!0)):j=[]:Si(I)||er(I)?(j=S,er(S)?j=kd(S):(!Ue(S)||hn(S))&&(j=qu(I))):F=!1}F&&(y.set(I,j),f(j,I,l,g,y),y.delete(I)),na(e,o,j)}function wu(e,i){var o=e.length;if(o)return i+=i<0?o:0,fn(i,o)?e[i]:r}function Su(e,i,o){i.length?i=je(i,function(g){return ce(g)?function(y){return qn(y,g.length===1?g[0]:g)}:g}):i=[bt];var l=-1;i=je(i,St(ee()));var f=bu(e,function(g,y,S){var I=je(i,function(L){return L(g)});return{criteria:I,index:++l,value:g}});return xg(f,function(g,y){return u0(g,y,o)})}function Jm(e,i){return Tu(e,i,function(o,l){return Fa(e,l)})}function Tu(e,i,o){for(var l=-1,f=i.length,g={};++l<f;){var y=i[l],S=qn(e,y);o(S,y)&&bi(g,Dn(y,e),S)}return g}function Qm(e){return function(i){return qn(i,e)}}function da(e,i,o,l){var f=l?Tg:Sr,g=-1,y=i.length,S=e;for(e===i&&(i=gt(i)),o&&(S=je(e,St(o)));++g<y;)for(var I=0,L=i[g],j=o?o(L):L;(I=f(S,j,I,l))>-1;)S!==e&&ms.call(S,I,1),ms.call(e,I,1);return e}function xu(e,i){for(var o=e?i.length:0,l=o-1;o--;){var f=i[o];if(o==l||f!==g){var g=f;fn(f)?ms.call(e,f,1):ga(e,f)}}return e}function fa(e,i){return e+ys(iu()*(i-e+1))}function e0(e,i,o,l){for(var f=-1,g=Ke(bs((i-e)/(o||1)),0),y=R(g);g--;)y[l?g:++f]=e,e+=o;return y}function ha(e,i){var o="";if(!e||i<1||i>ke)return o;do i%2&&(o+=e),i=ys(i/2),i&&(e+=e);while(i);return o}function he(e,i){return Ra(ed(e,i,bt),e+"")}function t0(e){return au(Pr(e))}function n0(e,i){var o=Pr(e);return js(o,Kn(i,0,o.length))}function bi(e,i,o,l){if(!Ue(e))return e;i=Dn(i,e);for(var f=-1,g=i.length,y=g-1,S=e;S!=null&&++f<g;){var I=qt(i[f]),L=o;if(I==="__proto__"||I==="constructor"||I==="prototype")return e;if(f!=y){var j=S[I];L=l?l(j,I,S):r,L===r&&(L=Ue(j)?j:fn(i[f+1])?[]:{})}pi(S,I,L),S=S[I]}return e}var Iu=_s?function(e,i){return _s.set(e,i),e}:bt,r0=vs?function(e,i){return vs(e,"toString",{configurable:!0,enumerable:!1,value:za(i),writable:!0})}:bt;function i0(e){return js(Pr(e))}function Lt(e,i,o){var l=-1,f=e.length;i<0&&(i=-i>f?0:f+i),o=o>f?f:o,o<0&&(o+=f),f=i>o?0:o-i>>>0,i>>>=0;for(var g=R(f);++l<f;)g[l]=e[l+i];return g}function s0(e,i){var o;return On(e,function(l,f,g){return o=i(l,f,g),!o}),!!o}function Cs(e,i,o){var l=0,f=e==null?l:e.length;if(typeof i=="number"&&i===i&&f<=dr){for(;l<f;){var g=l+f>>>1,y=e[g];y!==null&&!xt(y)&&(o?y<=i:y<i)?l=g+1:f=g}return f}return pa(e,i,bt,o)}function pa(e,i,o,l){var f=0,g=e==null?0:e.length;if(g===0)return 0;i=o(i);for(var y=i!==i,S=i===null,I=xt(i),L=i===r;f<g;){var j=ys((f+g)/2),F=o(e[j]),W=F!==r,Z=F===null,te=F===F,fe=xt(F);if(y)var ne=l||te;else L?ne=te&&(l||W):S?ne=te&&W&&(l||!Z):I?ne=te&&W&&!Z&&(l||!fe):Z||fe?ne=!1:ne=l?F<=i:F<i;ne?f=j+1:g=j}return it(g,Wn)}function Eu(e,i){for(var o=-1,l=e.length,f=0,g=[];++o<l;){var y=e[o],S=i?i(y):y;if(!o||!Bt(S,I)){var I=S;g[f++]=y===0?0:y}}return g}function Cu(e){return typeof e=="number"?e:xt(e)?ht:+e}function Tt(e){if(typeof e=="string")return e;if(ce(e))return je(e,Tt)+"";if(xt(e))return su?su.call(e):"";var i=e+"";return i=="0"&&1/e==-1/0?"-0":i}function Mn(e,i,o){var l=-1,f=os,g=e.length,y=!0,S=[],I=S;if(o)y=!1,f=Bo;else if(g>=a){var L=i?null:m0(e);if(L)return cs(L);y=!1,f=ci,I=new Zn}else I=i?[]:S;e:for(;++l<g;){var j=e[l],F=i?i(j):j;if(j=o||j!==0?j:0,y&&F===F){for(var W=I.length;W--;)if(I[W]===F)continue e;i&&I.push(F),S.push(j)}else f(I,F,o)||(I!==S&&I.push(F),S.push(j))}return S}function ga(e,i){return i=Dn(i,e),e=td(e,i),e==null||delete e[qt(jt(i))]}function Au(e,i,o,l){return bi(e,i,o(qn(e,i)),l)}function As(e,i,o,l){for(var f=e.length,g=l?f:-1;(l?g--:++g<f)&&i(e[g],g,e););return o?Lt(e,l?0:g,l?g+1:f):Lt(e,l?g+1:0,l?f:g)}function ku(e,i){var o=e;return o instanceof be&&(o=o.value()),Vo(i,function(l,f){return f.func.apply(f.thisArg,An([l],f.args))},o)}function ma(e,i,o){var l=e.length;if(l<2)return l?Mn(e[0]):[];for(var f=-1,g=R(l);++f<l;)for(var y=e[f],S=-1;++S<l;)S!=f&&(g[f]=gi(g[f]||y,e[S],i,o));return Mn(nt(g,1),i,o)}function Ru(e,i,o){for(var l=-1,f=e.length,g=i.length,y={};++l<f;){var S=l<g?i[l]:r;o(y,e[l],S)}return y}function va(e){return Ve(e)?e:[]}function ba(e){return typeof e=="function"?e:bt}function Dn(e,i){return ce(e)?e:Ca(e,i)?[e]:sd(Ce(e))}var o0=he;function Pn(e,i,o){var l=e.length;return o=o===r?l:o,!i&&o>=l?e:Lt(e,i,o)}var Ou=Yg||function(e){return tt.clearTimeout(e)};function Mu(e,i){if(i)return e.slice();var o=e.length,l=Ql?Ql(o):new e.constructor(o);return e.copy(l),l}function ya(e){var i=new e.constructor(e.byteLength);return new ps(i).set(new ps(e)),i}function a0(e,i){var o=i?ya(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}function c0(e){var i=new e.constructor(e.source,Ee.exec(e));return i.lastIndex=e.lastIndex,i}function l0(e){return hi?Oe(hi.call(e)):{}}function Du(e,i){var o=i?ya(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function Pu(e,i){if(e!==i){var o=e!==r,l=e===null,f=e===e,g=xt(e),y=i!==r,S=i===null,I=i===i,L=xt(i);if(!S&&!L&&!g&&e>i||g&&y&&I&&!S&&!L||l&&y&&I||!o&&I||!f)return 1;if(!l&&!g&&!L&&e<i||L&&o&&f&&!l&&!g||S&&o&&f||!y&&f||!I)return-1}return 0}function u0(e,i,o){for(var l=-1,f=e.criteria,g=i.criteria,y=f.length,S=o.length;++l<y;){var I=Pu(f[l],g[l]);if(I){if(l>=S)return I;var L=o[l];return I*(L=="desc"?-1:1)}}return e.index-i.index}function Lu(e,i,o,l){for(var f=-1,g=e.length,y=o.length,S=-1,I=i.length,L=Ke(g-y,0),j=R(I+L),F=!l;++S<I;)j[S]=i[S];for(;++f<y;)(F||f<g)&&(j[o[f]]=e[f]);for(;L--;)j[S++]=e[f++];return j}function ju(e,i,o,l){for(var f=-1,g=e.length,y=-1,S=o.length,I=-1,L=i.length,j=Ke(g-S,0),F=R(j+L),W=!l;++f<j;)F[f]=e[f];for(var Z=f;++I<L;)F[Z+I]=i[I];for(;++y<S;)(W||f<g)&&(F[Z+o[y]]=e[f++]);return F}function gt(e,i){var o=-1,l=e.length;for(i||(i=R(l));++o<l;)i[o]=e[o];return i}function Kt(e,i,o,l){var f=!o;o||(o={});for(var g=-1,y=i.length;++g<y;){var S=i[g],I=l?l(o[S],e[S],S,o,e):r;I===r&&(I=e[S]),f?ln(o,S,I):pi(o,S,I)}return o}function d0(e,i){return Kt(e,Ea(e),i)}function f0(e,i){return Kt(e,Zu(e),i)}function ks(e,i){return function(o,l){var f=ce(o)?vg:Pm,g=i?i():{};return f(o,e,ee(l,2),g)}}function Rr(e){return he(function(i,o){var l=-1,f=o.length,g=f>1?o[f-1]:r,y=f>2?o[2]:r;for(g=e.length>3&&typeof g=="function"?(f--,g):r,y&&ct(o[0],o[1],y)&&(g=f<3?r:g,f=1),i=Oe(i);++l<f;){var S=o[l];S&&e(i,S,l,g)}return i})}function Nu(e,i){return function(o,l){if(o==null)return o;if(!mt(o))return e(o,l);for(var f=o.length,g=i?f:-1,y=Oe(o);(i?g--:++g<f)&&l(y[g],g,y)!==!1;);return o}}function Fu(e){return function(i,o,l){for(var f=-1,g=Oe(i),y=l(i),S=y.length;S--;){var I=y[e?S:++f];if(o(g[I],I,g)===!1)break}return i}}function h0(e,i,o){var l=i&A,f=yi(e);function g(){var y=this&&this!==tt&&this instanceof g?f:e;return y.apply(l?o:this,arguments)}return g}function Uu(e){return function(i){i=Ce(i);var o=Tr(i)?Ht(i):r,l=o?o[0]:i.charAt(0),f=o?Pn(o,1).join(""):i.slice(1);return l[e]()+f}}function Or(e){return function(i){return Vo(Nd(jd(i).replace(rg,"")),e,"")}}function yi(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=kr(e.prototype),l=e.apply(o,i);return Ue(l)?l:o}}function p0(e,i,o){var l=yi(e);function f(){for(var g=arguments.length,y=R(g),S=g,I=Mr(f);S--;)y[S]=arguments[S];var L=g<3&&y[0]!==I&&y[g-1]!==I?[]:kn(y,I);if(g-=L.length,g<o)return Vu(e,i,Rs,f.placeholder,r,y,L,r,r,o-g);var j=this&&this!==tt&&this instanceof f?l:e;return wt(j,this,y)}return f}function zu(e){return function(i,o,l){var f=Oe(i);if(!mt(i)){var g=ee(o,3);i=Qe(i),o=function(S){return g(f[S],S,f)}}var y=e(i,o,l);return y>-1?f[g?i[y]:y]:r}}function Hu(e){return dn(function(i){var o=i.length,l=o,f=Dt.prototype.thru;for(e&&i.reverse();l--;){var g=i[l];if(typeof g!="function")throw new Mt(u);if(f&&!y&&Ps(g)=="wrapper")var y=new Dt([],!0)}for(l=y?l:o;++l<o;){g=i[l];var S=Ps(g),I=S=="wrapper"?xa(g):r;I&&Aa(I[0])&&I[1]==(Q|N|J|K)&&!I[4].length&&I[9]==1?y=y[Ps(I[0])].apply(y,I[3]):y=g.length==1&&Aa(g)?y[S]():y.thru(g)}return function(){var L=arguments,j=L[0];if(y&&L.length==1&&ce(j))return y.plant(j).value();for(var F=0,W=o?i[F].apply(this,L):j;++F<o;)W=i[F].call(this,W);return W}})}function Rs(e,i,o,l,f,g,y,S,I,L){var j=i&Q,F=i&A,W=i&D,Z=i&(N|U),te=i&X,fe=W?r:yi(e);function ne(){for(var ge=arguments.length,_e=R(ge),It=ge;It--;)_e[It]=arguments[It];if(Z)var lt=Mr(ne),Et=Eg(_e,lt);if(l&&(_e=Lu(_e,l,f,Z)),g&&(_e=ju(_e,g,y,Z)),ge-=Et,Z&&ge<L){var $e=kn(_e,lt);return Vu(e,i,Rs,ne.placeholder,o,_e,$e,S,I,L-ge)}var Vt=F?o:this,gn=W?Vt[e]:e;return ge=_e.length,S?_e=P0(_e,S):te&&ge>1&&_e.reverse(),j&&I<ge&&(_e.length=I),this&&this!==tt&&this instanceof ne&&(gn=fe||yi(gn)),gn.apply(Vt,_e)}return ne}function Wu(e,i){return function(o,l){return Wm(o,e,i(l),{})}}function Os(e,i){return function(o,l){var f;if(o===r&&l===r)return i;if(o!==r&&(f=o),l!==r){if(f===r)return l;typeof o=="string"||typeof l=="string"?(o=Tt(o),l=Tt(l)):(o=Cu(o),l=Cu(l)),f=e(o,l)}return f}}function _a(e){return dn(function(i){return i=je(i,St(ee())),he(function(o){var l=this;return e(i,function(f){return wt(f,l,o)})})})}function Ms(e,i){i=i===r?" ":Tt(i);var o=i.length;if(o<2)return o?ha(i,e):i;var l=ha(i,bs(e/xr(i)));return Tr(i)?Pn(Ht(l),0,e).join(""):l.slice(0,e)}function g0(e,i,o,l){var f=i&A,g=yi(e);function y(){for(var S=-1,I=arguments.length,L=-1,j=l.length,F=R(j+I),W=this&&this!==tt&&this instanceof y?g:e;++L<j;)F[L]=l[L];for(;I--;)F[L++]=arguments[++S];return wt(W,f?o:this,F)}return y}function Bu(e){return function(i,o,l){return l&&typeof l!="number"&&ct(i,o,l)&&(o=l=r),i=pn(i),o===r?(o=i,i=0):o=pn(o),l=l===r?i<o?1:-1:pn(l),e0(i,o,l,e)}}function Ds(e){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Nt(i),o=Nt(o)),e(i,o)}}function Vu(e,i,o,l,f,g,y,S,I,L){var j=i&N,F=j?y:r,W=j?r:y,Z=j?g:r,te=j?r:g;i|=j?J:q,i&=~(j?q:J),i&M||(i&=-4);var fe=[e,i,f,Z,F,te,W,S,I,L],ne=o.apply(r,fe);return Aa(e)&&nd(ne,fe),ne.placeholder=l,rd(ne,e,i)}function wa(e){var i=Ze[e];return function(o,l){if(o=Nt(o),l=l==null?0:it(ue(l),292),l&&ru(o)){var f=(Ce(o)+"e").split("e"),g=i(f[0]+"e"+(+f[1]+l));return f=(Ce(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-l))}return i(o)}}var m0=Cr&&1/cs(new Cr([,-0]))[1]==Re?function(e){return new Cr(e)}:Ba;function $u(e){return function(i){var o=st(i);return o==yt?qo(i):o==_t?Dg(i):Ig(i,e(i))}}function un(e,i,o,l,f,g,y,S){var I=i&D;if(!I&&typeof e!="function")throw new Mt(u);var L=l?l.length:0;if(L||(i&=-97,l=f=r),y=y===r?y:Ke(ue(y),0),S=S===r?S:ue(S),L-=f?f.length:0,i&q){var j=l,F=f;l=f=r}var W=I?r:xa(e),Z=[e,i,o,l,f,j,F,g,y,S];if(W&&O0(Z,W),e=Z[0],i=Z[1],o=Z[2],l=Z[3],f=Z[4],S=Z[9]=Z[9]===r?I?0:e.length:Ke(Z[9]-L,0),!S&&i&(N|U)&&(i&=-25),!i||i==A)var te=h0(e,i,o);else i==N||i==U?te=p0(e,i,S):(i==J||i==(A|J))&&!f.length?te=g0(e,i,o,l):te=Rs.apply(r,Z);var fe=W?Iu:nd;return rd(fe(te,Z),e,i)}function Gu(e,i,o,l){return e===r||Bt(e,Er[o])&&!Ae.call(l,o)?i:e}function Yu(e,i,o,l,f,g){return Ue(e)&&Ue(i)&&(g.set(i,e),Es(e,i,r,Yu,g),g.delete(i)),e}function v0(e){return Si(e)?r:e}function Xu(e,i,o,l,f,g){var y=o&O,S=e.length,I=i.length;if(S!=I&&!(y&&I>S))return!1;var L=g.get(e),j=g.get(i);if(L&&j)return L==i&&j==e;var F=-1,W=!0,Z=o&k?new Zn:r;for(g.set(e,i),g.set(i,e);++F<S;){var te=e[F],fe=i[F];if(l)var ne=y?l(fe,te,F,i,e,g):l(te,fe,F,e,i,g);if(ne!==r){if(ne)continue;W=!1;break}if(Z){if(!$o(i,function(ge,_e){if(!ci(Z,_e)&&(te===ge||f(te,ge,o,l,g)))return Z.push(_e)})){W=!1;break}}else if(!(te===fe||f(te,fe,o,l,g))){W=!1;break}}return g.delete(e),g.delete(i),W}function b0(e,i,o,l,f,g,y){switch(o){case In:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case xn:return!(e.byteLength!=i.byteLength||!g(new ps(e),new ps(i)));case Yt:case rn:case Xt:return Bt(+e,+i);case hr:return e.name==i.name&&e.message==i.message;case $n:case sn:return e==i+"";case yt:var S=qo;case _t:var I=l&O;if(S||(S=cs),e.size!=i.size&&!I)return!1;var L=y.get(e);if(L)return L==i;l|=k,y.set(e,i);var j=Xu(S(e),S(i),l,f,g,y);return y.delete(e),j;case gr:if(hi)return hi.call(e)==hi.call(i)}return!1}function y0(e,i,o,l,f,g){var y=o&O,S=Sa(e),I=S.length,L=Sa(i),j=L.length;if(I!=j&&!y)return!1;for(var F=I;F--;){var W=S[F];if(!(y?W in i:Ae.call(i,W)))return!1}var Z=g.get(e),te=g.get(i);if(Z&&te)return Z==i&&te==e;var fe=!0;g.set(e,i),g.set(i,e);for(var ne=y;++F<I;){W=S[F];var ge=e[W],_e=i[W];if(l)var It=y?l(_e,ge,W,i,e,g):l(ge,_e,W,e,i,g);if(!(It===r?ge===_e||f(ge,_e,o,l,g):It)){fe=!1;break}ne||(ne=W=="constructor")}if(fe&&!ne){var lt=e.constructor,Et=i.constructor;lt!=Et&&"constructor"in e&&"constructor"in i&&!(typeof lt=="function"&&lt instanceof lt&&typeof Et=="function"&&Et instanceof Et)&&(fe=!1)}return g.delete(e),g.delete(i),fe}function dn(e){return Ra(ed(e,r,ld),e+"")}function Sa(e){return pu(e,Qe,Ea)}function Ta(e){return pu(e,vt,Zu)}var xa=_s?function(e){return _s.get(e)}:Ba;function Ps(e){for(var i=e.name+"",o=Ar[i],l=Ae.call(Ar,i)?o.length:0;l--;){var f=o[l],g=f.func;if(g==null||g==e)return f.name}return i}function Mr(e){var i=Ae.call(p,"placeholder")?p:e;return i.placeholder}function ee(){var e=p.iteratee||Ha;return e=e===Ha?vu:e,arguments.length?e(arguments[0],arguments[1]):e}function Ls(e,i){var o=e.__data__;return C0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function Ia(e){for(var i=Qe(e),o=i.length;o--;){var l=i[o],f=e[l];i[o]=[l,f,Ju(f)]}return i}function Jn(e,i){var o=Rg(e,i);return mu(o)?o:r}function _0(e){var i=Ae.call(e,Yn),o=e[Yn];try{e[Yn]=r;var l=!0}catch{}var f=fs.call(e);return l&&(i?e[Yn]=o:delete e[Yn]),f}var Ea=Qo?function(e){return e==null?[]:(e=Oe(e),Cn(Qo(e),function(i){return tu.call(e,i)}))}:Va,Zu=Qo?function(e){for(var i=[];e;)An(i,Ea(e)),e=gs(e);return i}:Va,st=at;(ea&&st(new ea(new ArrayBuffer(1)))!=In||ui&&st(new ui)!=yt||ta&&st(ta.resolve())!=Kr||Cr&&st(new Cr)!=_t||di&&st(new di)!=Tn)&&(st=function(e){var i=at(e),o=i==kt?e.constructor:r,l=o?Qn(o):"";if(l)switch(l){case nm:return In;case rm:return yt;case im:return Kr;case sm:return _t;case om:return Tn}return i});function w0(e,i,o){for(var l=-1,f=o.length;++l<f;){var g=o[l],y=g.size;switch(g.type){case"drop":e+=y;break;case"dropRight":i-=y;break;case"take":i=it(i,e+y);break;case"takeRight":e=Ke(e,i-y);break}}return{start:e,end:i}}function S0(e){var i=e.match(Do);return i?i[1].split(_):[]}function Ku(e,i,o){i=Dn(i,e);for(var l=-1,f=i.length,g=!1;++l<f;){var y=qt(i[l]);if(!(g=e!=null&&o(e,y)))break;e=e[y]}return g||++l!=f?g:(f=e==null?0:e.length,!!f&&Ws(f)&&fn(y,f)&&(ce(e)||er(e)))}function T0(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&Ae.call(e,"index")&&(o.index=e.index,o.input=e.input),o}function qu(e){return typeof e.constructor=="function"&&!_i(e)?kr(gs(e)):{}}function x0(e,i,o){var l=e.constructor;switch(i){case xn:return ya(e);case Yt:case rn:return new l(+e);case In:return a0(e,o);case mr:case vr:case qr:case Jr:case Qr:case ei:case ti:case ni:case ri:return Du(e,o);case yt:return new l;case Xt:case sn:return new l(e);case $n:return c0(e);case _t:return new l;case gr:return l0(e)}}function I0(e,i){var o=i.length;if(!o)return e;var l=o-1;return i[l]=(o>1?"& ":"")+i[l],i=i.join(o>2?", ":" "),e.replace(Mo,`{
/* [wrapped with `+i+`] */
`)}function E0(e){return ce(e)||er(e)||!!(nu&&e&&e[nu])}function fn(e,i){var o=typeof e;return i=i??ke,!!i&&(o=="number"||o!="symbol"&&ze.test(e))&&e>-1&&e%1==0&&e<i}function ct(e,i,o){if(!Ue(o))return!1;var l=typeof i;return(l=="number"?mt(o)&&fn(i,o.length):l=="string"&&i in o)?Bt(o[i],e):!1}function Ca(e,i){if(ce(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||xt(e)?!0:ko.test(e)||!rs.test(e)||i!=null&&e in Oe(i)}function C0(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Aa(e){var i=Ps(e),o=p[i];if(typeof o!="function"||!(i in be.prototype))return!1;if(e===o)return!0;var l=xa(o);return!!l&&e===l[0]}function A0(e){return!!Jl&&Jl in e}var k0=us?hn:$a;function _i(e){var i=e&&e.constructor,o=typeof i=="function"&&i.prototype||Er;return e===o}function Ju(e){return e===e&&!Ue(e)}function Qu(e,i){return function(o){return o==null?!1:o[e]===i&&(i!==r||e in Oe(o))}}function R0(e){var i=zs(e,function(l){return o.size===m&&o.clear(),l}),o=i.cache;return i}function O0(e,i){var o=e[1],l=i[1],f=o|l,g=f<(A|D|Q),y=l==Q&&o==N||l==Q&&o==K&&e[7].length<=i[8]||l==(Q|K)&&i[7].length<=i[8]&&o==N;if(!(g||y))return e;l&A&&(e[2]=i[2],f|=o&A?0:M);var S=i[3];if(S){var I=e[3];e[3]=I?Lu(I,S,i[4]):S,e[4]=I?kn(e[3],b):i[4]}return S=i[5],S&&(I=e[5],e[5]=I?ju(I,S,i[6]):S,e[6]=I?kn(e[5],b):i[6]),S=i[7],S&&(e[7]=S),l&Q&&(e[8]=e[8]==null?i[8]:it(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=f,e}function M0(e){var i=[];if(e!=null)for(var o in Oe(e))i.push(o);return i}function D0(e){return fs.call(e)}function ed(e,i,o){return i=Ke(i===r?e.length-1:i,0),function(){for(var l=arguments,f=-1,g=Ke(l.length-i,0),y=R(g);++f<g;)y[f]=l[i+f];f=-1;for(var S=R(i+1);++f<i;)S[f]=l[f];return S[i]=o(y),wt(e,this,S)}}function td(e,i){return i.length<2?e:qn(e,Lt(i,0,-1))}function P0(e,i){for(var o=e.length,l=it(i.length,o),f=gt(e);l--;){var g=i[l];e[l]=fn(g,o)?f[g]:r}return e}function ka(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var nd=id(Iu),wi=Zg||function(e,i){return tt.setTimeout(e,i)},Ra=id(r0);function rd(e,i,o){var l=i+"";return Ra(e,I0(l,L0(S0(l),o)))}function id(e){var i=0,o=0;return function(){var l=Qg(),f=le-(l-o);if(o=l,f>0){if(++i>=Y)return arguments[0]}else i=0;return e.apply(r,arguments)}}function js(e,i){var o=-1,l=e.length,f=l-1;for(i=i===r?l:i;++o<i;){var g=fa(o,f),y=e[g];e[g]=e[o],e[o]=y}return e.length=i,e}var sd=R0(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Ro,function(o,l,f,g){i.push(f?g.replace(se,"$1"):l||o)}),i});function qt(e){if(typeof e=="string"||xt(e))return e;var i=e+"";return i=="0"&&1/e==-1/0?"-0":i}function Qn(e){if(e!=null){try{return ds.call(e)}catch{}try{return e+""}catch{}}return""}function L0(e,i){return Ot(Xr,function(o){var l="_."+o[0];i&o[1]&&!os(e,l)&&e.push(l)}),e.sort()}function od(e){if(e instanceof be)return e.clone();var i=new Dt(e.__wrapped__,e.__chain__);return i.__actions__=gt(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function j0(e,i,o){(o?ct(e,i,o):i===r)?i=1:i=Ke(ue(i),0);var l=e==null?0:e.length;if(!l||i<1)return[];for(var f=0,g=0,y=R(bs(l/i));f<l;)y[g++]=Lt(e,f,f+=i);return y}function N0(e){for(var i=-1,o=e==null?0:e.length,l=0,f=[];++i<o;){var g=e[i];g&&(f[l++]=g)}return f}function F0(){var e=arguments.length;if(!e)return[];for(var i=R(e-1),o=arguments[0],l=e;l--;)i[l-1]=arguments[l];return An(ce(o)?gt(o):[o],nt(i,1))}var U0=he(function(e,i){return Ve(e)?gi(e,nt(i,1,Ve,!0)):[]}),z0=he(function(e,i){var o=jt(i);return Ve(o)&&(o=r),Ve(e)?gi(e,nt(i,1,Ve,!0),ee(o,2)):[]}),H0=he(function(e,i){var o=jt(i);return Ve(o)&&(o=r),Ve(e)?gi(e,nt(i,1,Ve,!0),r,o):[]});function W0(e,i,o){var l=e==null?0:e.length;return l?(i=o||i===r?1:ue(i),Lt(e,i<0?0:i,l)):[]}function B0(e,i,o){var l=e==null?0:e.length;return l?(i=o||i===r?1:ue(i),i=l-i,Lt(e,0,i<0?0:i)):[]}function V0(e,i){return e&&e.length?As(e,ee(i,3),!0,!0):[]}function $0(e,i){return e&&e.length?As(e,ee(i,3),!0):[]}function G0(e,i,o,l){var f=e==null?0:e.length;return f?(o&&typeof o!="number"&&ct(e,i,o)&&(o=0,l=f),Fm(e,i,o,l)):[]}function ad(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=o==null?0:ue(o);return f<0&&(f=Ke(l+f,0)),as(e,ee(i,3),f)}function cd(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=l-1;return o!==r&&(f=ue(o),f=o<0?Ke(l+f,0):it(f,l-1)),as(e,ee(i,3),f,!0)}function ld(e){var i=e==null?0:e.length;return i?nt(e,1):[]}function Y0(e){var i=e==null?0:e.length;return i?nt(e,Re):[]}function X0(e,i){var o=e==null?0:e.length;return o?(i=i===r?1:ue(i),nt(e,i)):[]}function Z0(e){for(var i=-1,o=e==null?0:e.length,l={};++i<o;){var f=e[i];l[f[0]]=f[1]}return l}function ud(e){return e&&e.length?e[0]:r}function K0(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=o==null?0:ue(o);return f<0&&(f=Ke(l+f,0)),Sr(e,i,f)}function q0(e){var i=e==null?0:e.length;return i?Lt(e,0,-1):[]}var J0=he(function(e){var i=je(e,va);return i.length&&i[0]===e[0]?aa(i):[]}),Q0=he(function(e){var i=jt(e),o=je(e,va);return i===jt(o)?i=r:o.pop(),o.length&&o[0]===e[0]?aa(o,ee(i,2)):[]}),ev=he(function(e){var i=jt(e),o=je(e,va);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===e[0]?aa(o,r,i):[]});function tv(e,i){return e==null?"":qg.call(e,i)}function jt(e){var i=e==null?0:e.length;return i?e[i-1]:r}function nv(e,i,o){var l=e==null?0:e.length;if(!l)return-1;var f=l;return o!==r&&(f=ue(o),f=f<0?Ke(l+f,0):it(f,l-1)),i===i?Lg(e,i,f):as(e,Vl,f,!0)}function rv(e,i){return e&&e.length?wu(e,ue(i)):r}var iv=he(dd);function dd(e,i){return e&&e.length&&i&&i.length?da(e,i):e}function sv(e,i,o){return e&&e.length&&i&&i.length?da(e,i,ee(o,2)):e}function ov(e,i,o){return e&&e.length&&i&&i.length?da(e,i,r,o):e}var av=dn(function(e,i){var o=e==null?0:e.length,l=ra(e,i);return xu(e,je(i,function(f){return fn(f,o)?+f:f}).sort(Pu)),l});function cv(e,i){var o=[];if(!(e&&e.length))return o;var l=-1,f=[],g=e.length;for(i=ee(i,3);++l<g;){var y=e[l];i(y,l,e)&&(o.push(y),f.push(l))}return xu(e,f),o}function Oa(e){return e==null?e:tm.call(e)}function lv(e,i,o){var l=e==null?0:e.length;return l?(o&&typeof o!="number"&&ct(e,i,o)?(i=0,o=l):(i=i==null?0:ue(i),o=o===r?l:ue(o)),Lt(e,i,o)):[]}function uv(e,i){return Cs(e,i)}function dv(e,i,o){return pa(e,i,ee(o,2))}function fv(e,i){var o=e==null?0:e.length;if(o){var l=Cs(e,i);if(l<o&&Bt(e[l],i))return l}return-1}function hv(e,i){return Cs(e,i,!0)}function pv(e,i,o){return pa(e,i,ee(o,2),!0)}function gv(e,i){var o=e==null?0:e.length;if(o){var l=Cs(e,i,!0)-1;if(Bt(e[l],i))return l}return-1}function mv(e){return e&&e.length?Eu(e):[]}function vv(e,i){return e&&e.length?Eu(e,ee(i,2)):[]}function bv(e){var i=e==null?0:e.length;return i?Lt(e,1,i):[]}function yv(e,i,o){return e&&e.length?(i=o||i===r?1:ue(i),Lt(e,0,i<0?0:i)):[]}function _v(e,i,o){var l=e==null?0:e.length;return l?(i=o||i===r?1:ue(i),i=l-i,Lt(e,i<0?0:i,l)):[]}function wv(e,i){return e&&e.length?As(e,ee(i,3),!1,!0):[]}function Sv(e,i){return e&&e.length?As(e,ee(i,3)):[]}var Tv=he(function(e){return Mn(nt(e,1,Ve,!0))}),xv=he(function(e){var i=jt(e);return Ve(i)&&(i=r),Mn(nt(e,1,Ve,!0),ee(i,2))}),Iv=he(function(e){var i=jt(e);return i=typeof i=="function"?i:r,Mn(nt(e,1,Ve,!0),r,i)});function Ev(e){return e&&e.length?Mn(e):[]}function Cv(e,i){return e&&e.length?Mn(e,ee(i,2)):[]}function Av(e,i){return i=typeof i=="function"?i:r,e&&e.length?Mn(e,r,i):[]}function Ma(e){if(!(e&&e.length))return[];var i=0;return e=Cn(e,function(o){if(Ve(o))return i=Ke(o.length,i),!0}),Zo(i,function(o){return je(e,Go(o))})}function fd(e,i){if(!(e&&e.length))return[];var o=Ma(e);return i==null?o:je(o,function(l){return wt(i,r,l)})}var kv=he(function(e,i){return Ve(e)?gi(e,i):[]}),Rv=he(function(e){return ma(Cn(e,Ve))}),Ov=he(function(e){var i=jt(e);return Ve(i)&&(i=r),ma(Cn(e,Ve),ee(i,2))}),Mv=he(function(e){var i=jt(e);return i=typeof i=="function"?i:r,ma(Cn(e,Ve),r,i)}),Dv=he(Ma);function Pv(e,i){return Ru(e||[],i||[],pi)}function Lv(e,i){return Ru(e||[],i||[],bi)}var jv=he(function(e){var i=e.length,o=i>1?e[i-1]:r;return o=typeof o=="function"?(e.pop(),o):r,fd(e,o)});function hd(e){var i=p(e);return i.__chain__=!0,i}function Nv(e,i){return i(e),e}function Ns(e,i){return i(e)}var Fv=dn(function(e){var i=e.length,o=i?e[0]:0,l=this.__wrapped__,f=function(g){return ra(g,e)};return i>1||this.__actions__.length||!(l instanceof be)||!fn(o)?this.thru(f):(l=l.slice(o,+o+(i?1:0)),l.__actions__.push({func:Ns,args:[f],thisArg:r}),new Dt(l,this.__chain__).thru(function(g){return i&&!g.length&&g.push(r),g}))});function Uv(){return hd(this)}function zv(){return new Dt(this.value(),this.__chain__)}function Hv(){this.__values__===r&&(this.__values__=Cd(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function Wv(){return this}function Bv(e){for(var i,o=this;o instanceof Ss;){var l=od(o);l.__index__=0,l.__values__=r,i?f.__wrapped__=l:i=l;var f=l;o=o.__wrapped__}return f.__wrapped__=e,i}function Vv(){var e=this.__wrapped__;if(e instanceof be){var i=e;return this.__actions__.length&&(i=new be(this)),i=i.reverse(),i.__actions__.push({func:Ns,args:[Oa],thisArg:r}),new Dt(i,this.__chain__)}return this.thru(Oa)}function $v(){return ku(this.__wrapped__,this.__actions__)}var Gv=ks(function(e,i,o){Ae.call(e,o)?++e[o]:ln(e,o,1)});function Yv(e,i,o){var l=ce(e)?Wl:Nm;return o&&ct(e,i,o)&&(i=r),l(e,ee(i,3))}function Xv(e,i){var o=ce(e)?Cn:fu;return o(e,ee(i,3))}var Zv=zu(ad),Kv=zu(cd);function qv(e,i){return nt(Fs(e,i),1)}function Jv(e,i){return nt(Fs(e,i),Re)}function Qv(e,i,o){return o=o===r?1:ue(o),nt(Fs(e,i),o)}function pd(e,i){var o=ce(e)?Ot:On;return o(e,ee(i,3))}function gd(e,i){var o=ce(e)?bg:du;return o(e,ee(i,3))}var eb=ks(function(e,i,o){Ae.call(e,o)?e[o].push(i):ln(e,o,[i])});function tb(e,i,o,l){e=mt(e)?e:Pr(e),o=o&&!l?ue(o):0;var f=e.length;return o<0&&(o=Ke(f+o,0)),Bs(e)?o<=f&&e.indexOf(i,o)>-1:!!f&&Sr(e,i,o)>-1}var nb=he(function(e,i,o){var l=-1,f=typeof i=="function",g=mt(e)?R(e.length):[];return On(e,function(y){g[++l]=f?wt(i,y,o):mi(y,i,o)}),g}),rb=ks(function(e,i,o){ln(e,o,i)});function Fs(e,i){var o=ce(e)?je:bu;return o(e,ee(i,3))}function ib(e,i,o,l){return e==null?[]:(ce(i)||(i=i==null?[]:[i]),o=l?r:o,ce(o)||(o=o==null?[]:[o]),Su(e,i,o))}var sb=ks(function(e,i,o){e[o?0:1].push(i)},function(){return[[],[]]});function ob(e,i,o){var l=ce(e)?Vo:Gl,f=arguments.length<3;return l(e,ee(i,4),o,f,On)}function ab(e,i,o){var l=ce(e)?yg:Gl,f=arguments.length<3;return l(e,ee(i,4),o,f,du)}function cb(e,i){var o=ce(e)?Cn:fu;return o(e,Hs(ee(i,3)))}function lb(e){var i=ce(e)?au:t0;return i(e)}function ub(e,i,o){(o?ct(e,i,o):i===r)?i=1:i=ue(i);var l=ce(e)?Mm:n0;return l(e,i)}function db(e){var i=ce(e)?Dm:i0;return i(e)}function fb(e){if(e==null)return 0;if(mt(e))return Bs(e)?xr(e):e.length;var i=st(e);return i==yt||i==_t?e.size:la(e).length}function hb(e,i,o){var l=ce(e)?$o:s0;return o&&ct(e,i,o)&&(i=r),l(e,ee(i,3))}var pb=he(function(e,i){if(e==null)return[];var o=i.length;return o>1&&ct(e,i[0],i[1])?i=[]:o>2&&ct(i[0],i[1],i[2])&&(i=[i[0]]),Su(e,nt(i,1),[])}),Us=Xg||function(){return tt.Date.now()};function gb(e,i){if(typeof i!="function")throw new Mt(u);return e=ue(e),function(){if(--e<1)return i.apply(this,arguments)}}function md(e,i,o){return i=o?r:i,i=e&&i==null?e.length:i,un(e,Q,r,r,r,r,i)}function vd(e,i){var o;if(typeof i!="function")throw new Mt(u);return e=ue(e),function(){return--e>0&&(o=i.apply(this,arguments)),e<=1&&(i=r),o}}var Da=he(function(e,i,o){var l=A;if(o.length){var f=kn(o,Mr(Da));l|=J}return un(e,l,i,o,f)}),bd=he(function(e,i,o){var l=A|D;if(o.length){var f=kn(o,Mr(bd));l|=J}return un(i,l,e,o,f)});function yd(e,i,o){i=o?r:i;var l=un(e,N,r,r,r,r,r,i);return l.placeholder=yd.placeholder,l}function _d(e,i,o){i=o?r:i;var l=un(e,U,r,r,r,r,r,i);return l.placeholder=_d.placeholder,l}function wd(e,i,o){var l,f,g,y,S,I,L=0,j=!1,F=!1,W=!0;if(typeof e!="function")throw new Mt(u);i=Nt(i)||0,Ue(o)&&(j=!!o.leading,F="maxWait"in o,g=F?Ke(Nt(o.maxWait)||0,i):g,W="trailing"in o?!!o.trailing:W);function Z($e){var Vt=l,gn=f;return l=f=r,L=$e,y=e.apply(gn,Vt),y}function te($e){return L=$e,S=wi(ge,i),j?Z($e):y}function fe($e){var Vt=$e-I,gn=$e-L,zd=i-Vt;return F?it(zd,g-gn):zd}function ne($e){var Vt=$e-I,gn=$e-L;return I===r||Vt>=i||Vt<0||F&&gn>=g}function ge(){var $e=Us();if(ne($e))return _e($e);S=wi(ge,fe($e))}function _e($e){return S=r,W&&l?Z($e):(l=f=r,y)}function It(){S!==r&&Ou(S),L=0,l=I=f=S=r}function lt(){return S===r?y:_e(Us())}function Et(){var $e=Us(),Vt=ne($e);if(l=arguments,f=this,I=$e,Vt){if(S===r)return te(I);if(F)return Ou(S),S=wi(ge,i),Z(I)}return S===r&&(S=wi(ge,i)),y}return Et.cancel=It,Et.flush=lt,Et}var mb=he(function(e,i){return uu(e,1,i)}),vb=he(function(e,i,o){return uu(e,Nt(i)||0,o)});function bb(e){return un(e,X)}function zs(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Mt(u);var o=function(){var l=arguments,f=i?i.apply(this,l):l[0],g=o.cache;if(g.has(f))return g.get(f);var y=e.apply(this,l);return o.cache=g.set(f,y)||g,y};return o.cache=new(zs.Cache||cn),o}zs.Cache=cn;function Hs(e){if(typeof e!="function")throw new Mt(u);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function yb(e){return vd(2,e)}var _b=o0(function(e,i){i=i.length==1&&ce(i[0])?je(i[0],St(ee())):je(nt(i,1),St(ee()));var o=i.length;return he(function(l){for(var f=-1,g=it(l.length,o);++f<g;)l[f]=i[f].call(this,l[f]);return wt(e,this,l)})}),Pa=he(function(e,i){var o=kn(i,Mr(Pa));return un(e,J,r,i,o)}),Sd=he(function(e,i){var o=kn(i,Mr(Sd));return un(e,q,r,i,o)}),wb=dn(function(e,i){return un(e,K,r,r,r,i)});function Sb(e,i){if(typeof e!="function")throw new Mt(u);return i=i===r?i:ue(i),he(e,i)}function Tb(e,i){if(typeof e!="function")throw new Mt(u);return i=i==null?0:Ke(ue(i),0),he(function(o){var l=o[i],f=Pn(o,0,i);return l&&An(f,l),wt(e,this,f)})}function xb(e,i,o){var l=!0,f=!0;if(typeof e!="function")throw new Mt(u);return Ue(o)&&(l="leading"in o?!!o.leading:l,f="trailing"in o?!!o.trailing:f),wd(e,i,{leading:l,maxWait:i,trailing:f})}function Ib(e){return md(e,1)}function Eb(e,i){return Pa(ba(i),e)}function Cb(){if(!arguments.length)return[];var e=arguments[0];return ce(e)?e:[e]}function Ab(e){return Pt(e,E)}function kb(e,i){return i=typeof i=="function"?i:r,Pt(e,E,i)}function Rb(e){return Pt(e,w|E)}function Ob(e,i){return i=typeof i=="function"?i:r,Pt(e,w|E,i)}function Mb(e,i){return i==null||lu(e,i,Qe(i))}function Bt(e,i){return e===i||e!==e&&i!==i}var Db=Ds(oa),Pb=Ds(function(e,i){return e>=i}),er=gu(function(){return arguments}())?gu:function(e){return He(e)&&Ae.call(e,"callee")&&!tu.call(e,"callee")},ce=R.isArray,Lb=jl?St(jl):Bm;function mt(e){return e!=null&&Ws(e.length)&&!hn(e)}function Ve(e){return He(e)&&mt(e)}function jb(e){return e===!0||e===!1||He(e)&&at(e)==Yt}var Ln=Kg||$a,Nb=Nl?St(Nl):Vm;function Fb(e){return He(e)&&e.nodeType===1&&!Si(e)}function Ub(e){if(e==null)return!0;if(mt(e)&&(ce(e)||typeof e=="string"||typeof e.splice=="function"||Ln(e)||Dr(e)||er(e)))return!e.length;var i=st(e);if(i==yt||i==_t)return!e.size;if(_i(e))return!la(e).length;for(var o in e)if(Ae.call(e,o))return!1;return!0}function zb(e,i){return vi(e,i)}function Hb(e,i,o){o=typeof o=="function"?o:r;var l=o?o(e,i):r;return l===r?vi(e,i,r,o):!!l}function La(e){if(!He(e))return!1;var i=at(e);return i==hr||i==fr||typeof e.message=="string"&&typeof e.name=="string"&&!Si(e)}function Wb(e){return typeof e=="number"&&ru(e)}function hn(e){if(!Ue(e))return!1;var i=at(e);return i==Bn||i==Ji||i==Zr||i==pr}function Td(e){return typeof e=="number"&&e==ue(e)}function Ws(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ke}function Ue(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function He(e){return e!=null&&typeof e=="object"}var xd=Fl?St(Fl):Gm;function Bb(e,i){return e===i||ca(e,i,Ia(i))}function Vb(e,i,o){return o=typeof o=="function"?o:r,ca(e,i,Ia(i),o)}function $b(e){return Id(e)&&e!=+e}function Gb(e){if(k0(e))throw new ae(c);return mu(e)}function Yb(e){return e===null}function Xb(e){return e==null}function Id(e){return typeof e=="number"||He(e)&&at(e)==Xt}function Si(e){if(!He(e)||at(e)!=kt)return!1;var i=gs(e);if(i===null)return!0;var o=Ae.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&ds.call(o)==Vg}var ja=Ul?St(Ul):Ym;function Zb(e){return Td(e)&&e>=-9007199254740991&&e<=ke}var Ed=zl?St(zl):Xm;function Bs(e){return typeof e=="string"||!ce(e)&&He(e)&&at(e)==sn}function xt(e){return typeof e=="symbol"||He(e)&&at(e)==gr}var Dr=Hl?St(Hl):Zm;function Kb(e){return e===r}function qb(e){return He(e)&&st(e)==Tn}function Jb(e){return He(e)&&at(e)==Qi}var Qb=Ds(ua),e2=Ds(function(e,i){return e<=i});function Cd(e){if(!e)return[];if(mt(e))return Bs(e)?Ht(e):gt(e);if(li&&e[li])return Mg(e[li]());var i=st(e),o=i==yt?qo:i==_t?cs:Pr;return o(e)}function pn(e){if(!e)return e===0?e:0;if(e=Nt(e),e===Re||e===-1/0){var i=e<0?-1:1;return i*Ye}return e===e?e:0}function ue(e){var i=pn(e),o=i%1;return i===i?o?i-o:i:0}function Ad(e){return e?Kn(ue(e),0,oe):0}function Nt(e){if(typeof e=="number")return e;if(xt(e))return ht;if(Ue(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Ue(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Yl(e);var o=pe.test(e);return o||Fe.test(e)?gg(e.slice(2),o?2:8):ve.test(e)?ht:+e}function kd(e){return Kt(e,vt(e))}function t2(e){return e?Kn(ue(e),-9007199254740991,ke):e===0?e:0}function Ce(e){return e==null?"":Tt(e)}var n2=Rr(function(e,i){if(_i(i)||mt(i)){Kt(i,Qe(i),e);return}for(var o in i)Ae.call(i,o)&&pi(e,o,i[o])}),Rd=Rr(function(e,i){Kt(i,vt(i),e)}),Vs=Rr(function(e,i,o,l){Kt(i,vt(i),e,l)}),r2=Rr(function(e,i,o,l){Kt(i,Qe(i),e,l)}),i2=dn(ra);function s2(e,i){var o=kr(e);return i==null?o:cu(o,i)}var o2=he(function(e,i){e=Oe(e);var o=-1,l=i.length,f=l>2?i[2]:r;for(f&&ct(i[0],i[1],f)&&(l=1);++o<l;)for(var g=i[o],y=vt(g),S=-1,I=y.length;++S<I;){var L=y[S],j=e[L];(j===r||Bt(j,Er[L])&&!Ae.call(e,L))&&(e[L]=g[L])}return e}),a2=he(function(e){return e.push(r,Yu),wt(Od,r,e)});function c2(e,i){return Bl(e,ee(i,3),Zt)}function l2(e,i){return Bl(e,ee(i,3),sa)}function u2(e,i){return e==null?e:ia(e,ee(i,3),vt)}function d2(e,i){return e==null?e:hu(e,ee(i,3),vt)}function f2(e,i){return e&&Zt(e,ee(i,3))}function h2(e,i){return e&&sa(e,ee(i,3))}function p2(e){return e==null?[]:Is(e,Qe(e))}function g2(e){return e==null?[]:Is(e,vt(e))}function Na(e,i,o){var l=e==null?r:qn(e,i);return l===r?o:l}function m2(e,i){return e!=null&&Ku(e,i,Um)}function Fa(e,i){return e!=null&&Ku(e,i,zm)}var v2=Wu(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=fs.call(i)),e[i]=o},za(bt)),b2=Wu(function(e,i,o){i!=null&&typeof i.toString!="function"&&(i=fs.call(i)),Ae.call(e,i)?e[i].push(o):e[i]=[o]},ee),y2=he(mi);function Qe(e){return mt(e)?ou(e):la(e)}function vt(e){return mt(e)?ou(e,!0):Km(e)}function _2(e,i){var o={};return i=ee(i,3),Zt(e,function(l,f,g){ln(o,i(l,f,g),l)}),o}function w2(e,i){var o={};return i=ee(i,3),Zt(e,function(l,f,g){ln(o,f,i(l,f,g))}),o}var S2=Rr(function(e,i,o){Es(e,i,o)}),Od=Rr(function(e,i,o,l){Es(e,i,o,l)}),T2=dn(function(e,i){var o={};if(e==null)return o;var l=!1;i=je(i,function(g){return g=Dn(g,e),l||(l=g.length>1),g}),Kt(e,Ta(e),o),l&&(o=Pt(o,w|T|E,v0));for(var f=i.length;f--;)ga(o,i[f]);return o});function x2(e,i){return Md(e,Hs(ee(i)))}var I2=dn(function(e,i){return e==null?{}:Jm(e,i)});function Md(e,i){if(e==null)return{};var o=je(Ta(e),function(l){return[l]});return i=ee(i),Tu(e,o,function(l,f){return i(l,f[0])})}function E2(e,i,o){i=Dn(i,e);var l=-1,f=i.length;for(f||(f=1,e=r);++l<f;){var g=e==null?r:e[qt(i[l])];g===r&&(l=f,g=o),e=hn(g)?g.call(e):g}return e}function C2(e,i,o){return e==null?e:bi(e,i,o)}function A2(e,i,o,l){return l=typeof l=="function"?l:r,e==null?e:bi(e,i,o,l)}var Dd=$u(Qe),Pd=$u(vt);function k2(e,i,o){var l=ce(e),f=l||Ln(e)||Dr(e);if(i=ee(i,4),o==null){var g=e&&e.constructor;f?o=l?new g:[]:Ue(e)?o=hn(g)?kr(gs(e)):{}:o={}}return(f?Ot:Zt)(e,function(y,S,I){return i(o,y,S,I)}),o}function R2(e,i){return e==null?!0:ga(e,i)}function O2(e,i,o){return e==null?e:Au(e,i,ba(o))}function M2(e,i,o,l){return l=typeof l=="function"?l:r,e==null?e:Au(e,i,ba(o),l)}function Pr(e){return e==null?[]:Ko(e,Qe(e))}function D2(e){return e==null?[]:Ko(e,vt(e))}function P2(e,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Nt(o),o=o===o?o:0),i!==r&&(i=Nt(i),i=i===i?i:0),Kn(Nt(e),i,o)}function L2(e,i,o){return i=pn(i),o===r?(o=i,i=0):o=pn(o),e=Nt(e),Hm(e,i,o)}function j2(e,i,o){if(o&&typeof o!="boolean"&&ct(e,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof e=="boolean"&&(o=e,e=r)),e===r&&i===r?(e=0,i=1):(e=pn(e),i===r?(i=e,e=0):i=pn(i)),e>i){var l=e;e=i,i=l}if(o||e%1||i%1){var f=iu();return it(e+f*(i-e+pg("1e-"+((f+"").length-1))),i)}return fa(e,i)}var N2=Or(function(e,i,o){return i=i.toLowerCase(),e+(o?Ld(i):i)});function Ld(e){return Ua(Ce(e).toLowerCase())}function jd(e){return e=Ce(e),e&&e.replace(pt,Cg).replace(ig,"")}function F2(e,i,o){e=Ce(e),i=Tt(i);var l=e.length;o=o===r?l:Kn(ue(o),0,l);var f=o;return o-=i.length,o>=0&&e.slice(o,f)==i}function U2(e){return e=Ce(e),e&&Co.test(e)?e.replace(yr,Ag):e}function z2(e){return e=Ce(e),e&&is.test(e)?e.replace(_r,"\\$&"):e}var H2=Or(function(e,i,o){return e+(o?"-":"")+i.toLowerCase()}),W2=Or(function(e,i,o){return e+(o?" ":"")+i.toLowerCase()}),B2=Uu("toLowerCase");function V2(e,i,o){e=Ce(e),i=ue(i);var l=i?xr(e):0;if(!i||l>=i)return e;var f=(i-l)/2;return Ms(ys(f),o)+e+Ms(bs(f),o)}function $2(e,i,o){e=Ce(e),i=ue(i);var l=i?xr(e):0;return i&&l<i?e+Ms(i-l,o):e}function G2(e,i,o){e=Ce(e),i=ue(i);var l=i?xr(e):0;return i&&l<i?Ms(i-l,o)+e:e}function Y2(e,i,o){return o||i==null?i=0:i&&(i=+i),em(Ce(e).replace(oi,""),i||0)}function X2(e,i,o){return(o?ct(e,i,o):i===r)?i=1:i=ue(i),ha(Ce(e),i)}function Z2(){var e=arguments,i=Ce(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var K2=Or(function(e,i,o){return e+(o?"_":"")+i.toLowerCase()});function q2(e,i,o){return o&&typeof o!="number"&&ct(e,i,o)&&(i=o=r),o=o===r?oe:o>>>0,o?(e=Ce(e),e&&(typeof i=="string"||i!=null&&!ja(i))&&(i=Tt(i),!i&&Tr(e))?Pn(Ht(e),0,o):e.split(i,o)):[]}var J2=Or(function(e,i,o){return e+(o?" ":"")+Ua(i)});function Q2(e,i,o){return e=Ce(e),o=o==null?0:Kn(ue(o),0,e.length),i=Tt(i),e.slice(o,o+i.length)==i}function ey(e,i,o){var l=p.templateSettings;o&&ct(e,i,o)&&(i=r),e=Ce(e),i=Vs({},i,l,Gu);var f=Vs({},i.imports,l.imports,Gu),g=Qe(f),y=Ko(f,g),S,I,L=0,j=i.interpolate||zt,F="__p += '",W=Jo((i.escape||zt).source+"|"+j.source+"|"+(j===si?Se:zt).source+"|"+(i.evaluate||zt).source+"|$","g"),Z="//# sourceURL="+(Ae.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lg+"]")+`
`;e.replace(W,function(ne,ge,_e,It,lt,Et){return _e||(_e=It),F+=e.slice(L,Et).replace(on,kg),ge&&(S=!0,F+=`' +
__e(`+ge+`) +
'`),lt&&(I=!0,F+=`';
`+lt+`;
__p += '`),_e&&(F+=`' +
((__t = (`+_e+`)) == null ? '' : __t) +
'`),L=Et+ne.length,ne}),F+=`';
`;var te=Ae.call(i,"variable")&&i.variable;if(!te)F=`with (obj) {
`+F+`
}
`;else if(V.test(te))throw new ae(d);F=(I?F.replace(ii,""):F).replace(es,"$1").replace(En,"$1;"),F="function("+(te||"obj")+`) {
`+(te?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(S?", __e = _.escape":"")+(I?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var fe=Fd(function(){return xe(g,Z+"return "+F).apply(r,y)});if(fe.source=F,La(fe))throw fe;return fe}function ty(e){return Ce(e).toLowerCase()}function ny(e){return Ce(e).toUpperCase()}function ry(e,i,o){if(e=Ce(e),e&&(o||i===r))return Yl(e);if(!e||!(i=Tt(i)))return e;var l=Ht(e),f=Ht(i),g=Xl(l,f),y=Zl(l,f)+1;return Pn(l,g,y).join("")}function iy(e,i,o){if(e=Ce(e),e&&(o||i===r))return e.slice(0,ql(e)+1);if(!e||!(i=Tt(i)))return e;var l=Ht(e),f=Zl(l,Ht(i))+1;return Pn(l,0,f).join("")}function sy(e,i,o){if(e=Ce(e),e&&(o||i===r))return e.replace(oi,"");if(!e||!(i=Tt(i)))return e;var l=Ht(e),f=Xl(l,Ht(i));return Pn(l,f).join("")}function oy(e,i){var o=re,l=ie;if(Ue(i)){var f="separator"in i?i.separator:f;o="length"in i?ue(i.length):o,l="omission"in i?Tt(i.omission):l}e=Ce(e);var g=e.length;if(Tr(e)){var y=Ht(e);g=y.length}if(o>=g)return e;var S=o-xr(l);if(S<1)return l;var I=y?Pn(y,0,S).join(""):e.slice(0,S);if(f===r)return I+l;if(y&&(S+=I.length-S),ja(f)){if(e.slice(S).search(f)){var L,j=I;for(f.global||(f=Jo(f.source,Ce(Ee.exec(f))+"g")),f.lastIndex=0;L=f.exec(j);)var F=L.index;I=I.slice(0,F===r?S:F)}}else if(e.indexOf(Tt(f),S)!=S){var W=I.lastIndexOf(f);W>-1&&(I=I.slice(0,W))}return I+l}function ay(e){return e=Ce(e),e&&ts.test(e)?e.replace(br,jg):e}var cy=Or(function(e,i,o){return e+(o?" ":"")+i.toUpperCase()}),Ua=Uu("toUpperCase");function Nd(e,i,o){return e=Ce(e),i=o?r:i,i===r?Og(e)?Ug(e):Sg(e):e.match(i)||[]}var Fd=he(function(e,i){try{return wt(e,r,i)}catch(o){return La(o)?o:new ae(o)}}),ly=dn(function(e,i){return Ot(i,function(o){o=qt(o),ln(e,o,Da(e[o],e))}),e});function uy(e){var i=e==null?0:e.length,o=ee();return e=i?je(e,function(l){if(typeof l[1]!="function")throw new Mt(u);return[o(l[0]),l[1]]}):[],he(function(l){for(var f=-1;++f<i;){var g=e[f];if(wt(g[0],this,l))return wt(g[1],this,l)}})}function dy(e){return jm(Pt(e,w))}function za(e){return function(){return e}}function fy(e,i){return e==null||e!==e?i:e}var hy=Hu(),py=Hu(!0);function bt(e){return e}function Ha(e){return vu(typeof e=="function"?e:Pt(e,w))}function gy(e){return yu(Pt(e,w))}function my(e,i){return _u(e,Pt(i,w))}var vy=he(function(e,i){return function(o){return mi(o,e,i)}}),by=he(function(e,i){return function(o){return mi(e,o,i)}});function Wa(e,i,o){var l=Qe(i),f=Is(i,l);o==null&&!(Ue(i)&&(f.length||!l.length))&&(o=i,i=e,e=this,f=Is(i,Qe(i)));var g=!(Ue(o)&&"chain"in o)||!!o.chain,y=hn(e);return Ot(f,function(S){var I=i[S];e[S]=I,y&&(e.prototype[S]=function(){var L=this.__chain__;if(g||L){var j=e(this.__wrapped__),F=j.__actions__=gt(this.__actions__);return F.push({func:I,args:arguments,thisArg:e}),j.__chain__=L,j}return I.apply(e,An([this.value()],arguments))})}),e}function yy(){return tt._===this&&(tt._=$g),this}function Ba(){}function _y(e){return e=ue(e),he(function(i){return wu(i,e)})}var wy=_a(je),Sy=_a(Wl),Ty=_a($o);function Ud(e){return Ca(e)?Go(qt(e)):Qm(e)}function xy(e){return function(i){return e==null?r:qn(e,i)}}var Iy=Bu(),Ey=Bu(!0);function Va(){return[]}function $a(){return!1}function Cy(){return{}}function Ay(){return""}function ky(){return!0}function Ry(e,i){if(e=ue(e),e<1||e>ke)return[];var o=oe,l=it(e,oe);i=ee(i),e-=oe;for(var f=Zo(l,i);++o<e;)i(o);return f}function Oy(e){return ce(e)?je(e,qt):xt(e)?[e]:gt(sd(Ce(e)))}function My(e){var i=++Bg;return Ce(e)+i}var Dy=Os(function(e,i){return e+i},0),Py=wa("ceil"),Ly=Os(function(e,i){return e/i},1),jy=wa("floor");function Ny(e){return e&&e.length?xs(e,bt,oa):r}function Fy(e,i){return e&&e.length?xs(e,ee(i,2),oa):r}function Uy(e){return $l(e,bt)}function zy(e,i){return $l(e,ee(i,2))}function Hy(e){return e&&e.length?xs(e,bt,ua):r}function Wy(e,i){return e&&e.length?xs(e,ee(i,2),ua):r}var By=Os(function(e,i){return e*i},1),Vy=wa("round"),$y=Os(function(e,i){return e-i},0);function Gy(e){return e&&e.length?Xo(e,bt):0}function Yy(e,i){return e&&e.length?Xo(e,ee(i,2)):0}return p.after=gb,p.ary=md,p.assign=n2,p.assignIn=Rd,p.assignInWith=Vs,p.assignWith=r2,p.at=i2,p.before=vd,p.bind=Da,p.bindAll=ly,p.bindKey=bd,p.castArray=Cb,p.chain=hd,p.chunk=j0,p.compact=N0,p.concat=F0,p.cond=uy,p.conforms=dy,p.constant=za,p.countBy=Gv,p.create=s2,p.curry=yd,p.curryRight=_d,p.debounce=wd,p.defaults=o2,p.defaultsDeep=a2,p.defer=mb,p.delay=vb,p.difference=U0,p.differenceBy=z0,p.differenceWith=H0,p.drop=W0,p.dropRight=B0,p.dropRightWhile=V0,p.dropWhile=$0,p.fill=G0,p.filter=Xv,p.flatMap=qv,p.flatMapDeep=Jv,p.flatMapDepth=Qv,p.flatten=ld,p.flattenDeep=Y0,p.flattenDepth=X0,p.flip=bb,p.flow=hy,p.flowRight=py,p.fromPairs=Z0,p.functions=p2,p.functionsIn=g2,p.groupBy=eb,p.initial=q0,p.intersection=J0,p.intersectionBy=Q0,p.intersectionWith=ev,p.invert=v2,p.invertBy=b2,p.invokeMap=nb,p.iteratee=Ha,p.keyBy=rb,p.keys=Qe,p.keysIn=vt,p.map=Fs,p.mapKeys=_2,p.mapValues=w2,p.matches=gy,p.matchesProperty=my,p.memoize=zs,p.merge=S2,p.mergeWith=Od,p.method=vy,p.methodOf=by,p.mixin=Wa,p.negate=Hs,p.nthArg=_y,p.omit=T2,p.omitBy=x2,p.once=yb,p.orderBy=ib,p.over=wy,p.overArgs=_b,p.overEvery=Sy,p.overSome=Ty,p.partial=Pa,p.partialRight=Sd,p.partition=sb,p.pick=I2,p.pickBy=Md,p.property=Ud,p.propertyOf=xy,p.pull=iv,p.pullAll=dd,p.pullAllBy=sv,p.pullAllWith=ov,p.pullAt=av,p.range=Iy,p.rangeRight=Ey,p.rearg=wb,p.reject=cb,p.remove=cv,p.rest=Sb,p.reverse=Oa,p.sampleSize=ub,p.set=C2,p.setWith=A2,p.shuffle=db,p.slice=lv,p.sortBy=pb,p.sortedUniq=mv,p.sortedUniqBy=vv,p.split=q2,p.spread=Tb,p.tail=bv,p.take=yv,p.takeRight=_v,p.takeRightWhile=wv,p.takeWhile=Sv,p.tap=Nv,p.throttle=xb,p.thru=Ns,p.toArray=Cd,p.toPairs=Dd,p.toPairsIn=Pd,p.toPath=Oy,p.toPlainObject=kd,p.transform=k2,p.unary=Ib,p.union=Tv,p.unionBy=xv,p.unionWith=Iv,p.uniq=Ev,p.uniqBy=Cv,p.uniqWith=Av,p.unset=R2,p.unzip=Ma,p.unzipWith=fd,p.update=O2,p.updateWith=M2,p.values=Pr,p.valuesIn=D2,p.without=kv,p.words=Nd,p.wrap=Eb,p.xor=Rv,p.xorBy=Ov,p.xorWith=Mv,p.zip=Dv,p.zipObject=Pv,p.zipObjectDeep=Lv,p.zipWith=jv,p.entries=Dd,p.entriesIn=Pd,p.extend=Rd,p.extendWith=Vs,Wa(p,p),p.add=Dy,p.attempt=Fd,p.camelCase=N2,p.capitalize=Ld,p.ceil=Py,p.clamp=P2,p.clone=Ab,p.cloneDeep=Rb,p.cloneDeepWith=Ob,p.cloneWith=kb,p.conformsTo=Mb,p.deburr=jd,p.defaultTo=fy,p.divide=Ly,p.endsWith=F2,p.eq=Bt,p.escape=U2,p.escapeRegExp=z2,p.every=Yv,p.find=Zv,p.findIndex=ad,p.findKey=c2,p.findLast=Kv,p.findLastIndex=cd,p.findLastKey=l2,p.floor=jy,p.forEach=pd,p.forEachRight=gd,p.forIn=u2,p.forInRight=d2,p.forOwn=f2,p.forOwnRight=h2,p.get=Na,p.gt=Db,p.gte=Pb,p.has=m2,p.hasIn=Fa,p.head=ud,p.identity=bt,p.includes=tb,p.indexOf=K0,p.inRange=L2,p.invoke=y2,p.isArguments=er,p.isArray=ce,p.isArrayBuffer=Lb,p.isArrayLike=mt,p.isArrayLikeObject=Ve,p.isBoolean=jb,p.isBuffer=Ln,p.isDate=Nb,p.isElement=Fb,p.isEmpty=Ub,p.isEqual=zb,p.isEqualWith=Hb,p.isError=La,p.isFinite=Wb,p.isFunction=hn,p.isInteger=Td,p.isLength=Ws,p.isMap=xd,p.isMatch=Bb,p.isMatchWith=Vb,p.isNaN=$b,p.isNative=Gb,p.isNil=Xb,p.isNull=Yb,p.isNumber=Id,p.isObject=Ue,p.isObjectLike=He,p.isPlainObject=Si,p.isRegExp=ja,p.isSafeInteger=Zb,p.isSet=Ed,p.isString=Bs,p.isSymbol=xt,p.isTypedArray=Dr,p.isUndefined=Kb,p.isWeakMap=qb,p.isWeakSet=Jb,p.join=tv,p.kebabCase=H2,p.last=jt,p.lastIndexOf=nv,p.lowerCase=W2,p.lowerFirst=B2,p.lt=Qb,p.lte=e2,p.max=Ny,p.maxBy=Fy,p.mean=Uy,p.meanBy=zy,p.min=Hy,p.minBy=Wy,p.stubArray=Va,p.stubFalse=$a,p.stubObject=Cy,p.stubString=Ay,p.stubTrue=ky,p.multiply=By,p.nth=rv,p.noConflict=yy,p.noop=Ba,p.now=Us,p.pad=V2,p.padEnd=$2,p.padStart=G2,p.parseInt=Y2,p.random=j2,p.reduce=ob,p.reduceRight=ab,p.repeat=X2,p.replace=Z2,p.result=E2,p.round=Vy,p.runInContext=x,p.sample=lb,p.size=fb,p.snakeCase=K2,p.some=hb,p.sortedIndex=uv,p.sortedIndexBy=dv,p.sortedIndexOf=fv,p.sortedLastIndex=hv,p.sortedLastIndexBy=pv,p.sortedLastIndexOf=gv,p.startCase=J2,p.startsWith=Q2,p.subtract=$y,p.sum=Gy,p.sumBy=Yy,p.template=ey,p.times=Ry,p.toFinite=pn,p.toInteger=ue,p.toLength=Ad,p.toLower=ty,p.toNumber=Nt,p.toSafeInteger=t2,p.toString=Ce,p.toUpper=ny,p.trim=ry,p.trimEnd=iy,p.trimStart=sy,p.truncate=oy,p.unescape=ay,p.uniqueId=My,p.upperCase=cy,p.upperFirst=Ua,p.each=pd,p.eachRight=gd,p.first=ud,Wa(p,function(){var e={};return Zt(p,function(i,o){Ae.call(p.prototype,o)||(e[o]=i)}),e}(),{chain:!1}),p.VERSION=s,Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Ot(["drop","take"],function(e,i){be.prototype[e]=function(o){o=o===r?1:Ke(ue(o),0);var l=this.__filtered__&&!i?new be(this):this.clone();return l.__filtered__?l.__takeCount__=it(o,l.__takeCount__):l.__views__.push({size:it(o,oe),type:e+(l.__dir__<0?"Right":"")}),l},be.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),Ot(["filter","map","takeWhile"],function(e,i){var o=i+1,l=o==we||o==Te;be.prototype[e]=function(f){var g=this.clone();return g.__iteratees__.push({iteratee:ee(f,3),type:o}),g.__filtered__=g.__filtered__||l,g}}),Ot(["head","last"],function(e,i){var o="take"+(i?"Right":"");be.prototype[e]=function(){return this[o](1).value()[0]}}),Ot(["initial","tail"],function(e,i){var o="drop"+(i?"":"Right");be.prototype[e]=function(){return this.__filtered__?new be(this):this[o](1)}}),be.prototype.compact=function(){return this.filter(bt)},be.prototype.find=function(e){return this.filter(e).head()},be.prototype.findLast=function(e){return this.reverse().find(e)},be.prototype.invokeMap=he(function(e,i){return typeof e=="function"?new be(this):this.map(function(o){return mi(o,e,i)})}),be.prototype.reject=function(e){return this.filter(Hs(ee(e)))},be.prototype.slice=function(e,i){e=ue(e);var o=this;return o.__filtered__&&(e>0||i<0)?new be(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),i!==r&&(i=ue(i),o=i<0?o.dropRight(-i):o.take(i-e)),o)},be.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},be.prototype.toArray=function(){return this.take(oe)},Zt(be.prototype,function(e,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),l=/^(?:head|last)$/.test(i),f=p[l?"take"+(i=="last"?"Right":""):i],g=l||/^find/.test(i);f&&(p.prototype[i]=function(){var y=this.__wrapped__,S=l?[1]:arguments,I=y instanceof be,L=S[0],j=I||ce(y),F=function(ge){var _e=f.apply(p,An([ge],S));return l&&W?_e[0]:_e};j&&o&&typeof L=="function"&&L.length!=1&&(I=j=!1);var W=this.__chain__,Z=!!this.__actions__.length,te=g&&!W,fe=I&&!Z;if(!g&&j){y=fe?y:new be(this);var ne=e.apply(y,S);return ne.__actions__.push({func:Ns,args:[F],thisArg:r}),new Dt(ne,W)}return te&&fe?e.apply(this,S):(ne=this.thru(F),te?l?ne.value()[0]:ne.value():ne)})}),Ot(["pop","push","shift","sort","splice","unshift"],function(e){var i=ls[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var f=arguments;if(l&&!this.__chain__){var g=this.value();return i.apply(ce(g)?g:[],f)}return this[o](function(y){return i.apply(ce(y)?y:[],f)})}}),Zt(be.prototype,function(e,i){var o=p[i];if(o){var l=o.name+"";Ae.call(Ar,l)||(Ar[l]=[]),Ar[l].push({name:i,func:o})}}),Ar[Rs(r,D).name]=[{name:"wrapper",func:r}],be.prototype.clone=am,be.prototype.reverse=cm,be.prototype.value=lm,p.prototype.at=Fv,p.prototype.chain=Uv,p.prototype.commit=zv,p.prototype.next=Hv,p.prototype.plant=Bv,p.prototype.reverse=Vv,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=$v,p.prototype.first=p.prototype.head,li&&(p.prototype[li]=Wv),p},Ir=zg();Gn?((Gn.exports=Ir)._=Ir,Ho._=Ir):tt._=Ir}).call(Ti)})(to,to.exports);var Ie=to.exports;const R3=()=>{const{trackItemIds:t,trackItemsMap:n,fps:r,trackItemDetailsMap:s}=tn(),a=Ie.merge(n,s);return v.jsx(v.Fragment,{children:t.map(c=>{const u=a[c];return Tp[u.type](u,{fps:r})})})},xp=()=>{const t=G.useRef(null),{setPlayerRef:n,duration:r,fps:s,size:a}=tn();return G.useEffect(()=>{n(t)},[]),v.jsx(Rf.Flex,{className:"size-full",children:v.jsx(Zy.Player,{ref:t,component:R3,durationInFrames:Math.round(r/1e3*s)||5*30,compositionWidth:1920,compositionHeight:1080,style:{width:"100%",height:"100%"},inputProps:{},fps:s,controls:!0})})},Ip=({scrollLeft:t})=>{const n=G.useRef(null),{playerRef:r,fps:s,scale:a}=tn(),c=mo(r??void 0),u=Ge(c/s*1e3,a.zoom)-t,[d,h]=G.useState(!1),[m,b]=G.useState(0),[w,T]=G.useState(u),E=()=>{h(!1)},O=A=>{h(!0);const D="touches"in A?A.touches[0].clientX:A.clientX;b(D),T(u)},k=A=>{if(d){const M=("touches"in A?A.touches[0].clientX:A.clientX)-m,N=w+M,U=Fn(N,a.zoom);r?.current?.seekTo(U*s/1e3)}};return G.useEffect(()=>{const A=D=>{D.preventDefault()};return d?(document.addEventListener("mousemove",k),document.addEventListener("mouseup",E),document.addEventListener("touchmove",k),document.addEventListener("touchend",E),document.addEventListener("dragstart",A)):(document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",E)),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",E),document.removeEventListener("dragstart",A)}},[d,k,E]),v.jsx("div",{ref:n,role:"button",tabIndex:0,onMouseDown:A=>{O(A)},onTouchStart:A=>{O(A)},onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&O(A)},style:{position:"absolute",left:40+go+u,top:80,width:1,height:"calc(100% - 80px)",background:"#d4d4d8",zIndex:10,cursor:"pointer"},children:v.jsxs("div",{className:"relative h-full",children:[v.jsx("div",{className:"absolute top-0  h-full w-3 -translate-x-1/2"}),v.jsx("div",{className:"absolute top-0  h-full w-0.5 -translate-x-1/2 bg-white/50"}),v.jsx("div",{style:{borderRadius:"0 0 20px 20px"},className:"absolute h-3 -translate-x-1/2 px-1.5",children:v.jsx("svg",{height:"12",viewBox:"0 0 12 12",fill:"none",children:v.jsx("path",{fill:"currentColor",d:"M11.6585 7.04881L6.6585 11.4238C6.28148 11.7537 5.71852 11.7537 5.3415 11.4238L0.341495 7.04881C0.12448 6.85892 0 6.58459 0 6.29623V1C0 0.447715 0.447715 0 1 0H11C11.5523 0 12 0.447715 12 1V6.29623C12 6.58459 11.8755 6.85892 11.6585 7.04881Z"})})})]})})},Ep=t=>{const{height:n=40,longLineSize:r=8,shortLineSize:s=6,offsetX:a=eo+go,textOffsetY:c=12,textFormat:u=rp,scrollLeft:d=0,onClick:h}=t,{scale:m}=tn(),b=G.useRef(null),[w,T]=G.useState(null),[E,O]=G.useState({width:0,height:n});G.useEffect(()=>{const M=b.current;if(M){const N=M.getContext("2d");T(N),k(M,N,d)}},[]),G.useEffect(()=>{w&&k(b.current,w,d)},[w,d,m]);const k=(M,N,U)=>{if(!M||!N)return;const q=M.offsetParent.offsetWidth??M.offsetWidth,Q=E.height;M.width=q,M.height=Q,A(N,U,q,Q),O({width:q,height:Q})},A=(M,N,U,J)=>{const q=m.zoom,Q=m.unit,K=m.segments;M.clearRect(0,0,U,J),M.save(),M.strokeStyle="#71717a",M.fillStyle="#71717a",M.lineWidth=1,M.font=`${qh}px ${Jh}`,M.textBaseline="top",M.translate(.5,0),M.beginPath();const X=Q*q*Gi,re=Math.floor(N/X),Y=Math.ceil((N+U)/X)-re;for(let le=0;le<=Y;++le){const we=le+re;if(we<0)continue;const De=we*X/q,Te=(De-N/q)*q;if(Te<-X||Te>=U+X)continue;const Re=u(De),Ye=-M.measureText(Re).width/2;M.fillText(Re,Te+Ye+a,c)}for(let le=0;le<=Y;++le){const we=le+re;if(we<0)continue;const Te=we*X-N+a;for(let Re=0;Re<K;++Re){const ke=Te+Re/K*X;if(ke<0||ke>=U)continue;const Ye=Re%K?s:r;Ye===s?M.strokeStyle="#a1a1aa":M.strokeStyle="#d4d4d8";const ht=32,[oe,Wn]=[ke,ht],[dr,Xr]=[oe,Wn+Ye];M.beginPath(),M.moveTo(oe,Wn),M.lineTo(dr,Xr),M.stroke()}}M.restore()},D=M=>{const N=b.current;if(!N)return;const U=N.getBoundingClientRect(),q=M.clientX-U.left+d-eo;h?.(q)};return v.jsx("div",{className:"border-border border-t",style:{position:"relative",width:"100%",height:`${E.height}px`,backgroundColor:"transparent"},children:v.jsx("canvas",{onClick:D,ref:b,height:E.height})})},Cp=()=>v.jsx(Rf.Flex,{flexGrow:"1",justify:"center",width:"100%",height:"100%",className:"bg-scene py-3",children:v.jsx("div",{className:"max-w-3xl flex-1  w-full h-full flex relative",children:v.jsx(xp,{})})});class Ap{___eventListeners;___activeObjects;constructor(){this.___activeObjects=[],this.___eventListeners={}}pauseEventListeners(){this.___eventListeners=this.__eventListeners,this.__eventListeners={};const n=this.getActiveObjects();this.discardActiveObject(),this.___activeObjects=n}resumeEventListeners(){this.__eventListeners=this.___eventListeners,this.___eventListeners={};const n=this.___activeObjects;if(!n.length)return this.requestRenderAll(),!1;if(n.length===1)this.setActiveObject(n[0]);else{const r=new B.ActiveSelection(n);this.setActiveObject(r)}this.requestRenderAll()}}class nr extends B.Rect{isSelected=!1;text;tScale;display;id;backgroundColor;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default",fontSize:16,fontFamily:"Arial",fontColor:"#ffffff",textAlign:"center"};static type="Text";constructor(n){super(n),Object.assign(this,nr.ownDefaults),this.id=n.id,this.tScale=n.tScale,this.display=n.display,this.text=n.text||"",this.backgroundColor=n.backgroundColor||"transparent"}static createControls(){return{controls:nl()}}static getDefaults(){return{...super.getDefaults(),...nr.ownDefaults}}setSelected(n){this.isSelected=n,this.set({dirty:!0})}_render(n){super._render(n),this.updateSelected(n)}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,6),n.lineWidth=2,n.strokeStyle="rgba(0, 216, 214,1.0)",n.stroke(),n.restore())}}function _n(t,n,r,s,a){t.save(),t.translate(n,r),t.rotate(B.util.degreesToRadians(90+a.angle)),t.beginPath(),t.lineWidth=4,t.lineCap="round",t.strokeStyle="#dfe2e8",t.moveTo(-6,0),t.lineTo(6,0),t.stroke(),t.restore()}function nl(){return{mr:new B.Control({x:.5,y:0,actionHandler:ji,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:_n}),ml:new B.Control({x:-.5,y:0,actionHandler:ji,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:_n})}}const ji=B.controlsUtils.wrapWithFireEvent("resizing",B.controlsUtils.wrapWithFixedAnchor((t,n,r,s)=>{const a=B.controlsUtils.getLocalPoint(n,n.originX,n.originY,r,s);if(O3(n.originX)||D3(n.originX)&&a.x<0||M3(n.originX)&&a.x>0){const c=n.target,u=c.strokeWidth/(c.strokeUniform?c.scaleX:1),d=P3(n)?2:1,h=c.width,m=Math.ceil(Math.abs(a.x*d/c.scaleX)-u);if(n.corner==="ml"){const w=h-m;if(c.left+w<0)return c.set("width",c.width+c.left),!0}return c.set("width",Math.max(m,0)),h!==c.width}return!1})),kp={left:-.5,top:-.5,center:0,bottom:.5,right:.5},me=t=>typeof t=="string"?kp[t]:t-.5,O3=t=>me(t)===me("center"),M3=t=>me(t)===me("left"),D3=t=>me(t)===me("right");function P3(t){return me(t.originX)===me("center")&&me(t.originY)===me("center")}B.classRegistry.setClass(nr,"Text");class Ft extends B.Rect{static type="Transition";id;duration;fromId;toId;static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0, 0, 0, 0.5)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};isSelected=!1;constructor(n){super(n),this.id=n.id,this.fromId=n.fromId,this.toId=n.toId,Object.assign(this,{duration:n.duration,fromId:n.fromId,toId:n.toId,kind:n.kind,tScale:n.tScale,strokeDashArray:n.strokeDashArray||[],isSelected:!1,centeredScaling:!0,strokeWidth:0}),Object.assign(this,Ft.ownDefaults)}static createControls(){return{controls:L3()}}static getDefaults(){return{...super.getDefaults(),...Ft.ownDefaults}}updateCoords(){}_render(n){super._render(n),this.updateSelected(n)}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,this.strokeDashArray&&n.setLineDash(this.strokeDashArray),n.strokeStyle=this.isSelected?"rgba(255, 255, 255,1.0)":"rgba(255, 255, 255,0.15)",n.stroke(),n.restore()}}B.classRegistry.setClass(Ft,"Transition");const L3=()=>({mr:new B.Control({x:.5,y:0,actionHandler:af,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:_n}),ml:new B.Control({x:-.5,y:0,actionHandler:af,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:_n})});B.classRegistry.setClass(Ft,"Transition");const{wrapWithFireEvent:j3,getLocalPoint:N3}=B.controlsUtils,bc="center",F3="left",U3="right";function z3(t){return(n,r,s,a)=>{const{target:c,originX:u,originY:d}=r,h=c.getRelativeCenterPoint(),m=c.translateToOriginPoint(h,u,d),b=t(n,r,s,a);return c.setPositionByOrigin(m,u,d),b}}const H3=(t,n,r,s)=>{const a=N3(n,n.originX,n.originY,r,s);if(me(n.originX)===me(bc)||me(n.originX)===me(U3)&&a.x<0||me(n.originX)===me(F3)&&a.x>0){const{target:c}=n,u=c.strokeWidth/(c.strokeUniform?c.scaleX:1),d=W3(n)?2:1,h=c.width,m=Math.ceil(Math.abs(a.x*d/c.scaleX)-u),b=Fn(m,c.tScale);return b>=1500||b<500?!1:(c.set("width",Math.max(m,0)),c.set("duration",b),c.setCoords(),c.canvas&&c.canvas.renderAll(),h!==c.width)}return!1};function W3(t){return me(t.originX)===me(bc)&&me(t.originY)===me(bc)}const af=j3("resizing",z3(H3));class Fr extends B.Rect{static type="Placeholder";guideItemId;distXToActCenter;trackItemType;defaultPos;draggedObject=null;for;id;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",strokeWidth:0,fill:"rgba(255, 211, 42, 0.1)",stroke:"rgba(255, 211, 42, 1.0)",selectable:!1,borderOpacityWhenMoving:1,hoverCursor:"default",strokeDashArray:[5,1],evented:!1};constructor(n){super(n),this.id=n.id,this.for=n.for,Object.assign(this,Fr.ownDefaults)}static getDefaults(){return{...super.getDefaults(),...Fr.ownDefaults}}_render(n){super._render(n),this.updateSelected(n)}updateSelected(n){n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,this.strokeDashArray&&n.setLineDash(this.strokeDashArray),n.strokeStyle="rgba(0, 216, 214,1.0)",n.stroke(),n.restore()}}B.classRegistry.setClass(Fr,"Placeholder");const B3={top:{top:35,guideHeight:2,bottom:3},center:{top:3,guideHeight:2,bottom:3},bottom:{top:3,guideHeight:2,bottom:35}},Xi="rgba(0, 216, 214, 1.0)",Ka=(t,n,r)=>new B.Rect({top:t,left:0,strokeWidth:0,fill:"transparent",selectable:!0,height:r,width:n});class ki extends B.Group{static type="Helper";static defaultSettings={selectable:!1,evented:!1};static ownDefaults={...ki.defaultSettings};guide;topGuide;bottomGuide;id;metadata={};tScale;kind;constructor(n){const r=B3[n.kind],s=Ka(0,n.width,r.top),a=Ka(r.top,n.width,r.guideHeight),c=Ka(r.top+r.guideHeight,n.width,r.bottom);super([s,a,c],{...ki.defaultSettings,...n}),this.topGuide=s,this.guide=a,this.bottomGuide=c,this.id=n.id,this.metadata=n.metadata??{},this.tScale=n.tScale,this.kind=n.kind}static getDefaults(){return{...super.getDefaults(),...ki.defaultSettings}}updateCoords(n){this.scaleToWidth(n),this.set("scaleY",1)}setSelected(n){this.guide.set("fill",n?Xi:"transparent")}}const Gr=ki;B.classRegistry.setClass(Gr,"Helper");class Un extends B.Rect{static ownDefaults={selectable:!1,evented:!1,strokeWidth:0,stroke:"transparent"};static type="Track";id;accepts;metadata;items;borderColor="transparent";stroke="transparent";strokeWidth=0;constructor(n){super(n),Object.assign(this,Un.ownDefaults),this.id=n.id,this.accepts=n.accepts||["audio","video","image","text"],this.items=n.items||[],this.metadata=n.metadata}static getDefaults(){return{...super.getDefaults(),...Un.ownDefaults}}updateCoords(n){this.width=n}}B.classRegistry.setClass(Un,"Track");class no extends B.Rect{isSelected;tScale;display;id;src;itemType;static ownDefaults={rx:8,ry:8,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",fill:"#27272a"};static type="Image";constructor(n){super(n),this.itemType="image",this.isSelected=!1,Object.assign(this,no.ownDefaults),this.id=n.id,this.src=n.src,this.display=n.display,this.tScale=n.tScale}static createControls(){return{controls:nl()}}static getDefaults(){return{...super.getDefaults(),...no.ownDefaults}}_render(n){super._render(n),this.updateSelected(n)}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,n.strokeStyle=Xi,n.stroke(),n.restore())}}const bo=no;B.classRegistry.setClass(bo,"Image");class lr extends B.Rect{id;tScale;isSelected=!1;display;trim;static type="Video";static defaultProps={objectCaching:!1,rx:8,ry:8,fill:"#27272a"};constructor(n){super(Object.assign({},lr.defaultProps,n)),this.id=n.id,this.tScale=n.tScale,this.display=n.display,this.trim=n.trim}static createControls(){return{controls:Rp()}}_render(n){super._render(n),this.updateSelected(n)}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=2,n.strokeStyle=Xi,n.stroke(),n.restore())}}B.classRegistry.setClass(lr,"Video");const Rp=()=>({mr:new B.Control({x:.5,y:0,render:_n,actionHandler:cf,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new B.Control({x:-.5,y:0,render:_n,actionHandler:cf,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:V3,getLocalPoint:$3}=B.controlsUtils,G3=(t,n,r,s)=>{const a=$3(n,n.originX,n.originY,r,s);if(me(n.originX)===me("center")||me(n.originX)===me("right")&&a.x<0||me(n.originX)===me("left")&&a.x>0){const{target:c}=n;return c.width!==c.width}return!1};function rl(t){return(n,r,s,a)=>{const{target:c,originX:u,originY:d}=r,h=c.getRelativeCenterPoint(),m=c.translateToOriginPoint(h,u,d),b=t(n,r,s,a);return c.setPositionByOrigin(m,u,d),b}}const cf=V3("resizing",rl(G3));class yn extends B.Rect{id;itemType="audio";isSelected=!1;trim;src;tScale;display;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default"};static type="Audio";constructor(n){super({...yn.getDefaults(),...n}),this.id=n.id,this.tScale=n.tScale,this.display=n.display,this.trim=n.trim,this.src=n.src}static getDefaults(){return{...super.getDefaults(),...yn.ownDefaults}}static createControls(){return{controls:Op()}}setSelected(n){this.isSelected=n,this.set({dirty:!0})}_render(n){super._render(n),this.updateSelected(n)}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,yn.ownDefaults.rx),n.lineWidth=2,n.strokeStyle=Xi,n.stroke(),n.restore())}}B.classRegistry.setClass(yn,"Audio");const Op=()=>({mr:new B.Control({x:.5,y:0,render:_n,actionHandler:lf,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new B.Control({x:-.5,y:0,render:_n,actionHandler:lf,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:Y3,getLocalPoint:X3}=B.controlsUtils,Z3=(t,n,r,s)=>{const a=X3(n,n.originX,n.originY,r,s);if(me(n.originX)===me("center")||me(n.originX)===me("right")&&a.x<0||me(n.originX)===me("left")&&a.x>0){const{target:c}=n,u=c.strokeWidth/(c.strokeUniform?c.scaleX:1),d=K3(n)?2:1,h=c.width,m=Math.ceil(Math.abs(a.x*d/c.scaleX)-u);if(n.corner==="mr"){const b=c.trim.to,w=m-h,T=Fn(w,c.tScale),E=b+T;if(E>c.duration)return!1;c.set("width",Math.max(m,0)),c.trim.to=E}else{if(c.left<0)return!1;const b=h-m;if(c.left+b<0)return c.set("width",c.width+c.left),!0;const w=m-h,T=c.trim.from,E=Fn(w,c.tScale),O=T-E;if(O<0)return!1;c.set("width",Math.max(m,0)),c.trim.from=O}return h!==c.width}return!1};function K3(t){return me(t.originX)===me("center")&&me(t.originY)===me("center")}const lf=Y3("resizing",rl(Z3));class Ni extends B.Rect{static type="TransitionGuide";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0,0,0,0.85)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};tScale;duration=0;fromId;toId;itemType="none";isSelected=!1;id;constructor(n){super(n),Object.assign(this,Ni.ownDefaults),this.id=n.id}static createControls(){return{controls:Mp()}}static getDefaults(){return{...super.getDefaults(),...Ni.ownDefaults}}updateCoords(){const n=this.canvas;if(!n)return;const r=n.getObjects().find(c=>c.id===this.fromId);if(!r)return;const s=Ge(this.duration,this.tScale),a=r.left+r.width-s/2;this.set({width:s,left:a})}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M3 5.30359C3 3.93159 4.659 3.24359 5.629 4.21359L11.997 10.5826L10.583 11.9966L5 6.41359V17.5856L10.586 11.9996L10.583 11.9966L11.997 10.5826L12 10.5856L18.371 4.21459C19.341 3.24459 21 3.93159 21 5.30359V18.6956C21 20.0676 19.341 20.7556 18.371 19.7856L12 13.5L13.414 11.9996L19 17.5866V6.41359L13.414 11.9996L13.421 12.0056L12.006 13.4206L12 13.4136L5.629 19.7846C4.659 20.7546 3 20.0676 3 18.6956V5.30359Z");n.save(),n.translate(-12,-12),n.fillStyle="#ffffff",n.fill(r),n.restore()}setSelected(n){this.isSelected=n,this.set({dirty:!0})}updateSelected(n){this.isSelected&&(n.save(),n.beginPath(),n.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),n.lineWidth=1,n.strokeStyle="rgba(255, 255, 255,1.0)",n.stroke(),n.restore())}}function Mp(){return{mr:new B.Control({x:.5,y:0,actionHandler:ji,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:uf}),ml:new B.Control({x:-.5,y:0,actionHandler:ji,cursorStyleHandler:B.controlsUtils.scaleSkewCursorStyleHandler,actionName:"resizing",render:uf})}}function uf(t,n,r,s,a){t.save(),t.translate(n,r),t.rotate(B.util.degreesToRadians(90+a.angle)),t.lineWidth=6,t.lineCap="round",t.strokeStyle="white",t.beginPath(),t.moveTo(-6,0),t.lineTo(6,0),t.stroke(),t.lineWidth=4,t.strokeStyle="black",t.beginPath(),t.moveTo(-6,0),t.lineTo(6,0),t.stroke(),t.restore()}class Fi extends B.Rect{static type="PreviewTrackItem";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",rx:4,ry:4};duration=0;fromId="";toId="";isSelected=!1;name;durationString;id;constructor(n){super(n),Object.assign(this,Fi.ownDefaults),this.id=n.id,this.name=n.name||"item",this.durationString="00:05",this.fill="#27272a"}static getDefaults(){return{...super.getDefaults(),...Fi.ownDefaults}}_render(n){n.save(),super._render(n),n.beginPath(),n.rect(-this.width/2,-this.height/2,this.width,this.height),n.clip(),this.drawTextIdentity(n),n.restore()}drawTextIdentity(n){n.font="600 12px 'Geist variable'",n.textAlign="left";const h=n.measureText(this.name).width,m=n.measureText(this.durationString).width,b=-this.height/2+4,w=-this.width/2,T=w+h+8*2+4,E=h+8*2;this.drawRoundedRect(n,w,b,E,20,4),n.fillStyle="#f4f4f5",n.fillText(this.name,w+8,b+12+2);const O=m+8*2;this.drawRoundedRect(n,T,b,O,20,4),n.fillStyle="#f4f4f5",n.fillText(this.durationString,T+8,b+12+2)}drawRoundedRect(n,r,s,a,c,u){n.fillStyle="rgba(0, 0, 0, 0.5)",n.roundRect?(n.beginPath(),n.roundRect(r,s,a,c,u),n.fill()):n.fillRect(r,s,a,c)}}function Dp(t,n){n.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(s=>{if(s!=="constructor"){const a=Object.getOwnPropertyDescriptor(r.prototype,s);a&&Object.defineProperty(t.prototype,s,a)}})})}const yo=(t,n)=>{const r={x:t.size.width/2,y:t.size.height/2},s={x:n.width/2,y:n.height/2},a=r.x-s.x,c=r.y-s.y,u=Math.min(t.size.width/n.width,t.size.height/n.height);return{top:`${c}px`,left:`${a}px`,transform:`scale(${u})`}},Pp=t=>new Promise((n,r)=>{const s=new Audio;s.preload="auto",s.addEventListener("loadedmetadata",()=>{const a=s.duration*1e3;n({duration:a})}),s.addEventListener("error",a=>{r(a)}),s.src=t,s.crossOrigin="anonymous",s.load()}),Lp=t=>new Promise((n,r)=>{const s=new Image;console.warn("Consider updating CDN config for CORS issues?"),s.onload=()=>{const a=s.width,c=s.height;n({width:a,height:c})},s.onerror=a=>{r(a)},s.crossOrigin="anonymous",s.src=t}),jp=t=>new Promise((n,r)=>{const s=document.createElement("video");s.preload="auto",s.addEventListener("loadedmetadata",()=>{const a=s.duration*1e3,c=s.videoWidth,u=s.videoHeight;n({duration:a,width:c,height:u})}),s.addEventListener("error",a=>{r(a)}),s.src=t,s.load()}),Ri=(t,n)=>{const r=document.createElement("div");Object.keys(n).forEach(a=>{a!=="height"&&(r.style[a]=n[a])}),document.body.appendChild(r),r.textContent=t,r.style.width=`${n.width}px`,r.style.fontSize=`${n.fontSize}px`;const s=getComputedStyle(r).height;return document.body.removeChild(r),parseFloat(s)},Gt=t=>Object.keys(t).reduce((n,r)=>{const{display:{to:s}}=t[r];return Math.max(n,s)},0),Np=(t,n)=>{if(!t)return{from:0,to:n.duration};const{from:r,to:s}=t;return{from:r??0,to:s??n.duration}},Fp=(t,n)=>{const{duration:r,trim:s}=n,a=s?s.to-s.from:r||5e3,c={from:0,to:a};if(!t)return c;if(t.from!==void 0&&t.from<0)return console.error("'from' must be a non-negative number. Returning default display."),c;if(t.from!==void 0&&t.to===void 0)return{from:t.from,to:t.from+a};if(t.to!==void 0){if(t.to<0)return console.error("'to' must be a non-negative number. Returning default display."),c;if(t.to<t.from)return console.error("'to' must be greater than or equal to 'from'. Returning default display."),c}return t};function Up(t,n){return t.map(r=>{const s=r.items.filter(a=>!n.includes(a));return{...r,items:s}}).filter(r=>r.items.length>0)}const zp=async(t,n)=>{const r=t.details,s=await Lp(r.src),a=yo(n,s);return{id:t.id,type:"image",name:"",display:{from:n.origin||0,to:(n.origin||5e3)+5e3},details:{src:r.src||"",width:r.width||s.width||100,height:r.height||s.height||100,opacity:r.opacity??100,transform:a.transform,border:r.border||"none",borderRadius:r.borderRadius||"0",boxShadow:r.boxShadow||"none",top:a.top||"0px",left:a.left||"0px"},metadata:t.metadata||{}}},Hp=async(t,n)=>{const r=t.details.src,s=await jp(r),a=yo(n,{...s}),c=Np(t.trim,{duration:s.duration}),u={width:s.width,height:s.height,duration:s.duration,src:r,volume:t.details.volume??100,top:t.details.top||a.top||"0px",left:t.details.left||a.left||"0px",text:t.details.text};return{...t,trim:c,type:"video",details:u,display:Fp(t?.display,{duration:s.duration,trim:c})}},Wp=async t=>{const n=t.details,r=(await Pp(n.src)).duration,s=t?.display?.from??0;return{id:t.id,name:"",type:"audio",display:{from:s,to:s+r},trim:{from:0,to:r},details:{src:n.src,duration:r,volume:n.volume??100,text:n.text},metadata:{...t.metadata}}},q3=5e3,il=async(t,n)=>{const r=t.id;await hp([{fontFamily:t.details.fontFamily??"",fontUrl:t.details.fontUrl??""}]);const s={fontFamily:t.details.fontFamily??"Arial",fontSize:t.details.fontSize??"16px",fontWeight:t.details.fontWeight??"normal",fontStyle:t.details.fontStyle??"normal",textDecoration:t.details.textDecoration??"none",textAlign:t.details.textAlign??"left",lineHeight:t.details.lineHeight??"normal",letterSpacing:t.details.letterSpacing??"normal",wordSpacing:t.details.wordSpacing??"normal",color:t.details.color??"#ffffff",backgroundColor:t.details.backgroundColor??"transparent",border:t.details.border??"none",textShadow:t.details.textShadow??"none",text:t.details.text??"",opacity:t.details.opacity??100,width:t.details.width??300,wordWrap:t.details.wordWrap??"normal",wordBreak:t.details.wordBreak??"normal",WebkitTextStrokeColor:t.details.WebkitTextStrokeColor??"#ffffff",WebkitTextStrokeWidth:t.details.WebkitTextStrokeWidth??"0px",top:t.details.top??"0px",left:t.details.left??"0px"},a=Ri(t.details.text??"",s),c=yo(n,{width:s.width??0,height:a});return{id:r,name:"",type:"text",display:{from:0,to:q3},details:{...s,height:a,top:c.top,left:c.left,fontUrl:t.details.fontUrl,text:t.details.text??""},metadata:{}}},Bp=(t,n)=>{const r=t.display,s=Ge(r.from,n.tScale),a=Ge(r.to-r.from,n.tScale),c=B.classRegistry.getClass("Audio")||yn;return new c({width:a,height:42,top:10,left:s,id:t.id,display:r,text:t.details.text,trim:t.trim||{from:0,to:t.details.duration},duration:t.details.duration,src:t.details.src,tScale:n.tScale})},Vp=(t,n)=>{const r=Ge(t.display.from,n.tScale),s=Ge(t.details.duration||5e3,n.tScale),a=B.classRegistry.getClass("Image")||bo;return new a({width:s,height:42,id:t.id,src:t.details.src,tScale:n.tScale,top:10,left:r,display:t.display})},$p=(t,n)=>{const r=Ge(t.trim.from,n.tScale),s=Ge(t.trim.to-t.trim.from,n.tScale),a=B.classRegistry.getClass("Video")||lr;return new a({width:s,height:42,id:t.id,tScale:n.tScale,fill:"#333333",top:10,left:r,display:t.trim,trim:t.trim,text:t.details.text})},Gp=(t,n)=>{const r=t.display,s=Ge(r.from,n.tScale),a=Ge(r.to-r.from,n.tScale),c=B.classRegistry.getClass("Text")||nr;return new c({width:a,height:42,id:t.id,display:r,top:10,left:s,text:t.details.text,tScale:n.tScale})},Yp={video:42,image:42,audio:42,text:42,caption:42,template:42},Xp=(t={})=>{const n={...Yp,...t};return Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="number"))};let Zp=class extends yn{static type="Audio";text;constructor(n){super(n),this.text=n.text??"Audio"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M8.24092 0C8.24092 2.51565 10.2795 4.55419 12.7951 4.55419C12.9677 4.55419 13.1331 4.62274 13.2552 4.74475C13.3772 4.86676 13.4457 5.03224 13.4457 5.20479C13.4457 5.37734 13.3772 5.54282 13.2552 5.66483C13.1331 5.78685 12.9677 5.85539 12.7951 5.85539C11.9218 5.85605 11.0594 5.66105 10.2713 5.28471C9.48319 4.90838 8.78942 4.36027 8.24092 3.68066V13.8794C8.24094 14.8271 7.91431 15.7458 7.31606 16.4808C6.71781 17.2157 5.88451 17.722 4.95657 17.9143C4.02863 18.1066 3.06276 17.9731 2.22172 17.5364C1.38067 17.0997 0.715856 16.3865 0.339286 15.5169C-0.0372842 14.6473 -0.10259 13.6744 0.154372 12.7622C0.411334 11.8501 0.974857 11.0544 1.74999 10.5092C2.52512 9.96403 3.46449 9.7027 4.40981 9.76924C5.35512 9.83579 6.24861 10.2261 6.93972 10.8745V0H8.24092ZM6.93972 13.8794C6.93972 13.1317 6.6427 12.4146 6.11398 11.8859C5.58527 11.3572 4.86818 11.0602 4.12046 11.0602C3.37275 11.0602 2.65566 11.3572 2.12694 11.8859C1.59823 12.4146 1.3012 13.1317 1.3012 13.8794C1.3012 14.6272 1.59823 15.3443 2.12694 15.873C2.65566 16.4017 3.37275 16.6987 4.12046 16.6987C4.86818 16.6987 5.58527 16.4017 6.11398 15.873C6.6427 15.3443 6.93972 14.6272 6.93972 13.8794Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,10),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,14),n.translate(10,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}};class Kp extends lr{static type="Video";text;constructor(n){super(n),this.text=n.text??"Video"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M16.5625 0.925L12.5 3.275V0.625L11.875 0H0.625L0 0.625V9.375L0.625 10H11.875L12.5 9.375V6.875L16.5625 9.2125L17.5 8.625V1.475L16.5625 0.925ZM11.25 8.75H1.25V1.25H11.25V8.75ZM16.25 7.5L12.5 5.375V4.725L16.25 2.5V7.5Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,14),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,10),n.translate(8,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}}class sl extends nr{static type="Text";constructor(n){super(n),this.fill="#303030"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M6.23982 0.361968C6.18894 0.253743 6.10832 0.162234 6.00736 0.0981357C5.9064 0.034038 5.78929 0 5.6697 0C5.55012 0 5.433 0.034038 5.33204 0.0981357C5.23109 0.162234 5.15046 0.253743 5.09959 0.361968L0.0599035 11.0713C0.0246926 11.1462 0.00457285 11.2272 0.000693114 11.3099C-0.00318662 11.3925 0.00924959 11.4751 0.0372917 11.553C0.0939253 11.7102 0.210687 11.8384 0.361891 11.9095C0.513095 11.9806 0.686354 11.9888 0.843555 11.9322C1.00076 11.8755 1.12902 11.7588 1.20013 11.6075L2.51202 8.81998H8.82738L10.1393 11.6075C10.1745 11.6824 10.2241 11.7496 10.2853 11.8053C10.3465 11.861 10.418 11.9041 10.4958 11.9322C10.5737 11.9602 10.6563 11.9726 10.7389 11.9687C10.8216 11.9649 10.9026 11.9447 10.9775 11.9095C11.0524 11.8743 11.1196 11.8247 11.1753 11.7635C11.231 11.7023 11.2741 11.6308 11.3021 11.553C11.3302 11.4751 11.3426 11.3925 11.3387 11.3099C11.3348 11.2272 11.3147 11.1462 11.2795 11.0713L6.23982 0.361968ZM3.10498 7.56005L5.6697 2.11011L8.23443 7.56005H3.10498ZM15.1191 3.78029C14.1143 3.78029 13.3292 4.05354 12.7859 4.59294C12.6721 4.71153 12.6092 4.86987 12.6106 5.03419C12.6119 5.19851 12.6774 5.3558 12.7931 5.4725C12.9088 5.58921 13.0655 5.6561 13.2298 5.6589C13.3941 5.6617 13.553 5.60018 13.6726 5.48748C13.9718 5.19062 14.46 5.04021 15.1191 5.04021C16.1609 5.04021 17.009 5.74892 17.009 6.61511V6.86867C16.45 6.49465 15.7917 6.29663 15.1191 6.30013C13.382 6.30013 11.9693 7.57187 11.9693 9.13495C11.9693 10.698 13.382 11.9698 15.1191 11.9698C15.792 11.9727 16.4503 11.7739 17.009 11.3989C17.0168 11.566 17.0907 11.7231 17.2144 11.8357C17.3381 11.9483 17.5014 12.0071 17.6685 11.9993C17.8356 11.9915 17.9927 11.9176 18.1053 11.7939C18.2179 11.6702 18.2767 11.5069 18.2689 11.3398V6.61511C18.2689 5.05202 16.8562 3.78029 15.1191 3.78029ZM15.1191 10.7099C14.0773 10.7099 13.2292 10.0012 13.2292 9.13495C13.2292 8.26876 14.0773 7.56005 15.1191 7.56005C16.1609 7.56005 17.009 8.26876 17.009 9.13495C17.009 10.0012 16.1609 10.7099 15.1191 10.7099Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,12),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,12),n.translate(8,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}}let qp=class extends bo{static type="Image";text;constructor(n){super(n),this.text=n.text??"Image"}_render(n){super._render(n),this.drawTextIdentity(n),this.updateSelected(n)}drawTextIdentity(n){const r=new Path2D("M1.55556 0H14.4444C15.3031 0 16 0.696889 16 1.55556V14.4444C16 14.857 15.8361 15.2527 15.5444 15.5444C15.2527 15.8361 14.857 16 14.4444 16H1.55556C1.143 16 0.747335 15.8361 0.455612 15.5444C0.163889 15.2527 0 14.857 0 14.4444V1.55556C0 0.696889 0.696889 0 1.55556 0ZM14.4444 1.33333H1.55556C1.49662 1.33333 1.4401 1.35675 1.39842 1.39842C1.35675 1.4401 1.33333 1.49662 1.33333 1.55556V14.4444C1.33333 14.5671 1.43289 14.6667 1.55556 14.6667H1.72444L10.456 5.93511C10.6004 5.79065 10.7719 5.67605 10.9607 5.59787C11.1494 5.51968 11.3517 5.47944 11.556 5.47944C11.7603 5.47944 11.9626 5.51968 12.1513 5.59787C12.3401 5.67605 12.5116 5.79065 12.656 5.93511L14.6667 7.94578V1.55556C14.6667 1.49662 14.6433 1.4401 14.6016 1.39842C14.5599 1.35675 14.5034 1.33333 14.4444 1.33333ZM14.6667 9.83111L11.7129 6.87733C11.6922 6.85664 11.6677 6.84022 11.6407 6.82902C11.6137 6.81781 11.5848 6.81205 11.5556 6.81205C11.5263 6.81205 11.4974 6.81781 11.4704 6.82902C11.4434 6.84022 11.4189 6.85664 11.3982 6.87733L3.60978 14.6667H14.4444C14.5034 14.6667 14.5599 14.6433 14.6016 14.6016C14.6433 14.5599 14.6667 14.5034 14.6667 14.4444V9.83111ZM4.88889 7.11111C4.29952 7.11111 3.73429 6.87699 3.31754 6.46024C2.90079 6.04349 2.66667 5.47826 2.66667 4.88889C2.66667 4.29952 2.90079 3.73429 3.31754 3.31754C3.73429 2.90079 4.29952 2.66667 4.88889 2.66667C5.47826 2.66667 6.04349 2.90079 6.46024 3.31754C6.87699 3.73429 7.11111 4.29952 7.11111 4.88889C7.11111 5.47826 6.87699 6.04349 6.46024 6.46024C6.04349 6.87699 5.47826 7.11111 4.88889 7.11111ZM4.88889 5.77778C5.12464 5.77778 5.35073 5.68413 5.51743 5.51743C5.68413 5.35073 5.77778 5.12464 5.77778 4.88889C5.77778 4.65314 5.68413 4.42705 5.51743 4.26035C5.35073 4.09365 5.12464 4 4.88889 4C4.65314 4 4.42705 4.09365 4.26035 4.26035C4.09365 4.42705 4 4.65314 4 4.88889C4 5.12464 4.09365 5.35073 4.26035 5.51743C4.42705 5.68413 4.65314 5.77778 4.88889 5.77778Z");n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,12),n.font="600 12px 'Geist variable'",n.fillStyle="#f4f4f5",n.textAlign="left",n.clip(),n.fillText(this.text,36,12),n.translate(8,1),n.fillStyle="#f4f4f5",n.fill(r),n.restore()}};class Jp extends Un{static type="Track";constructor(n){super(n),this.fill="#18181b"}_render(n){super._render(n);const r=new Path2D("M14.4444 13.3263H11.0667C12.5384 12.3991 13.6259 10.9716 14.1289 9.30644C14.632 7.64131 14.5169 5.85051 13.8048 4.26348C13.0927 2.67645 11.8314 1.39993 10.2531 0.668736C8.67478 -0.0624548 6.8855 -0.199136 5.21442 0.283835C3.54334 0.766806 2.10285 1.83695 1.15794 3.2974C0.213035 4.75785 -0.172743 6.51038 0.0715766 8.23261C0.315896 9.95484 1.17388 11.5309 2.4877 12.671C3.80151 13.811 5.4828 14.4383 7.22227 14.4374H14.4444C14.5918 14.4374 14.7331 14.3789 14.8373 14.2747C14.9415 14.1705 15 14.0292 15 13.8819C15 13.7345 14.9415 13.5932 14.8373 13.489C14.7331 13.3848 14.5918 13.3263 14.4444 13.3263ZM1.1112 7.21523C1.1112 6.00658 1.46961 4.82506 2.14111 3.8201C2.8126 2.81514 3.76702 2.03187 4.88367 1.56934C6.00032 1.10681 7.22905 0.985789 8.41449 1.22159C9.59992 1.45738 10.6888 2.03941 11.5435 2.89405C12.3981 3.7487 12.9801 4.83759 13.2159 6.02302C13.4517 7.20845 13.3307 8.43719 12.8682 9.55384C12.4056 10.6705 11.6224 11.6249 10.6174 12.2964C9.61244 12.9679 8.43093 13.3263 7.22227 13.3263C5.60208 13.3245 4.04878 12.68 2.90313 11.5344C1.75748 10.3887 1.11304 8.83542 1.1112 7.21523ZM7.22227 5.54858C7.55191 5.54858 7.87414 5.45083 8.14822 5.2677C8.4223 5.08456 8.63592 4.82426 8.76206 4.51972C8.88821 4.21518 8.92121 3.88007 8.85691 3.55677C8.7926 3.23347 8.63386 2.9365 8.40078 2.70342C8.16769 2.47033 7.87072 2.3116 7.54742 2.24729C7.22412 2.18298 6.88901 2.21599 6.58447 2.34213C6.27993 2.46828 6.01964 2.6819 5.8365 2.95598C5.65337 3.23006 5.55562 3.55229 5.55562 3.88192C5.55562 4.32395 5.73121 4.74787 6.04377 5.06043C6.35633 5.37298 6.78025 5.54858 7.22227 5.54858ZM7.22227 3.32637C7.33215 3.32637 7.43956 3.35895 7.53092 3.42C7.62228 3.48104 7.69349 3.56781 7.73554 3.66932C7.77759 3.77084 7.78859 3.88254 7.76715 3.9903C7.74572 4.09807 7.6928 4.19706 7.61511 4.27476C7.53741 4.35245 7.43842 4.40536 7.33066 4.4268C7.22289 4.44824 7.11119 4.43723 7.00967 4.39519C6.90816 4.35314 6.82139 4.28193 6.76035 4.19057C6.69931 4.09921 6.66672 3.9918 6.66672 3.88192C6.66672 3.73458 6.72525 3.59327 6.82944 3.48909C6.93363 3.3849 7.07493 3.32637 7.22227 3.32637ZM8.88893 10.5485C8.88893 10.2189 8.79118 9.89668 8.60805 9.6226C8.42491 9.34852 8.16462 9.1349 7.86008 9.00875C7.55553 8.88261 7.22043 8.8496 6.89713 8.91391C6.57383 8.97822 6.27686 9.13695 6.04377 9.37004C5.81069 9.60313 5.65195 9.9001 5.58764 10.2234C5.52334 10.5467 5.55634 10.8818 5.68249 11.1863C5.80863 11.4909 6.02225 11.7512 6.29633 11.9343C6.57041 12.1175 6.89264 12.2152 7.22227 12.2152C7.6643 12.2152 8.08822 12.0396 8.40078 11.727C8.71334 11.4145 8.88893 10.9906 8.88893 10.5485ZM6.66672 10.5485C6.66672 10.4387 6.69931 10.3313 6.76035 10.2399C6.82139 10.1485 6.90816 10.0773 7.00967 10.0353C7.11119 9.99323 7.22289 9.98223 7.33066 10.0037C7.43842 10.0251 7.53741 10.078 7.61511 10.1557C7.6928 10.2334 7.74572 10.3324 7.76715 10.4402C7.78859 10.5479 7.77759 10.6596 7.73554 10.7611C7.69349 10.8627 7.62228 10.9494 7.53092 11.0105C7.43956 11.0715 7.33215 11.1041 7.22227 11.1041C7.07493 11.1041 6.93363 11.0456 6.82944 10.9414C6.72525 10.8372 6.66672 10.6959 6.66672 10.5485ZM10.5556 8.88189C10.8852 8.88189 11.2074 8.78414 11.4815 8.60101C11.7556 8.41787 11.9692 8.15758 12.0954 7.85303C12.2215 7.54849 12.2545 7.21338 12.1902 6.89008C12.1259 6.56678 11.9672 6.26982 11.7341 6.03673C11.501 5.80364 11.204 5.64491 10.8807 5.5806C10.5574 5.51629 10.2223 5.5493 9.91778 5.67544C9.61324 5.80159 9.35295 6.01521 9.16981 6.28929C8.98668 6.56337 8.88893 6.8856 8.88893 7.21523C8.88893 7.65726 9.06452 8.08118 9.37708 8.39374C9.68964 8.70629 10.1136 8.88189 10.5556 8.88189ZM10.5556 6.65968C10.6655 6.65968 10.7729 6.69226 10.8642 6.75331C10.9556 6.81435 11.0268 6.90112 11.0688 7.00263C11.1109 7.10415 11.1219 7.21585 11.1005 7.32362C11.079 7.43138 11.0261 7.53037 10.9484 7.60807C10.8707 7.68576 10.7717 7.73867 10.664 7.76011C10.5562 7.78155 10.4445 7.77054 10.343 7.7285C10.2415 7.68645 10.1547 7.61524 10.0937 7.52388C10.0326 7.43252 10 7.32511 10 7.21523C10 7.06789 10.0586 6.92658 10.1628 6.8224C10.2669 6.71821 10.4082 6.65968 10.5556 6.65968ZM3.88896 5.54858C3.55933 5.54858 3.2371 5.64633 2.96302 5.82946C2.68894 6.01259 2.47532 6.27289 2.34918 6.57743C2.22303 6.88197 2.19002 7.21708 2.25433 7.54038C2.31864 7.86368 2.47737 8.16065 2.71046 8.39374C2.94355 8.62682 3.24052 8.78556 3.56382 8.84986C3.88711 8.91417 4.22222 8.88117 4.52677 8.75502C4.83131 8.62888 5.0916 8.41526 5.27474 8.14118C5.45787 7.8671 5.55562 7.54487 5.55562 7.21523C5.55562 6.77321 5.38003 6.34929 5.06747 6.03673C4.75491 5.72417 4.33099 5.54858 3.88896 5.54858ZM3.88896 7.77078C3.77909 7.77078 3.67168 7.7382 3.58032 7.67716C3.48896 7.61611 3.41775 7.52935 3.3757 7.42783C3.33365 7.32632 3.32265 7.21462 3.34409 7.10685C3.36552 6.99908 3.41843 6.90009 3.49613 6.8224C3.57382 6.7447 3.67281 6.69179 3.78058 6.67036C3.88835 6.64892 4.00005 6.65992 4.10156 6.70197C4.20308 6.74402 4.28984 6.81522 4.35089 6.90658C4.41193 6.99794 4.44452 7.10535 4.44452 7.21523C4.44452 7.36257 4.38598 7.50388 4.2818 7.60807C4.17761 7.71225 4.03631 7.77078 3.88896 7.77078Z");this.items.length||(n.save(),n.translate(-this.width/2,-this.height/2),n.translate(0,12),n.font="600 12px 'Geist variable'",n.fillStyle="#A0A4A2",n.textAlign="left",n.clip(),n.fillText("Drag and drop media here",32,12),n.translate(8,1),n.fillStyle="#A0A4A2",n.fill(r),n.restore())}}class Qp extends Gr{static type="Helper";constructor(n){n.activeGuideFill="#ffffff",super(n)}}class e1{addTrackItem(n){const r=n.id,s=qa(n,{tScale:this.tScale,sizesMap:this.sizesMap});this.add(s),this.trackItemIds.push(r),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=Gt(this.trackItemsMap)}alignItemsToTrack(){this.pauseEventListeners();const n=new Map(this.getObjects("Track").map(s=>[s.id,s])),r=this.getObjects("Image","Video","Text","Audio");this.trackItemIds.forEach(s=>{const a=this.tracks.find(d=>d.items.includes(s));if(!a)return;const c=n.get(a.id);this.duration;const u=this.getObjects().find(d=>d.id===s);u&&c&&(u.isMain=!1,this.trackItemsMap[s].isMain=!1,u.set({top:c.top}),u.setCoords())}),n.forEach(s=>{s.items=r.filter(a=>a.top===s.top).map(a=>a.id)}),this.resumeEventListeners()}updateTrackItemsPosition(){const n=this.getObjects("Image","Text","Video","Audio");n.sort((r,s)=>r.top-s.top),this.trackItemIds=n.map(r=>r.id).reverse()}restoreTrackItemPositions(){}updateTrackItemsState(){this.pauseEventListeners();const n=this.getObjects("Image","Video","Text","Audio"),r={};n.forEach(s=>{const{id:a,left:c,width:u}=s,d=this.trackItemsMap[a],h=Fn(c,this.tScale),m=h+Fn(u,this.tScale),b={from:h,to:m},w={...d,display:b,trim:s instanceof lr||s instanceof yn?s.trim:void 0};s.display=b,r[a]=w}),this.trackItemsMap=r,this.resumeEventListeners()}deleteActiveTrackItem(){const n=this.getActiveObjects();if(!n.length)return!1;const r=n.map(a=>a.id),s=Li(this.tracks,r);this.trackItemsMap=Object.keys(this.trackItemsMap).reduce((a,c)=>(r.includes(c)||(a[c]=this.trackItemsMap[c]),a),{}),this.trackItemIds=this.trackItemIds.filter(a=>!r.includes(a)),this.tracks=s,this.discardActiveObject(),this.remove(...n),this.setActiveIds([]),this.renderTracks(),this.alignItemsToTrack(),this.updateState({updateHistory:!0,kind:"remove"})}updateTrackItemsToHistory(){this.pauseEventListeners();const n=this.getObjects();this.trackItemIds.forEach(r=>{const s=this.tracks.find(m=>m.items.includes(r)),a=n.find(m=>m.id===s?.id)?.top;if(!a){console.warn(`Track top not found for trackItemId: ${r}`);return}const c=this.trackItemsMap[r],u=n.find(m=>m.id===r);if(!u){console.warn(`Object not found for trackItemId: ${r}`);return}const d=Ge(c.display.from,this.tScale),h=Ge(c.display.to-c.display.from,this.tScale);u.set({left:d,width:h,top:a}),u.setCoords()}),this.requestRenderAll(),this.resumeEventListeners()}cloneActiveTrackItem(n){const r=n?.trackItemId||this.activeIds[0];if(!r)return!1;const a={...this.trackItemsMap[r],id:Je()},c=this.tracks.find(b=>b.items.includes(r)),u=this.tracks.findIndex(b=>b.id===c?.id)+1;this.findOrCreateTrack(a,{trackIndex:u});const d=qa(a,{tScale:this.tScale});d&&this.add(d);const{audioData:h,...m}=a.metadata||{};a.metadata=m,this.trackItemsMap[a.id]=a,this.trackItemIds.push(a.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}splitActiveTrackItem(n){const r=n.trackItemId??this.activeIds[0];if(!r||this.activeIds.length>1)return!1;const s=this.trackItemsMap[r],a=n.time;if(s.display.from>=a||s.display.to<=a)return!1;const c={...s,display:{from:s.display.from,to:a}},u={...s,display:{from:a,to:s.display.to},id:Je()};if(s.type==="video"||s.type==="audio"){const b=a-c.display.from;c.trim={from:s.trim.from,to:s.trim.from+b},u.trim={from:c.trim.to,to:s.trim.to}}const d=this.getObjects().find(b=>b.id===r);d.display=c.display,this.tracks.find(b=>b.items.includes(r))?.items.push(u.id);const m=qa(u,{tScale:this.tScale});m&&this.add(m),this.trackItemsMap[u.id]=u,this.trackItemsMap[r]=c,this.trackItemIds.push(u.id),this.updateTrackItemCoords(c.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}updateTrackItemCoords(n){const r=this.getObjects().find(u=>u.id===n),s=this.trackItemsMap[n],a=Ge(s.display.from,this.tScale),c=Ge(s.display.to-s.display.from,this.tScale);r?.set({left:a,width:c}),r?.setCoords()}updateTrackItemDetails(n,r){const s=r?.trackItemId;if(!s)return!1;const a=this.trackItemsMap[s],c={...a.details,...n.details};("fontSize"in c||"lineHeight"in c)&&(c.height=Ri(c.text,c)),this.trackItemsMap[s]={...a,...n,details:c},this.updateState()}updateTrackItem(n,r){const s=r.trackItemId;if(!s)return!1;const a=this.trackItemsMap[s],c={...a.details,...n.details};if(a.type==="text"&&n.details.text){const u=this.getObjects("Text").find(d=>d.id===s);u instanceof sl&&(u.text=n.details.text,this.requestRenderAll())}("fontSize"in c||"lineHeight"in c)&&(c.height=Ri(c.text,c)),this.trackItemsMap[s]={...a,...n,details:c},this.updateState()}updateTrackItemsDetails(n,r){r?.trackItemIds?.forEach((s,a)=>{const c=this.trackItemsMap[s],u={...c.details,...n[a].details};("fontSize"in u||"lineHeight"in u)&&(u.height=Ri(u.text,u)),this.trackItemsMap[s]={...c,...n[a],details:u}}),this.updateState()}getTrackItems(){return this.getObjects(...J3)}setActiveTrackItemCoords(){this.getActiveObjects().forEach(n=>n.setCoords())}deleteTrackItemById(n){const r=this.getObjects().filter(s=>n.includes(s.id));this.tracks=Li(this.tracks,n),this.trackItemsMap=Object.keys(this.trackItemsMap).filter(s=>!n.includes(s)).reduce((s,a)=>(s[a]=this.trackItemsMap[a],s),{}),this.trackItemIds=this.trackItemIds.filter(s=>!n.includes(s)),this.discardActiveObject(),this.remove(...r),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=Gt(this.trackItemsMap)}selectTrackItemByIds(n){const r=this.getActiveObjects().map(a=>a.id);if(Ie.isEqual(r,n))return;const s=this.getTrackItems().filter(a=>n.includes(a.id));if(s.length===0)this.discardActiveObject();else if(s.length===1)this.setActiveObject(s[0]);else{const a=new B.ActiveSelection(s);this.setActiveObject(a)}this.requestRenderAll()}}const J3=["Image","Text","Video","Audio","Caption","Template"],qa=(t,n)=>{const s={text:Gp,video:$p,image:Vp,audio:Bp}[t.type];return s(t,n)},Lr={text:32,image:40,video:40,audio:32,main:40},df=t=>{switch(t){case"text":return Lr.text;case"image":return Lr.image;case"video":return Lr.video;case"audio":return Lr.audio;case"helperTop":return 40;case"helperBottom":return 40;case"helperCenter":return 8;case"main":return Lr.main;default:return Lr.text}};class t1{findOrCreateTrack(n,{trackId:r,trackIndex:s}){const a=r;if(a){const u=this.tracks.find(d=>d.id===a);if(u)return u.items.push(n.id),a}const c={id:Je(),items:[n.id],type:n.type,accepts:this.acceptsMap?.[n.type]};return s!==void 0?this.tracks.splice(s,0,c):this.tracks.push(c),this.renderTracks(),c.id}removeTracks(){this.getObjects("Track","Helper")?.forEach(n=>this.remove(n))}renderTracks(){this.updateTracksState(),this.removeTracks();const n=this.width,r=this.tracks.flatMap(d=>[d,{id:`after-${d.id}`,type:"helper",items:[],accepts:[]}]).slice(0,-1);let s=0;const a=B.classRegistry.getClass("Helper")||Gr,c=new a({id:"helperLineTop",top:s,selectable:!1,evented:!1,tScale:this.tScale,width:n,kind:"top",metadata:{}});s+=df("helperTop"),this.insertAt(0,c),r.forEach((d,h)=>{if(d.type==="helper"){const m=df("helperCenter"),b=new a({id:d.id,top:s,tScale:this.tScale,width:n,height:m,metadata:{order:(h+1)/2},kind:"center"});s+=m,this.insertAt(0,b)}else{const m=B.classRegistry.getClass("Track")||Un,b=new m({id:d.id,top:s,left:0,fill:"#18181b",height:42,width:n,tScale:this.tScale,accepts:this.acceptsMap?.[d.type]||[],items:d.items});s+=42,this.insertAt(0,b)}});const u=new a({id:"helperLineBottom",top:s,selectable:!1,evented:!1,tScale:this.tScale,width:n,kind:"bottom",metadata:{}});this.insertAt(0,u)}updateTracksState(){const n=this.tracks.filter(s=>s.items.length||s.type==="main"),r=new Map;n.forEach(s=>r.set(s.id,s)),this.tracks=Array.from(r.values())}updateTrackCoords(){const n=this.bounding.width+this.spacing.right;this.getObjects("Track","Helper").forEach(r=>{r.updateCoords(n),r.setCoords()})}}const Q3=60,eT=188;function ff(t,n=1,r=1){const s=eT*n;return t*(Q3/1e3)*s/r}class n1{removeTransitions(){const n=this.getObjects("Transition");this.remove(...n)}renderTransitions(){this.removeTransitions(),this.transitionIds.forEach(n=>{const r=this.transitionsMap[n],s=r.fromId,a=r.toId,c=this.getObjects(),u=c.find(T=>T.id===s),d=c.find(T=>T.id===a);if(!u||!d)return;const h=ff(r.duration,this.tScale),m=u.left+u.width-h/2,b=u.height,w=new Ft({id:r.id,left:m,top:u.top,height:b,width:h,tScale:this.tScale,duration:r.duration,fromId:u.id,toId:d.id,kind:r.kind});r.kind==="none"&&(w.visible=!1),this.add(w)})}updateTransitionCoordinates(){this.pauseEventListeners(),this.getObjects("Transition").forEach(n=>{n.tScale=this.tScale,n.updateCoords(),n.setCoords()}),this.resumeEventListeners()}alignTransitionsToTrack(){this.pauseEventListeners(),this.transitionIds.forEach(n=>{const r=this.getObjects("Transition").find(s=>s.id===n);if(r instanceof Ft){const s=this.getObjects().find(u=>u.id===r.fromId);if(!s)return;const a=ff(r.duration,this.tScale),c=s.left+s.width-a/2;r.set({left:c,top:s.top}),r.setCoords()}}),this.resumeEventListeners()}updateTransitions(n=!0){n&&this.pauseEventListeners();const r=this.getObjects("Track"),s=this.getObjects("Video","Image");this.removeTransitions();const a={},c=[];r.forEach(u=>{const d=s.filter(h=>u.items.includes(h.id)).sort((h,m)=>h.left-m.left);for(let h=0;h<d.length-1;h++){const m=d[h],b=d[h+1];if(Math.abs(m.left+m.width-b.left)<=1){const w=`${m.id}-${b.id}`;if(this.transitionIds.includes(w))a[w]=this.transitionsMap[w];else{const T={id:w,duration:1500,fromId:m.id,toId:b.id,kind:"none",trackId:u.id,type:"transition"};a[w]=T}c.push(w)}}}),this.transitionIds=c,this.transitionsMap=a,this.renderTransitions(),n&&this.resumeEventListeners()}}const H={canvas:null,enableGuideRedraw:!0,isPointerOverHelperTrack:!1,draggingOverTrack:null,primaryMovingObjects:[],secondaryMovingObjects:[],placeholderMovingObjects:[],objectInitialPositions:{},originTrack:{},trackToItemsMap:{},activeTrackToItemsMap:{},trackTopToIdMap:{},trackTops:[],activeObjects:[],primaryTracks:{},secondaryTracks:{}},We={guide:null,object:null,objects:[]},tT=()=>H,nT=t=>{Object.assign(H,t)},rT=t=>{t.on("before:transform",r1.bind(t))},iT=t=>{t.off("before:transform",r1.bind(t))};function r1(t){H.canvas=this,H.activeTrackToItemsMap={},H.primaryTracks={},H.secondaryTracks={},H.trackTops=[],H.trackToItemsMap={},H.activeObjects=[],H.trackTopToIdMap={},H.canvas.trackIdAfterTransform="",H.canvas.positionAfterTransform={};const n=H.canvas.getActiveObject();if(!n)return;H.activeObjects=n instanceof B.ActiveSelection?n.getObjects():[n];const r=H.canvas.getScenePoint(t.e),s=H.canvas.getObjects("Track");H.originTrack=s.find(u=>{const d=u.getBoundingRect();return r.x>=d.left&&r.x<=d.left+d.width&&r.y>=d.top&&r.y<=d.top+d.height})??{};const a=H.canvas.getObjects("Video","Image","Audio","Text","Element");s.forEach(u=>{const d=a.filter(h=>u.items.includes(h.id));H.trackToItemsMap[u.id]=d,H.trackTopToIdMap[u.top]=u.id,H.trackTops.push(u.top)}),H.trackTops.sort((u,d)=>u-d),H.activeObjects.forEach(u=>{const d=s?.find(m=>m.items.includes(u.id));if(!d)return;const h=d.id;H.activeTrackToItemsMap[h]?H.activeTrackToItemsMap[h].push(u):H.activeTrackToItemsMap[h]=[u]}),H.primaryMovingObjects=H.activeObjects.filter(u=>{const d=u.getBoundingRect();return r.y>=d.top&&r.y<=d.top+d.height&&!(u instanceof Ft)}),H.primaryMovingObjects.forEach(u=>{const d=u.getBoundingRect().top,h=H.trackTopToIdMap[d];if(H.primaryTracks[h])H.primaryTracks[h].objects.push(u);else{const m=yc(H.trackTops,H.originTrack.top,d);if(typeof m!="number")return;H.primaryTracks[h]={objects:[u],index:m}}}),H.primaryMovingObjects=H.primaryMovingObjects.sort((u,d)=>u.left-d.left),H.secondaryMovingObjects=H.activeObjects.filter(u=>!H.primaryMovingObjects.includes(u)&&!(u instanceof Ft)),H.secondaryMovingObjects.forEach(u=>{const d=u.getBoundingRect().top,h=H.trackTopToIdMap[u.getBoundingRect().top];if(H.secondaryTracks[h])H.secondaryTracks[h].objects.push(u);else{const m=yc(H.trackTops,H.originTrack.top,d);if(typeof m!="number")return;H.secondaryTracks[h]={objects:[u],index:m}}}),H.originTrack&&(H.canvas.trackOriginBeforeTransform=H.originTrack.id),n&&(H.canvas.positionBeforeTransform={top:n.top,left:n.left}),("transform"in t?t.transform:{}).action==="drag"&&(H.placeholderMovingObjects=H.primaryMovingObjects.map(u=>{const d=u.getBoundingRect();H.objectInitialPositions[u.id]={top:d.top,left:d.left};const h=new Fr({id:`${u.id}-placeholder`,left:d.left,top:d.top,width:d.width,height:d.height,for:sT[u.type]});return h.draggedObject=u,h}),H.canvas.add(...H.placeholderMovingObjects))}function yc(t,n,r){const s=t.indexOf(n),a=t.indexOf(r);return s===-1||a===-1?null:a-s}const sT={trackitemvideo:"video",trackitemimage:"image",trackitemaudio:"audio",trackitemtext:"text"};function i1(t){if(!We.guide)return!1;t.e.preventDefault();const n=this,r=n.getViewportPoint(t.e);We.guide.set({left:r.x-16,top:r.y-We.guide.height/2});const s=oT(r,We.objects);s&&(We.object=s,s.strokeDashArray=[5,1],s.setSelected(!0)),We.objects.forEach(a=>{a!==s&&a.setSelected(!1)}),n.requestRenderAll()}function oT(t,n){let r=1/0,s=null;const a=new B.Point(t.x,t.y);return n.forEach(c=>{const u=aT(c,a);u<r&&(r=u,s=c)}),s}function aT(t,n){return Math.sqrt(Math.pow(t.left-n.x,2)+Math.pow(t.top-n.y,2))}const cT=["transition","image","video","audio","caption","text"];function s1(t){const n=t.e.dataTransfer?.types[0];if(!n)return;const r=JSON.parse(n),{type:s,duration:a=5e3}=r;if(!cT.includes(s))return;const c=this;c.discardActiveObject();const u=Ge(a,c.tScale);We.guide=lT({width:u,height:48,id:"TransitionGuide",left:0,top:0,type:s}),c.add(We.guide),s==="transition"&&(We.objects=c.getObjects("Transition"),We.objects.forEach(d=>{d.visible=!0})),ye.dispatch(Xc)}function lT({width:t,height:n,id:r,left:s,top:a,type:c}){return c==="transition"?new Ni({top:0,left:0,height:48,width:48,id:"TransitionGuide"}):new Fi({top:a,left:s,height:n,width:t,id:r,name:"Rivers in the mountains"})}function o1(){if(!We.guide)return;ye.dispatch(Pi);const t=this;uT(We.objects),t.remove(We.guide)}function uT(t){t.forEach(n=>{n.strokeDashArray=[],n.setSelected(!1),n.kind==="none"&&(n.visible=!1)})}var dT=typeof global=="object"&&global&&global.Object===Object&&global,fT=typeof self=="object"&&self&&self.Object===Object&&self,ol=dT||fT||Function("return this")(),zn=ol.Symbol,a1=Object.prototype,hT=a1.hasOwnProperty,pT=a1.toString,Ai=zn?zn.toStringTag:void 0;function gT(t){var n=hT.call(t,Ai),r=t[Ai];try{t[Ai]=void 0;var s=!0}catch{}var a=pT.call(t);return s&&(n?t[Ai]=r:delete t[Ai]),a}var mT=Object.prototype,vT=mT.toString;function bT(t){return vT.call(t)}var yT="[object Null]",_T="[object Undefined]",hf=zn?zn.toStringTag:void 0;function al(t){return t==null?t===void 0?_T:yT:hf&&hf in Object(t)?gT(t):bT(t)}function cl(t){return t!=null&&typeof t=="object"}var wT="[object Symbol]";function ll(t){return typeof t=="symbol"||cl(t)&&al(t)==wT}function ST(t,n){for(var r=-1,s=t==null?0:t.length,a=Array(s);++r<s;)a[r]=n(t[r],r,t);return a}var Zi=Array.isArray,pf=zn?zn.prototype:void 0,gf=pf?pf.toString:void 0;function c1(t){if(typeof t=="string")return t;if(Zi(t))return ST(t,c1)+"";if(ll(t))return gf?gf.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}function ro(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function TT(t){return t}var xT="[object AsyncFunction]",IT="[object Function]",ET="[object GeneratorFunction]",CT="[object Proxy]";function AT(t){if(!ro(t))return!1;var n=al(t);return n==IT||n==ET||n==xT||n==CT}var Ja=ol["__core-js_shared__"],mf=function(){var t=/[^.]+$/.exec(Ja&&Ja.keys&&Ja.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function kT(t){return!!mf&&mf in t}var RT=Function.prototype,OT=RT.toString;function MT(t){if(t!=null){try{return OT.call(t)}catch{}try{return t+""}catch{}}return""}var DT=/[\\^$.*+?()[\]{}|]/g,PT=/^\[object .+?Constructor\]$/,LT=Function.prototype,jT=Object.prototype,NT=LT.toString,FT=jT.hasOwnProperty,UT=RegExp("^"+NT.call(FT).replace(DT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zT(t){if(!ro(t)||kT(t))return!1;var n=AT(t)?UT:PT;return n.test(MT(t))}function HT(t,n){return t?.[n]}function ul(t,n){var r=HT(t,n);return zT(r)?r:void 0}function WT(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}var BT=800,VT=16,$T=Date.now;function GT(t){var n=0,r=0;return function(){var s=$T(),a=VT-(s-r);if(r=s,a>0){if(++n>=BT)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function YT(t){return function(){return t}}var io=function(){try{var t=ul(Object,"defineProperty");return t({},"",{}),t}catch{}}(),XT=io?function(t,n){return io(t,"toString",{configurable:!0,enumerable:!1,value:YT(n),writable:!0})}:TT,ZT=GT(XT),KT=9007199254740991,qT=/^(?:0|[1-9]\d*)$/;function l1(t,n){var r=typeof t;return n=n??KT,!!n&&(r=="number"||r!="symbol"&&qT.test(t))&&t>-1&&t%1==0&&t<n}function JT(t,n,r){n=="__proto__"&&io?io(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}function u1(t,n){return t===n||t!==t&&n!==n}var QT=Object.prototype,ex=QT.hasOwnProperty;function tx(t,n,r){var s=t[n];(!(ex.call(t,n)&&u1(s,r))||r===void 0&&!(n in t))&&JT(t,n,r)}var vf=Math.max;function nx(t,n,r){return n=vf(n===void 0?t.length-1:n,0),function(){for(var s=arguments,a=-1,c=vf(s.length-n,0),u=Array(c);++a<c;)u[a]=s[n+a];a=-1;for(var d=Array(n+1);++a<n;)d[a]=s[a];return d[n]=r(u),WT(t,this,d)}}var rx=9007199254740991;function ix(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rx}var sx="[object Arguments]";function bf(t){return cl(t)&&al(t)==sx}var d1=Object.prototype,ox=d1.hasOwnProperty,ax=d1.propertyIsEnumerable,f1=bf(function(){return arguments}())?bf:function(t){return cl(t)&&ox.call(t,"callee")&&!ax.call(t,"callee")},cx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lx=/^\w*$/;function ux(t,n){if(Zi(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||ll(t)?!0:lx.test(t)||!cx.test(t)||n!=null&&t in Object(n)}var Ui=ul(Object,"create");function dx(){this.__data__=Ui?Ui(null):{},this.size=0}function fx(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var hx="__lodash_hash_undefined__",px=Object.prototype,gx=px.hasOwnProperty;function mx(t){var n=this.__data__;if(Ui){var r=n[t];return r===hx?void 0:r}return gx.call(n,t)?n[t]:void 0}var vx=Object.prototype,bx=vx.hasOwnProperty;function yx(t){var n=this.__data__;return Ui?n[t]!==void 0:bx.call(n,t)}var _x="__lodash_hash_undefined__";function wx(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ui&&n===void 0?_x:n,this}function rr(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var s=t[n];this.set(s[0],s[1])}}rr.prototype.clear=dx;rr.prototype.delete=fx;rr.prototype.get=mx;rr.prototype.has=yx;rr.prototype.set=wx;function Sx(){this.__data__=[],this.size=0}function _o(t,n){for(var r=t.length;r--;)if(u1(t[r][0],n))return r;return-1}var Tx=Array.prototype,xx=Tx.splice;function Ix(t){var n=this.__data__,r=_o(n,t);if(r<0)return!1;var s=n.length-1;return r==s?n.pop():xx.call(n,r,1),--this.size,!0}function Ex(t){var n=this.__data__,r=_o(n,t);return r<0?void 0:n[r][1]}function Cx(t){return _o(this.__data__,t)>-1}function Ax(t,n){var r=this.__data__,s=_o(r,t);return s<0?(++this.size,r.push([t,n])):r[s][1]=n,this}function Yr(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var s=t[n];this.set(s[0],s[1])}}Yr.prototype.clear=Sx;Yr.prototype.delete=Ix;Yr.prototype.get=Ex;Yr.prototype.has=Cx;Yr.prototype.set=Ax;var kx=ul(ol,"Map");function Rx(){this.size=0,this.__data__={hash:new rr,map:new(kx||Yr),string:new rr}}function Ox(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function wo(t,n){var r=t.__data__;return Ox(n)?r[typeof n=="string"?"string":"hash"]:r.map}function Mx(t){var n=wo(this,t).delete(t);return this.size-=n?1:0,n}function Dx(t){return wo(this,t).get(t)}function Px(t){return wo(this,t).has(t)}function Lx(t,n){var r=wo(this,t),s=r.size;return r.set(t,n),this.size+=r.size==s?0:1,this}function ur(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var s=t[n];this.set(s[0],s[1])}}ur.prototype.clear=Rx;ur.prototype.delete=Mx;ur.prototype.get=Dx;ur.prototype.has=Px;ur.prototype.set=Lx;var jx="Expected a function";function dl(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(jx);var r=function(){var s=arguments,a=n?n.apply(this,s):s[0],c=r.cache;if(c.has(a))return c.get(a);var u=t.apply(this,s);return r.cache=c.set(a,u)||c,u};return r.cache=new(dl.Cache||ur),r}dl.Cache=ur;var Nx=500;function Fx(t){var n=dl(t,function(s){return r.size===Nx&&r.clear(),s}),r=n.cache;return n}var Ux=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zx=/\\(\\)?/g,Hx=Fx(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Ux,function(r,s,a,c){n.push(a?c.replace(zx,"$1"):s||r)}),n});function Wx(t){return t==null?"":c1(t)}function So(t,n){return Zi(t)?t:ux(t,n)?[t]:Hx(Wx(t))}function fl(t){if(typeof t=="string"||ll(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}function Bx(t,n){n=So(n,t);for(var r=0,s=n.length;t!=null&&r<s;)t=t[fl(n[r++])];return r&&r==s?t:void 0}function Vx(t,n){for(var r=-1,s=n.length,a=t.length;++r<s;)t[a+r]=n[r];return t}var yf=zn?zn.isConcatSpreadable:void 0;function $x(t){return Zi(t)||f1(t)||!!(yf&&t&&t[yf])}function Gx(t,n,r,s,a){var c=-1,u=t.length;for(r||(r=$x),a||(a=[]);++c<u;){var d=t[c];r(d)?Vx(a,d):a[a.length]=d}return a}function Yx(t){var n=t==null?0:t.length;return n?Gx(t):[]}function Xx(t){return ZT(nx(t,void 0,Yx),t+"")}function Zx(t,n){return t!=null&&n in Object(t)}function Kx(t,n,r){n=So(n,t);for(var s=-1,a=n.length,c=!1;++s<a;){var u=fl(n[s]);if(!(c=t!=null&&r(t,u)))break;t=t[u]}return c||++s!=a?c:(a=t==null?0:t.length,!!a&&ix(a)&&l1(u,a)&&(Zi(t)||f1(t)))}function qx(t,n){return t!=null&&Kx(t,n,Zx)}function Jx(t,n,r,s){if(!ro(t))return t;n=So(n,t);for(var a=-1,c=n.length,u=c-1,d=t;d!=null&&++a<c;){var h=fl(n[a]),m=r;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(a!=u){var b=d[h];m=void 0,m===void 0&&(m=ro(b)?b:l1(n[a+1])?[]:{})}tx(d,h,m),d=d[h]}return t}function Qx(t,n,r){for(var s=-1,a=n.length,c={};++s<a;){var u=n[s],d=Bx(t,u);r(d,u)&&Jx(c,So(u,t),d)}return c}function e4(t,n){return Qx(t,n,function(r,s){return qx(t,s)})}var t4=Xx(function(t,n){return t==null?{}:e4(t,n)});function h1(t){const n=t.e.dataTransfer?.types[0];if(!n)return;const r=JSON.parse(t.e.dataTransfer.getData(n)),s=this;if(r.type!=="transition"){n4(r),s.remove(We.guide),s.requestRenderAll(),ye.dispatch(Pi);return}We.guide&&(We.object&&r4(r,s),We.objects.forEach(a=>{a.strokeDashArray=[],a.setSelected(!1),a.kind==="none"&&(a.visible=!1)}),s.remove(We.guide),s.requestRenderAll(),ye.dispatch(Pi))}function n4(t){const n={...t,id:Je()};switch(t.type){case"image":ye.dispatch(Vr,{payload:n});break;case"video":ye.dispatch(Wr,{payload:n});break;case"audio":ye.dispatch(Br,{payload:n});break}}function r4(t,n){const r=We.object?.id,s=t4(t,["kind","direction"]);Object.entries(s).forEach(([a,c])=>{a==="kind"?We.object.kind=c:We.object[a]=c}),n.transitionsMap[r]={...n.transitionsMap[r],...s},n.updateState()}const i4=t=>{t.on("dragover",i1),t.on("dragenter",s1),t.on("dragleave",o1),t.on("drop",h1)},s4=t=>{t.off("dragover",i1),t.off("dragenter",s1),t.off("dragleave",o1),t.off("drop",h1)},p1=t=>{const n=t.target.canvas,r=t.target;if(t.action==="resizing"&&r instanceof Ft&&n){const s=r.id,a=n.getObjects("Transition").find(c=>c.id===s);if(a&&a instanceof Ft){const c=Ie.cloneDeep(n.transitionsMap),u={...c,[s]:{...c[s],width:a.width,duration:a.duration}};n.transitionsMap=u,n.updateState()}}n&&(o4(n,n.getObjects()),a4(n.getObjects("Helper")),H.isPointerOverHelperTrack=!1,H.draggingOverTrack=null)},o4=(t,n)=>{n.forEach(r=>{r.isAlignmentAuxiliary&&t.remove(r)})},a4=t=>{t.forEach(n=>n.setSelected(!1))};function g1(t){const n=t.target.canvas;if(!n)return;const r=n.getActiveObject();if(!r||!n.positionBeforeTransform)return;const s=n.getScenePoint(t.e),a=n.getObjects("Track","Helper").find(c=>{const u=c.getBoundingRect();return s.x>=u.left&&s.x<=u.left+u.width&&s.y>=u.top&&s.y<=u.top+u.height});if(t.action==="resizing"){const c=(H.trackToItemsMap[H.originTrack.id]||[]).filter(d=>d!==r);r.setCoords();const u=To(c,r.getBoundingRect());return n.fire("track-items:resized",{trackId:H.originTrack.id,trackItemIds:[r.id],isOverlapped:!!u}),!1}if(!a)return r&&(r?.set(n.positionBeforeTransform),r?.setCoords()),!1;if(a instanceof Gr){let c;switch(a.kind){case"top":c=0;break;case"center":c=a.metadata.order||0;break;case"bottom":c=-1;break;default:return}const u={isSecondaryOverlapped:!1,secondaryTracks:H.secondaryTracks,primaryTracks:H.primaryTracks,primaryPositions:{trackIndex:c,trackId:n.trackIdAfterTransform,positions:n.positionAfterTransform}};d4(u)}else if(a instanceof Un){const c={isSecondaryOverlapped:l4(),secondaryTracks:H.secondaryTracks,primaryTracks:H.primaryTracks,primaryPositions:{trackId:n.trackIdAfterTransform,positions:n.positionAfterTransform}};c4(c)}}const c4=t=>{H.canvas&&H.canvas.fire("track-items:moved",t)};function l4(){const t=u4();return Object.keys(t).some(n=>{const r=H.trackToItemsMap[n],s=t[n].objects;return r?.length?r.filter(a=>!s.includes(a)).some(a=>To(s,a.getBoundingRect())):!0})}function u4(){const[t]=H.primaryMovingObjects,n=t.id,s=H.canvas.positionAfterTransform[n].top-t.getBoundingRect().top,a={};return H.secondaryMovingObjects.forEach(c=>{const u=c.getBoundingRect().top+s,d=H.trackTopToIdMap[u],h=yc(H.trackTops,H.originTrack.top,u);a[d]?a[d].objects.push(c):a[d]={objects:[c],index:h}}),a}const d4=t=>{H.canvas&&H.canvas.fire("track:create",t)};function To(t,n){return t.find(r=>{const s=r.getBoundingRect();return n.left<s.left+s.width&&n.left+n.width>s.left&&n.top<s.top+s.height&&n.top+n.height>s.top})}const f4=t=>{t.on("object:modified",p1),t.on("object:modified",g1)},h4=t=>{t.off("object:modified",p1),t.off("object:modified",g1)};function p4(t,n){t.remove(...n),n.length=0}function m1(){p4(this,H.placeholderMovingObjects)}function v1(t){const n=this.height<this.bounding.height,r=this.width<this.bounding.width;if(!n&&!r)return;const s=this.viewportTransform;let a=s[4],c=s[5];const u=2;t.e.shiftKey?a=s[4]-t.e.deltaY*u:(n&&(c=s[5]-t.e.deltaY*u),a=s[4]-t.e.deltaX*u),this.setViewportPos(a,c)}const g4=t=>{t.on("mouse:wheel",v1),t.on("mouse:up",m1.bind(t))},m4=t=>{t.off("mouse:wheel",v1),t.off("mouse:up",m1.bind(t))};function b1(t){const n=this;if(!n)return;const r=n.getScenePoint(t.e),s=n.getObjects("Helper","Track");H.draggingOverTrack=s.find(m=>{const b=m.getBoundingRect();return r.x>=b.left&&r.x<=b.left+b.width&&r.y>=b.top&&r.y<=b.top+b.height})??null,s.forEach(m=>{if(wf(m)){const b=H.draggingOverTrack;m.setSelected(m===b)}}),H.isPointerOverHelperTrack=wf(H.draggingOverTrack),n.getObjects();const a=t.target;a.getBoundingRect(),a.setCoords();const c=[a,...n.getActiveObjects(),...n.getObjects("Track","Helper","Transition","Placeholder")],u=v4(c,n),d=y4(a);b4(u,d).forEach(m=>{m.orientation==="V"?a.left=m.lineGuide+m.offset:a.top=m.lineGuide+m.offset})}const v4=(t,n)=>{const r=[],s=[];return n.getObjects().filter(a=>a.visible).forEach(a=>{if(t.some(d=>d.id===a.id)||a.isAlignmentAuxiliary)return;const u=a.getBoundingRect();r.push(_f(u.left,u.width,u.top,u.height)),s.push(_f(u.top,u.height,u.left,u.width))}),{vertical:r.flat(),horizontal:[]}},_f=(t,n,r,s)=>[t,t+n].map(a=>({val:a,start:r,end:r+s})),b4=(t,n)=>{const r=[],s=[];t.vertical.forEach(h=>{n.vertical.forEach(m=>{const b=Math.abs(h.val-m.guide);b<10&&r.push({lineGuide:h.val,diff:b,orientation:"V",snap:m.snap,offset:m.offset,targetDim:{start:h.start,end:h.end}})})}),t.horizontal.forEach(h=>{n.horizontal.forEach(m=>{const b=Math.abs(h.val-m.guide);b<10&&s.push({lineGuide:h.val,diff:b,orientation:"H",snap:m.snap,offset:m.offset,targetDim:{start:h.start,end:h.end}})})});const c=[],u=r.sort((h,m)=>h.diff-m.diff)[0],d=s.sort((h,m)=>h.diff-m.diff)[0];return u&&c.push({lineGuide:u.lineGuide,offset:u.offset,orientation:"V",snap:u.snap,targetDim:u.targetDim}),d&&c.push({lineGuide:d.lineGuide,offset:d.offset,orientation:"H",snap:d.snap,targetDim:d.targetDim}),c},y4=t=>{const n=t.getBoundingRect();return{vertical:[{guide:Math.round(n.left),offset:Math.round(t.left-n.left),snap:"start"},{guide:Math.round(n.left+n.width),offset:Math.round(t.left-n.left-n.width),snap:"end"}],horizontal:[{guide:Math.round(n.top),offset:Math.round(t.top-n.top),snap:"start"},{guide:Math.round(n.top+n.height),offset:Math.round(t.top-n.top-n.height),snap:"end"}]}},wf=t=>t instanceof Gr;function _4(t){t.opacity=H.isPointerOverHelperTrack?0:1}const y1=C4(t=>{const n=t.target.canvas;if(A4(t),!H.draggingOverTrack)return;const r=H.placeholderMovingObjects.map(c=>c.draggedObject),s=(H.trackToItemsMap[H.draggingOverTrack.id]||[]).filter(c=>!r.includes(c)),a=s.find(c=>To(r,c.getBoundingRect()));H.placeholderMovingObjects.forEach(c=>{const u=c.draggedObject;u?.setCoords(),_4(c);const d=w4(u,s,a,H.placeholderMovingObjects.length>1);n.trackIdAfterTransform=H.trackTopToIdMap[d.top],n.positionAfterTransform[u?.id]={top:d.top,left:d.left},c.left=d.left,c.top=d.top})},5),w4=(t,n,r,s)=>!S4(t)||s&&r?_1(t):r?T4(t,r,n):E4(t),S4=t=>H.draggingOverTrack?H.draggingOverTrack.accepts?.includes(t.type)??!1:!1,_1=t=>({top:H.objectInitialPositions[t.id].top,left:H.objectInitialPositions[t.id].left}),T4=(t,n,r)=>{const s=x4(t,n);return!I4(r,t,s)||H.activeObjects.length!==1?_1(t):{left:s,top:n.top}},x4=(t,n)=>{const r=t.left+t.width/2,s=n.left+n.width/2;return r<s?n.left-t.width:n.left+n.width},I4=(t,n,r)=>!(r<0||To(t,{...n.getBoundingRect(),left:r})),E4=t=>({left:t.getBoundingRect().left,top:H.draggingOverTrack?.top??0});function C4(t,n){let r=null;return function(...s){const a=Date.now();(r===null||a-r>=n)&&(r=a,t(...s))}}function A4(t){const n=t.target,r=n.canvas,s=n.top,a=-n.height*.75,c=r.height+n.height*.75;n.top=Math.min(Math.max(s,a),c-n.height);const u=n.left;n.left=Math.max(u,0)}const k4=t=>{t.on("object:moving",b1.bind(t)),t.on("object:moving",y1)},R4=t=>{t.off("object:moving",b1.bind(t)),t.off("object:moving",y1)};function w1(){const t=this,n=t.getActiveObject(),r=t.getActiveObjects().map(s=>s.id);n instanceof B.Group?(n.borderColor="rgba(0, 216, 214, 0.75)",n.hasControls=!1,n.hoverCursor="default",n.borderScaleFactor=1,n.padding=0,n.getObjects().forEach(s=>{s.setSelected(!0)})):n?.setSelected(!0),this.setActiveIds(r)}function S1(t){const n=this,r=n.getActiveObject();r instanceof B.Group&&(r.borderColor="transparent",r.hasControls=!1,r.hoverCursor="default"),t.selected.forEach(a=>{a.setSelected(!0)}),t.deselected.forEach(a=>{a.setSelected(!1)});const s=n.getActiveObjects().map(a=>a.id);this.setActiveIds(s)}function T1(t){this.getObjects().forEach(r=>{r.isSelected&&(r.isSelected=!1)}),t.deselected.forEach(r=>{r.setSelected(!1)});const n=this.getActiveObjects().map(r=>r.id);this.setActiveIds(n)}const O4=t=>{t.on("selection:created",w1),t.on("selection:updated",S1),t.on("selection:cleared",T1)},M4=t=>{t.off("selection:created",w1),t.off("selection:updated",S1),t.off("selection:cleared",T1)};let x1,I1,E1;const D4=t=>{const{state:n}=t;x1=n.subscribeToActiveIds(({activeIds:r})=>{if(r.length===1){const s=r[0],{trackItemIds:a,trackItemsMap:c}=n.getState();a.forEach(u=>{c[u].type}),t.selectTrackItemByIds([s])}else t.selectTrackItemByIds(r)}),I1=n.subscribeToHistory(r=>{const{tracks:s,trackItemsMap:a,trackItemIds:c,trackItemDetailsMap:u}=r;t.tracks=s,t.trackItemsMap=a,t.trackItemIds=c,t.trackItemDetailsMap=u,t.renderTracks(),t.updateTrackItemsToHistory(),t.alignItemsToTrack(),t.calcBounding(),t.updateTransitions(),t.duration=Gt(t.trackItemsMap)}),E1=n.subscribeToAddOrRemoveItems(()=>{const r=t.getTrackItems().map(d=>d.id),{trackItemIds:s,trackItemsMap:a,trackItemDetailsMap:c}=n.getState(),u=[];r.forEach(d=>{s.includes(d)||u.push(d)}),t.deleteTrackItemById(u),t.tracks=n.getState().tracks,t.trackItemsMap=a,t.trackItemDetailsMap=c,s.forEach(d=>{if(!r.includes(d)){const h={...a[d],details:{...c[d].details}};t.addTrackItem(h)}}),t.renderTracks(),t.alignItemsToTrack(),s.forEach(d=>{t.updateTrackItemCoords(d)}),t.updateTransitions(),t.updateTrackCoords()})},P4=t=>{x1.unsubscribe(),I1.unsubscribe(),E1.unsubscribe()};function C1(t){const{isSecondaryOverlapped:n,secondaryTracks:r,primaryTracks:s,primaryPositions:a}=t,{trackId:c,positions:u}=a,d=this.tracks.findIndex(E=>E.id===c),h=el(Object.keys(r).map(E=>r[E].objects.map(O=>O.id))),m=Li(this.tracks,[...Object.keys(u),...h]);Object.keys(s).forEach(E=>{this.pauseEventListeners();const{objects:O}=s[E];O.forEach(A=>{const D=u[A.id];A.left=D.left}),this.resumeEventListeners();const k=m.find(A=>A.id===c);k&&k.items.push(...Object.keys(u)),this.tracks=m});const b=this.tracks[d],w=[];Object.keys(r).forEach(E=>{const{objects:O,index:k}=r[E],A=O.map(N=>N.id),[D]=A,M=this.trackItemsMap[D];if(n){const N={id:Je(),items:A,type:M.type,accepts:this.acceptsMap?.[M.type],tempIndex:k};w.push(N)}else{const N=m[d+k];N&&N.items.push(...A),this.tracks=m}});const T=tl(b,w);T.length&&m.splice(d,1,...T),this.tracks=m,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}function A1({trackItemIds:t,isOverlapped:n}){const[r]=t;if(r){if(!this.getObjects("Transition").find(s=>s.id===r)){const s=this.tracks.find(a=>a.items.includes(r));if(n){const a=L4(this.tracks,t),c={id:Je(),items:[r],type:s?.type,accepts:s?.accepts},u=this.tracks.findIndex(d=>d.id===s?.id);a.splice(u,0,c),this.tracks=a}}this.renderTracks(),this.alignItemsToTrack(),this.alignTransitionsToTrack(),this.updateTransitions(),this.updateTrackItemsPosition(),this.updateState({updateHistory:!0,kind:"update"})}}function L4(t,n){return t.map(r=>({...r,items:r.items.filter(s=>!n.includes(s))}))}function k1(t){const{secondaryTracks:n,primaryTracks:r,primaryPositions:s}=t,{positions:a,trackIndex:c}=s,u=c===-1?this.tracks.length:c,[d]=Object.keys(r),h=this.tracks.find(k=>k.id==d),m=r[d],b={id:Je(),items:m.objects.map(k=>k.id),type:h?.type,accepts:h?.accepts},w=el(Object.keys(n).map(k=>n[k].objects.map(A=>A.id))),T=Li(this.tracks,[...Object.keys(a),...w]),E=[];Object.keys(n).forEach(k=>{const{objects:A,index:D}=n[k],M=this.tracks.find(J=>J.id==k),N=A.map(J=>J.id),U={id:Je(),items:N,type:M?.type,accepts:M?.accepts,tempIndex:D};E.push(U)});const O=tl(b,E);O.length&&T.splice(u,0,...O),this.tracks=T,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}const j4=t=>{t.on("track:create",k1.bind(t)),t.on("track-items:resized",A1.bind(t)),t.on("track-items:moved",C1.bind(t))},N4=t=>{t.off("track:create",k1.bind(t)),t.off("track-items:resized",A1.bind(t)),t.off("track-items:moved",C1.bind(t))},R1=t=>{i4(t),f4(t),g4(t),k4(t),j4(t),O4(t),rT(t),D4(t)},O1=t=>{s4(t),h4(t),m4(t),R4(t),N4(t),M4(t),iT(t),P4()},F4={video:["*"],image:["*"],audio:["*"],text:["*"]},U4=["video","image","audio","text"];let xo=class extends B.Canvas{acceptsMap;tracks=[];trackItemsMap={};trackItemIds=[];transitionIds=[];transitionsMap={};trackItemDetailsMap={};bounding;onScroll;tScale;store;state;activeIds=[];spacing;scale;sizesMap;duration;setupFabricDefaults(){B.FabricObject.ownDefaults.borderColor="transparent",B.FabricObject.ownDefaults.cornerColor="white",B.FabricObject.ownDefaults.cornerStrokeColor="transparent",B.FabricObject.ownDefaults.strokeWidth=0,B.FabricObject.ownDefaults.borderOpacityWhenMoving=1,B.FabricObject.ownDefaults.borderScaleFactor=1,B.FabricObject.ownDefaults.cornerSize=8,B.FabricObject.ownDefaults.cornerStyle="rect",B.FabricObject.ownDefaults.centeredScaling=!1,B.FabricObject.ownDefaults.centeredRotation=!0,B.FabricObject.ownDefaults.transparentCorners=!1}constructor(n,r){super(n,r),this.bounding=r.bounding||{width:r.width||0,height:r.height||0},this.spacing={left:16,right:80,...r.spacing};const s=this.viewportTransform;s[4]=this.spacing.left,this.tScale=r.tScale||1/300,this.store=r.store,this.state=r.state,this.scale=r.scale,this.onScroll=r.onScroll,this.acceptsMap=this.createAcceptsItemMap(r.acceptsMap),this.sizesMap=Xp(r.sizesMap),this.setupFabricDefaults(),this.initEventListeners()}createAcceptsItemMap(n=F4){const r={};return Object.keys(n).forEach(s=>{const a=n[s];r[s]=a.includes("*")?U4:a}),r}setActiveIds(n){this.activeIds=n,this.getObjects("Transition").some(s=>n.includes(s.id))||(this.state?.updateState({activeIds:Ie.cloneDeep(this.activeIds)}),ye.dispatch(Vc,{payload:{activeIds:this.activeIds}}))}purge(){O1(this),this.dispose()}static registerItems(n){Object.keys(n).forEach(r=>{B.classRegistry.setClass(n[r],r)})}initEventListeners(){R1(this)}getUpdatedState(){const n=Gt(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,scale:this.scale,duration:n}}getState(){const n=Gt(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,trackItemDetailsMap:this.trackItemDetailsMap,scale:this.scale,duration:n}}notify(n={updateHistory:!1}){const r=this.getUpdatedState();this.state.updateState(r,n)}updateState(n){this.updateTracksState(),this.updateTrackItemsState(),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords();const r=this.getUpdatedState();this.state.updateState(r,n)}scrollTo({scrollLeft:n,scrollTop:r}){const s=[...this.viewportTransform];let a=!1;if(typeof n=="number"&&(s[4]=-n+this.spacing.left,a=!0),typeof r=="number"&&(s[5]=-r,a=!0),a){this.viewportTransform=s;const c=this.getActiveObject();c&&c.setCoords(),this.requestRenderAll()}}setBoundingBox(n){this.bounding=n}calcBounding(){const n=this.getTrackItems().reduce((r,s)=>{const{left:a,top:c,width:u,height:d}=s.getBoundingRect();return{left:Math.min(r.left,a),top:Math.min(r.top,c),width:Math.max(r.width,a+u),height:Math.max(r.height,c+d)}},{left:1/0,top:1/0,width:this.width,height:0});this.bounding=n,ye.dispatch(Zc,{payload:{bounding:n}})}setScale(n){this.pauseEventListeners(),this.tScale=n.zoom,this.scale=n;const r=this.getState();this.getObjects("Video","Image","Text","Audio").forEach(s=>{const a=r.trackItemsMap[s.id],{from:c,to:u}=a.display,d=Ge(c,this.tScale),h=Ge(u-c,this.tScale,s.playbackRate);s.set({left:d,width:h,tScale:n.zoom}),s.setCoords()}),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords(),this.updateTransitions(!1),this.resumeEventListeners(),this.notify()}setViewportPos(n,r){const s=this.getViewportPos(n,r),a=this.viewportTransform;a[4]=s.x,a[5]=s.y,this.requestRenderAll(),this.setActiveTrackItemCoords();const c=this.onScroll;c&&c.call(this,{scrollTop:s.y,scrollLeft:s.x-this.spacing.left})}getViewportPos(n,r){const s=this.bounding.width-100>=this.width?this.spacing.right:0,a=this.width-this.bounding.width-s,c=this.spacing.left,u=Math.max(a,Math.min(n,c));if(this.bounding.height<this.height)return{x:u,y:0};const d=this.height-this.bounding.height-40,h=Math.max(d,Math.min(r,0));return{x:u,y:h}}};Dp(xo,[Ap,e1,t1,n1]);function M1(t){const n=ye.subject.pipe(bn(({key:r})=>r.startsWith(Wh))).subscribe(r=>{if(r.key===Yc){const s=r.value;t.setScale(s?.payload.scale??void 0)}});return{unsubscribe:()=>{n.unsubscribe()}}}xo.registerItems({Text:sl,Image:qp,Video:Kp,Audio:Zp,Track:Jp,Helper:Qp});const D1=({stateManager:t})=>{const n=G.useRef(!1),[r,s]=G.useState(0),a=G.useRef(null),c=G.useRef(null),u=G.useRef(null),d=G.useRef(null),h=G.useRef(null),[m,b]=G.useState({width:0,height:0}),[w,T]=G.useState({width:0,height:0}),{scale:E,playerRef:O,fps:k,setState:A,timeline:D}=tn(),{setTimeline:M}=tn(),N=mo(O??void 0),U=K=>{h.current&&d.current&&(d.current.scrollTop=-K.scrollTop,h.current.scrollLeft=-K.scrollLeft,s(-K.scrollLeft))};G.useEffect(()=>{const K=Ge(N/k*1e3,E.zoom),X=c.current?.getBoundingClientRect().x+c.current?.clientWidth;if(K-r+40>=X){const ie=h.current?.clientWidth,Y=h.current?.scrollWidth,le=h.current?.scrollLeft,De=(Y-(ie+le))/ie;De>=0&&(De>1?h.current?.scrollTo({left:le+ie}):h.current?.scrollTo({left:Y-ie}))}},[N]),G.useEffect(()=>{const K=c.current,X=a.current;if(!K||!X)return;const re=X.clientWidth,ie=X.clientHeight,Y=new xo(K,{width:re,height:ie,bounding:{width:re,height:0},selectionColor:"rgba(0, 216, 214,0.1)",selectionBorderColor:"rgba(0, 216, 214,1.0)",onScroll:U,state:t,scale:E,spacing:{left:go,right:mc}}),le=M1(Y);u.current=Y,b({width:re,height:ie}),T({width:re,height:0}),M(Y);const we=t.subscribeToSize(oe=>{A(oe)}),De=t.subscribeToScale(oe=>{A(oe)}),Te=t.subscribeToTracks(oe=>{A(oe)}),Re=t.subscribeToDuration(oe=>{A(oe)}),ke=t.subscribeToUpdateTrackItem(()=>{const oe=t.getState();A({duration:oe.duration,trackItemsMap:oe.trackItemsMap})}),Ye=t.subscribeToAddOrRemoveItems(()=>{const oe=t.getState();A({trackItemDetailsMap:oe.trackItemDetailsMap,trackItemsMap:oe.trackItemsMap,trackItemIds:oe.trackItemIds,tracks:oe.tracks})}),ht=t.subscribeToUpdateItemDetails(()=>{const oe=t.getState();A({trackItemDetailsMap:oe.trackItemDetailsMap})});return()=>{le.unsubscribe(),Y.purge(),De.unsubscribe(),Te.unsubscribe(),Re.unsubscribe(),Ye.unsubscribe(),ke.unsubscribe(),ht.unsubscribe(),we.unsubscribe()}},[]),G.useEffect(()=>{const X=ye.subject.pipe(bn(({key:re})=>re.startsWith(Vh))).subscribe(re=>{if(re.key===Zc){const ie=re.value?.payload?.bounding;ie&&T({width:ie.width,height:ie.height})}});return()=>{X.unsubscribe()}},[]);const J=K=>{const X=K.currentTarget.scrollLeft;n.current&&u.current.scrollTo({scrollLeft:X}),s(X)},q=K=>{const X=K.currentTarget.scrollTop;n.current&&u.current.scrollTo({scrollTop:X})};G.useEffect(()=>{const K=h.current?.scrollWidth;if(!K||!D)return;const X=D.width;K<X+r&&D.scrollTo({scrollLeft:K-X})},[E]);const Q=K=>{if(!u.current)return;const re=Fn(K,E.zoom);O?.current?.seekTo(re*k/1e3)};return v.jsxs("div",{className:"relative overflow-hidden h-80 w-full",children:[v.jsx(mp,{}),v.jsx(Ep,{onClick:Q,scrollLeft:r}),v.jsx(Ip,{scrollLeft:r}),v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"relative w-10 flex-none"}),v.jsxs("div",{className:"relative h-[230px] flex-1",children:[v.jsx("div",{ref:a,className:"absolute top-0 h-[230px] w-full text-sm text-white ",children:v.jsx("canvas",{ref:c,id:"designcombo-timeline-canvas"})}),v.jsxs(qs,{type:"always",style:{position:"absolute",width:"calc(100vw - 40px)",height:"10px"},className:"ScrollAreaRootH",children:[v.jsx(cc,{onScroll:J,className:"ScrollAreaViewport",id:"viewportH",ref:h,children:v.jsx("div",{style:{width:w.width>m.width?w.width+mc:w.width},className:"pointer-events-none h-[10px]"})}),v.jsx(Zd,{className:"ScrollAreaScrollbar",orientation:"horizontal",children:v.jsx(Kd,{className:"ScrollAreaThumb",onMouseDown:()=>{n.current=!0},onMouseUp:()=>{n.current=!1}})})]}),v.jsxs(qs,{type:"always",style:{position:"absolute",height:"230px",width:"10px"},className:"ScrollAreaRootV",children:[v.jsx(cc,{onScroll:q,className:"ScrollAreaViewport",ref:d,children:v.jsx("div",{style:{height:w.height>m.height?w.height+40:m.height},className:"pointer-events-none w-[10px]"})}),v.jsx(Zd,{className:"ScrollAreaScrollbar",orientation:"vertical",children:v.jsx(Kd,{className:"ScrollAreaThumb",onMouseDown:()=>{n.current=!0},onMouseUp:()=>{n.current=!1}})})]})]})]})]})},z4={Date:!0,RegExp:!0,String:!0,Number:!0};function P1(t,n,r={cyclesFix:!0},s=[]){let a=[];const c=Array.isArray(t);for(const d in t){const h=t[d],m=c?+d:d;if(!(d in n)){a.push({type:"REMOVE",path:[m],oldValue:t[d]});continue}const b=n[d],w=typeof h=="object"&&typeof b=="object"&&Array.isArray(h)===Array.isArray(b);h&&b&&w&&!z4[Object.getPrototypeOf(h)?.constructor?.name]&&(!r.cyclesFix||!s.includes(h))?a.push.apply(a,P1(h,b,r,r.cyclesFix?s.concat([h]):[]).map(T=>(T.path.unshift(m),T))):h!==b&&!(Number.isNaN(h)&&Number.isNaN(b))&&!(w&&(isNaN(h)?h+""==b+"":+h==+b))&&a.push({path:[m],type:"CHANGE",value:b,oldValue:h})}const u=Array.isArray(n);for(const d in n)d in t||a.push({type:"CREATE",path:[u?+d:d],value:n[d]});return a}var hl=Symbol.for("immer-nothing"),Oi=Symbol.for("immer-draftable"),Ct=Symbol.for("immer-state"),L1=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function qe(t,...n){if(process.env.NODE_ENV!=="production"){const r=L1[t],s=typeof r=="function"?r.apply(null,n):r;throw new Error(`[Immer] ${s}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ir=Object.getPrototypeOf;function sr(t){return!!t&&!!t[Ct]}function Hn(t){return t?j1(t)||Array.isArray(t)||!!t[Oi]||!!t.constructor?.[Oi]||Ki(t)||qi(t):!1}var H4=Object.prototype.constructor.toString();function j1(t){if(!t||typeof t!="object")return!1;const n=ir(t);if(n===null)return!0;const r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===H4}function zi(t,n){or(t)===0?Reflect.ownKeys(t).forEach(r=>{n(r,t[r],t)}):t.forEach((r,s)=>n(s,r,t))}function or(t){const n=t[Ct];return n?n.type_:Array.isArray(t)?1:Ki(t)?2:qi(t)?3:0}function Hi(t,n){return or(t)===2?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function Qa(t,n){return or(t)===2?t.get(n):t[n]}function N1(t,n,r){const s=or(t);s===2?t.set(n,r):s===3?t.add(r):t[n]=r}function W4(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}function Ki(t){return t instanceof Map}function qi(t){return t instanceof Set}function tr(t){return t.copy_||t.base_}function _c(t,n){if(Ki(t))return new Map(t);if(qi(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=j1(t);if(n===!0||n==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(t);delete s[Ct];let a=Reflect.ownKeys(s);for(let c=0;c<a.length;c++){const u=a[c],d=s[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(s[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:t[u]})}return Object.create(ir(t),s)}else{const s=ir(t);if(s!==null&&r)return{...t};const a=Object.create(s);return Object.assign(a,t)}}function pl(t,n=!1){return Io(t)||sr(t)||!Hn(t)||(or(t)>1&&(t.set=t.add=t.clear=t.delete=B4),Object.freeze(t),n&&Object.entries(t).forEach(([r,s])=>pl(s,!0))),t}function B4(){qe(2)}function Io(t){return Object.isFrozen(t)}var wc={};function ar(t){const n=wc[t];return n||qe(0,t),n}function V4(t,n){wc[t]||(wc[t]=n)}var Wi;function F1(){return Wi}function $4(t,n){return{drafts_:[],parent_:t,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Sf(t,n){n&&(ar("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=n)}function Sc(t){Tc(t),t.drafts_.forEach(G4),t.drafts_=null}function Tc(t){t===Wi&&(Wi=t.parent_)}function Tf(t){return Wi=$4(Wi,t)}function G4(t){const n=t[Ct];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function xf(t,n){n.unfinalizedDrafts_=n.drafts_.length;const r=n.drafts_[0];return t!==void 0&&t!==r?(r[Ct].modified_&&(Sc(n),qe(4)),Hn(t)&&(t=so(n,t),n.parent_||oo(n,t)),n.patches_&&ar("Patches").generateReplacementPatches_(r[Ct].base_,t,n.patches_,n.inversePatches_)):t=so(n,r,[]),Sc(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),t!==hl?t:void 0}function so(t,n,r){if(Io(n))return n;const s=n[Ct];if(!s)return zi(n,(a,c)=>If(t,s,n,a,c,r)),n;if(s.scope_!==t)return n;if(!s.modified_)return oo(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let c=a,u=!1;s.type_===3&&(c=new Set(a),a.clear(),u=!0),zi(c,(d,h)=>If(t,s,a,d,h,r,u)),oo(t,a,!1),r&&t.patches_&&ar("Patches").generatePatches_(s,r,t.patches_,t.inversePatches_)}return s.copy_}function If(t,n,r,s,a,c,u){if(process.env.NODE_ENV!=="production"&&a===r&&qe(5),sr(a)){const d=c&&n&&n.type_!==3&&!Hi(n.assigned_,s)?c.concat(s):void 0,h=so(t,a,d);if(N1(r,s,h),sr(h))t.canAutoFreeze_=!1;else return}else u&&r.add(a);if(Hn(a)&&!Io(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;so(t,a),(!n||!n.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,s)&&oo(t,a)}}function oo(t,n,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&pl(n,r)}function Y4(t,n){const r=Array.isArray(t),s={type_:r?1:0,scope_:n?n.scope_:F1(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,c=gl;r&&(a=[s],c=Bi);const{revoke:u,proxy:d}=Proxy.revocable(a,c);return s.draft_=d,s.revoke_=u,d}var gl={get(t,n){if(n===Ct)return t;const r=tr(t);if(!Hi(r,n))return X4(t,r,n);const s=r[n];return t.finalized_||!Hn(s)?s:s===ec(t.base_,n)?(tc(t),t.copy_[n]=Ic(s,t)):s},has(t,n){return n in tr(t)},ownKeys(t){return Reflect.ownKeys(tr(t))},set(t,n,r){const s=U1(tr(t),n);if(s?.set)return s.set.call(t.draft_,r),!0;if(!t.modified_){const a=ec(tr(t),n),c=a?.[Ct];if(c&&c.base_===r)return t.copy_[n]=r,t.assigned_[n]=!1,!0;if(W4(r,a)&&(r!==void 0||Hi(t.base_,n)))return!0;tc(t),xc(t)}return t.copy_[n]===r&&(r!==void 0||n in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[n])||(t.copy_[n]=r,t.assigned_[n]=!0),!0},deleteProperty(t,n){return ec(t.base_,n)!==void 0||n in t.base_?(t.assigned_[n]=!1,tc(t),xc(t)):delete t.assigned_[n],t.copy_&&delete t.copy_[n],!0},getOwnPropertyDescriptor(t,n){const r=tr(t),s=Reflect.getOwnPropertyDescriptor(r,n);return s&&{writable:!0,configurable:t.type_!==1||n!=="length",enumerable:s.enumerable,value:r[n]}},defineProperty(){qe(11)},getPrototypeOf(t){return ir(t.base_)},setPrototypeOf(){qe(12)}},Bi={};zi(gl,(t,n)=>{Bi[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Bi.deleteProperty=function(t,n){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(n))&&qe(13),Bi.set.call(this,t,n,void 0)};Bi.set=function(t,n,r){return process.env.NODE_ENV!=="production"&&n!=="length"&&isNaN(parseInt(n))&&qe(14),gl.set.call(this,t[0],n,r,t[0])};function ec(t,n){const r=t[Ct];return(r?tr(r):t)[n]}function X4(t,n,r){const s=U1(n,r);return s?"value"in s?s.value:s.get?.call(t.draft_):void 0}function U1(t,n){if(!(n in t))return;let r=ir(t);for(;r;){const s=Object.getOwnPropertyDescriptor(r,n);if(s)return s;r=ir(r)}}function xc(t){t.modified_||(t.modified_=!0,t.parent_&&xc(t.parent_))}function tc(t){t.copy_||(t.copy_=_c(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Z4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,r,s)=>{if(typeof n=="function"&&typeof r!="function"){const c=r;r=n;const u=this;return function(h=c,...m){return u.produce(h,b=>r.call(this,b,...m))}}typeof r!="function"&&qe(6),s!==void 0&&typeof s!="function"&&qe(7);let a;if(Hn(n)){const c=Tf(this),u=Ic(n,void 0);let d=!0;try{a=r(u),d=!1}finally{d?Sc(c):Tc(c)}return Sf(c,s),xf(a,c)}else if(!n||typeof n!="object"){if(a=r(n),a===void 0&&(a=n),a===hl&&(a=void 0),this.autoFreeze_&&pl(a,!0),s){const c=[],u=[];ar("Patches").generateReplacementPatches_(n,a,c,u),s(c,u)}return a}else qe(1,n)},this.produceWithPatches=(n,r)=>{if(typeof n=="function")return(u,...d)=>this.produceWithPatches(u,h=>n(h,...d));let s,a;return[this.produce(n,r,(u,d)=>{s=u,a=d}),s,a]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Hn(t)||qe(8),sr(t)&&(t=K4(t));const n=Tf(this),r=Ic(t,void 0);return r[Ct].isManual_=!0,Tc(n),r}finishDraft(t,n){const r=t&&t[Ct];(!r||!r.isManual_)&&qe(9);const{scope_:s}=r;return Sf(s,n),xf(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const s=ar("Patches").applyPatches_;return sr(t)?s(t,n):this.produce(t,a=>s(a,n))}};function Ic(t,n){const r=Ki(t)?ar("MapSet").proxyMap_(t,n):qi(t)?ar("MapSet").proxySet_(t,n):Y4(t,n);return(n?n.scope_:F1()).drafts_.push(r),r}function K4(t){return sr(t)||qe(10,t),z1(t)}function z1(t){if(!Hn(t)||Io(t))return t;const n=t[Ct];let r;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=_c(t,n.scope_.immer_.useStrictShallowCopy_)}else r=_c(t,!0);return zi(r,(s,a)=>{N1(r,s,z1(a))}),n&&(n.finalized_=!1),r}function Ef(){process.env.NODE_ENV!=="production"&&L1.push('Sets cannot have "replace" patches.',function(T){return"Unsupported patch operation: "+T},function(T){return"Cannot apply patch, path doesn't resolve: "+T},"Patching reserved attributes like __proto__, prototype and constructor is not allowed");const n="replace",r="add",s="remove";function a(T,E,O,k){switch(T.type_){case 0:case 2:return u(T,E,O,k);case 1:return c(T,E,O,k);case 3:return d(T,E,O,k)}}function c(T,E,O,k){let{base_:A,assigned_:D}=T,M=T.copy_;M.length<A.length&&([A,M]=[M,A],[O,k]=[k,O]);for(let N=0;N<A.length;N++)if(D[N]&&M[N]!==A[N]){const U=E.concat([N]);O.push({op:n,path:U,value:w(M[N])}),k.push({op:n,path:U,value:w(A[N])})}for(let N=A.length;N<M.length;N++){const U=E.concat([N]);O.push({op:r,path:U,value:w(M[N])})}for(let N=M.length-1;A.length<=N;--N){const U=E.concat([N]);k.push({op:s,path:U})}}function u(T,E,O,k){const{base_:A,copy_:D}=T;zi(T.assigned_,(M,N)=>{const U=Qa(A,M),J=Qa(D,M),q=N?Hi(A,M)?n:r:s;if(U===J&&q===n)return;const Q=E.concat(M);O.push(q===s?{op:q,path:Q}:{op:q,path:Q,value:J}),k.push(q===r?{op:s,path:Q}:q===s?{op:r,path:Q,value:w(U)}:{op:n,path:Q,value:w(U)})})}function d(T,E,O,k){let{base_:A,copy_:D}=T,M=0;A.forEach(N=>{if(!D.has(N)){const U=E.concat([M]);O.push({op:s,path:U,value:N}),k.unshift({op:r,path:U,value:N})}M++}),M=0,D.forEach(N=>{if(!A.has(N)){const U=E.concat([M]);O.push({op:r,path:U,value:N}),k.unshift({op:s,path:U,value:N})}M++})}function h(T,E,O,k){O.push({op:n,path:[],value:E===hl?void 0:E}),k.push({op:n,path:[],value:T})}function m(T,E){return E.forEach(O=>{const{path:k,op:A}=O;let D=T;for(let J=0;J<k.length-1;J++){const q=or(D);let Q=k[J];typeof Q!="string"&&typeof Q!="number"&&(Q=""+Q),(q===0||q===1)&&(Q==="__proto__"||Q==="constructor")&&qe(19),typeof D=="function"&&Q==="prototype"&&qe(19),D=Qa(D,Q),typeof D!="object"&&qe(18,k.join("/"))}const M=or(D),N=b(O.value),U=k[k.length-1];switch(A){case n:switch(M){case 2:return D.set(U,N);case 3:qe(16);default:return D[U]=N}case r:switch(M){case 1:return U==="-"?D.push(N):D.splice(U,0,N);case 2:return D.set(U,N);case 3:return D.add(N);default:return D[U]=N}case s:switch(M){case 1:return D.splice(U,1);case 2:return D.delete(U);case 3:return D.delete(O.value);default:return delete D[U]}default:qe(17,A)}}),T}function b(T){if(!Hn(T))return T;if(Array.isArray(T))return T.map(b);if(Ki(T))return new Map(Array.from(T.entries()).map(([O,k])=>[O,b(k)]));if(qi(T))return new Set(Array.from(T).map(b));const E=Object.create(ir(T));for(const O in T)E[O]=b(T[O]);return Hi(T,Oi)&&(E[Oi]=T[Oi]),E}function w(T){return sr(T)?b(T):T}V4("Patches",{applyPatches_:m,generatePatches_:a,generateReplacementPatches_:h})}var At=new Z4,q4=At.produce;At.produceWithPatches.bind(At);At.setAutoFreeze.bind(At);At.setUseStrictShallowCopy.bind(At);var J4=At.applyPatches.bind(At);At.createDraft.bind(At);At.finishDraft.bind(At);function Q4(t){const n=t.value,r=[];if(n?.payload?.trackItemIds){const s=n.payload.trackItemIds;r.push(s),this.updateState({activeIds:r})}if(t.key===Hc){const s=t.value?.payload.trackItemIds,a=Ie.cloneDeep(this.getState()),c=s?.length?s:a.activeIds,u=a.trackItemIds.filter(w=>!c.includes(w)),d=Object.fromEntries(Object.entries(a.trackItemDetailsMap).filter(([w])=>!c.includes(w))),h=Up(a.tracks,c),m=Object.fromEntries(Object.entries(a.trackItemsMap).filter(([w])=>!c.includes(w))),b=Gt(m);this.updateState({trackItemIds:u,trackItemDetailsMap:d,activeIds:[],trackItemsMap:m,tracks:h,duration:b},{updateHistory:!0,kind:"remove"})}if(t.key===Wc){const s=Ie.cloneDeep(this.getState()),a=[],c=t.value?.payload.trackItemIds||s.activeIds;if(c.length===0)return;c.forEach(d=>{const h=s.trackItemsMap[d],m=s.trackItemDetailsMap[d],b=Je();a.push(b),s.trackItemsMap={...s.trackItemsMap,[b]:{...Ie.cloneDeep(h),id:b}},s.trackItemDetailsMap={...s.trackItemDetailsMap,[b]:{...Ie.cloneDeep(m)}},s.trackItemIds.push(b)});const u=s.tracks.map(d=>{const h={...d,id:Je(),items:d.items.filter(m=>c.includes(m)).map(m=>{const b=c.indexOf(m);return a[b]})};return h.items.length?h:null}).filter(Boolean);s.tracks.unshift(...u),this.updateState({trackItemDetailsMap:s.trackItemDetailsMap,tracks:s.tracks,trackItemIds:s.trackItemIds,trackItemsMap:s.trackItemsMap},{updateHistory:!0,kind:"update"})}if(t.key===Bc){const s=Ie.cloneDeep(this.getState()),a=t.value?.options.time;if(s.activeIds.length!==1)return;const c=s.activeIds[0],u=s.trackItemsMap[c];if(a<=u.display.from||a>=u.display.to)return;const d=Je(),h={...u,id:d,display:{from:a,to:u.display.to},trim:{from:a,to:u.display.to}};s.trackItemsMap[c].display.to=a,s.trackItemsMap[d]=h,s.trackItemDetailsMap[d]=s.trackItemDetailsMap[c],s.trackItemIds.push(d),s.tracks.forEach(m=>{m.items.includes(c)&&m.items.push(d)}),this.updateState({trackItemsMap:s.trackItemsMap,trackItemDetailsMap:s.trackItemDetailsMap,trackItemIds:s.trackItemIds,tracks:s.tracks},{updateHistory:!0,kind:"update"})}}async function eI(t){if(t.key==="scene:load"){const n=t.value?.payload,r=n.size,s=n.trackItemIds,a=n.trackItemsMap,c=n.trackItemDetailsMap;if(!s)return;const u=s?.map(async h=>{try{const m=c[h],b=a[h];if(m.type==="text"){const w=await il({id:h,details:m.details,...b},{size:r}),{details:T,...E}=w;c[h]={type:"text",details:T},a[h]=E}return!0}catch{return!1}});await Promise.all(u);const d=Gt(a);this.updateState({...n,trackItemsMap:a,duration:d})}}async function tI(t){const n=Ie.cloneDeep(this.getState()),r=t.value?.options?.trackId,s=t.value?.options?.trackIndex;let a=[],c;if(t.key===Wr){c="video";const d=await Hp(t.value?.payload,{size:n.size}),{details:h,...m}=d;n.trackItemDetailsMap[m.id]={type:c,details:h},n.trackItemsMap[m.id]=m,n.trackItemIds.push(m.id),a=[m.id]}if(t.key===Vr){c="image";const d=await zp(t.value?.payload,{size:n.size}),{details:h,...m}=d;n.trackItemDetailsMap[m.id]={type:c,details:h},n.trackItemsMap[m.id]=m,n.trackItemIds.push(m.id),a=[m.id]}if(t.key===Br){c="audio";const d=await Wp(t.value?.payload),{details:h,...m}=d;n.trackItemDetailsMap[m.id]={type:c,details:h},n.trackItemsMap[m.id]=m,n.trackItemIds.push(m.id),a=[m.id]}if(t.key===Fc){c="text";const{details:d,...h}=await il(t.value?.payload??void 0,{size:n.size});n.trackItemDetailsMap[h.id]={type:c,details:d},n.trackItemsMap[h.id]=h,n.trackItemIds.push(h.id),a.push(h.id)}const u=nI(a,n.tracks,n.trackItemsMap,r,s);if(u.trackId)n.tracks.find(h=>h.id===u.trackId)?.items.push(...a);else if(u.trackIndex!==void 0){const d=Cf(c,a);n.tracks.splice(u.trackIndex,0,d)}else{const d=Cf(c,a);n.tracks.unshift(d)}n.duration=Gt(n.trackItemsMap),this.updateState({trackItemIds:n.trackItemIds,trackItemDetailsMap:n.trackItemDetailsMap,trackItemsMap:n.trackItemsMap,tracks:n.tracks,duration:n.duration,structure:n.structure},{updateHistory:!0,kind:"add"})}function Cf(t,n){return{id:Je(),accepts:["text","audio","helper","video","image"],type:t,items:n,magnetic:!1,static:!1}}const nI=(t,n,r,s,a)=>{if(s===void 0&&a===void 0)return{trackId:void 0,trackIndex:void 0};const c=a!==void 0?n[Math.max(0,Math.min(a,n.length-1))]:n.find(h=>h.id===s);if(!c)return{trackId:void 0,trackIndex:a!==void 0?Math.max(0,Math.min(a,n.length-1)):void 0};const u=c.items.map(h=>r[h]),d=t.map(h=>r[h]);for(const h of u){const m=h.display.from,b=h.display.to;for(const w of d){const T=w.display.from;if(!(w.display.to<=m||T>=b))return{trackId:void 0,trackIndex:n.indexOf(c)}}}return{trackId:c.id,trackIndex:n.indexOf(c)}},Af=["tracks","trackItemsMap","trackItemDetailsMap","transitionIds","transitionsMap","trackItemIds"],rI={size:{width:1080,height:1920},tracks:[],trackItemIds:[],trackItemsMap:{},transitionIds:[],transitionsMap:{},scale:{unit:1,zoom:1,segments:1,index:1},duration:0,activeIds:[],trackItemDetailsMap:{},structure:[]};class H1{stateSubject;stateHistorySubject;prevState;undos;redos;listener;constructor(n){this.stateSubject=null,this.stateHistorySubject=null,this.prevState=null,this.undos=[],this.redos=[],this.listener=null;const r=n||rI;this.stateSubject=new nf(r),this.stateHistorySubject=new nf({handleRedo:!1,handleUndo:!1}),this.prevState=r,this.initListeners()}initListeners(){W1(this)}destroyListeners(){this.listener&&this.listener.unsubscribe()}purge(){this.destroyListeners()}updateHistory(n,r){const s=Ie.pick(n,Af),a=Ie.pick(this.getState(),Af),c=P1(a,s);c.length&&(this.undos.push({undos:c,type:r}),this.redos=[])}getStateHistory(){return this.stateHistorySubject.getValue()}subscribeHistory(n){return this.stateHistorySubject.subscribe(n)}getState(){return this.stateSubject.getValue()}subscribe(n){return this.stateSubject.subscribe(n)}updateState(n,r={updateHistory:!1,kind:void 0}){const s=this.getState(),a={...s,...n};if(!Ie.isEqual(s,a)){r.updateHistory&&this.updateHistory(a,r.kind);const{duration:c,trackItemsMap:u,...d}=s;this.prevState={...d,duration:this.prevState.duration,trackItemsMap:this.prevState.trackItemsMap},this.stateSubject.next(a)}}subscribeToSize(n){return this.stateSubject.asObservable().subscribe(r=>{Ie.isEqual(r.size,this.prevState.size)||n({size:r.size})})}subscribeToScale(n){return this.stateSubject.asObservable().subscribe(r=>{Ie.isEqual(r.scale,this.prevState.scale)||n({scale:r.scale})})}subscribeToUpdateTrackItem(n){return this.stateSubject.asObservable().subscribe(r=>{Ie.isEqual(r.trackItemsMap,this.prevState.trackItemsMap)||n({trackItemsMap:r.trackItemsMap})})}subscribeToUpdateItemDetails(n){return this.stateSubject.asObservable().subscribe(r=>{Ie.isEqual(r.trackItemDetailsMap,this.prevState.trackItemDetailsMap)||n({trackItemDetailsMap:r.trackItemDetailsMap})})}subscribeToDuration(n){return this.stateSubject.asObservable().subscribe(r=>{r.duration!==this.prevState.duration&&n({duration:r.duration})})}subscribeToHistory(n){return this.stateHistorySubject.asObservable().subscribe(r=>{if(r.handleRedo){const s=this.undos[this.undos.length-1]?.type;s==="update"&&n({...this.getState(),type:s}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}if(r.handleUndo){const s=this.redos[this.redos.length-1]?.type;s==="update"&&n({...this.getState(),type:s}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}})}subscribeToAddOrRemoveItems(n){return this.stateSubject.asObservable().subscribe(r=>{(!r.trackItemIds?.every(s=>this.prevState.trackItemIds?.includes(s))||!Ie.isEqual(r.tracks,this.prevState.tracks))&&n({trackItemIds:r.trackItemIds})})}subscribeToActiveIds(n){return this.stateSubject.asObservable().subscribe(r=>{Ie.isEqual(r.activeIds,this.prevState.activeIds)||n({activeIds:r.activeIds})})}subscribeToTracks(n){return this.stateSubject.asObservable().subscribe(r=>{(!Ie.isEqual(r.tracks,this.prevState.tracks)||!Ie.isEqual(r.trackItemIds,this.prevState.trackItemIds)||!Ie.isEqual(r.trackItemsMap,this.prevState.trackItemsMap)||!Ie.isEqual(r.transitionIds,this.prevState.transitionIds)||!Ie.isEqual(r.transitionsMap,this.prevState.transitionsMap)||!Ie.isEqual(r.trackItemDetailsMap,this.prevState.trackItemDetailsMap))&&n({tracks:r.tracks,trackItemIds:r.trackItemIds,trackItemsMap:r.trackItemsMap,transitionIds:r.transitionIds,transitionsMap:r.transitionsMap,trackItemDetailsMap:r.trackItemDetailsMap})})}undo(){const n=this.undos.pop(),r=n?.undos,s=n?.type;if(!r||!s)return;Ef();const{trackItemDetailsMap:a,trackItemIds:c,tracks:u,transitionIds:d,transitionsMap:h,trackItemsMap:m}=this.getState(),b=Ie.cloneDeep({trackItemDetailsMap:a,trackItemIds:c,tracks:u,transitionIds:d,transitionsMap:h,trackItemsMap:m}),w=[],T=[],E=[],O=[],k=[],A=[];r.forEach(Y=>{let le;const we=Y.path.slice(1);Y.type==="CREATE"?le={path:we,op:"remove",value:Y.value}:Y.type==="CHANGE"?le={path:we,op:"replace",value:Y.oldValue}:le={path:we,op:"add",value:Y.oldValue},Y.path.includes("trackItemIds")?E.push(le):Y.path.includes("transitionIds")?T.push(le):Y.path.includes("trackItemsMap")?k.push(le):Y.path.includes("transitionsMap")?O.push(le):Y.path.includes("tracks")?w.push(le):Y.path.includes("trackItemDetailsMap")&&A.push(le)});const D=this.applyPatch(b.tracks,w),M=this.applyPatch(b.transitionIds,T),N=this.applyPatch(b.trackItemIds,E),U=this.applyPatch(b.transitionsMap,O),J=this.applyPatch(b.trackItemsMap,k),q=this.applyPatch(b.trackItemDetailsMap,A),Q=Ie.cloneDeep({tracks:D,transitionIds:M,trackItemIds:N,transitionsMap:U,trackItemsMap:J,trackItemDetailsMap:q}),K=Ie.cloneDeep(this.getState()),X={...K,...Q};this.prevState=K;const re={redos:r,type:s};this.redos.push(re);const ie=Gt(X.trackItemsMap);this.stateSubject.next({...X,duration:ie}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!0})}redo(){const n=this.redos.pop();if(!n?.redos||!n?.type)return;Ef();const r=this.getState(),{trackItemDetailsMap:s,trackItemIds:a,tracks:c,transitionIds:u,transitionsMap:d,trackItemsMap:h}=r,m=Ie.cloneDeep({trackItemDetailsMap:s,trackItemIds:a,tracks:c,transitionIds:u,transitionsMap:d,trackItemsMap:h}),b=[],w=[],T=[],E=[],O=[],k=[];n.redos.forEach(U=>{const J=U.path.slice(1);let q={};switch(U.type){case"CREATE":q={path:J,op:"add",value:U.value};break;case"CHANGE":q={path:J,op:"replace",value:U.value};break;case"REMOVE":q={path:J,op:"remove",value:U.oldValue};break;default:return null}U.path.includes("trackItemIds")?T.push(q):U.path.includes("transitionIds")?w.push(q):U.path.includes("trackItemsMap")?O.push(q):U.path.includes("transitionsMap")?E.push(q):U.path.includes("trackItemDetailsMap")?k.push(q):b.push(q)});const A={tracks:this.applyPatch(m.tracks,b),transitionIds:this.applyPatch(m.transitionIds,w),trackItemIds:this.applyPatch(m.trackItemIds,T),transitionsMap:this.applyPatch(m.transitionsMap,E),trackItemsMap:this.applyPatch(m.trackItemsMap,O),trackItemDetailsMap:this.applyPatch(m.trackItemDetailsMap,k)},D=Ie.cloneDeep(A),M={...Ie.cloneDeep(r),...D};this.prevState=r,this.undos.push({undos:n.redos,type:n.type});const N=Gt(M.trackItemsMap);this.stateSubject.next({...M,duration:N}),this.stateHistorySubject.next({handleRedo:!0,handleUndo:!1})}applyPatch(n,r){return r.reverse().reduce((s,a)=>q4(s,c=>{J4(c,[a])}),n)}}function W1(t){const n=ye.subject.pipe(bn(({key:c})=>c.startsWith(Hh))).subscribe(c=>{c.key===$c&&t.undo(),c.key===Gc&&t.redo()}),r=ye.subject.pipe(bn(({key:c,value:u})=>c.startsWith(Ph))).subscribe(c=>{tI.bind(t)(c)}),s=ye.subject.pipe(bn(({key:c,value:u})=>c.startsWith("scene"))).subscribe(async c=>{await eI.bind(t)(c)}),a=ye.subject.pipe(bn(({key:c})=>c.startsWith(Uh))).subscribe(async c=>{Q4.bind(t)(c)});return()=>{n.unsubscribe(),r.unsubscribe(),a.unsubscribe(),s.unsubscribe()}}const B1=()=>{const{playerRef:t,fps:n,timeline:r,setState:s}=tn();G.useEffect(()=>{const c=ye.subject.pipe(bn(({key:u})=>u.startsWith(Lh))).subscribe(u=>{if(u.key===jh){const{time:d}=u.value?.payload;t?.current?.seekTo(d/1e3*n)}else if(u.key===Uc)t?.current?.play();else if(u.key===zc)t?.current?.pause();else if(u.key===Fh)t?.current?.isPlaying()?t.current.pause():t?.current?.play();else if(u.key===Nh){const{frames:d}=u.value?.payload;t?.current?.seekTo(Math.round(t.current.getCurrentFrame())+d)}});return()=>{c.unsubscribe()}},[t,n]),G.useEffect(()=>{const c=ye.subject.pipe(bn(({key:u})=>u.startsWith(zh))).subscribe(u=>{u.key===Vc&&s({activeIds:u.value?.payload.activeIds})});return()=>{c.unsubscribe()}},[r])},iI=new H1,sI=()=>{const{playerRef:t}=tn();B1();const[n,r]=G.useState([]);return v.jsxs("div",{className:"relative flex h-screen w-screen flex-col bg-background ",children:[v.jsx(Sp,{}),v.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",flex:1,overflow:"hidden"},children:[v.jsx(k3,{}),v.jsx(wp,{}),v.jsx(Cp,{})]}),v.jsx("div",{className:"h-70 w-full ",children:t&&v.jsx(D1,{stateManager:iI})})]})};exports.ACTIVE_CLONE=Wc;exports.ACTIVE_DELETE=Hc;exports.ACTIVE_PASTE=rw;exports.ACTIVE_PREFIX=Uh;exports.ACTIVE_SET=nw;exports.ACTIVE_SPLIT=Bc;exports.ADD_ANIMATION=Z5;exports.ADD_AUDIO=Br;exports.ADD_IMAGE=Vr;exports.ADD_MASK=Y5;exports.ADD_PLACEHOLDER=G5;exports.ADD_PREFIX=Ph;exports.ADD_SUFFIX=U5;exports.ADD_TEXT=Fc;exports.ADD_TRANSITION=X5;exports.ADD_VIDEO=Wr;exports.AUDIOS=vp;exports.AppComponent=sI;exports.Audio=Zp;exports.AudioObject=yn;exports.BASE_TIMELINE_ELEMENT_DURATION_MS=Zw;exports.Button=Ne;exports.CanvasMixin=Ap;exports.DEFAULT_AUDIO_BITRATE=Qw;exports.DEFAULT_AUDIO_SAMPLE_RATE=Jw;exports.DEFAULT_BLUR=zS;exports.DEFAULT_BLUR_STEP=US;exports.DEFAULT_BRIGHTNESS=_S;exports.DEFAULT_BRIGHTNESS_STEP=yS;exports.DEFAULT_CONTRAST=MS;exports.DEFAULT_CONTRAST_STEP=OS;exports.DEFAULT_FADE_IN=lS;exports.DEFAULT_FADE_OUT=uS;exports.DEFAULT_FADE_STEP=cS;exports.DEFAULT_FLIP_X=gS;exports.DEFAULT_FLIP_Y=mS;exports.DEFAULT_FONT=vc;exports.DEFAULT_FRAMERATE=tp;exports.DEFAULT_MAX_BLUR=FS;exports.DEFAULT_MAX_BRIGHTNESS=bS;exports.DEFAULT_MAX_CONTRAST=RS;exports.DEFAULT_MAX_FADE=aS;exports.DEFAULT_MAX_OPACITY=PS;exports.DEFAULT_MAX_ROTATION=fS;exports.DEFAULT_MAX_SATURATION=SS;exports.DEFAULT_MAX_SPEED=WS;exports.DEFAULT_MAX_TEMPERATURE=ES;exports.DEFAULT_MAX_VOLUME=GS;exports.DEFAULT_MEDIA_PANEL_WIDTH=rS;exports.DEFAULT_MIN_BLUR=NS;exports.DEFAULT_MIN_BRIGHTNESS=vS;exports.DEFAULT_MIN_CONTRAST=kS;exports.DEFAULT_MIN_FADE=oS;exports.DEFAULT_MIN_OPACITY=DS;exports.DEFAULT_MIN_ROTATION=dS;exports.DEFAULT_MIN_SATURATION=wS;exports.DEFAULT_MIN_SPEED=HS;exports.DEFAULT_MIN_TEMPERATURE=IS;exports.DEFAULT_MIN_VOLUME=$S;exports.DEFAULT_OPACITY=jS;exports.DEFAULT_OPACITY_STEP=LS;exports.DEFAULT_PREVIEW_HEIGHT=tS;exports.DEFAULT_PREVIEW_SCALE=Jc;exports.DEFAULT_PREVIEW_WIDTH=eS;exports.DEFAULT_ROTATION=pS;exports.DEFAULT_ROTATION_STEP=hS;exports.DEFAULT_SATURATION=xS;exports.DEFAULT_SATURATION_STEP=TS;exports.DEFAULT_SETTINGS_PANEL_WIDTH=sS;exports.DEFAULT_SPEED=VS;exports.DEFAULT_SPEED_STEP=BS;exports.DEFAULT_TEMPERATURE=AS;exports.DEFAULT_TEMPERATURE_STEP=CS;exports.DEFAULT_VIDEO_HEIGHT=ep;exports.DEFAULT_VIDEO_MAX_BITRATE=qw;exports.DEFAULT_VIDEO_MIN_BITRATE=Kw;exports.DEFAULT_VIDEO_WIDTH=Qh;exports.DEFAULT_VOLUME=XS;exports.DEFAULT_VOLUME_STEP=YS;exports.DEFAULT_WEIGHT=Xw;exports.DRAG_END=Pi;exports.DRAG_PREFIX=Bh;exports.DRAG_START=Xc;exports.Draggable=$i;exports.DroppableArea=Kh;exports.EDIT_OBJECT=q5;exports.EDIT_PREFIX=K5;exports.EDIT_SHAPE=Q5;exports.EDIT_TEXT=J5;exports.ENTER_EDIT_MODE=ew;exports.FRAME_INTERVAL=np;exports.GIANT_ICON_SIZE=Hw;exports.HISTORY_PREFIX=Hh;exports.HISTORY_REDO=Gc;exports.HISTORY_RESET=vw;exports.HISTORY_UNDO=$c;exports.Header=mp;exports.Helper=Qp;exports.HelperObject=Gr;exports.IMAGES=bp;exports.Image=qp;exports.ImageObject=bo;exports.LARGER_FONT_SIZE=$w;exports.LARGE_FONT_SIZE=Gw;exports.LARGE_ICON_SIZE=Ww;exports.LAYER_CLONE=hw;exports.LAYER_COPY=dw;exports.LAYER_CUT=gw;exports.LAYER_DELETE=mw;exports.LAYER_EDITING_NAME=uw;exports.LAYER_HIDDEN=sw;exports.LAYER_LOCKED=iw;exports.LAYER_MOVE=ow;exports.LAYER_PASTE=fw;exports.LAYER_PREFIX=zh;exports.LAYER_RENAME=lw;exports.LAYER_SELECT=aw;exports.LAYER_SELECTION=Vc;exports.LAYER_SEND_TO=cw;exports.LAYER_SPLIT=pw;exports.MAX_MEDIA_PANEL_WIDTH=iS;exports.MIN_MEDIA_PANEL_WIDTH=nS;exports.MenuItem=wp;exports.NORMAL_FONT_SIZE=Yw;exports.NORMAL_ICON_SIZE=Bw;exports.NavbarComponent=Sp;exports.PLAYER_PAUSE=zc;exports.PLAYER_PLAY=Uc;exports.PLAYER_PREFIX=Lh;exports.PLAYER_SEEK=jh;exports.PLAYER_SEEK_BY=Nh;exports.PLAYER_SEEK_TO=tw;exports.PLAYER_TOGGLE_PLAY=Fh;exports.PREVIEW_FRAME_WIDTH=Gi;exports.Placeholder=Fr;exports.Player=xp;exports.PlayheadComponent=Ip;exports.PreviewTrackItem=Fi;exports.RulerComponent=Ep;exports.SECONDARY_FONT=Jh;exports.SMALL_FONT_SIZE=qh;exports.SMALL_ICON_SIZE=Vw;exports.STATE_CHANGED=$5;exports.STATE_PREFIX=V5;exports.Scene=Cp;exports.SceneBoard=zw;exports.ScrollArea=cr;exports.ScrollBar=Pc;exports.SequenceItem=Tp;exports.Slider=th;exports.StateManager=H1;exports.TIMELINE_BOUNDING_CHANGED=Zc;exports.TIMELINE_OFFSET_CANVAS_LEFT=go;exports.TIMELINE_OFFSET_CANVAS_RIGHT=mc;exports.TIMELINE_OFFSET_X=eo;exports.TIMELINE_PREFIX=Vh;exports.TIMELINE_SCALE_CHANGED=Yc;exports.TIMELINE_SCALE_PREFIX=Wh;exports.TIMELINE_ZOOM_LEVELS=$t;exports.TRACKS_CHANGED=W5;exports.TRACK_ITEMS_CHANGED=B5;exports.TRACK_ITEMS_PREFIX=H5;exports.TRACK_PREFIX=z5;exports.TRANSITIONS=_p;exports.Tabs=Dh;exports.TabsContent=Qs;exports.TabsList=Nc;exports.TabsTrigger=Js;exports.Text=sl;exports.TextObject=nr;exports.Timeline=xo;exports.TimelineComponent=D1;exports.Track=Jp;exports.TrackItemsMixin=e1;exports.TrackObject=Un;exports.TracksMixin=t1;exports.Transition=Ft;exports.TransitionGuide=Ni;exports.TransitionsMixin=n1;exports.UPLOADS=m3;exports.VIDEOS=yp;exports.Video=Kp;exports.VideoObject=lr;exports.addEventListeners=R1;exports.applyMixins=Dp;exports.buttonVariants=Uf;exports.calculateDisplayRange=Fp;exports.calculateDuration=Gt;exports.calculatePosition=yo;exports.calculateTimelineWidth=fp;exports.calculateTrim=Np;exports.cn=ot;exports.createAudioControls=Op;exports.createControls=Mp;exports.createMediaControls=Rp;exports.createResizeControls=nl;exports.defaultColor=Xi;exports.defaultSizes=Yp;exports.filterAndCleanTracks=Up;exports.findIndex=Qc;exports.formatBytes=j_;exports.formatTimeToHumanReadable=ZS;exports.formatTimelineUnit=rp;exports.frameToTimeString=ip;exports.getCurrentTime=op;exports.getFitZoomLevel=KS;exports.getMovingState=tT;exports.getNextZoom=lp;exports.getNextZoomIndex=dp;exports.getNextZoomLevel=up;exports.getOffset=me;exports.getPreviousZoom=cp;exports.getPreviousZoomIndex=JS;exports.getPreviousZoomLevel=ap;exports.getTextHeight=Ri;exports.getZoomByIndex=qS;exports.handleEvents=M1;exports.handleResize=ji;exports.loadAudio=Pp;exports.loadAudioItem=Wp;exports.loadAudioObject=Bp;exports.loadFonts=hp;exports.loadImage=Lp;exports.loadImageItem=zp;exports.loadImageObject=Vp;exports.loadTextItem=il;exports.loadTextObject=Gp;exports.loadVideo=jp;exports.loadVideoItem=Hp;exports.loadVideoObject=$p;exports.mergeSizes=Xp;exports.mergeTrackObjects=el;exports.movingState=H;exports.positionOffsets=kp;exports.randomInt=QS;exports.removeEventListeners=O1;exports.removeItemsFromTrack=Li;exports.renderControl=_n;exports.reorderTracksByIndex=tl;exports.setupHistoryListeners=W1;exports.timeMsToUnits=Ge;exports.timeToString=sp;exports.transitionStore=We;exports.unitsToTimeMs=Fn;exports.updateMovingState=nT;exports.useCurrentPlayerFrame=mo;exports.useIsDraggingOverTimeline=Yi;exports.useLayoutStore=vo;exports.useStore=tn;exports.useTimelineEvents=B1;exports.wrapResizeWithAnchorPosition=rl;
