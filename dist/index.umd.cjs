(function(I,Bo){typeof exports=="object"&&typeof module<"u"?Bo(exports):typeof define=="function"&&define.amd?define(["exports"],Bo):(I=typeof globalThis<"u"?globalThis:I||self,Bo(I["super-timeline"]={}))})(this,function(I){"use strict";function Bo(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var Vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var $u={exports:{}},Ho={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function Dx(){if(mp)return Ho;mp=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:a,ref:i!==void 0?i:null,props:s}}return Ho.Fragment=e,Ho.jsx=t,Ho.jsxs=t,Ho}var zo={},Yu={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function Rx(){if(vp)return Ne;vp=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function p(P){return P===null||typeof P!="object"?null:(P=g&&P[g]||P["@@iterator"],typeof P=="function"?P:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function C(P,W,ue){this.props=P,this.context=W,this.refs=S,this.updater=ue||v}C.prototype.isReactComponent={},C.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},C.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=C.prototype;function k(P,W,ue){this.props=P,this.context=W,this.refs=S,this.updater=ue||v}var A=k.prototype=new T;A.constructor=k,b(A,C.prototype),A.isPureReactComponent=!0;var M=Array.isArray,R={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function $(P,W,ue,ge,we,be){return ue=be.ref,{$$typeof:r,type:P,key:W,ref:ue!==void 0?ue:null,props:be}}function V(P,W){return $(P.type,W,void 0,void 0,void 0,P.props)}function G(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function X(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return W[ue]})}var J=/\/+/g;function q(P,W){return typeof P=="object"&&P!==null&&P.key!=null?X(""+P.key):W.toString(36)}function Z(){}function ae(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Z,Z):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ye(P,W,ue,ge,we){var be=typeof P;(be==="undefined"||be==="boolean")&&(P=null);var he=!1;if(P===null)he=!0;else switch(be){case"bigint":case"string":case"number":he=!0;break;case"object":switch(P.$$typeof){case r:case e:he=!0;break;case d:return he=P._init,ye(he(P._payload),W,ue,ge,we)}}if(he)return we=we(P),he=ge===""?"."+q(P,0):ge,M(we)?(ue="",he!=null&&(ue=he.replace(J,"$&/")+"/"),ye(we,W,ue,"",function(xt){return xt})):we!=null&&(G(we)&&(we=V(we,ue+(we.key==null||P&&P.key===we.key?"":(""+we.key).replace(J,"$&/")+"/")+he)),W.push(we)),1;he=0;var qe=ge===""?".":ge+":";if(M(P))for(var Ue=0;Ue<P.length;Ue++)ge=P[Ue],be=qe+q(ge,Ue),he+=ye(ge,W,ue,be,we);else if(Ue=p(P),typeof Ue=="function")for(P=Ue.call(P),Ue=0;!(ge=P.next()).done;)ge=ge.value,be=qe+q(ge,Ue++),he+=ye(ge,W,ue,be,we);else if(be==="object"){if(typeof P.then=="function")return ye(ae(P),W,ue,ge,we);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return he}function ee(P,W,ue){if(P==null)return P;var ge=[],we=0;return ye(P,ge,"","",function(be){return W.call(ue,be,we++)}),ge}function me(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var fe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ie(){}return Ne.Children={map:ee,forEach:function(P,W,ue){ee(P,function(){W.apply(this,arguments)},ue)},count:function(P){var W=0;return ee(P,function(){W++}),W},toArray:function(P){return ee(P,function(W){return W})||[]},only:function(P){if(!G(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ne.Component=C,Ne.Fragment=t,Ne.Profiler=i,Ne.PureComponent=k,Ne.StrictMode=n,Ne.Suspense=u,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ne.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ne.cache=function(P){return function(){return P.apply(null,arguments)}},Ne.cloneElement=function(P,W,ue){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ge=b({},P.props),we=P.key,be=void 0;if(W!=null)for(he in W.ref!==void 0&&(be=void 0),W.key!==void 0&&(we=""+W.key),W)!N.call(W,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&W.ref===void 0||(ge[he]=W[he]);var he=arguments.length-2;if(he===1)ge.children=ue;else if(1<he){for(var qe=Array(he),Ue=0;Ue<he;Ue++)qe[Ue]=arguments[Ue+2];ge.children=qe}return $(P.type,we,void 0,void 0,be,ge)},Ne.createContext=function(P){return P={$$typeof:a,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Ne.createElement=function(P,W,ue){var ge,we={},be=null;if(W!=null)for(ge in W.key!==void 0&&(be=""+W.key),W)N.call(W,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(we[ge]=W[ge]);var he=arguments.length-2;if(he===1)we.children=ue;else if(1<he){for(var qe=Array(he),Ue=0;Ue<he;Ue++)qe[Ue]=arguments[Ue+2];we.children=qe}if(P&&P.defaultProps)for(ge in he=P.defaultProps,he)we[ge]===void 0&&(we[ge]=he[ge]);return $(P,be,void 0,void 0,null,we)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(P){return{$$typeof:c,render:P}},Ne.isValidElement=G,Ne.lazy=function(P){return{$$typeof:d,_payload:{_status:-1,_result:P},_init:me}},Ne.memo=function(P,W){return{$$typeof:h,type:P,compare:W===void 0?null:W}},Ne.startTransition=function(P){var W=R.T,ue={};R.T=ue;try{var ge=P(),we=R.S;we!==null&&we(ue,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(ie,fe)}catch(be){fe(be)}finally{R.T=W}},Ne.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ne.use=function(P){return R.H.use(P)},Ne.useActionState=function(P,W,ue){return R.H.useActionState(P,W,ue)},Ne.useCallback=function(P,W){return R.H.useCallback(P,W)},Ne.useContext=function(P){return R.H.useContext(P)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(P,W){return R.H.useDeferredValue(P,W)},Ne.useEffect=function(P,W){return R.H.useEffect(P,W)},Ne.useId=function(){return R.H.useId()},Ne.useImperativeHandle=function(P,W,ue){return R.H.useImperativeHandle(P,W,ue)},Ne.useInsertionEffect=function(P,W){return R.H.useInsertionEffect(P,W)},Ne.useLayoutEffect=function(P,W){return R.H.useLayoutEffect(P,W)},Ne.useMemo=function(P,W){return R.H.useMemo(P,W)},Ne.useOptimistic=function(P,W){return R.H.useOptimistic(P,W)},Ne.useReducer=function(P,W,ue){return R.H.useReducer(P,W,ue)},Ne.useRef=function(P){return R.H.useRef(P)},Ne.useState=function(P){return R.H.useState(P)},Ne.useSyncExternalStore=function(P,W,ue){return R.H.useSyncExternalStore(P,W,ue)},Ne.useTransition=function(){return R.H.useTransition()},Ne.version="19.0.0",Ne}var Wo={exports:{}};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Wo.exports;var yp;function jx(){return yp||(yp=1,function(r,e){process.env.NODE_ENV!=="production"&&function(){function t(_,H){Object.defineProperty(s.prototype,_,{get:function(){console.warn("%s(...) is deprecated in plain JavaScript React classes. %s",H[0],H[1])}})}function n(_){return _===null||typeof _!="object"?null:(_=nn&&_[nn]||_["@@iterator"],typeof _=="function"?_:null)}function i(_,H){_=(_=_.constructor)&&(_.displayName||_.name)||"ReactClass";var re=_+"."+H;dr[re]||(console.error("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",H,_),dr[re]=!0)}function s(_,H,re){this.props=_,this.context=H,this.refs=pe,this.updater=re||j}function a(){}function c(_,H,re){this.props=_,this.context=H,this.refs=pe,this.updater=re||j}function u(_){return""+_}function h(_){try{u(_);var H=!1}catch{H=!0}if(H){H=console;var re=H.error,ce=typeof Symbol=="function"&&Symbol.toStringTag&&_[Symbol.toStringTag]||_.constructor.name||"Object";return re.call(H,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",ce),u(_)}}function d(_){if(_==null)return null;if(typeof _=="function")return _.$$typeof===Oe?null:_.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case Ue:return"Fragment";case qe:return"Portal";case Ct:return"Profiler";case xt:return"StrictMode";case ct:return"Suspense";case Pt:return"SuspenseList"}if(typeof _=="object")switch(typeof _.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),_.$$typeof){case Te:return(_.displayName||"Context")+".Provider";case Yt:return(_._context.displayName||"Context")+".Consumer";case Zt:var H=_.render;return _=_.displayName,_||(_=H.displayName||H.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case Ir:return H=_.displayName||null,H!==null?H:d(_.type)||"Memo";case nt:H=_._payload,_=_._init;try{return d(_(H))}catch{}}return null}function g(_){return typeof _=="string"||typeof _=="function"||_===Ue||_===Ct||_===xt||_===ct||_===Pt||_===Lt||typeof _=="object"&&_!==null&&(_.$$typeof===nt||_.$$typeof===Ir||_.$$typeof===Te||_.$$typeof===Yt||_.$$typeof===Zt||_.$$typeof===Tt||_.getModuleId!==void 0)}function p(){}function v(){if(Gt===0){Mr=console.log,nr=console.info,Wr=console.warn,Jt=console.error,Di=console.group,Ri=console.groupCollapsed,ti=console.groupEnd;var _={configurable:!0,enumerable:!0,value:p,writable:!0};Object.defineProperties(console,{info:_,log:_,warn:_,error:_,group:_,groupCollapsed:_,groupEnd:_})}Gt++}function b(){if(Gt--,Gt===0){var _={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:de({},_,{value:Mr}),info:de({},_,{value:nr}),warn:de({},_,{value:Wr}),error:de({},_,{value:Jt}),group:de({},_,{value:Di}),groupCollapsed:de({},_,{value:Ri}),groupEnd:de({},_,{value:ti})})}0>Gt&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function S(_){if(Fn===void 0)try{throw Error()}catch(re){var H=re.stack.trim().match(/\n( *(at )?)/);Fn=H&&H[1]||"",wo=-1<re.stack.indexOf(`
    at`)?" (<anonymous>)":-1<re.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fn+_+wo}function C(_,H){if(!_||ji)return"";var re=xn.get(_);if(re!==void 0)return re;ji=!0,re=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var ce=null;ce=Se.H,Se.H=null,v();try{var xe={DetermineComponentFrameRoot:function(){try{if(H){var xr=function(){throw Error()};if(Object.defineProperty(xr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xr,[])}catch(Pr){var Co=Pr}Reflect.construct(_,[],xr)}else{try{xr.call()}catch(Pr){Co=Pr}_.call(xr.prototype)}}else{try{throw Error()}catch(Pr){Co=Pr}(xr=_())&&typeof xr.catch=="function"&&xr.catch(function(){})}}catch(Pr){if(Pr&&Co&&typeof Pr.stack=="string")return[Pr.stack,Co.stack]}return[null,null]}};xe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ke=Object.getOwnPropertyDescriptor(xe.DetermineComponentFrameRoot,"name");ke&&ke.configurable&&Object.defineProperty(xe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ce=xe.DetermineComponentFrameRoot(),st=Ce[0],rt=Ce[1];if(st&&rt){var bt=st.split(`
`),fr=rt.split(`
`);for(Ce=ke=0;ke<bt.length&&!bt[ke].includes("DetermineComponentFrameRoot");)ke++;for(;Ce<fr.length&&!fr[Ce].includes("DetermineComponentFrameRoot");)Ce++;if(ke===bt.length||Ce===fr.length)for(ke=bt.length-1,Ce=fr.length-1;1<=ke&&0<=Ce&&bt[ke]!==fr[Ce];)Ce--;for(;1<=ke&&0<=Ce;ke--,Ce--)if(bt[ke]!==fr[Ce]){if(ke!==1||Ce!==1)do if(ke--,Ce--,0>Ce||bt[ke]!==fr[Ce]){var ri=`
`+bt[ke].replace(" at new "," at ");return _.displayName&&ri.includes("<anonymous>")&&(ri=ri.replace("<anonymous>",_.displayName)),typeof _=="function"&&xn.set(_,ri),ri}while(1<=ke&&0<=Ce);break}}}finally{ji=!1,Se.H=ce,b(),Error.prepareStackTrace=re}return bt=(bt=_?_.displayName||_.name:"")?S(bt):"",typeof _=="function"&&xn.set(_,bt),bt}function T(_){if(_==null)return"";if(typeof _=="function"){var H=_.prototype;return C(_,!(!H||!H.isReactComponent))}if(typeof _=="string")return S(_);switch(_){case ct:return S("Suspense");case Pt:return S("SuspenseList")}if(typeof _=="object")switch(_.$$typeof){case Zt:return _=C(_.render,!1),_;case Ir:return T(_.type);case nt:H=_._payload,_=_._init;try{return T(_(H))}catch{}}return""}function k(){var _=Se.A;return _===null?null:_.getOwner()}function A(_){if(Xt.call(_,"key")){var H=Object.getOwnPropertyDescriptor(_,"key").get;if(H&&H.isReactWarning)return!1}return _.key!==void 0}function M(_,H){function re(){za||(za=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",H))}re.isReactWarning=!0,Object.defineProperty(_,"key",{get:re,configurable:!0})}function R(){var _=d(this.type);return Ua[_]||(Ua[_]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),_=this.props.ref,_!==void 0?_:null}function N(_,H,re,ce,xe,ke){return re=ke.ref,_={$$typeof:he,type:_,key:H,props:ke,_owner:xe},(re!==void 0?re:null)!==null?Object.defineProperty(_,"ref",{enumerable:!1,get:R}):Object.defineProperty(_,"ref",{enumerable:!1,value:null}),_._store={},Object.defineProperty(_._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(_,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.freeze&&(Object.freeze(_.props),Object.freeze(_)),_}function $(_,H){return H=N(_.type,H,void 0,void 0,_._owner,_.props),H._store.validated=_._store.validated,H}function V(_,H){if(typeof _=="object"&&_&&_.$$typeof!==_o){if(Ke(_))for(var re=0;re<_.length;re++){var ce=_[re];G(ce)&&X(ce,H)}else if(G(_))_._store&&(_._store.validated=1);else if(re=n(_),typeof re=="function"&&re!==_.entries&&(re=re.call(_),re!==_))for(;!(_=re.next()).done;)G(_.value)&&X(_.value,H)}}function G(_){return typeof _=="object"&&_!==null&&_.$$typeof===he}function X(_,H){if(_._store&&!_._store.validated&&_.key==null&&(_._store.validated=1,H=J(H),!So[H])){So[H]=!0;var re="";_&&_._owner!=null&&_._owner!==k()&&(re=null,typeof _._owner.tag=="number"?re=d(_._owner.type):typeof _._owner.name=="string"&&(re=_._owner.name),re=" It was passed a child from "+re+".");var ce=Se.getCurrentStack;Se.getCurrentStack=function(){var xe=T(_.type);return ce&&(xe+=ce()||""),xe},console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',H,re),Se.getCurrentStack=ce}}function J(_){var H="",re=k();return re&&(re=d(re.type))&&(H=`

Check the render method of \``+re+"`."),H||(_=d(_))&&(H=`

Check the top-level render call using <`+_+">."),H}function q(_){var H={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(re){return H[re]})}function Z(_,H){return typeof _=="object"&&_!==null&&_.key!=null?(h(_.key),q(""+_.key)):H.toString(36)}function ae(){}function ye(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(ae,ae):(_.status="pending",_.then(function(H){_.status==="pending"&&(_.status="fulfilled",_.value=H)},function(H){_.status==="pending"&&(_.status="rejected",_.reason=H)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function ee(_,H,re,ce,xe){var ke=typeof _;(ke==="undefined"||ke==="boolean")&&(_=null);var Ce=!1;if(_===null)Ce=!0;else switch(ke){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(_.$$typeof){case he:case qe:Ce=!0;break;case nt:return Ce=_._init,ee(Ce(_._payload),H,re,ce,xe)}}if(Ce){Ce=_,xe=xe(Ce);var st=ce===""?"."+Z(Ce,0):ce;return Ke(xe)?(re="",st!=null&&(re=st.replace(Cs,"$&/")+"/"),ee(xe,H,re,"",function(bt){return bt})):xe!=null&&(G(xe)&&(xe.key!=null&&(Ce&&Ce.key===xe.key||h(xe.key)),re=$(xe,re+(xe.key==null||Ce&&Ce.key===xe.key?"":(""+xe.key).replace(Cs,"$&/")+"/")+st),ce!==""&&Ce!=null&&G(Ce)&&Ce.key==null&&Ce._store&&!Ce._store.validated&&(re._store.validated=2),xe=re),H.push(xe)),1}if(Ce=0,st=ce===""?".":ce+":",Ke(_))for(var rt=0;rt<_.length;rt++)ce=_[rt],ke=st+Z(ce,rt),Ce+=ee(ce,H,re,ke,xe);else if(rt=n(_),typeof rt=="function")for(rt===_.entries&&(xo||console.warn("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),xo=!0),_=rt.call(_),rt=0;!(ce=_.next()).done;)ce=ce.value,ke=st+Z(ce,rt++),Ce+=ee(ce,H,re,ke,xe);else if(ke==="object"){if(typeof _.then=="function")return ee(ye(_),H,re,ce,xe);throw H=String(_),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function me(_,H,re){if(_==null)return _;var ce=[],xe=0;return ee(_,ce,"","",function(ke){return H.call(re,ke,xe++)}),ce}function fe(_){if(_._status===-1){var H=_._result;H=H(),H.then(function(re){(_._status===0||_._status===-1)&&(_._status=1,_._result=re)},function(re){(_._status===0||_._status===-1)&&(_._status=2,_._result=re)}),_._status===-1&&(_._status=0,_._result=H)}if(_._status===1)return H=_._result,H===void 0&&console.error(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,H),"default"in H||console.error(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,H),H.default;throw _._result}function ie(){var _=Se.H;return _===null&&console.error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`),_}function P(){}function W(_){if(Qt===null)try{var H=("require"+Math.random()).slice(0,7);Qt=(r&&r[H]).call(r,"timers").setImmediate}catch{Qt=function(ce){Xe===!1&&(Xe=!0,typeof MessageChannel>"u"&&console.error("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var xe=new MessageChannel;xe.port1.onmessage=ce,xe.port2.postMessage(void 0)}}return Qt(_)}function ue(_){return 1<_.length&&typeof AggregateError=="function"?new AggregateError(_):_[0]}function ge(_,H){H!==Sr-1&&console.error("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Sr=H}function we(_,H,re){var ce=Se.actQueue;if(ce!==null)if(ce.length!==0)try{be(ce),W(function(){return we(_,H,re)});return}catch(xe){Se.thrownErrors.push(xe)}else Se.actQueue=null;0<Se.thrownErrors.length?(ce=ue(Se.thrownErrors),Se.thrownErrors.length=0,re(ce)):H(_)}function be(_){if(!$a){$a=!0;var H=0;try{for(;H<_.length;H++){var re=_[H];do{Se.didUsePromise=!1;var ce=re(!1);if(ce!==null){if(Se.didUsePromise){_[H]=re,_.splice(0,H);return}re=ce}else break}while(!0)}_.length=0}catch(xe){_.splice(0,H+1),Se.thrownErrors.push(xe)}finally{$a=!1}}}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var he=Symbol.for("react.transitional.element"),qe=Symbol.for("react.portal"),Ue=Symbol.for("react.fragment"),xt=Symbol.for("react.strict_mode"),Ct=Symbol.for("react.profiler"),Yt=Symbol.for("react.consumer"),Te=Symbol.for("react.context"),Zt=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),Pt=Symbol.for("react.suspense_list"),Ir=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),Lt=Symbol.for("react.offscreen"),nn=Symbol.iterator,dr={},j={isMounted:function(){return!1},enqueueForceUpdate:function(_){i(_,"forceUpdate")},enqueueReplaceState:function(_){i(_,"replaceState")},enqueueSetState:function(_){i(_,"setState")}},de=Object.assign,pe={};Object.freeze(pe),s.prototype.isReactComponent={},s.prototype.setState=function(_,H){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,H,"setState")},s.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};var je={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},tt;for(tt in je)je.hasOwnProperty(tt)&&t(tt,je[tt]);a.prototype=s.prototype,je=c.prototype=new a,je.constructor=c,de(je,s.prototype),je.isPureReactComponent=!0;var Ke=Array.isArray,Oe=Symbol.for("react.client.reference"),Se={H:null,A:null,T:null,S:null,actQueue:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1,didUsePromise:!1,thrownErrors:[],getCurrentStack:null},Xt=Object.prototype.hasOwnProperty,Tt=Symbol.for("react.client.reference"),Gt=0,Mr,nr,Wr,Jt,Di,Ri,ti;p.__reactDisabledLog=!0;var Fn,wo,ji=!1,xn=new(typeof WeakMap=="function"?WeakMap:Map),_o=Symbol.for("react.client.reference"),za,Wa,Ua={},So={},xo=!1,Cs=/\/+/g,Ze=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},Xe=!1,Qt=null,Sr=0,Ts=!1,$a=!1,nu=typeof queueMicrotask=="function"?function(_){queueMicrotask(function(){return queueMicrotask(_)})}:W;e.Children={map:me,forEach:function(_,H,re){me(_,function(){H.apply(this,arguments)},re)},count:function(_){var H=0;return me(_,function(){H++}),H},toArray:function(_){return me(_,function(H){return H})||[]},only:function(_){if(!G(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},e.Component=s,e.Fragment=Ue,e.Profiler=Ct,e.PureComponent=c,e.StrictMode=xt,e.Suspense=ct,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,e.act=function(_){var H=Se.actQueue,re=Sr;Sr++;var ce=Se.actQueue=H!==null?H:[],xe=!1;try{var ke=_()}catch(rt){Se.thrownErrors.push(rt)}if(0<Se.thrownErrors.length)throw ge(H,re),_=ue(Se.thrownErrors),Se.thrownErrors.length=0,_;if(ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var Ce=ke;return nu(function(){xe||Ts||(Ts=!0,console.error("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),{then:function(rt,bt){xe=!0,Ce.then(function(fr){if(ge(H,re),re===0){try{be(ce),W(function(){return we(fr,rt,bt)})}catch(xr){Se.thrownErrors.push(xr)}if(0<Se.thrownErrors.length){var ri=ue(Se.thrownErrors);Se.thrownErrors.length=0,bt(ri)}}else rt(fr)},function(fr){ge(H,re),0<Se.thrownErrors.length&&(fr=ue(Se.thrownErrors),Se.thrownErrors.length=0),bt(fr)})}}}var st=ke;if(ge(H,re),re===0&&(be(ce),ce.length!==0&&nu(function(){xe||Ts||(Ts=!0,console.error("A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:\n\nawait act(() => ...)"))}),Se.actQueue=null),0<Se.thrownErrors.length)throw _=ue(Se.thrownErrors),Se.thrownErrors.length=0,_;return{then:function(rt,bt){xe=!0,re===0?(Se.actQueue=ce,W(function(){return we(st,rt,bt)})):rt(st)}}},e.cache=function(_){return function(){return _.apply(null,arguments)}},e.cloneElement=function(_,H,re){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var ce=de({},_.props),xe=_.key,ke=_._owner;if(H!=null){var Ce;e:{if(Xt.call(H,"ref")&&(Ce=Object.getOwnPropertyDescriptor(H,"ref").get)&&Ce.isReactWarning){Ce=!1;break e}Ce=H.ref!==void 0}Ce&&(ke=k()),A(H)&&(h(H.key),xe=""+H.key);for(st in H)!Xt.call(H,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&H.ref===void 0||(ce[st]=H[st])}var st=arguments.length-2;if(st===1)ce.children=re;else if(1<st){Ce=Array(st);for(var rt=0;rt<st;rt++)Ce[rt]=arguments[rt+2];ce.children=Ce}for(ce=N(_.type,xe,void 0,void 0,ke,ce),xe=2;xe<arguments.length;xe++)V(arguments[xe],ce.type);return ce},e.createContext=function(_){return _={$$typeof:Te,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:Yt,_context:_},_._currentRenderer=null,_._currentRenderer2=null,_},e.createElement=function(_,H,re){if(g(_))for(var ce=2;ce<arguments.length;ce++)V(arguments[ce],_);else{if(ce="",(_===void 0||typeof _=="object"&&_!==null&&Object.keys(_).length===0)&&(ce+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),_===null)var xe="null";else Ke(_)?xe="array":_!==void 0&&_.$$typeof===he?(xe="<"+(d(_.type)||"Unknown")+" />",ce=" Did you accidentally export a JSX literal instead of a component?"):xe=typeof _;console.error("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",xe,ce)}var ke;if(ce={},xe=null,H!=null)for(ke in Wa||!("__self"in H)||"key"in H||(Wa=!0,console.warn("Your app (or one of its dependencies) is using an outdated JSX transform. Update to the modern JSX transform for faster performance: https://react.dev/link/new-jsx-transform")),A(H)&&(h(H.key),xe=""+H.key),H)Xt.call(H,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(ce[ke]=H[ke]);var Ce=arguments.length-2;if(Ce===1)ce.children=re;else if(1<Ce){for(var st=Array(Ce),rt=0;rt<Ce;rt++)st[rt]=arguments[rt+2];Object.freeze&&Object.freeze(st),ce.children=st}if(_&&_.defaultProps)for(ke in Ce=_.defaultProps,Ce)ce[ke]===void 0&&(ce[ke]=Ce[ke]);return xe&&M(ce,typeof _=="function"?_.displayName||_.name||"Unknown":_),N(_,xe,void 0,void 0,k(),ce)},e.createRef=function(){var _={current:null};return Object.seal(_),_},e.forwardRef=function(_){_!=null&&_.$$typeof===Ir?console.error("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof _!="function"?console.error("forwardRef requires a render function but was given %s.",_===null?"null":typeof _):_.length!==0&&_.length!==2&&console.error("forwardRef render functions accept exactly two parameters: props and ref. %s",_.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),_!=null&&_.defaultProps!=null&&console.error("forwardRef render functions do not support defaultProps. Did you accidentally pass a React component?");var H={$$typeof:Zt,render:_},re;return Object.defineProperty(H,"displayName",{enumerable:!1,configurable:!0,get:function(){return re},set:function(ce){re=ce,_.name||_.displayName||(Object.defineProperty(_,"name",{value:ce}),_.displayName=ce)}}),H},e.isValidElement=G,e.lazy=function(_){return{$$typeof:nt,_payload:{_status:-1,_result:_},_init:fe}},e.memo=function(_,H){g(_)||console.error("memo: The first argument must be a component. Instead received: %s",_===null?"null":typeof _),H={$$typeof:Ir,type:_,compare:H===void 0?null:H};var re;return Object.defineProperty(H,"displayName",{enumerable:!1,configurable:!0,get:function(){return re},set:function(ce){re=ce,_.name||_.displayName||(Object.defineProperty(_,"name",{value:ce}),_.displayName=ce)}}),H},e.startTransition=function(_){var H=Se.T,re={};Se.T=re,re._updatedFibers=new Set;try{var ce=_(),xe=Se.S;xe!==null&&xe(re,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(P,Ze)}catch(ke){Ze(ke)}finally{H===null&&re._updatedFibers&&(_=re._updatedFibers.size,re._updatedFibers.clear(),10<_&&console.warn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table.")),Se.T=H}},e.unstable_useCacheRefresh=function(){return ie().useCacheRefresh()},e.use=function(_){return ie().use(_)},e.useActionState=function(_,H,re){return ie().useActionState(_,H,re)},e.useCallback=function(_,H){return ie().useCallback(_,H)},e.useContext=function(_){var H=ie();return _.$$typeof===Yt&&console.error("Calling useContext(Context.Consumer) is not supported and will cause bugs. Did you mean to call useContext(Context) instead?"),H.useContext(_)},e.useDebugValue=function(_,H){return ie().useDebugValue(_,H)},e.useDeferredValue=function(_,H){return ie().useDeferredValue(_,H)},e.useEffect=function(_,H){return ie().useEffect(_,H)},e.useId=function(){return ie().useId()},e.useImperativeHandle=function(_,H,re){return ie().useImperativeHandle(_,H,re)},e.useInsertionEffect=function(_,H){return ie().useInsertionEffect(_,H)},e.useLayoutEffect=function(_,H){return ie().useLayoutEffect(_,H)},e.useMemo=function(_,H){return ie().useMemo(_,H)},e.useOptimistic=function(_,H){return ie().useOptimistic(_,H)},e.useReducer=function(_,H,re){return ie().useReducer(_,H,re)},e.useRef=function(_){return ie().useRef(_)},e.useState=function(_){return ie().useState(_)},e.useSyncExternalStore=function(_,H,re){return ie().useSyncExternalStore(_,H,re)},e.useTransition=function(){return ie().useTransition()},e.version="19.0.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()}(Wo,Wo.exports)),Wo.exports}process.env.NODE_ENV==="production"?Yu.exports=Rx():Yu.exports=jx();var m=Yu.exports;const Pe=pp(m),Lx=Bo({__proto__:null,default:Pe},[m]);/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function Fx(){return bp||(bp=1,process.env.NODE_ENV!=="production"&&function(){function r(j){if(j==null)return null;if(typeof j=="function")return j.$$typeof===fe?null:j.displayName||j.name||null;if(typeof j=="string")return j;switch(j){case N:return"Fragment";case R:return"Portal";case V:return"Profiler";case $:return"StrictMode";case q:return"Suspense";case Z:return"SuspenseList"}if(typeof j=="object")switch(typeof j.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),j.$$typeof){case X:return(j.displayName||"Context")+".Provider";case G:return(j._context.displayName||"Context")+".Consumer";case J:var de=j.render;return j=j.displayName,j||(j=de.displayName||de.name||"",j=j!==""?"ForwardRef("+j+")":"ForwardRef"),j;case ae:return de=j.displayName||null,de!==null?de:r(j.type)||"Memo";case ye:de=j._payload,j=j._init;try{return r(j(de))}catch{}}return null}function e(j){return""+j}function t(j){try{e(j);var de=!1}catch{de=!0}if(de){de=console;var pe=de.error,je=typeof Symbol=="function"&&Symbol.toStringTag&&j[Symbol.toStringTag]||j.constructor.name||"Object";return pe.call(de,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",je),e(j)}}function n(){}function i(){if(we===0){be=console.log,he=console.info,qe=console.warn,Ue=console.error,xt=console.group,Ct=console.groupCollapsed,Yt=console.groupEnd;var j={configurable:!0,enumerable:!0,value:n,writable:!0};Object.defineProperties(console,{info:j,log:j,warn:j,error:j,group:j,groupCollapsed:j,groupEnd:j})}we++}function s(){if(we--,we===0){var j={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:W({},j,{value:be}),info:W({},j,{value:he}),warn:W({},j,{value:qe}),error:W({},j,{value:Ue}),group:W({},j,{value:xt}),groupCollapsed:W({},j,{value:Ct}),groupEnd:W({},j,{value:Yt})})}0>we&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function a(j){if(Te===void 0)try{throw Error()}catch(pe){var de=pe.stack.trim().match(/\n( *(at )?)/);Te=de&&de[1]||"",Zt=-1<pe.stack.indexOf(`
    at`)?" (<anonymous>)":-1<pe.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+j+Zt}function c(j,de){if(!j||ct)return"";var pe=Pt.get(j);if(pe!==void 0)return pe;ct=!0,pe=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var je=null;je=ie.H,ie.H=null,i();try{var tt={DetermineComponentFrameRoot:function(){try{if(de){var nr=function(){throw Error()};if(Object.defineProperty(nr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nr,[])}catch(Jt){var Wr=Jt}Reflect.construct(j,[],nr)}else{try{nr.call()}catch(Jt){Wr=Jt}j.call(nr.prototype)}}else{try{throw Error()}catch(Jt){Wr=Jt}(nr=j())&&typeof nr.catch=="function"&&nr.catch(function(){})}}catch(Jt){if(Jt&&Wr&&typeof Jt.stack=="string")return[Jt.stack,Wr.stack]}return[null,null]}};tt.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Ke=Object.getOwnPropertyDescriptor(tt.DetermineComponentFrameRoot,"name");Ke&&Ke.configurable&&Object.defineProperty(tt.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Oe=tt.DetermineComponentFrameRoot(),Se=Oe[0],Xt=Oe[1];if(Se&&Xt){var Tt=Se.split(`
`),Gt=Xt.split(`
`);for(Oe=Ke=0;Ke<Tt.length&&!Tt[Ke].includes("DetermineComponentFrameRoot");)Ke++;for(;Oe<Gt.length&&!Gt[Oe].includes("DetermineComponentFrameRoot");)Oe++;if(Ke===Tt.length||Oe===Gt.length)for(Ke=Tt.length-1,Oe=Gt.length-1;1<=Ke&&0<=Oe&&Tt[Ke]!==Gt[Oe];)Oe--;for(;1<=Ke&&0<=Oe;Ke--,Oe--)if(Tt[Ke]!==Gt[Oe]){if(Ke!==1||Oe!==1)do if(Ke--,Oe--,0>Oe||Tt[Ke]!==Gt[Oe]){var Mr=`
`+Tt[Ke].replace(" at new "," at ");return j.displayName&&Mr.includes("<anonymous>")&&(Mr=Mr.replace("<anonymous>",j.displayName)),typeof j=="function"&&Pt.set(j,Mr),Mr}while(1<=Ke&&0<=Oe);break}}}finally{ct=!1,ie.H=je,s(),Error.prepareStackTrace=pe}return Tt=(Tt=j?j.displayName||j.name:"")?a(Tt):"",typeof j=="function"&&Pt.set(j,Tt),Tt}function u(j){if(j==null)return"";if(typeof j=="function"){var de=j.prototype;return c(j,!(!de||!de.isReactComponent))}if(typeof j=="string")return a(j);switch(j){case q:return a("Suspense");case Z:return a("SuspenseList")}if(typeof j=="object")switch(j.$$typeof){case J:return j=c(j.render,!1),j;case ae:return u(j.type);case ye:de=j._payload,j=j._init;try{return u(j(de))}catch{}}return""}function h(){var j=ie.A;return j===null?null:j.getOwner()}function d(j){if(P.call(j,"key")){var de=Object.getOwnPropertyDescriptor(j,"key").get;if(de&&de.isReactWarning)return!1}return j.key!==void 0}function g(j,de){function pe(){nt||(nt=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",de))}pe.isReactWarning=!0,Object.defineProperty(j,"key",{get:pe,configurable:!0})}function p(){var j=r(this.type);return Lt[j]||(Lt[j]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),j=this.props.ref,j!==void 0?j:null}function v(j,de,pe,je,tt,Ke){return pe=Ke.ref,j={$$typeof:M,type:j,key:de,props:Ke,_owner:tt},(pe!==void 0?pe:null)!==null?Object.defineProperty(j,"ref",{enumerable:!1,get:p}):Object.defineProperty(j,"ref",{enumerable:!1,value:null}),j._store={},Object.defineProperty(j._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(j,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.freeze&&(Object.freeze(j.props),Object.freeze(j)),j}function b(j,de,pe,je,tt,Ke){if(typeof j=="string"||typeof j=="function"||j===N||j===V||j===$||j===q||j===Z||j===ee||typeof j=="object"&&j!==null&&(j.$$typeof===ye||j.$$typeof===ae||j.$$typeof===X||j.$$typeof===G||j.$$typeof===J||j.$$typeof===ue||j.getModuleId!==void 0)){var Oe=de.children;if(Oe!==void 0)if(je)if(ge(Oe)){for(je=0;je<Oe.length;je++)S(Oe[je],j);Object.freeze&&Object.freeze(Oe)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else S(Oe,j)}else Oe="",(j===void 0||typeof j=="object"&&j!==null&&Object.keys(j).length===0)&&(Oe+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),j===null?je="null":ge(j)?je="array":j!==void 0&&j.$$typeof===M?(je="<"+(r(j.type)||"Unknown")+" />",Oe=" Did you accidentally export a JSX literal instead of a component?"):je=typeof j,console.error("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",je,Oe);if(P.call(de,"key")){Oe=r(j);var Se=Object.keys(de).filter(function(Tt){return Tt!=="key"});je=0<Se.length?"{key: someKey, "+Se.join(": ..., ")+": ...}":"{key: someKey}",nn[Oe+je]||(Se=0<Se.length?"{"+Se.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,je,Oe,Se,Oe),nn[Oe+je]=!0)}if(Oe=null,pe!==void 0&&(t(pe),Oe=""+pe),d(de)&&(t(de.key),Oe=""+de.key),"key"in de){pe={};for(var Xt in de)Xt!=="key"&&(pe[Xt]=de[Xt])}else pe=de;return Oe&&g(pe,typeof j=="function"?j.displayName||j.name||"Unknown":j),v(j,Oe,Ke,tt,h(),pe)}function S(j,de){if(typeof j=="object"&&j&&j.$$typeof!==Ir){if(ge(j))for(var pe=0;pe<j.length;pe++){var je=j[pe];C(je)&&T(je,de)}else if(C(j))j._store&&(j._store.validated=1);else if(j===null||typeof j!="object"?pe=null:(pe=me&&j[me]||j["@@iterator"],pe=typeof pe=="function"?pe:null),typeof pe=="function"&&pe!==j.entries&&(pe=pe.call(j),pe!==j))for(;!(j=pe.next()).done;)C(j.value)&&T(j.value,de)}}function C(j){return typeof j=="object"&&j!==null&&j.$$typeof===M}function T(j,de){if(j._store&&!j._store.validated&&j.key==null&&(j._store.validated=1,de=k(de),!dr[de])){dr[de]=!0;var pe="";j&&j._owner!=null&&j._owner!==h()&&(pe=null,typeof j._owner.tag=="number"?pe=r(j._owner.type):typeof j._owner.name=="string"&&(pe=j._owner.name),pe=" It was passed a child from "+pe+".");var je=ie.getCurrentStack;ie.getCurrentStack=function(){var tt=u(j.type);return je&&(tt+=je()||""),tt},console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',de,pe),ie.getCurrentStack=je}}function k(j){var de="",pe=h();return pe&&(pe=r(pe.type))&&(de=`

Check the render method of \``+pe+"`."),de||(j=r(j))&&(de=`

Check the top-level render call using <`+j+">."),de}var A=m,M=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),X=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),me=Symbol.iterator,fe=Symbol.for("react.client.reference"),ie=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=Object.prototype.hasOwnProperty,W=Object.assign,ue=Symbol.for("react.client.reference"),ge=Array.isArray,we=0,be,he,qe,Ue,xt,Ct,Yt;n.__reactDisabledLog=!0;var Te,Zt,ct=!1,Pt=new(typeof WeakMap=="function"?WeakMap:Map),Ir=Symbol.for("react.client.reference"),nt,Lt={},nn={},dr={};zo.Fragment=N,zo.jsx=function(j,de,pe,je,tt){return b(j,de,pe,!1,je,tt)},zo.jsxs=function(j,de,pe,je,tt){return b(j,de,pe,!0,je,tt)}}()),zo}process.env.NODE_ENV==="production"?$u.exports=Dx():$u.exports=Fx();var w=$u.exports;function wp(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function _p(...r){return e=>{let t=!1;const n=r.map(i=>{const s=wp(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():wp(r[i],null)}}}}function mr(...r){return m.useCallback(_p(...r),r)}var js=m.forwardRef((r,e)=>{const{children:t,...n}=r,i=m.Children.toArray(t),s=i.find(Bx);if(s){const a=s.props.children,c=i.map(u=>u===s?m.Children.count(a)>1?m.Children.only(null):m.isValidElement(a)?a.props.children:null:u);return w.jsx(Xu,{...n,ref:e,children:m.isValidElement(a)?m.cloneElement(a,void 0,c):null})}return w.jsx(Xu,{...n,ref:e,children:t})});js.displayName="Slot";var Xu=m.forwardRef((r,e)=>{const{children:t,...n}=r;if(m.isValidElement(t)){const i=Hx(t),s=Vx(n,t.props);return t.type!==m.Fragment&&(s.ref=e?_p(e,i):i),m.cloneElement(t,s)}return m.Children.count(t)>1?m.Children.only(null):null});Xu.displayName="SlotClone";var Nx=({children:r})=>w.jsx(w.Fragment,{children:r});function Bx(r){return m.isValidElement(r)&&r.type===Nx}function Vx(r,e){const t={...e};for(const n in e){const i=r[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?t[n]=(...c)=>{s(...c),i(...c)}:i&&(t[n]=i):n==="style"?t[n]={...i,...s}:n==="className"&&(t[n]=[i,s].filter(Boolean).join(" "))}return{...r,...t}}function Hx(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var zx=js;function Sp(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=Sp(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function xp(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=Sp(r))&&(n&&(n+=" "),n+=e);return n}const Cp=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Tp=xp,Wx=(r,e)=>t=>{var n;if(e?.variants==null)return Tp(r,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const d=t?.[h],g=s?.[h];if(d===null)return null;const p=Cp(d)||Cp(g);return i[h][p]}),c=t&&Object.entries(t).reduce((h,d)=>{let[g,p]=d;return p===void 0||(h[g]=p),h},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,d)=>{let{class:g,className:p,...v}=d;return Object.entries(v).every(b=>{let[S,C]=b;return Array.isArray(C)?C.includes({...s,...c}[S]):{...s,...c}[S]===C})?[...h,g,p]:h},[]);return Tp(r,a,u,t?.class,t?.className)},Gu="-",Ux=r=>{const e=Yx(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:a=>{const c=a.split(Gu);return c[0]===""&&c.length!==1&&c.shift(),Ep(c,e)||$x(a)},getConflictingClassGroupIds:(a,c)=>{const u=t[a]||[];return c&&n[a]?[...u,...n[a]]:u}}},Ep=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?Ep(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(Gu);return e.validators.find(({validator:a})=>a(s))?.classGroupId},kp=/^\[(.+)\]$/,$x=r=>{if(kp.test(r)){const e=kp.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Yx=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return Gx(Object.entries(r.classGroups),t).forEach(([s,a])=>{qu(a,n,s,e)}),n},qu=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Op(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(Xx(i)){qu(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,a])=>{qu(a,Op(e,s),t,n)})})},Op=(r,e)=>{let t=r;return e.split(Gu).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},Xx=r=>r.isThemeGetter,Gx=(r,e)=>e?r.map(([t,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,c])=>[e+a,c])):s);return[t,i]}):r,qx=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(s,a)=>{t.set(s,a),e++,e>r&&(e=0,n=t,t=new Map)};return{get(s){let a=t.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){t.has(s)?t.set(s,a):i(s,a)}}},Ap="!",Kx=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,i=e[0],s=e.length,a=c=>{const u=[];let h=0,d=0,g;for(let C=0;C<c.length;C++){let T=c[C];if(h===0){if(T===i&&(n||c.slice(C,C+s)===e)){u.push(c.slice(d,C)),d=C+s;continue}if(T==="/"){g=C;continue}}T==="["?h++:T==="]"&&h--}const p=u.length===0?c:c.substring(d),v=p.startsWith(Ap),b=v?p.substring(1):p,S=g&&g>d?g-d:void 0;return{modifiers:u,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:S}};return t?c=>t({className:c,parseClassName:a}):a},Zx=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},Jx=r=>({cache:qx(r.cacheSize),parseClassName:Kx(r),...Ux(r)}),Qx=/\s+/,eC=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],a=r.trim().split(Qx);let c="";for(let u=a.length-1;u>=0;u-=1){const h=a[u],{modifiers:d,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:v}=t(h);let b=!!v,S=n(b?p.substring(0,v):p);if(!S){if(!b){c=h+(c.length>0?" "+c:c);continue}if(S=n(p),!S){c=h+(c.length>0?" "+c:c);continue}b=!1}const C=Zx(d).join(":"),T=g?C+Ap:C,k=T+S;if(s.includes(k))continue;s.push(k);const A=i(S,b);for(let M=0;M<A.length;++M){const R=A[M];s.push(T+R)}c=h+(c.length>0?" "+c:c)}return c};function tC(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Ip(e))&&(n&&(n+=" "),n+=t);return n}const Ip=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=Ip(r[n]))&&(t&&(t+=" "),t+=e);return t};function rC(r,...e){let t,n,i,s=a;function a(u){const h=e.reduce((d,g)=>g(d),r());return t=Jx(h),n=t.cache.get,i=t.cache.set,s=c,c(u)}function c(u){const h=n(u);if(h)return h;const d=eC(u,t);return i(u,d),d}return function(){return s(tC.apply(null,arguments))}}const pt=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},Mp=/^\[(?:([a-z-]+):)?(.+)\]$/i,nC=/^\d+\/\d+$/,iC=new Set(["px","full","screen"]),sC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hn=r=>Ls(r)||iC.has(r)||nC.test(r),di=r=>Fs(r,"length",vC),Ls=r=>!!r&&!Number.isNaN(Number(r)),Ku=r=>Fs(r,"number",Ls),Uo=r=>!!r&&Number.isInteger(Number(r)),uC=r=>r.endsWith("%")&&Ls(r.slice(0,-1)),Be=r=>Mp.test(r),fi=r=>sC.test(r),hC=new Set(["length","size","percentage"]),dC=r=>Fs(r,hC,Pp),fC=r=>Fs(r,"position",Pp),gC=new Set(["image","url"]),pC=r=>Fs(r,gC,bC),mC=r=>Fs(r,"",yC),$o=()=>!0,Fs=(r,e,t)=>{const n=Mp.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},vC=r=>oC.test(r)&&!aC.test(r),Pp=()=>!1,yC=r=>cC.test(r),bC=r=>lC.test(r),wC=rC(()=>{const r=pt("colors"),e=pt("spacing"),t=pt("blur"),n=pt("brightness"),i=pt("borderColor"),s=pt("borderRadius"),a=pt("borderSpacing"),c=pt("borderWidth"),u=pt("contrast"),h=pt("grayscale"),d=pt("hueRotate"),g=pt("invert"),p=pt("gap"),v=pt("gradientColorStops"),b=pt("gradientColorStopPositions"),S=pt("inset"),C=pt("margin"),T=pt("opacity"),k=pt("padding"),A=pt("saturate"),M=pt("scale"),R=pt("sepia"),N=pt("skew"),$=pt("space"),V=pt("translate"),G=()=>["auto","contain","none"],X=()=>["auto","hidden","clip","visible","scroll"],J=()=>["auto",Be,e],q=()=>[Be,e],Z=()=>["",Hn,di],ae=()=>["auto",Ls,Be],ye=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],fe=()=>["start","end","center","between","around","evenly","stretch"],ie=()=>["","0",Be],P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Ls,Be];return{cacheSize:500,separator:":",theme:{colors:[$o],spacing:[Hn,di],blur:["none","",fi,Be],brightness:W(),borderColor:[r],borderRadius:["none","","full",fi,Be],borderSpacing:q(),borderWidth:Z(),contrast:W(),grayscale:ie(),hueRotate:W(),invert:ie(),gap:q(),gradientColorStops:[r],gradientColorStopPositions:[uC,di],inset:J(),margin:J(),opacity:W(),padding:q(),saturate:W(),scale:W(),sepia:ie(),skew:W(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",Be]}],container:["container"],columns:[{columns:[fi]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ye(),Be]}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uo,Be]}],basis:[{basis:J()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Be]}],grow:[{grow:ie()}],shrink:[{shrink:ie()}],order:[{order:["first","last","none",Uo,Be]}],"grid-cols":[{"grid-cols":[$o]}],"col-start-end":[{col:["auto",{span:["full",Uo,Be]},Be]}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":[$o]}],"row-start-end":[{row:["auto",{span:[Uo,Be]},Be]}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Be]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...fe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...fe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...fe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Be,e]}],"min-w":[{"min-w":[Be,e,"min","max","fit"]}],"max-w":[{"max-w":[Be,e,"none","full","min","max","fit","prose",{screen:[fi]},fi]}],h:[{h:[Be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",fi,di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ku]}],"font-family":[{font:[$o]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Be]}],"line-clamp":[{"line-clamp":["none",Ls,Ku]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hn,Be]}],"list-image":[{"list-image":["none",Be]}],"list-style-type":[{list:["none","disc","decimal",Be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hn,di]}],"underline-offset":[{"underline-offset":["auto",Hn,Be]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ye(),fC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",dC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pC]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:ee()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[Hn,Be]}],"outline-w":[{outline:[Hn,di]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[Hn,di]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",fi,mC]}],"shadow-color":[{shadow:[$o]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...me(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":me()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",fi,Be]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[g]}],saturate:[{saturate:[A]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Be]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Be]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Uo,Be]}],"translate-x":[{"translate-x":[V]}],"translate-y":[{"translate-y":[V]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Be]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Be]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Be]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Hn,di,Ku]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function gi(...r){return wC(xp(r))}function _C(r,e={}){const{decimals:t=0,sizeType:n="normal"}=e,i=["Bytes","KB","MB","GB","TB"],s=["Bytes","KiB","MiB","GiB","TiB"];if(r===0)return"0 Byte";const a=Math.floor(Math.log(r)/Math.log(1024));return`${(r/Math.pow(1024,a)).toFixed(t)} ${n==="accurate"?s[a]??"Bytest":i[a]??"Bytes"}`}const Dp=Wx("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),or=m.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...i},s)=>{const a=n?js:"button";return w.jsx(a,{className:gi(Dp({variant:e,size:t,className:r})),ref:s,...i})});or.displayName="Button";function Zu(r,[e,t]){return Math.min(t,Math.max(e,r))}function kt(r,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(r?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function Yo(r,e=[]){let t=[];function n(s,a){const c=m.createContext(a),u=t.length;t=[...t,a];const h=g=>{const{scope:p,children:v,...b}=g,S=p?.[r]?.[u]||c,C=m.useMemo(()=>b,Object.values(b));return w.jsx(S.Provider,{value:C,children:v})};h.displayName=s+"Provider";function d(g,p){const v=p?.[r]?.[u]||c,b=m.useContext(v);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,d]}const i=()=>{const s=t.map(a=>m.createContext(a));return function(c){const u=c?.[r]||s;return m.useMemo(()=>({[`__scope${r}`]:{...c,[r]:u}}),[c,u])}};return i.scopeName=r,[n,SC(i,...e)]}function SC(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((c,{useScope:u,scopeName:h})=>{const g=u(s)[`__scope${h}`];return{...c,...g}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function On(r){const e=m.useRef(r);return m.useEffect(()=>{e.current=r}),m.useMemo(()=>(...t)=>e.current?.(...t),[])}function Ju({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,i]=xC({defaultProp:e,onChange:t}),s=r!==void 0,a=s?r:n,c=On(t),u=m.useCallback(h=>{if(s){const g=typeof h=="function"?h(r):h;g!==r&&c(g)}else i(h)},[s,r,i,c]);return[a,u]}function xC({defaultProp:r,onChange:e}){const t=m.useState(r),[n]=t,i=m.useRef(n),s=On(e);return m.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),t}var CC=m.createContext(void 0);function ac(r){const e=m.useContext(CC);return r||e||"ltr"}function TC(r){const e=m.useRef({value:r,previous:r});return m.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var Xo=globalThis?.document?m.useLayoutEffect:()=>{};function EC(r){const[e,t]=m.useState(void 0);return Xo(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,c;if("borderBoxSize"in s){const u=s.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,c=h.blockSize}else a=r.offsetWidth,c=r.offsetHeight;t({width:a,height:c})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var Qu={exports:{}},ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function kC(){if(Rp)return ar;Rp=1;var r=m;function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,h,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:d}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ar.createPortal=function(u,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(u,h,null,d)},ar.flushSync=function(u){var h=a.T,d=n.p;try{if(a.T=null,n.p=2,u)return u()}finally{a.T=h,n.p=d,n.d.f()}},ar.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(u,h))},ar.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},ar.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var d=h.as,g=c(d,h.crossOrigin),p=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?n.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:v}):d==="script"&&n.d.X(u,{crossOrigin:g,integrity:p,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ar.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=c(h.as,h.crossOrigin);n.d.M(u,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(u)},ar.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,g=c(d,h.crossOrigin);n.d.L(u,d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ar.preloadModule=function(u,h){if(typeof u=="string")if(h){var d=c(h.as,h.crossOrigin);n.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(u)},ar.requestFormReset=function(u){n.d.r(u)},ar.unstable_batchedUpdates=function(u,h){return u(h)},ar.useFormState=function(u,h,d){return a.H.useFormState(u,h,d)},ar.useFormStatus=function(){return a.H.useHostTransitionStatus()},ar.version="19.0.0",ar}var cr={};/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp;function OC(){return jp||(jp=1,process.env.NODE_ENV!=="production"&&function(){function r(){}function e(g){return""+g}function t(g,p,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;try{e(b);var S=!1}catch{S=!0}return S&&(console.error("The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",typeof Symbol=="function"&&Symbol.toStringTag&&b[Symbol.toStringTag]||b.constructor.name||"Object"),e(b)),{$$typeof:h,key:b==null?null:""+b,children:g,containerInfo:p,implementation:v}}function n(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}function i(g){return g===null?"`null`":g===void 0?"`undefined`":g===""?"an empty string":'something with type "'+typeof g+'"'}function s(g){return g===null?"`null`":g===void 0?"`undefined`":g===""?"an empty string":typeof g=="string"?JSON.stringify(g):typeof g=="number"?"`"+g+"`":'something with type "'+typeof g+'"'}function a(){var g=d.H;return g===null&&console.error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://react.dev/link/invalid-hook-call for tips about how to debug and fix this problem.`),g}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var c=m,u={d:{f:r,r:function(){throw Error("Invalid form element. requestFormReset must be passed a form that was rendered by React.")},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},h=Symbol.for("react.portal"),d=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;typeof Map=="function"&&Map.prototype!=null&&typeof Map.prototype.forEach=="function"&&typeof Set=="function"&&Set.prototype!=null&&typeof Set.prototype.clear=="function"&&typeof Set.prototype.forEach=="function"||console.error("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,cr.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error("Target container is not a DOM element.");return t(g,p,null,v)},cr.flushSync=function(g){var p=d.T,v=u.p;try{if(d.T=null,u.p=2,g)return g()}finally{d.T=p,u.p=v,u.d.f()&&console.error("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task.")}},cr.preconnect=function(g,p){typeof g=="string"&&g?p!=null&&typeof p!="object"?console.error("ReactDOM.preconnect(): Expected the `options` argument (second) to be an object but encountered %s instead. The only supported option at this time is `crossOrigin` which accepts a string.",s(p)):p!=null&&typeof p.crossOrigin!="string"&&console.error("ReactDOM.preconnect(): Expected the `crossOrigin` option (second argument) to be a string but encountered %s instead. Try removing this option or passing a string value instead.",i(p.crossOrigin)):console.error("ReactDOM.preconnect(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",i(g)),typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,u.d.C(g,p))},cr.prefetchDNS=function(g){if(typeof g!="string"||!g)console.error("ReactDOM.prefetchDNS(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",i(g));else if(1<arguments.length){var p=arguments[1];typeof p=="object"&&p.hasOwnProperty("crossOrigin")?console.error("ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. It looks like the you are attempting to set a crossOrigin property for this DNS lookup hint. Browsers do not perform DNS queries using CORS and setting this attribute on the resource hint has no effect. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.",s(p)):console.error("ReactDOM.prefetchDNS(): Expected only one argument, `href`, but encountered %s as a second argument instead. This argument is reserved for future options and is currently disallowed. Try calling ReactDOM.prefetchDNS() with just a single string argument, `href`.",s(p))}typeof g=="string"&&u.d.D(g)},cr.preinit=function(g,p){if(typeof g=="string"&&g?p==null||typeof p!="object"?console.error("ReactDOM.preinit(): Expected the `options` argument (second) to be an object with an `as` property describing the type of resource to be preinitialized but encountered %s instead.",s(p)):p.as!=="style"&&p.as!=="script"&&console.error('ReactDOM.preinit(): Expected the `as` property in the `options` argument (second) to contain a valid value describing the type of resource to be preinitialized but encountered %s instead. Valid values for `as` are "style" and "script".',s(p.as)):console.error("ReactDOM.preinit(): Expected the `href` argument (first) to be a non-empty string but encountered %s instead.",i(g)),typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,b=n(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?u.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:C}):v==="script"&&u.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},cr.preinitModule=function(g,p){var v="";if(typeof g=="string"&&g||(v+=" The `href` argument encountered was "+i(g)+"."),p!==void 0&&typeof p!="object"?v+=" The `options` argument encountered was "+i(p)+".":p&&"as"in p&&p.as!=="script"&&(v+=" The `as` option encountered was "+s(p.as)+"."),v)console.error("ReactDOM.preinitModule(): Expected up to two arguments, a non-empty `href` string and, optionally, an `options` object with a valid `as` property.%s",v);else switch(v=p&&typeof p.as=="string"?p.as:"script",v){case"script":break;default:v=s(v),console.error('ReactDOM.preinitModule(): Currently the only supported "as" type for this function is "script" but received "%s" instead. This warning was generated for `href` "%s". In the future other module types will be supported, aligning with the import-attributes proposal. Learn more here: (https://github.com/tc39/proposal-import-attributes)',v,g)}typeof g=="string"&&(typeof p=="object"&&p!==null?(p.as==null||p.as==="script")&&(v=n(p.as,p.crossOrigin),u.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})):p==null&&u.d.M(g))},cr.preload=function(g,p){var v="";if(typeof g=="string"&&g||(v+=" The `href` argument encountered was "+i(g)+"."),p==null||typeof p!="object"?v+=" The `options` argument encountered was "+i(p)+".":typeof p.as=="string"&&p.as||(v+=" The `as` option encountered was "+i(p.as)+"."),v&&console.error('ReactDOM.preload(): Expected two arguments, a non-empty `href` string and an `options` object with an `as` property valid for a `<link rel="preload" as="..." />` tag.%s',v),typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){v=p.as;var b=n(v,p.crossOrigin);u.d.L(g,v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},cr.preloadModule=function(g,p){var v="";typeof g=="string"&&g||(v+=" The `href` argument encountered was "+i(g)+"."),p!==void 0&&typeof p!="object"?v+=" The `options` argument encountered was "+i(p)+".":p&&"as"in p&&typeof p.as!="string"&&(v+=" The `as` option encountered was "+i(p.as)+"."),v&&console.error('ReactDOM.preloadModule(): Expected two arguments, a non-empty `href` string and, optionally, an `options` object with an `as` property valid for a `<link rel="modulepreload" as="..." />` tag.%s',v),typeof g=="string"&&(p?(v=n(p.as,p.crossOrigin),u.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})):u.d.m(g))},cr.requestFormReset=function(g){u.d.r(g)},cr.unstable_batchedUpdates=function(g,p){return g(p)},cr.useFormState=function(g,p,v){return a().useFormState(g,p,v)},cr.useFormStatus=function(){return a().useHostTransitionStatus()},cr.version="19.0.0",typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()),cr}function Lp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(process.env.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lp)}catch(r){console.error(r)}}}process.env.NODE_ENV==="production"?(Lp(),Qu.exports=kC()):Qu.exports=OC();var eh=Qu.exports,AC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vr=AC.reduce((r,e)=>{const t=m.forwardRef((n,i)=>{const{asChild:s,...a}=n,c=s?js:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(c,{...a,ref:i})});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{});function Fp(r){const e=r+"CollectionProvider",[t,n]=Yo(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:b,children:S}=v,C=Pe.useRef(null),T=Pe.useRef(new Map).current;return w.jsx(i,{scope:b,itemMap:T,collectionRef:C,children:S})};a.displayName=e;const c=r+"CollectionSlot",u=Pe.forwardRef((v,b)=>{const{scope:S,children:C}=v,T=s(c,S),k=mr(b,T.collectionRef);return w.jsx(js,{ref:k,children:C})});u.displayName=c;const h=r+"CollectionItemSlot",d="data-radix-collection-item",g=Pe.forwardRef((v,b)=>{const{scope:S,children:C,...T}=v,k=Pe.useRef(null),A=mr(b,k),M=s(h,S);return Pe.useEffect(()=>(M.itemMap.set(k,{ref:k,...T}),()=>void M.itemMap.delete(k))),w.jsx(js,{[d]:"",ref:A,children:C})});g.displayName=h;function p(v){const b=s(r+"CollectionConsumer",v);return Pe.useCallback(()=>{const C=b.collectionRef.current;if(!C)return[];const T=Array.from(C.querySelectorAll(`[${d}]`));return Array.from(b.itemMap.values()).sort((M,R)=>T.indexOf(M.ref.current)-T.indexOf(R.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},p,n]}var Np=["PageUp","PageDown"],Bp=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Vp={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ns="Slider",[th,IC,MC]=Fp(Ns),[Hp,e9]=Yo(Ns,[MC]),[PC,cc]=Hp(Ns),zp=m.forwardRef((r,e)=>{const{name:t,min:n=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[n],value:d,onValueChange:g=()=>{},onValueCommit:p=()=>{},inverted:v=!1,form:b,...S}=r,C=m.useRef(new Set),T=m.useRef(0),A=a==="horizontal"?DC:RC,[M=[],R]=Ju({prop:d,defaultProp:h,onChange:J=>{[...C.current][T.current]?.focus(),g(J)}}),N=m.useRef(M);function $(J){const q=BC(M,J);X(J,q)}function V(J){X(J,T.current)}function G(){const J=N.current[T.current];M[T.current]!==J&&p(M)}function X(J,q,{commit:Z}={commit:!1}){const ae=WC(s),ye=UC(Math.round((J-n)/s)*s+n,ae),ee=Zu(ye,[n,i]);R((me=[])=>{const fe=FC(me,ee,q);if(zC(fe,u*s)){T.current=fe.indexOf(ee);const ie=String(fe)!==String(me);return ie&&Z&&p(fe),ie?fe:me}else return me})}return w.jsx(PC,{scope:r.__scopeSlider,name:t,disabled:c,min:n,max:i,valueIndexToChangeRef:T,thumbs:C.current,values:M,orientation:a,form:b,children:w.jsx(th.Provider,{scope:r.__scopeSlider,children:w.jsx(th.Slot,{scope:r.__scopeSlider,children:w.jsx(A,{"aria-disabled":c,"data-disabled":c?"":void 0,...S,ref:e,onPointerDown:kt(S.onPointerDown,()=>{c||(N.current=M)}),min:n,max:i,inverted:v,onSlideStart:c?void 0:$,onSlideMove:c?void 0:V,onSlideEnd:c?void 0:G,onHomeKeyDown:()=>!c&&X(n,0,{commit:!0}),onEndKeyDown:()=>!c&&X(i,M.length-1,{commit:!0}),onStepKeyDown:({event:J,direction:q})=>{if(!c){const ye=Np.includes(J.key)||J.shiftKey&&Bp.includes(J.key)?10:1,ee=T.current,me=M[ee],fe=s*ye*q;X(me+fe,ee,{commit:!0})}}})})})})});zp.displayName=Ns;var[Wp,Up]=Hp(Ns,{startEdge:"left",endEdge:"right",size:"width",direction:1}),DC=m.forwardRef((r,e)=>{const{min:t,max:n,dir:i,inverted:s,onSlideStart:a,onSlideMove:c,onSlideEnd:u,onStepKeyDown:h,...d}=r,[g,p]=m.useState(null),v=mr(e,A=>p(A)),b=m.useRef(void 0),S=ac(i),C=S==="ltr",T=C&&!s||!C&&s;function k(A){const M=b.current||g.getBoundingClientRect(),R=[0,M.width],$=ih(R,T?[t,n]:[n,t]);return b.current=M,$(A-M.left)}return w.jsx(Wp,{scope:r.__scopeSlider,startEdge:T?"left":"right",endEdge:T?"right":"left",direction:T?1:-1,size:"width",children:w.jsx($p,{dir:S,"data-orientation":"horizontal",...d,ref:v,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:A=>{const M=k(A.clientX);a?.(M)},onSlideMove:A=>{const M=k(A.clientX);c?.(M)},onSlideEnd:()=>{b.current=void 0,u?.()},onStepKeyDown:A=>{const R=Vp[T?"from-left":"from-right"].includes(A.key);h?.({event:A,direction:R?-1:1})}})})}),RC=m.forwardRef((r,e)=>{const{min:t,max:n,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...h}=r,d=m.useRef(null),g=mr(e,d),p=m.useRef(void 0),v=!i;function b(S){const C=p.current||d.current.getBoundingClientRect(),T=[0,C.height],A=ih(T,v?[n,t]:[t,n]);return p.current=C,A(S-C.top)}return w.jsx(Wp,{scope:r.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:w.jsx($p,{"data-orientation":"vertical",...h,ref:g,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const C=b(S.clientY);s?.(C)},onSlideMove:S=>{const C=b(S.clientY);a?.(C)},onSlideEnd:()=>{p.current=void 0,c?.()},onStepKeyDown:S=>{const T=Vp[v?"from-bottom":"from-top"].includes(S.key);u?.({event:S,direction:T?-1:1})}})})}),$p=m.forwardRef((r,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:c,onStepKeyDown:u,...h}=r,d=cc(Ns,t);return w.jsx(vr.span,{...h,ref:e,onKeyDown:kt(r.onKeyDown,g=>{g.key==="Home"?(a(g),g.preventDefault()):g.key==="End"?(c(g),g.preventDefault()):Np.concat(Bp).includes(g.key)&&(u(g),g.preventDefault())}),onPointerDown:kt(r.onPointerDown,g=>{const p=g.target;p.setPointerCapture(g.pointerId),g.preventDefault(),d.thumbs.has(p)?p.focus():n(g)}),onPointerMove:kt(r.onPointerMove,g=>{g.target.hasPointerCapture(g.pointerId)&&i(g)}),onPointerUp:kt(r.onPointerUp,g=>{const p=g.target;p.hasPointerCapture(g.pointerId)&&(p.releasePointerCapture(g.pointerId),s(g))})})}),Yp="SliderTrack",Xp=m.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,i=cc(Yp,t);return w.jsx(vr.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});Xp.displayName=Yp;var rh="SliderRange",Gp=m.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,i=cc(rh,t),s=Up(rh,t),a=m.useRef(null),c=mr(e,a),u=i.values.length,h=i.values.map(p=>Kp(p,i.min,i.max)),d=u>1?Math.min(...h):0,g=100-Math.max(...h);return w.jsx(vr.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:c,style:{...r.style,[s.startEdge]:d+"%",[s.endEdge]:g+"%"}})});Gp.displayName=rh;var nh="SliderThumb",qp=m.forwardRef((r,e)=>{const t=IC(r.__scopeSlider),[n,i]=m.useState(null),s=mr(e,c=>i(c)),a=m.useMemo(()=>n?t().findIndex(c=>c.ref.current===n):-1,[t,n]);return w.jsx(jC,{...r,ref:s,index:a})}),jC=m.forwardRef((r,e)=>{const{__scopeSlider:t,index:n,name:i,...s}=r,a=cc(nh,t),c=Up(nh,t),[u,h]=m.useState(null),d=mr(e,k=>h(k)),g=u?a.form||!!u.closest("form"):!0,p=EC(u),v=a.values[n],b=v===void 0?0:Kp(v,a.min,a.max),S=NC(n,a.values.length),C=p?.[c.size],T=C?VC(C,b,c.direction):0;return m.useEffect(()=>{if(u)return a.thumbs.add(u),()=>{a.thumbs.delete(u)}},[u,a.thumbs]),w.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${b}% + ${T}px)`},children:[w.jsx(th.ItemSlot,{scope:r.__scopeSlider,children:w.jsx(vr.span,{role:"slider","aria-label":r["aria-label"]||S,"aria-valuemin":a.min,"aria-valuenow":v,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:d,style:v===void 0?{display:"none"}:r.style,onFocus:kt(r.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),g&&w.jsx(LC,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:v},n)]})});qp.displayName=nh;var LC=r=>{const{value:e,...t}=r,n=m.useRef(null),i=TC(e);return m.useEffect(()=>{const s=n.current,a=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==e&&u){const h=new Event("input",{bubbles:!0});u.call(s,e),s.dispatchEvent(h)}},[i,e]),w.jsx("input",{style:{display:"none"},...t,ref:n,defaultValue:e})};function FC(r=[],e,t){const n=[...r];return n[t]=e,n.sort((i,s)=>i-s)}function Kp(r,e,t){const s=100/(t-e)*(r-e);return Zu(s,[0,100])}function NC(r,e){return e>2?`Value ${r+1} of ${e}`:e===2?["Minimum","Maximum"][r]:void 0}function BC(r,e){if(r.length===1)return 0;const t=r.map(i=>Math.abs(i-e)),n=Math.min(...t);return t.indexOf(n)}function VC(r,e,t){const n=r/2,s=ih([0,50],[0,n]);return(n-s(e)*t)*t}function HC(r){return r.slice(0,-1).map((e,t)=>r[t+1]-e)}function zC(r,e){if(e>0){const t=HC(r);return Math.min(...t)>=e}return!0}function ih(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function WC(r){return(String(r).split(".")[1]||"").length}function UC(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}var Zp=zp,$C=Xp,YC=Gp,XC=qp;const Jp=m.forwardRef(({className:r,...e},t)=>w.jsxs(Zp,{ref:t,className:gi("relative flex w-full touch-none select-none items-center",r),...e,children:[w.jsx($C,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:w.jsx(YC,{className:"absolute h-full bg-primary"})}),w.jsx(XC,{className:"block h-4 w-4 cursor-pointer rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Jp.displayName=Zp.displayName;function GC(r,e){return m.useReducer((t,n)=>e[t][n]??t,r)}var Bs=r=>{const{present:e,children:t}=r,n=qC(e),i=typeof t=="function"?t({present:n.isPresent}):m.Children.only(t),s=mr(n.ref,KC(i));return typeof t=="function"||n.isPresent?m.cloneElement(i,{ref:s}):null};Bs.displayName="Presence";function qC(r){const[e,t]=m.useState(),n=m.useRef({}),i=m.useRef(r),s=m.useRef("none"),a=r?"mounted":"unmounted",[c,u]=GC(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const h=lc(n.current);s.current=c==="mounted"?h:"none"},[c]),Xo(()=>{const h=n.current,d=i.current;if(d!==r){const p=s.current,v=lc(h);r?u("MOUNT"):v==="none"||h?.display==="none"?u("UNMOUNT"):u(d&&p!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=r}},[r,u]),Xo(()=>{if(e){let h;const d=e.ownerDocument.defaultView??window,g=v=>{const S=lc(n.current).includes(v.animationName);if(v.target===e&&S&&(u("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},p=v=>{v.target===e&&(s.current=lc(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{d.clearTimeout(h),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:m.useCallback(h=>{h&&(n.current=getComputedStyle(h)),t(h)},[])}}function lc(r){return r?.animationName||"none"}function KC(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function ZC(r,e){return m.useReducer((t,n)=>e[t][n]??t,r)}var sh="ScrollArea",[Qp,t9]=Yo(sh),[JC,Kr]=Qp(sh),em=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:i,scrollHideDelay:s=600,...a}=r,[c,u]=m.useState(null),[h,d]=m.useState(null),[g,p]=m.useState(null),[v,b]=m.useState(null),[S,C]=m.useState(null),[T,k]=m.useState(0),[A,M]=m.useState(0),[R,N]=m.useState(!1),[$,V]=m.useState(!1),G=mr(e,J=>u(J)),X=ac(i);return w.jsx(JC,{scope:t,type:n,dir:X,scrollHideDelay:s,scrollArea:c,viewport:h,onViewportChange:d,content:g,onContentChange:p,scrollbarX:v,onScrollbarXChange:b,scrollbarXEnabled:R,onScrollbarXEnabledChange:N,scrollbarY:S,onScrollbarYChange:C,scrollbarYEnabled:$,onScrollbarYEnabledChange:V,onCornerWidthChange:k,onCornerHeightChange:M,children:w.jsx(vr.div,{dir:X,...a,ref:G,style:{position:"relative","--radix-scroll-area-corner-width":T+"px","--radix-scroll-area-corner-height":A+"px",...r.style}})})});em.displayName=sh;var tm="ScrollAreaViewport",rm=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:n,nonce:i,...s}=r,a=Kr(tm,t),c=m.useRef(null),u=mr(e,c,a.onViewportChange);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),w.jsx(vr.div,{"data-radix-scroll-area-viewport":"",...s,ref:u,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...r.style},children:w.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});rm.displayName=tm;var An="ScrollAreaScrollbar",uc=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=Kr(An,r.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,c=r.orientation==="horizontal";return m.useEffect(()=>(c?s(!0):a(!0),()=>{c?s(!1):a(!1)}),[c,s,a]),i.type==="hover"?w.jsx(QC,{...n,ref:e,forceMount:t}):i.type==="scroll"?w.jsx(e2,{...n,ref:e,forceMount:t}):i.type==="auto"?w.jsx(nm,{...n,ref:e,forceMount:t}):i.type==="always"?w.jsx(oh,{...n,ref:e}):null});uc.displayName=An;var QC=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=Kr(An,r.__scopeScrollArea),[s,a]=m.useState(!1);return m.useEffect(()=>{const c=i.scrollArea;let u=0;if(c){const h=()=>{window.clearTimeout(u),a(!0)},d=()=>{u=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",d),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),w.jsx(Bs,{present:t||s,children:w.jsx(nm,{"data-state":s?"visible":"hidden",...n,ref:e})})}),e2=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=Kr(An,r.__scopeScrollArea),s=r.orientation==="horizontal",a=gc(()=>u("SCROLL_END"),100),[c,u]=ZC("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,i.scrollHideDelay,u]),m.useEffect(()=>{const h=i.viewport,d=s?"scrollLeft":"scrollTop";if(h){let g=h[d];const p=()=>{const v=h[d];g!==v&&(u("SCROLL"),a()),g=v};return h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,s,u,a]),w.jsx(Bs,{present:t||c!=="hidden",children:w.jsx(oh,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:kt(r.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:kt(r.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),nm=m.forwardRef((r,e)=>{const t=Kr(An,r.__scopeScrollArea),{forceMount:n,...i}=r,[s,a]=m.useState(!1),c=r.orientation==="horizontal",u=gc(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;a(c?h:d)}},10);return Vs(t.viewport,u),Vs(t.content,u),w.jsx(Bs,{present:n||s,children:w.jsx(oh,{"data-state":s?"visible":"hidden",...i,ref:e})})}),oh=m.forwardRef((r,e)=>{const{orientation:t="vertical",...n}=r,i=Kr(An,r.__scopeScrollArea),s=m.useRef(null),a=m.useRef(0),[c,u]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=am(c.viewport,c.content),d={...n,sizes:c,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function g(p,v){return o2(p,a.current,c,v)}return t==="horizontal"?w.jsx(t2,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,v=cm(p,c,i.dir);s.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=g(p,i.dir))}}):t==="vertical"?w.jsx(r2,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,v=cm(p,c);s.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=g(p))}}):null}),t2=m.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...i}=r,s=Kr(An,r.__scopeScrollArea),[a,c]=m.useState(),u=m.useRef(null),h=mr(e,u,s.onScrollbarXChange);return m.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),w.jsx(sm,{"data-orientation":"horizontal",...i,ref:h,sizes:t,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fc(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.x),onDragScroll:d=>r.onDragScroll(d.x),onWheelScroll:(d,g)=>{if(s.viewport){const p=s.viewport.scrollLeft+d.deltaX;r.onWheelScroll(p),um(p,g)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&a&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:dc(a.paddingLeft),paddingEnd:dc(a.paddingRight)}})}})}),r2=m.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...i}=r,s=Kr(An,r.__scopeScrollArea),[a,c]=m.useState(),u=m.useRef(null),h=mr(e,u,s.onScrollbarYChange);return m.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),w.jsx(sm,{"data-orientation":"vertical",...i,ref:h,sizes:t,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fc(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.y),onDragScroll:d=>r.onDragScroll(d.y),onWheelScroll:(d,g)=>{if(s.viewport){const p=s.viewport.scrollTop+d.deltaY;r.onWheelScroll(p),um(p,g)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&a&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:dc(a.paddingTop),paddingEnd:dc(a.paddingBottom)}})}})}),[n2,im]=Qp(An),sm=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:d,onResize:g,...p}=r,v=Kr(An,t),[b,S]=m.useState(null),C=mr(e,G=>S(G)),T=m.useRef(null),k=m.useRef(""),A=v.viewport,M=n.content-n.viewport,R=On(d),N=On(u),$=gc(g,10);function V(G){if(T.current){const X=G.clientX-T.current.left,J=G.clientY-T.current.top;h({x:X,y:J})}}return m.useEffect(()=>{const G=X=>{const J=X.target;b?.contains(J)&&R(X,M)};return document.addEventListener("wheel",G,{passive:!1}),()=>document.removeEventListener("wheel",G,{passive:!1})},[A,b,M,R]),m.useEffect(N,[n,N]),Vs(b,$),Vs(v.content,$),w.jsx(n2,{scope:t,scrollbar:b,hasThumb:i,onThumbChange:On(s),onThumbPointerUp:On(a),onThumbPositionChange:N,onThumbPointerDown:On(c),children:w.jsx(vr.div,{...p,ref:C,style:{position:"absolute",...p.style},onPointerDown:kt(r.onPointerDown,G=>{G.button===0&&(G.target.setPointerCapture(G.pointerId),T.current=b.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),V(G))}),onPointerMove:kt(r.onPointerMove,V),onPointerUp:kt(r.onPointerUp,G=>{const X=G.target;X.hasPointerCapture(G.pointerId)&&X.releasePointerCapture(G.pointerId),document.body.style.webkitUserSelect=k.current,v.viewport&&(v.viewport.style.scrollBehavior=""),T.current=null})})})}),hc="ScrollAreaThumb",ah=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=im(hc,r.__scopeScrollArea);return w.jsx(Bs,{present:t||i.hasThumb,children:w.jsx(i2,{ref:e,...n})})}),i2=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:n,...i}=r,s=Kr(hc,t),a=im(hc,t),{onThumbPositionChange:c}=a,u=mr(e,g=>a.onThumbChange(g)),h=m.useRef(void 0),d=gc(()=>{h.current&&(h.current(),h.current=void 0)},100);return m.useEffect(()=>{const g=s.viewport;if(g){const p=()=>{if(d(),!h.current){const v=a2(g,c);h.current=v,c()}};return c(),g.addEventListener("scroll",p),()=>g.removeEventListener("scroll",p)}},[s.viewport,d,c]),w.jsx(vr.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:kt(r.onPointerDownCapture,g=>{const v=g.target.getBoundingClientRect(),b=g.clientX-v.left,S=g.clientY-v.top;a.onThumbPointerDown({x:b,y:S})}),onPointerUp:kt(r.onPointerUp,a.onThumbPointerUp)})});ah.displayName=hc;var ch="ScrollAreaCorner",om=m.forwardRef((r,e)=>{const t=Kr(ch,r.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?w.jsx(s2,{...r,ref:e}):null});om.displayName=ch;var s2=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,...n}=r,i=Kr(ch,t),[s,a]=m.useState(0),[c,u]=m.useState(0),h=!!(s&&c);return Vs(i.scrollbarX,()=>{const d=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(d),u(d)}),Vs(i.scrollbarY,()=>{const d=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(d),a(d)}),h?w.jsx(vr.div,{...n,ref:e,style:{width:s,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function dc(r){return r?parseInt(r,10):0}function am(r,e){const t=r/e;return isNaN(t)?0:t}function fc(r){const e=am(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*e;return Math.max(n,18)}function o2(r,e,t,n="ltr"){const i=fc(t),s=i/2,a=e||s,c=i-a,u=t.scrollbar.paddingStart+a,h=t.scrollbar.size-t.scrollbar.paddingEnd-c,d=t.content-t.viewport,g=n==="ltr"?[0,d]:[d*-1,0];return lm([u,h],g)(r)}function cm(r,e,t="ltr"){const n=fc(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,a=e.content-e.viewport,c=s-n,u=t==="ltr"?[0,a]:[a*-1,0],h=Zu(r,u);return lm([0,a],[0,c])(h)}function lm(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function um(r,e){return r>0&&r<e}var a2=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},n=0;return function i(){const s={left:r.scrollLeft,top:r.scrollTop},a=t.left!==s.left,c=t.top!==s.top;(a||c)&&e(),t=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function gc(r,e){const t=On(r),n=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),m.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function Vs(r,e){const t=On(e);Xo(()=>{let n=0;if(r){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return i.observe(r),()=>{window.cancelAnimationFrame(n),i.unobserve(r)}}},[r,t])}var pc=em,lh=rm,hm=uc,dm=ah,c2=om;const $i=m.forwardRef(({className:r,children:e,...t},n)=>w.jsxs(pc,{ref:n,className:gi("relative overflow-hidden",r),...t,children:[w.jsx(lh,{className:"h-full w-full rounded-[inherit]",children:e}),w.jsx(uh,{}),w.jsx(c2,{})]}));$i.displayName=pc.displayName;const uh=m.forwardRef(({className:r,orientation:e="vertical",...t},n)=>w.jsx(uc,{ref:n,orientation:e,className:gi("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:w.jsx(ah,{className:"relative flex-1 rounded-full bg-border"})}));uh.displayName=uc.displayName;const Go=({children:r,renderCustomPreview:e,data:t={},shouldDisplayPreview:n=!0})=>{const[i,s]=m.useState(!1),[a,c]=m.useState({x:0,y:0}),u=m.useRef(null),h=v=>{s(!0),v.dataTransfer.setDragImage(new Image,0,0),v.dataTransfer.setData(JSON.stringify(t),JSON.stringify(t)),c({x:v.clientX,y:v.clientY})},d=()=>{s(!1)},g=v=>{i&&c({x:v.clientX,y:v.clientY})},p=m.cloneElement(r,{draggable:!0,onDragStart:h,onDragEnd:d,onDrag:g,style:{...r.props.style}});return w.jsxs(w.Fragment,{children:[p,i&&n&&e?eh.createPortal(w.jsx("div",{ref:u,style:{position:"fixed",left:a.x,top:a.y,pointerEvents:"none",zIndex:9999,transform:"translate(-50%, -50%)"},children:e}),document.body):null]})};var l2=Lx.useId||(()=>{}),u2=0;function fm(r){const[e,t]=m.useState(l2());return Xo(()=>{t(n=>n??String(u2++))},[r]),e?`radix-${e}`:""}var hh="rovingFocusGroup.onEntryFocus",h2={bubbles:!1,cancelable:!0},mc="RovingFocusGroup",[dh,gm,d2]=Fp(mc),[f2,pm]=Yo(mc,[d2]),[g2,p2]=f2(mc),mm=m.forwardRef((r,e)=>w.jsx(dh.Provider,{scope:r.__scopeRovingFocusGroup,children:w.jsx(dh.Slot,{scope:r.__scopeRovingFocusGroup,children:w.jsx(m2,{...r,ref:e})})}));mm.displayName=mc;var m2=m.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:d=!1,...g}=r,p=m.useRef(null),v=mr(e,p),b=ac(s),[S=null,C]=Ju({prop:a,defaultProp:c,onChange:u}),[T,k]=m.useState(!1),A=On(h),M=gm(t),R=m.useRef(!1),[N,$]=m.useState(0);return m.useEffect(()=>{const V=p.current;if(V)return V.addEventListener(hh,A),()=>V.removeEventListener(hh,A)},[A]),w.jsx(g2,{scope:t,orientation:n,dir:b,loop:i,currentTabStopId:S,onItemFocus:m.useCallback(V=>C(V),[C]),onItemShiftTab:m.useCallback(()=>k(!0),[]),onFocusableItemAdd:m.useCallback(()=>$(V=>V+1),[]),onFocusableItemRemove:m.useCallback(()=>$(V=>V-1),[]),children:w.jsx(vr.div,{tabIndex:T||N===0?-1:0,"data-orientation":n,...g,ref:v,style:{outline:"none",...r.style},onMouseDown:kt(r.onMouseDown,()=>{R.current=!0}),onFocus:kt(r.onFocus,V=>{const G=!R.current;if(V.target===V.currentTarget&&G&&!T){const X=new CustomEvent(hh,h2);if(V.currentTarget.dispatchEvent(X),!X.defaultPrevented){const J=M().filter(ee=>ee.focusable),q=J.find(ee=>ee.active),Z=J.find(ee=>ee.id===S),ye=[q,Z,...J].filter(Boolean).map(ee=>ee.ref.current);bm(ye,d)}}R.current=!1}),onBlur:kt(r.onBlur,()=>k(!1))})})}),vm="RovingFocusGroupItem",ym=m.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:s,...a}=r,c=fm(),u=s||c,h=p2(vm,t),d=h.currentTabStopId===u,g=gm(t),{onFocusableItemAdd:p,onFocusableItemRemove:v}=h;return m.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),w.jsx(dh.ItemSlot,{scope:t,id:u,focusable:n,active:i,children:w.jsx(vr.span,{tabIndex:d?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:kt(r.onMouseDown,b=>{n?h.onItemFocus(u):b.preventDefault()}),onFocus:kt(r.onFocus,()=>h.onItemFocus(u)),onKeyDown:kt(r.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const S=b2(b,h.orientation,h.dir);if(S!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let T=g().filter(k=>k.focusable).map(k=>k.ref.current);if(S==="last")T.reverse();else if(S==="prev"||S==="next"){S==="prev"&&T.reverse();const k=T.indexOf(b.currentTarget);T=h.loop?w2(T,k+1):T.slice(k+1)}setTimeout(()=>bm(T))}})})})});ym.displayName=vm;var v2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function y2(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function b2(r,e,t){const n=y2(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return v2[n]}function bm(r,e=!1){const t=document.activeElement;for(const n of r)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function w2(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var _2=mm,S2=ym,fh="Tabs",[x2,r9]=Yo(fh,[pm]),wm=pm(),[C2,gh]=x2(fh),_m=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:u="automatic",...h}=r,d=ac(c),[g,p]=Ju({prop:n,onChange:i,defaultProp:s});return w.jsx(C2,{scope:t,baseId:fm(),value:g,onValueChange:p,orientation:a,dir:d,activationMode:u,children:w.jsx(vr.div,{dir:d,"data-orientation":a,...h,ref:e})})});_m.displayName=fh;var Sm="TabsList",xm=m.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...i}=r,s=gh(Sm,t),a=wm(t);return w.jsx(_2,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:w.jsx(vr.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});xm.displayName=Sm;var Cm="TabsTrigger",Tm=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:i=!1,...s}=r,a=gh(Cm,t),c=wm(t),u=Om(a.baseId,n),h=Am(a.baseId,n),d=n===a.value;return w.jsx(S2,{asChild:!0,...c,focusable:!i,active:d,children:w.jsx(vr.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":h,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...s,ref:e,onMouseDown:kt(r.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?a.onValueChange(n):g.preventDefault()}),onKeyDown:kt(r.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(n)}),onFocus:kt(r.onFocus,()=>{const g=a.activationMode!=="manual";!d&&!i&&g&&a.onValueChange(n)})})})});Tm.displayName=Cm;var Em="TabsContent",km=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:i,children:s,...a}=r,c=gh(Em,t),u=Om(c.baseId,n),h=Am(c.baseId,n),d=n===c.value,g=m.useRef(d);return m.useEffect(()=>{const p=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(p)},[]),w.jsx(Bs,{present:i||d,children:({present:p})=>w.jsx(vr.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:h,tabIndex:0,...a,ref:e,style:{...r.style,animationDuration:g.current?"0s":void 0},children:p&&s})})});km.displayName=Em;function Om(r,e){return`${r}-trigger-${e}`}function Am(r,e){return`${r}-content-${e}`}var T2=_m,Im=xm,Mm=Tm,Pm=km;const Dm=T2,ph=m.forwardRef(({className:r,...e},t)=>w.jsx(Im,{ref:t,className:gi("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));ph.displayName=Im.displayName;const vc=m.forwardRef(({className:r,...e},t)=>w.jsx(Mm,{ref:t,className:gi("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));vc.displayName=Mm.displayName;const yc=m.forwardRef(({className:r,...e},t)=>w.jsx(Pm,{ref:t,className:gi("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));yc.displayName=Pm.displayName;const E2="add",k2="track",O2="trackItems",A2="track:changed",I2="trackItems:changed",M2="state",P2="state:changed",Rm="add",mh="add:text",Hs="add:video",zs="add:audio",D2="add:placeholder",Ws="add:image",R2="add:mask",j2="add:transition",L2="add:animation",F2="edit",N2="edit:object",B2="edit:text",V2="edit:shape",H2="enterEditMode",z2="player",jm="player:play",Lm="player:pause",W2="player:seek",U2="player:seekTo",$2="player:seekBy",Y2="player:togglePlay",Fm="active",X2="active:set",vh="active:delete",G2="active:paste",yh="active:clone",bh="active:split",q2="layer",K2="layer:locked",Z2="layer:hidden",J2="layer:move",Q2="layer:select",Nm="layer:selection",eT="layer:sendTo",tT="layer:rename",rT="layer:editingName",nT="layer:copy",iT="layer:paste",sT="layer:clone",oT="layer:split",aT="layer:cut",cT="layer:delete",Bm="history",wh="history:undo",_h="history:redo",lT="history:reset",Vm="scale",Sh="scale:changed",Hm="drag",xh="drag:start",qo="drag:end",zm="timeline",Ch="timeline:boundingChanged";var Th=function(r,e){return Th=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Th(r,e)};function Us(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Th(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Eh(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kh(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return s}function Oh(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function In(r){return typeof r=="function"}function Wm(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ah=Wm(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Ih(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var bc=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var c=Eh(a),u=c.next();!u.done;u=c.next()){var h=u.value;h.remove(this)}}catch(S){e={error:S}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else a.remove(this);var d=this.initialTeardown;if(In(d))try{d()}catch(S){s=S instanceof Ah?S.errors:[S]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var p=Eh(g),v=p.next();!v.done;v=p.next()){var b=v.value;try{Ym(b)}catch(S){s=s??[],S instanceof Ah?s=Oh(Oh([],kh(s)),kh(S.errors)):s.push(S)}}}catch(S){n={error:S}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}if(s)throw new Ah(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Ym(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Ih(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&Ih(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),Um=bc.EMPTY;function $m(r){return r instanceof bc||r&&"closed"in r&&In(r.remove)&&In(r.add)&&In(r.unsubscribe)}function Ym(r){In(r)?r():r.unsubscribe()}var uT={Promise:void 0},hT={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,Oh([r,e],kh(t)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function dT(r){hT.setTimeout(function(){throw r})}function Xm(){}function wc(r){r()}var Mh=function(r){Us(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,$m(t)&&t.add(n)):n.destination=pT,n}return e.create=function(t,n,i){return new Ph(t,n,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(bc),fT=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){_c(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){_c(n)}else _c(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){_c(t)}},r}(),Ph=function(r){Us(e,r);function e(t,n,i){var s=r.call(this)||this,a;return In(t)||!t?a={next:t??void 0,error:n??void 0,complete:i??void 0}:a=t,s.destination=new fT(a),s}return e}(Mh);function _c(r){dT(r)}function gT(r){throw r}var pT={closed:!0,next:Xm,error:gT,complete:Xm},mT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function vT(r){return r}function yT(r){return r.length===0?vT:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var Gm=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this,s=wT(e)?e:new Ph(e,t,n);return wc(function(){var a=i,c=a.operator,u=a.source;s.add(c?c.call(s,u):u?i._subscribe(s):i._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=qm(t),new t(function(i,s){var a=new Ph({next:function(c){try{e(c)}catch(u){s(u),a.unsubscribe()}},error:s,complete:i});n.subscribe(a)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[mT]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return yT(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=qm(e),new e(function(n,i){var s;t.subscribe(function(a){return s=a},function(a){return i(a)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();function qm(r){var e;return(e=r??uT.Promise)!==null&&e!==void 0?e:Promise}function bT(r){return r&&In(r.next)&&In(r.error)&&In(r.complete)}function wT(r){return r&&r instanceof Mh||bT(r)&&$m(r)}function _T(r){return In(r?.lift)}function ST(r){return function(e){if(_T(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function xT(r,e,t,n,i){return new CT(r,e,t,n,i)}var CT=function(r){Us(e,r);function e(t,n,i,s,a,c){var u=r.call(this,t)||this;return u.onFinalize=a,u.shouldUnsubscribe=c,u._next=n?function(h){try{n(h)}catch(d){t.error(d)}}:r.prototype._next,u._error=s?function(h){try{s(h)}catch(d){t.error(d)}finally{this.unsubscribe()}}:r.prototype._error,u._complete=i?function(){try{i()}catch(h){t.error(h)}finally{this.unsubscribe()}}:r.prototype._complete,u}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(Mh),TT=Wm(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Dh=function(r){Us(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new Km(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new TT},e.prototype.next=function(t){var n=this;wc(function(){var i,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=Eh(n.currentObservers),c=a.next();!c.done;c=a.next()){var u=c.value;u.next(t)}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var n=this;wc(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;wc(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,i=this,s=i.hasError,a=i.isStopped,c=i.observers;return s||a?Um:(this.currentObservers=null,c.push(t),new bc(function(){n.currentObservers=null,Ih(c,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,s=n.thrownError,a=n.isStopped;i?t.error(s):a&&t.complete()},e.prototype.asObservable=function(){var t=new Gm;return t.source=this,t},e.create=function(t,n){return new Km(t,n)},e}(Gm),Km=function(r){Us(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},e.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:Um},e}(Dh),Zm=function(r){Us(e,r);function e(t){var n=r.call(this)||this;return n._value=t,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var n=r.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},e.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,s=t._value;if(n)throw i;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(Dh);function Yi(r,e){return ST(function(t,n){var i=0;t.subscribe(xT(n,function(s){return r.call(e,s,i++)&&n.next(s)}))})}const Jm=new Dh,Qe={subject:Jm,dispatch:(r,e)=>{Jm.next({key:r,value:e})}},tr=[];for(let r=0;r<256;++r)tr.push((r+256).toString(16).slice(1));function ET(r,e=0){return(tr[r[e+0]]+tr[r[e+1]]+tr[r[e+2]]+tr[r[e+3]]+"-"+tr[r[e+4]]+tr[r[e+5]]+"-"+tr[r[e+6]]+tr[r[e+7]]+"-"+tr[r[e+8]]+tr[r[e+9]]+"-"+tr[r[e+10]]+tr[r[e+11]]+tr[r[e+12]]+tr[r[e+13]]+tr[r[e+14]]+tr[r[e+15]]).toLowerCase()}let Rh;const kT=new Uint8Array(16);function OT(){if(!Rh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Rh=crypto.getRandomValues.bind(crypto)}return Rh(kT)}const Qm={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function zt(r,e,t){if(Qm.randomUUID&&!r)return Qm.randomUUID();r=r||{};const n=r.random??r.rng?.()??OT();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ET(n)}var ev=(r=>(r.IMAGE="image",r.VIDEO="video",r.AUDIO="audio",r))(ev||{});const AT=r=>{const[e,t]=m.useState(!1),[n,i]=m.useState(!1),s=m.useCallback(d=>{const g={...d,id:zt()};switch(d.type){case"image":Qe.dispatch(Ws,{payload:g});break;case"video":Qe.dispatch(Hs,{payload:g});break;case"audio":Qe.dispatch(zs,{payload:g});break}},[]),a=m.useCallback(d=>{d.preventDefault();try{const g=d.dataTransfer?.types[0],p=JSON.parse(g);if(!Object.values(ev).includes(p.type))return;i(!0),t(!0),r?.(!0)}catch(g){console.error("Error parsing dragged data:",g)}},[r]),c=m.useCallback(d=>{d.preventDefault(),e&&(i(!0),r?.(!0))},[e,r]),u=m.useCallback(d=>{if(n){d.preventDefault(),i(!1),r?.(!1);try{const g=d.dataTransfer?.types[0],p=JSON.parse(d.dataTransfer.getData(g));s(p)}catch(g){console.error("Error parsing dropped data:",g)}}},[n,r,s]),h=m.useCallback(d=>{d.preventDefault(),d.currentTarget.contains(d.relatedTarget)||(i(!1),t(!1),r?.(!1))},[r]);return{onDragEnter:a,onDragOver:c,onDrop:u,onDragLeave:h,isDraggingOver:n}},tv=({children:r,className:e,style:t,onDragStateChange:n,id:i})=>{const{onDragEnter:s,onDragOver:a,onDrop:c,onDragLeave:u}=AT(n);return w.jsx("div",{id:i,onDragEnter:s,onDrop:c,onDragOver:a,onDragLeave:u,className:e,style:t,role:"region","aria-label":"Droppable area for images, videos, and audio",children:r})},IT=({size:r,children:e})=>{const[t,n]=m.useState(!1);return w.jsxs(tv,{id:"artboard",onDragStateChange:n,style:{width:r.width,height:r.height},className:"designcombo_scene pointer-events-auto mt-3.5 bg-black",children:[w.jsx("div",{style:{width:r.width,height:r.height},className:`pointer-events-none absolute z-50 mt-3.5 transition-colors duration-200 ease-in-out ${t?"border-4 border-dashed border-white bg-white/[0.075]":"bg-transparent"} shadow-[0_0_0_5000px_#1D1D1F]`}),e]})},MT=100,PT=30,DT=18,RT=14,jT=30,LT=24,FT=16,rv=12,NT="Regular",nv="sans-serif",Ko=188,Sc=40,BT=4e3,iv=1920,sv=1080,ov=60,av=1e3/ov,VT=2e6,HT=1e7,zT=48e3,WT=192e3,jh=2.3,UT=iv/jh,$T=sv/jh,YT=184,XT=348,GT=512,qT=300,KT=0,ZT=5e3,JT=1,QT=0,eE=0,tE=0,rE=359,nE=1,iE=0,sE=!1,oE=!1,aE=0,cE=2,lE=.01,uE=1,hE=0,dE=3,fE=.01,gE=1,pE=0,mE=1,vE=.01,yE=.5,bE=-1e3,wE=1e3,_E=1,SE=1,xE=0,CE=1,TE=.01,EE=1,kE=0,OE=1,AE=.01,IE=0,ME=.5,PE=10,DE=.01,RE=1,jE=0,LE=1,FE=.01,NE=1,xc=16,Lh=80;function cv(r){if(!r)return"0";const e=r/Ko,t=Math.trunc(e)%60,n=Math.trunc(e/60)%60,i=Math.trunc(e/3600)%60,a=[Math.trunc(e/216e3).toString(),i.toString(),n.toString(),t.toString()];return e<60?`${a[3].padStart(2,"0")}f`:e<3600?`${a[2].padStart(1,"0")}s`:e<216e3?`${a[1].padStart(2,"0")}:${a[2].padStart(2,"0")}`:`${a[0].padStart(2,"0")}:${a[1].padStart(2,"0")}:${a[2].padStart(2,"0")}`}function BE(r,e=!1){if(!r)return"00:00";const n=1e3/60;if(r<1e3)return e?`${Math.floor(r/n)}f`:`${(r/1e3).toFixed(1)}s`;const i=Math.floor(r/1e3);if(i<60)return`${i}s`;const s=Math.floor(i/60);if(s<60){const h=i%60;return`${s.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}const a=Math.floor(s/60),c=s%60,u=i%60;return`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`}function Zo(r,e){return r.map(t=>({...t,items:t.items.filter(n=>!e.includes(n))}))}const lv=({frame:r},{fps:e})=>{const t=r/e,n=Math.floor(t/3600),i=t%3600,s=Math.floor(i/60),a=Math.floor(i%60),c=Math.floor((i-Math.floor(i))*100);return n>0?`${n}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`:`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`},uv=({time:r})=>{const e=r/1e3,t=Math.floor(e/3600),n=e%3600,i=Math.floor(n/60),s=Math.floor(n%60),a=Math.floor((n-Math.floor(n))*100);return t>0?`${t}:${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},hv=()=>{const r=document.getElementById("video-current-time");return(r?parseFloat(r.getAttribute("data-current-time")??""):0)*1e3},fn=[{index:0,unit:18e3,zoom:1/18e3,segments:5},{index:1,unit:10800,zoom:1/10800,segments:3},{index:2,unit:7200,zoom:1/7200,segments:2},{index:3,unit:3600,zoom:1/3600,segments:1},{index:4,unit:1800,zoom:1/1800,segments:2},{index:5,unit:900,zoom:1/900,segments:3},{index:6,unit:600,zoom:1/600,segments:2},{index:7,unit:300,zoom:1/300,segments:5},{index:8,unit:180,zoom:1/180,segments:3},{index:9,unit:120,zoom:1/120,segments:10},{index:10,unit:60,zoom:1/60,segments:5},{index:11,unit:60,zoom:1/60,segments:5},{index:12,unit:30,zoom:1/30,segments:2},{index:13,unit:15,zoom:1/15,segments:3},{index:14,unit:10,zoom:1/10,segments:2},{index:15,unit:5,zoom:1/5,segments:5},{index:16,unit:3,zoom:1/3,segments:3},{index:17,unit:2,zoom:1/2,segments:5},{index:18,unit:1,zoom:1,segments:5},{index:19,unit:1,zoom:2,segments:5},{index:20,unit:1,zoom:4,segments:10}];function Fh(r,e){let t=-1,n=r.length-1;for(;1+t<n;){const i=t+(n-t>>1);e(r[i],i,r)?n=i:t=i}return n}function VE(r,e=1){const t=()=>{const u=Math.max(0,Sc),d=document.getElementById("designcombo-timeline-canvas")?.offsetWidth??document.body.offsetWidth;return Math.max(1,d-u)},n=()=>typeof r=="number"?Rt(r,e):vv(r,e),i=t()/n(),s=e*i;return{segments:5,index:Fh(fn,c=>c.zoom>s),zoom:s,unit:1/s}}function HE(r){return fn[r]}function dv(r){return fv(r)||fn[0]}const fv=r=>{const e=fn.filter(n=>n.zoom<r.zoom);return e.length===0?null:e.reduce((n,i)=>i.zoom>n.zoom?i:n)},gv=r=>{const e=fn.filter(n=>n.zoom>r.zoom);return e.length===0?null:e.reduce((n,i)=>i.zoom<n.zoom?i:n)};function pv(r){return gv(r)||fn[fn.length-1]}function zE(r){const e=fn.at(-1),t=r===e,i=mv(r)-(t?1:2);return Math.max(0,i)}function mv(r){const e=Fh(fn,t=>t.zoom>r.zoom);return Math.min(fn.length-1,e)}function Rt(r,e=1,t=1){const n=Ko*e;return r*(60/1e3)*n/t}function pi(r,e=1){const t=Ko*e;return r/t*av}function vv(r,e=1){return Rt(r,e)}const WE=Math.floor(Math.random()*1e3)+1;function Nh(r,e=1){const t=[],n=Math.floor(e),i=(s,a)=>{for(const c of s)Array.isArray(c)&&a<n?i(c,a+1):t.push(c)};return i(r,0),t}function Bh(r,e){const t=e.sort((i,s)=>i.tempIndex-s.tempIndex),n=[];for(const i of t)i.tempIndex<0&&n.push(i);n.push(r);for(const i of t)i.tempIndex>=0&&n.push(i);return n}const Vh={id:"font_UwdNKSyVq2iiMiuHSRRsUIOu",family:"Roboto",fullName:"Roboto Bold",postScriptName:"Roboto-Bold",preview:"https://ik.imagekit.io/lh/fonts/v2/5zQgS86djScKA0ri67BBCqW7.png",style:"Roboto-Bold",url:"https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmWUlvAx05IsDqlA.ttf",category:"sans-serif",createdAt:"2023-06-20T04:42:55.909Z",updatedAt:"2023-06-20T04:42:55.909Z",userId:null},yv=r=>{const e=r.map(t=>new FontFace(t.fontFamily,`url(${t.fontUrl})`).load());return e.length===0?Promise.resolve(!0):new Promise((t,n)=>{Promise.all(e).then(i=>{i.forEach(s=>{s instanceof FontFace&&s.family&&(document.fonts.add(s),t(!0))})}).catch(i=>{n(i)})})},bv=r=>{let e;const t=new Set,n=(h,d)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const p=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,p))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=r(n,i,c);return c},UE=r=>r?bv(r):bv,$E=r=>r;function YE(r,e=$E){const t=Pe.useSyncExternalStore(r.subscribe,()=>e(r.getState()),()=>e(r.getInitialState()));return Pe.useDebugValue(t),t}const wv=r=>{const e=UE(r),t=n=>YE(e,n);return Object.assign(t,e),t},_v=r=>r?wv(r):wv,mi=_v(r=>({timeline:null,size:{width:1080,height:1920},duration:5e3,fps:30,scale:{index:7,unit:300,zoom:1/300,segments:5},scroll:{left:0,top:0},playerRef:null,activeIds:[],targetIds:[],tracks:[],trackItemIds:[],transitionIds:[],transitionsMap:{},trackItemDetailsMap:{},trackItemsMap:{},setTimeline:e=>{r(()=>({timeline:e}))},setScale:e=>{r(()=>({scale:e}))},setScroll:e=>{r(()=>({scroll:e}))},setState:async e=>{r({...e})},setPlayerRef:e=>{r({playerRef:e})}}));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sv=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=m.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...c},u)=>m.createElement("svg",{ref:u,...GE,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:Sv("lucide",i),...c},[...a.map(([h,d])=>m.createElement(h,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(r,e)=>{const t=m.forwardRef(({className:n,...i},s)=>m.createElement(qE,{ref:s,iconNode:e,className:Sv(`lucide-${XE(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("FolderClosed",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("LayoutPanelLeft",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=De("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=De("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=De("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("RectangleVertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=De("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=De("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=De("SquareSplitHorizontal",[["path",{d:"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3",key:"lubmu8"}],["path",{d:"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3",key:"1ag34g"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=De("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=De("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=De("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Cc=r=>{const e=m.useCallback(n=>{if(!r?.current)return()=>{};const i=()=>{n()};return r.current.addEventListener("frameupdate",i),()=>{r.current&&r.current.removeEventListener("frameupdate",i)}},[r]);return m.useSyncExternalStore(e,()=>r?.current?.getCurrentFrame()??0,()=>0)},Jo=()=>{const[r,e]=m.useState(!1);return m.useEffect(()=>{const n=Qe.subject.pipe(Yi(({key:i})=>i.startsWith(Hm))).subscribe(i=>{i.key===xh?e(!0):i.key===qo&&e(!1)});return()=>n.unsubscribe()},[]),r},Tv=()=>{const[r,e]=m.useState(!1),{duration:t,fps:n,scale:i,playerRef:s,activeIds:a}=mi(),c=Cc(s),u=()=>{Qe.dispatch(vh)},h=()=>{Qe.dispatch(bh,{payload:{},options:{time:hv()}})},d=v=>{Qe.dispatch(Sh,{payload:{scale:v}})},g=()=>{Qe.dispatch(jm)},p=()=>{Qe.dispatch(Lm)};return m.useEffect(()=>(s?.current?.addEventListener("play",()=>{e(!0)}),s?.current?.addEventListener("pause",()=>{e(!1)}),()=>{s?.current?.removeEventListener("play",()=>{e(!0)}),s?.current?.removeEventListener("pause",()=>{e(!1)})}),[s]),w.jsx("div",{style:{position:"relative",height:"50px",boxShadow:"inset 0 1px 0 0 #27272a",flex:"none"},className:"bg-background",children:w.jsx("div",{style:{position:"absolute",height:50,width:"100%",display:"flex",alignItems:"center"},children:w.jsxs("div",{style:{height:36,width:"100%",display:"grid",gridTemplateColumns:"1fr 260px 1fr",alignItems:"center"},children:[w.jsxs("div",{className:"flex px-2",children:[w.jsxs(or,{disabled:!a.length,onClick:u,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[w.jsx(tk,{size:14})," Delete"]}),w.jsxs(or,{disabled:!a.length,onClick:h,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[w.jsx(xv,{size:15})," Split"]}),w.jsxs(or,{disabled:!a.length,onClick:()=>{Qe.dispatch(yh)},variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[w.jsx(xv,{size:15})," Clone"]})]}),w.jsxs("div",{className:"flex items-center justify-center",children:[w.jsxs("div",{children:[w.jsx(or,{onClick:u,variant:"ghost",size:"icon",children:w.jsx(QE,{size:14})}),w.jsx(or,{onClick:()=>{if(r)return p();g()},variant:"ghost",size:"icon",children:r?w.jsx(ZE,{size:14}):w.jsx(JE,{size:14})}),w.jsx(or,{onClick:h,variant:"ghost",size:"icon",children:w.jsx(ek,{size:14})})]}),w.jsxs("div",{className:"text-xs font-light",style:{display:"grid",alignItems:"center",gridTemplateColumns:"54px 4px 54px",paddingTop:"2px",justifyContent:"center"},children:[w.jsx("div",{className:"font-medium text-zinc-200",style:{display:"flex",justifyContent:"center"},"data-current-time":c/n,id:"video-current-time",children:lv({frame:c},{fps:n})}),w.jsx("span",{children:"/"}),w.jsx("div",{className:"text-muted-foreground",style:{display:"flex",justifyContent:"center"},children:uv({time:t})})]})]}),w.jsx(sk,{scale:i,onChangeTimelineScale:d,duration:t})]})})})},sk=({scale:r,onChangeTimelineScale:e,duration:t})=>{const n=()=>{const s=dv(r);e(s)},i=()=>{const s=pv(r);e(s)};return w.jsx("div",{className:"flex items-center justify-end",children:w.jsxs("div",{className:"flex border-l border-border pl-4 pr-2",children:[w.jsx(or,{size:"icon",variant:"ghost",onClick:n,disabled:r.index===0,children:w.jsx(ik,{size:16})}),w.jsx(or,{size:"icon",variant:"ghost",onClick:i,disabled:r.index===20,children:w.jsx(nk,{size:16})})]})})},Ev=[{id:"1",details:{src:"https://cdn.designcombo.dev/audio/Dawn%20of%20change.mp3",text:"Voiceover"},name:"Dawn of change",type:"audio",metadata:{author:"Roman Senyk"},display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/audio/Hope.mp3"},name:"Hope",type:"audio",metadata:{author:"Hugo Dujardin"}},{id:"3",details:{src:"https://cdn.designcombo.dev/audio/Tenderness.mp3"},name:"Tenderness",type:"audio",metadata:{author:"Benjamin Tissot"}},{id:"4",details:{src:"https://cdn.designcombo.dev/audio/Piano%20Moment.mp3"},name:"Piano moment",type:"audio",metadata:{author:"Benjamin Tissot"}}],kv=[{id:"1",details:{src:"https://ik.imagekit.io/wombo/images/img1.jpg"},preview:"https://ik.imagekit.io/wombo/images/img1.jpg?tr=w-190",type:"image"},{id:"2",details:{src:"https://ik.imagekit.io/wombo/images/img2.jpg"},preview:"https://ik.imagekit.io/wombo/images/img2.jpg?tr=w-190",type:"image"},{id:"3",details:{src:"https://ik.imagekit.io/wombo/images/img3.jpg"},preview:"https://ik.imagekit.io/wombo/images/img3.jpg?tr=w-190",type:"image"},{id:"4",details:{src:"https://ik.imagekit.io/wombo/images/img4.jpg"},preview:"https://ik.imagekit.io/wombo/images/img4.jpg?tr=w-190",type:"image"},{id:"5",details:{src:"https://ik.imagekit.io/wombo/images/img5.jpg"},preview:"https://ik.imagekit.io/wombo/images/img5.jpg?tr=w-190",type:"image"},,{id:"6",details:{src:"https://ik.imagekit.io/wombo/images/img6.jpg"},preview:"https://ik.imagekit.io/wombo/images/img6.jpg?tr=w-190",type:"image"},{id:"7",details:{src:"https://ik.imagekit.io/wombo/images/img7.jpg"},preview:"https://ik.imagekit.io/wombo/images/img7.jpg?tr=w-190",type:"image"}],Ov=[{id:"1",details:{src:"https://cdn.designcombo.dev/videos/demo-video-1.mp4",text:"Scene"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-1.png",duration:17e3,display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/videos/demo-video-2.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-2.png"},{id:"3",details:{src:"https://cdn.designcombo.dev/videos/demo-video-3.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-3.png",duration:2e4},{id:"4",details:{src:"https://cdn.designcombo.dev/videos/demo-video-4.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-4.png",duration:2e4},{id:"5",details:{src:"https://cdn.designcombo.dev/videos/demo-video-5.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-5.png",duration:23e3},{id:"6",details:{src:"https://cdn.designcombo.dev/videos/demo-video-6.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-6.png",duration:1e4},{id:"7",details:{src:"https://cdn.designcombo.dev/videos/demo-video-7.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-7.png",duration:12e3},{id:"8",details:{src:"https://cdn.designcombo.dev/videos/demo-video-8.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-8.png",duration:15e3},{id:"9",details:{src:"https://cdn.designcombo.dev/videos/demo-video-9.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-9.png",duration:15e3},{id:"10",details:{src:"https://cdn.designcombo.dev/videos/demo-video-10.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-10.png",duration:5e3},{id:"11",details:{src:"https://cdn.designcombo.dev/videos/demo-video-11.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-11.png",duration:5e3}],Av=[{id:"1",kind:"none",duration:0,preview:"https://ik.imagekit.io/wombo/transitions-v2/transition-none.png",type:"transition"},{id:"2",kind:"fade",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/fade.webp",type:"transition"},{id:"3",kind:"slide",name:"slide up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-up.webp",type:"transition",direction:"from-bottom"},{id:"4",kind:"slide",name:"slide down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-down.webp",type:"transition",direction:"from-top"},{id:"5",kind:"slide",name:"slide left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-left.webp",type:"transition",direction:"from-right"},{id:"6",kind:"slide",name:"slide right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-right.webp",type:"transition",direction:"from-left"},{id:"7",kind:"wipe",name:"wipe up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-up.webp",type:"transition",direction:"from-bottom"},{id:"8",kind:"wipe",name:"wipe down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-down.webp",type:"transition",direction:"from-top"},{id:"9",kind:"wipe",name:"wipe left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-left.webp",type:"transition",direction:"from-right"},{id:"10",kind:"wipe",name:"wipe right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-right.webp",type:"transition",direction:"from-left"},{id:"11",kind:"flip",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/flip.webp",type:"transition"},{id:"12",kind:"clockWipe",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/clock-wipe.webp",type:"transition"},{id:"13",kind:"star",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/star.webp",type:"transition"},{id:"14",kind:"circle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/circle.webp",type:"transition"},{id:"15",kind:"rectangle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/rectangle.webp",type:"transition"}],ok=[{id:"1",src:"https://ik.imagekit.io/snapmotion/upload-video-1.mp4",type:"video"},{id:"2",src:"https://ik.imagekit.io/snapmotion/upload-video-2.mp4",type:"video"},{id:"3",src:"https://ik.imagekit.io/snapmotion/upload-video-3.mp4",type:"video"}],ak=()=>{const r=Jo();return w.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Transitions"}),w.jsx($i,{children:w.jsx("div",{className:"grid grid-cols-3 gap-2 px-4",children:Av.map((e,t)=>w.jsx(ck,{transition:e,shouldDisplayPreview:!r},t))})})]})},ck=({transition:r,shouldDisplayPreview:e})=>{const t=Pe.useMemo(()=>({backgroundImage:`url(${r.preview})`,backgroundSize:"cover",width:"70px",height:"70px"}),[r.preview]);return w.jsx(Go,{data:r,renderCustomPreview:w.jsx("div",{style:t}),shouldDisplayPreview:e,children:w.jsxs("div",{children:[w.jsx("div",{children:w.jsx("div",{style:t,draggable:!1})}),w.jsx("div",{className:"flex h-6 items-center overflow-ellipsis text-nowrap text-[12px] capitalize text-muted-foreground",children:r.name||r.type})]})})},lk=()=>{const r=()=>{Qe.dispatch(mh,{payload:{id:zt(),display:{from:0,to:5e3},details:{text:"Heading and some body",fontSize:120,width:600,fontUrl:Vh.url,fontFamily:Vh.postScriptName,color:"#ffffff",wordWrap:"break-word",textAlign:"center",borderWidth:0,borderColor:"#000000",boxShadow:{color:"#ffffff",x:0,y:0,blur:0}}},options:{}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Text"}),w.jsx("div",{className:"flex flex-col gap-2 px-4",children:w.jsx(or,{draggable:!1,onClick:r,variant:"secondary",className:"w-full",children:"Add text"})})]})},uk=()=>{const r=m.useRef(null),e=n=>{t(n)},t=async n=>{const i=n[0].type;i.includes("audio")&&Qe.dispatch(zs,{payload:{id:zt(),details:{src:URL.createObjectURL(n[0]),volume:50}}}),i.includes("video")&&Qe.dispatch(Hs,{payload:{id:zt(),display:{from:2e3,to:7e3},details:{src:URL.createObjectURL(n[0]),name:n[0].name}}}),i.includes("image")&&Qe.dispatch(Ws,{payload:{id:zt(),details:{src:URL.createObjectURL(n[0])}}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Your media"}),w.jsx("input",{ref:r,id:"file-upload-handle",type:"file",accept:"audio/*,video/*,image/*",onChange:n=>e(Array.from(n.target.files||[])),className:"hidden"}),w.jsx("div",{className:"px-4 py-2",children:w.jsx("div",{children:w.jsxs(Dm,{defaultValue:"projects",className:"w-full",children:[w.jsxs(ph,{className:"grid w-full grid-cols-2",children:[w.jsx(vc,{value:"projects",children:"Project"}),w.jsx(vc,{value:"workspace",children:"Workspace"})]}),w.jsxs(yc,{value:"projects",children:[w.jsxs(or,{onClick:()=>{r.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[w.jsx(Cv,{size:16})," Upload"]}),w.jsx("div",{})]}),w.jsx(yc,{value:"workspace",children:w.jsxs(or,{onClick:()=>{r.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[w.jsx(Cv,{size:16})," Upload"]})})]})})}),w.jsx($i,{children:w.jsx("div",{className:"masonry-sm px-4"})})]})},hk=()=>{const r=Jo(),e=t=>{Qe.dispatch(zs,{payload:t,options:{}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Audios"}),w.jsx($i,{children:w.jsx("div",{className:"flex flex-col px-2",children:Ev.map((t,n)=>w.jsx(dk,{shouldDisplayPreview:!r,handleAddAudio:e,audio:t},n))})})]})},dk=({handleAddAudio:r,audio:e,shouldDisplayPreview:t})=>{const n=Pe.useMemo(()=>({backgroundImage:"url(https://cdn.designcombo.dev/thumbnails/music-preview.png)",backgroundSize:"cover",width:"70px",height:"70px"}),[]);return w.jsx(Go,{data:e,renderCustomPreview:w.jsx("div",{style:n}),shouldDisplayPreview:t,children:w.jsxs("div",{draggable:!1,onClick:()=>r(e),style:{display:"grid",gridTemplateColumns:"48px 1fr"},className:"flex cursor-pointer gap-4 px-2 py-1 text-sm hover:bg-zinc-800/70",children:[w.jsx("div",{className:"flex h-12 items-center justify-center bg-zinc-800",children:w.jsx(KE,{width:16})}),w.jsxs("div",{className:"flex flex-col justify-center",children:[w.jsx("div",{children:e.name}),w.jsx("div",{className:"text-zinc-400",children:e.metadata?.author})]})]})})},fk=()=>{const r=Jo(),e=t=>{Qe.dispatch(Ws,{payload:t,options:{trackId:"main"}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Photos"}),w.jsx($i,{children:w.jsx("div",{className:"masonry-sm px-4",children:kv.map((t,n)=>w.jsx(gk,{image:t,shouldDisplayPreview:!r,handleAddImage:e},n))})})]})},gk=({handleAddImage:r,image:e,shouldDisplayPreview:t})=>{const n=Pe.useMemo(()=>({backgroundImage:`url(${e.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[e.preview]);return w.jsx(Go,{data:e,renderCustomPreview:w.jsx("div",{style:n}),shouldDisplayPreview:t,children:w.jsx("div",{onClick:()=>r({id:zt(),details:{src:e.details.src}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:w.jsx("img",{draggable:!1,src:e.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},pk=()=>{const r=Jo(),e=t=>{Qe.dispatch(Hs,{payload:t,options:{resourceId:"main"}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Videos"}),w.jsx($i,{children:w.jsx("div",{className:"masonry-sm px-4",children:Ov.map((t,n)=>w.jsx(mk,{video:t,shouldDisplayPreview:!r,handleAddVideo:e},n))})})]})},mk=({handleAddVideo:r,video:e,shouldDisplayPreview:t})=>{const n=Pe.useMemo(()=>({backgroundImage:`url(${e.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[e.preview]);return w.jsx(Go,{data:e,renderCustomPreview:w.jsx("div",{style:n,className:"draggable"}),shouldDisplayPreview:t,children:w.jsx("div",{onClick:()=>r({...e,id:zt(),details:{src:e.details.src,...e.details}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:w.jsx("img",{draggable:!1,src:e.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},Hh=_v(r=>({activeMenuItem:null,showMenuItem:!1,cropTarget:null,showControlItem:!1,showToolboxItem:!1,activeToolboxItem:null,setCropTarget:e=>r({cropTarget:e}),setActiveMenuItem:e=>r({activeMenuItem:e}),setShowMenuItem:e=>r({showMenuItem:e}),setShowControlItem:e=>r({showControlItem:e}),setShowToolboxItem:e=>r({showToolboxItem:e}),setActiveToolboxItem:e=>r({activeToolboxItem:e})})),vk=({children:r})=>{const{showMenuItem:e,setShowMenuItem:t}=Hh(),n=()=>{t(!1)};return w.jsxs("div",{style:{left:e?"0":"-100%",transition:"left 0.25s ease-in-out",zIndex:200},className:"absolute top-1/2 mt-6 flex h-[calc(100%-32px-64px)] w-[340px] -translate-y-1/2 rounded-lg shadow-lg",children:[w.jsx("div",{className:"w-[74px]"}),w.jsxs("div",{className:"relative flex flex-1 bg-background/80 backdrop-blur-lg backdrop-filter",children:[w.jsx(or,{variant:"ghost",className:"absolute right-2 top-2 h-8 w-8 text-muted-foreground",size:"icon",children:w.jsx(rk,{width:16,onClick:n})}),r]})]})},yk=()=>{const{activeMenuItem:r}=Hh();return r==="transitions"?w.jsx(ak,{}):r==="texts"?w.jsx(lk,{}):r==="videos"?w.jsx(pk,{}):r==="audios"?w.jsx(hk,{}):r==="images"?w.jsx(fk,{}):r==="uploads"?w.jsx(uk,{}):null},bk=()=>w.jsx(vk,{children:w.jsx(yk,{})}),Iv={redo:({...r})=>w.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:w.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2957 4.15721C13.9052 3.76669 13.9052 3.13352 14.2957 2.743C14.6862 2.35247 15.3194 2.35247 15.7099 2.743L20.953 7.98603C21.1387 8.16758 21.2539 8.42087 21.2539 8.70108C21.2539 8.70111 21.2539 8.70114 21.2539 8.70117C21.2539 8.70431 21.2539 8.70744 21.2539 8.71057C21.2518 8.93273 21.1773 9.13757 21.0528 9.30262C21.0249 9.33973 20.9942 9.37505 20.961 9.40828L15.7099 14.6593C15.3194 15.0499 14.6862 15.0499 14.2957 14.6593C13.9052 14.2688 13.9052 13.6357 14.2957 13.2451L17.8398 9.70108H9.22665C8.59943 9.70108 7.97836 9.82462 7.39888 10.0646C6.81941 10.3047 6.29289 10.6565 5.84938 11.1C5.40587 11.5435 5.05406 12.07 4.81403 12.6495C4.57401 13.229 4.45047 13.85 4.45047 14.4773C4.45047 15.1045 4.57401 15.7256 4.81403 16.305C5.05406 16.8845 5.40587 17.411 5.84938 17.8545C6.29289 18.298 6.81941 18.6498 7.39888 18.8899C7.97836 19.1299 8.59943 19.2534 9.22665 19.2534H12.9024C13.4547 19.2534 13.9024 19.7012 13.9024 20.2534C13.9024 20.8057 13.4547 21.2534 12.9024 21.2534H9.22665C8.33679 21.2534 7.45564 21.0782 6.63352 20.7376C5.81139 20.3971 5.06439 19.898 4.43517 19.2687C3.80594 18.6395 3.30681 17.8925 2.96627 17.0704C2.62574 16.2483 2.45047 15.3671 2.45047 14.4773C2.45047 13.5874 2.62574 12.7063 2.96627 11.8841C3.30681 11.062 3.80594 10.315 4.43517 9.68578C5.06439 9.05655 5.81139 8.55742 6.63352 8.21689C7.45564 7.87635 8.33679 7.70108 9.22665 7.70108H17.8396L14.2957 4.15721Z",fill:"currentColor"})}),undo:({...r})=>w.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:w.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.60387 4.30711C9.99439 3.91659 9.99439 3.28342 9.60387 2.8929C9.21334 2.50238 8.58018 2.50237 8.18965 2.8929L2.8925 8.19004C2.70497 8.37758 2.59961 8.63193 2.59961 8.89715C2.59961 9.16237 2.70497 9.41672 2.8925 9.60426L8.18965 14.9014C8.58018 15.2919 9.21334 15.2919 9.60387 14.9014C9.99439 14.5109 9.99439 13.8777 9.60387 13.4872L5.86478 9.7481H15.1044C15.7383 9.7481 16.366 9.87295 16.9516 10.1155C17.5372 10.3581 18.0693 10.7136 18.5176 11.1619C18.9658 11.6101 19.3213 12.1422 19.5639 12.7278C19.8065 13.3134 19.9313 13.9411 19.9313 14.575C19.9313 15.2088 19.8065 15.8365 19.5639 16.4221C19.3213 17.0077 18.9658 17.5398 18.5176 17.9881C18.0693 18.4363 17.5372 18.7918 16.9516 19.0344C16.366 19.277 15.7383 19.4018 15.1044 19.4018H11.3964C10.8442 19.4018 10.3964 19.8495 10.3964 20.4018C10.3964 20.9541 10.8442 21.4018 11.3964 21.4018H15.1044C16.001 21.4018 16.8887 21.2252 17.717 20.8822C18.5452 20.5391 19.2978 20.0362 19.9318 19.4023C20.5657 18.7683 21.0686 18.0158 21.4116 17.1875C21.7547 16.3592 21.9313 15.4715 21.9313 14.575C21.9313 13.6784 21.7547 12.7907 21.4116 11.9624C21.0686 11.1342 20.5657 10.3816 19.9318 9.74764C19.2978 9.11371 18.5452 8.61085 17.717 8.26777C16.8887 7.92469 16.001 7.7481 15.1044 7.7481H6.16287L9.60387 4.30711Z",fill:"currentColor"})})};function wk(){const r=()=>{Qe.dispatch(wh)},e=()=>{Qe.dispatch(_h)};return w.jsx("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr 320px"},className:"pointer-events-none absolute left-0 right-0 top-0 z-[205] flex h-[72px] items-center px-2",children:w.jsxs("div",{className:"pointer-events-auto flex h-14 items-center gap-2",children:[w.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-background"}),w.jsxs("div",{className:"flex h-12 items-center bg-background px-1.5",children:[w.jsx(or,{onClick:r,className:"text-muted-foreground",variant:"ghost",size:"icon",children:w.jsx(Iv.undo,{width:20})}),w.jsx(or,{onClick:e,className:"text-muted-foreground",variant:"ghost",size:"icon",children:w.jsx(Iv.redo,{width:20})})]})]})})}var _k=Object.defineProperty,Mv=(r,e)=>{for(var t in e)_k(r,t,{get:e[t],enumerable:!0,configurable:!0,set:n=>e[t]=()=>n})};if(typeof m.createContext!="function"){const r=['Remotion requires React.createContext, but it is "undefined".','If you are in a React Server Component, turn it into a client component by adding "use client" at the top of the file.',"","Before:",'  import {useCurrentFrame} from "remotion";',"","After:",'  "use client";','  import {useCurrentFrame} from "remotion";'];throw new Error(r.join(`
`))}function Pv(){return["NOD","E_EN","V"].join("")}var Dv=()=>["e","nv"].join(""),Bt=()=>{const r=typeof window<"u"&&window.remotion_isPlayer,e=typeof window<"u"&&typeof window.process<"u"&&typeof window.process.env<"u"&&(window.process[Dv()][Pv()]==="test"||window.process[Dv()][Pv()]==="production"&&typeof window<"u"&&typeof window.remotion_puppeteerTimeout<"u");return{isStudio:typeof window<"u"&&window.remotion_isStudio,isRendering:e,isPlayer:r}},Sk=Pe.createElement,Rv=[],jv=()=>{if(!Bt().isStudio)return;const r=new Proxy(Sk,{apply(e,t,n){if(Rv.includes(n[0])){const[i,s,...a]=n,c={...s??{},stack:new Error().stack};return Reflect.apply(e,t,[i,c,...a])}return Reflect.apply(e,t,n)}});Pe.createElement=r},Qo=r=>{Rv.push(r),jv()},Lv=m.createContext(!1),xk=({children:r})=>w.jsx(Lv.Provider,{value:!0,children:r}),zh=()=>m.useContext(Lv);function Tc(r){return!!r}var Ec="4.0.229",Ck=()=>{if(typeof globalThis>"u")return;const r=globalThis.remotion_imported||typeof window<"u"&&window.remotion_imported;if(r){if(r===Ec)return;throw new TypeError(` Multiple versions of Remotion detected: ${[Ec,typeof r=="string"?r:"an older version"].filter(Tc).join(" and ")}. This will cause things to break in an unexpected way.
Check that all your Remotion packages are on the same version. If your dependencies depend on Remotion, make them peer dependencies. You can also run \`npx remotion versions\` from your terminal to see which versions are mismatching.`)}globalThis.remotion_imported=Ec,typeof window<"u"&&(window.remotion_imported=Ec)},Tk=(r,e)=>{const{style:t,...n}=r,i=m.useMemo(()=>({position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",...t}),[t]);return w.jsx("div",{ref:e,style:i,...n})},ea=m.forwardRef(Tk),lr=m.createContext(null),$s=Pe.createContext({registerSequence:()=>{throw new Error("SequenceManagerContext not initialized")},unregisterSequence:()=>{throw new Error("SequenceManagerContext not initialized")},sequences:[]}),ta=Pe.createContext({hidden:{},setHidden:()=>{throw new Error("SequenceVisibilityToggle not initialized")}}),Ek=({children:r})=>{const[e,t]=m.useState([]),[n,i]=m.useState({}),s=m.useCallback(h=>{t(d=>[...d,h])},[]),a=m.useCallback(h=>{t(d=>d.filter(g=>g.id!==h))},[]),c=m.useMemo(()=>({registerSequence:s,sequences:e,unregisterSequence:a}),[s,e,a]),u=m.useMemo(()=>({hidden:n,setHidden:i}),[n]);return w.jsx($s.Provider,{value:c,children:w.jsx(ta.Provider,{value:u,children:r})})},Ys=m.createContext({getNonce:()=>0,fastRefreshes:0}),Wh=()=>{const r=m.useContext(Ys),[e,t]=m.useState(()=>r.getNonce()),n=m.useRef(r);return m.useEffect(()=>{n.current!==r&&(n.current=r,t(r.getNonce))},[r]),e},Fv={};Mv(Fv,{useTimelineSetFrame:()=>e0,useTimelinePosition:()=>Gi,usePlayingState:()=>Kh,persistCurrentFrame:()=>Zv,getInitialFrameState:()=>Jv,getFrameForComposition:()=>Qv,TimelineContext:()=>gn,SetTimelineContext:()=>Xs});var vi=m.createContext({compositions:[],registerComposition:()=>{},unregisterComposition:()=>{},registerFolder:()=>{},unregisterFolder:()=>{},setCurrentCompositionMetadata:()=>{},updateCompositionDefaultProps:()=>{},folders:[],currentCompositionMetadata:null,canvasContent:null,setCanvasContent:()=>{}}),kc=m.createContext({props:{},updateProps:()=>{throw new Error("Not implemented")},resetUnsaved:()=>{throw new Error("Not implemented")}}),Nv=Pe.createRef(),Bv=({children:r})=>{const[e,t]=Pe.useState({}),n=m.useCallback(({defaultProps:a,id:c,newProps:u})=>{t(h=>({...h,[c]:typeof u=="function"?u(h[c]??a):u}))},[]),i=m.useCallback(()=>{t({})},[]);m.useImperativeHandle(Nv,()=>({getProps:()=>e,setProps:t}),[e]);const s=m.useMemo(()=>({props:e,updateProps:n,resetUnsaved:i}),[e,i,n]);return w.jsx(kc.Provider,{value:s,children:r})},kk={"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";"},Vv={},Ok=r=>{Vv[r]||(console.warn(r),Vv[r]=!0)},Ak=r=>{for(const e of Object.keys(kk))if(r.includes(e))return{containsHex:!0,hexCode:e};return{containsHex:!1}},Uh=r=>r.startsWith("/")?Uh(r.substring(1)):r,Ik=r=>{if(typeof window<"u"&&window.remotion_staticBase){if(r.startsWith(window.remotion_staticBase))throw new Error(`The value "${r}" is already prefixed with the static base ${window.remotion_staticBase}. You don't need to call staticFile() on it.`);return`${window.remotion_staticBase}/${Uh(r)}`}return`/${Uh(r)}`},Mk=r=>r.split("/").map(i=>encodeURIComponent(i)).join("/"),Pk=r=>{if(r===null)throw new TypeError("null was passed to staticFile()");if(typeof r>"u")throw new TypeError("undefined was passed to staticFile()");if(r.startsWith("http://")||r.startsWith("https://"))throw new TypeError(`staticFile() does not support remote URLs - got "${r}". Instead, pass the URL without wrapping it in staticFile(). See: https://remotion.dev/docs/staticfile-remote-urls`);if(r.startsWith("..")||r.startsWith("./"))throw new TypeError(`staticFile() does not support relative paths - got "${r}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(r.startsWith("/Users")||r.startsWith("/home")||r.startsWith("/tmp")||r.startsWith("/etc")||r.startsWith("/opt")||r.startsWith("/var")||r.startsWith("C:")||r.startsWith("D:")||r.startsWith("E:"))throw new TypeError(`staticFile() does not support absolute paths - got "${r}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(r.startsWith("public/"))throw new TypeError(`Do not include the public/ prefix when using staticFile() - got "${r}". See: https://remotion.dev/docs/staticfile-relative-paths`);const e=Ak(r);e.containsHex&&Ok(`WARNING: You seem to pass an already encoded path (path contains ${e.hexCode}). Since Remotion 4.0, the encoding is done by staticFile() itself. You may want to remove a encodeURIComponent() wrapping.`);const t=Mk(r),n=Ik(t);return n.startsWith("/")?n:`/${n}`},$h="remotion-date:",Yh="remotion-file:",Dk=({data:r,indent:e,staticBase:t})=>{let n=!1,i=!1,s=!1,a=!1;try{return{serializedString:JSON.stringify(r,function(u,h){const d=this[u];return d instanceof Date?(n=!0,`${$h}${d.toISOString()}`):d instanceof Map?(s=!0,h):d instanceof Set?(a=!0,h):typeof d=="string"&&t!==null&&d.startsWith(t)?(i=!0,`${Yh}${d.replace(t+"/","")}`):h},e),customDateUsed:n,customFileUsed:i,mapUsed:s,setUsed:a}}catch(c){throw new Error("Could not serialize the passed input props to JSON: "+c.message)}},Hv=r=>JSON.parse(r,(e,t)=>typeof t=="string"&&t.startsWith($h)?new Date(t.replace($h,"")):typeof t=="string"&&t.startsWith(Yh)?Pk(t.replace(Yh,"")):t),Xi=r=>Bt().isStudio?Hv(Dk({data:r,indent:2,staticBase:window.remotion_staticBase}).serializedString):r,zv=!1,Rk=()=>{zv||(zv=!0,console.warn("Called `getInputProps()` on the server. This function is not available server-side and has returned an empty object."),console.warn("To hide this warning, don't call this function on the server:"),console.warn("  typeof window === 'undefined' ? {} : getInputProps()"))},Wv=()=>{if(typeof window>"u")return Rk(),{};if(Bt().isPlayer)throw new Error("You cannot call `getInputProps()` from a <Player>. Instead, the props are available as React props from component that you passed as `component` prop.");const r=window.remotion_inputProps;return r?Hv(r):{}},Uv=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"];function jk(r,e){if(!(typeof r>"u")){if(typeof r!="string")throw new TypeError(`The "defaultCodec" prop ${e} must be a string, but you passed a value of type ${typeof r}.`);if(!Uv.includes(r))throw new Error(`The "defaultCodec" prop ${e} must be one of ${Uv.join(", ")}, but you passed ${r}.`)}}function Oc(r,e,t){if(typeof r!="number")throw new Error(`The "${e}" prop ${t} must be a number, but you passed a value of type ${typeof r}`);if(isNaN(r))throw new TypeError(`The "${e}" prop ${t} must not be NaN, but is NaN.`);if(!Number.isFinite(r))throw new TypeError(`The "${e}" prop ${t} must be finite, but is ${r}.`);if(r%1!==0)throw new TypeError(`The "${e}" prop ${t} must be an integer, but is ${r}.`);if(r<=0)throw new TypeError(`The "${e}" prop ${t} must be positive, but got ${r}.`)}function Xh(r,e){const{allowFloats:t,component:n}=e;if(typeof r>"u")throw new Error(`The "durationInFrames" prop ${n} is missing.`);if(typeof r!="number")throw new Error(`The "durationInFrames" prop ${n} must be a number, but you passed a value of type ${typeof r}`);if(r<=0)throw new TypeError(`The "durationInFrames" prop ${n} must be positive, but got ${r}.`);if(!t&&r%1!==0)throw new TypeError(`The "durationInFrames" prop ${n} must be an integer, but got ${r}.`);if(!Number.isFinite(r))throw new TypeError(`The "durationInFrames" prop ${n} must be finite, but got ${r}.`)}function $v(r,e,t){if(typeof r!="number")throw new Error(`"fps" must be a number, but you passed a value of type ${typeof r} ${e}`);if(!Number.isFinite(r))throw new Error(`"fps" must be a finite, but you passed ${r} ${e}`);if(isNaN(r))throw new Error(`"fps" must not be NaN, but got ${r} ${e}`);if(r<=0)throw new TypeError(`"fps" must be positive, but got ${r} ${e}`)}var Yv=({calculated:r,compositionId:e,compositionFps:t,compositionHeight:n,compositionWidth:i,compositionDurationInFrames:s})=>{const a=`calculated by calculateMetadata() for the composition "${e}"`,c=`of the "<Composition />" component with the id "${e}"`,u=r?.width??i??void 0;Oc(u,"width",r?.width?a:c);const h=r?.height??n??void 0;Oc(h,"height",r?.height?a:c);const d=r?.fps??t??null;$v(d,r?.fps?a:c);const g=r?.durationInFrames??s??null;Xh(g,{allowFloats:!1,component:`of the "<Composition />" component with the id "${e}"`});const p=r?.defaultCodec;return jk(p,a),{width:u,height:h,fps:d,durationInFrames:g,defaultCodec:p}},Xv=({calculateMetadata:r,signal:e,defaultProps:t,originalProps:n,compositionId:i,compositionDurationInFrames:s,compositionFps:a,compositionHeight:c,compositionWidth:u})=>{const h=r?r({defaultProps:t,props:n,abortSignal:e,compositionId:i}):null;if(h!==null&&typeof h=="object"&&"then"in h)return h.then(g=>{const{height:p,width:v,durationInFrames:b,fps:S,defaultCodec:C}=Yv({calculated:g,compositionDurationInFrames:s,compositionFps:a,compositionHeight:c,compositionWidth:u,compositionId:i});return{width:v,height:p,fps:S,durationInFrames:b,id:i,defaultProps:Xi(t),props:Xi(g.props??n),defaultCodec:C??null}});const d=Yv({calculated:h,compositionDurationInFrames:s,compositionFps:a,compositionHeight:c,compositionWidth:u,compositionId:i});return h===null?{...d,id:i,defaultProps:Xi(t??{}),props:Xi(n),defaultCodec:null}:{...d,id:i,defaultProps:Xi(t??{}),props:Xi(h.props??n),defaultCodec:h.defaultCodec??null}},Lk=r=>{try{return{type:"success",result:Xv(r)}}catch(e){return{type:"error",error:e}}},Ac=m.createContext(null),Gv=m.createRef(),qv=r=>!!r.calculateMetadata,Fk="remotion.propsUpdatedExternally",Kv=({children:r})=>{const[e,t]=m.useState(null),{compositions:n,canvasContent:i,currentCompositionMetadata:s}=m.useContext(vi),{fastRefreshes:a}=m.useContext(Ys),c=m.useMemo(()=>n.find(V=>i&&i.type==="composition"&&i.compositionId===V.id),[i,n]),u=n.find(V=>V.id===e),{props:h}=m.useContext(kc),d=m.useMemo(()=>typeof window>"u"||Bt().isPlayer?{}:Wv()??{},[]),[g,p]=m.useState({}),v=m.useMemo(()=>c?h[c.id]??{}:{},[h,c]),b=m.useMemo(()=>u?h[u.id]??{}:{},[h,u]),S=!!s,C=m.useCallback(({calculateMetadata:V,combinedProps:G,compositionDurationInFrames:X,compositionFps:J,compositionHeight:q,compositionId:Z,compositionWidth:ae,defaultProps:ye})=>{const ee=new AbortController;if(S)return ee;const{signal:me}=ee,fe=Lk({compositionId:Z,calculateMetadata:V,originalProps:G,signal:me,defaultProps:ye,compositionDurationInFrames:X,compositionFps:J,compositionHeight:q,compositionWidth:ae});if(fe.type==="error")return p(P=>({...P,[Z]:{type:"error",error:fe.error}})),ee;const ie=fe.result;return typeof ie=="object"&&"then"in ie?(p(P=>{const W=P[Z];return W?.type==="success"||W?.type==="success-and-refreshing"?{...P,[Z]:{type:"success-and-refreshing",result:W.result}}:{...P,[Z]:{type:"loading"}}}),ie.then(P=>{ee.signal.aborted||p(W=>({...W,[Z]:{type:"success",result:P}}))}).catch(P=>{ee.signal.aborted||p(W=>({...W,[Z]:{type:"error",error:P}}))})):p(P=>({...P,[Z]:{type:"success",result:ie}})),ee},[S]),T=i?.type==="composition"?i.compositionId:null;m.useImperativeHandle(Gv,()=>({setCurrentRenderModalComposition:V=>{t(V)},reloadCurrentlySelectedComposition:()=>{if(!T)return;const V=n.find(q=>q.id===T);if(!V)throw new Error(`Could not find composition with id ${T}`);const G=h[T]??{},X={...V.defaultProps??{},...G??{}},J={...X,...d??{}};C({defaultProps:X,calculateMetadata:V.calculateMetadata,combinedProps:J,compositionDurationInFrames:V.durationInFrames??null,compositionFps:V.fps??null,compositionHeight:V.height??null,compositionWidth:V.width??null,compositionId:V.id})}}),[h,n,T,C,d]);const k=c?.id===u?.id,A=m.useMemo(()=>({...c?.defaultProps??{},...v??{}}),[c?.defaultProps,v]),M=m.useMemo(()=>({...A,...d??{}}),[A,d]),R=c&&qv(c),N=typeof window<"u"&&window.remotion_ignoreFastRefreshUpdate&&a<=window.remotion_ignoreFastRefreshUpdate;m.useEffect(()=>{if(!N&&R){const V=C({calculateMetadata:c.calculateMetadata,combinedProps:M,compositionDurationInFrames:c.durationInFrames??null,compositionFps:c.fps??null,compositionHeight:c.height??null,compositionWidth:c.width??null,defaultProps:A,compositionId:c.id});return()=>{V.abort()}}},[R,A,C,M,c?.calculateMetadata,c?.durationInFrames,c?.fps,c?.height,c?.id,c?.width,N]),m.useEffect(()=>{N||window.dispatchEvent(new CustomEvent("remotion.propsUpdatedExternally"))},[a]),m.useEffect(()=>{if(u&&!k){const V={...u.defaultProps??{},...b??{},...d??{}},G=C({calculateMetadata:u.calculateMetadata,compositionDurationInFrames:u.durationInFrames??null,compositionFps:u.fps??null,compositionHeight:u.height??null,compositionId:u.id,compositionWidth:u.width??null,defaultProps:A,combinedProps:V});return()=>{G.abort()}}},[A,C,d,k,u,b]);const $=m.useMemo(()=>{const V=n.filter(G=>G.calculateMetadata===null);return{...g,...V.reduce((G,X)=>({...G,[X.id]:{type:"success",result:{...X,defaultProps:X.defaultProps??{}}}}),{})}},[n,g]);return w.jsx(Ac.Provider,{value:$,children:r})},Gh=r=>{const e=m.useContext(Ac),{props:t}=m.useContext(kc),{compositions:n,canvasContent:i,currentCompositionMetadata:s}=m.useContext(vi),a=i?.type==="composition"?i.compositionId:null,c=r??a,u=n.find(d=>d.id===c),h=m.useMemo(()=>u?t[u.id]??{}:{},[t,u]);return m.useMemo(()=>u?s?{type:"success",result:{...s,id:u.id,props:s.props,defaultProps:u.defaultProps??{},defaultCodec:s.defaultCodec}}:qv(u)?e[u.id]?e[u.id]:null:(Xh(u.durationInFrames,{allowFloats:!1,component:`in <Composition id="${u.id}">`}),$v(u.fps,`in <Composition id="${u.id}">`),Oc(u.width,"width",`in <Composition id="${u.id}">`),Oc(u.height,"height",`in <Composition id="${u.id}">`),{type:"success",result:{width:u.width,height:u.height,fps:u.fps,id:u.id,durationInFrames:u.durationInFrames,defaultProps:u.defaultProps??{},props:{...u.defaultProps??{},...h??{},...typeof window>"u"||Bt().isPlayer?{}:Wv()??{}},defaultCodec:null}}):null,[u,e,s,h])},Ic=()=>{const{canvasContent:r,compositions:e,currentCompositionMetadata:t}=m.useContext(vi),n=e.find(s=>r?.type==="composition"&&s.id===r.compositionId),i=Gh(n?.id??null);return m.useMemo(()=>!i||i.type==="error"||i.type==="loading"||!n?null:{...i.result,defaultProps:n.defaultProps??{},id:n.id,...t??{},component:n.component},[t,i,n])},gn=m.createContext({frame:{},playing:!1,playbackRate:1,rootId:"",imperativePlaying:{current:!1},setPlaybackRate:()=>{throw new Error("default")},audioAndVideoTags:{current:[]}}),Xs=m.createContext({setFrame:()=>{throw new Error("default")},setPlaying:()=>{throw new Error("default")}}),qh=()=>"remotion.time-all",Zv=r=>{localStorage.setItem(qh(),JSON.stringify(r))},Jv=()=>{const r=localStorage.getItem(qh())??"{}";return JSON.parse(r)},Qv=r=>{const e=localStorage.getItem(qh())??"{}",t=JSON.parse(e);return t[r]!==void 0?Number(t[r]):typeof window>"u"?0:window.remotion_initialFrame??0},Gi=()=>{const r=Ic(),e=m.useContext(gn);if(!r)return typeof window>"u"?0:window.remotion_initialFrame??0;const t=e.frame[r.id]??(Bt().isPlayer?0:Qv(r.id));return Math.min(r.durationInFrames-1,t)},e0=()=>{const{setFrame:r}=m.useContext(Xs);return r},Kh=()=>{const{playing:r,imperativePlaying:e}=m.useContext(gn),{setPlaying:t}=m.useContext(Xs);return m.useMemo(()=>[r,t,e],[e,r,t])},qi=m.createContext(!1),Zh=({children:r})=>w.jsx(qi.Provider,{value:!0,children:r}),Mc=()=>{const r=m.useContext(lr),e=r?.width??null,t=r?.height??null,n=r?.durationInFrames??null,i=Ic();return m.useMemo(()=>{if(!i)return null;const{id:s,durationInFrames:a,fps:c,height:u,width:h,defaultProps:d,props:g,defaultCodec:p}=i;return{id:s,width:e??h,height:t??u,fps:c,durationInFrames:n??a,defaultProps:d,props:g,defaultCodec:p}},[n,t,e,i])},yi=()=>{const r=Mc(),e=m.useContext(qi),t=zh();if(!r)throw typeof window<"u"&&window.remotion_isPlayer||t?new Error(["No video config found. Likely reasons:","- You are probably calling useVideoConfig() from outside the component passed to <Player />. See https://www.remotion.dev/docs/player/examples for how to set up the Player correctly.","- You have multiple versions of Remotion installed which causes the React context to get lost."].join("-")):new Error("No video config found. You are probably calling useVideoConfig() from a component which has not been registered as a <Composition />. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions for more information.");if(!e)throw new Error("Called useVideoConfig() outside a Remotion composition.");return r},bi=()=>{if(!m.useContext(qi))throw Bt().isPlayer?new Error("useCurrentFrame can only be called inside a component that was passed to <Player>. See: https://www.remotion.dev/docs/player/examples"):new Error("useCurrentFrame() can only be called inside a component that was registered as a composition. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions");const e=Gi(),t=m.useContext(lr),n=t?t.cumulatedFrom+t.relativeFrom:0;return e-n},Nk=({frame:r,children:e,active:t=!0})=>{const n=bi(),i=yi();if(typeof r>"u")throw new Error("The <Freeze /> component requires a 'frame' prop, but none was passed.");if(typeof r!="number")throw new Error(`The 'frame' prop of <Freeze /> must be a number, but is of type ${typeof r}`);if(Number.isNaN(r))throw new Error("The 'frame' prop of <Freeze /> must be a real number, but it is NaN.");if(!Number.isFinite(r))throw new Error(`The 'frame' prop of <Freeze /> must be a finite number, but it is ${r}.`);const s=m.useMemo(()=>{if(typeof t=="boolean")return t;if(typeof t=="function")return t(n)},[t,n]),a=m.useContext(gn),u=m.useContext(lr)?.relativeFrom??0,h=m.useMemo(()=>s?{...a,playing:!1,imperativePlaying:{current:!1},frame:{[i.id]:r+u}}:a,[s,a,i.id,r,u]);return w.jsx(gn.Provider,{value:h,children:e})},Bk=({from:r=0,durationInFrames:e=1/0,children:t,name:n,height:i,width:s,showInTimeline:a=!0,_remotionInternalLoopDisplay:c,_remotionInternalStack:u,_remotionInternalPremountDisplay:h,...d},g)=>{const{layout:p="absolute-fill"}=d,[v]=m.useState(()=>String(Math.random())),b=m.useContext(lr),{rootId:S}=m.useContext(gn),C=b?b.cumulatedFrom+b.relativeFrom:0,T=Wh();if(p!=="absolute-fill"&&p!=="none")throw new TypeError(`The layout prop of <Sequence /> expects either "absolute-fill" or "none", but you passed: ${p}`);if(p==="none"&&typeof d.style<"u")throw new TypeError('If layout="none", you may not pass a style.');if(typeof e!="number")throw new TypeError(`You passed to durationInFrames an argument of type ${typeof e}, but it must be a number.`);if(e<=0)throw new TypeError(`durationInFrames must be positive, but got ${e}`);if(typeof r!="number")throw new TypeError(`You passed to the "from" props of your <Sequence> an argument of type ${typeof r}, but it must be a number.`);if(!Number.isFinite(r))throw new TypeError(`The "from" prop of a sequence must be finite, but got ${r}.`);const k=Gi(),A=yi(),M=b?Math.min(b.durationInFrames-r,e):e,R=Math.max(0,Math.min(A.durationInFrames-r,M)),{registerSequence:N,unregisterSequence:$}=m.useContext($s),{hidden:V}=m.useContext(ta),G=m.useMemo(()=>b?.premounting??!!d._remotionInternalIsPremounting,[d._remotionInternalIsPremounting,b?.premounting]),X=m.useMemo(()=>({cumulatedFrom:C,relativeFrom:r,durationInFrames:R,parentFrom:b?.relativeFrom??0,id:v,height:i??b?.height??null,width:s??b?.width??null,premounting:G}),[C,r,R,b,v,i,s,G]),J=m.useMemo(()=>n??"",[n]);m.useEffect(()=>{if(Bt().isStudio)return N({from:r,duration:R,id:v,displayName:J,parent:b?.id??null,type:"sequence",rootId:S,showInTimeline:a,nonce:T,loopDisplay:c,stack:u??null,premountDisplay:h??null}),()=>{$(v)}},[e,v,n,N,J,$,b?.id,R,S,r,a,T,c,u,h]);const q=Math.ceil(C+r+e-1),Z=k<C+r||k>q?null:t,ae=d.layout==="none"?void 0:d.style,ye=m.useMemo(()=>({flexDirection:void 0,...s?{width:s}:{},...i?{height:i}:{},...ae??{}}),[i,ae,s]);if(g!==null&&p==="none")throw new TypeError('It is not supported to pass both a `ref` and `layout="none"` to <Sequence />.');return V[v]??!1?null:w.jsx(lr.Provider,{value:X,children:Z===null?null:d.layout==="none"?Z:w.jsx(ea,{ref:g,style:ye,className:d.className,children:Z})})},Vk=m.forwardRef(Bk),Hk=(r,e)=>{const t=bi();if(r.layout==="none")throw new Error('`<Sequence>` with `premountFor` prop does not support layout="none"');const{style:n,from:i=0,premountFor:s=0,...a}=r,c=t<i&&t>=i-s,u=m.useMemo(()=>({...n,opacity:c?0:1,pointerEvents:c?"none":n?.pointerEvents??void 0}),[c,n]);return w.jsx(Nk,{frame:i,active:c,children:w.jsx(Mn,{ref:e,from:i,style:u,_remotionInternalPremountDisplay:s,_remotionInternalIsPremounting:c,...a})})},zk=m.forwardRef(Hk),Wk=(r,e)=>r.layout!=="none"&&r.premountFor&&!Bt().isRendering?w.jsx(zk,{...r,ref:e}):w.jsx(Vk,{...r,ref:e}),Mn=m.forwardRef(Wk),Uk=r=>{if(typeof r!="string")throw new TypeError(`The "filename" must be a string, but you passed a value of type ${typeof r}`);if(r.trim()==="")throw new Error("The `filename` must not be empty");if(!r.match(/^([0-9a-zA-Z-!_.*'()/:&$@=;+,?]+)/g))throw new Error('The `filename` must match "/^([0-9a-zA-Z-!_.*\'()/:&$@=;+,?]+)/g". Use forward slashes only, even on Windows.')},$k=r=>{if(typeof r!="string"&&!(r instanceof Uint8Array))throw new TypeError(`The "content" must be a string or Uint8Array, but you passed a value of type ${typeof r}`);if(typeof r=="string"&&r.trim()==="")throw new Error("The `content` must not be empty")},t0=r=>{r.type==="artifact"&&(Uk(r.filename),$k(r.content))},Ki=m.createContext({registerRenderAsset:()=>{},unregisterRenderAsset:()=>{},renderAssets:[]}),Yk=({children:r})=>{const[e,t]=m.useState([]),n=m.useCallback(a=>{t0(a),t(c=>[...c,a])},[]),i=m.useCallback(a=>{t(c=>c.filter(u=>u.id!==a))},[]);m.useLayoutEffect(()=>{typeof window<"u"&&(window.remotion_collectAssets=()=>(t([]),e))},[e]);const s=m.useMemo(()=>({registerRenderAsset:n,unregisterRenderAsset:i,renderAssets:e}),[e,n,i]);return w.jsx(Ki.Provider,{value:s,children:r})},zn=r=>typeof window>"u"?r:new URL(r,window.origin).href,r0=({endAt:r,mediaDuration:e,playbackRate:t,startFrom:n})=>{let i=e;typeof r<"u"&&(i=r),typeof n<"u"&&(i-=n);const s=i/t;return Math.floor(s)};function ra(r){let e;throw Xk(r)?(e=r,e.stack||(e.stack=new Error(e.message).stack)):typeof r=="string"?e=Error(r):e=Error("Rendering was cancelled"),window.remotion_cancelledError=e.stack,e}var Xk=r=>r instanceof Error?!0:!(r===null||typeof r!="object"||!("stack"in r)||typeof r.stack!="string"||!("message"in r)||typeof r.message!="string"),n0=m.createContext(null),Gk=()=>Pe.useContext(n0),Pc=({durationInFrames:r,times:e=1/0,children:t,name:n,...i})=>{const s=bi(),{durationInFrames:a}=yi();if(Xh(r,{component:"of the <Loop /> component",allowFloats:!0}),typeof e!="number")throw new TypeError(`You passed to "times" an argument of type ${typeof e}, but it must be a number.`);if(e!==1/0&&e%1!==0)throw new TypeError(`The "times" prop of a loop must be an integer, but got ${e}.`);if(e<0)throw new TypeError(`The "times" prop of a loop must be at least 0, but got ${e}`);const c=Math.ceil(a/r),u=Math.min(c,e),h=i.layout==="none"?void 0:i.style,d=r*(u-1),p=Math.floor(s/r)*r,v=Math.min(p,d),b=m.useMemo(()=>({numberOfTimes:u,startOffset:-v,durationInFrames:r}),[u,r,v]),S=m.useMemo(()=>({iteration:Math.floor(s/r),durationInFrames:r}),[s,r]);return w.jsx(n0.Provider,{value:S,children:w.jsx(Mn,{durationInFrames:r,from:v,name:n??"<Loop>",_remotionInternalLoopDisplay:b,layout:i.layout,style:h,children:t})})};Pc.useLoop=Gk;var Dc=m.createContext({}),i0={},Jh=[],s0=({children:r})=>{const[e,t]=m.useState(()=>i0);return m.useEffect(()=>{const n=()=>{t(i0)};return Jh.push(n),()=>{Jh=Jh.filter(i=>i!==n)}},[]),w.jsx(Dc.Provider,{value:e,children:r})},Gs=r=>m.useContext(Dc)[r]??r,Qh=(r,e)=>{if(typeof r.volume!="number"&&typeof r.volume!="function"&&typeof r.volume<"u")throw new TypeError(`You have passed a volume of type ${typeof r.volume} to your <${e} /> component. Volume must be a number or a function with the signature '(frame: number) => number' undefined.`);if(typeof r.volume=="number"&&r.volume<0)throw new TypeError(`You have passed a volume below 0 to your <${e} /> component. Volume must be between 0 and 1`);if(typeof r.playbackRate!="number"&&typeof r.playbackRate<"u")throw new TypeError(`You have passed a playbackRate of type ${typeof r.playbackRate} to your <${e} /> component. Playback rate must a real number or undefined.`);if(typeof r.playbackRate=="number"&&(isNaN(r.playbackRate)||!Number.isFinite(r.playbackRate)||r.playbackRate<=0))throw new TypeError(`You have passed a playbackRate of ${r.playbackRate} to your <${e} /> component. Playback rate must be a real number above 0.`)},ed=(r,e)=>{if(typeof r<"u"){if(typeof r!="number")throw new TypeError(`type of startFrom prop must be a number, instead got type ${typeof r}.`);if(isNaN(r)||r===1/0)throw new TypeError("startFrom prop can not be NaN or Infinity.");if(r<0)throw new TypeError(`startFrom must be greater than equal to 0 instead got ${r}.`)}if(typeof e<"u"){if(typeof e!="number")throw new TypeError(`type of endAt prop must be a number, instead got type ${typeof e}.`);if(isNaN(e))throw new TypeError("endAt prop can not be NaN.");if(e<=0)throw new TypeError(`endAt must be a positive number, instead got ${e}.`)}if(e<r)throw new TypeError("endAt prop must be greater than startFrom prop.")},qk=(r,e)=>{switch(e.type){case"got-duration":{const t=zn(e.src);return r[t]===e.durationInSeconds?r:{...r,[t]:e.durationInSeconds}}default:return r}},td=m.createContext({durations:{},setDurations:()=>{throw new Error("context missing")}}),o0=({children:r})=>{const[e,t]=m.useReducer(qk,{}),n=m.useMemo(()=>({durations:e,setDurations:t}),[e]);return w.jsx(td.Provider,{value:n,children:r})};function a0(r){let e=r+1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Kk(r){let e=0,t=0,n=0;for(e=0;e<r.length;e++)t=r.charCodeAt(e),n=(n<<5)-n+t,n|=0;return n}var Zi=(r,e)=>{if(r===null)return Math.random();if(typeof r=="string")return a0(Kk(r));if(typeof r=="number")return a0(r*1e10);throw new Error("random() argument must be a number or a string")},qs=()=>{const r=m.useContext(lr);return Math.min(0,r?.relativeFrom??0)},na=r=>{const e=Pc.useLoop(),t=bi(),n=qs();return r==="repeat"||e===null?t+n:t+n+e.durationInFrames*e.iteration},Zk=r=>{if(/data:|blob:/.test(r.substring(0,5)))return"Data URL";const e=r.split("/").map(t=>t.split("\\")).flat(1);return e[e.length-1]},Rc=(r,e,t)=>{const{current:n}=r;if(!n)return;const i=n.play();i.catch&&i.catch(s=>{if(n&&!s.message.includes("request was interrupted by a call to pause")&&!s.message.includes("The operation was aborted.")&&!s.message.includes("The fetching process for the media resource was aborted by the user agent")&&!s.message.includes("request was interrupted by a new load request")&&!s.message.includes("because the media was removed from the document")&&!(s.message.includes("user didn't interact with the document")&&n.muted)&&(console.log(`Could not play ${e} due to following error: `,s),!n.muted)){if(t){t();return}console.log("The video will be muted and we'll retry playing it."),e==="video"&&Bt().isPlayer&&console.log("Use onAutoPlayError() to handle this error yourself."),n.muted=!0,n.play()}})},Ks=({frame:r,volume:e,mediaVolume:t=1,allowAmplificationDuringRender:n})=>{const i=n?1/0:1;if(typeof e=="number")return Math.min(i,e*t);if(typeof e>"u")return Number(t);const s=e(r)*t;if(typeof s!="number")throw new TypeError(`You passed in a a function to the volume prop but it did not return a number but a value of type ${typeof s} for frame ${r}`);if(Number.isNaN(s))throw new TypeError(`You passed in a function to the volume prop but it returned NaN for frame ${r}.`);if(!Number.isFinite(s))throw new TypeError(`You passed in a function to the volume prop but it returned a non-finite number for frame ${r}.`);return Math.max(0,Math.min(i,s))},c0={},Jk=r=>{c0[r]||(console.warn(r),c0[r]=!0)},l0=({volume:r,mediaVolume:e,mediaRef:t,src:n,mediaType:i,playbackRate:s,displayName:a,id:c,stack:u,showInTimeline:h,premountDisplay:d,onAutoPlayError:g})=>{const p=yi(),{rootId:v,audioAndVideoTags:b}=m.useContext(gn),S=m.useContext(lr),C=S?S.relativeFrom+S.cumulatedFrom:0,[T]=Kh(),k=qs(),{registerSequence:A,unregisterSequence:M}=m.useContext($s),[R]=m.useState(()=>r),N=Wh(),$=S?Math.min(S.durationInFrames,p.durationInFrames):p.durationInFrames,V=typeof r=="function",G=m.useMemo(()=>typeof r=="number"?r:new Array(Math.floor(Math.max(0,$+k))).fill(!0).map((X,J)=>Ks({frame:J+k,volume:r,mediaVolume:e,allowAmplificationDuringRender:!1})).join(","),[$,k,r,e]);m.useEffect(()=>{typeof r=="number"&&r!==R&&Jk(`Remotion: The ${i} with src ${n} has changed it's volume. Prefer the callback syntax for setting volume to get better timeline display: https://www.remotion.dev/docs/using-audio/#controlling-volume`)},[R,i,n,r]),m.useEffect(()=>{if(t.current){if(!n)throw new Error("No src passed");if(!(!Bt().isStudio&&window.process?.env?.NODE_ENV!=="test")&&h)return A({type:i,src:n,id:c,duration:$,from:0,parent:S?.id??null,displayName:a??Zk(n),rootId:v,volume:G,showInTimeline:!0,nonce:N,startMediaFrom:0-k,doesVolumeChange:V,loopDisplay:void 0,playbackRate:s,stack:u,premountDisplay:d}),()=>{M(c)}}},[C,$,c,S,n,A,v,M,p,G,V,N,t,i,k,s,a,u,h,d]),m.useEffect(()=>{const X={id:c,play:()=>{if(T)return Rc(t,i,g)}};return b.current.push(X),()=>{b.current=b.current.filter(J=>J.id!==c)}},[b,c,t,i,g,T])},Qk=()=>{const[r,e]=m.useState([]),[t,n]=m.useState([]),[i,s]=m.useState([]),a=m.useRef(!1),c=m.useCallback(d=>(e(g=>[...g,d]),{unblock:()=>{e(g=>{const p=g.filter(v=>v!==d);return p.length===g.length?g:p})}}),[]),u=m.useCallback(d=>(n(g=>[...g,d]),{remove:()=>{n(g=>g.filter(p=>p!==d))}}),[]),h=m.useCallback(d=>(s(g=>[...g,d]),{remove:()=>{s(g=>g.filter(p=>p!==d))}}),[]);return m.useEffect(()=>{r.length>0&&t.forEach(d=>d())},[r]),m.useEffect(()=>{r.length===0&&i.forEach(d=>d())},[r]),m.useMemo(()=>({addBlock:c,listenForBuffering:u,listenForResume:h,buffering:a}),[c,a,u,h])},Zs=Pe.createContext(null),u0=({children:r})=>{const e=Qk();return w.jsx(Zs.Provider,{value:e,children:r})},eO=r=>{const[e,t]=m.useState(r.buffering.current);return m.useEffect(()=>{const n=()=>{t(!0)},i=()=>{t(!1)};return r.listenForBuffering(n),r.listenForResume(i),()=>{r.listenForBuffering(()=>{}),r.listenForResume(()=>{})}},[r]),e},rd=()=>{const r=m.useContext(Zs),e=r?r.addBlock:null;return m.useMemo(()=>({delayPlayback:()=>{if(!e)throw new Error("Tried to enable the buffering state, but a Remotion context was not found. This API can only be called in a component that was passed to the Remotion Player or a <Composition>. Or you might have experienced a version mismatch - run `npx remotion versions` and ensure all packages have the same version. This error is thrown by the buffer state https://remotion.dev/docs/player/buffer-state");const{unblock:t}=e({id:String(Math.random())});return{unblock:t}}}),[e])},tO=({mediaRef:r,mediaType:e,onVariableFpsVideoDetected:t,pauseWhenBuffering:n})=>{const i=m.useRef(!1),{delayPlayback:s}=rd(),a=m.useCallback(c=>{if(e!=="video"||!n)return;const u=r.current;if(!u||!u.requestVideoFrameCallback)return;i.current=!0;const h=s(),d=()=>{h.unblock(),u.removeEventListener("ended",d,{once:!0}),u.removeEventListener("pause",d,{once:!0}),i.current=!1},g=()=>{d()};u.requestVideoFrameCallback((p,v)=>{Math.abs(v.mediaTime-c)>.5&&t(),d()}),u.addEventListener("ended",g,{once:!0}),u.addEventListener("pause",g,{once:!0}),u.addEventListener("canplay",g,{once:!0})},[s,r,e,t,n]);return m.useMemo(()=>({isBuffering:()=>i.current,bufferUntilFirstFrame:a}),[a])},rO=({element:r,shouldBuffer:e,isPremounting:t})=>{const n=rd(),[i,s]=m.useState(!1);return m.useEffect(()=>{let a=[];const{current:c}=r;if(!c||!e||t)return;const u=()=>{a.forEach(g=>g()),a=[],s(!1)},h=()=>{s(!0);const{unblock:g}=n.delayPlayback(),p=()=>{u(),d()},v=()=>{u(),d()};c.addEventListener("canplay",p,{once:!0}),a.push(()=>{c.removeEventListener("canplay",p)}),c.addEventListener("error",v,{once:!0}),a.push(()=>{c.removeEventListener("error",v)}),a.push(()=>{g()})},d=()=>{c.readyState<c.HAVE_FUTURE_DATA?(h(),navigator.userAgent.includes("Firefox/")||c.load()):(c.addEventListener("waiting",h),a.push(()=>{c.removeEventListener("waiting",h)}))};return d(),()=>{u()}},[n,r,t,e]),i},nO=({mediaRef:r,mediaType:e,lastSeek:t,onVariableFpsVideoDetected:n})=>{const i=m.useRef(null);return m.useEffect(()=>{const{current:s}=r;if(s)i.current=s.currentTime;else{i.current=null;return}if(e!=="video"){i.current=null;return}const a=s;if(!a.requestVideoFrameCallback)return;let c=()=>{};const u=()=>{if(!a)return;const h=a.requestVideoFrameCallback((d,g)=>{if(i.current!==null){const p=Math.abs(i.current-g.mediaTime),v=Math.abs(t.current===null?1/0:g.mediaTime-t.current);p>.5&&v>.5&&g.mediaTime>i.current&&n()}i.current=g.mediaTime,u()});c=()=>{a.cancelVideoFrameCallback(h),c=()=>{}}};return u(),()=>{c()}},[t,r,e,n]),i};function iO(r,e,t,n){const{extrapolateLeft:i,extrapolateRight:s,easing:a}=n;let c=r;const[u,h]=e,[d,g]=t;if(c<u){if(i==="identity")return c;if(i==="clamp")c=u;else if(i==="wrap"){const p=h-u;c=((c-u)%p+p)%p+u}}if(c>h){if(s==="identity")return c;if(s==="clamp")c=h;else if(s==="wrap"){const p=h-u;c=((c-u)%p+p)%p+u}}return d===g?d:(c=(c-u)/(h-u),c=a(c),c=c*(g-d)+d,c)}function sO(r,e){let t;for(t=1;t<e.length-1&&!(e[t]>=r);++t);return t-1}function oO(r){for(let e=1;e<r.length;++e)if(!(r[e]>r[e-1]))throw new Error(`inputRange must be strictly monotonically increasing but got [${r.join(",")}]`)}function h0(r,e){if(e.length<2)throw new Error(r+" must have at least 2 elements");for(const t of e){if(typeof t!="number")throw new Error(`${r} must contain only numbers`);if(!Number.isFinite(t))throw new Error(`${r} must contain only finite numbers, but got [${e.join(",")}]`)}}function d0(r,e,t,n){if(typeof r>"u")throw new Error("input can not be undefined");if(typeof e>"u")throw new Error("inputRange can not be undefined");if(typeof t>"u")throw new Error("outputRange can not be undefined");if(e.length!==t.length)throw new Error("inputRange ("+e.length+") and outputRange ("+t.length+") must have the same length");h0("inputRange",e),h0("outputRange",t),oO(e);const i=n?.easing??(u=>u);let s="extend";n?.extrapolateLeft!==void 0&&(s=n.extrapolateLeft);let a="extend";if(n?.extrapolateRight!==void 0&&(a=n.extrapolateRight),typeof r!="number")throw new TypeError("Cannot interpolate an input which is not a number");const c=sO(r,e);return iO(r,[e[c],e[c+1]],[t[c],t[c+1]],{easing:i,extrapolateLeft:s,extrapolateRight:a})}var f0=({frame:r,playbackRate:e,startFrom:t})=>d0(r,[-1,t,t+1],[-1,t,t+e]),g0=({fps:r,frame:e,playbackRate:t,startFrom:n})=>{const i=f0({frame:e,playbackRate:t,startFrom:n}),s=1e3/r;return i*s/1e3},p0=(r,e)=>Math.round(r/e*100)/100,jc=()=>{if(typeof window>"u")return!1;const r=/iP(ad|od|hone)/i.test(window.navigator.userAgent),e=/AppleWebKit/.test(window.navigator.userAgent);return r&&e},aO=r=>jc()&&r.startsWith("blob:"),nd=({actualFrom:r,fps:e})=>p0(Math.max(0,-r),e),id=({duration:r,fps:e})=>p0(r,e),cO=({actualSrc:r,actualFrom:e,duration:t,fps:n})=>{if(aO(r)||r.startsWith("data:")||!!new URL(r,(typeof window>"u"?null:window.location.href)??"http://localhost:3000").hash||!Number.isFinite(e))return r;const s=`${r}#t=${nd({actualFrom:e,fps:n})}`;return Number.isFinite(t)?`${s},${id({duration:t,fps:n})}`:s},lO=({prevStartFrom:r,newStartFrom:e,prevDuration:t,newDuration:n,fps:i})=>{const s=nd({actualFrom:r,fps:i}),a=nd({actualFrom:e,fps:i}),c=id({duration:t,fps:i}),u=id({duration:n,fps:i});return!(a<s||u>c)},uO=({actualSrc:r,actualFrom:e,duration:t,fps:n})=>{const i=m.useRef(e),s=m.useRef(t),a=m.useRef(r);return(!lO({prevStartFrom:i.current,newStartFrom:e,prevDuration:s.current,newDuration:t,fps:n})||r!==a.current)&&(i.current=e,s.current=t,a.current=r),cO({actualSrc:a.current,actualFrom:i.current,duration:s.current,fps:n})},m0={},hO=(r,e)=>{if(r===null||r.seekable.length===0||r.seekable.length>1||m0[r.src])return;const t={start:r.seekable.start(0),end:r.seekable.end(0)};if(t.start===0&&t.end===0){const n=[`The media ${r.src} cannot be seeked. This could be one of few reasons:`,"1) The media resource was replaced while the video is playing but it was not loaded yet.","2) The media does not support seeking.","3) The media was loaded with security headers prventing it from being included.","Please see https://remotion.dev/docs/non-seekable-media for assistance."].join(`
`);if(e==="console-error")console.error(n);else if(e==="console-warning")console.warn(`The media ${r.src} does not support seeking. The video will render fine, but may not play correctly in the Remotion Studio and in the <Player>. See https://remotion.dev/docs/non-seekable-media for an explanation.`);else throw new Error(n);m0[r.src]=!0}},sd=.45,od=(r,e)=>{if(!r.current)return;const t=jc()?Number(e.toFixed(1)):e;r.current.currentTime=t},v0=({mediaRef:r,src:e,mediaType:t,playbackRate:n,onlyWarnForMediaSeekingError:i,acceptableTimeshift:s,pauseWhenBuffering:a,isPremounting:c,debugSeeking:u,onAutoPlayError:h})=>{const{playbackRate:d}=m.useContext(gn),g=bi(),p=Gi(),[v]=Kh(),b=m.useContext(Zs),{fps:S}=yi(),C=qs(),T=m.useRef(null),k=m.useRef(null);if(!b)throw new Error("useMediaPlayback must be used inside a <BufferingContext>");const A=m.useRef({}),M=m.useCallback(()=>{e&&(u&&console.log(`Detected ${e} as a variable FPS video. Disabling buffering while seeking.`),A.current[e]=!0)},[u,e]),R=nO({mediaRef:r,mediaType:t,lastSeek:k,onVariableFpsVideoDetected:M}),N=g0({frame:g,playbackRate:n,startFrom:-C,fps:S}),$=rO({element:r,shouldBuffer:a,isPremounting:c}),{bufferUntilFirstFrame:V,isBuffering:G}=tO({mediaRef:r,mediaType:t,onVariableFpsVideoDetected:M,pauseWhenBuffering:a}),X=n*d,J=r.current?.duration?Math.min(r.current.duration,s??sd):s,q=eO(b);m.useEffect(()=>{if(!v){r.current?.pause();return}const Z=$||G();q&&!Z&&r.current?.pause()},[G,$,q,r,v]),m.useEffect(()=>{const Z=t==="audio"?"<Audio>":"<Video>";if(!r.current)throw new Error(`No ${t} ref found`);if(!e)throw new Error(`No 'src' attribute was passed to the ${Z} element.`);const ae=Math.max(0,X);r.current.playbackRate!==ae&&(r.current.playbackRate=ae);const{duration:ye}=r.current,ee=!Number.isNaN(ye)&&Number.isFinite(ye)?Math.min(ye,N):N,me=r.current.currentTime,fe=R.current??null,ie=A.current[e],P=Math.abs(ee-me),W=fe?Math.abs(ee-fe):null,ue=W&&!ie?W:P;if(u&&console.log({mediaTagTime:me,rvcTime:fe,shouldBeTime:ee,state:r.current.readyState,playing:!r.current.paused,isVariableFpsVideo:ie}),ue>J&&T.current!==ee){u&&console.log("Seeking",{shouldBeTime:ee,isTime:me,rvcTime:fe,timeShift:ue,isVariableFpsVideo:ie}),od(r,ee),k.current=ee,T.current=ee,v&&!ie&&(X>0&&V(ee),r.current.paused&&Rc(r,t,h)),i||hO(r.current,i?"console-warning":"console-error");return}const ge=v?.15:1e-5,we=Math.abs(r.current.currentTime-ee)>ge,be=$||G(),he=b.buffering.current&&!be;if(!v||he){we&&(od(r,ee),k.current=ee);return}(r.current.paused&&!r.current.ended||p===0)&&(we&&(od(r,ee),k.current=ee),Rc(r,t,h),ie||X>0&&V(ee))},[p,J,V,b.buffering,R,u,N,G,$,r,t,i,X,v,e,h])},y0=r=>{const[e,t]=m.useState(1);return m.useEffect(()=>{const n=r.current;if(!n)return;const i=()=>{t(n.volume)};return n.addEventListener("volumechange",i),()=>n.removeEventListener("volumechange",i)},[r]),m.useEffect(()=>{const n=r.current;n&&n.volume!==e&&t(n.volume)},[e,r]),e},dO=1e-5,ad=(r,e)=>Math.abs(r-e)<dO,b0=({volumePropFrame:r,actualVolume:e,volume:t,mediaVolume:n,mediaRef:i})=>{m.useEffect(()=>{const s=Ks({frame:r,volume:t,mediaVolume:n,allowAmplificationDuringRender:!1});!ad(s,e)&&i.current&&(i.current.volume=s)},[e,r,i,t,n])},cd=m.createContext({mediaMuted:!1,mediaVolume:1}),ld=m.createContext({setMediaMuted:()=>{throw new Error("default")},setMediaVolume:()=>{throw new Error("default")}}),ud=()=>{const{mediaVolume:r}=m.useContext(cd),{setMediaVolume:e}=m.useContext(ld);return m.useMemo(()=>[r,e],[r,e])},hd=()=>{const{mediaMuted:r}=m.useContext(cd),{setMediaMuted:e}=m.useContext(ld);return m.useMemo(()=>[r,e],[r,e])},w0="data:audio/mp3;base64,/+MYxAAJcAV8AAgAABn//////+/gQ5BAMA+D4Pg+BAQBAEAwD4Pg+D4EBAEAQDAPg++hYBH///hUFQVBUFREDQNHmf///////+MYxBUGkAGIMAAAAP/29Xt6lUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxDUAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",fO=(r,e)=>{const t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i]||r[t[i]]!==e[n[i]])return!1;return!0},gO=(r,e,t)=>r==="src"&&!t.startsWith("data:")&&!e.startsWith("data:")?new URL(t,window.origin).toString()!==new URL(e,window.origin).toString():t!==e,Lc=m.createContext(null),_0=({children:r,numberOfAudioTags:e,component:t})=>{const n=m.useRef([]),[i]=m.useState(e);if(e!==i)throw new Error("The number of shared audio tags has changed dynamically. Once you have set this property, you cannot change it afterwards.");const s=m.useMemo(()=>new Array(e).fill(!0).map(()=>({id:Math.random(),ref:m.createRef()})),[e]),a=m.useRef(new Array(e).fill(!1)),c=m.useCallback(()=>{s.forEach(({ref:b,id:S})=>{const C=n.current?.find(k=>k.id===S),{current:T}=b;if(T){if(C===void 0){T.src=w0;return}if(!C)throw new TypeError("Expected audio data to be there");Object.keys(C.props).forEach(k=>{gO(k,C.props[k],T[k])&&(T[k]=C.props[k])})}})},[s]),u=m.useCallback((b,S)=>{const C=n.current?.find(N=>N.audioId===S);if(C)return C;const T=a.current.findIndex(N=>N===!1);if(T===-1)throw new Error(`Tried to simultaneously mount ${e+1} <Audio /> tags at the same time. With the current settings, the maximum amount of <Audio /> tags is limited to ${e} at the same time. Remotion pre-mounts silent audio tags to help avoid browser autoplay restrictions. See https://remotion.dev/docs/player/autoplay#use-the-numberofsharedaudiotags-property for more information on how to increase this limit.`);const{id:k,ref:A}=s[T],M=[...a.current];M[T]=k,a.current=M;const R={props:b,id:k,el:A,audioId:S};return n.current?.push(R),c(),R},[e,s,c]),h=m.useCallback(b=>{const S=[...a.current],C=s.findIndex(T=>T.id===b);if(C===-1)throw new TypeError("Error occured in ");S[C]=!1,a.current=S,n.current=n.current?.filter(T=>T.id!==b),c()},[s,c]),d=m.useCallback(({aud:b,audioId:S,id:C})=>{let T=!1;n.current=n.current?.map(k=>k.id===C?fO(b,k.props)?k:(T=!0,{...k,props:b,audioId:S}):k),T&&c()},[c]),g=m.useCallback(()=>{s.forEach(b=>{Rc(b.ref,"audio",null)})},[s]),p=m.useMemo(()=>({registerAudio:u,unregisterAudio:h,updateAudio:d,playAllAudios:g,numberOfAudioTags:e}),[e,g,u,h,d]),v=m.useCallback(()=>{a.current=new Array(e).fill(!1),n.current=[],c()},[e,c]);return m.useEffect(()=>()=>{v()},[t,v]),w.jsxs(Lc.Provider,{value:p,children:[s.map(({id:b,ref:S})=>w.jsx("audio",{ref:S,preload:"metadata",src:w0},b)),r]})},pO=(r,e)=>{const t=m.useContext(Lc),[n]=m.useState(()=>t&&t.numberOfAudioTags>0?t.registerAudio(r,e):{el:Pe.createRef(),id:Math.random(),props:r,audioId:e}),i=Pe.useInsertionEffect??Pe.useLayoutEffect;return typeof document<"u"&&(i(()=>{t&&t.numberOfAudioTags>0&&t.updateAudio({id:n.id,aud:r,audioId:e})},[r,t,n.id,e]),i(()=>()=>{t&&t.numberOfAudioTags>0&&t.unregisterAudio(n.id)},[t,n.id])),n},mO=(r,e)=>{const[t]=m.useState(r.shouldPreMountAudioTags);if(r.shouldPreMountAudioTags!==t)throw new Error("Cannot change the behavior for pre-mounting audio tags dynamically.");const{volume:n,muted:i,playbackRate:s,shouldPreMountAudioTags:a,src:c,onDuration:u,acceptableTimeShiftInSeconds:h,_remotionInternalNeedsDurationCalculation:d,_remotionInternalNativeLoopPassed:g,_remotionInternalStack:p,_remotionDebugSeeking:v,allowAmplificationDuringRender:b,name:S,pauseWhenBuffering:C,showInTimeline:T,loopVolumeCurveBehavior:k,stack:A,...M}=r,[R]=ud(),[N]=hd(),$=na(k??"repeat"),{hidden:V}=m.useContext(ta);if(!c)throw new TypeError("No 'src' was passed to <Audio>.");const G=Gs(c),X=m.useContext(lr),[J]=m.useState(()=>String(Math.random())),q=V[J]??!1,Z=Ks({frame:$,volume:n,mediaVolume:R,allowAmplificationDuringRender:!1}),ae=m.useMemo(()=>({muted:i||N||q||Z<=0,src:G,loop:g,...M}),[g,q,N,i,M,G,Z]),ye=m.useMemo(()=>`audio-${Zi(c??"")}-${X?.relativeFrom}-${X?.cumulatedFrom}-${X?.durationInFrames}-muted:${r.muted}-loop:${r.loop}`,[c,X?.relativeFrom,X?.cumulatedFrom,X?.durationInFrames,r.muted,r.loop]),ee=pO(ae,ye).el,me=y0(ee);b0({volumePropFrame:$,actualVolume:me,volume:n,mediaVolume:R,mediaRef:ee}),l0({volume:n,mediaVolume:R,mediaRef:ee,src:c,mediaType:"audio",playbackRate:s??1,displayName:S??null,id:J,stack:p,showInTimeline:T,premountDisplay:null,onAutoPlayError:null}),v0({mediaRef:ee,src:c,mediaType:"audio",playbackRate:s??1,onlyWarnForMediaSeekingError:!1,acceptableTimeshift:h??sd,isPremounting:!!X?.premounting,pauseWhenBuffering:C,debugSeeking:v,onAutoPlayError:null}),m.useImperativeHandle(e,()=>ee.current,[ee]);const fe=m.useRef();return fe.current=u,m.useEffect(()=>{const{current:ie}=ee;if(!ie)return;if(ie.duration){fe.current?.(ie.src,ie.duration);return}const P=()=>{fe.current?.(ie.src,ie.duration)};return ie.addEventListener("loadedmetadata",P),()=>{ie.removeEventListener("loadedmetadata",P)}},[ee,c]),t?null:w.jsx("audio",{ref:ee,preload:"metadata",...ae})},vO=m.forwardRef(mO);typeof window<"u"&&(window.remotion_renderReady=!1);var Fc=[];typeof window<"u"&&(window.remotion_delayRenderTimeouts={});var yO="The delayRender was called:",bO="Retries left: ",wO="- Rendering the frame will be retried.",S0=3e4,wi=(r,e)=>{if(typeof r!="string"&&typeof r<"u")throw new Error("The label parameter of delayRender() must be a string or undefined, got: "+JSON.stringify(r));const t=Math.random();Fc.push(t);const n=Error().stack?.replace(/^Error/g,"")??"";if(Bt().isRendering){const i=(e?.timeoutInMilliseconds??(typeof window>"u"?S0:window.remotion_puppeteerTimeout??S0))-2e3;if(typeof window<"u"){const s=(e?.retries??0)-(window.remotion_attempt-1);window.remotion_delayRenderTimeouts[t]={label:r??null,timeout:setTimeout(()=>{const a=["A delayRender()",r?`"${r}"`:null,`was called but not cleared after ${i}ms. See https://remotion.dev/docs/timeout for help.`,s>0?bO+s:null,s>0?wO:null,yO,n].filter(Tc).join(" ");ra(Error(a))},i)}}}return typeof window<"u"&&(window.remotion_renderReady=!1),t},Ot=r=>{if(typeof r>"u")throw new TypeError("The continueRender() method must be called with a parameter that is the return value of delayRender(). No value was passed.");if(typeof r!="number")throw new TypeError("The parameter passed into continueRender() must be the return value of delayRender() which is a number. Got: "+JSON.stringify(r));Fc=Fc.filter(e=>e===r?(Bt().isRendering&&(clearTimeout(window.remotion_delayRenderTimeouts[r].timeout),delete window.remotion_delayRenderTimeouts[r]),!1):!0),Fc.length===0&&typeof window<"u"&&(window.remotion_renderReady=!0)},_O=(r,e)=>{const t=m.useRef(null),{volume:n,playbackRate:i,allowAmplificationDuringRender:s,onDuration:a,toneFrequency:c,_remotionInternalNeedsDurationCalculation:u,_remotionInternalNativeLoopPassed:h,acceptableTimeShiftInSeconds:d,name:g,onError:p,delayRenderRetries:v,delayRenderTimeoutInMilliseconds:b,loopVolumeCurveBehavior:S,pauseWhenBuffering:C,...T}=r,k=Gi(),A=na(S??"repeat"),M=bi(),R=m.useContext(lr),{registerRenderAsset:N,unregisterRenderAsset:$}=m.useContext(Ki),V=m.useMemo(()=>`audio-${Zi(r.src??"")}-${R?.relativeFrom}-${R?.cumulatedFrom}-${R?.durationInFrames}`,[r.src,R?.relativeFrom,R?.cumulatedFrom,R?.durationInFrames]),G=Ks({volume:n,frame:A,mediaVolume:1,allowAmplificationDuringRender:s??!1});m.useImperativeHandle(e,()=>t.current,[]),m.useEffect(()=>{if(!r.src)throw new Error("No src passed");if(window.remotion_audioEnabled&&!r.muted&&!(G<=0))return N({type:"audio",src:zn(r.src),id:V,frame:k,volume:G,mediaFrame:M,playbackRate:r.playbackRate??1,allowAmplificationDuringRender:s??!1,toneFrequency:c??null,audioStartFrame:Math.max(0,-(R?.relativeFrom??0))}),()=>$(V)},[r.muted,r.src,N,k,V,$,G,A,M,i,r.playbackRate,s,c,R?.relativeFrom]);const{src:X}=r,J=e||u;return m.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test"||!J)return;const q=wi("Loading <Audio> duration with src="+X,{retries:v??void 0,timeoutInMilliseconds:b??void 0}),{current:Z}=t,ae=()=>{Z?.duration&&a(Z.src,Z.duration),Ot(q)};return Z?.duration?(a(Z.src,Z.duration),Ot(q)):Z?.addEventListener("loadedmetadata",ae,{once:!0}),()=>{Z?.removeEventListener("loadedmetadata",ae),Ot(q)}},[X,a,J,v,b]),J?w.jsx("audio",{ref:t,...T}):null},SO=m.forwardRef(_O),xO=(r,e)=>{const t=m.useContext(Lc),{startFrom:n,endAt:i,name:s,stack:a,pauseWhenBuffering:c,showInTimeline:u,_remotionDebugSeeking:h,...d}=r,{loop:g,...p}=r,{fps:v}=yi(),b=Bt(),{durations:S,setDurations:C}=m.useContext(td);if(typeof r.src!="string")throw new TypeError(`The \`<Audio>\` tag requires a string for \`src\`, but got ${JSON.stringify(r.src)} instead.`);const T=Gs(r.src),k=m.useCallback(R=>{console.log(R.currentTarget.error);const N=`Could not play audio with src ${T}: ${R.currentTarget.error}. See https://remotion.dev/docs/media-playback-error for help.`;g?ra(new Error(N)):console.warn(N)},[g,T]),A=m.useCallback((R,N)=>{C({type:"got-duration",durationInSeconds:N,src:R})},[C]),M=S[zn(T)]??S[zn(r.src)];if(g&&M!==void 0){if(!Number.isFinite(M))return w.jsx(ia,{...p,ref:e,_remotionInternalNativeLoopPassed:!0});const R=M*v;return w.jsx(Pc,{layout:"none",durationInFrames:r0({endAt:i,mediaDuration:R,playbackRate:r.playbackRate??1,startFrom:n}),children:w.jsx(ia,{...p,ref:e,_remotionInternalNativeLoopPassed:!0})})}if(typeof n<"u"||typeof i<"u"){ed(n,i);const R=n??0,N=i??1/0;return w.jsx(Mn,{layout:"none",from:0-R,showInTimeline:!1,durationInFrames:N,name:s,children:w.jsx(ia,{_remotionInternalNeedsDurationCalculation:!!g,pauseWhenBuffering:c??!1,...d,ref:e})})}return Qh(r,"Audio"),b.isRendering?w.jsx(SO,{onDuration:A,...r,ref:e,onError:k,_remotionInternalNeedsDurationCalculation:!!g}):w.jsx(vO,{_remotionInternalNativeLoopPassed:r._remotionInternalNativeLoopPassed??!1,_remotionDebugSeeking:h??!1,_remotionInternalStack:a??null,shouldPreMountAudioTags:t!==null&&t.numberOfAudioTags>0,...r,ref:e,onError:k,onDuration:A,pauseWhenBuffering:c??!1,_remotionInternalNeedsDurationCalculation:!!g,showInTimeline:u??!0})},ia=m.forwardRef(xO);Qo(ia);var CO=m.createContext({folderName:null,parentName:null}),TO={transform:"rotate(90deg)"},x0=40,EO={color:"white",fontSize:14,fontFamily:"sans-serif"},kO={justifyContent:"center",alignItems:"center"},OO=()=>w.jsxs(ea,{style:kO,id:"remotion-comp-loading",children:[w.jsx("style",{type:"text/css",children:`
				@keyframes anim {
					from {
						opacity: 0
					}
					to {
						opacity: 1
					}
				}
				#remotion-comp-loading {
					animation: anim 2s;
					animation-fill-mode: forwards;
				}
			`}),w.jsx("svg",{width:x0,height:x0,viewBox:"-100 -100 400 400",style:TO,children:w.jsx("path",{fill:"#555",stroke:"#555",strokeWidth:"100",strokeLinejoin:"round",d:"M 2 172 a 196 100 0 0 0 195 5 A 196 240 0 0 0 100 2.259 A 196 240 0 0 0 2 172 z"})}),w.jsxs("p",{style:EO,children:["Resolving ","<Suspense>","..."]})]}),Fr=null,dd=()=>{if(!Fr){if(typeof document>"u")throw new Error("Tried to call an API that only works in the browser from outside the browser");Fr=document.createElement("div"),Fr.style.position="absolute",Fr.style.top="0px",Fr.style.left="0px",Fr.style.right="0px",Fr.style.bottom="0px",Fr.style.width="100%",Fr.style.height="100%",Fr.style.display="flex",Fr.style.flexDirection="column";const r=document.createElement("div");r.style.position="fixed",r.style.top="-999999px",r.appendChild(Fr),document.body.appendChild(r)}return Fr},C0=r=>m.useMemo(()=>{if("lazyComponent"in r&&typeof r.lazyComponent<"u")return Pe.lazy(r.lazyComponent);if("component"in r)return typeof document>"u"?r.component:Pe.lazy(()=>Promise.resolve({default:r.component}));throw new Error("You must pass either 'component' or 'lazyComponent'")},[r.component,r.lazyComponent]),T0=()=>/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g,E0=r=>r.match(T0()),AO=r=>{if(!E0(r))throw new Error(`Composition id can only contain a-z, A-Z, 0-9, CJK characters and -. You passed ${r}`)},IO=`Composition ID must match ${String(T0())}`,MO=(r,e,t)=>{if(r){if(typeof r!="object")throw new Error(`"${e}" must be an object, but you passed a value of type ${typeof r}`);if(Array.isArray(r))throw new Error(`"${e}" must be an object, an array was passed ${t?`for composition "${t}"`:""}`)}},PO=()=>(m.useEffect(()=>{const r=wi("Waiting for Root component to unsuspend");return()=>Ot(r)},[]),null),k0=({width:r,height:e,fps:t,durationInFrames:n,id:i,defaultProps:s,schema:a,...c})=>{const{registerComposition:u,unregisterComposition:h}=m.useContext(vi),d=Ic(),g=C0(c),p=Wh(),v=zh(),b=Bt();if(m.useContext(qi))throw v?new Error("<Composition> was mounted inside the `component` that was passed to the <Player>. See https://remotion.dev/docs/wrong-composition-mount for help."):new Error("<Composition> mounted inside another composition. See https://remotion.dev/docs/wrong-composition-mount for help.");const{folderName:C,parentName:T}=m.useContext(CO);m.useEffect(()=>{if(!i)throw new Error("No id for composition passed.");return AO(i),MO(s,"defaultProps",i),u({durationInFrames:n??void 0,fps:t??void 0,height:e??void 0,width:r??void 0,id:i,folderName:C,component:g,defaultProps:Xi(s??{}),nonce:p,parentFolderName:T,schema:a??null,calculateMetadata:c.calculateMetadata??null}),()=>{h(i)}},[n,t,e,g,i,C,s,u,h,r,p,T,a,c.calculateMetadata]);const k=Gh(i);if(b.isStudio&&d&&d.component===g){const A=g;return k===null||k.type!=="success"?null:eh.createPortal(w.jsx(Zh,{children:w.jsx(m.Suspense,{fallback:w.jsx(OO,{}),children:w.jsx(A,{...k.result.props??{}})})}),dd())}if(b.isRendering&&d&&d.component===g){const A=g;return k===null||k.type!=="success"?null:eh.createPortal(w.jsx(Zh,{children:w.jsx(m.Suspense,{fallback:w.jsx(PO,{}),children:w.jsx(A,{...k.result.props??{}})})}),dd())}return null},O0=Pe.createRef(),DO=({children:r,numberOfAudioTags:e})=>{const[t,n]=m.useState([]),i=m.useRef(t),[s,a]=m.useState([]),[c,u]=m.useState(null),[h,d]=m.useState(null),g=m.useCallback(A=>{n(M=>{const R=A(M);return i.current=R,R})},[]),p=m.useCallback(A=>{g(M=>{if(M.find(N=>N.id===A.id))throw new Error(`Multiple composition with id ${A.id} are registered.`);return[...M,A].slice().sort((N,$)=>N.nonce-$.nonce)})},[g]),v=m.useCallback(A=>{n(M=>M.filter(R=>R.id!==A))},[]),b=m.useCallback((A,M)=>{a(R=>[...R,{name:A,parent:M}])},[]),S=m.useCallback((A,M)=>{a(R=>R.filter(N=>!(N.name===A&&N.parent===M)))},[]);m.useImperativeHandle(O0,()=>({getCompositions:()=>i.current}),[]);const C=t.find(A=>c?.type==="composition"?A.id===c.compositionId:null),T=m.useCallback((A,M)=>{n(R=>R.map($=>$.id===A?{...$,defaultProps:M}:$))},[]),k=m.useMemo(()=>({compositions:t,registerComposition:p,unregisterComposition:v,folders:s,registerFolder:b,unregisterFolder:S,currentCompositionMetadata:h,setCurrentCompositionMetadata:d,canvasContent:c,setCanvasContent:u,updateCompositionDefaultProps:T}),[t,p,v,s,b,S,h,c,T]);return w.jsx(vi.Provider,{value:k,children:w.jsx(Ek,{children:w.jsx(Yk,{children:w.jsx(Kv,{children:w.jsx(_0,{numberOfAudioTags:e,component:C?.component??null,children:r})})})})})},RO=({onLoad:r,onError:e,delayRenderRetries:t,delayRenderTimeoutInMilliseconds:n,...i},s)=>{const[a]=m.useState(()=>wi(`Loading <IFrame> with source ${i.src}`,{retries:t??void 0,timeoutInMilliseconds:n??void 0})),c=m.useCallback(h=>{Ot(a),r?.(h)},[a,r]),u=m.useCallback(h=>{Ot(a),e?e(h):console.error("Error loading iframe:",h,"Handle the event using the onError() prop to make this message disappear.")},[a,e]);return w.jsx("iframe",{...i,ref:s,onError:u,onLoad:c})};m.forwardRef(RO);function jO(r){return 1e3*2**(r-1)}var LO=({onError:r,maxRetries:e=2,src:t,pauseWhenLoading:n,delayRenderRetries:i,delayRenderTimeoutInMilliseconds:s,onImageFrame:a,...c},u)=>{const h=m.useRef(null),d=m.useRef({}),{delayPlayback:g}=rd(),p=m.useContext(lr);if(!t)throw new Error('No "src" prop was passed to <Img>.');m.useImperativeHandle(u,()=>h.current,[]);const v=Gs(t),b=m.useCallback(C=>{if(!h.current)return;const T=h.current.src;setTimeout(()=>{if(!h.current)return;const k=h.current?.src;k===T&&(h.current.removeAttribute("src"),h.current.setAttribute("src",k))},C)},[]),S=m.useCallback(C=>{if(d.current){if(d.current[h.current?.src]=(d.current[h.current?.src]??0)+1,r&&(d.current[h.current?.src]??0)>e){r(C);return}if((d.current[h.current?.src]??0)<=e){const T=jO(d.current[h.current?.src]??0);console.warn(`Could not load image with source ${h.current?.src}, retrying again in ${T}ms`),b(T);return}ra("Error loading image with src: "+h.current?.src)}},[e,r,b]);if(typeof window<"u"){const C=!!p?.premounting;m.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test"){h.current&&(h.current.src=v);return}const T=wi("Loading <Img> with src="+v,{retries:i??void 0,timeoutInMilliseconds:s??void 0}),k=n&&!C?g().unblock:()=>{},{current:A}=h;let M=!1;const R=()=>{M||((d.current[h.current?.src]??0)>0&&(delete d.current[h.current?.src],console.info(`Retry successful - ${h.current?.src} is now loaded`)),A&&(A.src=v,a?.(A)),k(),Ot(T))},N=new Image;return N.src=v,N.decode().then(R).catch($=>{console.warn($),N.complete?R():N.addEventListener("load",R)}),()=>{M=!0,N.removeEventListener("load",R),k(),Ot(T)}},[v,g,i,s,n,C,a])}return w.jsx("img",{...c,ref:h,onError:S})},A0=m.forwardRef(LO),I0={};Mv(I0,{makeDefaultPreviewCSS:()=>NO,injectCSS:()=>FO,OFFTHREAD_VIDEO_CLASS_NAME:()=>Nc});var M0={},FO=r=>{if(typeof document>"u"||M0[r])return;const e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode(r)),e.prepend(t),M0[r]=!0},Nc="__remotion_offthreadvideo",NO=(r,e)=>r?`
    ${r} * {
      box-sizing: border-box;
    }
    ${r} *:-webkit-full-screen {
      width: 100%;
      height: 100%;
    }
    ${r} .${Nc} {
      object-fit: contain;
    }
  `:`
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
	    background-color: ${e};
    }
    .${Nc} {
      object-fit: contain;
    }
    `,P0="__remotion-studio-container",BO=()=>document.getElementById(P0),VO=null,fd=[],HO=()=>VO,zO=r=>(fd.push(r),()=>{fd=fd.filter(e=>e!==r)}),WO=({children:r,numberOfAudioTags:e})=>{const[t]=m.useState(()=>String(Zi(null))),[n,i]=m.useState(()=>Jv()),[s,a]=m.useState(!1),c=m.useRef(!1),[u,h]=m.useState(0),[d,g]=m.useState(1),p=m.useRef([]);typeof window<"u"&&m.useLayoutEffect(()=>{window.remotion_setFrame=(C,T,k)=>{window.remotion_attempt=k;const A=wi(`Setting the current frame to ${C}`);let M=!0;i(R=>(R[T]??window.remotion_initialFrame)===C?(M=!1,R):{...R,[T]:C}),M?requestAnimationFrame(()=>Ot(A)):Ot(A)},window.remotion_isPlayer=!1},[]);const v=m.useMemo(()=>({frame:n,playing:s,imperativePlaying:c,rootId:t,playbackRate:d,setPlaybackRate:g,audioAndVideoTags:p}),[n,d,s,t]),b=m.useMemo(()=>({setFrame:i,setPlaying:a}),[]),S=m.useMemo(()=>{let C=0;return{getNonce:()=>C++,fastRefreshes:u}},[u]);return m.useEffect(()=>{typeof __webpack_module__<"u"&&__webpack_module__.hot&&__webpack_module__.hot.addStatusHandler(C=>{C==="idle"&&h(T=>T+1)})},[]),w.jsx(Ys.Provider,{value:S,children:w.jsx(gn.Provider,{value:v,children:w.jsx(Xs.Provider,{value:b,children:w.jsx(Bv,{children:w.jsx(s0,{children:w.jsx(DO,{numberOfAudioTags:e,children:w.jsx(o0,{children:w.jsx(u0,{children:r})})})})})})})})},UO=()=>{if(Bt().isRendering){const r=window.remotion_envVariables;return r?{...JSON.parse(r),NODE_ENV:"production"}:{}}return{NODE_ENV:"production"}},$O=()=>{const r=UO();window.process||(window.process={}),window.process.env||(window.process.env={}),Object.keys(r).forEach(e=>{window.process.env[e]=r[e]})},YO=Pe.createContext(null),XO=m.createContext({setSize:()=>{},size:{size:"auto",translation:{x:0,y:0}}}),GO=({canvasSize:r,compositionHeight:e,compositionWidth:t,previewSize:n})=>{const i=r.height/e,s=r.width/t,a=Math.min(i,s);return n==="auto"?a:Number(n)},qO="remotion_staticFilesChanged";function KO(){const r=Pe.useContext(vi),e=Pe.useContext(gn),t=Pe.useContext(Xs),n=Pe.useContext(lr),i=Pe.useContext(Ys),s=Pe.useContext(qi),a=Pe.useContext(Dc),c=Pe.useContext(Ac),u=Pe.useContext(Ki),h=Pe.useContext($s),d=Pe.useContext(Zs);return m.useMemo(()=>({compositionManagerCtx:r,timelineContext:e,setTimelineContext:t,sequenceContext:n,nonceContext:i,canUseRemotionHooksContext:s,preloadContext:a,resolveCompositionContext:c,renderAssetManagerContext:u,sequenceManagerContext:h,bufferManagerContext:d}),[r,i,n,t,e,s,a,c,u,h,d])}var ZO=r=>{const{children:e,contexts:t}=r;return w.jsx(qi.Provider,{value:t.canUseRemotionHooksContext,children:w.jsx(Ys.Provider,{value:t.nonceContext,children:w.jsx(Dc.Provider,{value:t.preloadContext,children:w.jsx(vi.Provider,{value:t.compositionManagerCtx,children:w.jsx($s.Provider,{value:t.sequenceManagerContext,children:w.jsx(Ki.Provider,{value:t.renderAssetManagerContext,children:w.jsx(Ac.Provider,{value:t.resolveCompositionContext,children:w.jsx(gn.Provider,{value:t.timelineContext,children:w.jsx(Xs.Provider,{value:t.setTimelineContext,children:w.jsx(lr.Provider,{value:t.sequenceContext,children:w.jsx(Zs.Provider,{value:t.bufferManagerContext,children:e})})})})})})})})})})})},Re={useUnsafeVideoConfig:Mc,Timeline:Fv,CompositionManager:vi,SequenceManager:$s,SequenceVisibilityToggleContext:ta,RemotionRoot:WO,useVideo:Ic,getRoot:HO,useMediaVolumeState:ud,useMediaMutedState:hd,useLazyComponent:C0,truthy:Tc,SequenceContext:lr,useRemotionContexts:KO,RemotionContextProvider:ZO,CSSUtils:I0,setupEnvVariables:$O,MediaVolumeContext:cd,SetMediaVolumeContext:ld,getRemotionEnvironment:Bt,SharedAudioContext:Lc,SharedAudioContextProvider:_0,invalidCompositionErrorMessage:IO,isCompositionIdValid:E0,getPreviewDomElement:BO,compositionsRef:O0,portalNode:dd,waitForRoot:zO,CanUseRemotionHooksProvider:Zh,CanUseRemotionHooks:qi,PrefetchProvider:s0,DurationsContextProvider:o0,IsPlayerContextProvider:xk,useIsPlayer:zh,EditorPropsProvider:Bv,EditorPropsContext:kc,usePreload:Gs,NonceContext:Ys,resolveVideoConfig:Xv,useResolvedVideoConfig:Gh,resolveCompositionsRef:Gv,ResolveCompositionConfig:Kv,REMOTION_STUDIO_CONTAINER_ELEMENT:P0,RenderAssetManager:Ki,persistCurrentFrame:Zv,useTimelineSetFrame:e0,isIosSafari:jc,WATCH_REMOTION_STATIC_FILES:qO,addSequenceStackTraces:Qo,useMediaStartsAt:qs,BufferingProvider:u0,BufferingContextReact:Zs,enableSequenceStackTraces:jv,CurrentScaleContext:YO,PreviewSizeContext:XO,calculateScale:GO,editorPropsProviderRef:Nv,PROPS_UPDATED_EXTERNALLY:Fk,validateRenderAsset:t0},JO=({src:r,transparent:e,currentTime:t,toneMapped:n})=>`http://localhost:${window.remotion_proxyPort}/proxy?src=${encodeURIComponent(zn(r))}&time=${encodeURIComponent(t)}&transparent=${String(e)}&toneMapped=${String(n)}`,D0=m.createContext(!1),QO=({children:r})=>w.jsx(D0.Provider,{value:!1,children:r}),eA=()=>{if(!Pe.useContext(D0))throw new Error("This component must be inside a <Series /> component.")},tA=({children:r},e)=>(eA(),w.jsx(QO,{children:r})),rA=m.forwardRef(tA);Qo(rA);var nA=({onError:r,volume:e,playbackRate:t,src:n,muted:i,allowAmplificationDuringRender:s,transparent:a=!1,toneMapped:c=!0,toneFrequency:u,name:h,loopVolumeCurveBehavior:d,delayRenderRetries:g,delayRenderTimeoutInMilliseconds:p,onVideoFrame:v,...b})=>{const S=Gi(),C=bi(),T=na(d??"repeat"),k=Mc(),A=m.useContext(lr),M=qs(),{registerRenderAsset:R,unregisterRenderAsset:N}=m.useContext(Ki);if(!n)throw new TypeError("No `src` was passed to <OffthreadVideo>.");const $=m.useMemo(()=>`offthreadvideo-${Zi(n??"")}-${A?.cumulatedFrom}-${A?.relativeFrom}-${A?.durationInFrames}`,[n,A?.cumulatedFrom,A?.relativeFrom,A?.durationInFrames]);if(!k)throw new Error("No video config found");const V=Ks({volume:e,frame:T,mediaVolume:1,allowAmplificationDuringRender:s??!1});m.useEffect(()=>{if(!n)throw new Error("No src passed");if(window.remotion_audioEnabled&&!i&&!(V<=0))return R({type:"video",src:zn(n),id:$,frame:S,volume:V,mediaFrame:C,playbackRate:t??1,allowAmplificationDuringRender:s??!1,toneFrequency:u??null,audioStartFrame:Math.max(0,-(A?.relativeFrom??0))}),()=>N($)},[i,n,R,$,N,V,C,S,t,s,u,A?.relativeFrom]);const G=m.useMemo(()=>f0({frame:C,playbackRate:t||1,startFrom:-M})/k.fps,[C,M,t,k.fps]),X=m.useMemo(()=>JO({src:n,currentTime:G,transparent:a,toneMapped:c}),[c,G,n,a]),[J,q]=m.useState(null);m.useLayoutEffect(()=>{if(!window.remotion_videoEnabled)return;const ee=[];q(null);const me=new AbortController,fe=wi(`Fetching ${X} from server`,{retries:g??void 0,timeoutInMilliseconds:p??void 0});return(async()=>{try{const P=await fetch(X,{signal:me.signal});if(P.status!==200){if(P.status===500){const ge=await P.json();if(ge.error){const we=ge.error.replace(/^Error: /,"");throw new Error(we)}}throw new Error(`Server returned status ${P.status} while fetching ${X}`)}const W=await P.blob(),ue=URL.createObjectURL(W);ee.push(()=>URL.revokeObjectURL(ue)),q({src:ue,handle:fe})}catch(P){if(P.message.includes("aborted")){Ot(fe);return}if(me.signal.aborted){Ot(fe);return}P.message.includes("Failed to fetch")&&(P=new Error(`Failed to fetch ${X}. This could be caused by Chrome rejecting the request because the disk space is low. Consider increasing the disk size of your environment.`,{cause:P})),r?r(P):ra(P)}})(),ee.push(()=>{me.signal.aborted||me.abort()}),()=>{ee.forEach(P=>P())}},[X,g,p,r]);const Z=m.useCallback(()=>{r?r?.(new Error("Failed to load image with src "+J)):ra("Failed to load image with src "+J)},[J,r]),ae=m.useMemo(()=>[Nc,b.className].filter(Tc).join(" "),[b.className]),ye=m.useCallback(ee=>{v&&v(ee)},[v]);return!J||!window.remotion_videoEnabled?null:(Ot(J.handle),w.jsx(A0,{src:J.src,className:ae,delayRenderRetries:g,delayRenderTimeoutInMilliseconds:p,onImageFrame:ye,...b,onError:Z}))},iA=({ref:r,onVideoFrame:e})=>{m.useEffect(()=>{const{current:t}=r;if(!t||!e)return;let n=0;const i=()=>{r.current&&(e(r.current),n=r.current.requestVideoFrameCallback(i))};return i(),()=>{t.cancelVideoFrameCallback(n)}},[e,r])},sA=(r,e)=>{const t=m.useRef(null),{volume:n,muted:i,playbackRate:s,onlyWarnForMediaSeekingError:a,src:c,onDuration:u,acceptableTimeShift:h,acceptableTimeShiftInSeconds:d,toneFrequency:g,name:p,_remotionInternalNativeLoopPassed:v,_remotionInternalStack:b,_remotionDebugSeeking:S,style:C,pauseWhenBuffering:T,showInTimeline:k,loopVolumeCurveBehavior:A,onError:M,onAutoPlayError:R,onVideoFrame:N,crossOrigin:$,...V}=r,G=na(A??"repeat"),{fps:X,durationInFrames:J}=yi(),q=m.useContext(lr),{hidden:Z}=m.useContext(ta),[ae]=m.useState(()=>String(Math.random())),ye=Z[ae]??!1;if(typeof h<"u")throw new Error("acceptableTimeShift has been removed. Use acceptableTimeShiftInSeconds instead.");const ee=y0(t),[me]=ud(),[fe]=hd();l0({mediaRef:t,volume:n,mediaVolume:me,mediaType:"video",src:c,playbackRate:r.playbackRate??1,displayName:p??null,id:ae,stack:b,showInTimeline:k,premountDisplay:null,onAutoPlayError:R??null}),b0({volumePropFrame:G,actualVolume:ee,volume:n,mediaVolume:me,mediaRef:t}),v0({mediaRef:t,src:c,mediaType:"video",playbackRate:r.playbackRate??1,onlyWarnForMediaSeekingError:a,acceptableTimeshift:d??sd,isPremounting:!!q?.premounting,pauseWhenBuffering:T,debugSeeking:S,onAutoPlayError:R??null});const ie=q?q.relativeFrom:0,P=q?Math.min(q.durationInFrames,J):J,W=uO({actualSrc:Gs(c),actualFrom:ie,duration:P,fps:X});m.useImperativeHandle(e,()=>t.current,[]),m.useEffect(()=>{const{current:be}=t;if(!be)return;const he=()=>{if(be.error){if(console.error("Error occurred in video",be?.error),M){const qe=new Error(`Code ${be.error.code}: ${be.error.message}`);M(qe);return}throw new Error(`The browser threw an error while playing the video ${c}: Code ${be.error.code} - ${be?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else{if(M){const qe=new Error(`The browser threw an error while playing the video ${c}`);M(qe);return}throw new Error("The browser threw an error while playing the video")}};return be.addEventListener("error",he,{once:!0}),()=>{be.removeEventListener("error",he)}},[M,c]);const ue=m.useRef();ue.current=u,iA({ref:t,onVideoFrame:N}),m.useEffect(()=>{const{current:be}=t;if(!be)return;if(be.duration){ue.current?.(c,be.duration);return}const he=()=>{ue.current?.(c,be.duration)};return be.addEventListener("loadedmetadata",he),()=>{be.removeEventListener("loadedmetadata",he)}},[c]),m.useEffect(()=>{const{current:be}=t;be&&(jc()?be.preload="metadata":be.preload="auto")},[]);const ge=m.useMemo(()=>({...C,opacity:ye?0:C?.opacity??1}),[ye,C]),we=$??(N?"anonymous":void 0);return w.jsx("video",{ref:t,muted:i||fe,playsInline:!0,src:W,loop:v,style:ge,disableRemotePlayback:!0,crossOrigin:we,...V})},R0=m.forwardRef(sA),j0=r=>{const{startFrom:e,endAt:t,name:n,pauseWhenBuffering:i,stack:s,showInTimeline:a,...c}=r,u=Bt(),h=m.useCallback(()=>{},[]);if(typeof r.src!="string")throw new TypeError(`The \`<OffthreadVideo>\` tag requires a string for \`src\`, but got ${JSON.stringify(r.src)} instead.`);if(r.imageFormat)throw new TypeError("The `<OffthreadVideo>` tag does no longer accept `imageFormat`. Use the `transparent` prop if you want to render a transparent video.");if(typeof e<"u"||typeof t<"u"){ed(e,t);const T=e??0,k=t??1/0;return w.jsx(Mn,{layout:"none",from:0-T,showInTimeline:!1,durationInFrames:k,name:n,children:w.jsx(j0,{pauseWhenBuffering:i??!1,...c})})}if(Qh(r,"Video"),u.isRendering)return w.jsx(nA,{...c});const{transparent:d,toneMapped:g,_remotionDebugSeeking:p,onAutoPlayError:v,onVideoFrame:b,crossOrigin:S,...C}=c;return w.jsx(R0,{_remotionInternalStack:s??null,_remotionInternalNativeLoopPassed:!1,_remotionDebugSeeking:p??!1,onDuration:h,onlyWarnForMediaSeekingError:!0,pauseWhenBuffering:i??!1,showInTimeline:a??!0,onAutoPlayError:v??void 0,onVideoFrame:b??null,crossOrigin:S,...C})},L0=r=>Math.round(r*1e5)/1e5,gd=(r,e)=>{if(ad(r.currentTime,e))return{wait:Promise.resolve(e),cancel:()=>{}};r.currentTime=e;let t,n=null;const i=new Promise(a=>{t=r.requestVideoFrameCallback((c,u)=>{const h=u.expectedDisplayTime-c;if(h<=0){a(u.mediaTime);return}setTimeout(()=>{a(u.mediaTime)},h+150)})}),s=new Promise(a=>{const c=()=>{a()};r.addEventListener("seeked",c,{once:!0}),n=()=>{r.removeEventListener("seeked",c)}});return{wait:Promise.all([i,s]).then(([a])=>a),cancel:()=>{n?.(),r.cancelVideoFrameCallback(t)}}},oA=(r,e,t)=>{const n=1/t/2;let i=()=>{};return Number.isFinite(r.duration)&&r.currentTime>=r.duration&&e>=r.duration?{prom:Promise.resolve(),cancel:()=>{}}:{prom:new Promise((a,c)=>{const u=gd(r,e+n);u.wait.then(h=>{if(Math.abs(e-h)<=n)return a();const g=e>h?1:-1,p=gd(r,h+n*g);i=p.cancel,p.wait.then(v=>{const b=Math.abs(e-v);if(L0(b)<=L0(n))return a();const S=gd(r,e+n);return i=S.cancel,S.wait.then(()=>{a()}).catch(C=>{c(C)})}).catch(v=>{c(v)})}),i=u.cancel}),cancel:()=>{i()}}},aA=({onError:r,volume:e,allowAmplificationDuringRender:t,playbackRate:n,onDuration:i,toneFrequency:s,name:a,acceptableTimeShiftInSeconds:c,delayRenderRetries:u,delayRenderTimeoutInMilliseconds:h,loopVolumeCurveBehavior:d,...g},p)=>{const v=Gi(),b=bi(),S=na(d??"repeat"),C=Mc(),T=m.useRef(null),k=m.useContext(lr),A=qs(),M=Bt(),{registerRenderAsset:R,unregisterRenderAsset:N}=m.useContext(Ki),$=m.useMemo(()=>`video-${Zi(g.src??"")}-${k?.cumulatedFrom}-${k?.relativeFrom}-${k?.durationInFrames}`,[g.src,k?.cumulatedFrom,k?.relativeFrom,k?.durationInFrames]);if(!C)throw new Error("No video config found");const V=Ks({volume:e,frame:S,mediaVolume:1,allowAmplificationDuringRender:t??!1});m.useEffect(()=>{if(!g.src)throw new Error("No src passed");if(!g.muted&&!(V<=0)&&window.remotion_audioEnabled)return R({type:"video",src:zn(g.src),id:$,frame:v,volume:V,mediaFrame:b,playbackRate:n??1,allowAmplificationDuringRender:t??!1,toneFrequency:s??null,audioStartFrame:Math.max(0,-(k?.relativeFrom??0))}),()=>N($)},[g.muted,g.src,R,$,N,V,b,v,n,t,s,k?.relativeFrom]),m.useImperativeHandle(p,()=>T.current,[]),m.useEffect(()=>{if(!window.remotion_videoEnabled)return;const{current:X}=T;if(!X)return;const J=g0({frame:b,playbackRate:n||1,startFrom:-A,fps:C.fps}),q=wi(`Rendering <Video /> with src="${g.src}" at time ${J}`,{retries:u??void 0,timeoutInMilliseconds:h??void 0});if(window.process?.env?.NODE_ENV==="test"){Ot(q);return}if(ad(X.currentTime,J)){if(X.readyState>=2){Ot(q);return}const ee=()=>{Ot(q)};return X.addEventListener("loadeddata",ee,{once:!0}),()=>{X.removeEventListener("loadeddata",ee)}}const Z=()=>{Ot(q)},ae=oA(X,J,C.fps);ae.prom.then(()=>{Ot(q)}),X.addEventListener("ended",Z,{once:!0});const ye=()=>{if(X?.error){if(console.error("Error occurred in video",X?.error),r)return;throw new Error(`The browser threw an error while playing the video ${g.src}: Code ${X.error.code} - ${X?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else throw new Error("The browser threw an error")};return X.addEventListener("error",ye,{once:!0}),()=>{ae.cancel(),X.removeEventListener("ended",Z),X.removeEventListener("error",ye),Ot(q)}},[S,g.src,n,C.fps,b,A,r,u,h]);const{src:G}=g;return M.isRendering&&m.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test")return;const X=wi("Loading <Video> duration with src="+G,{retries:u??void 0,timeoutInMilliseconds:h??void 0}),{current:J}=T,q=()=>{J?.duration&&i(G,J.duration),Ot(X)};return J?.duration?(i(G,J.duration),Ot(X)):J?.addEventListener("loadedmetadata",q,{once:!0}),()=>{J?.removeEventListener("loadedmetadata",q),Ot(X)}},[G,i,u,h]),w.jsx("video",{ref:T,disableRemotePlayback:!0,...g})},cA=m.forwardRef(aA),lA=(r,e)=>{const{startFrom:t,endAt:n,name:i,pauseWhenBuffering:s,stack:a,_remotionInternalNativeLoopPassed:c,showInTimeline:u,onAutoPlayError:h,...d}=r,{loop:g,_remotionDebugSeeking:p,...v}=r,{fps:b}=yi(),S=Bt(),{durations:C,setDurations:T}=m.useContext(td);if(typeof e=="string")throw new Error("string refs are not supported");if(typeof r.src!="string")throw new TypeError(`The \`<Video>\` tag requires a string for \`src\`, but got ${JSON.stringify(r.src)} instead.`);const k=Gs(r.src),A=m.useCallback((N,$)=>{T({type:"got-duration",durationInSeconds:$,src:N})},[T]),M=m.useCallback(()=>{},[]),R=C[zn(k)]??C[zn(r.src)];if(g&&R!==void 0){if(!Number.isFinite(R))return w.jsx(Bc,{...v,ref:e,_remotionInternalNativeLoopPassed:!0});const N=R*b;return w.jsx(Pc,{durationInFrames:r0({endAt:n,mediaDuration:N,playbackRate:r.playbackRate??1,startFrom:t}),layout:"none",name:i,children:w.jsx(Bc,{...v,ref:e,_remotionInternalNativeLoopPassed:!0})})}if(typeof t<"u"||typeof n<"u"){ed(t,n);const N=t??0,$=n??1/0;return w.jsx(Mn,{layout:"none",from:0-N,showInTimeline:!1,durationInFrames:$,name:i,children:w.jsx(Bc,{pauseWhenBuffering:s??!1,...d,ref:e})})}return Qh(r,"Video"),S.isRendering?w.jsx(cA,{onDuration:A,onVideoFrame:M??null,...d,ref:e}):w.jsx(R0,{onlyWarnForMediaSeekingError:!1,...d,ref:e,onVideoFrame:null,pauseWhenBuffering:s??!1,onDuration:A,_remotionInternalStack:a??null,_remotionInternalNativeLoopPassed:c??!1,_remotionDebugSeeking:p??!1,showInTimeline:u??!0,onAutoPlayError:h??void 0})},Bc=m.forwardRef(lA);Qo(Bc),Ck();var uA={},hA=new Proxy(uA,{get(r,e){return e==="Bundling"||e==="Rendering"||e==="Log"||e==="Puppeteer"||e==="Output"?hA:()=>{console.warn("  The CLI configuration has been extracted from Remotion Core."),console.warn("Update the import from the config file:"),console.warn(),console.warn("- Delete:"),console.warn('import {Config} from "remotion";'),console.warn("+ Replace:"),console.warn('import {Config} from "@remotion/cli/config";'),console.warn(),console.warn("For more information, see https://www.remotion.dev/docs/4-0-migration."),process.exit(1)}}});Qo(Mn),typeof window<"u"&&(window.remotion_renderReady=!1),typeof window<"u"&&(window.remotion_delayRenderTimeouts={});var dA=(r,e,t)=>{if(r){if(typeof r!="object")throw new Error(`"${e}" must be an object, but you passed a value of type ${typeof r}`);if(Array.isArray(r))throw new Error(`"${e}" must be an object, an array was passed ${t?`for composition "${t}"`:""}`)}};function fA(r,e,t){if(typeof r!="number")throw new Error(`The "${e}" prop ${t} must be a number, but you passed a value of type ${typeof r}`);if(isNaN(r))throw new TypeError(`The "${e}" prop ${t} must not be NaN, but is NaN.`);if(!Number.isFinite(r))throw new TypeError(`The "${e}" prop ${t} must be finite, but is ${r}.`);if(r%1!==0)throw new TypeError(`The "${e}" prop ${t} must be an integer, but is ${r}.`);if(r<=0)throw new TypeError(`The "${e}" prop ${t} must be positive, but got ${r}.`)}function gA(r,e){const{allowFloats:t,component:n}=e;if(typeof r>"u")throw new Error(`The "durationInFrames" prop ${n} is missing.`);if(typeof r!="number")throw new Error(`The "durationInFrames" prop ${n} must be a number, but you passed a value of type ${typeof r}`);if(r<=0)throw new TypeError(`The "durationInFrames" prop ${n} must be positive, but got ${r}.`);if(!t&&r%1!==0)throw new TypeError(`The "durationInFrames" prop ${n} must be an integer, but got ${r}.`);if(!Number.isFinite(r))throw new TypeError(`The "durationInFrames" prop ${n} must be finite, but got ${r}.`)}function pA(r,e,t){if(typeof r!="number")throw new Error(`"fps" must be a number, but you passed a value of type ${typeof r} ${e}`);if(!Number.isFinite(r))throw new Error(`"fps" must be a finite, but you passed ${r} ${e}`);if(isNaN(r))throw new Error(`"fps" must not be NaN, but got ${r} ${e}`);if(r<=0)throw new TypeError(`"fps" must be positive, but got ${r} ${e}`);if(t&&r>50)throw new TypeError("The FPS for a GIF cannot be higher than 50. Use the --every-nth-frame option to lower the FPS: https://remotion.dev/docs/render-as-gif")}var Vc={validateFps:pA,validateDimension:fA,validateDurationInFrames:gA,validateDefaultAndInputProps:dA},rr=25,pd=16,mA=()=>w.jsx("svg",{width:rr,height:rr,viewBox:"0 0 25 25",fill:"none",children:w.jsx("path",{d:"M8 6.375C7.40904 8.17576 7.06921 10.2486 7.01438 12.3871C6.95955 14.5255 7.19163 16.6547 7.6875 18.5625C9.95364 18.2995 12.116 17.6164 14.009 16.5655C15.902 15.5147 17.4755 14.124 18.6088 12.5C17.5158 10.8949 15.9949 9.51103 14.1585 8.45082C12.3222 7.3906 10.2174 6.68116 8 6.375Z",fill:"white",stroke:"white",strokeWidth:"6.25",strokeLinejoin:"round"})}),vA=()=>w.jsxs("svg",{viewBox:"0 0 100 100",width:rr,height:rr,children:[w.jsx("rect",{x:"25",y:"20",width:"20",height:"60",fill:"#fff",ry:"5",rx:"5"}),w.jsx("rect",{x:"55",y:"20",width:"20",height:"60",fill:"#fff",ry:"5",rx:"5"})]}),yA=({isFullscreen:r})=>{const n=r?0:3,i=r?6*1.6:6/2,s=r?6*1.6:6*2;return w.jsxs("svg",{viewBox:"0 0 32 32",height:pd,width:pd,children:[w.jsx("path",{d:`
				M ${n} ${s}
				L ${i} ${i}
				L ${s} ${n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),w.jsx("path",{d:`
				M ${32-n} ${s}
				L ${32-i} ${i}
				L ${32-s} ${n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),w.jsx("path",{d:`
				M ${n} ${32-s}
				L ${i} ${32-i}
				L ${s} ${32-n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),w.jsx("path",{d:`
				M ${32-n} ${32-s}
				L ${32-i} ${32-i}
				L ${32-s} ${32-n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"})]})},bA=()=>w.jsx("svg",{width:rr,height:rr,viewBox:"0 0 24 24",children:w.jsx("path",{d:"M3.63 3.63a.996.996 0 000 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.996.996 0 101.41-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12A4.5 4.5 0 0014 7.97v1.79l2.48 2.48c.01-.08.02-.16.02-.24z",fill:"#fff"})}),wA=()=>w.jsx("svg",{width:rr,height:rr,viewBox:"0 0 24 24",children:w.jsx("path",{d:"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z",fill:"#fff"})}),F0="__remotion_buffering_indicator",N0="__remotion_buffering_animation",_A={width:rr,height:rr,overflow:"hidden",lineHeight:"normal",fontSize:"inherit"},SA={width:14,height:14,overflow:"hidden",lineHeight:"normal",fontSize:"inherit"},xA=({type:r})=>{const e=r==="player"?_A:SA;return w.jsxs(w.Fragment,{children:[w.jsx("style",{type:"text/css",children:`
				@keyframes ${N0} {
          0% {
            rotate: 0deg;
          }
          100% {
            rotate: 360deg;
          }
        }
        
        .${F0} {
            animation: ${N0} 1s linear infinite;
        }        
			`}),w.jsx("div",{style:e,children:w.jsx("svg",{viewBox:r==="player"?"0 0 22 22":"0 0 18 18",style:e,className:F0,children:w.jsx("path",{d:r==="player"?"M 11 4 A 7 7 0 0 1 15.1145 16.66312":"M 9 2 A 7 7 0 0 1 13.1145 14.66312",stroke:"white",strokeLinecap:"round",fill:"none",strokeWidth:3})})})]})},CA=({currentSize:r,width:e,height:t,compositionWidth:n,compositionHeight:i})=>e!==void 0&&t===void 0?{aspectRatio:[n,i].join("/")}:t!==void 0&&e===void 0?{aspectRatio:[n,i].join("/")}:r?{width:n,height:i}:{width:n,height:i},B0=({previewSize:r,compositionWidth:e,compositionHeight:t,canvasSize:n})=>{const i=Re.calculateScale({canvasSize:n,compositionHeight:t,compositionWidth:e,previewSize:r}),s=0-(1-i)/2,a=s*e,c=s*t,u=e*i,h=t*i,d=n.width/2-u/2,g=n.height/2-h/2;return{centerX:d,centerY:g,xCorrection:a,yCorrection:c,scale:i}},V0=({config:r,style:e,canvasSize:t,overflowVisible:n,layout:i})=>r?{position:"relative",overflow:n?"visible":"hidden",...CA({compositionHeight:r.height,compositionWidth:r.width,currentSize:t,height:e?.height,width:e?.width}),opacity:i?1:0,...e}:{},H0=({config:r,canvasSize:e,layout:t,scale:n,overflowVisible:i})=>!r||!e||!t?{}:{position:"absolute",width:r.width,height:r.height,display:"flex",transform:`scale(${n})`,marginLeft:t.xCorrection,marginTop:t.yCorrection,overflow:i?"visible":"hidden"},z0=({layout:r,scale:e,config:t,overflowVisible:n})=>{if(!r||!t)return{};const{centerX:i,centerY:s}=r;return{width:t.width*e,height:t.height*e,display:"flex",flexDirection:"column",position:"absolute",left:i,top:s,overflow:n?"visible":"hidden"}},W0=Pe.createContext(void 0),U0=Pe.createContext(void 0);class TA{listeners={ended:[],error:[],pause:[],play:[],ratechange:[],scalechange:[],seeked:[],timeupdate:[],frameupdate:[],fullscreenchange:[],volumechange:[],mutechange:[],waiting:[],resume:[]};addEventListener(e,t){this.listeners[e].push(t)}removeEventListener(e,t){this.listeners[e]=this.listeners[e].filter(n=>n!==t)}dispatchEvent(e,t){this.listeners[e].forEach(n=>{n({detail:t})})}dispatchSeek(e){this.dispatchEvent("seeked",{frame:e})}dispatchVolumeChange(e){this.dispatchEvent("volumechange",{volume:e})}dispatchPause(){this.dispatchEvent("pause",void 0)}dispatchPlay(){this.dispatchEvent("play",void 0)}dispatchEnded(){this.dispatchEvent("ended",void 0)}dispatchRateChange(e){this.dispatchEvent("ratechange",{playbackRate:e})}dispatchScaleChange(e){this.dispatchEvent("scalechange",{scale:e})}dispatchError(e){this.dispatchEvent("error",{error:e})}dispatchTimeUpdate(e){this.dispatchEvent("timeupdate",e)}dispatchFrameUpdate(e){this.dispatchEvent("frameupdate",e)}dispatchFullscreenChange(e){this.dispatchEvent("fullscreenchange",e)}dispatchMuteChange(e){this.dispatchEvent("mutechange",e)}dispatchWaiting(e){this.dispatchEvent("waiting",e)}dispatchResume(e){this.dispatchEvent("resume",e)}}class EA{listeners={error:[],waiting:[],resume:[]};addEventListener(e,t){this.listeners[e].push(t)}removeEventListener(e,t){this.listeners[e]=this.listeners[e].filter(n=>n!==t)}dispatchEvent(e,t){this.listeners[e].forEach(n=>{n({detail:t})})}dispatchError(e){this.dispatchEvent("error",{error:e})}dispatchWaiting(e){this.dispatchEvent("waiting",e)}dispatchResume(e){this.dispatchEvent("resume",e)}}var $0=r=>{const e=m.useContext(Re.BufferingContextReact);if(!e)throw new Error("BufferingContextReact not found");m.useEffect(()=>{const t=e.listenForBuffering(()=>{e.buffering.current=!0,r.dispatchWaiting({})}),n=e.listenForResume(()=>{e.buffering.current=!1,r.dispatchResume({})});return()=>{t.remove(),n.remove()}},[e,r])},kA=({children:r,currentPlaybackRate:e})=>{const[t]=m.useState(()=>new TA);if(!m.useContext(Re.BufferingContextReact))throw new Error("BufferingContextReact not found");return m.useEffect(()=>{e&&t.dispatchRateChange(e)},[t,e]),$0(t),w.jsx(W0.Provider,{value:t,children:r})},md=(r,e)=>{const[t,n]=m.useState(!1);return m.useEffect(()=>{const{current:i}=r;if(!i)return;let s;const a=()=>{e&&(clearTimeout(s),s=setTimeout(()=>{n(!1)},e===!0?3e3:e))},c=()=>{n(!0),a()},u=()=>{n(!1),clearTimeout(s)},h=()=>{n(!0),a()};return i.addEventListener("mouseenter",c),i.addEventListener("mouseleave",u),i.addEventListener("mousemove",h),()=>{i.removeEventListener("mouseenter",c),i.removeEventListener("mouseleave",u),i.removeEventListener("mousemove",h),clearTimeout(s)}},[e,r]),t},Hc=()=>{const[r,e,t]=Re.Timeline.usePlayingState(),[n,i]=m.useState(!1),s=Re.Timeline.useTimelinePosition(),a=m.useRef(s),c=Re.Timeline.useTimelineSetFrame(),u=Re.Timeline.useTimelineSetFrame(),h=m.useContext(Re.SharedAudioContext),{audioAndVideoTags:d}=m.useContext(Re.Timeline.TimelineContext),g=m.useRef(s);g.current=s;const p=Re.useVideo(),v=Re.useUnsafeVideoConfig(),b=m.useContext(W0),S=(v?.durationInFrames??1)-1,C=s===S,T=s===0;if(!b)throw new TypeError("Expected Player event emitter context");const k=m.useContext(Re.BufferingContextReact);if(!k)throw new Error("Missing the buffering context. Most likely you have a Remotion version mismatch.");const{buffering:A}=k,M=m.useCallback(q=>{p?.id&&u(Z=>({...Z,[p.id]:q})),g.current=q,b.dispatchSeek(q)},[b,u,p?.id]),R=m.useCallback(q=>{t.current||(i(!0),C&&M(0),h&&h.numberOfAudioTags>0&&q&&h.playAllAudios(),d.current.forEach(Z=>Z.play()),t.current=!0,e(!0),a.current=g.current,b.dispatchPlay())},[t,C,h,e,b,M,d]),N=m.useCallback(()=>{t.current&&(t.current=!1,e(!1),b.dispatchPause())},[b,t,e]),$=m.useCallback(()=>{t.current&&(t.current=!1,g.current=a.current,v&&(u(q=>({...q,[v.id]:a.current})),e(!1),b.dispatchPause()))},[v,b,t,e,u]),V=p?.id,G=m.useCallback(q=>{if(!V)return null;t.current||c(Z=>{const ae=Z[V]??window.remotion_initialFrame??0;return{...Z,[V]:Math.max(0,ae-q)}})},[t,c,V]),X=m.useCallback(q=>{if(!V)return null;t.current||c(Z=>{const ae=Z[V]??window.remotion_initialFrame??0;return{...Z,[V]:Math.min(S,ae+q)}})},[V,t,S,c]);return m.useMemo(()=>({frameBack:G,frameForward:X,isLastFrame:C,emitter:b,playing:r,play:R,pause:N,seek:M,isFirstFrame:T,getCurrentFrame:()=>g.current,isPlaying:()=>t.current,isBuffering:()=>A.current,pauseAndReturnToPlayStart:$,hasPlayed:n,remotionInternal_currentFrameRef:g}),[G,X,C,b,r,R,N,M,T,$,n,t,A])},OA=({browserMediaControlsBehavior:r,videoConfig:e,playbackRate:t})=>{const{playing:n,pause:i,play:s,emitter:a,getCurrentFrame:c,seek:u}=Hc();m.useEffect(()=>{navigator.mediaSession&&r.mode!=="do-nothing"&&(n?navigator.mediaSession.playbackState="playing":navigator.mediaSession.playbackState="paused")},[r.mode,n]),m.useEffect(()=>{if(!navigator.mediaSession||r.mode==="do-nothing")return;const h=()=>{e&&navigator.mediaSession&&navigator.mediaSession.setPositionState({duration:e.durationInFrames/e.fps,playbackRate:t,position:c()/e.fps})};return a.addEventListener("timeupdate",h),()=>{a.removeEventListener("timeupdate",h)}},[r.mode,a,c,t,e]),m.useEffect(()=>{if(navigator.mediaSession&&r.mode!=="do-nothing")return navigator.mediaSession.setActionHandler("play",()=>{r.mode==="register-media-session"&&s()}),navigator.mediaSession.setActionHandler("pause",()=>{r.mode==="register-media-session"&&i()}),navigator.mediaSession.setActionHandler("seekto",h=>{r.mode==="register-media-session"&&h.seekTime!==void 0&&e&&u(Math.round(h.seekTime*e.fps))}),navigator.mediaSession.setActionHandler("seekbackward",()=>{r.mode==="register-media-session"&&e&&u(Math.max(0,Math.round((c()-10)*e.fps)))}),navigator.mediaSession.setActionHandler("seekforward",()=>{r.mode==="register-media-session"&&e&&u(Math.max(e.durationInFrames-1,Math.round((c()+10)*e.fps)))}),navigator.mediaSession.setActionHandler("previoustrack",()=>{r.mode==="register-media-session"&&u(0)}),()=>{navigator.mediaSession.metadata=null,navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("seekto",null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("previoustrack",null)}},[r.mode,c,i,s,u,e])},AA=({time:r,currentFrame:e,playbackSpeed:t,fps:n,actualLastFrame:i,actualFirstFrame:s,framesAdvanced:a,shouldLoop:c})=>{const h=(t<0?Math.ceil:Math.floor)(r*t/(1e3/n))-a,d=h+e,g=e>i||e<s,p=d>i||d<s,v=!c&&p&&!g;return t>0?p?{nextFrame:s,framesToAdvance:h,hasEnded:v}:{nextFrame:d,framesToAdvance:h,hasEnded:v}:p?{nextFrame:i,framesToAdvance:h,hasEnded:v}:{nextFrame:d,framesToAdvance:h,hasEnded:v}},Y0=()=>typeof document>"u"?!1:document.visibilityState==="hidden",IA=()=>{const r=m.useRef(Y0());return m.useEffect(()=>{const e=()=>{r.current=Y0()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),r},MA=({loop:r,playbackRate:e,moveToBeginningWhenEnded:t,inFrame:n,outFrame:i,frameRef:s,browserMediaControlsBehavior:a})=>{const c=Re.useUnsafeVideoConfig(),u=Re.Timeline.useTimelinePosition(),{playing:h,pause:d,emitter:g}=Hc(),p=Re.Timeline.useTimelineSetFrame(),v=m.useRef(null),b=IA(),S=m.useRef(null),C=m.useContext(Re.BufferingContextReact);if(!C)throw new Error("Missing the buffering context. Most likely you have a Remotion version mismatch.");OA({browserMediaControlsBehavior:a,playbackRate:e,videoConfig:c}),m.useEffect(()=>{const T=C.listenForBuffering(()=>{v.current=performance.now()}),k=C.listenForResume(()=>{v.current=null});return()=>{T.remove(),k.remove()}},[C]),m.useEffect(()=>{if(!c||!h)return;let T=!1,k=null,A=performance.now(),M=0;const R=()=>{k!==null&&(k.type==="raf"?cancelAnimationFrame(k.id):clearTimeout(k.id))},N=()=>{T=!0,R()},$=()=>{const X=performance.now()-A,J=i??c.durationInFrames-1,q=n??0,Z=s.current,{nextFrame:ae,framesToAdvance:ye,hasEnded:ee}=AA({time:X,currentFrame:Z,playbackSpeed:e,fps:c.fps,actualFirstFrame:q,actualLastFrame:J,framesAdvanced:M,shouldLoop:r});if(M+=ye,ae!==s.current&&(!ee||t)&&p(me=>({...me,[c.id]:ae})),ee){N(),d(),g.dispatchEnded();return}T||V()},V=()=>{if(v.current){const X=C.listenForResume(()=>{X.remove(),!T&&(A=performance.now(),M=0,$())});return}b.current?k={type:"timeout",id:setTimeout($,1e3/c.fps)}:k={type:"raf",id:requestAnimationFrame($)}};V();const G=()=>{document.visibilityState!=="visible"&&(R(),$())};return window.addEventListener("visibilitychange",G),()=>{window.removeEventListener("visibilitychange",G),N()}},[c,r,d,h,p,g,e,n,i,t,b,s,v,C]),m.useEffect(()=>{const T=setInterval(()=>{S.current!==s.current&&(g.dispatchTimeUpdate({frame:s.current}),S.current=s.current)},250);return()=>clearInterval(T)},[g,s]),m.useEffect(()=>{g.dispatchFrameUpdate({frame:u})},[g,u])},vd=[],yd=(r,e)=>{const[t,n]=m.useState(()=>{if(!r.current)return null;const a=r.current.getClientRects();return a[0]?{width:a[0].width,height:a[0].height,left:a[0].x,top:a[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}}:null}),i=m.useMemo(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(a=>{const{contentRect:c,target:u}=a[0],h=u.getClientRects();if(!h?.[0]){n(null);return}const d=c.width===0?1:h[0].width/c.width,g=e.shouldApplyCssTransforms?h[0].width:h[0].width*(1/d),p=e.shouldApplyCssTransforms?h[0].height:h[0].height*(1/d);n({width:g,height:p,left:h[0].x,top:h[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}})}),[e.shouldApplyCssTransforms]),s=m.useCallback(()=>{if(!r.current)return;const a=r.current.getClientRects();if(!a[0]){n(null);return}n(c=>c&&c.width===a[0].width&&c.height===a[0].height&&c.left===a[0].x&&c.top===a[0].y&&c.windowSize.height===window.innerHeight&&c.windowSize.width===window.innerWidth?c:{width:a[0].width,height:a[0].height,left:a[0].x,top:a[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}})},[r]);return m.useEffect(()=>{if(!i)return;const{current:a}=r;return a&&i.observe(a),()=>{a&&i.unobserve(a)}},[i,r,s]),m.useEffect(()=>{if(e.triggerOnWindowResize)return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[e.triggerOnWindowResize,s]),m.useEffect(()=>(vd.push(s),()=>{vd=vd.filter(a=>a!==s)}),[s]),m.useMemo(()=>t?{...t,refresh:s}:null,[t,s])},X0=({playing:r,buffering:e})=>r&&e?w.jsx(xA,{type:"player"}):r?w.jsx(vA,{}):w.jsx(mA,{}),Js=12,G0=5,PA=({volume:r,isVertical:e,onBlur:t,inputRef:n,setVolume:i})=>{const s=m.useMemo(()=>{const p={paddingLeft:5,height:rr,width:Ji,display:"inline-flex",alignItems:"center"};return e?{...p,position:"absolute",transform:`rotate(-90deg) translateX(${Ji/2+rr/2}px)`}:{...p}},[e]),a=typeof Pe.useId>"u"?"volume-slider":Pe.useId(),[c]=m.useState(()=>`__remotion-volume-slider-${Zi(a)}`.replace(".","")),u=m.useCallback(g=>{i(parseFloat(g.target.value))},[i]),h=m.useMemo(()=>{const g={WebkitAppearance:"none",backgroundColor:"rgba(255, 255, 255, 0.5)",borderRadius:G0/2,cursor:"pointer",height:G0,width:Ji,backgroundImage:`linear-gradient(
				to right,
				white ${r*100}%, rgba(255, 255, 255, 0) ${r*100}%
			)`};return e?{...g,bottom:rr+Ji/2}:g},[e,r]),d=`
	.${c}::-webkit-slider-thumb {
		-webkit-appearance: none;
		background-color: white;
		border-radius: ${Js/2}px;
		box-shadow: 0 0 2px black;
		height: ${Js}px;
		width: ${Js}px;
	}

	.${c}::-moz-range-thumb {
		-webkit-appearance: none;
		background-color: white;
		border-radius: ${Js/2}px;
		box-shadow: 0 0 2px black;
		height: ${Js}px;
		width: ${Js}px;
	}
`;return w.jsxs("div",{style:s,children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:d}}),w.jsx("input",{ref:n,"aria-label":"Change volume",className:c,max:1,min:0,onBlur:t,onChange:u,step:.01,type:"range",value:r,style:h})]})},DA=r=>w.jsx(PA,{...r}),Ji=100,RA=({displayVerticalVolumeSlider:r,renderMuteButton:e,renderVolumeSlider:t})=>{const[n,i]=Re.useMediaMutedState(),[s,a]=Re.useMediaVolumeState(),[c,u]=m.useState(!1),h=m.useRef(null),d=m.useRef(null),g=md(h,!1),p=m.useCallback(()=>{setTimeout(()=>{d.current&&document.activeElement!==d.current&&u(!1)},10)},[]),v=s===0,b=m.useCallback(()=>{if(v){a(1),i(!1);return}i(M=>!M)},[v,i,a]),S=m.useMemo(()=>({display:"inline-flex",background:"none",border:"none",justifyContent:"center",alignItems:"center",touchAction:"none",...r&&{position:"relative"}}),[r]),C=m.useMemo(()=>({display:"inline",width:rr,height:rr,cursor:"pointer",appearance:"none",background:"none",border:"none",padding:0}),[]),T=m.useCallback(({muted:M,volume:R})=>{const N=M||R===0;return w.jsx("button",{"aria-label":N?"Unmute sound":"Mute sound",title:N?"Unmute sound":"Mute sound",onClick:b,onBlur:p,onFocus:()=>u(!0),style:C,type:"button",children:N?w.jsx(bA,{}):w.jsx(wA,{})})},[p,b,C]),k=m.useMemo(()=>e?e({muted:n,volume:s}):T({muted:n,volume:s}),[n,s,T,e]),A=m.useMemo(()=>(c||g)&&!n&&!Re.isIosSafari()?(t??DA)({isVertical:r,volume:s,onBlur:()=>u(!1),inputRef:d,setVolume:a}):null,[r,c,g,n,s,t,a]);return w.jsxs("div",{ref:h,style:S,children:[k,A]})};function jA(r){const[e,t]=m.useState(r),n=m.useRef(null);return m.useEffect(()=>{const i=s=>{n.current&&!n.current.contains(s.target)&&t(!1)};return document.addEventListener("pointerup",i,!0),()=>{document.removeEventListener("pointerup",i,!0)}},[]),{ref:n,isComponentVisible:e,setIsComponentVisible:t}}var LA=35,FA=70,NA={height:30,paddingRight:15,paddingLeft:12,display:"flex",flexDirection:"row",alignItems:"center"},BA={width:22,display:"flex",alignItems:"center"},VA={width:14,height:14,color:"black"},HA=()=>w.jsx("svg",{viewBox:"0 0 512 512",style:VA,children:w.jsx("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})}),zA=({rate:r,onSelect:e,selectedRate:t,keyboardSelectedRate:n})=>{const i=m.useCallback(g=>{g.stopPropagation(),g.preventDefault(),e(r)},[e,r]),[s,a]=m.useState(!1),c=m.useCallback(()=>{a(!0)},[]),u=m.useCallback(()=>{a(!1)},[]),h=n===r,d=m.useMemo(()=>({...NA,backgroundColor:s||h?"#eee":"transparent"}),[s,h]);return w.jsxs("div",{onMouseEnter:c,onMouseLeave:u,tabIndex:0,style:d,onClick:i,children:[w.jsx("div",{style:BA,children:r===t?w.jsx(HA,{}):null}),r.toFixed(1),"x"]},r)},WA=({setIsComponentVisible:r,playbackRates:e,canvasSize:t})=>{const{setPlaybackRate:n,playbackRate:i}=m.useContext(Re.Timeline.TimelineContext),[s,a]=m.useState(i);m.useEffect(()=>{const h=d=>{if(d.preventDefault(),d.key==="ArrowUp"){const g=e.findIndex(p=>p===s);if(g===0)return;a(g===-1?e[0]:e[g-1])}else if(d.key==="ArrowDown"){const g=e.findIndex(p=>p===s);if(g===e.length-1)return;a(g===-1?e[e.length-1]:e[g+1])}else d.key==="Enter"&&(n(s),r(!1))};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[e,s,n,r]);const c=m.useCallback(h=>{n(h),r(!1)},[r,n]),u=m.useMemo(()=>({position:"absolute",right:0,width:125,maxHeight:t.height-FA-LA,bottom:35,background:"#fff",borderRadius:4,overflow:"auto",color:"black",textAlign:"left"}),[t.height]);return w.jsx("div",{style:u,children:e.map(h=>w.jsx(zA,{selectedRate:i,onSelect:c,rate:h,keyboardSelectedRate:s},h))})},UA={fontSize:13,fontWeight:"bold",color:"white",border:"2px solid white",borderRadius:20,paddingLeft:8,paddingRight:8,paddingTop:2,paddingBottom:2},bd={appearance:"none",backgroundColor:"transparent",border:"none",cursor:"pointer",paddingLeft:0,paddingRight:0,paddingTop:6,paddingBottom:6,height:37,display:"inline-flex",marginBottom:0,marginTop:0,alignItems:"center"},$A={...bd,position:"relative"},YA=({playbackRates:r,canvasSize:e})=>{const{ref:t,isComponentVisible:n,setIsComponentVisible:i}=jA(!1),{playbackRate:s}=m.useContext(Re.Timeline.TimelineContext),a=m.useCallback(c=>{c.stopPropagation(),c.preventDefault(),i(u=>!u)},[i]);return w.jsx("div",{ref:t,children:w.jsxs("button",{type:"button","aria-label":"Change playback rate",style:$A,onClick:a,children:[w.jsxs("div",{style:UA,children:[s,"x"]}),n&&w.jsx(WA,{canvasSize:e,playbackRates:r,setIsComponentVisible:i})]})})},q0=(r,e,t)=>Math.round(d0(r,[0,t],[0,e-1],{extrapolateLeft:"clamp",extrapolateRight:"clamp"})),Qs=5,sa=12,wd=4,XA={userSelect:"none",WebkitUserSelect:"none",paddingTop:wd,paddingBottom:wd,boxSizing:"border-box",cursor:"pointer",position:"relative",touchAction:"none"},GA={height:Qs,backgroundColor:"rgba(255, 255, 255, 0.25)",width:"100%",borderRadius:Qs/2},qA=r=>{let e=r;for(;e.parentElement;)e=e.parentElement;return e},KA=({durationInFrames:r,onSeekEnd:e,onSeekStart:t,inFrame:n,outFrame:i})=>{const s=m.useRef(null),a=md(s,!1),c=yd(s,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),{seek:u,play:h,pause:d,playing:g}=Hc(),p=Re.Timeline.useTimelinePosition(),[v,b]=m.useState({dragging:!1}),S=c?.width??0,C=m.useCallback(N=>{if(N.button!==0)return;const $=s.current?.getBoundingClientRect().left,V=q0(N.clientX-$,r,S);d(),u(V),b({dragging:!0,wasPlaying:g}),t()},[r,S,d,u,g,t]),T=m.useCallback(N=>{if(!c)throw new Error("Player has no size");if(!v.dragging)return;const $=s.current?.getBoundingClientRect().left,V=q0(N.clientX-$,r,c.width);u(V)},[v.dragging,r,u,c]),k=m.useCallback(()=>{b({dragging:!1}),v.dragging&&(v.wasPlaying?h():d(),e())},[v,e,d,h]);m.useEffect(()=>{if(!v.dragging)return;const N=qA(s.current);return N.addEventListener("pointermove",T),N.addEventListener("pointerup",k),()=>{N.removeEventListener("pointermove",T),N.removeEventListener("pointerup",k)}},[v.dragging,T,k]);const A=m.useMemo(()=>({height:sa,width:sa,borderRadius:sa/2,position:"absolute",top:wd-sa/2+5/2,backgroundColor:"white",left:Math.max(0,p/Math.max(1,r-1)*S-sa/2),boxShadow:"0 0 2px black",opacity:Number(a)}),[a,r,p,S]),M=m.useMemo(()=>({height:Qs,backgroundColor:"rgba(255, 255, 255, 1)",width:(p-(n??0))/(r-1)*100+"%",marginLeft:(n??0)/(r-1)*100+"%",borderRadius:Qs/2}),[r,p,n]),R=m.useMemo(()=>({height:Qs,backgroundColor:"rgba(255, 255, 255, 0.25)",width:((i??r-1)-(n??0))/(r-1)*100+"%",marginLeft:(n??0)/(r-1)*100+"%",borderRadius:Qs/2,position:"absolute"}),[r,n,i]);return w.jsxs("div",{ref:s,onPointerDown:C,style:XA,children:[w.jsxs("div",{style:GA,children:[w.jsx("div",{style:R}),w.jsx("div",{style:M})]}),w.jsx("div",{style:A})]})},K0=r=>{const e=Math.floor(r/60),t=Math.floor(r-e*60);return`${String(e)}:${String(t).padStart(2,"0")}`},ZA=10,_d=12,JA=({allowFullscreen:r,playerWidth:e})=>m.useMemo(()=>{const n=rr,i=rr,s=r?pd:0,a=i+n+s+_d*2+ZA*2,c=e-a,u=Math.max(c,0),h=u-Ji,g=(h<Ji?u:h)+a+Ji,p=e<g;return{maxTimeLabelWidth:u===0?null:u,displayVerticalVolumeSlider:p}},[r,e]),QA=[0,.013,.049,.104,.175,.259,.352,.45,.55,.648,.741,.825,.896,.951,.987],eI=[0,8.1,15.5,22.5,29,35.3,41.2,47.1,52.9,58.8,64.7,71,77.5,84.5,91.9],tI=1/.7,rI={boxSizing:"border-box",position:"absolute",bottom:0,width:"100%",paddingTop:40,paddingBottom:10,backgroundImage:`linear-gradient(to bottom,${QA.map((r,e)=>`hsla(0, 0%, 0%, ${r}) ${eI[e]*tI}%`).join(", ")}, hsl(0, 0%, 0%) 100%)`,backgroundSize:"auto 145px",display:"flex",paddingRight:_d,paddingLeft:_d,flexDirection:"column",transition:"opacity 0.3s"},nI={display:"flex",flexDirection:"row",width:"100%",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none"},iI={display:"flex",flexDirection:"row",userSelect:"none",WebkitUserSelect:"none",alignItems:"center"},zc={width:12},sI={height:8},oI={flex:1},aI={},cI=({durationInFrames:r,isFullscreen:e,fps:t,player:n,showVolumeControls:i,onFullscreenButtonClick:s,allowFullscreen:a,onExitFullscreenButtonClick:c,spaceKeyToPlayOrPause:u,onSeekEnd:h,onSeekStart:d,inFrame:g,outFrame:p,initiallyShowControls:v,canvasSize:b,renderPlayPauseButton:S,renderFullscreenButton:C,alwaysShowControls:T,showPlaybackRateControl:k,containerRef:A,buffering:M,hideControlsWhenPointerDoesntMove:R,onPointerDown:N,onDoubleClick:$,renderMuteButton:V,renderVolumeSlider:G})=>{const X=m.useRef(null),J=Re.Timeline.useTimelinePosition(),[q,Z]=m.useState(!1),ae=md(A,R),{maxTimeLabelWidth:ye,displayVerticalVolumeSlider:ee}=JA({allowFullscreen:a,playerWidth:b?.width??0}),[me,fe]=m.useState(()=>{if(typeof v=="boolean")return v;if(typeof v=="number"){if(v%1!==0)throw new Error("initiallyShowControls must be an integer or a boolean");if(Number.isNaN(v))throw new Error("initiallyShowControls must not be NaN");if(!Number.isFinite(v))throw new Error("initiallyShowControls must be finite");if(v<=0)throw new Error("initiallyShowControls must be a positive integer");return v}throw new TypeError("initiallyShowControls must be a number or a boolean")}),ie=m.useMemo(()=>{const he=ae||!n.playing||me||T;return{...rI,opacity:Number(he)}},[ae,me,n.playing,T]);m.useEffect(()=>{X.current&&u&&X.current.focus({preventScroll:!0})},[n.playing,u]),m.useEffect(()=>{Z((typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled))??!1)},[]),m.useEffect(()=>{if(me===!1)return;const qe=setTimeout(()=>{fe(!1)},me===!0?2e3:me);return()=>{clearInterval(qe)}},[me]);const P=m.useMemo(()=>({color:"white",fontFamily:"sans-serif",fontSize:14,maxWidth:ye===null?void 0:ye,overflow:"hidden",textOverflow:"ellipsis"}),[ye]),W=m.useMemo(()=>{if(k===!0)return[.5,.8,1,1.2,1.5,1.8,2,2.5,3];if(Array.isArray(k)){for(const he of k){if(typeof he!="number")throw new Error("Every item in showPlaybackRateControl must be a number");if(he<=0)throw new Error("Every item in showPlaybackRateControl must be positive")}return k}return null},[k]),ue=m.useRef(null),ge=m.useRef(null),we=m.useCallback(he=>{(he.target===ue.current||he.target===ge.current)&&N?.(he)},[N]),be=m.useCallback(he=>{(he.target===ue.current||he.target===ge.current)&&$?.(he)},[$]);return w.jsxs("div",{ref:ue,style:ie,onPointerDown:we,onDoubleClick:be,children:[w.jsxs("div",{ref:ge,style:nI,children:[w.jsxs("div",{style:iI,children:[w.jsx("button",{ref:X,type:"button",style:bd,onClick:n.playing?n.pause:n.play,"aria-label":n.playing?"Pause video":"Play video",title:n.playing?"Pause video":"Play video",children:S===null?w.jsx(X0,{buffering:M,playing:n.playing}):S({playing:n.playing,isBuffering:M})??w.jsx(X0,{buffering:M,playing:n.playing})}),i?w.jsxs(w.Fragment,{children:[w.jsx("div",{style:zc}),w.jsx(RA,{renderMuteButton:V,renderVolumeSlider:G,displayVerticalVolumeSlider:ee})]}):null,w.jsx("div",{style:zc}),w.jsxs("div",{style:P,children:[K0(J/t)," / ",K0(r/t)]}),w.jsx("div",{style:zc})]}),w.jsx("div",{style:oI}),W&&b&&w.jsx(YA,{canvasSize:b,playbackRates:W}),W&&q&&a?w.jsx("div",{style:zc}):null,w.jsx("div",{style:aI,children:q&&a?w.jsx("button",{type:"button","aria-label":e?"Exit fullscreen":"Enter Fullscreen",title:e?"Exit fullscreen":"Enter Fullscreen",style:bd,onClick:e?c:s,children:C===null?w.jsx(yA,{isFullscreen:e}):C({isFullscreen:e})}):null})]}),w.jsx("div",{style:sI}),w.jsx(KA,{onSeekEnd:h,onSeekStart:d,durationInFrames:r,inFrame:g,outFrame:p})]})},lI={display:"flex",justifyContent:"center",alignItems:"center",flex:1,height:"100%",width:"100%"};class Z0 extends Pe.Component{state={hasError:null};static getDerivedStateFromError(e){return{hasError:e}}componentDidCatch(e){this.props.onError(e)}render(){return this.state.hasError?w.jsx("div",{style:lI,children:this.props.errorFallback({error:this.state.hasError})}):this.props.children}}var Sd="__remotion-player",J0=typeof document>"u",uI=r=>{let e=!1;return{promise:new Promise((n,i)=>{r.then(s=>{if(e){i({isCanceled:e,value:s});return}n(s)}).catch(s=>{i({isCanceled:e,error:s})})}),cancel:()=>{e=!0}}},hI=r=>new Promise(e=>setTimeout(e,r)),dI=()=>{const r=m.useRef([]),e=m.useCallback(s=>{r.current=[...r.current,s]},[]),t=m.useCallback(s=>{r.current=r.current.filter(a=>a!==s)},[]),n=m.useCallback(()=>r.current.map(s=>s.cancel()),[]);return m.useMemo(()=>({appendPendingPromise:e,removePendingPromise:t,clearPendingPromises:n}),[e,n,t])},fI=(r,e,t)=>{const n=dI(),i=m.useCallback(async u=>{if(u instanceof PointerEvent?u.pointerType==="touch":u.nativeEvent.pointerType==="touch"){r(u);return}n.clearPendingPromises();const h=uI(hI(200));n.appendPendingPromise(h);try{await h.promise,n.removePendingPromise(h),r(u)}catch(d){const g=d;if(n.removePendingPromise(h),!g.isCanceled)throw g.error}},[n,r]),s=m.useCallback(()=>{document.addEventListener("pointerup",u=>{i(u)},{once:!0})},[i]),a=m.useCallback(()=>{n.clearPendingPromises(),e()},[n,e]);return m.useMemo(()=>t?{handlePointerDown:s,handleDoubleClick:a}:{handlePointerDown:r,handleDoubleClick:()=>{}},[t,a,s,r])},xd=Pe.version.split(".")[0];if(xd==="0")throw new Error(`Version ${xd} of "react" is not supported by Remotion`);var gI=parseInt(xd,10)>=18,pI=({controls:r,style:e,loop:t,autoPlay:n,allowFullscreen:i,inputProps:s,clickToPlay:a,showVolumeControls:c,doubleClickToFullscreen:u,spaceKeyToPlayOrPause:h,errorFallback:d,playbackRate:g,renderLoading:p,renderPoster:v,className:b,moveToBeginningWhenEnded:S,showPosterWhenUnplayed:C,showPosterWhenEnded:T,showPosterWhenPaused:k,showPosterWhenBuffering:A,inFrame:M,outFrame:R,initiallyShowControls:N,renderFullscreen:$,renderPlayPauseButton:V,renderMuteButton:G,renderVolumeSlider:X,alwaysShowControls:J,showPlaybackRateControl:q,posterFillMode:Z,bufferStateDelayInMilliseconds:ae,hideControlsWhenPointerDoesntMove:ye,overflowVisible:ee,browserMediaControlsBehavior:me},fe)=>{const ie=Re.useUnsafeVideoConfig(),P=Re.useVideo(),W=m.useRef(null),ue=yd(W,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!1}),[ge,we]=m.useState(!1),[be,he]=m.useState(n),[qe,Ue]=m.useState(()=>!1),[xt,Ct]=m.useState(!1),Yt=m.useMemo(()=>typeof document>"u"?!1:!!(document.fullscreenEnabled||document.webkitFullscreenEnabled),[]),Te=Hc();MA({loop:t,playbackRate:g,moveToBeginningWhenEnded:S,inFrame:M,outFrame:R,frameRef:Te.remotionInternal_currentFrameRef,browserMediaControlsBehavior:me}),m.useEffect(()=>{ge&&!Te.playing&&(we(!1),Te.play())},[ge,Te]),m.useEffect(()=>{const{current:Ze}=W;if(!Ze)return;const Xe=()=>{const Qt=document.fullscreenElement===Ze||document.webkitFullscreenElement===Ze;Ue(Qt)};return document.addEventListener("fullscreenchange",Xe),document.addEventListener("webkitfullscreenchange",Xe),()=>{document.removeEventListener("fullscreenchange",Xe),document.removeEventListener("webkitfullscreenchange",Xe)}},[]);const Zt=m.useCallback(Ze=>{Te.isPlaying()?Te.pause():Te.play(Ze)},[Te]),ct=m.useCallback(()=>{if(!i)throw new Error("allowFullscreen is false");if(!Yt)throw new Error("Browser doesnt support fullscreen");if(!W.current)throw new Error("No player ref found");W.current.webkitRequestFullScreen?W.current.webkitRequestFullScreen():W.current.requestFullscreen()},[i,Yt]),Pt=m.useCallback(()=>{document.webkitExitFullscreen?document.webkitExitFullscreen():document.exitFullscreen()},[]);m.useEffect(()=>{const{current:Ze}=W;if(!Ze)return;const Xe=()=>{const Qt=document.webkitFullscreenElement??document.fullscreenElement;Qt&&Qt===W.current?Te.emitter.dispatchFullscreenChange({isFullscreen:!0}):Te.emitter.dispatchFullscreenChange({isFullscreen:!1})};return Ze.addEventListener("webkitfullscreenchange",Xe),Ze.addEventListener("fullscreenchange",Xe),()=>{Ze.removeEventListener("webkitfullscreenchange",Xe),Ze.removeEventListener("fullscreenchange",Xe)}},[Te.emitter]);const Ir=ie?.durationInFrames??1,nt=m.useMemo(()=>!ie||!ue?null:B0({canvasSize:ue,compositionHeight:ie.height,compositionWidth:ie.width,previewSize:"auto"}),[ue,ie]),Lt=nt?.scale??1,nn=m.useRef(!1);m.useEffect(()=>{if(!nn.current){nn.current=!0;return}Te.emitter.dispatchScaleChange(Lt)},[Te.emitter,Lt]);const{setMediaVolume:dr,setMediaMuted:j}=m.useContext(Re.SetMediaVolumeContext),{mediaMuted:de,mediaVolume:pe}=m.useContext(Re.MediaVolumeContext);m.useEffect(()=>{Te.emitter.dispatchVolumeChange(pe)},[Te.emitter,pe]);const je=de||pe===0;m.useEffect(()=>{Te.emitter.dispatchMuteChange({isMuted:je})},[Te.emitter,je]);const[tt,Ke]=m.useState(!1);m.useEffect(()=>{let Ze=null,Xe=!1;const Qt=()=>{Xe=!1,requestAnimationFrame(()=>{ae===0?Ke(!0):Ze=setTimeout(()=>{Xe||Ke(!0)},ae)})},Sr=()=>{requestAnimationFrame(()=>{Xe=!0,Ke(!1),Ze&&clearTimeout(Ze)})};return Te.emitter.addEventListener("waiting",Qt),Te.emitter.addEventListener("resume",Sr),()=>{Te.emitter.removeEventListener("waiting",Qt),Te.emitter.removeEventListener("resume",Sr),Ke(!1),Ze&&clearTimeout(Ze),Xe=!0}},[ae,Te.emitter]),m.useImperativeHandle(fe,()=>{const Ze={play:Te.play,pause:()=>{we(!1),Te.pause()},toggle:Zt,getContainerNode:()=>W.current,getCurrentFrame:Te.getCurrentFrame,isPlaying:Te.isPlaying,seekTo:Xe=>{const Qt=Ir-1,Sr=Math.max(0,Math.min(Qt,Xe));Te.isPlaying()&&(we(Sr!==Qt||t),Te.pause()),Sr===Qt&&!t&&Te.emitter.dispatchEnded(),Te.seek(Sr)},isFullscreen:()=>{const{current:Xe}=W;return Xe?document.fullscreenElement===Xe||document.webkitFullscreenElement===Xe:!1},requestFullscreen:ct,exitFullscreen:Pt,getVolume:()=>de?0:pe,setVolume:Xe=>{if(typeof Xe!="number")throw new TypeError(`setVolume() takes a number, got value of type ${typeof Xe}`);if(isNaN(Xe))throw new TypeError("setVolume() got a number that is NaN. Volume must be between 0 and 1.");if(Xe<0||Xe>1)throw new TypeError(`setVolume() got a number that is out of range. Must be between 0 and 1, got ${typeof Xe}`);dr(Xe)},isMuted:()=>je,mute:()=>{j(!0)},unmute:()=>{j(!1)},getScale:()=>Lt,pauseAndReturnToPlayStart:()=>{Te.pauseAndReturnToPlayStart()}};return Object.assign(Te.emitter,Ze)},[Ir,Pt,t,de,je,pe,Te,ct,j,dr,Zt,Lt]);const Oe=P?P.component:null,Se=m.useMemo(()=>V0({canvasSize:ue,config:ie,style:e,overflowVisible:ee,layout:nt}),[ue,ie,nt,ee,e]),Xt=m.useMemo(()=>z0({config:ie,layout:nt,scale:Lt,overflowVisible:ee}),[ie,nt,ee,Lt]),Tt=m.useMemo(()=>H0({canvasSize:ue,config:ie,layout:nt,scale:Lt,overflowVisible:ee}),[ue,ie,nt,ee,Lt]),Gt=m.useCallback(Ze=>{Te.pause(),Te.emitter.dispatchError(Ze)},[Te]),Mr=m.useCallback(Ze=>{Ze.stopPropagation(),ct()},[ct]),nr=m.useCallback(Ze=>{Ze.stopPropagation(),Pt()},[Pt]),Wr=m.useCallback(Ze=>{(Ze instanceof MouseEvent?Ze.button===2:Ze.nativeEvent.button)||Zt(Ze)},[Zt]),Jt=m.useCallback(()=>{Ct(!0)},[]),Di=m.useCallback(()=>{Ct(!1)},[]),Ri=m.useCallback(()=>{qe?Pt():ct()},[Pt,qe,ct]),{handlePointerDown:ti,handleDoubleClick:Fn}=fI(Wr,Ri,u&&i&&Yt);m.useEffect(()=>{be&&(Te.play(),he(!1))},[be,Te]);const wo=m.useMemo(()=>p?p({height:Se.height,width:Se.width,isBuffering:tt}):null,[Se.height,Se.width,p,tt]),ji=m.useMemo(()=>({type:"scale",scale:Lt}),[Lt]);if(!ie)return null;const xn=v?v({height:Z==="player-size"?Se.height:ie.height,width:Z==="player-size"?Se.width:ie.width,isBuffering:tt}):null;if(xn===void 0)throw new TypeError("renderPoster() must return a React element, but undefined was returned");const _o=xn&&[k&&!Te.isPlaying()&&!xt,T&&Te.isLastFrame&&!Te.isPlaying(),C&&!Te.hasPlayed&&!Te.isPlaying(),A&&tt&&Te.isPlaying()].some(Boolean),{left:za,top:Wa,width:Ua,height:So,...xo}=Xt,Cs=w.jsxs(w.Fragment,{children:[w.jsx("div",{style:Xt,onPointerDown:a?ti:void 0,onDoubleClick:u?Fn:void 0,children:w.jsxs("div",{style:Tt,className:Sd,children:[Oe?w.jsx(Z0,{onError:Gt,errorFallback:d,children:w.jsx(Re.CurrentScaleContext.Provider,{value:ji,children:w.jsx(Oe,{...P?.props??{},...s??{}})})}):null,_o&&Z==="composition-size"?w.jsx("div",{style:{...xo,width:ie.width,height:ie.height},onPointerDown:a?ti:void 0,onDoubleClick:u?Fn:void 0,children:xn}):null]})}),_o&&Z==="player-size"?w.jsx("div",{style:Xt,onPointerDown:a?ti:void 0,onDoubleClick:u?Fn:void 0,children:xn}):null,r?w.jsx(cI,{fps:ie.fps,durationInFrames:ie.durationInFrames,player:Te,containerRef:W,onFullscreenButtonClick:Mr,isFullscreen:qe,allowFullscreen:i,showVolumeControls:c,onExitFullscreenButtonClick:nr,spaceKeyToPlayOrPause:h,onSeekEnd:Di,onSeekStart:Jt,inFrame:M,outFrame:R,initiallyShowControls:N,canvasSize:ue,renderFullscreenButton:$,renderPlayPauseButton:V,alwaysShowControls:J,showPlaybackRateControl:q,buffering:tt,hideControlsWhenPointerDoesntMove:ye,onDoubleClick:u?Fn:void 0,onPointerDown:a?ti:void 0,renderMuteButton:G,renderVolumeSlider:X}):null]});return J0&&!gI?w.jsx("div",{ref:W,style:Se,className:b,children:Cs}):w.jsx("div",{ref:W,style:Se,className:b,children:w.jsx(m.Suspense,{fallback:wo,children:Cs})})},mI=m.forwardRef(pI),Q0="remotion.volumePreference",vI=r=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Q0,String(r))}catch(e){console.log("Could not persist volume",e)}},yI=()=>{if(typeof window>"u")return 1;try{const r=window.localStorage.getItem(Q0);return r?Number(r):1}catch{return 1}},Cd="player-comp",ey=({children:r,timelineContext:e,fps:t,compositionHeight:n,compositionWidth:i,durationInFrames:s,component:a,numberOfSharedAudioTags:c,initiallyMuted:u})=>{const h=m.useMemo(()=>({compositions:[{component:a,durationInFrames:s,height:n,width:i,fps:t,id:Cd,nonce:777,folderName:null,parentFolderName:null,schema:null,calculateMetadata:null}],folders:[],registerFolder:()=>{},unregisterFolder:()=>{},registerComposition:()=>{},unregisterComposition:()=>{},currentCompositionMetadata:null,setCurrentCompositionMetadata:()=>{},canvasContent:{type:"composition",compositionId:"player-comp"},setCanvasContent:()=>{},updateCompositionDefaultProps:()=>{}}),[a,s,n,i,t]),[d,g]=m.useState(()=>u),[p,v]=m.useState(()=>yI()),b=m.useMemo(()=>({mediaMuted:d,mediaVolume:p}),[d,p]),S=m.useCallback(T=>{v(T),vI(T)},[]),C=m.useMemo(()=>({setMediaMuted:g,setMediaVolume:S}),[S]);return w.jsx(Re.CanUseRemotionHooksProvider,{children:w.jsx(Re.Timeline.TimelineContext.Provider,{value:e,children:w.jsx(Re.CompositionManager.Provider,{value:h,children:w.jsx(Re.ResolveCompositionConfig,{children:w.jsx(Re.PrefetchProvider,{children:w.jsx(Re.DurationsContextProvider,{children:w.jsx(Re.MediaVolumeContext.Provider,{value:b,children:w.jsx(Re.SetMediaVolumeContext.Provider,{value:C,children:w.jsx(Re.SharedAudioContextProvider,{numberOfAudioTags:c,component:a,children:w.jsx(Re.BufferingProvider,{children:r})})})})})})})})})})},ty=(r,e)=>{if(typeof r>"u"||r===null)return r??null;if(typeof r!="number")throw new TypeError(`"${e}" must be a number, but is ${JSON.stringify(r)}`);if(Number.isNaN(r))throw new TypeError(`"${e}" must not be NaN, but is ${JSON.stringify(r)}`);if(!Number.isFinite(r))throw new TypeError(`"${e}" must be finite, but is ${JSON.stringify(r)}`);if(r%1!==0)throw new TypeError(`"${e}" must be an integer, but is ${JSON.stringify(r)}`);return r},bI=({inFrame:r,durationInFrames:e,outFrame:t})=>{const n=ty(r,"inFrame"),i=ty(t,"outFrame");if(!(n===null&&i===null)){if(n!==null&&n>e-1)throw new Error("inFrame must be less than (durationInFrames - 1), but is "+n);if(i!==null&&i>e-1)throw new Error("outFrame must be less than (durationInFrames - 1), but is "+i);if(n!==null&&n<0)throw new Error("inFrame must be greater than 0, but is "+n);if(i!==null&&i<=0)throw new Error(`outFrame must be greater than 0, but is ${i}. If you want to render a single frame, use <Thumbnail /> instead.`);if(i!==null&&n!==null&&i<=n)throw new Error("outFrame must be greater than inFrame, but is "+i+" <= "+n)}},wI=({initialFrame:r,durationInFrames:e})=>{if(typeof e!="number")throw new Error(`\`durationInFrames\` must be a number, but is ${JSON.stringify(e)}`);if(!(typeof r>"u")){if(typeof r!="number")throw new Error(`\`initialFrame\` must be a number, but is ${JSON.stringify(r)}`);if(Number.isNaN(r))throw new Error("`initialFrame` must be a number, but is NaN");if(!Number.isFinite(r))throw new Error("`initialFrame` must be a number, but is Infinity");if(r%1!==0)throw new Error(`\`initialFrame\` must be an integer, but is ${JSON.stringify(r)}`);if(r>e-1)throw new Error(`\`initialFrame\` must be less or equal than \`durationInFrames - 1\`, but is ${JSON.stringify(r)}`)}},_I=r=>{if(r!==void 0){if(r>4)throw new Error(`The highest possible playback rate is 4. You passed: ${r}`);if(r<-4)throw new Error(`The lowest possible playback rate is -4. You passed: ${r}`);if(r===0)throw new Error("A playback rate of 0 is not supported.")}},SI=Vc.validateFps,ry=Vc.validateDimension,xI=Vc.validateDurationInFrames,CI=Vc.validateDefaultAndInputProps,TI=r=>"component"in r?r.component:null,EI=({durationInFrames:r,compositionHeight:e,compositionWidth:t,fps:n,inputProps:i,style:s,controls:a=!1,loop:c=!1,autoPlay:u=!1,showVolumeControls:h=!0,allowFullscreen:d=!0,clickToPlay:g,doubleClickToFullscreen:p=!1,spaceKeyToPlayOrPause:v=!0,moveToBeginningWhenEnded:b=!0,numberOfSharedAudioTags:S=5,errorFallback:C=()=>"",playbackRate:T=1,renderLoading:k,className:A,showPosterWhenUnplayed:M,showPosterWhenEnded:R,showPosterWhenPaused:N,showPosterWhenBuffering:$,initialFrame:V,renderPoster:G,inFrame:X,outFrame:J,initiallyShowControls:q,renderFullscreenButton:Z,renderPlayPauseButton:ae,renderVolumeSlider:ye,alwaysShowControls:ee=!1,initiallyMuted:me=!1,showPlaybackRateControl:fe=!1,posterFillMode:ie="player-size",bufferStateDelayInMilliseconds:P,hideControlsWhenPointerDoesntMove:W=!0,overflowVisible:ue=!1,renderMuteButton:ge,browserMediaControlsBehavior:we,...be},he)=>{if(typeof window<"u"&&m.useLayoutEffect(()=>{window.remotion_isPlayer=!0},[]),be.defaultProps!==void 0)throw new Error("The <Player /> component does not accept `defaultProps`, but some were passed. Use `inputProps` instead.");const qe=TI(be);if(qe?.type===k0)throw new TypeError("'component' should not be an instance of <Composition/>. Pass the React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.");if(qe===k0)throw new TypeError("'component' must not be the 'Composition' component. Pass your own React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.");const Ue=Re.useLazyComponent(be);wI({initialFrame:V,durationInFrames:r});const[xt,Ct]=m.useState(()=>({[Cd]:V??0})),[Yt,Te]=m.useState(!1),[Zt]=m.useState("player-comp"),ct=m.useRef(null),Pt=m.useRef([]),Ir=m.useRef(!1),[nt,Lt]=m.useState(T);if(typeof e!="number")throw new TypeError(`'compositionHeight' must be a number but got '${typeof e}' instead`);if(typeof t!="number")throw new TypeError(`'compositionWidth' must be a number but got '${typeof t}' instead`);if(ry(e,"compositionHeight","of the <Player /> component"),ry(t,"compositionWidth","of the <Player /> component"),xI(r,{component:"of the <Player/> component",allowFloats:!1}),SI(n,"as a prop of the <Player/> component",!1),CI(i,"inputProps",null),bI({durationInFrames:r,inFrame:X,outFrame:J}),typeof a!="boolean"&&typeof a<"u")throw new TypeError(`'controls' must be a boolean or undefined but got '${typeof a}' instead`);if(typeof u!="boolean"&&typeof u<"u")throw new TypeError(`'autoPlay' must be a boolean or undefined but got '${typeof u}' instead`);if(typeof c!="boolean"&&typeof c<"u")throw new TypeError(`'loop' must be a boolean or undefined but got '${typeof c}' instead`);if(typeof p!="boolean"&&typeof p<"u")throw new TypeError(`'doubleClickToFullscreen' must be a boolean or undefined but got '${typeof p}' instead`);if(typeof h!="boolean"&&typeof h<"u")throw new TypeError(`'showVolumeControls' must be a boolean or undefined but got '${typeof h}' instead`);if(typeof d!="boolean"&&typeof d<"u")throw new TypeError(`'allowFullscreen' must be a boolean or undefined but got '${typeof d}' instead`);if(typeof g!="boolean"&&typeof g<"u")throw new TypeError(`'clickToPlay' must be a boolean or undefined but got '${typeof g}' instead`);if(typeof v!="boolean"&&typeof v<"u")throw new TypeError(`'spaceKeyToPlayOrPause' must be a boolean or undefined but got '${typeof v}' instead`);if(typeof S!="number"||S%1!==0||!Number.isFinite(S)||Number.isNaN(S)||S<0)throw new TypeError(`'numberOfSharedAudioTags' must be an integer but got '${S}' instead`);_I(nt),m.useEffect(()=>{Lt(T)},[T]),m.useImperativeHandle(he,()=>ct.current,[]);const nn=m.useMemo(()=>({frame:xt,playing:Yt,rootId:Zt,playbackRate:nt,imperativePlaying:Ir,setPlaybackRate:pe=>{Lt(pe)},audioAndVideoTags:Pt}),[xt,nt,Yt,Zt]),dr=m.useMemo(()=>({setFrame:Ct,setPlaying:Te}),[Ct]);typeof window<"u"&&m.useLayoutEffect(()=>{Re.CSSUtils.injectCSS(Re.CSSUtils.makeDefaultPreviewCSS(`.${Sd}`,"#fff"))},[]);const j=m.useMemo(()=>i??{},[i]),de=m.useMemo(()=>we??{mode:"prevent-media-session"},[we]);return w.jsx(Re.IsPlayerContextProvider,{children:w.jsx(ey,{timelineContext:nn,component:Ue,compositionHeight:e,compositionWidth:t,durationInFrames:r,fps:n,numberOfSharedAudioTags:S,initiallyMuted:me,children:w.jsx(Re.Timeline.SetTimelineContext.Provider,{value:dr,children:w.jsx(kA,{currentPlaybackRate:nt,children:w.jsx(mI,{ref:ct,posterFillMode:ie,renderLoading:k,autoPlay:!!u,loop:!!c,controls:!!a,errorFallback:C,style:s,inputProps:j,allowFullscreen:!!d,moveToBeginningWhenEnded:!!b,clickToPlay:typeof g=="boolean"?g:!!a,showVolumeControls:!!h,doubleClickToFullscreen:!!p,spaceKeyToPlayOrPause:!!v,playbackRate:nt,className:A??void 0,showPosterWhenUnplayed:!!M,showPosterWhenEnded:!!R,showPosterWhenPaused:!!N,showPosterWhenBuffering:!!$,renderPoster:G,inFrame:X??null,outFrame:J??null,initiallyShowControls:q??!0,renderFullscreen:Z??null,renderPlayPauseButton:ae??null,renderMuteButton:ge??null,renderVolumeSlider:ye??null,alwaysShowControls:ee,showPlaybackRateControl:fe,bufferStateDelayInMilliseconds:P??300,hideControlsWhenPointerDoesntMove:W,overflowVisible:ue,browserMediaControlsBehavior:de})})})})})},kI=m.forwardRef,OI=kI(EI),AI=()=>{const r=m.useContext(U0);if(!r)throw new TypeError("Expected Player event emitter context");return m.useMemo(()=>({emitter:r}),[r])},Td=Pe.version.split(".")[0];if(Td==="0")throw new Error(`Version ${Td} of "react" is not supported by Remotion`);var II=parseInt(Td,10)>=18,MI=({style:r,inputProps:e,errorFallback:t,renderLoading:n,className:i,overflowVisible:s},a)=>{const c=Re.useUnsafeVideoConfig(),u=Re.useVideo(),h=m.useRef(null),d=yd(h,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!1}),g=m.useMemo(()=>!c||!d?null:B0({canvasSize:d,compositionHeight:c.height,compositionWidth:c.width,previewSize:"auto"}),[d,c]),p=g?.scale??1,v=AI();$0(v.emitter),m.useImperativeHandle(a,()=>{const N={getContainerNode:()=>h.current,getScale:()=>p};return Object.assign(v.emitter,N)},[p,v.emitter]);const b=u?u.component:null,S=m.useMemo(()=>V0({config:c,style:r,canvasSize:d,overflowVisible:s,layout:g}),[d,c,g,s,r]),C=m.useMemo(()=>z0({config:c,layout:g,scale:p,overflowVisible:s}),[c,g,s,p]),T=m.useMemo(()=>H0({canvasSize:d,config:c,layout:g,scale:p,overflowVisible:s}),[d,c,g,s,p]),k=m.useCallback(N=>{v.emitter.dispatchError(N)},[v.emitter]),A=m.useMemo(()=>n?n({height:S.height,width:S.width,isBuffering:!1}):null,[S.height,S.width,n]),M=m.useMemo(()=>({type:"scale",scale:p}),[p]);if(!c)return null;const R=w.jsx("div",{style:C,children:w.jsx("div",{style:T,className:Sd,children:b?w.jsx(Z0,{onError:k,errorFallback:t,children:w.jsx(Re.CurrentScaleContext.Provider,{value:M,children:w.jsx(b,{...u?.props??{},...e??{}})})}):null})});return J0&&!II?w.jsx("div",{ref:h,style:S,className:i,children:R}):w.jsx("div",{ref:h,style:S,className:i,children:w.jsx(m.Suspense,{fallback:A,children:R})})},PI=m.forwardRef(MI),DI=({frameToDisplay:r,style:e,inputProps:t,compositionHeight:n,compositionWidth:i,durationInFrames:s,fps:a,className:c,errorFallback:u=()=>"",renderLoading:h,overflowVisible:d=!1,...g},p)=>{typeof window<"u"&&m.useLayoutEffect(()=>{window.remotion_isPlayer=!0},[]);const[v]=m.useState(()=>String(Zi(null))),b=m.useRef(null),S=m.useMemo(()=>({playing:!1,frame:{[Cd]:r},rootId:v,imperativePlaying:{current:!1},playbackRate:1,setPlaybackRate:()=>{throw new Error("thumbnail")},audioAndVideoTags:{current:[]}}),[r,v]);m.useImperativeHandle(p,()=>b.current,[]);const C=Re.useLazyComponent(g),[T]=m.useState(()=>new EA),k=m.useMemo(()=>t??{},[t]);return w.jsx(Re.IsPlayerContextProvider,{children:w.jsx(ey,{timelineContext:S,component:C,compositionHeight:n,compositionWidth:i,durationInFrames:s,fps:a,numberOfSharedAudioTags:0,initiallyMuted:!0,children:w.jsx(U0.Provider,{value:T,children:w.jsx(PI,{ref:b,className:c,errorFallback:u,inputProps:k,renderLoading:h,style:e,overflowVisible:d})})})})},RI=m.forwardRef;RI(DI);const Wc=(r,e)=>{const t=r.from/1e3*e,n=r.to/1e3*e-t;return{from:t,durationInFrames:n}},ny={text:(r,e)=>{const{fps:t,height:n,width:i}=e,{from:s,durationInFrames:a}=Wc(r.display,t);return w.jsx(Mn,{from:s,durationInFrames:a,"data-track-item":"transition-element",style:{position:"absolute",width:r.details.width??300,height:r.details.height??400,transform:r.details.transform??"none",fontSize:r.details.fontSize||"16px",textAlign:r.details.textAlign||"left",top:r.details.top??300,left:r.details.left??600,color:r.details.color||"#000000",backgroundColor:r.details.backgroundColor||"transparent",border:r.details.border??"none",opacity:r.details.opacity??100/100,fontFamily:r.details.fontFamily||"Arial",textDecoration:r.details.textDecoration||"none",fontWeight:r.details.fontWeight||"normal",lineHeight:r.details.lineHeight||"normal",letterSpacing:r.details.letterSpacing||"normal",wordSpacing:r.details.wordSpacing||"normal",wordWrap:r.details.wordWrap||"normal",wordBreak:r.details.wordBreak||"normal",pointerEvents:"auto"},children:w.jsx("div",{children:r.details.text})},r.id)},image:(r,e)=>{const{fps:t}=e,{from:n,durationInFrames:i}=Wc(r.display,t);return w.jsx(Mn,{from:n,durationInFrames:i,style:{width:r.details.width??"100%",height:r.details.height??"auto",transform:r.details.transform??"none",opacity:(r.details.opacity??100)/100||1,border:r.details.border??"none",borderRadius:r.details.borderRadius??"0",boxShadow:r.details.boxShadow??"none",filter:r.details.filter||"none",top:r.details.top??0,left:r.details.left??0},children:w.jsx(ea,{style:{pointerEvents:"none"},children:w.jsx(A0,{style:{pointerEvents:"none"},"data-id":r.id,src:r.details.src})})},r.id)},video:(r,e)=>{const{fps:t}=e,{from:n,durationInFrames:i}=Wc(r.display,t),s=r.trim,a=r.details.crop||{x:0,y:0,width:r.details.width,height:r.details.height};return s?w.jsx(Mn,{premountFor:30*5,from:n,durationInFrames:i,style:{width:a.width||"100%",height:a.height||"auto",transform:r.details.transform??"none",opacity:(r.details.opacity??100)/100||1,border:r.details.border??"none",borderRadius:r.details.borderRadius??"0",boxShadow:r.details.boxShadow??"none",top:r.details.top??0,left:r.details.left??0,overflow:"hidden"},children:w.jsx(ea,{style:{pointerEvents:"none",width:r.details.width,height:r.details.height,top:-a.y,left:-a.x},children:w.jsx(j0,{startFrom:s.from/1e3*t,endAt:s.to/1e3*t,src:r.details.src,volume:(r.details.volume??100)/100,style:{pointerEvents:"none",width:r.details.width,height:r.details.height}})})},r.id):w.jsx(w.Fragment,{})},audio:(r,e)=>{const{fps:t}=e,{from:n,durationInFrames:i}=Wc(r.display,t),s=r.trim;return s?w.jsx(Mn,{className:`moonshine-scene-item id-${r.id} moonshine-scene-item-type-${r.type}`,from:n,durationInFrames:i,style:{userSelect:"none",pointerEvents:"none"},children:w.jsx(ea,{children:w.jsx(ia,{startFrom:s.from/1e3*t,endAt:s.to/1e3*t,src:r.details.src,volume:(r.details.volume??100)/100})})},r.id):w.jsx(w.Fragment,{})}};var Uc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Uc.exports,function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",g=1,p=2,v=4,b=1,S=2,C=1,T=2,k=4,A=8,M=16,R=32,N=64,$=128,V=256,G=512,X=30,J="...",q=800,Z=16,ae=1,ye=2,ee=3,me=1/0,fe=9007199254740991,ie=17976931348623157e292,P=NaN,W=4294967295,ue=W-1,ge=W>>>1,we=[["ary",$],["bind",C],["bindKey",T],["curry",A],["curryRight",M],["flip",G],["partial",R],["partialRight",N],["rearg",V]],be="[object Arguments]",he="[object Array]",qe="[object AsyncFunction]",Ue="[object Boolean]",xt="[object Date]",Ct="[object DOMException]",Yt="[object Error]",Te="[object Function]",Zt="[object GeneratorFunction]",ct="[object Map]",Pt="[object Number]",Ir="[object Null]",nt="[object Object]",Lt="[object Promise]",nn="[object Proxy]",dr="[object RegExp]",j="[object Set]",de="[object String]",pe="[object Symbol]",je="[object Undefined]",tt="[object WeakMap]",Ke="[object WeakSet]",Oe="[object ArrayBuffer]",Se="[object DataView]",Xt="[object Float32Array]",Tt="[object Float64Array]",Gt="[object Int8Array]",Mr="[object Int16Array]",nr="[object Int32Array]",Wr="[object Uint8Array]",Jt="[object Uint8ClampedArray]",Di="[object Uint16Array]",Ri="[object Uint32Array]",ti=/\b__p \+= '';/g,Fn=/\b(__p \+=) '' \+/g,wo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ji=/&(?:amp|lt|gt|quot|#39);/g,xn=/[&<>"']/g,_o=RegExp(ji.source),za=RegExp(xn.source),Wa=/<%-([\s\S]+?)%>/g,Ua=/<%([\s\S]+?)%>/g,So=/<%=([\s\S]+?)%>/g,xo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cs=/^\w*$/,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xe=/[\\^$.*+?()[\]{}|]/g,Qt=RegExp(Xe.source),Sr=/^\s+/,Ts=/\s/,$a=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nu=/\{\n\/\* \[wrapped with (.+)\] \*/,_=/,? & /,H=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,re=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,xe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ke=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,st=/^0b[01]+$/i,rt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,fr=/^(?:0|[1-9]\d*)$/,ri=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xr=/($^)/,Co=/['\n\r\u2028\u2029\\]/g,Pr="\\ud800-\\udfff",Y3="\\u0300-\\u036f",X3="\\ufe20-\\ufe2f",G3="\\u20d0-\\u20ff",c_=Y3+X3+G3,l_="\\u2700-\\u27bf",u_="a-z\\xdf-\\xf6\\xf8-\\xff",q3="\\xac\\xb1\\xd7\\xf7",K3="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Z3="\\u2000-\\u206f",J3=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",h_="A-Z\\xc0-\\xd6\\xd8-\\xde",d_="\\ufe0e\\ufe0f",f_=q3+K3+Z3+J3,sg="[']",Q3="["+Pr+"]",g_="["+f_+"]",iu="["+c_+"]",p_="\\d+",e4="["+l_+"]",m_="["+u_+"]",v_="[^"+Pr+f_+p_+l_+u_+h_+"]",og="\\ud83c[\\udffb-\\udfff]",t4="(?:"+iu+"|"+og+")",y_="[^"+Pr+"]",ag="(?:\\ud83c[\\udde6-\\uddff]){2}",cg="[\\ud800-\\udbff][\\udc00-\\udfff]",To="["+h_+"]",b_="\\u200d",w_="(?:"+m_+"|"+v_+")",r4="(?:"+To+"|"+v_+")",__="(?:"+sg+"(?:d|ll|m|re|s|t|ve))?",S_="(?:"+sg+"(?:D|LL|M|RE|S|T|VE))?",x_=t4+"?",C_="["+d_+"]?",n4="(?:"+b_+"(?:"+[y_,ag,cg].join("|")+")"+C_+x_+")*",i4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",s4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",T_=C_+x_+n4,o4="(?:"+[e4,ag,cg].join("|")+")"+T_,a4="(?:"+[y_+iu+"?",iu,ag,cg,Q3].join("|")+")",c4=RegExp(sg,"g"),l4=RegExp(iu,"g"),lg=RegExp(og+"(?="+og+")|"+a4+T_,"g"),u4=RegExp([To+"?"+m_+"+"+__+"(?="+[g_,To,"$"].join("|")+")",r4+"+"+S_+"(?="+[g_,To+w_,"$"].join("|")+")",To+"?"+w_+"+"+__,To+"+"+S_,s4,i4,p_,o4].join("|"),"g"),h4=RegExp("["+b_+Pr+c_+d_+"]"),d4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,f4=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],g4=-1,mt={};mt[Xt]=mt[Tt]=mt[Gt]=mt[Mr]=mt[nr]=mt[Wr]=mt[Jt]=mt[Di]=mt[Ri]=!0,mt[be]=mt[he]=mt[Oe]=mt[Ue]=mt[Se]=mt[xt]=mt[Yt]=mt[Te]=mt[ct]=mt[Pt]=mt[nt]=mt[dr]=mt[j]=mt[de]=mt[tt]=!1;var gt={};gt[be]=gt[he]=gt[Oe]=gt[Se]=gt[Ue]=gt[xt]=gt[Xt]=gt[Tt]=gt[Gt]=gt[Mr]=gt[nr]=gt[ct]=gt[Pt]=gt[nt]=gt[dr]=gt[j]=gt[de]=gt[pe]=gt[Wr]=gt[Jt]=gt[Di]=gt[Ri]=!0,gt[Yt]=gt[Te]=gt[tt]=!1;var p4={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},m4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v4={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},y4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},b4=parseFloat,w4=parseInt,E_=typeof Vo=="object"&&Vo&&Vo.Object===Object&&Vo,_4=typeof self=="object"&&self&&self.Object===Object&&self,ir=E_||_4||Function("return this")(),ug=e&&!e.nodeType&&e,Es=ug&&!0&&r&&!r.nodeType&&r,k_=Es&&Es.exports===ug,hg=k_&&E_.process,sn=function(){try{var z=Es&&Es.require&&Es.require("util").types;return z||hg&&hg.binding&&hg.binding("util")}catch{}}(),O_=sn&&sn.isArrayBuffer,A_=sn&&sn.isDate,I_=sn&&sn.isMap,M_=sn&&sn.isRegExp,P_=sn&&sn.isSet,D_=sn&&sn.isTypedArray;function Ur(z,Q,K){switch(K.length){case 0:return z.call(Q);case 1:return z.call(Q,K[0]);case 2:return z.call(Q,K[0],K[1]);case 3:return z.call(Q,K[0],K[1],K[2])}return z.apply(Q,K)}function S4(z,Q,K,_e){for(var Le=-1,ot=z==null?0:z.length;++Le<ot;){var qt=z[Le];Q(_e,qt,K(qt),z)}return _e}function on(z,Q){for(var K=-1,_e=z==null?0:z.length;++K<_e&&Q(z[K],K,z)!==!1;);return z}function x4(z,Q){for(var K=z==null?0:z.length;K--&&Q(z[K],K,z)!==!1;);return z}function R_(z,Q){for(var K=-1,_e=z==null?0:z.length;++K<_e;)if(!Q(z[K],K,z))return!1;return!0}function Li(z,Q){for(var K=-1,_e=z==null?0:z.length,Le=0,ot=[];++K<_e;){var qt=z[K];Q(qt,K,z)&&(ot[Le++]=qt)}return ot}function su(z,Q){var K=z==null?0:z.length;return!!K&&Eo(z,Q,0)>-1}function dg(z,Q,K){for(var _e=-1,Le=z==null?0:z.length;++_e<Le;)if(K(Q,z[_e]))return!0;return!1}function wt(z,Q){for(var K=-1,_e=z==null?0:z.length,Le=Array(_e);++K<_e;)Le[K]=Q(z[K],K,z);return Le}function Fi(z,Q){for(var K=-1,_e=Q.length,Le=z.length;++K<_e;)z[Le+K]=Q[K];return z}function fg(z,Q,K,_e){var Le=-1,ot=z==null?0:z.length;for(_e&&ot&&(K=z[++Le]);++Le<ot;)K=Q(K,z[Le],Le,z);return K}function C4(z,Q,K,_e){var Le=z==null?0:z.length;for(_e&&Le&&(K=z[--Le]);Le--;)K=Q(K,z[Le],Le,z);return K}function gg(z,Q){for(var K=-1,_e=z==null?0:z.length;++K<_e;)if(Q(z[K],K,z))return!0;return!1}var T4=pg("length");function E4(z){return z.split("")}function k4(z){return z.match(H)||[]}function j_(z,Q,K){var _e;return K(z,function(Le,ot,qt){if(Q(Le,ot,qt))return _e=ot,!1}),_e}function ou(z,Q,K,_e){for(var Le=z.length,ot=K+(_e?1:-1);_e?ot--:++ot<Le;)if(Q(z[ot],ot,z))return ot;return-1}function Eo(z,Q,K){return Q===Q?B4(z,Q,K):ou(z,L_,K)}function O4(z,Q,K,_e){for(var Le=K-1,ot=z.length;++Le<ot;)if(_e(z[Le],Q))return Le;return-1}function L_(z){return z!==z}function F_(z,Q){var K=z==null?0:z.length;return K?vg(z,Q)/K:P}function pg(z){return function(Q){return Q==null?t:Q[z]}}function mg(z){return function(Q){return z==null?t:z[Q]}}function N_(z,Q,K,_e,Le){return Le(z,function(ot,qt,ft){K=_e?(_e=!1,ot):Q(K,ot,qt,ft)}),K}function A4(z,Q){var K=z.length;for(z.sort(Q);K--;)z[K]=z[K].value;return z}function vg(z,Q){for(var K,_e=-1,Le=z.length;++_e<Le;){var ot=Q(z[_e]);ot!==t&&(K=K===t?ot:K+ot)}return K}function yg(z,Q){for(var K=-1,_e=Array(z);++K<z;)_e[K]=Q(K);return _e}function I4(z,Q){return wt(Q,function(K){return[K,z[K]]})}function B_(z){return z&&z.slice(0,W_(z)+1).replace(Sr,"")}function $r(z){return function(Q){return z(Q)}}function bg(z,Q){return wt(Q,function(K){return z[K]})}function Ya(z,Q){return z.has(Q)}function V_(z,Q){for(var K=-1,_e=z.length;++K<_e&&Eo(Q,z[K],0)>-1;);return K}function H_(z,Q){for(var K=z.length;K--&&Eo(Q,z[K],0)>-1;);return K}function M4(z,Q){for(var K=z.length,_e=0;K--;)z[K]===Q&&++_e;return _e}var P4=mg(p4),D4=mg(m4);function R4(z){return"\\"+y4[z]}function j4(z,Q){return z==null?t:z[Q]}function ko(z){return h4.test(z)}function L4(z){return d4.test(z)}function F4(z){for(var Q,K=[];!(Q=z.next()).done;)K.push(Q.value);return K}function wg(z){var Q=-1,K=Array(z.size);return z.forEach(function(_e,Le){K[++Q]=[Le,_e]}),K}function z_(z,Q){return function(K){return z(Q(K))}}function Ni(z,Q){for(var K=-1,_e=z.length,Le=0,ot=[];++K<_e;){var qt=z[K];(qt===Q||qt===d)&&(z[K]=d,ot[Le++]=K)}return ot}function au(z){var Q=-1,K=Array(z.size);return z.forEach(function(_e){K[++Q]=_e}),K}function N4(z){var Q=-1,K=Array(z.size);return z.forEach(function(_e){K[++Q]=[_e,_e]}),K}function B4(z,Q,K){for(var _e=K-1,Le=z.length;++_e<Le;)if(z[_e]===Q)return _e;return-1}function V4(z,Q,K){for(var _e=K+1;_e--;)if(z[_e]===Q)return _e;return _e}function Oo(z){return ko(z)?z4(z):T4(z)}function Cn(z){return ko(z)?W4(z):E4(z)}function W_(z){for(var Q=z.length;Q--&&Ts.test(z.charAt(Q)););return Q}var H4=mg(v4);function z4(z){for(var Q=lg.lastIndex=0;lg.test(z);)++Q;return Q}function W4(z){return z.match(lg)||[]}function U4(z){return z.match(u4)||[]}var $4=function z(Q){Q=Q==null?ir:Ao.defaults(ir.Object(),Q,Ao.pick(ir,f4));var K=Q.Array,_e=Q.Date,Le=Q.Error,ot=Q.Function,qt=Q.Math,ft=Q.Object,_g=Q.RegExp,Y4=Q.String,an=Q.TypeError,cu=K.prototype,X4=ot.prototype,Io=ft.prototype,lu=Q["__core-js_shared__"],uu=X4.toString,ht=Io.hasOwnProperty,G4=0,U_=function(){var o=/[^.]+$/.exec(lu&&lu.keys&&lu.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),hu=Io.toString,q4=uu.call(ft),K4=ir._,Z4=_g("^"+uu.call(ht).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),du=k_?Q.Buffer:t,Bi=Q.Symbol,fu=Q.Uint8Array,$_=du?du.allocUnsafe:t,gu=z_(ft.getPrototypeOf,ft),Y_=ft.create,X_=Io.propertyIsEnumerable,pu=cu.splice,G_=Bi?Bi.isConcatSpreadable:t,Xa=Bi?Bi.iterator:t,ks=Bi?Bi.toStringTag:t,mu=function(){try{var o=Ps(ft,"defineProperty");return o({},"",{}),o}catch{}}(),J4=Q.clearTimeout!==ir.clearTimeout&&Q.clearTimeout,Q4=_e&&_e.now!==ir.Date.now&&_e.now,e6=Q.setTimeout!==ir.setTimeout&&Q.setTimeout,vu=qt.ceil,yu=qt.floor,Sg=ft.getOwnPropertySymbols,t6=du?du.isBuffer:t,q_=Q.isFinite,r6=cu.join,n6=z_(ft.keys,ft),Kt=qt.max,gr=qt.min,i6=_e.now,s6=Q.parseInt,K_=qt.random,o6=cu.reverse,xg=Ps(Q,"DataView"),Ga=Ps(Q,"Map"),Cg=Ps(Q,"Promise"),Mo=Ps(Q,"Set"),qa=Ps(Q,"WeakMap"),Ka=Ps(ft,"create"),bu=qa&&new qa,Po={},a6=Ds(xg),c6=Ds(Ga),l6=Ds(Cg),u6=Ds(Mo),h6=Ds(qa),wu=Bi?Bi.prototype:t,Za=wu?wu.valueOf:t,Z_=wu?wu.toString:t;function E(o){if(Dt(o)&&!Fe(o)&&!(o instanceof Ge)){if(o instanceof cn)return o;if(ht.call(o,"__wrapped__"))return JS(o)}return new cn(o)}var Do=function(){function o(){}return function(l){if(!Et(l))return{};if(Y_)return Y_(l);o.prototype=l;var f=new o;return o.prototype=t,f}}();function _u(){}function cn(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=t}E.templateSettings={escape:Wa,evaluate:Ua,interpolate:So,variable:"",imports:{_:E}},E.prototype=_u.prototype,E.prototype.constructor=E,cn.prototype=Do(_u.prototype),cn.prototype.constructor=cn;function Ge(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function d6(){var o=new Ge(this.__wrapped__);return o.__actions__=Dr(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Dr(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Dr(this.__views__),o}function f6(){if(this.__filtered__){var o=new Ge(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function g6(){var o=this.__wrapped__.value(),l=this.__dir__,f=Fe(o),y=l<0,x=f?o.length:0,O=Ej(0,x,this.__views__),D=O.start,L=O.end,U=L-D,te=y?L:D-1,ne=this.__iteratees__,se=ne.length,ve=0,Ee=gr(U,this.__takeCount__);if(!f||!y&&x==U&&Ee==U)return _S(o,this.__actions__);var Ie=[];e:for(;U--&&ve<Ee;){te+=l;for(var ze=-1,Me=o[te];++ze<se;){var Ye=ne[ze],Je=Ye.iteratee,Gr=Ye.type,Er=Je(Me);if(Gr==ye)Me=Er;else if(!Er){if(Gr==ae)continue e;break e}}Ie[ve++]=Me}return Ie}Ge.prototype=Do(_u.prototype),Ge.prototype.constructor=Ge;function Os(o){var l=-1,f=o==null?0:o.length;for(this.clear();++l<f;){var y=o[l];this.set(y[0],y[1])}}function p6(){this.__data__=Ka?Ka(null):{},this.size=0}function m6(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function v6(o){var l=this.__data__;if(Ka){var f=l[o];return f===u?t:f}return ht.call(l,o)?l[o]:t}function y6(o){var l=this.__data__;return Ka?l[o]!==t:ht.call(l,o)}function b6(o,l){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=Ka&&l===t?u:l,this}Os.prototype.clear=p6,Os.prototype.delete=m6,Os.prototype.get=v6,Os.prototype.has=y6,Os.prototype.set=b6;function ni(o){var l=-1,f=o==null?0:o.length;for(this.clear();++l<f;){var y=o[l];this.set(y[0],y[1])}}function w6(){this.__data__=[],this.size=0}function _6(o){var l=this.__data__,f=Su(l,o);if(f<0)return!1;var y=l.length-1;return f==y?l.pop():pu.call(l,f,1),--this.size,!0}function S6(o){var l=this.__data__,f=Su(l,o);return f<0?t:l[f][1]}function x6(o){return Su(this.__data__,o)>-1}function C6(o,l){var f=this.__data__,y=Su(f,o);return y<0?(++this.size,f.push([o,l])):f[y][1]=l,this}ni.prototype.clear=w6,ni.prototype.delete=_6,ni.prototype.get=S6,ni.prototype.has=x6,ni.prototype.set=C6;function ii(o){var l=-1,f=o==null?0:o.length;for(this.clear();++l<f;){var y=o[l];this.set(y[0],y[1])}}function T6(){this.size=0,this.__data__={hash:new Os,map:new(Ga||ni),string:new Os}}function E6(o){var l=Ru(this,o).delete(o);return this.size-=l?1:0,l}function k6(o){return Ru(this,o).get(o)}function O6(o){return Ru(this,o).has(o)}function A6(o,l){var f=Ru(this,o),y=f.size;return f.set(o,l),this.size+=f.size==y?0:1,this}ii.prototype.clear=T6,ii.prototype.delete=E6,ii.prototype.get=k6,ii.prototype.has=O6,ii.prototype.set=A6;function As(o){var l=-1,f=o==null?0:o.length;for(this.__data__=new ii;++l<f;)this.add(o[l])}function I6(o){return this.__data__.set(o,u),this}function M6(o){return this.__data__.has(o)}As.prototype.add=As.prototype.push=I6,As.prototype.has=M6;function Tn(o){var l=this.__data__=new ni(o);this.size=l.size}function P6(){this.__data__=new ni,this.size=0}function D6(o){var l=this.__data__,f=l.delete(o);return this.size=l.size,f}function R6(o){return this.__data__.get(o)}function j6(o){return this.__data__.has(o)}function L6(o,l){var f=this.__data__;if(f instanceof ni){var y=f.__data__;if(!Ga||y.length<i-1)return y.push([o,l]),this.size=++f.size,this;f=this.__data__=new ii(y)}return f.set(o,l),this.size=f.size,this}Tn.prototype.clear=P6,Tn.prototype.delete=D6,Tn.prototype.get=R6,Tn.prototype.has=j6,Tn.prototype.set=L6;function J_(o,l){var f=Fe(o),y=!f&&Rs(o),x=!f&&!y&&Ui(o),O=!f&&!y&&!x&&Fo(o),D=f||y||x||O,L=D?yg(o.length,Y4):[],U=L.length;for(var te in o)(l||ht.call(o,te))&&!(D&&(te=="length"||x&&(te=="offset"||te=="parent")||O&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||ci(te,U)))&&L.push(te);return L}function Q_(o){var l=o.length;return l?o[jg(0,l-1)]:t}function F6(o,l){return ju(Dr(o),Is(l,0,o.length))}function N6(o){return ju(Dr(o))}function Tg(o,l,f){(f!==t&&!En(o[l],f)||f===t&&!(l in o))&&si(o,l,f)}function Ja(o,l,f){var y=o[l];(!(ht.call(o,l)&&En(y,f))||f===t&&!(l in o))&&si(o,l,f)}function Su(o,l){for(var f=o.length;f--;)if(En(o[f][0],l))return f;return-1}function B6(o,l,f,y){return Vi(o,function(x,O,D){l(y,x,f(x),D)}),y}function eS(o,l){return o&&Bn(l,er(l),o)}function V6(o,l){return o&&Bn(l,jr(l),o)}function si(o,l,f){l=="__proto__"&&mu?mu(o,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[l]=f}function Eg(o,l){for(var f=-1,y=l.length,x=K(y),O=o==null;++f<y;)x[f]=O?t:op(o,l[f]);return x}function Is(o,l,f){return o===o&&(f!==t&&(o=o<=f?o:f),l!==t&&(o=o>=l?o:l)),o}function ln(o,l,f,y,x,O){var D,L=l&g,U=l&p,te=l&v;if(f&&(D=x?f(o,y,x,O):f(o)),D!==t)return D;if(!Et(o))return o;var ne=Fe(o);if(ne){if(D=Oj(o),!L)return Dr(o,D)}else{var se=pr(o),ve=se==Te||se==Zt;if(Ui(o))return CS(o,L);if(se==nt||se==be||ve&&!x){if(D=U||ve?{}:WS(o),!L)return U?vj(o,V6(D,o)):mj(o,eS(D,o))}else{if(!gt[se])return x?o:{};D=Aj(o,se,L)}}O||(O=new Tn);var Ee=O.get(o);if(Ee)return Ee;O.set(o,D),yx(o)?o.forEach(function(Me){D.add(ln(Me,l,f,Me,o,O))}):mx(o)&&o.forEach(function(Me,Ye){D.set(Ye,ln(Me,l,f,Ye,o,O))});var Ie=te?U?Yg:$g:U?jr:er,ze=ne?t:Ie(o);return on(ze||o,function(Me,Ye){ze&&(Ye=Me,Me=o[Ye]),Ja(D,Ye,ln(Me,l,f,Ye,o,O))}),D}function H6(o){var l=er(o);return function(f){return tS(f,o,l)}}function tS(o,l,f){var y=f.length;if(o==null)return!y;for(o=ft(o);y--;){var x=f[y],O=l[x],D=o[x];if(D===t&&!(x in o)||!O(D))return!1}return!0}function rS(o,l,f){if(typeof o!="function")throw new an(a);return sc(function(){o.apply(t,f)},l)}function Qa(o,l,f,y){var x=-1,O=su,D=!0,L=o.length,U=[],te=l.length;if(!L)return U;f&&(l=wt(l,$r(f))),y?(O=dg,D=!1):l.length>=i&&(O=Ya,D=!1,l=new As(l));e:for(;++x<L;){var ne=o[x],se=f==null?ne:f(ne);if(ne=y||ne!==0?ne:0,D&&se===se){for(var ve=te;ve--;)if(l[ve]===se)continue e;U.push(ne)}else O(l,se,y)||U.push(ne)}return U}var Vi=AS(Nn),nS=AS(Og,!0);function z6(o,l){var f=!0;return Vi(o,function(y,x,O){return f=!!l(y,x,O),f}),f}function xu(o,l,f){for(var y=-1,x=o.length;++y<x;){var O=o[y],D=l(O);if(D!=null&&(L===t?D===D&&!Xr(D):f(D,L)))var L=D,U=O}return U}function W6(o,l,f,y){var x=o.length;for(f=He(f),f<0&&(f=-f>x?0:x+f),y=y===t||y>x?x:He(y),y<0&&(y+=x),y=f>y?0:wx(y);f<y;)o[f++]=l;return o}function iS(o,l){var f=[];return Vi(o,function(y,x,O){l(y,x,O)&&f.push(y)}),f}function sr(o,l,f,y,x){var O=-1,D=o.length;for(f||(f=Mj),x||(x=[]);++O<D;){var L=o[O];l>0&&f(L)?l>1?sr(L,l-1,f,y,x):Fi(x,L):y||(x[x.length]=L)}return x}var kg=IS(),sS=IS(!0);function Nn(o,l){return o&&kg(o,l,er)}function Og(o,l){return o&&sS(o,l,er)}function Cu(o,l){return Li(l,function(f){return li(o[f])})}function Ms(o,l){l=zi(l,o);for(var f=0,y=l.length;o!=null&&f<y;)o=o[Vn(l[f++])];return f&&f==y?o:t}function oS(o,l,f){var y=l(o);return Fe(o)?y:Fi(y,f(o))}function Cr(o){return o==null?o===t?je:Ir:ks&&ks in ft(o)?Tj(o):Nj(o)}function Ag(o,l){return o>l}function U6(o,l){return o!=null&&ht.call(o,l)}function $6(o,l){return o!=null&&l in ft(o)}function Y6(o,l,f){return o>=gr(l,f)&&o<Kt(l,f)}function Ig(o,l,f){for(var y=f?dg:su,x=o[0].length,O=o.length,D=O,L=K(O),U=1/0,te=[];D--;){var ne=o[D];D&&l&&(ne=wt(ne,$r(l))),U=gr(ne.length,U),L[D]=!f&&(l||x>=120&&ne.length>=120)?new As(D&&ne):t}ne=o[0];var se=-1,ve=L[0];e:for(;++se<x&&te.length<U;){var Ee=ne[se],Ie=l?l(Ee):Ee;if(Ee=f||Ee!==0?Ee:0,!(ve?Ya(ve,Ie):y(te,Ie,f))){for(D=O;--D;){var ze=L[D];if(!(ze?Ya(ze,Ie):y(o[D],Ie,f)))continue e}ve&&ve.push(Ie),te.push(Ee)}}return te}function X6(o,l,f,y){return Nn(o,function(x,O,D){l(y,f(x),O,D)}),y}function ec(o,l,f){l=zi(l,o),o=XS(o,l);var y=o==null?o:o[Vn(hn(l))];return y==null?t:Ur(y,o,f)}function aS(o){return Dt(o)&&Cr(o)==be}function G6(o){return Dt(o)&&Cr(o)==Oe}function q6(o){return Dt(o)&&Cr(o)==xt}function tc(o,l,f,y,x){return o===l?!0:o==null||l==null||!Dt(o)&&!Dt(l)?o!==o&&l!==l:K6(o,l,f,y,tc,x)}function K6(o,l,f,y,x,O){var D=Fe(o),L=Fe(l),U=D?he:pr(o),te=L?he:pr(l);U=U==be?nt:U,te=te==be?nt:te;var ne=U==nt,se=te==nt,ve=U==te;if(ve&&Ui(o)){if(!Ui(l))return!1;D=!0,ne=!1}if(ve&&!ne)return O||(O=new Tn),D||Fo(o)?VS(o,l,f,y,x,O):xj(o,l,U,f,y,x,O);if(!(f&b)){var Ee=ne&&ht.call(o,"__wrapped__"),Ie=se&&ht.call(l,"__wrapped__");if(Ee||Ie){var ze=Ee?o.value():o,Me=Ie?l.value():l;return O||(O=new Tn),x(ze,Me,f,y,O)}}return ve?(O||(O=new Tn),Cj(o,l,f,y,x,O)):!1}function Z6(o){return Dt(o)&&pr(o)==ct}function Mg(o,l,f,y){var x=f.length,O=x,D=!y;if(o==null)return!O;for(o=ft(o);x--;){var L=f[x];if(D&&L[2]?L[1]!==o[L[0]]:!(L[0]in o))return!1}for(;++x<O;){L=f[x];var U=L[0],te=o[U],ne=L[1];if(D&&L[2]){if(te===t&&!(U in o))return!1}else{var se=new Tn;if(y)var ve=y(te,ne,U,o,l,se);if(!(ve===t?tc(ne,te,b|S,y,se):ve))return!1}}return!0}function cS(o){if(!Et(o)||Dj(o))return!1;var l=li(o)?Z4:rt;return l.test(Ds(o))}function J6(o){return Dt(o)&&Cr(o)==dr}function Q6(o){return Dt(o)&&pr(o)==j}function ej(o){return Dt(o)&&Hu(o.length)&&!!mt[Cr(o)]}function lS(o){return typeof o=="function"?o:o==null?Lr:typeof o=="object"?Fe(o)?dS(o[0],o[1]):hS(o):Mx(o)}function Pg(o){if(!ic(o))return n6(o);var l=[];for(var f in ft(o))ht.call(o,f)&&f!="constructor"&&l.push(f);return l}function tj(o){if(!Et(o))return Fj(o);var l=ic(o),f=[];for(var y in o)y=="constructor"&&(l||!ht.call(o,y))||f.push(y);return f}function Dg(o,l){return o<l}function uS(o,l){var f=-1,y=Rr(o)?K(o.length):[];return Vi(o,function(x,O,D){y[++f]=l(x,O,D)}),y}function hS(o){var l=Gg(o);return l.length==1&&l[0][2]?$S(l[0][0],l[0][1]):function(f){return f===o||Mg(f,o,l)}}function dS(o,l){return Kg(o)&&US(l)?$S(Vn(o),l):function(f){var y=op(f,o);return y===t&&y===l?ap(f,o):tc(l,y,b|S)}}function Tu(o,l,f,y,x){o!==l&&kg(l,function(O,D){if(x||(x=new Tn),Et(O))rj(o,l,D,f,Tu,y,x);else{var L=y?y(Jg(o,D),O,D+"",o,l,x):t;L===t&&(L=O),Tg(o,D,L)}},jr)}function rj(o,l,f,y,x,O,D){var L=Jg(o,f),U=Jg(l,f),te=D.get(U);if(te){Tg(o,f,te);return}var ne=O?O(L,U,f+"",o,l,D):t,se=ne===t;if(se){var ve=Fe(U),Ee=!ve&&Ui(U),Ie=!ve&&!Ee&&Fo(U);ne=U,ve||Ee||Ie?Fe(L)?ne=L:Ft(L)?ne=Dr(L):Ee?(se=!1,ne=CS(U,!0)):Ie?(se=!1,ne=TS(U,!0)):ne=[]:oc(U)||Rs(U)?(ne=L,Rs(L)?ne=_x(L):(!Et(L)||li(L))&&(ne=WS(U))):se=!1}se&&(D.set(U,ne),x(ne,U,y,O,D),D.delete(U)),Tg(o,f,ne)}function fS(o,l){var f=o.length;if(f)return l+=l<0?f:0,ci(l,f)?o[l]:t}function gS(o,l,f){l.length?l=wt(l,function(O){return Fe(O)?function(D){return Ms(D,O.length===1?O[0]:O)}:O}):l=[Lr];var y=-1;l=wt(l,$r(Ae()));var x=uS(o,function(O,D,L){var U=wt(l,function(te){return te(O)});return{criteria:U,index:++y,value:O}});return A4(x,function(O,D){return pj(O,D,f)})}function nj(o,l){return pS(o,l,function(f,y){return ap(o,y)})}function pS(o,l,f){for(var y=-1,x=l.length,O={};++y<x;){var D=l[y],L=Ms(o,D);f(L,D)&&rc(O,zi(D,o),L)}return O}function ij(o){return function(l){return Ms(l,o)}}function Rg(o,l,f,y){var x=y?O4:Eo,O=-1,D=l.length,L=o;for(o===l&&(l=Dr(l)),f&&(L=wt(o,$r(f)));++O<D;)for(var U=0,te=l[O],ne=f?f(te):te;(U=x(L,ne,U,y))>-1;)L!==o&&pu.call(L,U,1),pu.call(o,U,1);return o}function mS(o,l){for(var f=o?l.length:0,y=f-1;f--;){var x=l[f];if(f==y||x!==O){var O=x;ci(x)?pu.call(o,x,1):Ng(o,x)}}return o}function jg(o,l){return o+yu(K_()*(l-o+1))}function sj(o,l,f,y){for(var x=-1,O=Kt(vu((l-o)/(f||1)),0),D=K(O);O--;)D[y?O:++x]=o,o+=f;return D}function Lg(o,l){var f="";if(!o||l<1||l>fe)return f;do l%2&&(f+=o),l=yu(l/2),l&&(o+=o);while(l);return f}function We(o,l){return Qg(YS(o,l,Lr),o+"")}function oj(o){return Q_(No(o))}function aj(o,l){var f=No(o);return ju(f,Is(l,0,f.length))}function rc(o,l,f,y){if(!Et(o))return o;l=zi(l,o);for(var x=-1,O=l.length,D=O-1,L=o;L!=null&&++x<O;){var U=Vn(l[x]),te=f;if(U==="__proto__"||U==="constructor"||U==="prototype")return o;if(x!=D){var ne=L[U];te=y?y(ne,U,L):t,te===t&&(te=Et(ne)?ne:ci(l[x+1])?[]:{})}Ja(L,U,te),L=L[U]}return o}var vS=bu?function(o,l){return bu.set(o,l),o}:Lr,cj=mu?function(o,l){return mu(o,"toString",{configurable:!0,enumerable:!1,value:lp(l),writable:!0})}:Lr;function lj(o){return ju(No(o))}function un(o,l,f){var y=-1,x=o.length;l<0&&(l=-l>x?0:x+l),f=f>x?x:f,f<0&&(f+=x),x=l>f?0:f-l>>>0,l>>>=0;for(var O=K(x);++y<x;)O[y]=o[y+l];return O}function uj(o,l){var f;return Vi(o,function(y,x,O){return f=l(y,x,O),!f}),!!f}function Eu(o,l,f){var y=0,x=o==null?y:o.length;if(typeof l=="number"&&l===l&&x<=ge){for(;y<x;){var O=y+x>>>1,D=o[O];D!==null&&!Xr(D)&&(f?D<=l:D<l)?y=O+1:x=O}return x}return Fg(o,l,Lr,f)}function Fg(o,l,f,y){var x=0,O=o==null?0:o.length;if(O===0)return 0;l=f(l);for(var D=l!==l,L=l===null,U=Xr(l),te=l===t;x<O;){var ne=yu((x+O)/2),se=f(o[ne]),ve=se!==t,Ee=se===null,Ie=se===se,ze=Xr(se);if(D)var Me=y||Ie;else te?Me=Ie&&(y||ve):L?Me=Ie&&ve&&(y||!Ee):U?Me=Ie&&ve&&!Ee&&(y||!ze):Ee||ze?Me=!1:Me=y?se<=l:se<l;Me?x=ne+1:O=ne}return gr(O,ue)}function yS(o,l){for(var f=-1,y=o.length,x=0,O=[];++f<y;){var D=o[f],L=l?l(D):D;if(!f||!En(L,U)){var U=L;O[x++]=D===0?0:D}}return O}function bS(o){return typeof o=="number"?o:Xr(o)?P:+o}function Yr(o){if(typeof o=="string")return o;if(Fe(o))return wt(o,Yr)+"";if(Xr(o))return Z_?Z_.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}function Hi(o,l,f){var y=-1,x=su,O=o.length,D=!0,L=[],U=L;if(f)D=!1,x=dg;else if(O>=i){var te=l?null:_j(o);if(te)return au(te);D=!1,x=Ya,U=new As}else U=l?[]:L;e:for(;++y<O;){var ne=o[y],se=l?l(ne):ne;if(ne=f||ne!==0?ne:0,D&&se===se){for(var ve=U.length;ve--;)if(U[ve]===se)continue e;l&&U.push(se),L.push(ne)}else x(U,se,f)||(U!==L&&U.push(se),L.push(ne))}return L}function Ng(o,l){return l=zi(l,o),o=XS(o,l),o==null||delete o[Vn(hn(l))]}function wS(o,l,f,y){return rc(o,l,f(Ms(o,l)),y)}function ku(o,l,f,y){for(var x=o.length,O=y?x:-1;(y?O--:++O<x)&&l(o[O],O,o););return f?un(o,y?0:O,y?O+1:x):un(o,y?O+1:0,y?x:O)}function _S(o,l){var f=o;return f instanceof Ge&&(f=f.value()),fg(l,function(y,x){return x.func.apply(x.thisArg,Fi([y],x.args))},f)}function Bg(o,l,f){var y=o.length;if(y<2)return y?Hi(o[0]):[];for(var x=-1,O=K(y);++x<y;)for(var D=o[x],L=-1;++L<y;)L!=x&&(O[x]=Qa(O[x]||D,o[L],l,f));return Hi(sr(O,1),l,f)}function SS(o,l,f){for(var y=-1,x=o.length,O=l.length,D={};++y<x;){var L=y<O?l[y]:t;f(D,o[y],L)}return D}function Vg(o){return Ft(o)?o:[]}function Hg(o){return typeof o=="function"?o:Lr}function zi(o,l){return Fe(o)?o:Kg(o,l)?[o]:ZS(lt(o))}var hj=We;function Wi(o,l,f){var y=o.length;return f=f===t?y:f,!l&&f>=y?o:un(o,l,f)}var xS=J4||function(o){return ir.clearTimeout(o)};function CS(o,l){if(l)return o.slice();var f=o.length,y=$_?$_(f):new o.constructor(f);return o.copy(y),y}function zg(o){var l=new o.constructor(o.byteLength);return new fu(l).set(new fu(o)),l}function dj(o,l){var f=l?zg(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function fj(o){var l=new o.constructor(o.source,ke.exec(o));return l.lastIndex=o.lastIndex,l}function gj(o){return Za?ft(Za.call(o)):{}}function TS(o,l){var f=l?zg(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function ES(o,l){if(o!==l){var f=o!==t,y=o===null,x=o===o,O=Xr(o),D=l!==t,L=l===null,U=l===l,te=Xr(l);if(!L&&!te&&!O&&o>l||O&&D&&U&&!L&&!te||y&&D&&U||!f&&U||!x)return 1;if(!y&&!O&&!te&&o<l||te&&f&&x&&!y&&!O||L&&f&&x||!D&&x||!U)return-1}return 0}function pj(o,l,f){for(var y=-1,x=o.criteria,O=l.criteria,D=x.length,L=f.length;++y<D;){var U=ES(x[y],O[y]);if(U){if(y>=L)return U;var te=f[y];return U*(te=="desc"?-1:1)}}return o.index-l.index}function kS(o,l,f,y){for(var x=-1,O=o.length,D=f.length,L=-1,U=l.length,te=Kt(O-D,0),ne=K(U+te),se=!y;++L<U;)ne[L]=l[L];for(;++x<D;)(se||x<O)&&(ne[f[x]]=o[x]);for(;te--;)ne[L++]=o[x++];return ne}function OS(o,l,f,y){for(var x=-1,O=o.length,D=-1,L=f.length,U=-1,te=l.length,ne=Kt(O-L,0),se=K(ne+te),ve=!y;++x<ne;)se[x]=o[x];for(var Ee=x;++U<te;)se[Ee+U]=l[U];for(;++D<L;)(ve||x<O)&&(se[Ee+f[D]]=o[x++]);return se}function Dr(o,l){var f=-1,y=o.length;for(l||(l=K(y));++f<y;)l[f]=o[f];return l}function Bn(o,l,f,y){var x=!f;f||(f={});for(var O=-1,D=l.length;++O<D;){var L=l[O],U=y?y(f[L],o[L],L,f,o):t;U===t&&(U=o[L]),x?si(f,L,U):Ja(f,L,U)}return f}function mj(o,l){return Bn(o,qg(o),l)}function vj(o,l){return Bn(o,HS(o),l)}function Ou(o,l){return function(f,y){var x=Fe(f)?S4:B6,O=l?l():{};return x(f,o,Ae(y,2),O)}}function Ro(o){return We(function(l,f){var y=-1,x=f.length,O=x>1?f[x-1]:t,D=x>2?f[2]:t;for(O=o.length>3&&typeof O=="function"?(x--,O):t,D&&Tr(f[0],f[1],D)&&(O=x<3?t:O,x=1),l=ft(l);++y<x;){var L=f[y];L&&o(l,L,y,O)}return l})}function AS(o,l){return function(f,y){if(f==null)return f;if(!Rr(f))return o(f,y);for(var x=f.length,O=l?x:-1,D=ft(f);(l?O--:++O<x)&&y(D[O],O,D)!==!1;);return f}}function IS(o){return function(l,f,y){for(var x=-1,O=ft(l),D=y(l),L=D.length;L--;){var U=D[o?L:++x];if(f(O[U],U,O)===!1)break}return l}}function yj(o,l,f){var y=l&C,x=nc(o);function O(){var D=this&&this!==ir&&this instanceof O?x:o;return D.apply(y?f:this,arguments)}return O}function MS(o){return function(l){l=lt(l);var f=ko(l)?Cn(l):t,y=f?f[0]:l.charAt(0),x=f?Wi(f,1).join(""):l.slice(1);return y[o]()+x}}function jo(o){return function(l){return fg(Ax(Ox(l).replace(c4,"")),o,"")}}function nc(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=Do(o.prototype),y=o.apply(f,l);return Et(y)?y:f}}function bj(o,l,f){var y=nc(o);function x(){for(var O=arguments.length,D=K(O),L=O,U=Lo(x);L--;)D[L]=arguments[L];var te=O<3&&D[0]!==U&&D[O-1]!==U?[]:Ni(D,U);if(O-=te.length,O<f)return LS(o,l,Au,x.placeholder,t,D,te,t,t,f-O);var ne=this&&this!==ir&&this instanceof x?y:o;return Ur(ne,this,D)}return x}function PS(o){return function(l,f,y){var x=ft(l);if(!Rr(l)){var O=Ae(f,3);l=er(l),f=function(L){return O(x[L],L,x)}}var D=o(l,f,y);return D>-1?x[O?l[D]:D]:t}}function DS(o){return ai(function(l){var f=l.length,y=f,x=cn.prototype.thru;for(o&&l.reverse();y--;){var O=l[y];if(typeof O!="function")throw new an(a);if(x&&!D&&Du(O)=="wrapper")var D=new cn([],!0)}for(y=D?y:f;++y<f;){O=l[y];var L=Du(O),U=L=="wrapper"?Xg(O):t;U&&Zg(U[0])&&U[1]==($|A|R|V)&&!U[4].length&&U[9]==1?D=D[Du(U[0])].apply(D,U[3]):D=O.length==1&&Zg(O)?D[L]():D.thru(O)}return function(){var te=arguments,ne=te[0];if(D&&te.length==1&&Fe(ne))return D.plant(ne).value();for(var se=0,ve=f?l[se].apply(this,te):ne;++se<f;)ve=l[se].call(this,ve);return ve}})}function Au(o,l,f,y,x,O,D,L,U,te){var ne=l&$,se=l&C,ve=l&T,Ee=l&(A|M),Ie=l&G,ze=ve?t:nc(o);function Me(){for(var Ye=arguments.length,Je=K(Ye),Gr=Ye;Gr--;)Je[Gr]=arguments[Gr];if(Ee)var Er=Lo(Me),qr=M4(Je,Er);if(y&&(Je=kS(Je,y,x,Ee)),O&&(Je=OS(Je,O,D,Ee)),Ye-=qr,Ee&&Ye<te){var Nt=Ni(Je,Er);return LS(o,l,Au,Me.placeholder,f,Je,Nt,L,U,te-Ye)}var kn=se?f:this,hi=ve?kn[o]:o;return Ye=Je.length,L?Je=Bj(Je,L):Ie&&Ye>1&&Je.reverse(),ne&&U<Ye&&(Je.length=U),this&&this!==ir&&this instanceof Me&&(hi=ze||nc(hi)),hi.apply(kn,Je)}return Me}function RS(o,l){return function(f,y){return X6(f,o,l(y),{})}}function Iu(o,l){return function(f,y){var x;if(f===t&&y===t)return l;if(f!==t&&(x=f),y!==t){if(x===t)return y;typeof f=="string"||typeof y=="string"?(f=Yr(f),y=Yr(y)):(f=bS(f),y=bS(y)),x=o(f,y)}return x}}function Wg(o){return ai(function(l){return l=wt(l,$r(Ae())),We(function(f){var y=this;return o(l,function(x){return Ur(x,y,f)})})})}function Mu(o,l){l=l===t?" ":Yr(l);var f=l.length;if(f<2)return f?Lg(l,o):l;var y=Lg(l,vu(o/Oo(l)));return ko(l)?Wi(Cn(y),0,o).join(""):y.slice(0,o)}function wj(o,l,f,y){var x=l&C,O=nc(o);function D(){for(var L=-1,U=arguments.length,te=-1,ne=y.length,se=K(ne+U),ve=this&&this!==ir&&this instanceof D?O:o;++te<ne;)se[te]=y[te];for(;U--;)se[te++]=arguments[++L];return Ur(ve,x?f:this,se)}return D}function jS(o){return function(l,f,y){return y&&typeof y!="number"&&Tr(l,f,y)&&(f=y=t),l=ui(l),f===t?(f=l,l=0):f=ui(f),y=y===t?l<f?1:-1:ui(y),sj(l,f,y,o)}}function Pu(o){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=dn(l),f=dn(f)),o(l,f)}}function LS(o,l,f,y,x,O,D,L,U,te){var ne=l&A,se=ne?D:t,ve=ne?t:D,Ee=ne?O:t,Ie=ne?t:O;l|=ne?R:N,l&=~(ne?N:R),l&k||(l&=-4);var ze=[o,l,x,Ee,se,Ie,ve,L,U,te],Me=f.apply(t,ze);return Zg(o)&&GS(Me,ze),Me.placeholder=y,qS(Me,o,l)}function Ug(o){var l=qt[o];return function(f,y){if(f=dn(f),y=y==null?0:gr(He(y),292),y&&q_(f)){var x=(lt(f)+"e").split("e"),O=l(x[0]+"e"+(+x[1]+y));return x=(lt(O)+"e").split("e"),+(x[0]+"e"+(+x[1]-y))}return l(f)}}var _j=Mo&&1/au(new Mo([,-0]))[1]==me?function(o){return new Mo(o)}:dp;function FS(o){return function(l){var f=pr(l);return f==ct?wg(l):f==j?N4(l):I4(l,o(l))}}function oi(o,l,f,y,x,O,D,L){var U=l&T;if(!U&&typeof o!="function")throw new an(a);var te=y?y.length:0;if(te||(l&=-97,y=x=t),D=D===t?D:Kt(He(D),0),L=L===t?L:He(L),te-=x?x.length:0,l&N){var ne=y,se=x;y=x=t}var ve=U?t:Xg(o),Ee=[o,l,f,y,x,ne,se,O,D,L];if(ve&&Lj(Ee,ve),o=Ee[0],l=Ee[1],f=Ee[2],y=Ee[3],x=Ee[4],L=Ee[9]=Ee[9]===t?U?0:o.length:Kt(Ee[9]-te,0),!L&&l&(A|M)&&(l&=-25),!l||l==C)var Ie=yj(o,l,f);else l==A||l==M?Ie=bj(o,l,L):(l==R||l==(C|R))&&!x.length?Ie=wj(o,l,f,y):Ie=Au.apply(t,Ee);var ze=ve?vS:GS;return qS(ze(Ie,Ee),o,l)}function NS(o,l,f,y){return o===t||En(o,Io[f])&&!ht.call(y,f)?l:o}function BS(o,l,f,y,x,O){return Et(o)&&Et(l)&&(O.set(l,o),Tu(o,l,t,BS,O),O.delete(l)),o}function Sj(o){return oc(o)?t:o}function VS(o,l,f,y,x,O){var D=f&b,L=o.length,U=l.length;if(L!=U&&!(D&&U>L))return!1;var te=O.get(o),ne=O.get(l);if(te&&ne)return te==l&&ne==o;var se=-1,ve=!0,Ee=f&S?new As:t;for(O.set(o,l),O.set(l,o);++se<L;){var Ie=o[se],ze=l[se];if(y)var Me=D?y(ze,Ie,se,l,o,O):y(Ie,ze,se,o,l,O);if(Me!==t){if(Me)continue;ve=!1;break}if(Ee){if(!gg(l,function(Ye,Je){if(!Ya(Ee,Je)&&(Ie===Ye||x(Ie,Ye,f,y,O)))return Ee.push(Je)})){ve=!1;break}}else if(!(Ie===ze||x(Ie,ze,f,y,O))){ve=!1;break}}return O.delete(o),O.delete(l),ve}function xj(o,l,f,y,x,O,D){switch(f){case Se:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case Oe:return!(o.byteLength!=l.byteLength||!O(new fu(o),new fu(l)));case Ue:case xt:case Pt:return En(+o,+l);case Yt:return o.name==l.name&&o.message==l.message;case dr:case de:return o==l+"";case ct:var L=wg;case j:var U=y&b;if(L||(L=au),o.size!=l.size&&!U)return!1;var te=D.get(o);if(te)return te==l;y|=S,D.set(o,l);var ne=VS(L(o),L(l),y,x,O,D);return D.delete(o),ne;case pe:if(Za)return Za.call(o)==Za.call(l)}return!1}function Cj(o,l,f,y,x,O){var D=f&b,L=$g(o),U=L.length,te=$g(l),ne=te.length;if(U!=ne&&!D)return!1;for(var se=U;se--;){var ve=L[se];if(!(D?ve in l:ht.call(l,ve)))return!1}var Ee=O.get(o),Ie=O.get(l);if(Ee&&Ie)return Ee==l&&Ie==o;var ze=!0;O.set(o,l),O.set(l,o);for(var Me=D;++se<U;){ve=L[se];var Ye=o[ve],Je=l[ve];if(y)var Gr=D?y(Je,Ye,ve,l,o,O):y(Ye,Je,ve,o,l,O);if(!(Gr===t?Ye===Je||x(Ye,Je,f,y,O):Gr)){ze=!1;break}Me||(Me=ve=="constructor")}if(ze&&!Me){var Er=o.constructor,qr=l.constructor;Er!=qr&&"constructor"in o&&"constructor"in l&&!(typeof Er=="function"&&Er instanceof Er&&typeof qr=="function"&&qr instanceof qr)&&(ze=!1)}return O.delete(o),O.delete(l),ze}function ai(o){return Qg(YS(o,t,tx),o+"")}function $g(o){return oS(o,er,qg)}function Yg(o){return oS(o,jr,HS)}var Xg=bu?function(o){return bu.get(o)}:dp;function Du(o){for(var l=o.name+"",f=Po[l],y=ht.call(Po,l)?f.length:0;y--;){var x=f[y],O=x.func;if(O==null||O==o)return x.name}return l}function Lo(o){var l=ht.call(E,"placeholder")?E:o;return l.placeholder}function Ae(){var o=E.iteratee||up;return o=o===up?lS:o,arguments.length?o(arguments[0],arguments[1]):o}function Ru(o,l){var f=o.__data__;return Pj(l)?f[typeof l=="string"?"string":"hash"]:f.map}function Gg(o){for(var l=er(o),f=l.length;f--;){var y=l[f],x=o[y];l[f]=[y,x,US(x)]}return l}function Ps(o,l){var f=j4(o,l);return cS(f)?f:t}function Tj(o){var l=ht.call(o,ks),f=o[ks];try{o[ks]=t;var y=!0}catch{}var x=hu.call(o);return y&&(l?o[ks]=f:delete o[ks]),x}var qg=Sg?function(o){return o==null?[]:(o=ft(o),Li(Sg(o),function(l){return X_.call(o,l)}))}:fp,HS=Sg?function(o){for(var l=[];o;)Fi(l,qg(o)),o=gu(o);return l}:fp,pr=Cr;(xg&&pr(new xg(new ArrayBuffer(1)))!=Se||Ga&&pr(new Ga)!=ct||Cg&&pr(Cg.resolve())!=Lt||Mo&&pr(new Mo)!=j||qa&&pr(new qa)!=tt)&&(pr=function(o){var l=Cr(o),f=l==nt?o.constructor:t,y=f?Ds(f):"";if(y)switch(y){case a6:return Se;case c6:return ct;case l6:return Lt;case u6:return j;case h6:return tt}return l});function Ej(o,l,f){for(var y=-1,x=f.length;++y<x;){var O=f[y],D=O.size;switch(O.type){case"drop":o+=D;break;case"dropRight":l-=D;break;case"take":l=gr(l,o+D);break;case"takeRight":o=Kt(o,l-D);break}}return{start:o,end:l}}function kj(o){var l=o.match(nu);return l?l[1].split(_):[]}function zS(o,l,f){l=zi(l,o);for(var y=-1,x=l.length,O=!1;++y<x;){var D=Vn(l[y]);if(!(O=o!=null&&f(o,D)))break;o=o[D]}return O||++y!=x?O:(x=o==null?0:o.length,!!x&&Hu(x)&&ci(D,x)&&(Fe(o)||Rs(o)))}function Oj(o){var l=o.length,f=new o.constructor(l);return l&&typeof o[0]=="string"&&ht.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function WS(o){return typeof o.constructor=="function"&&!ic(o)?Do(gu(o)):{}}function Aj(o,l,f){var y=o.constructor;switch(l){case Oe:return zg(o);case Ue:case xt:return new y(+o);case Se:return dj(o,f);case Xt:case Tt:case Gt:case Mr:case nr:case Wr:case Jt:case Di:case Ri:return TS(o,f);case ct:return new y;case Pt:case de:return new y(o);case dr:return fj(o);case j:return new y;case pe:return gj(o)}}function Ij(o,l){var f=l.length;if(!f)return o;var y=f-1;return l[y]=(f>1?"& ":"")+l[y],l=l.join(f>2?", ":" "),o.replace($a,`{
/* [wrapped with `+l+`] */
`)}function Mj(o){return Fe(o)||Rs(o)||!!(G_&&o&&o[G_])}function ci(o,l){var f=typeof o;return l=l??fe,!!l&&(f=="number"||f!="symbol"&&fr.test(o))&&o>-1&&o%1==0&&o<l}function Tr(o,l,f){if(!Et(f))return!1;var y=typeof l;return(y=="number"?Rr(f)&&ci(l,f.length):y=="string"&&l in f)?En(f[l],o):!1}function Kg(o,l){if(Fe(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||Xr(o)?!0:Cs.test(o)||!xo.test(o)||l!=null&&o in ft(l)}function Pj(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function Zg(o){var l=Du(o),f=E[l];if(typeof f!="function"||!(l in Ge.prototype))return!1;if(o===f)return!0;var y=Xg(f);return!!y&&o===y[0]}function Dj(o){return!!U_&&U_ in o}var Rj=lu?li:gp;function ic(o){var l=o&&o.constructor,f=typeof l=="function"&&l.prototype||Io;return o===f}function US(o){return o===o&&!Et(o)}function $S(o,l){return function(f){return f==null?!1:f[o]===l&&(l!==t||o in ft(f))}}function jj(o){var l=Bu(o,function(y){return f.size===h&&f.clear(),y}),f=l.cache;return l}function Lj(o,l){var f=o[1],y=l[1],x=f|y,O=x<(C|T|$),D=y==$&&f==A||y==$&&f==V&&o[7].length<=l[8]||y==($|V)&&l[7].length<=l[8]&&f==A;if(!(O||D))return o;y&C&&(o[2]=l[2],x|=f&C?0:k);var L=l[3];if(L){var U=o[3];o[3]=U?kS(U,L,l[4]):L,o[4]=U?Ni(o[3],d):l[4]}return L=l[5],L&&(U=o[5],o[5]=U?OS(U,L,l[6]):L,o[6]=U?Ni(o[5],d):l[6]),L=l[7],L&&(o[7]=L),y&$&&(o[8]=o[8]==null?l[8]:gr(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=x,o}function Fj(o){var l=[];if(o!=null)for(var f in ft(o))l.push(f);return l}function Nj(o){return hu.call(o)}function YS(o,l,f){return l=Kt(l===t?o.length-1:l,0),function(){for(var y=arguments,x=-1,O=Kt(y.length-l,0),D=K(O);++x<O;)D[x]=y[l+x];x=-1;for(var L=K(l+1);++x<l;)L[x]=y[x];return L[l]=f(D),Ur(o,this,L)}}function XS(o,l){return l.length<2?o:Ms(o,un(l,0,-1))}function Bj(o,l){for(var f=o.length,y=gr(l.length,f),x=Dr(o);y--;){var O=l[y];o[y]=ci(O,f)?x[O]:t}return o}function Jg(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var GS=KS(vS),sc=e6||function(o,l){return ir.setTimeout(o,l)},Qg=KS(cj);function qS(o,l,f){var y=l+"";return Qg(o,Ij(y,Vj(kj(y),f)))}function KS(o){var l=0,f=0;return function(){var y=i6(),x=Z-(y-f);if(f=y,x>0){if(++l>=q)return arguments[0]}else l=0;return o.apply(t,arguments)}}function ju(o,l){var f=-1,y=o.length,x=y-1;for(l=l===t?y:l;++f<l;){var O=jg(f,x),D=o[O];o[O]=o[f],o[f]=D}return o.length=l,o}var ZS=jj(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(Ze,function(f,y,x,O){l.push(x?O.replace(ce,"$1"):y||f)}),l});function Vn(o){if(typeof o=="string"||Xr(o))return o;var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}function Ds(o){if(o!=null){try{return uu.call(o)}catch{}try{return o+""}catch{}}return""}function Vj(o,l){return on(we,function(f){var y="_."+f[0];l&f[1]&&!su(o,y)&&o.push(y)}),o.sort()}function JS(o){if(o instanceof Ge)return o.clone();var l=new cn(o.__wrapped__,o.__chain__);return l.__actions__=Dr(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function Hj(o,l,f){(f?Tr(o,l,f):l===t)?l=1:l=Kt(He(l),0);var y=o==null?0:o.length;if(!y||l<1)return[];for(var x=0,O=0,D=K(vu(y/l));x<y;)D[O++]=un(o,x,x+=l);return D}function zj(o){for(var l=-1,f=o==null?0:o.length,y=0,x=[];++l<f;){var O=o[l];O&&(x[y++]=O)}return x}function Wj(){var o=arguments.length;if(!o)return[];for(var l=K(o-1),f=arguments[0],y=o;y--;)l[y-1]=arguments[y];return Fi(Fe(f)?Dr(f):[f],sr(l,1))}var Uj=We(function(o,l){return Ft(o)?Qa(o,sr(l,1,Ft,!0)):[]}),$j=We(function(o,l){var f=hn(l);return Ft(f)&&(f=t),Ft(o)?Qa(o,sr(l,1,Ft,!0),Ae(f,2)):[]}),Yj=We(function(o,l){var f=hn(l);return Ft(f)&&(f=t),Ft(o)?Qa(o,sr(l,1,Ft,!0),t,f):[]});function Xj(o,l,f){var y=o==null?0:o.length;return y?(l=f||l===t?1:He(l),un(o,l<0?0:l,y)):[]}function Gj(o,l,f){var y=o==null?0:o.length;return y?(l=f||l===t?1:He(l),l=y-l,un(o,0,l<0?0:l)):[]}function qj(o,l){return o&&o.length?ku(o,Ae(l,3),!0,!0):[]}function Kj(o,l){return o&&o.length?ku(o,Ae(l,3),!0):[]}function Zj(o,l,f,y){var x=o==null?0:o.length;return x?(f&&typeof f!="number"&&Tr(o,l,f)&&(f=0,y=x),W6(o,l,f,y)):[]}function QS(o,l,f){var y=o==null?0:o.length;if(!y)return-1;var x=f==null?0:He(f);return x<0&&(x=Kt(y+x,0)),ou(o,Ae(l,3),x)}function ex(o,l,f){var y=o==null?0:o.length;if(!y)return-1;var x=y-1;return f!==t&&(x=He(f),x=f<0?Kt(y+x,0):gr(x,y-1)),ou(o,Ae(l,3),x,!0)}function tx(o){var l=o==null?0:o.length;return l?sr(o,1):[]}function Jj(o){var l=o==null?0:o.length;return l?sr(o,me):[]}function Qj(o,l){var f=o==null?0:o.length;return f?(l=l===t?1:He(l),sr(o,l)):[]}function eL(o){for(var l=-1,f=o==null?0:o.length,y={};++l<f;){var x=o[l];y[x[0]]=x[1]}return y}function rx(o){return o&&o.length?o[0]:t}function tL(o,l,f){var y=o==null?0:o.length;if(!y)return-1;var x=f==null?0:He(f);return x<0&&(x=Kt(y+x,0)),Eo(o,l,x)}function rL(o){var l=o==null?0:o.length;return l?un(o,0,-1):[]}var nL=We(function(o){var l=wt(o,Vg);return l.length&&l[0]===o[0]?Ig(l):[]}),iL=We(function(o){var l=hn(o),f=wt(o,Vg);return l===hn(f)?l=t:f.pop(),f.length&&f[0]===o[0]?Ig(f,Ae(l,2)):[]}),sL=We(function(o){var l=hn(o),f=wt(o,Vg);return l=typeof l=="function"?l:t,l&&f.pop(),f.length&&f[0]===o[0]?Ig(f,t,l):[]});function oL(o,l){return o==null?"":r6.call(o,l)}function hn(o){var l=o==null?0:o.length;return l?o[l-1]:t}function aL(o,l,f){var y=o==null?0:o.length;if(!y)return-1;var x=y;return f!==t&&(x=He(f),x=x<0?Kt(y+x,0):gr(x,y-1)),l===l?V4(o,l,x):ou(o,L_,x,!0)}function cL(o,l){return o&&o.length?fS(o,He(l)):t}var lL=We(nx);function nx(o,l){return o&&o.length&&l&&l.length?Rg(o,l):o}function uL(o,l,f){return o&&o.length&&l&&l.length?Rg(o,l,Ae(f,2)):o}function hL(o,l,f){return o&&o.length&&l&&l.length?Rg(o,l,t,f):o}var dL=ai(function(o,l){var f=o==null?0:o.length,y=Eg(o,l);return mS(o,wt(l,function(x){return ci(x,f)?+x:x}).sort(ES)),y});function fL(o,l){var f=[];if(!(o&&o.length))return f;var y=-1,x=[],O=o.length;for(l=Ae(l,3);++y<O;){var D=o[y];l(D,y,o)&&(f.push(D),x.push(y))}return mS(o,x),f}function ep(o){return o==null?o:o6.call(o)}function gL(o,l,f){var y=o==null?0:o.length;return y?(f&&typeof f!="number"&&Tr(o,l,f)?(l=0,f=y):(l=l==null?0:He(l),f=f===t?y:He(f)),un(o,l,f)):[]}function pL(o,l){return Eu(o,l)}function mL(o,l,f){return Fg(o,l,Ae(f,2))}function vL(o,l){var f=o==null?0:o.length;if(f){var y=Eu(o,l);if(y<f&&En(o[y],l))return y}return-1}function yL(o,l){return Eu(o,l,!0)}function bL(o,l,f){return Fg(o,l,Ae(f,2),!0)}function wL(o,l){var f=o==null?0:o.length;if(f){var y=Eu(o,l,!0)-1;if(En(o[y],l))return y}return-1}function _L(o){return o&&o.length?yS(o):[]}function SL(o,l){return o&&o.length?yS(o,Ae(l,2)):[]}function xL(o){var l=o==null?0:o.length;return l?un(o,1,l):[]}function CL(o,l,f){return o&&o.length?(l=f||l===t?1:He(l),un(o,0,l<0?0:l)):[]}function TL(o,l,f){var y=o==null?0:o.length;return y?(l=f||l===t?1:He(l),l=y-l,un(o,l<0?0:l,y)):[]}function EL(o,l){return o&&o.length?ku(o,Ae(l,3),!1,!0):[]}function kL(o,l){return o&&o.length?ku(o,Ae(l,3)):[]}var OL=We(function(o){return Hi(sr(o,1,Ft,!0))}),AL=We(function(o){var l=hn(o);return Ft(l)&&(l=t),Hi(sr(o,1,Ft,!0),Ae(l,2))}),IL=We(function(o){var l=hn(o);return l=typeof l=="function"?l:t,Hi(sr(o,1,Ft,!0),t,l)});function ML(o){return o&&o.length?Hi(o):[]}function PL(o,l){return o&&o.length?Hi(o,Ae(l,2)):[]}function DL(o,l){return l=typeof l=="function"?l:t,o&&o.length?Hi(o,t,l):[]}function tp(o){if(!(o&&o.length))return[];var l=0;return o=Li(o,function(f){if(Ft(f))return l=Kt(f.length,l),!0}),yg(l,function(f){return wt(o,pg(f))})}function ix(o,l){if(!(o&&o.length))return[];var f=tp(o);return l==null?f:wt(f,function(y){return Ur(l,t,y)})}var RL=We(function(o,l){return Ft(o)?Qa(o,l):[]}),jL=We(function(o){return Bg(Li(o,Ft))}),LL=We(function(o){var l=hn(o);return Ft(l)&&(l=t),Bg(Li(o,Ft),Ae(l,2))}),FL=We(function(o){var l=hn(o);return l=typeof l=="function"?l:t,Bg(Li(o,Ft),t,l)}),NL=We(tp);function BL(o,l){return SS(o||[],l||[],Ja)}function VL(o,l){return SS(o||[],l||[],rc)}var HL=We(function(o){var l=o.length,f=l>1?o[l-1]:t;return f=typeof f=="function"?(o.pop(),f):t,ix(o,f)});function sx(o){var l=E(o);return l.__chain__=!0,l}function zL(o,l){return l(o),o}function Lu(o,l){return l(o)}var WL=ai(function(o){var l=o.length,f=l?o[0]:0,y=this.__wrapped__,x=function(O){return Eg(O,o)};return l>1||this.__actions__.length||!(y instanceof Ge)||!ci(f)?this.thru(x):(y=y.slice(f,+f+(l?1:0)),y.__actions__.push({func:Lu,args:[x],thisArg:t}),new cn(y,this.__chain__).thru(function(O){return l&&!O.length&&O.push(t),O}))});function UL(){return sx(this)}function $L(){return new cn(this.value(),this.__chain__)}function YL(){this.__values__===t&&(this.__values__=bx(this.value()));var o=this.__index__>=this.__values__.length,l=o?t:this.__values__[this.__index__++];return{done:o,value:l}}function XL(){return this}function GL(o){for(var l,f=this;f instanceof _u;){var y=JS(f);y.__index__=0,y.__values__=t,l?x.__wrapped__=y:l=y;var x=y;f=f.__wrapped__}return x.__wrapped__=o,l}function qL(){var o=this.__wrapped__;if(o instanceof Ge){var l=o;return this.__actions__.length&&(l=new Ge(this)),l=l.reverse(),l.__actions__.push({func:Lu,args:[ep],thisArg:t}),new cn(l,this.__chain__)}return this.thru(ep)}function KL(){return _S(this.__wrapped__,this.__actions__)}var ZL=Ou(function(o,l,f){ht.call(o,f)?++o[f]:si(o,f,1)});function JL(o,l,f){var y=Fe(o)?R_:z6;return f&&Tr(o,l,f)&&(l=t),y(o,Ae(l,3))}function QL(o,l){var f=Fe(o)?Li:iS;return f(o,Ae(l,3))}var e7=PS(QS),t7=PS(ex);function r7(o,l){return sr(Fu(o,l),1)}function n7(o,l){return sr(Fu(o,l),me)}function i7(o,l,f){return f=f===t?1:He(f),sr(Fu(o,l),f)}function ox(o,l){var f=Fe(o)?on:Vi;return f(o,Ae(l,3))}function ax(o,l){var f=Fe(o)?x4:nS;return f(o,Ae(l,3))}var s7=Ou(function(o,l,f){ht.call(o,f)?o[f].push(l):si(o,f,[l])});function o7(o,l,f,y){o=Rr(o)?o:No(o),f=f&&!y?He(f):0;var x=o.length;return f<0&&(f=Kt(x+f,0)),zu(o)?f<=x&&o.indexOf(l,f)>-1:!!x&&Eo(o,l,f)>-1}var a7=We(function(o,l,f){var y=-1,x=typeof l=="function",O=Rr(o)?K(o.length):[];return Vi(o,function(D){O[++y]=x?Ur(l,D,f):ec(D,l,f)}),O}),c7=Ou(function(o,l,f){si(o,f,l)});function Fu(o,l){var f=Fe(o)?wt:uS;return f(o,Ae(l,3))}function l7(o,l,f,y){return o==null?[]:(Fe(l)||(l=l==null?[]:[l]),f=y?t:f,Fe(f)||(f=f==null?[]:[f]),gS(o,l,f))}var u7=Ou(function(o,l,f){o[f?0:1].push(l)},function(){return[[],[]]});function h7(o,l,f){var y=Fe(o)?fg:N_,x=arguments.length<3;return y(o,Ae(l,4),f,x,Vi)}function d7(o,l,f){var y=Fe(o)?C4:N_,x=arguments.length<3;return y(o,Ae(l,4),f,x,nS)}function f7(o,l){var f=Fe(o)?Li:iS;return f(o,Vu(Ae(l,3)))}function g7(o){var l=Fe(o)?Q_:oj;return l(o)}function p7(o,l,f){(f?Tr(o,l,f):l===t)?l=1:l=He(l);var y=Fe(o)?F6:aj;return y(o,l)}function m7(o){var l=Fe(o)?N6:lj;return l(o)}function v7(o){if(o==null)return 0;if(Rr(o))return zu(o)?Oo(o):o.length;var l=pr(o);return l==ct||l==j?o.size:Pg(o).length}function y7(o,l,f){var y=Fe(o)?gg:uj;return f&&Tr(o,l,f)&&(l=t),y(o,Ae(l,3))}var b7=We(function(o,l){if(o==null)return[];var f=l.length;return f>1&&Tr(o,l[0],l[1])?l=[]:f>2&&Tr(l[0],l[1],l[2])&&(l=[l[0]]),gS(o,sr(l,1),[])}),Nu=Q4||function(){return ir.Date.now()};function w7(o,l){if(typeof l!="function")throw new an(a);return o=He(o),function(){if(--o<1)return l.apply(this,arguments)}}function cx(o,l,f){return l=f?t:l,l=o&&l==null?o.length:l,oi(o,$,t,t,t,t,l)}function lx(o,l){var f;if(typeof l!="function")throw new an(a);return o=He(o),function(){return--o>0&&(f=l.apply(this,arguments)),o<=1&&(l=t),f}}var rp=We(function(o,l,f){var y=C;if(f.length){var x=Ni(f,Lo(rp));y|=R}return oi(o,y,l,f,x)}),ux=We(function(o,l,f){var y=C|T;if(f.length){var x=Ni(f,Lo(ux));y|=R}return oi(l,y,o,f,x)});function hx(o,l,f){l=f?t:l;var y=oi(o,A,t,t,t,t,t,l);return y.placeholder=hx.placeholder,y}function dx(o,l,f){l=f?t:l;var y=oi(o,M,t,t,t,t,t,l);return y.placeholder=dx.placeholder,y}function fx(o,l,f){var y,x,O,D,L,U,te=0,ne=!1,se=!1,ve=!0;if(typeof o!="function")throw new an(a);l=dn(l)||0,Et(f)&&(ne=!!f.leading,se="maxWait"in f,O=se?Kt(dn(f.maxWait)||0,l):O,ve="trailing"in f?!!f.trailing:ve);function Ee(Nt){var kn=y,hi=x;return y=x=t,te=Nt,D=o.apply(hi,kn),D}function Ie(Nt){return te=Nt,L=sc(Ye,l),ne?Ee(Nt):D}function ze(Nt){var kn=Nt-U,hi=Nt-te,Px=l-kn;return se?gr(Px,O-hi):Px}function Me(Nt){var kn=Nt-U,hi=Nt-te;return U===t||kn>=l||kn<0||se&&hi>=O}function Ye(){var Nt=Nu();if(Me(Nt))return Je(Nt);L=sc(Ye,ze(Nt))}function Je(Nt){return L=t,ve&&y?Ee(Nt):(y=x=t,D)}function Gr(){L!==t&&xS(L),te=0,y=U=x=L=t}function Er(){return L===t?D:Je(Nu())}function qr(){var Nt=Nu(),kn=Me(Nt);if(y=arguments,x=this,U=Nt,kn){if(L===t)return Ie(U);if(se)return xS(L),L=sc(Ye,l),Ee(U)}return L===t&&(L=sc(Ye,l)),D}return qr.cancel=Gr,qr.flush=Er,qr}var _7=We(function(o,l){return rS(o,1,l)}),S7=We(function(o,l,f){return rS(o,dn(l)||0,f)});function x7(o){return oi(o,G)}function Bu(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new an(a);var f=function(){var y=arguments,x=l?l.apply(this,y):y[0],O=f.cache;if(O.has(x))return O.get(x);var D=o.apply(this,y);return f.cache=O.set(x,D)||O,D};return f.cache=new(Bu.Cache||ii),f}Bu.Cache=ii;function Vu(o){if(typeof o!="function")throw new an(a);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function C7(o){return lx(2,o)}var T7=hj(function(o,l){l=l.length==1&&Fe(l[0])?wt(l[0],$r(Ae())):wt(sr(l,1),$r(Ae()));var f=l.length;return We(function(y){for(var x=-1,O=gr(y.length,f);++x<O;)y[x]=l[x].call(this,y[x]);return Ur(o,this,y)})}),np=We(function(o,l){var f=Ni(l,Lo(np));return oi(o,R,t,l,f)}),gx=We(function(o,l){var f=Ni(l,Lo(gx));return oi(o,N,t,l,f)}),E7=ai(function(o,l){return oi(o,V,t,t,t,l)});function k7(o,l){if(typeof o!="function")throw new an(a);return l=l===t?l:He(l),We(o,l)}function O7(o,l){if(typeof o!="function")throw new an(a);return l=l==null?0:Kt(He(l),0),We(function(f){var y=f[l],x=Wi(f,0,l);return y&&Fi(x,y),Ur(o,this,x)})}function A7(o,l,f){var y=!0,x=!0;if(typeof o!="function")throw new an(a);return Et(f)&&(y="leading"in f?!!f.leading:y,x="trailing"in f?!!f.trailing:x),fx(o,l,{leading:y,maxWait:l,trailing:x})}function I7(o){return cx(o,1)}function M7(o,l){return np(Hg(l),o)}function P7(){if(!arguments.length)return[];var o=arguments[0];return Fe(o)?o:[o]}function D7(o){return ln(o,v)}function R7(o,l){return l=typeof l=="function"?l:t,ln(o,v,l)}function j7(o){return ln(o,g|v)}function L7(o,l){return l=typeof l=="function"?l:t,ln(o,g|v,l)}function F7(o,l){return l==null||tS(o,l,er(l))}function En(o,l){return o===l||o!==o&&l!==l}var N7=Pu(Ag),B7=Pu(function(o,l){return o>=l}),Rs=aS(function(){return arguments}())?aS:function(o){return Dt(o)&&ht.call(o,"callee")&&!X_.call(o,"callee")},Fe=K.isArray,V7=O_?$r(O_):G6;function Rr(o){return o!=null&&Hu(o.length)&&!li(o)}function Ft(o){return Dt(o)&&Rr(o)}function H7(o){return o===!0||o===!1||Dt(o)&&Cr(o)==Ue}var Ui=t6||gp,z7=A_?$r(A_):q6;function W7(o){return Dt(o)&&o.nodeType===1&&!oc(o)}function U7(o){if(o==null)return!0;if(Rr(o)&&(Fe(o)||typeof o=="string"||typeof o.splice=="function"||Ui(o)||Fo(o)||Rs(o)))return!o.length;var l=pr(o);if(l==ct||l==j)return!o.size;if(ic(o))return!Pg(o).length;for(var f in o)if(ht.call(o,f))return!1;return!0}function $7(o,l){return tc(o,l)}function Y7(o,l,f){f=typeof f=="function"?f:t;var y=f?f(o,l):t;return y===t?tc(o,l,t,f):!!y}function ip(o){if(!Dt(o))return!1;var l=Cr(o);return l==Yt||l==Ct||typeof o.message=="string"&&typeof o.name=="string"&&!oc(o)}function X7(o){return typeof o=="number"&&q_(o)}function li(o){if(!Et(o))return!1;var l=Cr(o);return l==Te||l==Zt||l==qe||l==nn}function px(o){return typeof o=="number"&&o==He(o)}function Hu(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=fe}function Et(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function Dt(o){return o!=null&&typeof o=="object"}var mx=I_?$r(I_):Z6;function G7(o,l){return o===l||Mg(o,l,Gg(l))}function q7(o,l,f){return f=typeof f=="function"?f:t,Mg(o,l,Gg(l),f)}function K7(o){return vx(o)&&o!=+o}function Z7(o){if(Rj(o))throw new Le(s);return cS(o)}function J7(o){return o===null}function Q7(o){return o==null}function vx(o){return typeof o=="number"||Dt(o)&&Cr(o)==Pt}function oc(o){if(!Dt(o)||Cr(o)!=nt)return!1;var l=gu(o);if(l===null)return!0;var f=ht.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&uu.call(f)==q4}var sp=M_?$r(M_):J6;function e8(o){return px(o)&&o>=-9007199254740991&&o<=fe}var yx=P_?$r(P_):Q6;function zu(o){return typeof o=="string"||!Fe(o)&&Dt(o)&&Cr(o)==de}function Xr(o){return typeof o=="symbol"||Dt(o)&&Cr(o)==pe}var Fo=D_?$r(D_):ej;function t8(o){return o===t}function r8(o){return Dt(o)&&pr(o)==tt}function n8(o){return Dt(o)&&Cr(o)==Ke}var i8=Pu(Dg),s8=Pu(function(o,l){return o<=l});function bx(o){if(!o)return[];if(Rr(o))return zu(o)?Cn(o):Dr(o);if(Xa&&o[Xa])return F4(o[Xa]());var l=pr(o),f=l==ct?wg:l==j?au:No;return f(o)}function ui(o){if(!o)return o===0?o:0;if(o=dn(o),o===me||o===-1/0){var l=o<0?-1:1;return l*ie}return o===o?o:0}function He(o){var l=ui(o),f=l%1;return l===l?f?l-f:l:0}function wx(o){return o?Is(He(o),0,W):0}function dn(o){if(typeof o=="number")return o;if(Xr(o))return P;if(Et(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=Et(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=B_(o);var f=st.test(o);return f||bt.test(o)?w4(o.slice(2),f?2:8):Ce.test(o)?P:+o}function _x(o){return Bn(o,jr(o))}function o8(o){return o?Is(He(o),-9007199254740991,fe):o===0?o:0}function lt(o){return o==null?"":Yr(o)}var a8=Ro(function(o,l){if(ic(l)||Rr(l)){Bn(l,er(l),o);return}for(var f in l)ht.call(l,f)&&Ja(o,f,l[f])}),Sx=Ro(function(o,l){Bn(l,jr(l),o)}),Wu=Ro(function(o,l,f,y){Bn(l,jr(l),o,y)}),c8=Ro(function(o,l,f,y){Bn(l,er(l),o,y)}),l8=ai(Eg);function u8(o,l){var f=Do(o);return l==null?f:eS(f,l)}var h8=We(function(o,l){o=ft(o);var f=-1,y=l.length,x=y>2?l[2]:t;for(x&&Tr(l[0],l[1],x)&&(y=1);++f<y;)for(var O=l[f],D=jr(O),L=-1,U=D.length;++L<U;){var te=D[L],ne=o[te];(ne===t||En(ne,Io[te])&&!ht.call(o,te))&&(o[te]=O[te])}return o}),d8=We(function(o){return o.push(t,BS),Ur(xx,t,o)});function f8(o,l){return j_(o,Ae(l,3),Nn)}function g8(o,l){return j_(o,Ae(l,3),Og)}function p8(o,l){return o==null?o:kg(o,Ae(l,3),jr)}function m8(o,l){return o==null?o:sS(o,Ae(l,3),jr)}function v8(o,l){return o&&Nn(o,Ae(l,3))}function y8(o,l){return o&&Og(o,Ae(l,3))}function b8(o){return o==null?[]:Cu(o,er(o))}function w8(o){return o==null?[]:Cu(o,jr(o))}function op(o,l,f){var y=o==null?t:Ms(o,l);return y===t?f:y}function _8(o,l){return o!=null&&zS(o,l,U6)}function ap(o,l){return o!=null&&zS(o,l,$6)}var S8=RS(function(o,l,f){l!=null&&typeof l.toString!="function"&&(l=hu.call(l)),o[l]=f},lp(Lr)),x8=RS(function(o,l,f){l!=null&&typeof l.toString!="function"&&(l=hu.call(l)),ht.call(o,l)?o[l].push(f):o[l]=[f]},Ae),C8=We(ec);function er(o){return Rr(o)?J_(o):Pg(o)}function jr(o){return Rr(o)?J_(o,!0):tj(o)}function T8(o,l){var f={};return l=Ae(l,3),Nn(o,function(y,x,O){si(f,l(y,x,O),y)}),f}function E8(o,l){var f={};return l=Ae(l,3),Nn(o,function(y,x,O){si(f,x,l(y,x,O))}),f}var k8=Ro(function(o,l,f){Tu(o,l,f)}),xx=Ro(function(o,l,f,y){Tu(o,l,f,y)}),O8=ai(function(o,l){var f={};if(o==null)return f;var y=!1;l=wt(l,function(O){return O=zi(O,o),y||(y=O.length>1),O}),Bn(o,Yg(o),f),y&&(f=ln(f,g|p|v,Sj));for(var x=l.length;x--;)Ng(f,l[x]);return f});function A8(o,l){return Cx(o,Vu(Ae(l)))}var I8=ai(function(o,l){return o==null?{}:nj(o,l)});function Cx(o,l){if(o==null)return{};var f=wt(Yg(o),function(y){return[y]});return l=Ae(l),pS(o,f,function(y,x){return l(y,x[0])})}function M8(o,l,f){l=zi(l,o);var y=-1,x=l.length;for(x||(x=1,o=t);++y<x;){var O=o==null?t:o[Vn(l[y])];O===t&&(y=x,O=f),o=li(O)?O.call(o):O}return o}function P8(o,l,f){return o==null?o:rc(o,l,f)}function D8(o,l,f,y){return y=typeof y=="function"?y:t,o==null?o:rc(o,l,f,y)}var Tx=FS(er),Ex=FS(jr);function R8(o,l,f){var y=Fe(o),x=y||Ui(o)||Fo(o);if(l=Ae(l,4),f==null){var O=o&&o.constructor;x?f=y?new O:[]:Et(o)?f=li(O)?Do(gu(o)):{}:f={}}return(x?on:Nn)(o,function(D,L,U){return l(f,D,L,U)}),f}function j8(o,l){return o==null?!0:Ng(o,l)}function L8(o,l,f){return o==null?o:wS(o,l,Hg(f))}function F8(o,l,f,y){return y=typeof y=="function"?y:t,o==null?o:wS(o,l,Hg(f),y)}function No(o){return o==null?[]:bg(o,er(o))}function N8(o){return o==null?[]:bg(o,jr(o))}function B8(o,l,f){return f===t&&(f=l,l=t),f!==t&&(f=dn(f),f=f===f?f:0),l!==t&&(l=dn(l),l=l===l?l:0),Is(dn(o),l,f)}function V8(o,l,f){return l=ui(l),f===t?(f=l,l=0):f=ui(f),o=dn(o),Y6(o,l,f)}function H8(o,l,f){if(f&&typeof f!="boolean"&&Tr(o,l,f)&&(l=f=t),f===t&&(typeof l=="boolean"?(f=l,l=t):typeof o=="boolean"&&(f=o,o=t)),o===t&&l===t?(o=0,l=1):(o=ui(o),l===t?(l=o,o=0):l=ui(l)),o>l){var y=o;o=l,l=y}if(f||o%1||l%1){var x=K_();return gr(o+x*(l-o+b4("1e-"+((x+"").length-1))),l)}return jg(o,l)}var z8=jo(function(o,l,f){return l=l.toLowerCase(),o+(f?kx(l):l)});function kx(o){return cp(lt(o).toLowerCase())}function Ox(o){return o=lt(o),o&&o.replace(ri,P4).replace(l4,"")}function W8(o,l,f){o=lt(o),l=Yr(l);var y=o.length;f=f===t?y:Is(He(f),0,y);var x=f;return f-=l.length,f>=0&&o.slice(f,x)==l}function U8(o){return o=lt(o),o&&za.test(o)?o.replace(xn,D4):o}function $8(o){return o=lt(o),o&&Qt.test(o)?o.replace(Xe,"\\$&"):o}var Y8=jo(function(o,l,f){return o+(f?"-":"")+l.toLowerCase()}),X8=jo(function(o,l,f){return o+(f?" ":"")+l.toLowerCase()}),G8=MS("toLowerCase");function q8(o,l,f){o=lt(o),l=He(l);var y=l?Oo(o):0;if(!l||y>=l)return o;var x=(l-y)/2;return Mu(yu(x),f)+o+Mu(vu(x),f)}function K8(o,l,f){o=lt(o),l=He(l);var y=l?Oo(o):0;return l&&y<l?o+Mu(l-y,f):o}function Z8(o,l,f){o=lt(o),l=He(l);var y=l?Oo(o):0;return l&&y<l?Mu(l-y,f)+o:o}function J8(o,l,f){return f||l==null?l=0:l&&(l=+l),s6(lt(o).replace(Sr,""),l||0)}function Q8(o,l,f){return(f?Tr(o,l,f):l===t)?l=1:l=He(l),Lg(lt(o),l)}function eF(){var o=arguments,l=lt(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var tF=jo(function(o,l,f){return o+(f?"_":"")+l.toLowerCase()});function rF(o,l,f){return f&&typeof f!="number"&&Tr(o,l,f)&&(l=f=t),f=f===t?W:f>>>0,f?(o=lt(o),o&&(typeof l=="string"||l!=null&&!sp(l))&&(l=Yr(l),!l&&ko(o))?Wi(Cn(o),0,f):o.split(l,f)):[]}var nF=jo(function(o,l,f){return o+(f?" ":"")+cp(l)});function iF(o,l,f){return o=lt(o),f=f==null?0:Is(He(f),0,o.length),l=Yr(l),o.slice(f,f+l.length)==l}function sF(o,l,f){var y=E.templateSettings;f&&Tr(o,l,f)&&(l=t),o=lt(o),l=Wu({},l,y,NS);var x=Wu({},l.imports,y.imports,NS),O=er(x),D=bg(x,O),L,U,te=0,ne=l.interpolate||xr,se="__p += '",ve=_g((l.escape||xr).source+"|"+ne.source+"|"+(ne===So?xe:xr).source+"|"+(l.evaluate||xr).source+"|$","g"),Ee="//# sourceURL="+(ht.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++g4+"]")+`
`;o.replace(ve,function(Me,Ye,Je,Gr,Er,qr){return Je||(Je=Gr),se+=o.slice(te,qr).replace(Co,R4),Ye&&(L=!0,se+=`' +
__e(`+Ye+`) +
'`),Er&&(U=!0,se+=`';
`+Er+`;
__p += '`),Je&&(se+=`' +
((__t = (`+Je+`)) == null ? '' : __t) +
'`),te=qr+Me.length,Me}),se+=`';
`;var Ie=ht.call(l,"variable")&&l.variable;if(!Ie)se=`with (obj) {
`+se+`
}
`;else if(re.test(Ie))throw new Le(c);se=(U?se.replace(ti,""):se).replace(Fn,"$1").replace(wo,"$1;"),se="function("+(Ie||"obj")+`) {
`+(Ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var ze=Ix(function(){return ot(O,Ee+"return "+se).apply(t,D)});if(ze.source=se,ip(ze))throw ze;return ze}function oF(o){return lt(o).toLowerCase()}function aF(o){return lt(o).toUpperCase()}function cF(o,l,f){if(o=lt(o),o&&(f||l===t))return B_(o);if(!o||!(l=Yr(l)))return o;var y=Cn(o),x=Cn(l),O=V_(y,x),D=H_(y,x)+1;return Wi(y,O,D).join("")}function lF(o,l,f){if(o=lt(o),o&&(f||l===t))return o.slice(0,W_(o)+1);if(!o||!(l=Yr(l)))return o;var y=Cn(o),x=H_(y,Cn(l))+1;return Wi(y,0,x).join("")}function uF(o,l,f){if(o=lt(o),o&&(f||l===t))return o.replace(Sr,"");if(!o||!(l=Yr(l)))return o;var y=Cn(o),x=V_(y,Cn(l));return Wi(y,x).join("")}function hF(o,l){var f=X,y=J;if(Et(l)){var x="separator"in l?l.separator:x;f="length"in l?He(l.length):f,y="omission"in l?Yr(l.omission):y}o=lt(o);var O=o.length;if(ko(o)){var D=Cn(o);O=D.length}if(f>=O)return o;var L=f-Oo(y);if(L<1)return y;var U=D?Wi(D,0,L).join(""):o.slice(0,L);if(x===t)return U+y;if(D&&(L+=U.length-L),sp(x)){if(o.slice(L).search(x)){var te,ne=U;for(x.global||(x=_g(x.source,lt(ke.exec(x))+"g")),x.lastIndex=0;te=x.exec(ne);)var se=te.index;U=U.slice(0,se===t?L:se)}}else if(o.indexOf(Yr(x),L)!=L){var ve=U.lastIndexOf(x);ve>-1&&(U=U.slice(0,ve))}return U+y}function dF(o){return o=lt(o),o&&_o.test(o)?o.replace(ji,H4):o}var fF=jo(function(o,l,f){return o+(f?" ":"")+l.toUpperCase()}),cp=MS("toUpperCase");function Ax(o,l,f){return o=lt(o),l=f?t:l,l===t?L4(o)?U4(o):k4(o):o.match(l)||[]}var Ix=We(function(o,l){try{return Ur(o,t,l)}catch(f){return ip(f)?f:new Le(f)}}),gF=ai(function(o,l){return on(l,function(f){f=Vn(f),si(o,f,rp(o[f],o))}),o});function pF(o){var l=o==null?0:o.length,f=Ae();return o=l?wt(o,function(y){if(typeof y[1]!="function")throw new an(a);return[f(y[0]),y[1]]}):[],We(function(y){for(var x=-1;++x<l;){var O=o[x];if(Ur(O[0],this,y))return Ur(O[1],this,y)}})}function mF(o){return H6(ln(o,g))}function lp(o){return function(){return o}}function vF(o,l){return o==null||o!==o?l:o}var yF=DS(),bF=DS(!0);function Lr(o){return o}function up(o){return lS(typeof o=="function"?o:ln(o,g))}function wF(o){return hS(ln(o,g))}function _F(o,l){return dS(o,ln(l,g))}var SF=We(function(o,l){return function(f){return ec(f,o,l)}}),xF=We(function(o,l){return function(f){return ec(o,f,l)}});function hp(o,l,f){var y=er(l),x=Cu(l,y);f==null&&!(Et(l)&&(x.length||!y.length))&&(f=l,l=o,o=this,x=Cu(l,er(l)));var O=!(Et(f)&&"chain"in f)||!!f.chain,D=li(o);return on(x,function(L){var U=l[L];o[L]=U,D&&(o.prototype[L]=function(){var te=this.__chain__;if(O||te){var ne=o(this.__wrapped__),se=ne.__actions__=Dr(this.__actions__);return se.push({func:U,args:arguments,thisArg:o}),ne.__chain__=te,ne}return U.apply(o,Fi([this.value()],arguments))})}),o}function CF(){return ir._===this&&(ir._=K4),this}function dp(){}function TF(o){return o=He(o),We(function(l){return fS(l,o)})}var EF=Wg(wt),kF=Wg(R_),OF=Wg(gg);function Mx(o){return Kg(o)?pg(Vn(o)):ij(o)}function AF(o){return function(l){return o==null?t:Ms(o,l)}}var IF=jS(),MF=jS(!0);function fp(){return[]}function gp(){return!1}function PF(){return{}}function DF(){return""}function RF(){return!0}function jF(o,l){if(o=He(o),o<1||o>fe)return[];var f=W,y=gr(o,W);l=Ae(l),o-=W;for(var x=yg(y,l);++f<o;)l(f);return x}function LF(o){return Fe(o)?wt(o,Vn):Xr(o)?[o]:Dr(ZS(lt(o)))}function FF(o){var l=++G4;return lt(o)+l}var NF=Iu(function(o,l){return o+l},0),BF=Ug("ceil"),VF=Iu(function(o,l){return o/l},1),HF=Ug("floor");function zF(o){return o&&o.length?xu(o,Lr,Ag):t}function WF(o,l){return o&&o.length?xu(o,Ae(l,2),Ag):t}function UF(o){return F_(o,Lr)}function $F(o,l){return F_(o,Ae(l,2))}function YF(o){return o&&o.length?xu(o,Lr,Dg):t}function XF(o,l){return o&&o.length?xu(o,Ae(l,2),Dg):t}var GF=Iu(function(o,l){return o*l},1),qF=Ug("round"),KF=Iu(function(o,l){return o-l},0);function ZF(o){return o&&o.length?vg(o,Lr):0}function JF(o,l){return o&&o.length?vg(o,Ae(l,2)):0}return E.after=w7,E.ary=cx,E.assign=a8,E.assignIn=Sx,E.assignInWith=Wu,E.assignWith=c8,E.at=l8,E.before=lx,E.bind=rp,E.bindAll=gF,E.bindKey=ux,E.castArray=P7,E.chain=sx,E.chunk=Hj,E.compact=zj,E.concat=Wj,E.cond=pF,E.conforms=mF,E.constant=lp,E.countBy=ZL,E.create=u8,E.curry=hx,E.curryRight=dx,E.debounce=fx,E.defaults=h8,E.defaultsDeep=d8,E.defer=_7,E.delay=S7,E.difference=Uj,E.differenceBy=$j,E.differenceWith=Yj,E.drop=Xj,E.dropRight=Gj,E.dropRightWhile=qj,E.dropWhile=Kj,E.fill=Zj,E.filter=QL,E.flatMap=r7,E.flatMapDeep=n7,E.flatMapDepth=i7,E.flatten=tx,E.flattenDeep=Jj,E.flattenDepth=Qj,E.flip=x7,E.flow=yF,E.flowRight=bF,E.fromPairs=eL,E.functions=b8,E.functionsIn=w8,E.groupBy=s7,E.initial=rL,E.intersection=nL,E.intersectionBy=iL,E.intersectionWith=sL,E.invert=S8,E.invertBy=x8,E.invokeMap=a7,E.iteratee=up,E.keyBy=c7,E.keys=er,E.keysIn=jr,E.map=Fu,E.mapKeys=T8,E.mapValues=E8,E.matches=wF,E.matchesProperty=_F,E.memoize=Bu,E.merge=k8,E.mergeWith=xx,E.method=SF,E.methodOf=xF,E.mixin=hp,E.negate=Vu,E.nthArg=TF,E.omit=O8,E.omitBy=A8,E.once=C7,E.orderBy=l7,E.over=EF,E.overArgs=T7,E.overEvery=kF,E.overSome=OF,E.partial=np,E.partialRight=gx,E.partition=u7,E.pick=I8,E.pickBy=Cx,E.property=Mx,E.propertyOf=AF,E.pull=lL,E.pullAll=nx,E.pullAllBy=uL,E.pullAllWith=hL,E.pullAt=dL,E.range=IF,E.rangeRight=MF,E.rearg=E7,E.reject=f7,E.remove=fL,E.rest=k7,E.reverse=ep,E.sampleSize=p7,E.set=P8,E.setWith=D8,E.shuffle=m7,E.slice=gL,E.sortBy=b7,E.sortedUniq=_L,E.sortedUniqBy=SL,E.split=rF,E.spread=O7,E.tail=xL,E.take=CL,E.takeRight=TL,E.takeRightWhile=EL,E.takeWhile=kL,E.tap=zL,E.throttle=A7,E.thru=Lu,E.toArray=bx,E.toPairs=Tx,E.toPairsIn=Ex,E.toPath=LF,E.toPlainObject=_x,E.transform=R8,E.unary=I7,E.union=OL,E.unionBy=AL,E.unionWith=IL,E.uniq=ML,E.uniqBy=PL,E.uniqWith=DL,E.unset=j8,E.unzip=tp,E.unzipWith=ix,E.update=L8,E.updateWith=F8,E.values=No,E.valuesIn=N8,E.without=RL,E.words=Ax,E.wrap=M7,E.xor=jL,E.xorBy=LL,E.xorWith=FL,E.zip=NL,E.zipObject=BL,E.zipObjectDeep=VL,E.zipWith=HL,E.entries=Tx,E.entriesIn=Ex,E.extend=Sx,E.extendWith=Wu,hp(E,E),E.add=NF,E.attempt=Ix,E.camelCase=z8,E.capitalize=kx,E.ceil=BF,E.clamp=B8,E.clone=D7,E.cloneDeep=j7,E.cloneDeepWith=L7,E.cloneWith=R7,E.conformsTo=F7,E.deburr=Ox,E.defaultTo=vF,E.divide=VF,E.endsWith=W8,E.eq=En,E.escape=U8,E.escapeRegExp=$8,E.every=JL,E.find=e7,E.findIndex=QS,E.findKey=f8,E.findLast=t7,E.findLastIndex=ex,E.findLastKey=g8,E.floor=HF,E.forEach=ox,E.forEachRight=ax,E.forIn=p8,E.forInRight=m8,E.forOwn=v8,E.forOwnRight=y8,E.get=op,E.gt=N7,E.gte=B7,E.has=_8,E.hasIn=ap,E.head=rx,E.identity=Lr,E.includes=o7,E.indexOf=tL,E.inRange=V8,E.invoke=C8,E.isArguments=Rs,E.isArray=Fe,E.isArrayBuffer=V7,E.isArrayLike=Rr,E.isArrayLikeObject=Ft,E.isBoolean=H7,E.isBuffer=Ui,E.isDate=z7,E.isElement=W7,E.isEmpty=U7,E.isEqual=$7,E.isEqualWith=Y7,E.isError=ip,E.isFinite=X7,E.isFunction=li,E.isInteger=px,E.isLength=Hu,E.isMap=mx,E.isMatch=G7,E.isMatchWith=q7,E.isNaN=K7,E.isNative=Z7,E.isNil=Q7,E.isNull=J7,E.isNumber=vx,E.isObject=Et,E.isObjectLike=Dt,E.isPlainObject=oc,E.isRegExp=sp,E.isSafeInteger=e8,E.isSet=yx,E.isString=zu,E.isSymbol=Xr,E.isTypedArray=Fo,E.isUndefined=t8,E.isWeakMap=r8,E.isWeakSet=n8,E.join=oL,E.kebabCase=Y8,E.last=hn,E.lastIndexOf=aL,E.lowerCase=X8,E.lowerFirst=G8,E.lt=i8,E.lte=s8,E.max=zF,E.maxBy=WF,E.mean=UF,E.meanBy=$F,E.min=YF,E.minBy=XF,E.stubArray=fp,E.stubFalse=gp,E.stubObject=PF,E.stubString=DF,E.stubTrue=RF,E.multiply=GF,E.nth=cL,E.noConflict=CF,E.noop=dp,E.now=Nu,E.pad=q8,E.padEnd=K8,E.padStart=Z8,E.parseInt=J8,E.random=H8,E.reduce=h7,E.reduceRight=d7,E.repeat=Q8,E.replace=eF,E.result=M8,E.round=qF,E.runInContext=z,E.sample=g7,E.size=v7,E.snakeCase=tF,E.some=y7,E.sortedIndex=pL,E.sortedIndexBy=mL,E.sortedIndexOf=vL,E.sortedLastIndex=yL,E.sortedLastIndexBy=bL,E.sortedLastIndexOf=wL,E.startCase=nF,E.startsWith=iF,E.subtract=KF,E.sum=ZF,E.sumBy=JF,E.template=sF,E.times=jF,E.toFinite=ui,E.toInteger=He,E.toLength=wx,E.toLower=oF,E.toNumber=dn,E.toSafeInteger=o8,E.toString=lt,E.toUpper=aF,E.trim=cF,E.trimEnd=lF,E.trimStart=uF,E.truncate=hF,E.unescape=dF,E.uniqueId=FF,E.upperCase=fF,E.upperFirst=cp,E.each=ox,E.eachRight=ax,E.first=rx,hp(E,function(){var o={};return Nn(E,function(l,f){ht.call(E.prototype,f)||(o[f]=l)}),o}(),{chain:!1}),E.VERSION=n,on(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){E[o].placeholder=E}),on(["drop","take"],function(o,l){Ge.prototype[o]=function(f){f=f===t?1:Kt(He(f),0);var y=this.__filtered__&&!l?new Ge(this):this.clone();return y.__filtered__?y.__takeCount__=gr(f,y.__takeCount__):y.__views__.push({size:gr(f,W),type:o+(y.__dir__<0?"Right":"")}),y},Ge.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),on(["filter","map","takeWhile"],function(o,l){var f=l+1,y=f==ae||f==ee;Ge.prototype[o]=function(x){var O=this.clone();return O.__iteratees__.push({iteratee:Ae(x,3),type:f}),O.__filtered__=O.__filtered__||y,O}}),on(["head","last"],function(o,l){var f="take"+(l?"Right":"");Ge.prototype[o]=function(){return this[f](1).value()[0]}}),on(["initial","tail"],function(o,l){var f="drop"+(l?"":"Right");Ge.prototype[o]=function(){return this.__filtered__?new Ge(this):this[f](1)}}),Ge.prototype.compact=function(){return this.filter(Lr)},Ge.prototype.find=function(o){return this.filter(o).head()},Ge.prototype.findLast=function(o){return this.reverse().find(o)},Ge.prototype.invokeMap=We(function(o,l){return typeof o=="function"?new Ge(this):this.map(function(f){return ec(f,o,l)})}),Ge.prototype.reject=function(o){return this.filter(Vu(Ae(o)))},Ge.prototype.slice=function(o,l){o=He(o);var f=this;return f.__filtered__&&(o>0||l<0)?new Ge(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),l!==t&&(l=He(l),f=l<0?f.dropRight(-l):f.take(l-o)),f)},Ge.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Ge.prototype.toArray=function(){return this.take(W)},Nn(Ge.prototype,function(o,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),y=/^(?:head|last)$/.test(l),x=E[y?"take"+(l=="last"?"Right":""):l],O=y||/^find/.test(l);x&&(E.prototype[l]=function(){var D=this.__wrapped__,L=y?[1]:arguments,U=D instanceof Ge,te=L[0],ne=U||Fe(D),se=function(Ye){var Je=x.apply(E,Fi([Ye],L));return y&&ve?Je[0]:Je};ne&&f&&typeof te=="function"&&te.length!=1&&(U=ne=!1);var ve=this.__chain__,Ee=!!this.__actions__.length,Ie=O&&!ve,ze=U&&!Ee;if(!O&&ne){D=ze?D:new Ge(this);var Me=o.apply(D,L);return Me.__actions__.push({func:Lu,args:[se],thisArg:t}),new cn(Me,ve)}return Ie&&ze?o.apply(this,L):(Me=this.thru(se),Ie?y?Me.value()[0]:Me.value():Me)})}),on(["pop","push","shift","sort","splice","unshift"],function(o){var l=cu[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",y=/^(?:pop|shift)$/.test(o);E.prototype[o]=function(){var x=arguments;if(y&&!this.__chain__){var O=this.value();return l.apply(Fe(O)?O:[],x)}return this[f](function(D){return l.apply(Fe(D)?D:[],x)})}}),Nn(Ge.prototype,function(o,l){var f=E[l];if(f){var y=f.name+"";ht.call(Po,y)||(Po[y]=[]),Po[y].push({name:l,func:f})}}),Po[Au(t,T).name]=[{name:"wrapper",func:t}],Ge.prototype.clone=d6,Ge.prototype.reverse=f6,Ge.prototype.value=g6,E.prototype.at=WL,E.prototype.chain=UL,E.prototype.commit=$L,E.prototype.next=YL,E.prototype.plant=GL,E.prototype.reverse=qL,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=KL,E.prototype.first=E.prototype.head,Xa&&(E.prototype[Xa]=XL),E},Ao=$4();Es?((Es.exports=Ao)._=Ao,ug._=Ao):ir._=Ao}).call(Vo)}(Uc,Uc.exports);var it=Uc.exports;const jI=()=>{const{trackItemIds:r,trackItemsMap:e,fps:t,trackItemDetailsMap:n}=mi(),i=it.merge(e,n);return w.jsx(w.Fragment,{children:r.map(s=>{const a=i[s];return ny[a.type](a,{fps:t})})})};var iy={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(s=i(s,n(c)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var c in s)e.call(s,c)&&s[c]&&(a=i(a,c));return a}function i(s,a){return a?s?s+" "+a:s+a:s}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(iy);var LI=iy.exports;const oa=pp(LI),FI={asChild:{type:"boolean"}},NI={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},BI={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},Ed=["initial","xs","sm","md","lg","xl"];function sy(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function aa(r){return typeof r=="object"&&Object.keys(r).some(e=>Ed.includes(e))}function VI({className:r,customProperties:e,...t}){const n=oy({allowArbitraryValues:!0,className:r,...t}),i=HI({customProperties:e,...t});return[n,i]}function oy({allowArbitraryValues:r,value:e,className:t,propValues:n,parseValue:i=s=>s}){const s=[];if(e){if(typeof e=="string"&&n.includes(e))return ay(t,e,i);if(aa(e)){const a=e;for(const c in a){if(!sy(a,c)||!Ed.includes(c))continue;const u=a[c];if(u!==void 0){if(n.includes(u)){const h=ay(t,u,i),d=c==="initial"?h:`${c}:${h}`;s.push(d)}else if(r){const h=c==="initial"?t:`${c}:${t}`;s.push(h)}}}return s.join(" ")}if(r)return t}}function ay(r,e,t){const n=r?"-":"",i=t(e),s=i?.startsWith("-"),a=s?"-":"",c=s?i?.substring(1):i;return`${a}${r}${n}${c}`}function HI({customProperties:r,value:e,propValues:t,parseValue:n=i=>i}){let i={};if(!(!e||typeof e=="string"&&t.includes(e))){if(typeof e=="string"&&(i=Object.fromEntries(r.map(s=>[s,e]))),aa(e)){const s=e;for(const a in s){if(!sy(s,a)||!Ed.includes(a))continue;const c=s[a];if(!t.includes(c))for(const u of r)i={[a==="initial"?u:`${u}-${a}`]:c,...i}}}for(const s in i){const a=i[s];a!==void 0&&(i[s]=n(a))}return i}}function cy(...r){let e={};for(const t of r)t&&(e={...e,...t});return Object.keys(e).length?e:void 0}function zI(...r){return Object.assign({},...r)}function WI(r,...e){let t,n;const i={...r},s=zI(...e);for(const a in s){let c=i[a];const u=s[a];if(u.default!==void 0&&c===void 0&&(c=u.default),u.type==="enum"&&![u.default,...u.values].includes(c)&&!aa(c)&&(c=u.default),i[a]=c,"className"in u&&u.className){delete i[a];const h="responsive"in u;if(!c||aa(c)&&!h)continue;if(aa(c)&&(u.default!==void 0&&c.initial===void 0&&(c.initial=u.default),u.type==="enum"&&([u.default,...u.values].includes(c.initial)||(c.initial=u.default))),u.type==="enum"){const d=oy({allowArbitraryValues:!1,value:c,className:u.className,propValues:u.values,parseValue:u.parseValue});t=oa(t,d);continue}if(u.type==="string"||u.type==="enum | string"){const d=u.type==="string"?[]:u.values,[g,p]=VI({className:u.className,customProperties:u.customProperties,propValues:d,parseValue:u.parseValue,value:c});n=cy(n,p),t=oa(t,g);continue}if(u.type==="boolean"&&c){t=oa(t,u.className);continue}}}return i.className=oa(t,r.className),i.style=cy(n,r.style),i}const Qi=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],UI={m:{type:"enum | string",values:Qi,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:Qi,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:Qi,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:Qi,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:Qi,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:Qi,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:Qi,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},$I=zx,es=["0","1","2","3","4","5","6","7","8","9"],YI={p:{type:"enum | string",className:"rt-r-p",customProperties:["--p"],values:es,responsive:!0},px:{type:"enum | string",className:"rt-r-px",customProperties:["--pl","--pr"],values:es,responsive:!0},py:{type:"enum | string",className:"rt-r-py",customProperties:["--pt","--pb"],values:es,responsive:!0},pt:{type:"enum | string",className:"rt-r-pt",customProperties:["--pt"],values:es,responsive:!0},pr:{type:"enum | string",className:"rt-r-pr",customProperties:["--pr"],values:es,responsive:!0},pb:{type:"enum | string",className:"rt-r-pb",customProperties:["--pb"],values:es,responsive:!0},pl:{type:"enum | string",className:"rt-r-pl",customProperties:["--pl"],values:es,responsive:!0}},kd=["visible","hidden","clip","scroll","auto"],XI=["static","relative","absolute","fixed","sticky"],ca=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],GI=["0","1"],qI=["0","1"],KI={...YI,...NI,...BI,position:{type:"enum",className:"rt-r-position",values:XI,responsive:!0},inset:{type:"enum | string",className:"rt-r-inset",customProperties:["--inset"],values:ca,responsive:!0},top:{type:"enum | string",className:"rt-r-top",customProperties:["--top"],values:ca,responsive:!0},right:{type:"enum | string",className:"rt-r-right",customProperties:["--right"],values:ca,responsive:!0},bottom:{type:"enum | string",className:"rt-r-bottom",customProperties:["--bottom"],values:ca,responsive:!0},left:{type:"enum | string",className:"rt-r-left",customProperties:["--left"],values:ca,responsive:!0},overflow:{type:"enum",className:"rt-r-overflow",values:kd,responsive:!0},overflowX:{type:"enum",className:"rt-r-ox",values:kd,responsive:!0},overflowY:{type:"enum",className:"rt-r-oy",values:kd,responsive:!0},flexBasis:{type:"string",className:"rt-r-fb",customProperties:["--flex-basis"],responsive:!0},flexShrink:{type:"enum | string",className:"rt-r-fs",customProperties:["--flex-shrink"],values:GI,responsive:!0},flexGrow:{type:"enum | string",className:"rt-r-fg",customProperties:["--flex-grow"],values:qI,responsive:!0},gridArea:{type:"string",className:"rt-r-ga",customProperties:["--grid-area"],responsive:!0},gridColumn:{type:"string",className:"rt-r-gc",customProperties:["--grid-column"],responsive:!0},gridColumnStart:{type:"string",className:"rt-r-gcs",customProperties:["--grid-column-start"],responsive:!0},gridColumnEnd:{type:"string",className:"rt-r-gce",customProperties:["--grid-column-end"],responsive:!0},gridRow:{type:"string",className:"rt-r-gr",customProperties:["--grid-row"],responsive:!0},gridRowStart:{type:"string",className:"rt-r-grs",customProperties:["--grid-row-start"],responsive:!0},gridRowEnd:{type:"string",className:"rt-r-gre",customProperties:["--grid-row-end"],responsive:!0}},Od=["0","1","2","3","4","5","6","7","8","9"],ZI={gap:{type:"enum | string",className:"rt-r-gap",customProperties:["--gap"],values:Od,responsive:!0},gapX:{type:"enum | string",className:"rt-r-cg",customProperties:["--column-gap"],values:Od,responsive:!0},gapY:{type:"enum | string",className:"rt-r-rg",customProperties:["--row-gap"],values:Od,responsive:!0}},JI=["div","span"],QI=["none","inline-flex","flex"],eM=["row","column","row-reverse","column-reverse"],tM=["start","center","end","baseline","stretch"],rM=["start","center","end","between"],nM=["nowrap","wrap","wrap-reverse"],iM={as:{type:"enum",values:JI,default:"div"},...FI,display:{type:"enum",className:"rt-r-display",values:QI,responsive:!0},direction:{type:"enum",className:"rt-r-fd",values:eM,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:tM,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:rM,parseValue:sM,responsive:!0},wrap:{type:"enum",className:"rt-r-fw",values:nM,responsive:!0},...ZI};function sM(r){return r==="between"?"space-between":r}const Ad=m.forwardRef((r,e)=>{const{className:t,asChild:n,as:i="div",...s}=WI(r,iM,KI,UI);return m.createElement(n?$I:i,{...s,ref:e,className:oa("rt-Flex",t)})});Ad.displayName="Flex";const ly=()=>{const r=m.useRef(null),{setPlayerRef:e,duration:t,fps:n,size:i}=mi();return m.useEffect(()=>{e(r)},[]),w.jsx(Ad,{className:"size-full",children:w.jsx(OI,{ref:r,component:jI,durationInFrames:Math.round(t/1e3*n)||5*30,compositionWidth:1920,compositionHeight:1080,style:{width:"100%",height:"100%"},inputProps:{},fps:n,controls:!0})})},uy=({scrollLeft:r})=>{const e=m.useRef(null),{playerRef:t,fps:n,scale:i}=mi(),s=Cc(t??void 0),a=Rt(s/n*1e3,i.zoom)-r,[c,u]=m.useState(!1),[h,d]=m.useState(0),[g,p]=m.useState(a),v=()=>{u(!1)},b=C=>{u(!0);const T="touches"in C?C.touches[0].clientX:C.clientX;d(T),p(a)},S=C=>{if(c){const k=("touches"in C?C.touches[0].clientX:C.clientX)-h,A=g+k,M=pi(A,i.zoom);t?.current?.seekTo(M*n/1e3)}};return m.useEffect(()=>{const C=T=>{T.preventDefault()};return c?(document.addEventListener("mousemove",S),document.addEventListener("mouseup",v),document.addEventListener("touchmove",S),document.addEventListener("touchend",v),document.addEventListener("dragstart",C)):(document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",v)),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",v),document.removeEventListener("dragstart",C)}},[c,S,v]),w.jsx("div",{ref:e,role:"button",tabIndex:0,onMouseDown:C=>{b(C)},onTouchStart:C=>{b(C)},onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&b(C)},style:{position:"absolute",left:40+xc+a,top:80,width:1,height:"calc(100% - 80px)",background:"#d4d4d8",zIndex:10,cursor:"pointer"},children:w.jsxs("div",{className:"relative h-full",children:[w.jsx("div",{className:"absolute top-0  h-full w-3 -translate-x-1/2"}),w.jsx("div",{className:"absolute top-0  h-full w-0.5 -translate-x-1/2 bg-white/50"}),w.jsx("div",{style:{borderRadius:"0 0 20px 20px"},className:"absolute h-3 -translate-x-1/2 px-1.5",children:w.jsx("svg",{height:"12",viewBox:"0 0 12 12",fill:"none",children:w.jsx("path",{fill:"currentColor",d:"M11.6585 7.04881L6.6585 11.4238C6.28148 11.7537 5.71852 11.7537 5.3415 11.4238L0.341495 7.04881C0.12448 6.85892 0 6.58459 0 6.29623V1C0 0.447715 0.447715 0 1 0H11C11.5523 0 12 0.447715 12 1V6.29623C12 6.58459 11.8755 6.85892 11.6585 7.04881Z"})})})]})})},hy=r=>{const{height:e=40,longLineSize:t=8,shortLineSize:n=6,offsetX:i=Sc+xc,textOffsetY:s=12,textFormat:a=cv,scrollLeft:c=0,onClick:u}=r,{scale:h}=mi(),d=m.useRef(null),[g,p]=m.useState(null),[v,b]=m.useState({width:0,height:e});m.useEffect(()=>{const k=d.current;if(k){const A=k.getContext("2d");p(A),S(k,A,c)}},[]),m.useEffect(()=>{g&&S(d.current,g,c)},[g,c,h]);const S=(k,A,M)=>{if(!k||!A)return;const N=k.offsetParent.offsetWidth??k.offsetWidth,$=v.height;k.width=N,k.height=$,C(A,M,N,$),b({width:N,height:$})},C=(k,A,M,R)=>{const N=h.zoom,$=h.unit,V=h.segments;k.clearRect(0,0,M,R),k.save(),k.strokeStyle="#71717a",k.fillStyle="#71717a",k.lineWidth=1,k.font=`${rv}px ${nv}`,k.textBaseline="top",k.translate(.5,0),k.beginPath();const G=$*N*Ko,X=Math.floor(A/G),q=Math.ceil((A+M)/G)-X;for(let Z=0;Z<=q;++Z){const ae=Z+X;if(ae<0)continue;const ye=ae*G/N,ee=(ye-A/N)*N;if(ee<-G||ee>=M+G)continue;const me=a(ye),ie=-k.measureText(me).width/2;k.fillText(me,ee+ie+i,s)}for(let Z=0;Z<=q;++Z){const ae=Z+X;if(ae<0)continue;const ee=ae*G-A+i;for(let me=0;me<V;++me){const fe=ee+me/V*G;if(fe<0||fe>=M)continue;const ie=me%V?n:t;ie===n?k.strokeStyle="#a1a1aa":k.strokeStyle="#d4d4d8";const P=32,[W,ue]=[fe,P],[ge,we]=[W,ue+ie];k.beginPath(),k.moveTo(W,ue),k.lineTo(ge,we),k.stroke()}}k.restore()},T=k=>{const A=d.current;if(!A)return;const M=A.getBoundingClientRect(),N=k.clientX-M.left+c-Sc;u?.(N)};return w.jsx("div",{className:"border-border border-t",style:{position:"relative",width:"100%",height:`${v.height}px`,backgroundColor:"transparent"},children:w.jsx("canvas",{onClick:T,ref:d,height:v.height})})},oM=()=>w.jsx(Ad,{flexGrow:"1",justify:"center",width:"100%",height:"100%",className:"bg-scene py-3",children:w.jsx("div",{className:"max-w-3xl flex-1  w-full h-full flex relative",children:w.jsx(ly,{})})});function B(r,e,t){return(e=function(n){var i=function(s,a){if(typeof s!="object"||!s)return s;var c=s[Symbol.toPrimitive];if(c!==void 0){var u=c.call(s,a);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}(n,"string");return typeof i=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dy(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function F(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dy(Object(t),!0).forEach(function(n){B(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dy(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vt(r,e){if(r==null)return{};var t,n,i=function(a,c){if(a==null)return{};var u={};for(var h in a)if({}.hasOwnProperty.call(a,h)){if(c.indexOf(h)>=0)continue;u[h]=a[h]}return u}(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function _i(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}class fy{constructor(){B(this,"browserShadowBlurConstant",1),B(this,"DPI",96),B(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),B(this,"perfLimitSizeTotal",2097152),B(this,"maxCacheSideLimit",4096),B(this,"minCacheSideLimit",256),B(this,"disableStyleCopyPaste",!1),B(this,"enableGLFiltering",!0),B(this,"textureSize",4096),B(this,"forceGLPutImageData",!1),B(this,"cachesBoundsOfCurve",!1),B(this,"fontPaths",{}),B(this,"NUM_FRACTION_DIGITS",4)}}const et=new class extends fy{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=F(F({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>{delete this.fontPaths[r]})}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new fy,t=r?.reduce((n,i)=>(n[i]=e[i],n),{})||e;this.configure(t)}},Si=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[r]("fabric",...t)};class Pn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class gy extends Pn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class aM{}class cM extends aM{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,n),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),Si("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const lM={};let py;const Dn=()=>py||(py={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new cM,dispose(){},copyPasteData:lM}),eo=()=>Dn().document,$c=()=>Dn().window,my=()=>{var r;return Math.max((r=et.devicePixelRatio)!==null&&r!==void 0?r:$c().devicePixelRatio,1)},la=new class{constructor(){B(this,"charWidthsCache",{}),B(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:n}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=et,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},Id="6.5.4";function ts(){}const xi=Math.PI/2,Wn=2*Math.PI,Md=Math.PI/180,yr=Object.freeze([1,0,0,1,0,0]),Pd=16,Ci=.4477152502,Ve="center",at="left",kr="top",Dd="bottom",jt="right",Or="none",Rd=/\r?\n/,vy="moving",Yc="scaling",yy="rotating",jd="rotate",by="skewing",ua="resizing",wy="modifyPoly",uM="modifyPath",Xc="changed",Gc="scale",br="scaleX",Nr="scaleY",to="skewX",ro="skewY",Wt="fill",Ar="stroke",qc="modified",no="json",Ld="svg",le=new class{constructor(){this[no]=new Map,this[Ld]=new Map}has(r){return this[no].has(r)}getClass(r){const e=this[no].get(r);if(!e)throw new Pn("No class registered for ".concat(r));return e}setClass(r,e){e?this[no].set(e,r):(this[no].set(r.type,r),this[no].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[Ld].get(r)}setSVGClass(r,e){this[Ld].set(e??r.type.toLowerCase(),r)}},Kc=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach(e=>e.abort()),r}cancelByCanvas(r){if(!r)return[];const e=this.filter(t=>{var n;return t.target===r||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===r});return e.forEach(t=>t.abort()),e}cancelByTarget(r){if(!r)return[];const e=this.filter(t=>t.target===r);return e.forEach(t=>t.abort()),e}};class hM{constructor(){B(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[i,s]=n;this.on(i,s)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(i=>{let[s,a]=i;n.push(this.once(s,a))}),()=>n.forEach(i=>i())}if(t){const n=this.on(e,function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];t.call(this,...s),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],i=n.indexOf(t);i>-1&&n.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[i,s]=n;this._removeEventListener(i,s)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const i=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const rs=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},pn=r=>{if(r===0)return 1;switch(Math.abs(r)/xi){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},mn=r=>{if(r===0)return 0;const e=r/xi,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class Y{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Y(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Y(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Y(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Y(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Y(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Y(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Y(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Y(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Y(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new Y(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Y(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new Y(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fd;const n=mn(e),i=pn(e),s=this.subtract(t);return new Y(s.x*i-s.y*n,s.x*n+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Y(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Fd=new Y(0,0),Zc=r=>!!r&&Array.isArray(r._objects);function _y(r){class e extends r{constructor(){super(...arguments),B(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];const a=this._objects.push(...i);return i.forEach(c=>this._onObjectAdded(c)),a}insertAt(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return this._objects.splice(n,0,...s),s.forEach(c=>this._onObjectAdded(c)),this._objects.length}remove(){const n=this._objects,i=[];for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return a.forEach(u=>{const h=n.indexOf(u);h!==-1&&(n.splice(h,1),i.push(u),this._onObjectRemoved(u))}),i}forEachObject(n){this.getObjects().forEach((i,s,a)=>n(i,s,a))}getObjects(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(a=>a.isType(...i))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,i){return!!this._objects.includes(n)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(n,!0))}complexity(){return this._objects.reduce((n,i)=>n+=i.complexity?i.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(rs(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(rs(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==0){const a=this.findNewLowerIndex(n,s,i);return rs(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==this._objects.length-1){const a=this.findNewUpperIndex(n,s,i);return rs(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,i){return n!==this._objects[i]&&(rs(this._objects,n),this._objects.splice(i,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,i,s){let a;if(s){a=i;for(let c=i-1;c>=0;--c)if(n.isOverlapping(this._objects[c])){a=c;break}}else a=i-1;return a}findNewUpperIndex(n,i,s){let a;if(s){a=i;for(let c=i+1;c<this._objects.length;++c)if(n.isOverlapping(this._objects[c])){a=c;break}}else a=i+1;return a}collectObjects(n){let{left:i,top:s,width:a,height:c}=n,{includeIntersecting:u=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=[],d=new Y(i,s),g=d.add(new Y(a,c));for(let p=this._objects.length-1;p>=0;p--){const v=this._objects[p];v.selectable&&v.visible&&(u&&v.intersectsWithRect(d,g)||v.isContainedWithinRect(d,g)||u&&v.containsPoint(d)||u&&v.containsPoint(g))&&h.push(v)}return h}}return e}class Sy extends hM{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function ha(r){return $c().requestAnimationFrame(r)}function xy(r){return $c().cancelAnimationFrame(r)}let dM=0;const Ti=()=>dM++,Zr=()=>{const r=eo().createElement("canvas");if(!r||r.getContext===void 0)throw new Pn("Failed to create `canvas` element");return r},Cy=()=>eo().createElement("img"),vn=r=>{const e=Zr();return e.width=r.width,e.height=r.height,e},Nd=(r,e,t)=>r.toDataURL("image/".concat(e),t),At=r=>r*Md,Ei=r=>r/Md,Ty=r=>r.every((e,t)=>e===yr[t]),ur=(r,e,t)=>new Y(r).transform(e,t),Br=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:n,y:i}=new Y(r[4],r[5]).transform(t,!0);return t[4]=-n,t[5]=-i,t},It=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],Jc=(r,e)=>r.reduceRight((t,n)=>n&&t?It(n,t,e):n||t,void 0)||yr.concat(),Ey=r=>{let[e,t]=r;return Math.atan2(t,e)},io=r=>{const e=Ey(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(t),i=(r[0]*r[3]-r[2]*r[1])/n,s=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:Ei(e),scaleX:n,scaleY:i,skewX:Ei(s),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},so=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function oo(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=At(r),i=pn(n),s=mn(n);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const Qc=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},ky=r=>Math.tan(At(r)),Bd=r=>[1,0,ky(r),1,0,0],Vd=r=>[1,ky(r),0,1,0,0],da=r=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:i=!1,skewX:s=0,skewY:a=0}=r,c=Qc(n?-e:e,i?-t:t);return s&&(c=It(c,Bd(s),!0)),a&&(c=It(c,Vd(a),!0)),c},Oy=r=>{const{translateX:e=0,translateY:t=0,angle:n=0}=r;let i=so(e,t);n&&(i=It(i,oo({angle:n})));const s=da(r);return Ty(s)||(i=It(i,s)),i},fa=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,i){if(e&&e.aborted)return i(new gy("loadImage"));const s=Cy();let a;e&&(a=function(u){s.src="",i(u)},e.addEventListener("abort",a,{once:!0}));const c=function(){s.onload=s.onerror=null,a&&e?.removeEventListener("abort",a),n(s)};r?(s.onload=c,s.onerror=function(){a&&e?.removeEventListener("abort",a),i(new Pn("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=r):c()})},ao=function(r){let{signal:e,reviver:t=ts}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(r.map(a=>le.getClass(a.type).fromObject(a,{signal:e}).then(c=>(t(a,c),s.push(c),c)))).then(n).catch(a=>{s.forEach(c=>{c.dispose&&c.dispose()}),i(a)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},ga=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const i=[];e&&e.addEventListener("abort",n,{once:!0});const s=Object.values(r).map(c=>c&&c.type&&le.has(c.type)?ao([c],{signal:e}).then(u=>{let[h]=u;return i.push(h),h}):c),a=Object.keys(r);Promise.all(s).then(c=>c.reduce((u,h,d)=>(u[a[d]]=h,u),{})).then(t).catch(c=>{i.forEach(u=>{u.dispose&&u.dispose()}),n(c)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},ns=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in r&&(e[t]=r[t]),e),{})},Hd=(r,e)=>Object.keys(r).reduce((t,n)=>(e(r[n],n,r)&&(t[n]=r[n]),t),{}),Ay={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},zd=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),Iy=(r,e,t,n)=>{r/=255,e/=255,t/=255;const i=Math.max(r,e,t),s=Math.min(r,e,t);let a,c;const u=(i+s)/2;if(i===s)a=c=0;else{const h=i-s;switch(c=u>.5?h/(2-i-s):h/(i+s),i){case r:a=(e-t)/h+(e<t?6:0);break;case e:a=(t-r)/h+2;break;case t:a=(r-e)/h+4}a/=6}return[Math.round(360*a),Math.round(100*c),Math.round(100*u),n]},My=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},el=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),Py=r=>{let[e,t,n,i=1]=r;const s=Math.round(.3*e+.59*t+.11*n);return[s,s,s,i]};class ut{constructor(e){if(B(this,"isUnrecognised",!1),e)if(e instanceof ut)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,i,s=1]=e;this.setSource([t,n,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Ay&&(e=Ay[e]),e==="transparent"?[255,255,255,0]:ut.sourceFromHex(e)||ut.sourceFromRgb(e)||ut.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Iy(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,i]=Iy(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,i]=this.getSource();return"".concat(el(e)).concat(el(t)).concat(el(n)).concat(el(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Py(this.getSource())),this}toBlackWhite(e){const[t,,,n]=Py(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(e){e instanceof ut||(e=new ut(e));const t=this.getSource(),n=e.getSource(),[i,s,a]=t.map((c,u)=>Math.round(.5*c+.5*n[u]));return this.setSource([i,s,a,t[3]]),this}static fromRgb(e){return ut.fromRgba(e)}static fromRgba(e){return new ut(ut.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,i,s]=t.slice(1,4).map(a=>{const c=parseFloat(a);return a.endsWith("%")?Math.round(2.55*c):c});return[n,i,s,My(t[4])]}}static fromHsl(e){return ut.fromHsla(e)}static fromHsla(e){return new ut(ut.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(ut.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let a,c,u;if(i===0)a=c=u=s;else{const h=s<=.5?s*(i+1):s+i-s*i,d=2*s-h;a=zd(d,h,n+1/3),c=zd(d,h,n),u=zd(d,h,n-1/3)}return[Math.round(255*a),Math.round(255*c),Math.round(255*u),My(t[4])]}static fromHex(e){return new ut(ut.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(u=>u+u):t.match(/.{2}/g);const[i,s,a,c=255]=n.map(u=>parseInt(u,16));return[i,s,a,c/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?Ei(n):t.includes("turn")?360*n:n}}const yt=(r,e)=>parseFloat(Number(r).toFixed(e)),is=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pd;const t=/\D{0,2}$/.exec(r),n=parseFloat(r),i=et.DPI;switch(t?.[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*e;default:return n}},Dy=r=>{const[e,t]=r.trim().split(" "),[n,i]=(s=e)&&s!==Or?[s.slice(1,4),s.slice(5,8)]:s===Or?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:n,alignY:i}},pa=r=>"matrix("+r.map(e=>yt(e,et.NUM_FRACTION_DIGITS)).join(" ")+")",ma=function(r,e){let t,n,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new ut(e),a=s.getAlpha();t=s.toRgb(),a!==1&&(n=a.toString())}else t="none";return i?"".concat(r,": ").concat(t,"; ").concat(n?"".concat(r,"-opacity: ").concat(n,"; "):""):"".concat(r,'="').concat(t,'" ').concat(n?"".concat(r,'-opacity="').concat(n,'" '):"")},Jr=r=>!!r&&r.toLive!==void 0,Ry=r=>!!r&&typeof r.toObject=="function",jy=r=>!!r&&r.offsetX!==void 0&&"source"in r,ss=r=>!!r&&"multiSelectionStacking"in r;function Ly(r){const e=r&&yn(r);let t=0,n=0;if(!r||!e)return{left:t,top:n};let i=r;const s=e.documentElement,a=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=a.scrollLeft||s.scrollLeft||0,n=a.scrollTop||s.scrollTop||0):(t+=i.scrollLeft||0,n+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:n}}const yn=r=>r.ownerDocument||null,Fy=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},Ny=function(r,e,t){let{width:n,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=i,s>1&&(r.setAttribute("width",(n*s).toString()),r.setAttribute("height",(i*s).toString()),e.scale(s,s))},Wd=(r,e)=>{let{width:t,height:n}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function By(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=Or,r}class Vy{constructor(e){B(this,"_originalCanvasStyle",void 0),B(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&eo().getElementById(e)||Zr();var n;if(t.hasAttribute("data-fabric"))throw new Pn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:i}=this.lower;Ny(n,i,e,t)}setCSSDimensions(e){Wd(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&yn(e),i={left:0,top:0};if(!n)return i;const s=((t=Fy(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let a={left:0,top:0};const c=n.documentElement;e.getBoundingClientRect!==void 0&&(a=e.getBoundingClientRect());const u=Ly(e);return{left:a.left+u.left-(c.clientLeft||0)+i.left,top:a.top+u.top-(c.clientTop||0)+i.top}}(this.lower.el)}dispose(){Dn().dispose(this.lower.el),delete this.lower}}const fM={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...yr]};class va extends _y(Sy){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return va.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new Vy(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Si("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?my():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=F({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,i=[...this.viewportTransform],s=ur(e,Br(i));i[0]=t,i[3]=t;const a=ur(s,i);i[4]+=n.x-a.x,i[5]+=n.y-a.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new Y(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new Y(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ha(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=Br(this.viewportTransform),i=ur({x:0,y:0},n),s=ur({x:e,y:t},n),a=i.min(s),c=i.max(s);return this.vptCoords={tl:a,tr:new Y(c.x,a.y),bl:new Y(a.x,c.y),br:c}}cancelRequestedRender(){this.nextRenderHandle&&(xy(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,i=t.length;n<i;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,a=this["".concat(t,"Vpt")];if(!n&&!i)return;const c=Jr(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=c?n.toLive(e):n,a&&e.transform(...s),c){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const u=n.gradientTransform||n.patternTransform;u&&e.transform(...u)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:u}=this;this.skipOffscreen=a,a&&e.transform(...s),i.render(e),this.skipOffscreen=u,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Y(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new Y(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new Y(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new Y(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new Y(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return ur(this.getCenterPoint(),Br(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Ve,Ve),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return F(F(F({version:Id},ns(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,n){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const n={},i=this.backgroundImage,s=this.overlayImage,a=this.backgroundColor,c=this.overlayColor;return Jr(a)?a.excludeFromExport||(n.background=a.toObject(t)):a&&(n.background=a),Jr(c)?c.excludeFromExport||(n.overlay=c.toObject(t)):c&&(n.overlay=c),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(n.overlayImage=this._toObject(s,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=et.NUM_FRACTION_DIGITS,a=t.viewBox;let c;if(a)c='viewBox="'.concat(a.x," ").concat(a.y," ").concat(a.width," ").concat(a.height,'" ');else if(this.svgViewportTransformation){const u=this.viewportTransform;c='viewBox="'.concat(yt(-u[4]/u[0],s)," ").concat(yt(-u[5]/u[3],s)," ").concat(yt(this.width/u[0],s)," ").concat(yt(this.height/u[3],s),'" ')}else c='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',c,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Id,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Ti()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Jr(t)){const n=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return t.toSVG(s,{additionalTransform:n?pa(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=et.fontPaths;this._objects.forEach(function s(a){e.push(a),Zc(a)&&a._objects.forEach(s)}),e.forEach(s=>{if(!(a=s)||typeof a._renderText!="function")return;var a;const{styles:c,fontFamily:u}=s;!t[u]&&n[u]&&(t[u]=!0,c&&Object.values(c).forEach(h=>{Object.values(h).forEach(d=>{let{fontFamily:g=""}=d;!t[g]&&n[g]&&(t[g]=!0)})}))});const i=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(n[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Jr(n)){const i=n.repeat||"",s=this.width,a=this.height,c=this["".concat(t,"Vpt")]?pa(Br(this.viewportTransform)):"";e.push('<rect transform="'.concat(c," translate(").concat(s/2,",").concat(a/2,')" x="').concat(n.offsetX-s/2,'" y="').concat(n.offsetY-a/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!jy(n)?s:n.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!jy(n)?a:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Pn("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:a,background:c,overlayImage:u,overlay:h,clipPath:d}=i,g=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([ao(s,{reviver:t,signal:n}),ga({backgroundImage:a,backgroundColor:c,overlayImage:u,overlayColor:h,clipPath:d},{signal:n})]).then(p=>{let[v,b]=p;return this.clear(),this.add(...v),this.set(i),this.set(b),this.renderOnAddRemove=g,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=vn(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,a=i*(s?this.getRetinaScaling():1);return Nd(this.toCanvasElement(a,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:i,top:s,filter:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=(t||this.width)*e,u=(n||this.height)*e,h=this.getZoom(),d=this.width,g=this.height,p=this.skipControlsDrawing,v=h*e,b=this.viewportTransform,S=[v,0,0,v,(b[4]-(i||0))*e,(b[5]-(s||0))*e],C=this.enableRetinaScaling,T=vn({width:c,height:u}),k=a?this._objects.filter(A=>a(A)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=S,this.width=c,this.height=u,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),k),this.viewportTransform=b,this.width=d,this.height=g,this.calcViewportBoundaries(),this.enableRetinaScaling=C,this.skipControlsDrawing=p,T}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Kc.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}B(va,"ownDefaults",fM);const gM=["touchstart","touchmove","touchend"],Hy=r=>{const e=Ly(r.target),t=function(n){const i=n.changedTouches;return i&&i[0]?i[0]:n}(r);return new Y(t.clientX+e.left,t.clientY+e.top)},tl=r=>gM.includes(r.type)||r.pointerType==="touch",Ud=r=>{r.preventDefault(),r.stopPropagation()},Rn=r=>{let e=0,t=0,n=0,i=0;for(let s=0,a=r.length;s<a;s++){const{x:c,y:u}=r[s];(c>n||!s)&&(n=c),(c<e||!s)&&(e=c),(u>i||!s)&&(i=u),(u<t||!s)&&(t=u)}return{left:e,top:t,width:n-e,height:i-t}},pM=["translateX","translateY","scaleX","scaleY"],zy=(r,e)=>co(r,It(e,r.calcOwnMatrix())),co=(r,e)=>{const t=io(e),{translateX:n,translateY:i,scaleX:s,scaleY:a}=t,c=vt(t,pM),u=new Y(n,i);r.flipX=!1,r.flipY=!1,Object.assign(r,c),r.set({scaleX:s,scaleY:a}),r.setPositionByOrigin(u,Ve,Ve)},Wy=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},$d=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),rl=(r,e,t)=>{const n=r/2,i=e/2,s=[new Y(-n,-i),new Y(n,-i),new Y(-n,i),new Y(n,i)].map(c=>c.transform(t)),a=Rn(s);return new Y(a.width,a.height)},ya=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yr;return It(Br(arguments.length>1&&arguments[1]!==void 0?arguments[1]:yr),r)},Un=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yr;return r.transform(ya(e,t))},Uy=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yr;return r.transform(ya(e,t),!0)},Yd=(r,e,t)=>{const n=ya(e,t);return co(r,It(n,r.calcOwnMatrix())),n},Xd=(r,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(r),F(F({},e),{},{target:n})),n.fire(r,e)},mM={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Vt=r=>typeof r=="string"?mM[r]:r-.5,nl="not-allowed";function $y(r){return Vt(r.originX)===Vt(Ve)&&Vt(r.originY)===Vt(Ve)}function Yy(r){return .5-Vt(r)}const bn=(r,e)=>r[e],Gd=(r,e,t,n)=>({e:r,transform:e,pointer:new Y(t,n)});function Xy(r,e){const t=r.getTotalAngle()+Ei(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function il(r,e,t,n,i){var s;let{target:a,corner:c}=r;const u=a.controls[c],h=((s=a.canvas)===null||s===void 0?void 0:s.getZoom())||1,d=a.padding/h,g=function(p,v,b,S){const C=p.getRelativeCenterPoint(),T=b!==void 0&&S!==void 0?p.translateToGivenOrigin(C,Ve,Ve,b,S):new Y(p.left,p.top);return(p.angle?v.rotate(-At(p.angle),C):v).subtract(T)}(a,new Y(n,i),e,t);return g.x>=d&&(g.x-=d),g.x<=-d&&(g.x+=d),g.y>=d&&(g.y-=d),g.y<=d&&(g.y+=d),g.x-=u.offsetX,g.y-=u.offsetY,g}const Gy=(r,e,t,n)=>{const{target:i,offsetX:s,offsetY:a}=e,c=t-s,u=n-a,h=!bn(i,"lockMovementX")&&i.left!==c,d=!bn(i,"lockMovementY")&&i.top!==u;return h&&i.set(at,c),d&&i.set(kr,u),(h||d)&&Xd(vy,Gd(r,e,t,n)),h||d};class qy{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):Or,s=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=this.opacity!==void 0?this.opacity:"1",d=this.visible?"":" visibility: hidden;",g=e?"":this.getSvgFilter(),p=ma(Wt,this.fill);return[ma(Ar,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",u,"; ",p,"fill-rule: ",t,"; ","opacity: ",h,";",g,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(pa(n));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=t?"":'style="'.concat(this.getSvgStyles(),'" '),c=i?'style="'.concat(this.getSvgFilter(),'" '):"",u=this.clipPath,h=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=u&&u.absolutePositioned,g=this.stroke,p=this.fill,v=this.shadow,b=[],S=e.indexOf("COMMON_PARTS");let C;u&&(u.clipPathId="CLIPPATH_".concat(Ti()),C='<clipPath id="'.concat(u.clipPathId,`" >
`).concat(u.toClipPathSVG(n),`</clipPath>
`)),d&&b.push("<g ",c,this.getSvgCommons(),` >
`),b.push("<g ",this.getSvgTransform(!1),d?"":c+this.getSvgCommons(),` >
`);const T=[a,h,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[S]=T,Jr(p)&&b.push(p.toSVG(this)),Jr(g)&&b.push(g.toSVG(this)),v&&b.push(v.toSVG(this)),u&&b.push(C),b.push(e.join("")),b.push(`</g>
`),d&&b.push(`</g>
`),n?n(b.join("")):b.join("")}addPaintOrder(){return this.paintFirst!==Wt?' paint-order="'.concat(this.paintFirst,'" '):""}}function sl(r){return new RegExp("^("+r.join("|")+")\\b","i")}var Ky;const os=String.raw(Ky||(Ky=_i(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),vM=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+os+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+os+"))?\\s+(.*)"),yM={cx:at,x:at,r:"radius",cy:kr,y:kr,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},qd="font-size",Kd="clip-path";sl(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),sl(["symbol","image","marker","pattern","view","svg"]);const Zy=sl(["symbol","g","a","svg","clipPath","defs"]),bM=new Y(1,0),Jy=new Y,Zd=(r,e)=>r.rotate(e),ol=(r,e)=>new Y(e).subtract(r),al=r=>r.distanceFrom(Jy),cl=(r,e)=>Math.atan2(lo(r,e),e1(r,e)),Qy=r=>cl(bM,r),ll=r=>r.eq(Jy)?r:r.scalarDivide(al(r)),Jd=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return ll(new Y(-r.y,r.x).scalarMultiply(e?1:-1))},lo=(r,e)=>r.x*e.y-r.y*e.x,e1=(r,e)=>r.x*e.x+r.y*e.y,Qd=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const n=lo(e,t),i=lo(e,r),s=lo(t,r);return n>=0?i>=0&&s<=0:!(i<=0&&s>=0)},t1="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",r1=new RegExp("(?:\\s|^)"+t1+t1+"("+os+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class $n{constructor(e){const t=typeof e=="string"?$n.parseShadow(e):e;Object.assign(this,$n.ownDefaults,t),this.id=Ti()}static parseShadow(e){const t=e.trim(),[,n=0,i=0,s=0]=(r1.exec(t)||[]).map(a=>parseFloat(a)||0);return{color:(t.replace(r1,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Zd(new Y(this.offsetX,this.offsetY),At(-e.angle)),n=new ut(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*yt((Math.abs(t.x)+this.blur)/e.width,et.NUM_FRACTION_DIGITS)+20,s=100*yt((Math.abs(t.y)+this.blur)/e.height,et.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(yt(this.blur?this.blur/2:0,et.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(yt(t.x,et.NUM_FRACTION_DIGITS),'" dy="').concat(yt(t.y,et.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=$n.ownDefaults;return this.includeDefaultValues?e:Hd(e,(n,i)=>n!==t[i])}static async fromObject(e){return new this(e)}}B($n,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),B($n,"type","shadow"),le.setClass($n,"shadow");const as=(r,e,t)=>Math.max(r,Math.min(e,t)),wM=[kr,at,br,Nr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",to,ro],Yn=[Wt,Ar,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],_M={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:at,originY:kr,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Wt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},ef=(r,e,t,n)=>(r<Math.abs(e)?(r=e,n=t/4):n=e===0&&r===0?t/Wn*Math.asin(1):t/Wn*Math.asin(e/r),{a:r,c:e,p:t,s:n}),n1=(r,e,t,n,i)=>r*Math.pow(2,10*(n-=1))*Math.sin((n*i-e)*Wn/t),i1=(r,e,t,n)=>-t*Math.cos(r/n*xi)+t+e,tf=(r,e,t,n)=>(r/=n)<1/2.75?t*(7.5625*r*r)+e:r<2/2.75?t*(7.5625*(r-=1.5/2.75)*r+.75)+e:r<2.5/2.75?t*(7.5625*(r-=2.25/2.75)*r+.9375)+e:t*(7.5625*(r-=2.625/2.75)*r+.984375)+e,s1=(r,e,t,n)=>t-tf(n-r,0,t,n)+e;var SM=Object.freeze({__proto__:null,defaultEasing:i1,easeInBack:function(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*(r/=n)*r*((i+1)*r-i)+e},easeInBounce:s1,easeInCirc:(r,e,t,n)=>-t*(Math.sqrt(1-(r/=n)*r)-1)+e,easeInCubic:(r,e,t,n)=>t*(r/n)**3+e,easeInElastic:(r,e,t,n)=>{const i=t;let s=0;if(r===0)return e;if((r/=n)===1)return e+t;s||(s=.3*n);const{a,s:c,p:u}=ef(i,t,s,1.70158);return-n1(a,c,u,r,n)+e},easeInExpo:(r,e,t,n)=>r===0?e:t*2**(10*(r/n-1))+e,easeInOutBack:function(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(r/=n/2)<1?t/2*(r*r*((1+(i*=1.525))*r-i))+e:t/2*((r-=2)*r*((1+(i*=1.525))*r+i)+2)+e},easeInOutBounce:(r,e,t,n)=>r<n/2?.5*s1(2*r,0,t,n)+e:.5*tf(2*r-n,0,t,n)+.5*t+e,easeInOutCirc:(r,e,t,n)=>(r/=n/2)<1?-t/2*(Math.sqrt(1-r**2)-1)+e:t/2*(Math.sqrt(1-(r-=2)*r)+1)+e,easeInOutCubic:(r,e,t,n)=>(r/=n/2)<1?t/2*r**3+e:t/2*((r-2)**3+2)+e,easeInOutElastic:(r,e,t,n)=>{const i=t;let s=0;if(r===0)return e;if((r/=n/2)===2)return e+t;s||(s=n*(.3*1.5));const{a,s:c,p:u,c:h}=ef(i,t,s,1.70158);return r<1?-.5*n1(a,c,u,r,n)+e:a*Math.pow(2,-10*(r-=1))*Math.sin((r*n-c)*Wn/u)*.5+h+e},easeInOutExpo:(r,e,t,n)=>r===0?e:r===n?e+t:(r/=n/2)<1?t/2*2**(10*(r-1))+e:t/2*-(2**(-10*--r)+2)+e,easeInOutQuad:(r,e,t,n)=>(r/=n/2)<1?t/2*r**2+e:-t/2*(--r*(r-2)-1)+e,easeInOutQuart:(r,e,t,n)=>(r/=n/2)<1?t/2*r**4+e:-t/2*((r-=2)*r**3-2)+e,easeInOutQuint:(r,e,t,n)=>(r/=n/2)<1?t/2*r**5+e:t/2*((r-2)**5+2)+e,easeInOutSine:(r,e,t,n)=>-t/2*(Math.cos(Math.PI*r/n)-1)+e,easeInQuad:(r,e,t,n)=>t*(r/=n)*r+e,easeInQuart:(r,e,t,n)=>t*(r/=n)*r**3+e,easeInQuint:(r,e,t,n)=>t*(r/n)**5+e,easeInSine:(r,e,t,n)=>-t*Math.cos(r/n*xi)+t+e,easeOutBack:function(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*((r=r/n-1)*r*((i+1)*r+i)+1)+e},easeOutBounce:tf,easeOutCirc:(r,e,t,n)=>t*Math.sqrt(1-(r=r/n-1)*r)+e,easeOutCubic:(r,e,t,n)=>t*((r/n-1)**3+1)+e,easeOutElastic:(r,e,t,n)=>{const i=t;let s=0;if(r===0)return e;if((r/=n)===1)return e+t;s||(s=.3*n);const{a,s:c,p:u,c:h}=ef(i,t,s,1.70158);return a*2**(-10*r)*Math.sin((r*n-c)*Wn/u)+h+e},easeOutExpo:(r,e,t,n)=>r===n?e+t:t*-(2**(-10*r/n)+1)+e,easeOutQuad:(r,e,t,n)=>-t*(r/=n)*(r-2)+e,easeOutQuart:(r,e,t,n)=>-t*((r=r/n-1)*r**3-1)+e,easeOutQuint:(r,e,t,n)=>t*((r/n-1)**5+1)+e,easeOutSine:(r,e,t,n)=>t*Math.sin(r/n*xi)+e});const xM=()=>!1;class rf{constructor(e){let{startValue:t,byValue:n,duration:i=500,delay:s=0,easing:a=i1,onStart:c=ts,onChange:u=ts,onComplete:h=ts,abort:d=xM,target:g}=e;B(this,"_state","pending"),B(this,"durationProgress",0),B(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=a,this._onStart=c,this._onChange=u,this._onComplete=h,this._abort=d,this.target=g,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ha(e),this.delay):ha(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:s}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ha(this.tick)))}register(){Kc.push(this)}unregister(){Kc.remove(this)}abort(){this._state="aborted",this.unregister()}}const CM=["startValue","endValue"];class TM extends rf{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(F(F({},vt(e,CM)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const EM=["startValue","endValue"];class kM extends rf{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(F(F({},vt(e,EM)),{},{startValue:t,byValue:n.map((i,s)=>i-t[s])}))}calculate(e){const t=this.startValue.map((n,i)=>this.easing(e,n,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const OM=["startValue","endValue","easing","onChange","onComplete","abort"],AM=(r,e,t,n)=>e+t*(1-Math.cos(r/n*xi)),nf=r=>r&&((e,t,n)=>r(new ut(e).toRgba(),t,n));class IM extends rf{constructor(e){let{startValue:t,endValue:n,easing:i=AM,onChange:s,onComplete:a,abort:c}=e,u=vt(e,OM);const h=new ut(t).getSource(),d=new ut(n).getSource();super(F(F({},u),{},{startValue:h,byValue:d.map((g,p)=>g-h[p]),easing:i,onChange:nf(s),onComplete:nf(a),abort:nf(c)}))}calculate(e){const[t,n,i,s]=this.startValue.map((c,u)=>this.easing(e,c,this.byValue[u],this.duration,u)),a=[...[t,n,i].map(Math.round),as(0,s,1)];return{value:a,valueProgress:a.map((c,u)=>this.byValue[u]!==0?Math.abs((c-this.startValue[u])/this.byValue[u]):0).find(c=>c!==0)||0}}}function sf(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new kM(r):new TM(r);return e.start(),e}function o1(r){const e=new IM(r);return e.start(),e}class _t{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const s=ol(t,n),a=ol(t,e).divide(s);return i?Math.abs(a.x)===Math.abs(a.y):a.x===a.y&&a.x>=0&&a.x<=1}}static isPointInPolygon(e,t){const n=new Y(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let i=0;for(let s=0;s<t.length;s++){const a=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,n);if(a.includes(e))return!0;i+=+(a.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,n,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const c=t.x-e.x,u=t.y-e.y,h=i.x-n.x,d=i.y-n.y,g=e.x-n.x,p=e.y-n.y,v=h*p-d*g,b=c*p-u*g,S=d*c-h*u;if(S!==0){const C=v/S,T=b/S;return(s||0<=C&&C<=1)&&(a||0<=T&&T<=1)?new _t("Intersection").append(new Y(e.x+C*c,e.y+C*u)):new _t}if(v===0||b===0){const C=s||a||_t.isPointContained(e,n,i)||_t.isPointContained(t,n,i)||_t.isPointContained(n,e,t)||_t.isPointContained(i,e,t);return new _t(C?"Coincident":void 0)}return new _t("Parallel")}static intersectSegmentLine(e,t,n,i){return _t.intersectLineLine(e,t,n,i,!1,!0)}static intersectSegmentSegment(e,t,n,i){return _t.intersectLineLine(e,t,n,i,!1,!1)}static intersectLinePolygon(e,t,n){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new _t,a=n.length;for(let c,u,h,d=0;d<a;d++){if(c=n[d],u=n[(d+1)%a],h=_t.intersectLineLine(e,t,c,u,i,!1),h.status==="Coincident")return h;s.append(...h.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,n){return _t.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new _t,i=e.length,s=[];for(let a=0;a<i;a++){const c=e[a],u=e[(a+1)%i],h=_t.intersectSegmentPolygon(c,u,t);h.status==="Coincident"?(s.push(h),n.append(c,u)):n.append(...h.points)}return s.length>0&&s.length===e.length?new _t("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const i=t.min(n),s=t.max(n),a=new Y(s.x,i.y),c=new Y(i.x,s.y);return _t.intersectPolygonPolygon(e,[i,a,s,c])}}class MM extends Sy{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?ur(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=ur(e,Br(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new Y(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,n,i];if(this.group){const a=this.group.calcTransformMatrix();return s.map(c=>ur(c,a))}return s}intersectsWithRect(e,t){return _t.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=_t.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:i,width:s,height:a}=this.getBoundingRect();return n>=e.x&&n+s<=t.x&&i>=e.y&&i+a<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return _t.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Rn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(br,e),this._set(Nr,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Ei(Ey(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||yr.concat()}calcACoords(){const e=oo({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),i=so(t,n),s=It(i,e),a=this._getTransformedDimensions(),c=a.x/2,u=a.y/2;return{tl:ur({x:-c,y:-u},s),tr:ur({x:c,y:-u},s),bl:ur({x:-c,y:u},s),br:ur({x:c,y:u},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Vt(this.originX),Vt(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,a)=>s===n[a])?i.value:(this.group&&(t=It(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=Oy(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new Y(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=F({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let i=n,s=0;this.strokeUniform&&(i=0,s=n);const a=t.width+i,c=t.height+i;let u;return u=t.skewX===0&&t.skewY===0?new Y(a*t.scaleX,c*t.scaleY):rl(a,c,da(t)),u.scalarAdd(s)}translateToGivenOrigin(e,t,n,i,s){let a=e.x,c=e.y;const u=Vt(i)-Vt(t),h=Vt(s)-Vt(n);if(u||h){const d=this._getTransformedDimensions();a+=u*d.x,c+=h*d.y}return new Y(a,c)}translateToCenterPoint(e,t,n){if(t===Ve&&n===Ve)return e;const i=this.translateToGivenOrigin(e,t,n,Ve,Ve);return this.angle?i.rotate(At(this.angle),e):i}translateToOriginPoint(e,t,n){const i=this.translateToGivenOrigin(e,Ve,Ve,t,n);return this.angle?i.rotate(At(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?ur(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new Y(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const i=this.translateToCenterPoint(e,t,n),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),at,kr)}}const PM=["type"],DM=["extraParam"];let Xn=class Uu extends MM{static getDefaults(){return Uu.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Si("warn","Setting type has no effect",e)}constructor(e){super(),B(this,"_cacheContext",null),Object.assign(this,Uu.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Zr(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,i=et.maxCacheSideLimit,s=et.minCacheSideLimit;if(t<=i&&n<=i&&t*n<=et.perfLimitSizeTotal)return t<s&&(e.width=s),n<s&&(e.height=s),e;const a=t/n,[c,u]=la.limitDimsByArea(a),h=as(s,c,i),d=as(s,u,i);return t>h&&(e.zoomX/=t/h,e.width=h,e.capped=!0),n>d&&(e.zoomY/=n/d,e.height=d,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:n,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:i,zoomX:s,zoomY:a,x:c,y:u}=this._limitCacheSize(this._getCacheCanvasDimensions()),h=n!==e.width||i!==e.height,d=this.zoomX!==s||this.zoomY!==a;if(!e||!t)return!1;if(h||d){n!==e.width||i!==e.height?(e.width=n,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const g=c/2,p=u/2;return this.cacheTranslationX=Math.round(e.width/2-g)+g,this.cacheTranslationY=Math.round(e.height/2-p)+p,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,a),this.zoomX=s,this.zoomY=a,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new Y(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=io(this.calcTransformMatrix());return new Y(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==br&&e!==Nr||(t=this._constrainScale(t)),e===br&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof $n||(t=new $n(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:s}=this,{width:a,height:c}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:s,width:a,height:c,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Ar&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const i=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=i,this.stroke=s}createClipPathLayer(e,t){const n=vn(t),i=n.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(s=>{s.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=Br(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Jr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Jr(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,a]=n?.viewportTransform||yr,c=s*i,u=a*i,h=t.nonScaling?new Y(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*et.browserShadowBlurConstant*(c+u)*(h.x+h.y)/4,e.shadowOffsetX=t.offsetX*c*h.x,e.shadowOffsetY=t.offsetY*u*h.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Jr(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===Ar?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),a=i.x/this.scaleX/s,c=i.y/this.scaleY/s,u=vn({width:Math.ceil(a),height:Math.ceil(c)}),h=u.getContext("2d");h&&(h.beginPath(),h.moveTo(0,0),h.lineTo(a,0),h.lineTo(a,c),h.lineTo(0,c),h.closePath(),h.translate(a/2,c/2),h.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(h,t),h.fillStyle=t.toLive(e),h.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(n=h.createPattern(u,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new Y(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(le.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=$d(this),n=this.group,i=this.shadow,s=Math.abs,a=e.enableRetinaScaling?my():1,c=(e.multiplier||1)*a,u=e.canvasProvider||(k=>new va(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&Wy(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&Yd(this,this.getViewportTransform()),this.setCoords();const h=Zr(),d=this.getBoundingRect(),g=this.shadow,p=new Y;if(g){const k=g.blur,A=g.nonScaling?new Y(1,1):this.getObjectScaling();p.x=2*Math.round(s(g.offsetX)+k)*s(A.x),p.y=2*Math.round(s(g.offsetY)+k)*s(A.y)}const v=d.width+p.x,b=d.height+p.y;h.width=Math.ceil(v),h.height=Math.ceil(b);const S=u(h);e.format==="jpeg"&&(S.backgroundColor="#fff"),this.setPositionByOrigin(new Y(S.width/2,S.height/2),Ve,Ve);const C=this.canvas;S._objects=[this],this.set("canvas",S),this.setCoords();const T=S.toCanvasElement(c||1,e);return this.set("canvas",C),this.shadow=i,n&&(this.group=n),this.set(t),this.setCoords(),S._objects=[],S.destroy(),T}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Nd(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:i}=this;if(t){const{x:s,y:a}=this.getRelativeCenterPoint();this.originX=Ve,this.originY=Ve,this.left=s,this.top=a}if(this.set("angle",e),t){const{x:s,y:a}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=s,this.top=a,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Kc.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Dn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,i)=>{let[s,a]=i;return n[s]=this._animate(s,a,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:a,startValue:c,onChange:u,onComplete:h}=n,d=F(F({},n),{},{target:this,startValue:c??i.reduce((g,p)=>g[p],this),endValue:t,abort:a?.bind(this),onChange:(g,p,v)=>{i.reduce((b,S,C)=>(C===i.length-1&&(b[S]=g),b[S]),this),u&&u(g,p,v)},onComplete:(g,p,v)=>{this.setCoords(),h&&h(g,p,v)}});return s?o1(d):sf(d)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let i,s=0;s<t.length;s++){if(i=t[s],i===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let a=0;a<n.length;a++){if(this===n[a])return{fork:[],otherFork:[e,...n.slice(0,a)],common:[this,...t]};if(i===n[a])return{fork:[this,...t.slice(0,s)],otherFork:[e,...n.slice(0,a)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const i=t.fork.pop(),s=t.otherFork.pop(),a=n._objects.indexOf(i),c=n._objects.indexOf(s);return a>-1&&a>c}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Uu.customProperties,this.constructor.customProperties||[]);let t;const n=et.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:a,shadow:c,strokeDashArray:u,left:h,top:d,originX:g,originY:p,width:v,height:b,strokeWidth:S,strokeLineCap:C,strokeDashOffset:T,strokeLineJoin:k,strokeUniform:A,strokeMiterLimit:M,scaleX:R,scaleY:N,angle:$,flipX:V,flipY:G,opacity:X,visible:J,backgroundColor:q,fillRule:Z,paintFirst:ae,globalCompositeOperation:ye,skewX:ee,skewY:me}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const fe=P=>yt(P,n),ie=F(F({},ns(this,e)),{},{type:this.constructor.type,version:Id,originX:g,originY:p,left:fe(h),top:fe(d),width:fe(v),height:fe(b),fill:Ry(s)?s.toObject():s,stroke:Ry(a)?a.toObject():a,strokeWidth:fe(S),strokeDashArray:u&&u.concat(),strokeLineCap:C,strokeDashOffset:T,strokeLineJoin:k,strokeUniform:A,strokeMiterLimit:fe(M),scaleX:fe(R),scaleY:fe(N),angle:fe($),flipX:V,flipY:G,opacity:fe(X),shadow:c&&c.toObject(),visible:J,backgroundColor:q,fillRule:Z,paintFirst:ae,globalCompositeOperation:ye,skewX:fe(ee),skewY:fe(me)},t?{clipPath:t}:null);return this.includeDefaultValues?ie:this._removeDefaultValues(ie)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return Hd(e,(i,s)=>{if(s===at||s===kr||s==="type")return!0;const a=n[s];return i!==a&&!(Array.isArray(i)&&Array.isArray(a)&&i.length===0&&a.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=vt(e,PM),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=n,s=vt(n,DM);return ga(t,s).then(a=>i?(delete a[i],new this(t[i],a)):new this(a))}static fromObject(e,t){return this._fromObject(e,t)}};B(Xn,"stateProperties",wM),B(Xn,"cacheProperties",Yn),B(Xn,"ownDefaults",_M),B(Xn,"type","FabricObject"),B(Xn,"colorProperties",[Wt,Ar,"backgroundColor"]),B(Xn,"customProperties",[]),le.setClass(Xn),le.setClass(Xn,"object");const ki=(r,e,t)=>(n,i,s,a)=>{const c=e(n,i,s,a);return c&&Xd(r,F(F({},Gd(n,i,s,a)),t)),c};function cs(r){return(e,t,n,i)=>{const{target:s,originX:a,originY:c}=t,u=s.getRelativeCenterPoint(),h=s.translateToOriginPoint(u,a,c),d=r(e,t,n,i);return s.setPositionByOrigin(h,t.originX,t.originY),d}}const of=ki(ua,cs((r,e,t,n)=>{const i=il(e,e.originX,e.originY,t,n);if(Vt(e.originX)===Vt(Ve)||Vt(e.originX)===Vt(jt)&&i.x<0||Vt(e.originX)===Vt(at)&&i.x>0){const{target:s}=e,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=$y(e)?2:1,u=s.width,h=Math.abs(i.x*c/s.scaleX)-a;return s.set("width",Math.max(h,1)),u!==s.width}return!1}));function a1(r,e,t,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,a=this.sizeY||n.cornerSize||i.cornerSize,c=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,u=c?Ar:Wt,h=!c&&(n.cornerStrokeColor||i.cornerStrokeColor);let d,g=e,p=t;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",s>a?(d=s,r.scale(1,a/s),p=t*s/a):a>s?(d=a,r.scale(s/a,1),g=e*a/s):d=s,r.beginPath(),r.arc(g,p,d/2,0,Wn,!1),r[u](),h&&r.stroke(),r.restore()}function c1(r,e,t,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,a=this.sizeY||n.cornerSize||i.cornerSize,c=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,u=c?Ar:Wt,h=!c&&(n.cornerStrokeColor||i.cornerStrokeColor),d=s/2,g=a/2;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",r.translate(e,t);const p=i.getTotalAngle();r.rotate(At(p)),r["".concat(u,"Rect")](-d,-g,s,a),h&&r.strokeRect(-d,-g,s,a),r.restore()}class St{constructor(e){B(this,"visible",!0),B(this,"actionName",Gc),B(this,"angle",0),B(this,"x",0),B(this,"y",0),B(this,"offsetX",0),B(this,"offsetY",0),B(this,"sizeX",0),B(this,"sizeY",0),B(this,"touchSizeX",0),B(this,"touchSizeY",0),B(this,"cursorStyle","crosshair"),B(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,i){var s;let{tl:a,tr:c,br:u,bl:h}=i;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&_t.isPointInPolygon(n,[a,c,u,h])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,i;return(n=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,i){return new Y(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,i,s,a){const c=Jc([so(n,i),oo({angle:e}),Qc((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new Y(-.5,-.5).transform(c),tr:new Y(.5,-.5).transform(c),br:new Y(.5,.5).transform(c),bl:new Y(-.5,.5).transform(c)}}render(e,t,n,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?a1.call(this,e,t,n,i,s):c1.call(this,e,t,n,i,s)}}const l1=(r,e,t)=>t.lockRotation?nl:e.cursorStyle,u1=ki(yy,cs((r,e,t,n)=>{let{target:i,ex:s,ey:a,theta:c,originX:u,originY:h}=e;const d=i.translateToOriginPoint(i.getRelativeCenterPoint(),u,h);if(bn(i,"lockRotation"))return!1;const g=Math.atan2(a-d.y,s-d.x),p=Math.atan2(n-d.y,t-d.x);let v=Ei(p-g+c);if(i.snapAngle&&i.snapAngle>0){const S=i.snapAngle,C=i.snapThreshold||S,T=Math.ceil(v/S)*S,k=Math.floor(v/S)*S;Math.abs(v-k)<C?v=k:Math.abs(v-T)<C&&(v=T)}v<0&&(v=360+v),v%=360;const b=i.angle!==v;return i.angle=v,b}));function h1(r,e){const t=e.canvas,n=r[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function d1(r,e,t){const n=bn(r,"lockScalingX"),i=bn(r,"lockScalingY");if(n&&i||!e&&(n||i)&&t||n&&e==="x"||i&&e==="y")return!0;const{width:s,height:a,strokeWidth:c}=r;return s===0&&c===0&&e!=="y"||a===0&&c===0&&e!=="x"}const RM=["e","se","s","sw","w","nw","n","ne","e"],uo=(r,e,t)=>{const n=h1(r,t);if(d1(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return nl;const i=Xy(t,e);return"".concat(RM[i],"-resize")};function af(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,a=i.by,c=h1(r,s);let u,h,d,g,p,v;if(d1(s,a,c))return!1;if(e.gestureScale)h=e.scaleX*e.gestureScale,d=e.scaleY*e.gestureScale;else{if(u=il(e,e.originX,e.originY,t,n),p=a!=="y"?Math.sign(u.x||e.signX||1):1,v=a!=="x"?Math.sign(u.y||e.signY||1):1,e.signX||(e.signX=p),e.signY||(e.signY=v),bn(s,"lockScalingFlip")&&(e.signX!==p||e.signY!==v))return!1;if(g=s._getTransformedDimensions(),c&&!a){const C=Math.abs(u.x)+Math.abs(u.y),{original:T}=e,k=C/(Math.abs(g.x*T.scaleX/s.scaleX)+Math.abs(g.y*T.scaleY/s.scaleY));h=T.scaleX*k,d=T.scaleY*k}else h=Math.abs(u.x*s.scaleX/g.x),d=Math.abs(u.y*s.scaleY/g.y);$y(e)&&(h*=2,d*=2),e.signX!==p&&a!=="y"&&(e.originX=Yy(e.originX),h*=-1,e.signX=p),e.signY!==v&&a!=="x"&&(e.originY=Yy(e.originY),d*=-1,e.signY=v)}const b=s.scaleX,S=s.scaleY;return a?(a==="x"&&s.set(br,h),a==="y"&&s.set(Nr,d)):(!bn(s,"lockScalingX")&&s.set(br,h),!bn(s,"lockScalingY")&&s.set(Nr,d)),b!==s.scaleX||S!==s.scaleY}const ba=ki(Yc,cs((r,e,t,n)=>af(r,e,t,n))),f1=ki(Yc,cs((r,e,t,n)=>af(r,e,t,n,{by:"x"}))),g1=ki(Yc,cs((r,e,t,n)=>af(r,e,t,n,{by:"y"}))),jM=["target","ex","ey","skewingSide"],cf={x:{counterAxis:"y",scale:br,skew:to,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Nr,skew:ro,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},LM=["ns","nesw","ew","nwse"],p1=(r,e,t)=>{if(e.x!==0&&bn(t,"lockSkewingY")||e.y!==0&&bn(t,"lockSkewingX"))return nl;const n=Xy(t,e)%4;return"".concat(LM[n],"-resize")};function m1(r,e,t,n,i){const{target:s}=t,{counterAxis:a,origin:c,lockSkewing:u,skew:h,flip:d}=cf[r];if(bn(s,u))return!1;const{origin:g,flip:p}=cf[a],v=Vt(t[g])*(s[p]?-1:1),b=-Math.sign(v)*(s[d]?-1:1),S=.5*-((s[h]===0&&il(t,Ve,Ve,n,i)[r]>0||s[h]>0?1:-1)*b)+.5;return ki(by,cs((T,k,A,M)=>function(R,N,$){let{target:V,ex:G,ey:X,skewingSide:J}=N,q=vt(N,jM);const{skew:Z}=cf[R],ae=$.subtract(new Y(G,X)).divide(new Y(V.scaleX,V.scaleY))[R],ye=V[Z],ee=q[Z],me=Math.tan(At(ee)),fe=R==="y"?V._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:V._getTransformedDimensions({scaleX:1,scaleY:1}).y,ie=2*ae*J/Math.max(fe,1)+me,P=Ei(Math.atan(ie));V.set(Z,P);const W=ye!==V[Z];if(W&&R==="y"){const{skewX:ue,scaleX:ge}=V,we=V._getTransformedDimensions({skewY:ye}),be=V._getTransformedDimensions(),he=ue!==0?we.x/be.x:1;he!==1&&V.set(br,he*ge)}return W}(r,k,new Y(A,M))))(e,F(F({},t),{},{[c]:S,skewingSide:b}),n,i)}const v1=(r,e,t,n)=>m1("x",r,e,t,n),y1=(r,e,t,n)=>m1("y",r,e,t,n);function ul(r,e){return r[e.canvas.altActionKey]}const wa=(r,e,t)=>{const n=ul(r,t);return e.x===0?n?to:Nr:e.y===0?n?ro:br:""},ls=(r,e,t)=>ul(r,t)?p1(0,e,t):uo(r,e,t),lf=(r,e,t,n)=>ul(r,e.target)?y1(r,e,t,n):f1(r,e,t,n),uf=(r,e,t,n)=>ul(r,e.target)?v1(r,e,t,n):g1(r,e,t,n),hf=()=>({ml:new St({x:-.5,y:0,cursorStyleHandler:ls,actionHandler:lf,getActionName:wa}),mr:new St({x:.5,y:0,cursorStyleHandler:ls,actionHandler:lf,getActionName:wa}),mb:new St({x:0,y:.5,cursorStyleHandler:ls,actionHandler:uf,getActionName:wa}),mt:new St({x:0,y:-.5,cursorStyleHandler:ls,actionHandler:uf,getActionName:wa}),tl:new St({x:-.5,y:-.5,cursorStyleHandler:uo,actionHandler:ba}),tr:new St({x:.5,y:-.5,cursorStyleHandler:uo,actionHandler:ba}),bl:new St({x:-.5,y:.5,cursorStyleHandler:uo,actionHandler:ba}),br:new St({x:.5,y:.5,cursorStyleHandler:uo,actionHandler:ba}),mtr:new St({x:0,y:-.5,actionHandler:u1,cursorStyleHandler:l1,offsetY:-40,withConnection:!0,actionName:jd})}),b1=()=>({mr:new St({x:.5,y:0,actionHandler:of,cursorStyleHandler:ls,actionName:ua}),ml:new St({x:-.5,y:0,actionHandler:of,cursorStyleHandler:ls,actionName:ua})}),w1=()=>F(F({},hf()),b1());class _a extends Xn{static getDefaults(){return F(F({},super.getDefaults()),_a.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),_a.ownDefaults),this.setOptions(e)}static createControls(){return{controls:hf()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,i=t.action;if(this===n&&i&&i.startsWith(Gc))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[s,a]=n[i],c=this.controls[s];if(c.shouldActivate(s,this,e,t?a.touchCorner:a.corner))return this.__corner=s,{key:s,control:c,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=so(t.x,t.y),i=oo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=It(n,i),a=It(e,s),c=It(a,[1/e[0],0,0,1/e[3],0,0]),u=this.group?io(this.calcTransformMatrix()):void 0;u&&(u.scaleX=Math.abs(u.scaleX),u.scaleY=Math.abs(u.scaleY));const h=this._calculateCurrentDimensions(u),d={};return this.forEachControl((g,p)=>{const v=g.positionHandler(h,c,this,g);d[p]=Object.assign(v,this._calcCornerCoords(g,v))}),d}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(At(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=F({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,s=F({hasBorders:n,hasControls:i},t),a=this.getViewportTransform(),c=s.hasBorders,u=s.hasControls,h=It(a,this.calcTransformMatrix()),d=io(h);e.save(),e.translate(d.translateX,d.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),e.rotate(At(this.group?d.angle:this.angle)),c&&this.drawBorders(e,d,t),u&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let i;if(n&&n.forActiveSelection||this.group){const s=rl(this.width,this.height,da(t)),a=this.isStrokeAccountedForInDimensions()?Fd:(this.strokeUniform?new Y().scalarAdd(this.canvas?this.canvas.getZoom():1):new Y(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(a).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(n=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:a}=this,c=F({cornerStrokeColor:i,cornerDashArray:s,cornerColor:a},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=c.cornerColor,this.transparentCorners||(e.strokeStyle=c.cornerStrokeColor),this._setLineDash(e,c.cornerDashArray),this.forEachControl((u,h)=>{if(u.getVisibility(this,h)){const d=this.oCoords[h];u.render(e,d.x,d.y,c,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,i]=t;return this.setControlVisible(n,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function _1(r,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),r}B(_a,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class dt extends _a{}_1(dt,[qy]),le.setClass(dt),le.setClass(dt,"object");const S1=(r,e,t,n)=>{const i=2*(n=Math.round(n))+1,{data:s}=r.getImageData(e-n,t-n,i,i);for(let a=3;a<s.length;a+=4)if(s[a]>0)return!1;return!0};class x1{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Y(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Y(1/this.options.scaleX,1/this.options.scaleY):new Y(1,1)}createSideVector(e,t){const n=ol(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new Y(e);return t.y+=t.x*Math.tan(At(this.options.skewY)),t.x+=t.y*Math.tan(At(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const FM=new Y;class ho extends x1{static getOrthogonalRotationFactor(e,t){const n=t?cl(e,t):Qy(e);return Math.abs(n)<xi?-1:1}constructor(e,t,n,i){super(i),B(this,"AB",void 0),B(this,"AC",void 0),B(this,"alpha",void 0),B(this,"bisector",void 0),this.A=new Y(e),this.B=new Y(t),this.C=new Y(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=cl(this.AB,this.AC),this.bisector=ll(Zd(this.AB.eq(FM)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=Jd(i),a=ho.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,n*a)}projectBevel(){const e=[];return(this.alpha%Wn==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),s=this.options.strokeUniform?al(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return al(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],i=new Y(ho.getOrthogonalRotationFactor(this.bisector),ho.getOrthogonalRotationFactor(new Y(this.bisector.y,this.bisector.x)));return[new Y(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new Y(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{Qd(s,e,t)&&n.push(this.A.add(s))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:i,skewY:s,scaleX:a,scaleY:c,strokeUniform:u}=this.options,h=new Y(Math.tan(At(i)),Math.tan(At(s))),d=this.strokeProjectionMagnitude,g=u?d/c/Math.sqrt(1/c**2+1/a**2*h.y**2):d/Math.sqrt(1+h.y**2),p=new Y(Math.sqrt(Math.max(d**2-g**2,0)),g),v=u?d/Math.sqrt(1+h.x**2*(1/c)**2/(1/a+1/a*h.x*h.y)**2):d/Math.sqrt(1+h.x**2/(1+h.x*h.y)**2),b=new Y(v,Math.sqrt(Math.max(d**2-v**2,0)));return[b,b.scalarMultiply(-1),p,p.scalarMultiply(-1)].map(S=>this.applySkew(u?S.multiply(this.strokeUniformScalar):S)).forEach(S=>{Qd(S,e,t)&&n.push(this.applySkew(this.A).add(S))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Wn==0,n=this.applySkew(this.A),i=e[t?0:2].subtract(n),s=e[t?1:0].subtract(n),a=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),c=lo(i,a)>0,u=c?i:s,h=c?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(u,h)):e.push(...this.projectRoundNoSkew(u,h)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class C1 extends x1{constructor(e,t,n){super(n),this.A=new Y(e),this.T=new Y(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(Jd(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new Y(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new ho(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new Y(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(ll(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);e.push(i.add(t),i.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const T1=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(r.length===0)return n;const i=r.reduce((s,a)=>(s[s.length-1].eq(a)||s.push(new Y(a)),s),[new Y(r[0])]);if(i.length===1)t=!0;else if(!t){const s=i[0],a=((c,u)=>{for(let h=c.length-1;h>=0;h--)if(u(c[h],h,c))return h;return-1})(i,c=>!c.eq(s));i.splice(a+1)}return i.forEach((s,a,c)=>{let u,h;a===0?(h=c[1],u=t?s:c[c.length-1]):a===c.length-1?(u=c[a-1],h=t?s:c[0]):(u=c[a-1],h=c[a+1]),t&&c.length===1?n.push(...new C1(s,s,e).project()):!t||a!==0&&a!==c.length-1?n.push(...new ho(s,u,h,e).project()):n.push(...new C1(s,a===0?h:u,e).project())}),n},df=r=>{const e={};return Object.keys(r).forEach(t=>{e[t]={},Object.keys(r[t]).forEach(n=>{e[t][n]=F({},r[t][n])})}),e},E1=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),hl=r=>{const e=[];for(let t,n=0;n<r.length;n++)(t=NM(r,n))!==!1&&e.push(t);return e},NM=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const i=r.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var BM=Object.freeze({__proto__:null,capitalize:function(r){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(r.charAt(0).toUpperCase()).concat(e?r.slice(1):r.slice(1).toLowerCase())},escapeXml:E1,graphemeSplit:hl});const dl=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},k1=(r,e)=>{const t=e.split(`
`),n=[];let i=-1,s={};r=df(r);for(let a=0;a<t.length;a++){const c=hl(t[a]);if(r[a])for(let u=0;u<c.length;u++){i++;const h=r[a][u];h&&Object.keys(h).length>0&&(dl(s,h,!0)?n.push({start:i,end:i+1,style:h}):n[n.length-1].end++),s=h||{}}else i+=c.length,s={}}return n},O1=(r,e)=>{if(!Array.isArray(r))return df(r);const t=e.split(Rd),n={};let i=-1,s=0;for(let a=0;a<t.length;a++){const c=hl(t[a]);for(let u=0;u<c.length;u++)i++,r[s]&&r[s].start<=i&&i<r[s].end&&(n[a]=n[a]||{},n[a][u]=F({},r[s].style),i===r[s].end-1&&s++)}return n},Oi=["display","transform",Wt,"fill-opacity","fill-rule","opacity",Ar,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function A1(r,e){const t=r.nodeName,n=r.getAttribute("class"),i=r.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let a;if(a=new RegExp("^"+t,"i"),e=e.replace(a,""),i&&e.length&&(a=new RegExp("#"+i+s,"i"),e=e.replace(a,"")),n&&e.length){const c=n.split(" ");for(let u=c.length;u--;)a=new RegExp("\\."+c[u]+s,"i"),e=e.replace(a,"")}return e.length===0}function VM(r,e){let t=!0;const n=A1(r,e.pop());return n&&e.length&&(t=function(i,s){let a,c=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)c&&(a=s.pop()),c=A1(i=i.parentElement,a);return s.length===0}(r,e)),n&&t&&e.length===0}const HM=r=>{var e;return(e=yM[r])!==null&&e!==void 0?e:r},zM=new RegExp("(".concat(os,")"),"gi"),WM=r=>r.replace(zM," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var I1,M1,P1,D1,R1,j1,L1;const wr="(".concat(os,")"),UM=String.raw(I1||(I1=_i(["(skewX)(",")"],["(skewX)\\(","\\)"])),wr),$M=String.raw(M1||(M1=_i(["(skewY)(",")"],["(skewY)\\(","\\)"])),wr),YM=String.raw(P1||(P1=_i(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),wr,wr,wr),XM=String.raw(D1||(D1=_i(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),wr,wr),GM=String.raw(R1||(R1=_i(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),wr,wr),qM=String.raw(j1||(j1=_i(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),wr,wr,wr,wr,wr,wr),ff="(?:".concat(qM,"|").concat(GM,"|").concat(YM,"|").concat(XM,"|").concat(UM,"|").concat($M,")"),KM="(?:".concat(ff,"*)"),ZM=String.raw(L1||(L1=_i(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),KM),JM=new RegExp(ZM),QM=new RegExp(ff),e5=new RegExp(ff,"g");function gf(r){const e=[];if(!(r=WM(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!JM.test(r))return[...yr];for(const t of r.matchAll(e5)){const n=QM.exec(t[0]);if(!n)continue;let i=yr;const s=n.filter(b=>!!b),[,a,...c]=s,[u,h,d,g,p,v]=c.map(b=>parseFloat(b));switch(a){case"translate":i=so(u,h);break;case jd:i=oo({angle:u},{x:h,y:d});break;case Gc:i=Qc(u,h);break;case to:i=Bd(u);break;case ro:i=Vd(u);break;case"matrix":i=[u,h,d,g,p,v]}e.push(i)}return Jc(e)}function t5(r,e,t,n){const i=Array.isArray(e);let s,a=e;if(r!==Wt&&r!==Ar||e!==Or){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")a=e===Or?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")a=t&&t.transformMatrix?It(t.transformMatrix,gf(e)):gf(e);else if(r==="visible")a=e!==Or&&e!=="hidden",t&&t.visible===!1&&(a=!1);else if(r==="opacity")a=parseFloat(e),t&&t.opacity!==void 0&&(a*=t.opacity);else if(r==="textAnchor")a=e==="start"?at:e==="end"?jt:Ve;else if(r==="charSpacing")s=is(e,n)/n*1e3;else if(r==="paintFirst"){const c=e.indexOf(Wt),u=e.indexOf(Ar);a=Wt,(c>-1&&u>-1&&u<c||c===-1&&u>-1)&&(a=Ar)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return e;if(r==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(is):is(e,n)}}else a="";return!i&&isNaN(s)?a:s}function r5(r,e){const t=r.match(vM);if(!t)return;const n=t[1],i=t[3],s=t[4],a=t[5],c=t[6];n&&(e.fontStyle=n),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=is(s)),c&&(e.fontFamily=c),a&&(e.lineHeight=a==="normal"?1:a)}function n5(r,e){r.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,i]=t.split(":");e[n.trim().toLowerCase()]=i.trim()})}function i5(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?n5(t,e):function(n,i){Object.entries(n).forEach(s=>{let[a,c]=s;c!==void 0&&(i[a.toLowerCase()]=c)})}(t,e)),e}const s5={stroke:"strokeOpacity",fill:"fillOpacity"};function Gn(r,e,t){if(!r)return{};let n,i={},s=Pd;r.parentNode&&Zy.test(r.parentNode.nodeName)&&(i=Gn(r.parentElement,e,t),i.fontSize&&(n=s=is(i.fontSize)));const a=F(F(F({},e.reduce((h,d)=>{const g=r.getAttribute(d);return g&&(h[d]=g),h},{})),function(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g={};for(const p in d)VM(h,p.split(" "))&&(g=F(F({},g),d[p]));return g}(r,t)),i5(r));a[Kd]&&r.setAttribute(Kd,a[Kd]),a[qd]&&(n=is(a[qd],s),a[qd]="".concat(n));const c={};for(const h in a){const d=HM(h),g=t5(d,a[h],i,n);c[d]=g}c&&c.font&&r5(c.font,c);const u=F(F({},i),c);return Zy.test(r.nodeName)?u:function(h){const d=dt.getDefaults();return Object.entries(s5).forEach(g=>{let[p,v]=g;if(h[v]===void 0||h[p]==="")return;if(h[p]===void 0){if(!d[p])return;h[p]=d[p]}if(h[p].indexOf("url(")===0)return;const b=new ut(h[p]);h[p]=b.setAlpha(yt(b.getAlpha()*h[v],2)).toRgba()}),h}(u)}const o5=["left","top","width","height","visible"],F1=["rx","ry"];class Ht extends dt{static getDefaults(){return F(F({},super.getDefaults()),Ht.ownDefaults)}constructor(e){super(),Object.assign(this,Ht.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,i=-t/2,s=-n/2,a=this.rx?Math.min(this.rx,t/2):0,c=this.ry?Math.min(this.ry,n/2):0,u=a!==0||c!==0;e.beginPath(),e.moveTo(i+a,s),e.lineTo(i+t-a,s),u&&e.bezierCurveTo(i+t-Ci*a,s,i+t,s+Ci*c,i+t,s+c),e.lineTo(i+t,s+n-c),u&&e.bezierCurveTo(i+t,s+n-Ci*c,i+t-Ci*a,s+n,i+t-a,s+n),e.lineTo(i+a,s+n),u&&e.bezierCurveTo(i+Ci*a,s+n,i,s+n-Ci*c,i,s+n-c),e.lineTo(i,s+c),u&&e.bezierCurveTo(i,s+Ci*c,i+Ci*a,s,i+a,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...F1,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const i=Gn(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,width:c=0,height:u=0,visible:h=!0}=i,d=vt(i,o5);return new this(F(F(F({},t),d),{},{left:s,top:a,width:c,height:u,visible:!!(h&&c&&u)}))}}B(Ht,"type","Rect"),B(Ht,"cacheProperties",[...Yn,...F1]),B(Ht,"ownDefaults",{rx:0,ry:0}),B(Ht,"ATTRIBUTE_NAMES",[...Oi,"x","y","rx","ry","width","height"]),le.setClass(Ht),le.setSVGClass(Ht);const qn="initialization",fl="added",pf="removed",gl="imperative",N1=(r,e)=>{const{strokeUniform:t,strokeWidth:n,width:i,height:s,group:a}=e,c=a&&a!==r?ya(a.calcTransformMatrix(),r.calcTransformMatrix()):null,u=c?e.getRelativeCenterPoint().transform(c):e.getRelativeCenterPoint(),h=!e.isStrokeAccountedForInDimensions(),d=t&&h?Uy(new Y(n,n),void 0,r.calcTransformMatrix()):Fd,g=!t&&h?n:0,p=rl(i+g,s+g,Jc([c,e.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[u.subtract(p),u.add(p)]};class pl{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:i}=e;return t===qn||t===gl||!!n&&i!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==qn&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:i}=t;if(n===gl&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:a,width:c,height:u}=Rn(e.map(g=>N1(i,g)).reduce((g,p)=>g.concat(p),[])),h=new Y(c,u),d=new Y(s,a).add(h.scalarDivide(2));if(n===qn){const g=this.getInitialSize(t,{size:h,center:d});return{center:d,relativeCorrection:new Y(0,0),size:g}}return{center:d.transform(i.calcOwnMatrix()),size:h}}}B(pl,"type","strategy");class mf extends pl{shouldPerformLayout(e){return!0}}B(mf,"type","fit-content"),le.setClass(mf);const a5=["strategy"],c5=["target","strategy","bubbles","prevStrategy"],B1="layoutManager";class Sa{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new mf;B(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=F(F({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[qc,vy,ua,yy,Yc,by,Xc,wy,uM].map(i=>e.on(i,s=>this.performLayout(i===qc?{type:"object_modified",trigger:i,e:s,target:n}:{type:"object_modifying",trigger:i,e:s,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:i}=t;if(n===qn||n===fl?this.subscribeTargets(e):n===pf&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),n===gl&&e.deep){const s=vt(e,a5);t.forEachObject(a=>a.layoutManager&&a.layoutManager.performLayout(F(F({},s),{},{bubbles:!1,target:a})))}}getLayoutResult(e){const{target:t,strategy:n,type:i}=e,s=n.calcLayoutResult(e,t.getObjects());if(!s)return;const a=i===qn?new Y:t.getRelativeCenterPoint(),{center:c,correction:u=new Y,relativeCorrection:h=new Y}=s,d=a.subtract(c).add(u).transform(i===qn?yr:Br(t.calcOwnMatrix()),!0).add(h);return{result:s,prevCenter:a,nextCenter:c,offset:d}}commitLayout(e,t){const{target:n}=e,{result:{size:i},nextCenter:s}=t;var a,c;n.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===qn?n.set({left:(a=e.x)!==null&&a!==void 0?a:s.x+i.x*Vt(n.originX),top:(c=e.y)!==null&&c!==void 0?c:s.y+i.y*Vt(n.originY)}):(n.setPositionByOrigin(s,Ve,Ve),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(i=>{i.group===n&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:i}=t;n.set({left:n.left+i.x,top:n.top+i.y})}onAfterLayout(e,t){const{target:n,strategy:i,bubbles:s,prevStrategy:a}=e,c=vt(e,c5),{canvas:u}=n;n.fire("layout:after",{context:e,result:t}),u&&u.fire("object:layout:after",{context:e,result:t,target:n});const h=n.parent;s&&h!=null&&h.layoutManager&&((c.path||(c.path=[])).push(n),h.layoutManager.performLayout(F(F({},c),{},{target:h}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:B1,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}le.setClass(Sa,B1);const l5=["type","objects","layoutManager"];class u5 extends Sa{performLayout(){}}class Qr extends _y(dt){static getDefaults(){return F(F({},super.getDefaults()),Qr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),B(this,"_activeObjects",[]),B(this,"__objectSelectionTracker",void 0),B(this,"__objectSelectionDisposer",void 0),Object.assign(this,Qr.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new Sa,this.layoutManager.performLayout({type:qn,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Si("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Si("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,i)=>this.canEnterGroup(t)&&i.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange(fl,i),s}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(n),a=super.insertAt(e,...s);return this._onAfterObjectsChange(fl,s),a}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(pf,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(i=>{i._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const i=this._activeObjects;if(e)i.push(n),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(n);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&co(e,It(Br(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(co(e,It(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=dt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const a=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&a.group!==this?(e.save(),e.transform(...Br(this.calcTransformMatrix())),a.render(e),e.restore()):a.group===this&&a.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(F({target:this,type:gl},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=n;const a=i[e||"toObject"](t);return i.includeDefaultValues=s,a})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return F(F(F({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Ht.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:i=[],layoutManager:s}=e,a=vt(e,l5);return Promise.all([ao(i,t),ga(a,t)]).then(c=>{let[u,h]=c;const d=new this(u,F(F(F({},a),h),{},{layoutManager:new u5}));if(s){const g=le.getClass(s.type),p=le.getClass(s.strategy);d.layoutManager=new g(new p)}else d.layoutManager=new Sa;return d.layoutManager.subscribeTargets({type:qn,target:d,targets:d.getObjects()}),d.setCoords(),d})}}B(Qr,"type","Group"),B(Qr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),le.setClass(Qr);const V1=(r,e)=>Math.min(e.width/r.width,e.height/r.height),H1=(r,e)=>Math.max(e.width/r.width,e.height/r.height),vf="\\s*,?\\s*",xa="".concat(vf,"(").concat(os,")"),h5="".concat(xa).concat(xa).concat(xa).concat(vf,"([01])").concat(vf,"([01])").concat(xa).concat(xa),d5={m:"l",M:"L"},f5=(r,e,t,n,i,s,a,c,u,h,d)=>{const g=pn(r),p=mn(r),v=pn(e),b=mn(e),S=t*i*v-n*s*b+a,C=n*i*v+t*s*b+c;return["C",h+u*(-t*i*p-n*s*g),d+u*(-n*i*p+t*s*g),S+u*(t*i*b+n*s*v),C+u*(n*i*b-t*s*v),S,C]},z1=(r,e,t,n)=>{const i=Math.atan2(e,r),s=Math.atan2(n,t);return s>=i?s-i:2*Math.PI-(i-s)};function yf(r,e,t,n,i,s,a,c){let u;if(et.cachesBoundsOfCurve&&(u=[...arguments].join(),la.boundsOfCurveCache[u]))return la.boundsOfCurveCache[u];const h=Math.sqrt,d=Math.abs,g=[],p=[[0,0],[0,0]];let v=6*r-12*t+6*i,b=-3*r+9*t-9*i+3*a,S=3*t-3*r;for(let M=0;M<2;++M){if(M>0&&(v=6*e-12*n+6*s,b=-3*e+9*n-9*s+3*c,S=3*n-3*e),d(b)<1e-12){if(d(v)<1e-12)continue;const G=-S/v;0<G&&G<1&&g.push(G);continue}const R=v*v-4*S*b;if(R<0)continue;const N=h(R),$=(-v+N)/(2*b);0<$&&$<1&&g.push($);const V=(-v-N)/(2*b);0<V&&V<1&&g.push(V)}let C=g.length;const T=C,k=U1(r,e,t,n,i,s,a,c);for(;C--;){const{x:M,y:R}=k(g[C]);p[0][C]=M,p[1][C]=R}p[0][T]=r,p[1][T]=e,p[0][T+1]=a,p[1][T+1]=c;const A=[new Y(Math.min(...p[0]),Math.min(...p[1])),new Y(Math.max(...p[0]),Math.max(...p[1]))];return et.cachesBoundsOfCurve&&(la.boundsOfCurveCache[u]=A),A}const g5=(r,e,t)=>{let[n,i,s,a,c,u,h,d]=t;const g=((p,v,b,S,C,T,k)=>{if(b===0||S===0)return[];let A=0,M=0,R=0;const N=Math.PI,$=k*Md,V=mn($),G=pn($),X=.5*(-G*p-V*v),J=.5*(-G*v+V*p),q=b**2,Z=S**2,ae=J**2,ye=X**2,ee=q*Z-q*ae-Z*ye;let me=Math.abs(b),fe=Math.abs(S);if(ee<0){const Ct=Math.sqrt(1-ee/(q*Z));me*=Ct,fe*=Ct}else R=(C===T?-1:1)*Math.sqrt(ee/(q*ae+Z*ye));const ie=R*me*J/fe,P=-R*fe*X/me,W=G*ie-V*P+.5*p,ue=V*ie+G*P+.5*v;let ge=z1(1,0,(X-ie)/me,(J-P)/fe),we=z1((X-ie)/me,(J-P)/fe,(-X-ie)/me,(-J-P)/fe);T===0&&we>0?we-=2*N:T===1&&we<0&&(we+=2*N);const be=Math.ceil(Math.abs(we/N*2)),he=[],qe=we/be,Ue=8/3*Math.sin(qe/4)*Math.sin(qe/4)/Math.sin(qe/2);let xt=ge+qe;for(let Ct=0;Ct<be;Ct++)he[Ct]=f5(ge,xt,G,V,me,fe,W,ue,Ue,A,M),A=he[Ct][5],M=he[Ct][6],ge=xt,xt+=qe;return he})(h-r,d-e,i,s,c,u,a);for(let p=0,v=g.length;p<v;p++)g[p][1]+=r,g[p][2]+=e,g[p][3]+=r,g[p][4]+=e,g[p][5]+=r,g[p][6]+=e;return g},W1=r=>{let e=0,t=0,n=0,i=0;const s=[];let a,c=0,u=0;for(const h of r){const d=[...h];let g;switch(d[0]){case"l":d[1]+=e,d[2]+=t;case"L":e=d[1],t=d[2],g=["L",e,t];break;case"h":d[1]+=e;case"H":e=d[1],g=["L",e,t];break;case"v":d[1]+=t;case"V":t=d[1],g=["L",e,t];break;case"m":d[1]+=e,d[2]+=t;case"M":e=d[1],t=d[2],n=d[1],i=d[2],g=["M",e,t];break;case"c":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t,d[5]+=e,d[6]+=t;case"C":c=d[3],u=d[4],e=d[5],t=d[6],g=["C",d[1],d[2],c,u,e,t];break;case"s":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"S":a==="C"?(c=2*e-c,u=2*t-u):(c=e,u=t),e=d[3],t=d[4],g=["C",c,u,d[1],d[2],e,t],c=g[3],u=g[4];break;case"q":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"Q":c=d[1],u=d[2],e=d[3],t=d[4],g=["Q",c,u,e,t];break;case"t":d[1]+=e,d[2]+=t;case"T":a==="Q"?(c=2*e-c,u=2*t-u):(c=e,u=t),e=d[1],t=d[2],g=["Q",c,u,e,t];break;case"a":d[6]+=e,d[7]+=t;case"A":g5(e,t,d).forEach(p=>s.push(p)),e=d[6],t=d[7];break;case"z":case"Z":e=n,t=i,g=["Z"]}g?(s.push(g),a=g[0]):a=""}return s},ml=(r,e,t,n)=>Math.sqrt((t-r)**2+(n-e)**2),U1=(r,e,t,n,i,s,a,c)=>u=>{const h=u**3,d=(v=>3*v**2*(1-v))(u),g=(v=>3*v*(1-v)**2)(u),p=(v=>(1-v)**3)(u);return new Y(a*h+i*d+t*g+r*p,c*h+s*d+n*g+e*p)},$1=r=>r**2,Y1=r=>2*r*(1-r),X1=r=>(1-r)**2,p5=(r,e,t,n,i,s,a,c)=>u=>{const h=$1(u),d=Y1(u),g=X1(u),p=3*(g*(t-r)+d*(i-t)+h*(a-i)),v=3*(g*(n-e)+d*(s-n)+h*(c-s));return Math.atan2(v,p)},m5=(r,e,t,n,i,s)=>a=>{const c=$1(a),u=Y1(a),h=X1(a);return new Y(i*c+t*u+r*h,s*c+n*u+e*h)},v5=(r,e,t,n,i,s)=>a=>{const c=1-a,u=2*(c*(t-r)+a*(i-t)),h=2*(c*(n-e)+a*(s-n));return Math.atan2(h,u)},G1=(r,e,t)=>{let n=new Y(e,t),i=0;for(let s=1;s<=100;s+=1){const a=r(s/100);i+=ml(n.x,n.y,a.x,a.y),n=a}return i},y5=(r,e)=>{let t,n=0,i=0,s={x:r.x,y:r.y},a=F({},s),c=.01,u=0;const h=r.iterator,d=r.angleFinder;for(;i<e&&c>1e-4;)a=h(n),u=n,t=ml(s.x,s.y,a.x,a.y),t+i>e?(n-=c,c/=2):(s=a,n+=c,i+=t);return F(F({},a),{},{angle:d(u)})},bf=r=>{let e,t,n=0,i=0,s=0,a=0,c=0;const u=[];for(const h of r){const d={x:i,y:s,command:h[0],length:0};switch(h[0]){case"M":t=d,t.x=a=i=h[1],t.y=c=s=h[2];break;case"L":t=d,t.length=ml(i,s,h[1],h[2]),i=h[1],s=h[2];break;case"C":e=U1(i,s,h[1],h[2],h[3],h[4],h[5],h[6]),t=d,t.iterator=e,t.angleFinder=p5(i,s,h[1],h[2],h[3],h[4],h[5],h[6]),t.length=G1(e,i,s),i=h[5],s=h[6];break;case"Q":e=m5(i,s,h[1],h[2],h[3],h[4]),t=d,t.iterator=e,t.angleFinder=v5(i,s,h[1],h[2],h[3],h[4]),t.length=G1(e,i,s),i=h[3],s=h[4];break;case"Z":t=d,t.destX=a,t.destY=c,t.length=ml(i,s,a,c),i=a,s=c}n+=t.length,u.push(t)}return u.push({length:n,x:i,y:s}),u},q1=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bf(r),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const i=t[n],s=e/i.length,a=r[n];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return F(F({},new Y(i.x,i.y).lerp(new Y(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return F(F({},new Y(i.x,i.y).lerp(new Y(a[1],a[2]),s)),{},{angle:Math.atan2(a[2]-i.y,a[1]-i.x)});case"C":case"Q":return y5(i,e)}},b5=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),K1=new RegExp(h5,"g"),w5=new RegExp(os,"gi"),_5={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Z1=r=>{var e;const t=[],n=(e=r.match(b5))!==null&&e!==void 0?e:[];for(const i of n){const s=i[0];if(s==="z"||s==="Z"){t.push([s]);continue}const a=_5[s.toLowerCase()];let c=[];if(s==="a"||s==="A"){K1.lastIndex=0;for(let u=null;u=K1.exec(i);)c.push(...u.slice(1))}else c=i.match(w5)||[];for(let u=0;u<c.length;u+=a){const h=new Array(a),d=d5[s];h[0]=u>0&&d?d:s;for(let g=0;g<a;g++)h[g+1]=parseFloat(c[u+g]);t.push(h)}}return t},S5=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new Y(r[0]),n=new Y(r[1]),i=1,s=0;const a=[],c=r.length,u=c>2;let h;for(u&&(i=r[2].x<n.x?-1:r[2].x===n.x?0:1,s=r[2].y<n.y?-1:r[2].y===n.y?0:1),a.push(["M",t.x-i*e,t.y-s*e]),h=1;h<c;h++){if(!t.eq(n)){const d=t.midPointFrom(n);a.push(["Q",t.x,t.y,d.x,d.y])}t=r[h],h+1<r.length&&(n=r[h+1])}return u&&(i=t.x>r[h-2].x?1:t.x===r[h-2].x?0:-1,s=t.y>r[h-2].y?1:t.y===r[h-2].y?0:-1),a.push(["L",t.x+i*e,t.y+s*e]),a},J1=(r,e)=>r.map(t=>t.map((n,i)=>i===0||e===void 0?n:yt(n,e)).join(" ")).join(" ");function vl(r,e){const t=r.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[i,s]=n;return t.setProperty(i,s)}))}const x5=(r,e)=>Math.floor(Math.random()*(e-r+1))+r;function C5(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=e.onComplete||ts,n=new($c()).XMLHttpRequest,i=e.signal,s=function(){n.abort()},a=function(){i&&i.removeEventListener("abort",s),n.onerror=n.ontimeout=ts};if(i&&i.aborted)throw new gy("request");return i&&i.addEventListener("abort",s,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(a(),t(n),n.onreadystatechange=ts)},n.onerror=n.ontimeout=a,n.open("get",r,!0),n.send(),n}var Q1=Object.freeze({__proto__:null,addTransformToObject:zy,animate:sf,animateColor:o1,applyTransformToObject:co,calcAngleBetweenVectors:cl,calcDimensionsMatrix:da,calcPlaneChangeMatrix:ya,calcVectorRotation:Qy,cancelAnimFrame:xy,capValue:as,composeMatrix:Oy,copyCanvasElement:r=>{var e;const t=vn(r);return(e=t.getContext("2d"))===null||e===void 0||e.drawImage(r,0,0),t},cos:pn,createCanvasElement:Zr,createImage:Cy,createRotateMatrix:oo,createScaleMatrix:Qc,createSkewXMatrix:Bd,createSkewYMatrix:Vd,createTranslateMatrix:so,createVector:ol,crossProduct:lo,degreesToRadians:At,dotProduct:e1,ease:SM,enlivenObjectEnlivables:ga,enlivenObjects:ao,findScaleToCover:H1,findScaleToFit:V1,getBoundsOfCurve:yf,getOrthonormalVector:Jd,getPathSegmentsInfo:bf,getPointOnPath:q1,getPointer:Hy,getRandomInt:x5,getRegularPolygonPath:(r,e)=>{const t=2*Math.PI/r;let n=-xi;r%2==0&&(n+=t/2);const i=new Array(r+1);for(let s=0;s<r;s++){const a=s*t+n,{x:c,y:u}=new Y(pn(a),mn(a)).scalarMultiply(e);i[s]=[s===0?"M":"L",c,u]}return i[r]=["Z"],i},getSmoothPathFromPoints:S5,getSvgAttributes:r=>{const e=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:ll,groupSVGElements:(r,e)=>r&&r.length===1?r[0]:new Qr(r,e),hasStyleChanged:dl,invertTransform:Br,isBetweenVectors:Qd,isIdentityMatrix:Ty,isTouchEvent:tl,isTransparent:S1,joinPath:J1,loadImage:fa,magnitude:al,makeBoundingBoxFromPoints:Rn,makePathSimpler:W1,matrixToSVG:pa,mergeClipPaths:(r,e)=>{var t;let n=r,i=e;n.inverted&&!i.inverted&&(n=e,i=r),Yd(i,(t=i.group)===null||t===void 0?void 0:t.calcTransformMatrix(),n.calcTransformMatrix());const s=n.inverted&&i.inverted;return s&&(n.inverted=i.inverted=!1),new Qr([n],{clipPath:i,inverted:s})},multiplyTransformMatrices:It,multiplyTransformMatrixArray:Jc,parsePath:Z1,parsePreserveAspectRatioAttribute:Dy,parseUnit:is,pick:ns,projectStrokeOnPoints:T1,qrDecompose:io,radiansToDegrees:Ei,removeFromArray:rs,removeTransformFromObject:(r,e)=>{const t=Br(e),n=It(t,r.calcOwnMatrix());co(r,n)},removeTransformMatrixForSvgParsing:(r,e)=>{let t=r._findCenterFromElement();r.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:i,scaleY:s,angle:a,skewX:c}=io(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(br,i),n.set(Nr,s),n.angle=a,n.skewX=c,n.skewY=0}})(r),t=t.transform(r.transformMatrix)),delete r.transformMatrix,e&&(r.scaleX*=e.scaleX,r.scaleY*=e.scaleY,r.cropX=e.cropX,r.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,r.width=e.width,r.height=e.height),r.setPositionByOrigin(t,Ve,Ve)},request:C5,requestAnimFrame:ha,resetObjectTransform:Wy,rotatePoint:(r,e,t)=>r.rotate(t,e),rotateVector:Zd,saveObjectTransform:$d,sendObjectToPlane:Yd,sendPointToPlane:Un,sendVectorToPlane:Uy,setStyle:vl,sin:mn,sizeAfterTransform:rl,string:BM,stylesFromArray:O1,stylesToArray:k1,toDataURL:Nd,toFixed:yt,transformPath:(r,e,t)=>(t&&(e=It(e,[1,0,0,1,-t.x,-t.y])),r.map(n=>{const i=[...n];for(let s=1;s<n.length-1;s+=2){const{x:a,y:c}=ur({x:n[s],y:n[s+1]},e);i[s]=a,i[s+1]=c}return i})),transformPoint:ur});class T5 extends Vy{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),B(this,"upper",void 0),B(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const a=this.createContainerElement();a.classList.add(n),i.parentNode&&i.parentNode.replaceChild(a,i),a.append(i,s),this.container=a}createUpperCanvas(){const{el:e}=this.lower,t=Zr();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=eo().createElement("div");return e.setAttribute("data-fabric","wrapper"),vl(e,{position:"relative"}),By(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:i}=t;vl(e,F(F({},n),{},{"touch-action":i?"manipulation":Or})),By(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:i}=this.upper;Ny(n,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Wd(this.upper.el,e),Wd(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),Dn().dispose(this.upper.el),delete this.upper,delete this.container}}class yl extends va{constructor(){super(...arguments),B(this,"targets",[]),B(this,"_hoveredTargets",[]),B(this,"_objectsToRender",void 0),B(this,"_currentTransform",null),B(this,"_groupSelector",null),B(this,"contextTopDirty",!1)}static getDefaults(){return F(F({},super.getDefaults()),yl.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new T5(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-n+i),s.transform(...this.viewportTransform);const a=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=a,s.restore();const c=Math.round(i*this.getRetinaScaling());return S1(s,c,c,c)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&n.length>1&&n.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let i;return t===Gc||t===br||t===Nr||t===ua?i=this.centeredScaling||e.centeredScaling:t===jd&&(i=this.centeredRotation||e.centeredRotation),i?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=jt:["mr","tr","br"].includes(t)&&(n.x=at),["tl","mt","tr"].includes(t)?n.y=Dd:["bl","mb","br"].includes(t)&&(n.y=kr)),n}_setupCurrentTransform(e,t,n){var i;const s=t.group?Un(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:a="",control:c}=t.getActiveControl()||{},u=n&&c?(i=c.getActionHandler(e,t,c))===null||i===void 0?void 0:i.bind(c):Gy,h=((v,b,S,C)=>{if(!b||!v)return"drag";const T=C.controls[b];return T.getActionName(S,T,C)})(n,a,e,t),d=e[this.centeredKey],g=this._shouldCenterTransform(t,h,d)?{x:Ve,y:Ve}:this._getOriginFromCorner(t,a),p={target:t,action:h,actionHandler:u,actionPerformed:!1,corner:a,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:g.x,originY:g.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:At(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:d,original:F(F({},$d(t)),{},{originX:g.x,originY:g.y})};this._currentTransform=p,this.fire("before:transform",{e,transform:p})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:i,deltaY:s}=this._groupSelector,a=new Y(t,n).transform(this.viewportTransform),c=new Y(t+i,n+s).transform(this.viewportTransform),u=this.selectionLineWidth/2;let h=Math.min(a.x,c.x),d=Math.min(a.y,c.y),g=Math.max(a.x,c.x),p=Math.max(a.y,c.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(h,d,g-h,p-d)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,h+=u,d+=u,g-=u,p-=u,dt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(h,d,g-h,p-d))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n.findControl(t,tl(e))||i.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const a=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&a&&a!==n?(this.targets=s,n):a}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[a,c,u,h]=n,d=Math.atan2(c.y-a.y,c.x-a.x),g=pn(d)*s,p=mn(d)*s,v=g+p,b=g-p;n=[new Y(a.x-b,a.y-v),new Y(c.x+v,c.y-b),new Y(u.x+b,u.y+v),new Y(h.x-v,h.y+b)]}return _t.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Un(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const i=e[n];if(this._checkTarget(i,t)){if(Zc(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,t);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Zc(n)&&n.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const a=i[s];if(!Zc(a)||!a.interactive)return a}return i[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,i=n.getBoundingClientRect();let s=Hy(e),a=i.width||0,c=i.height||0;a&&c||(kr in i&&Dd in i&&(c=Math.abs(i.top-i.bottom)),jt in i&&at in i&&(a=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Un(s,void 0,this.viewportTransform));const u=this.getRetinaScaling();u!==1&&(s.x/=u,s.y/=u);const h=a===0||c===0?new Y(1,1):new Y(n.width/a,n.height/c);return s.multiply(h)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Zr(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return ss(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,i=!1;const s=this.getActiveObjects(),a=[],c=[];e.forEach(u=>{s.includes(u)||(n=!0,u.fire("deselected",{e:t,target:u}),c.push(u))}),s.forEach(u=>{e.includes(u)||(n=!0,u.fire("selected",{e:t,target:u}),a.push(u))}),e.length>0&&s.length>0?(i=!0,n&&this.fire("selection:updated",{e:t,selected:a,deselected:c})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:a})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:c})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),i}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,ss(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),ss(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,i={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),n.fire(qc,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;ss(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,n);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&ss(t)&&this._activeObject===t){const n=ns(e,["angle","flipX","flipY",at,br,Nr,to,ro,kr]);return zy(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(i)}}B(yl,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class E5{constructor(e){B(this,"targets",[]),B(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),rs(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const k5=["target","oldTarget","fireCanvas","e"],Vr={passive:!1},fo=(r,e)=>{const t=r.getViewportPoint(e),n=r.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},Ai=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.addEventListener(...t)},en=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.removeEventListener(...t)},O5={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class wf extends yl{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),B(this,"_isClick",void 0),B(this,"textEditingManager",new E5(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Ai,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,i=this._getEventPrefix();e(Fy(n),"resize",this._onResize),e(n,i+"down",this._onMouseDown),e(n,"".concat(i,"move"),this._onMouseMove,Vr),e(n,"".concat(i,"out"),this._onMouseOut),e(n,"".concat(i,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Vr)}removeListeners(){this.addOrRemove(en,"remove");const e=this._getEventPrefix(),t=yn(this.upperCanvasEl);en(t,"".concat(e,"up"),this._onMouseUp),en(t,"touchend",this._onTouchEnd,Vr),en(t,"".concat(e,"move"),this._onMouseMove,Vr),en(t,"touchmove",this._onMouseMove,Vr),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=F({e},fo(this,e));this.fire("mouse:out",F(F({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",F({},n)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",F(F({},n),{},{target:i})),i&&i.fire("mouseout",F({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",F({e},fo(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void Ai(this.upperCanvasEl,"drag",this._onDragProgress)}Ud(e)}_renderDragEffects(e,t,n){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==n&&(s.clearContextTop(),i=!0),t?.clearContextTop(),n!==t&&n?.clearContextTop();const a=this.contextTop;a.save(),a.transform(...this.viewportTransform),t&&(a.save(),t.transform(a),t.renderDragSourceEffect(e),a.restore(),i=!0),n&&(a.save(),n.transform(a),n.renderDropTargetEffect(e),a.restore(),i=!0),a.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Or,n=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};en(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:i}=this.findDragTargets(e),s=this._dragSource,a={e,target:n,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let c;this.fire(t,a),this._fireEnterLeaveEvents(n,a),n&&(n.canDrop(e)&&(c=n),n.fire(t,a));for(let u=0;u<i.length;u++){const h=i[u];h.canDrop(e)&&(c=h),h.fire(t,a)}this._renderDragEffects(e,s,c),this._dropTarget=c}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),i={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",F({e,target:t,subTargets:n,dragSource:this._dragSource},fo(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&Ud(e),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),a=yn(i);Ai(a,"touchend",this._onTouchEnd,Vr),t&&Ai(a,"touchmove",this._onMouseMove,Vr),en(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();en(t,"".concat(n,"move"),this._onMouseMove,Vr);const i=yn(t);Ai(i,"".concat(n,"up"),this._onMouseUp),Ai(i,"".concat(n,"move"),this._onMouseMove,Vr)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=yn(this.upperCanvasEl);en(n,"touchend",this._onTouchEnd,Vr),en(n,"touchmove",this._onMouseMove,Vr),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Ai(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const i=yn(this.upperCanvasEl);en(i,"".concat(n,"up"),this._onMouseUp),en(i,"".concat(n,"move"),this._onMouseMove,Vr),Ai(t,"".concat(n,"move"),this._onMouseMove,Vr)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,i=this._isClick,s=this._target,{button:a}=e;if(a)return(this.fireMiddleClick&&a===1||this.fireRightClick&&a===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let c,u,h=!1;if(n&&(this._finalizeCurrentTransform(e),h=n.actionPerformed),!i){const d=s===this._activeObject;this.handleSelection(e),h||(h=this._shouldRender(s)||!d&&s===this._activeObject)}if(s){const d=s.findControl(this.getViewportPoint(e),tl(e)),{key:g,control:p}=d||{};if(u=g,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),h=!0;else if(p){const v=p.getMouseUpHandler(e,s,p);v&&(c=this.getScenePoint(e),v.call(p,e,n,c.x,c.y))}s.isMoving=!1}if(n&&(n.target!==s||n.corner!==u)){const d=n.target&&n.target.controls[n.corner],g=d&&d.getMouseUpHandler(e,n.target,d);c=c||this.getScenePoint(e),g&&g.call(d,e,n,c.x,c.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),h?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:i=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let s=0;s<i.length;s++)i[s]!==n&&i[s].fire(e,t);return t}_handleEvent(e,t){const n=this._target,i=this.targets||[],s=F(F({e,target:n,subTargets:i},fo(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),n&&n.fire("mouse".concat(t),s);for(let a=0;a<i.length;a++)i[a]!==n&&i[a].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(t){const a=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const c=t.findControl(this.getViewportPoint(e),tl(e));if(t===this._activeObject&&(c||!s)){this._setupCurrentTransform(e,t,a);const u=c?c.control:void 0,h=this.getScenePoint(e),d=u&&u.getMouseDownHandler(e,t,u);d&&d.call(u,e,this._currentTransform,h.x,h.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Un(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,a=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let c=0;c<a;c++)this.fireSyntheticInOutEvents("mouse",{e,target:s[c],oldTarget:i[c]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,a=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",F(F({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let c=0;c<a;c++)this.fireSyntheticInOutEvents("drag",F(F({},t),{},{target:s[c],oldTarget:i[c]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:i,fireCanvas:s,e:a}=t,c=vt(t,k5);const{targetIn:u,targetOut:h,canvasIn:d,canvasOut:g}=O5[e],p=i!==n;if(i&&p){const v=F(F({},c),{},{e:a,target:i,nextTarget:n},fo(this,a));s&&this.fire(g,v),i.fire(h,v)}if(n&&p){const v=F(F({},c),{},{e:a,target:n,previousTarget:i},fo(this,a));s&&this.fire(d,v),n.fire(u,v)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,i=n.target,s=i.group?Un(t,void 0,i.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,s),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:i,actionHandler:s,target:a}=t,c=!!s&&s(e,t,n.x,n.y);c&&a.setCoords(),i==="drag"&&c&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||c}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const i=ss(this._activeObject)?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(s){const a=s.control;this.setCursor(a.cursorStyleHandler(e,a,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(a=>{n=a.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,i=ss(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||i)&&(i||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(i){const s=n.getObjects();if(t===n){const a=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,a)||this.searchPossibleTargets(this._objects,a))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{n.isEditing&&n.exitEditing();const s=new(le.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(n,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:i,deltaY:s}=this._groupSelector,a=new Y(t,n),c=a.add(new Y(i,s)),u=a.min(c),h=a.max(c).subtract(u),d=this.collectObjects({left:u.x,top:u.y,width:h.x,height:h.y},{includeIntersecting:!this.selectionFullyContained}),g=a.eq(c)?d[0]?[d[0]]:[]:d.length>1?d.filter(p=>!p.onSelect({e})).reverse():d;if(g.length===1)this.setActiveObject(g[0],e);else if(g.length>1){const p=le.getClass("ActiveSelection");this.setActiveObject(new p(g,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const eb={x1:0,y1:0,x2:0,y2:0},A5=F(F({},eb),{},{r1:0,r2:0}),go=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,I5=/^(\d+\.\d+)%|(\d+)%$/;function tb(r){return r&&I5.test(r)}function rb(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(tb(r)?100:1):NaN;return as(0,go(t,e),1)}const M5=/\s*;\s*/,P5=/\s*:\s*/;function D5(r,e){let t,n;const i=r.getAttribute("style");if(i){const a=i.split(M5);a[a.length-1]===""&&a.pop();for(let c=a.length;c--;){const[u,h]=a[c].split(P5).map(d=>d.trim());u==="stop-color"?t=h:u==="stop-opacity"&&(n=h)}}const s=new ut(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:rb(r.getAttribute("offset"),0),color:s.toRgb(),opacity:go(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function R5(r,e){const t=[],n=r.getElementsByTagName("stop"),i=rb(e,1);for(let s=n.length;s--;)t.push(D5(n[s],i));return t}function nb(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function ib(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function wn(r,e){return r.getAttribute(e)}function j5(r,e){return function(t,n){let i,{width:s,height:a,gradientUnits:c}=n;return Object.keys(t).reduce((u,h)=>{const d=t[h];return d==="Infinity"?i=1:d==="-Infinity"?i=0:(i=typeof d=="string"?parseFloat(d):d,typeof d=="string"&&tb(d)&&(i*=.01,c==="pixels"&&(h!=="x1"&&h!=="x2"&&h!=="r2"||(i*=s),h!=="y1"&&h!=="y2"||(i*=a)))),u[h]=i,u},{})}(nb(r)==="linear"?function(t){return{x1:wn(t,"x1")||0,y1:wn(t,"y1")||0,x2:wn(t,"x2")||"100%",y2:wn(t,"y2")||0}}(r):function(t){return{x1:wn(t,"fx")||wn(t,"cx")||"50%",y1:wn(t,"fy")||wn(t,"cy")||"50%",r1:0,x2:wn(t,"cx")||"50%",y2:wn(t,"cy")||"50%",r2:wn(t,"r")||"50%"}}(r),F(F({},e),{},{gradientUnits:ib(r)}))}class bl{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:i={},colorStops:s=[],offsetX:a=0,offsetY:c=0,gradientTransform:u,id:h}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:F(F({},t==="radial"?A5:eb),i),colorStops:s,offsetX:a,offsetY:c,gradientTransform:u,id:h?"".concat(h,"_").concat(Ti()):Ti()})}addColorStop(e){for(const t in e){const n=new ut(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return F(F({},ns(this,e)),{},{type:this.type,coords:F({},this.coords),colorStops:this.colorStops.map(t=>F({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():yr.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",a=this.colorStops.map(g=>F({},g)).sort((g,p)=>g.offset-p.offset);let c=-this.offsetX,u=-this.offsetY;var h;s==="objectBoundingBox"?(c/=e.width,u/=e.height):(c+=e.width/2,u+=e.height/2),(h=e)&&typeof h._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(c-=e.pathOffset.x,u-=e.pathOffset.y),i[4]-=c,i[5]-=u;const d=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(pa(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:g,y1:p,x2:v,y2:b}=this.coords;n.push("<linearGradient ",d,' x1="',g,'" y1="',p,'" x2="',v,'" y2="',b,`">
`)}else if(this.type==="radial"){const{x1:g,y1:p,x2:v,y2:b,r1:S,r2:C}=this.coords,T=S>C;n.push("<radialGradient ",d,' cx="',T?g:v,'" cy="',T?p:b,'" r="',T?S:C,'" fx="',T?v:g,'" fy="',T?b:p,`">
`),T&&(a.reverse(),a.forEach(A=>{A.offset=1-A.offset}));const k=Math.min(S,C);if(k>0){const A=k/Math.max(S,C);a.forEach(M=>{M.offset+=A*(1-M.offset)})}}return a.forEach(g=>{let{color:p,offset:v,opacity:b}=g;n.push("<stop ",'offset="',100*v+"%",'" style="stop-color:',p,b!==void 0?";stop-opacity: "+b:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:i,y2:s,r1:a,r2:c}=this.coords,u=this.type==="linear"?e.createLinearGradient(t,n,i,s):e.createRadialGradient(t,n,a,i,s,c);return this.colorStops.forEach(h=>{let{color:d,opacity:g,offset:p}=h;u.addColorStop(p,g!==void 0?new ut(d).setAlpha(g).toRgba():d)}),u}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(F(F({},e),{},{colorStops:t?t.map(i=>F({},i)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const i=ib(e),s=t._findCenterFromElement();return new this(F({id:e.getAttribute("id")||void 0,type:nb(e),coords:j5(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:R5(e,n.opacity),gradientUnits:i,gradientTransform:gf(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}B(bl,"type","Gradient"),le.setClass(bl,"gradient"),le.setClass(bl,"linear"),le.setClass(bl,"radial");const L5=["type","source","patternTransform"];class _f{get type(){return"pattern"}set type(e){Si("warn","Setting type has no effect",e)}constructor(e){B(this,"repeat","repeat"),B(this,"offsetX",0),B(this,"offsetY",0),B(this,"crossOrigin",""),this.id=Ti(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return F(F({},ns(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:yt(this.offsetX,et.NUM_FRACTION_DIGITS),offsetY:yt(this.offsetY,et.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:i,repeat:s,id:a}=this,c=go(this.offsetX/t,0),u=go(this.offsetY/n,0),h=s==="repeat-y"||s==="no-repeat"?1+Math.abs(c||0):go(i.width/t,0),d=s==="repeat-x"||s==="no-repeat"?1+Math.abs(u||0):go(i.height/n,0);return['<pattern id="SVGID_'.concat(a,'" x="').concat(c,'" y="').concat(u,'" width="').concat(h,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:i,patternTransform:s}=e,a=vt(e,L5);const c=await fa(i,F(F({},t),{},{crossOrigin:a.crossOrigin}));return new this(F(F({},a),{},{patternTransform:s&&s.slice(0),source:c}))}}B(_f,"type","Pattern"),le.setClass(_f),le.setClass(_f,"pattern");const F5=["path","left","top"],N5=["d"];class us extends dt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:i,top:s}=t,a=vt(t,F5);super(),Object.assign(this,us.ownDefaults),this.setOptions(a),this._setPath(e||[],!0),typeof i=="number"&&this.set(at,i),typeof s=="number"&&this.set(kr,s)}_setPath(e,t){this.path=W1(Array.isArray(e)?e:Z1(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new Y(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+n);break;case"M":e.moveTo(i[1]+t,i[2]+n);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n,i[5]+t,i[6]+n);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F(F({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=J1(this.path,et.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=et.NUM_FRACTION_DIGITS;return" translate(".concat(yt(-this.pathOffset.x,e),", ").concat(yt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:i}=this._calcDimensions();this.set({width:t,height:n,pathOffset:i}),e&&this.setPositionByOrigin(i,Ve,Ve)}_calcBoundsFromPath(){const e=[];let t=0,n=0,i=0,s=0;for(const a of this.path)switch(a[0]){case"L":i=a[1],s=a[2],e.push({x:t,y:n},{x:i,y:s});break;case"M":i=a[1],s=a[2],t=i,n=s;break;case"C":e.push(...yf(i,s,a[1],a[2],a[3],a[4],a[5],a[6])),i=a[5],s=a[6];break;case"Q":e.push(...yf(i,s,a[1],a[2],a[1],a[2],a[3],a[4])),i=a[3],s=a[4];break;case"Z":i=t,s=n}return Rn(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return F(F({},e),{},{pathOffset:new Y(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const i=Gn(e,this.ATTRIBUTE_NAMES,n),{d:s}=i;return new this(s,F(F(F({},vt(i,N5)),t),{},{left:void 0,top:void 0}))}}B(us,"type","Path"),B(us,"cacheProperties",[...Yn,"path","fillRule"]),B(us,"ATTRIBUTE_NAMES",[...Oi,"d"]),le.setClass(us),le.setSVGClass(us);const B5=["left","top","radius"],sb=["radius","startAngle","endAngle","counterClockwise"];class Kn extends dt{static getDefaults(){return F(F({},super.getDefaults()),Kn.ownDefaults)}constructor(e){super(),Object.assign(this,Kn.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,At(this.startAngle),At(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(br)}getRadiusY(){return this.get("radius")*this.get(Nr)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...sb,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=At(this.startAngle),i=At(this.endAngle),s=pn(n)*t,a=mn(n)*t,c=pn(i)*t,u=mn(i)*t,h=e>180?1:0,d=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(a," A ").concat(t," ").concat(t," 0 ").concat(h," ").concat(d," ").concat(c," ").concat(u,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const i=Gn(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,radius:c=0}=i;return new this(F(F({},vt(i,B5)),{},{radius:c,left:s-c,top:a-c}))}static fromObject(e){return super._fromObject(e)}}B(Kn,"type","Circle"),B(Kn,"cacheProperties",[...Yn,...sb]),B(Kn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),B(Kn,"ATTRIBUTE_NAMES",["cx","cy","r",...Oi]),le.setClass(Kn),le.setSVGClass(Kn);const V5=["x1","y1","x2","y2"],H5=["x1","y1","x2","y2"],Sf=["x1","x2","y1","y2"];class hs extends dt{constructor(){let[e,t,n,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,hs.ownDefaults),this.setOptions(s),this.x1=e,this.x2=n,this.y1=t,this.y2=i,this._setWidthHeight();const{left:a,top:c}=s;typeof a=="number"&&this.set(at,a),typeof c=="number"&&this.set(kr,c)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:i}=this;this.width=Math.abs(n-e),this.height=Math.abs(i-t);const{left:s,top:a,width:c,height:u}=Rn([{x:e,y:t},{x:n,y:i}]),h=new Y(s+c/2,a+u/2);this.setPositionByOrigin(h,Ve,Ve)}_set(e,t){return super._set(e,t),Sf.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var i;Jr(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new Y((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F(F({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:i,width:s,height:a}=this,c=e<=t?-1:1,u=n<=i?-1:1;return{x1:c*s/2,x2:c*-s/2,y1:u*a/2,y2:u*-a/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,n){const i=Gn(e,this.ATTRIBUTE_NAMES,n),{x1:s=0,y1:a=0,x2:c=0,y2:u=0}=i;return new this([s,a,c,u],vt(i,V5))}static fromObject(e){let{x1:t,y1:n,x2:i,y2:s}=e,a=vt(e,H5);return this._fromObject(F(F({},a),{},{points:[t,n,i,s]}),{extraParam:"points"})}}B(hs,"type","Line"),B(hs,"cacheProperties",[...Yn,...Sf]),B(hs,"ATTRIBUTE_NAMES",Oi.concat(Sf)),le.setClass(hs),le.setSVGClass(hs);class ds extends dt{static getDefaults(){return F(F({},super.getDefaults()),ds.ownDefaults)}constructor(e){super(),Object.assign(this,ds.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}B(ds,"type","Triangle"),B(ds,"ownDefaults",{width:100,height:100}),le.setClass(ds),le.setSVGClass(ds);const ob=["rx","ry"];class Zn extends dt{static getDefaults(){return F(F({},super.getDefaults()),Zn.ownDefaults)}constructor(e){super(),Object.assign(this,Zn.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(br)}getRy(){return this.get("ry")*this.get(Nr)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ob,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Wn,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const i=Gn(e,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function z5(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}B(Zn,"type","Ellipse"),B(Zn,"cacheProperties",[...Yn,...ob]),B(Zn,"ownDefaults",{rx:0,ry:0}),B(Zn,"ATTRIBUTE_NAMES",[...Oi,"cx","cy","rx","ry"]),le.setClass(Zn),le.setSVGClass(Zn);const W5=["left","top"],ab={exactBoundingBox:!1};class _n extends dt{static getDefaults(){return F(F({},super.getDefaults()),_n.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),B(this,"strokeDiff",void 0),Object.assign(this,_n.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(at,n),typeof i=="number"&&this.set(kr,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return T1(this.points,e,this.isOpen())}_calcDimensions(e){e=F({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(h=>h.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new Y,strokeOffset:new Y,strokeDiff:new Y};const n=Rn(t),i=da(F(F({},e),{},{scaleX:1,scaleY:1})),s=Rn(this.points.map(h=>ur(h,i,!0))),a=new Y(this.scaleX,this.scaleY);let c=n.left+n.width/2,u=n.top+n.height/2;return this.exactBoundingBox&&(c-=u*Math.tan(At(this.skewX)),u-=c*Math.tan(At(this.skewY))),F(F({},n),{},{pathOffset:new Y(c,u),strokeOffset:new Y(s.left,s.top).subtract(new Y(n.left,n.top)).multiply(a),strokeDiff:new Y(n.width,n.height).subtract(new Y(s.width,s.height)).multiply(a)})}_findCenterFromElement(){const e=Rn(this.points);return new Y(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:i,height:s,pathOffset:a,strokeOffset:c,strokeDiff:u}=this._calcDimensions();this.set({width:i,height:s,pathOffset:a,strokeOffset:c,strokeDiff:u}),e&&this.setPositionByOrigin(new Y(t+i/2,n+s/2),Ve,Ve)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Y(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let a;if(Object.keys(e).some(c=>this.strokeUniform||this.constructor.layoutProperties.includes(c))){var t,n;const{width:c,height:u}=this._calcDimensions(e);a=new Y((t=e.width)!==null&&t!==void 0?t:c,(n=e.height)!==null&&n!==void 0?n:u)}else{var i,s;a=new Y((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return a.multiply(new Y(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&n&&((e===br||e===Nr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F(F({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:i}=t;return{x:n,y:i}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,i=et.NUM_FRACTION_DIGITS;for(let s=0,a=this.points.length;s<a;s++)e.push(yt(this.points[s].x-t,i),",",yt(this.points[s].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-i);for(let s=0;s<t;s++){const a=this.points[s];e.lineTo(a.x-n,a.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(z5(e.getAttribute("points")),F(F({},vt(Gn(e,this.ATTRIBUTE_NAMES,n),W5)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}B(_n,"ownDefaults",ab),B(_n,"type","Polyline"),B(_n,"layoutProperties",[to,ro,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),B(_n,"cacheProperties",[...Yn,"points"]),B(_n,"ATTRIBUTE_NAMES",[...Oi]),le.setClass(_n),le.setSVGClass(_n);class wl extends _n{isOpen(){return!1}}B(wl,"ownDefaults",ab),B(wl,"type","Polygon"),le.setClass(wl),le.setSVGClass(wl);const cb=["fontSize","fontWeight","fontFamily","fontStyle"],lb=["underline","overline","linethrough"],ub=[...cb,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],hb=[...ub,...lb,"textBackgroundColor","direction"],U5=[...cb,...lb,Ar,"strokeWidth",Wt,"deltaY","textBackgroundColor"],$5={_reNewline:Rd,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:at,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:at,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},jn="justify",_l="justify-left",Ca="justify-right",Ta="justify-center";class db extends dt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const i in t[n])for(const s in t[n][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const i in n)for(const s in n[i])if(n[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,i,s=0,a=!0,c=0;for(const u in t){n=0;for(const h in t[u]){const d=t[u][h]||{};s++,d[e]!==void 0?(i?d[e]!==i&&(a=!1):i=d[e],d[e]===this[e]&&delete d[e]):a=!1,Object.keys(d).length!==0?n++:delete t[u][h]}n===0&&delete t[u]}for(let u=0;u<this._textLines.length;u++)c+=this._textLines[u].length;a&&s===c&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,i,s;for(i in t){for(s in n=t[i],n)delete n[s][e],Object.keys(n[s]).length===0&&delete n[s];Object.keys(n).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const s=Hd(F(F({},this._getStyleDeclaration(n,i)),t),a=>a!==void 0);this._setStyleDeclaration(n,i,s)}getSelectionStyles(e,t,n){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,n));return i}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(e,t,n){for(let i=t;i<(n||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const i=this.styles&&this.styles[e];return i&&(n=i[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return F(F({},ns(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}B(db,"_styleProperties",U5);const Y5=/  +/g,X5=/"/g;function xf(r,e,t,n,i){return"		".concat(function(s,a){let{left:c,top:u,width:h,height:d}=a,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:et.NUM_FRACTION_DIGITS;const p=ma(Wt,s,!1),[v,b,S,C]=[c,u,h,d].map(T=>yt(T,g));return"<rect ".concat(p,' x="').concat(v,'" y="').concat(b,'" width="').concat(S,'" height="').concat(C,'"></rect>')}(r,{left:e,top:t,width:n,height:i}),`
`)}const G5=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Cf;class _r extends db{static getDefaults(){return F(F({},super.getDefaults()),_r.ownDefaults)}constructor(e,t){super(),B(this,"__charBounds",[]),Object.assign(this,_r.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=bf(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(jn)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,i,s,a,c;for(let u=0,h=this._textLines.length;u<h;u++)if((this.textAlign===jn||u!==h-1&&!this.isEndOfWrapping(u))&&(i=0,s=this._textLines[u],t=this.getLineWidth(u),t<this.width&&(c=this.textLines[u].match(this._reSpacesAndTabs)))){n=c.length,e=(this.width-t)/n;for(let d=0;d<=s.length;d++)a=this.__charBounds[u][d],this._reSpaceAndTab.test(s[d])?(a.width+=e,a.kernedWidth+=e,a.left+=i,i+=e):a.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(e<=n[i].length)return{lineIndex:i,charIndex:e};e-=n[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:n[i-1].length<e?n[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Ar?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Ve:e.textBaseline="middle";break;case"ascender":e.textBaseline=kr;break;case"descender":e.textBaseline=Dd}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,n,i,s,a){this._renderChars(e,t,n,i,s,a)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,a=this._textLines.length;s<a;s++){const c=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=c;continue}const u=this._textLines[s].length,h=this._getLineLeftOffset(s);let d,g,p=0,v=0,b=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let S=0;S<u;S++){const C=this.__charBounds[s][S];g=this.getValueOfPropertyAt(s,S,"textBackgroundColor"),this.path?(e.save(),e.translate(C.renderLeft,C.renderTop),e.rotate(C.angle),e.fillStyle=g,g&&e.fillRect(-C.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),C.width,c/this.lineHeight),e.restore()):g!==b?(d=n+h+v,this.direction==="rtl"&&(d=this.width-d-p),e.fillStyle=b,b&&e.fillRect(d,i,p,c/this.lineHeight),v=C.left,p=C.width,b=g):p+=C.kernedWidth}g&&!this.path&&(d=n+h+v,this.direction==="rtl"&&(d=this.width-d-p),e.fillStyle=g,e.fillRect(d,i,p,c/this.lineHeight)),i+=c}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,i){const s=la.getFontCache(t),a=this._getFontDeclaration(t),c=n+e,u=n&&a===this._getFontDeclaration(i),h=t.fontSize/this.CACHE_FONT_SIZE;let d,g,p,v;if(n&&s[n]!==void 0&&(p=s[n]),s[e]!==void 0&&(v=d=s[e]),u&&s[c]!==void 0&&(g=s[c],v=g-p),d===void 0||p===void 0||g===void 0){const b=function(){return Cf||(Cf=vn({width:0,height:0}).getContext("2d")),Cf}();this._setTextStyles(b,t,!0),d===void 0&&(v=d=b.measureText(e).width,s[e]=d),p===void 0&&u&&n&&(p=b.measureText(n).width,s[n]=p),u&&g===void 0&&(g=b.measureText(c).width,s[c]=g,v=g-p)}return{width:d*h,kernedWidth:v*h}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,i=0;const s=this.pathSide===jt,a=this.path,c=this._textLines[e],u=c.length,h=new Array(u);this.__charBounds[e]=h;for(let d=0;d<u;d++){const g=c[d];n=this._getGraphemeBox(g,e,d,t),h[d]=n,i+=n.kernedWidth,t=g}if(h[u]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},a&&a.segmentsInfo){let d=0;const g=a.segmentsInfo[a.segmentsInfo.length-1].length;switch(this.textAlign){case at:d=s?g-i:0;break;case Ve:d=(g-i)/2;break;case jt:d=s?0:g-i}d+=this.pathStartOffset*(s?-1:1);for(let p=s?u-1:0;s?p>=0:p<u;s?p--:p++)n=h[p],d>g?d%=g:d<0&&(d+=g),this._setGraphemeOnPath(d,n),d+=n.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,i=this.path,s=q1(i.path,n,i.segmentsInfo);t.renderLeft=s.x-i.pathOffset.x,t.renderTop=s.y-i.pathOffset.y,t.angle=s.angle+(this.pathSide===jt?Math.PI:0)}_getGraphemeBox(e,t,n,i,s){const a=this.getCompleteStyleDeclaration(t,n),c=i?this.getCompleteStyleDeclaration(t,n-1):{},u=this._measureChar(e,a,i,c);let h,d=u.kernedWidth,g=u.width;this.charSpacing!==0&&(h=this._getWidthOfCharSpacing(),g+=h,d+=h);const p={width:g,left:0,height:a.fontSize,kernedWidth:d,deltaY:a.deltaY};if(n>0&&!s){const v=this.__charBounds[t][n-1];p.left=v.left+v.width+u.kernedWidth-u.width}return p}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,i=this._textLines[e].length;n<i;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,i=this._textLines.length;n<i;n++)e=this.getHeightOfLine(n),t+=n===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let a=0,c=this._textLines.length;a<c;a++){const u=this.getHeightOfLine(a),h=u/this.lineHeight,d=this._getLineLeftOffset(a);this._renderTextLine(t,e,this._textLines[a],i+d,s+n+h,a),n+=u}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Wt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,i,s,a){const c=this.getHeightOfLine(a),u=this.textAlign.includes(jn),h=this.path,d=!u&&this.charSpacing===0&&this.isEmptyStyles(a)&&!h,g=this.direction==="ltr",p=this.direction==="ltr"?1:-1,v=t.direction;let b,S,C,T,k,A="",M=0;if(t.save(),v!==this.direction&&(t.canvas.setAttribute("dir",g?"ltr":"rtl"),t.direction=g?"ltr":"rtl",t.textAlign=g?at:jt),s-=c*this._fontSizeFraction/this.lineHeight,d)return this._renderChar(e,t,a,0,n.join(""),i,s),void t.restore();for(let R=0,N=n.length-1;R<=N;R++)T=R===N||this.charSpacing||h,A+=n[R],C=this.__charBounds[a][R],M===0?(i+=p*(C.kernedWidth-C.width),M+=C.width):M+=C.kernedWidth,u&&!T&&this._reSpaceAndTab.test(n[R])&&(T=!0),T||(b=b||this.getCompleteStyleDeclaration(a,R),S=this.getCompleteStyleDeclaration(a,R+1),T=dl(b,S,!1)),T&&(h?(t.save(),t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),this._renderChar(e,t,a,R,A,-M/2,0),t.restore()):(k=i,this._renderChar(e,t,a,R,A,k,s)),A="",b=S,i+=p*M,M=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,i=vn({width:t,height:n}),s=i.getContext("2d");return i.width=t,i.height=n,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,n),s.lineTo(0,n),s.closePath(),s.translate(t/2,n/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,t,n){let i,s;return Jr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:s}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,i,s,a,c){const u=this._getStyleDeclaration(n,i),h=this.getCompleteStyleDeclaration(n,i),d=e==="fillText"&&h.fill,g=e==="strokeText"&&h.stroke&&h.strokeWidth;if(g||d){if(t.save(),t.font=this._getFontDeclaration(h),u.textBackgroundColor&&this._removeShadow(t),u.deltaY&&(c+=u.deltaY),d){const p=this._setFillStyles(t,h);t.fillText(s,a-p.offsetX,c-p.offsetY)}if(g){const p=this._setStrokeStyles(t,h);t.strokeText(s,a-p.offsetX,c-p.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),c={fontSize:s*n.size,deltaY:a+s*n.baseline};this.setSelectionStyles(c,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,i=this.textAlign,s=this.direction,a=this.isEndOfWrapping(e);let c=0;return i===jn||i===Ta&&!a||i===Ca&&!a||i===_l&&!a?0:(i===Ve&&(c=n/2),i===jt&&(c=n),i===Ta&&(c=n/2),i===Ca&&(c=n),s==="rtl"&&(i===jt||i===jn||i===Ca?c=0:i===at||i===_l?c=-n:i!==Ve&&i!==Ta||(c=-n/2)),c)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var i;return(i=this._getStyleDeclaration(e,t)[n])!==null&&i!==void 0?i:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,a=this._getWidthOfCharSpacing(),c=this.offsets[t];for(let u=0,h=this._textLines.length;u<h;u++){const d=this.getHeightOfLine(u);if(!this[t]&&!this.styleHas(t,u)){n+=d;continue}const g=this._textLines[u],p=d/this.lineHeight,v=this._getLineLeftOffset(u);let b,S,C=0,T=0,k=this.getValueOfPropertyAt(u,0,t),A=this.getValueOfPropertyAt(u,0,Wt);const M=n+p*(1-this._fontSizeFraction);let R=this.getHeightOfChar(u,0),N=this.getValueOfPropertyAt(u,0,"deltaY");for(let V=0,G=g.length;V<G;V++){const X=this.__charBounds[u][V];b=this.getValueOfPropertyAt(u,V,t),S=this.getValueOfPropertyAt(u,V,Wt);const J=this.getHeightOfChar(u,V),q=this.getValueOfPropertyAt(u,V,"deltaY");if(s&&b&&S)e.save(),e.fillStyle=A,e.translate(X.renderLeft,X.renderTop),e.rotate(X.angle),e.fillRect(-X.kernedWidth/2,c*J+q,X.kernedWidth,this.fontSize/15),e.restore();else if((b!==k||S!==A||J!==R||q!==N)&&T>0){let Z=i+v+C;this.direction==="rtl"&&(Z=this.width-Z-T),k&&A&&(e.fillStyle=A,e.fillRect(Z,M+c*R+N,T,this.fontSize/15)),C=X.left,T=X.width,k=b,A=S,R=J,N=q}else T+=X.kernedWidth}let $=i+v+C;this.direction==="rtl"&&($=this.width-$-T),e.fillStyle=S,b&&S&&e.fillRect($,M+c*R+N,T-a,this.fontSize/15),n+=d}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const a=e.includes("'")||e.includes('"')||e.includes(",")||_r.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),a].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return hl(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),i=[`
`];let s=[];for(let a=0;a<t.length;a++)n[a]=this.graphemeSplit(t[a]),s=s.concat(n[a],i);return s.pop(),{_unwrappedLines:n,lines:t,graphemeText:s,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F(F({},super.toObject([...hb,...e])),{},{styles:k1(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const a in e)a==="path"&&this.setPathInfo(),i=i||n.includes(a),s=s||a==="path";else i=n.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const i=Gn(e,_r.ATTRIBUTE_NAMES,n),s=F(F({},t),i),{textAnchor:a=at,textDecoration:c="",dx:u=0,dy:h=0,top:d=0,left:g=0,fontSize:p=Pd,strokeWidth:v=1}=s,b=vt(s,G5),S=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),F({left:g+u,top:d+h,underline:c.includes("underline"),overline:c.includes("overline"),linethrough:c.includes("line-through"),strokeWidth:0,fontSize:p},b)),C=S.getScaledHeight()/S.height,T=((S.height+S.strokeWidth)*S.lineHeight-S.height)*C,k=S.getScaledHeight()+T;let A=0;return a===Ve&&(A=S.getScaledWidth()/2),a===jt&&(A=S.getScaledWidth()),S.set({left:S.left-A,top:S.top-(k-S.fontSize*(.07+S._fontSizeFraction))/S.lineHeight,strokeWidth:v}),S}static fromObject(e){return this._fromObject(F(F({},e),{},{styles:O1(e.styles||{},e.text)}),{extraParam:"text"})}}B(_r,"textLayoutProperties",ub),B(_r,"cacheProperties",[...Yn,...hb]),B(_r,"ownDefaults",$5),B(_r,"type","Text"),B(_r,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),B(_r,"ATTRIBUTE_NAMES",Oi.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),_1(_r,[class extends qy{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){return this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(X5,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],n=[];let i,s=r;this.backgroundColor&&n.push(...xf(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let a=0,c=this._textLines.length;a<c;a++)i=this._getLineLeftOffset(a),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(n,a,e+i,s),this._setSVGTextLineText(t,a,e+i,s),s+=this.getHeightOfLine(a);return{textSpans:t,textBgRects:n}}_createTextCharSpan(r,e,t,n){const i=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match(Y5)),s=i?'style="'.concat(i,'"'):"",a=e.deltaY,c=a?' dy="'.concat(yt(a,et.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(yt(t,et.NUM_FRACTION_DIGITS),'" y="').concat(yt(n,et.NUM_FRACTION_DIGITS),'" ').concat(c).concat(s,">").concat(E1(r),"</tspan>")}_setSVGTextLineText(r,e,t,n){const i=this.getHeightOfLine(e),s=this.textAlign.includes(jn),a=this._textLines[e];let c,u,h,d,g,p="",v=0;n+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let b=0,S=a.length-1;b<=S;b++)g=b===S||this.charSpacing,p+=a[b],h=this.__charBounds[e][b],v===0?(t+=h.kernedWidth-h.width,v+=h.width):v+=h.kernedWidth,s&&!g&&this._reSpaceAndTab.test(a[b])&&(g=!0),g||(c=c||this.getCompleteStyleDeclaration(e,b),u=this.getCompleteStyleDeclaration(e,b+1),g=dl(c,u,!0)),g&&(d=this._getStyleDeclaration(e,b),r.push(this._createTextCharSpan(p,d,t,n)),p="",c=u,this.direction==="rtl"?t-=v:t+=v,v=0)}_setSVGTextLineBg(r,e,t,n){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let a,c=0,u=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let d=0;d<i.length;d++){const{left:g,width:p,kernedWidth:v}=this.__charBounds[e][d];a=this.getValueOfPropertyAt(e,d,"textBackgroundColor"),a!==h?(h&&r.push(...xf(h,t+u,n,c,s)),u=g,c=p,h=a):c+=v}a&&r.push(...xf(h,t+u,n,c,s))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:n,stroke:i,fill:s,fontSize:a,fontStyle:c,fontWeight:u,deltaY:h}=r,d=this.getSvgTextDecoration(r);return[i?ma(Ar,i):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",a?"font-size: ".concat(a,"px; "):"",c?"font-style: ".concat(c,"; "):"",u?"font-weight: ".concat(u,"; "):"",d&&"text-decoration: ".concat(d,"; "),s?ma(Wt,s):"",h?"baseline-shift: ".concat(-h,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter(e=>r[e.replace("-","")]).join(" ")}}]),le.setClass(_r),le.setSVGClass(_r);class q5{constructor(e){B(this,"target",void 0),B(this,"__mouseDownInPlace",!1),B(this,"__dragStartFired",!1),B(this,"__isDraggingOver",!1),B(this,"__dragStartSelection",void 0),B(this,"__dragImageDisposer",void 0),B(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:i,selectionEnd:s}=t;const a=this.target,c=a.canvas,u=new Y(a.flipX?-1:1,a.flipY?-1:1),h=a._getCursorBoundaries(i),d=new Y(h.left+h.leftOffset,h.top+h.topOffset).multiply(u).transform(a.calcTransformMatrix()),g=c.getScenePoint(e).subtract(d),p=a.getCanvasRetinaScaling(),v=a.getBoundingRect(),b=d.subtract(new Y(v.left,v.top)),S=c.viewportTransform,C=b.add(g).transform(S,!0),T=a.backgroundColor,k=df(a.styles);a.backgroundColor="";const A={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};a.setSelectionStyles(A,0,i),a.setSelectionStyles(A,s,a.text.length),a.dirty=!0;const M=a.toCanvasElement({enableRetinaScaling:c.enableRetinaScaling,viewportTransform:!0});a.backgroundColor=T,a.styles=k,a.dirty=!0,vl(M,{position:"fixed",left:"".concat(-M.width,"px"),border:Or,width:"".concat(M.width/p,"px"),height:"".concat(M.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{M.remove()},yn(e.target||this.target.hiddenTextarea).body.appendChild(M),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(M,C.x,C.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),a=F({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,a)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let s=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const a=this.target,c=a.canvas;let u=a.getSelectionStartFromPointer(n);const{styles:h}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},d=s[Math.max(0,s.length-1)],g=0;if(this.__dragStartSelection){const p=this.__dragStartSelection.selectionStart,v=this.__dragStartSelection.selectionEnd;u>p&&u<=v?u=p:u>v&&(u-=v-p),a.removeChars(p,v),delete this.__dragStartSelection}a._reNewline.test(d)&&(a._reNewline.test(a._text[u])||u===a._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=a,a.insertChars(s,h,u),c.setActiveObject(a),a.enterEditing(n),a.selectionStart=Math.min(u+g,a._text.length),a.selectionEnd=Math.min(a.selectionStart+s.length,a._text.length),a.hiddenTextarea.value=a.text,a._updateTextarea(),a.hiddenTextarea.focus(),a.fire(Xc,{index:u+g,action:"drop"}),c.fire("text:changed",{target:a}),c.contextTopDirty=!0,c.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const i=this.target,s=this.target.canvas,{selectionStart:a,selectionEnd:c}=this.__dragStartSelection,u=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||Or;u===Or?(i.selectionStart=a,i.selectionEnd=c,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),u==="move"&&(i.removeChars(a,c),i.selectionStart=i.selectionEnd=a,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(Xc,{index:a,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const fb=/[ \n\.,;!\?\-]/;class K5 extends _r{constructor(){super(...arguments),B(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:i,onComplete:s}=e;return sf({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:a=>{this._currentCursorOpacity=a,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let i=e>0&&this._reSpace.test(n[e])&&(t===-1||!Rd.test(n[e-1]))?e-1:e,s=n[i];for(;i>0&&i<n.length&&!fb.test(s);)i+=t,s=n[i];return t===-1&&fb.test(s)&&i++,i}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),n=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;yn(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&i!==s||i!==n&&s!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const i=n.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const a=n.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(a).length}}fromGraphemeToStringSelection(e,t,n){const i=n.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),i=n.lineIndex,s=n.charIndex,a=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,c=t.leftOffset,u=this.getCanvasRetinaScaling(),h=this.canvas.upperCanvasEl,d=h.width/u,g=h.height/u,p=d-a,v=g-a,b=new Y(t.left+c,t.top+t.topOffset+a).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Y(h.clientWidth/d,h.clientHeight/g));return b.x<0&&(b.x=0),b.x>p&&(b.x=p),b.y<0&&(b.y=0),b.y>v&&(b.y=v),b.x+=this.canvas._offset.left,b.y+=this.canvas._offset.top,{left:"".concat(b.x,"px"),top:"".concat(b.y,"px"),fontSize:"".concat(a,"px"),charHeight:a}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(qc),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:a}=this.get2DCursorLocation(t,!0);if(n!==s){if(this.styles[n])for(let c=i;c<this._unwrappedTextLines[n].length;c++)delete this.styles[n][c];if(this.styles[s])for(let c=a;c<this._unwrappedTextLines[s].length;c++){const u=this.styles[s][c];u&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+c-a]=u)}for(let c=n+1;c<=s;c++)delete this.styles[c];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){const c=this.styles[n],u=a-i;for(let h=i;h<a;h++)delete c[h];for(const h in this.styles[n]){const d=parseInt(h,10);d>=a&&(c[d-u]=c[h],delete c[h])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=n[s],n[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,n,i){const s={},a=this._unwrappedTextLines[e].length,c=a===t;let u=!1;n||(n=1),this.shiftLineStyles(e,n);const h=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const g in this.styles[e]){const p=parseInt(g,10);p>=t&&(u=!0,s[p-t]=this.styles[e][g],c&&t===0||delete this.styles[e][g])}let d=!1;for(u&&!c&&(this.styles[e+n]=s,d=!0),(d||a>t)&&n--;n>0;)i&&i[n-1]?this.styles[e+n]={0:F({},i[n-1])}:h?this.styles[e+n]={0:F({},h)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,i){this.styles||(this.styles={});const s=this.styles[e],a=s?F({},s):{};n||(n=1);for(const u in a){const h=parseInt(u,10);h>=t&&(s[h+n]=a[h],a[h-n]||delete s[h])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=F({},i[n]));return}if(!s)return;const c=s[t?t-1:1];for(;c&&n--;)this.styles[e][t+n]=F({},c)}insertNewStyleBlock(e,t,n){const i=this.get2DCursorLocation(t,!0),s=[0];let a,c=0;for(let u=0;u<e.length;u++)e[u]===`
`?(c++,s[c]=0):s[c]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],n),n=n&&n.slice(s[0]+1)),c&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],c),a=1;a<c;a++)s[a]>0?this.insertCharStyleObject(i.lineIndex+a,0,s[a],n):n&&this.styles[i.lineIndex+a]&&n[0]&&(this.styles[i.lineIndex+a][0]=n[0]),n=n&&n.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(i.lineIndex+a,0,s[a],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,n,t),this._text=[...this._text.slice(0,n),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=at:this._selectionDirection===jt&&(this._selectionDirection=at,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===jt?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=jt:this._selectionDirection===at&&(this._selectionDirection=jt,this.selectionStart=t),this.selectionEnd=n)}}class Z5 extends K5{initHiddenTextarea(){const e=this.canvas&&yn(this.canvas.getElement())||eo(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(a=>{let[c,u]=a;return t.setAttribute(c,u)});const{top:n,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(a=>{let[c,u]=a;return t.addEventListener(c,this[u].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(Xc),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,a=i.length,c=this.selectionStart,u=this.selectionEnd,h=c!==u;let d,g,p,v,b=a-s;const S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=c>S.selectionStart;h?(g=this._text.slice(c,u),b+=u-c):a<s&&(g=C?this._text.slice(u+b,u):this._text.slice(c,c-b));const T=i.slice(S.selectionEnd-b,S.selectionEnd);if(g&&g.length&&(T.length&&(d=this.getSelectionStyles(c,c+1,!1),d=T.map(()=>d[0])),h?(p=c,v=u):C?(p=u-g.length,v=u):(p=u,v=u+g.length),this.removeStyleFromTo(p,v)),T.length){const{copyPasteData:k}=Dn();t&&T.join("")===k.copiedText&&!et.disableStyleCopyPaste&&(d=k.copiedTextStyle),this.insertNewStyleBlock(T,c,d)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:i}=t;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Dn();e.copiedText=this.getSelectedText(),et.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,i=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],i+=n.left+n.width),i}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const a=i.charIndex,c=this._getWidthBeforeCursor(s,a),u=this._getIndexOnLine(s+1,c);return this._textLines[s].slice(a).length+u+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-n;const a=i.charIndex,c=this._getWidthBeforeCursor(s,a),u=this._getIndexOnLine(s-1,c),h=this._textLines[s].slice(0,a),d=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+u-h.length+(1-d)}_getIndexOnLine(e,t){const n=this._textLines[e];let i,s,a=this._getLineLeftOffset(e),c=0;for(let u=0,h=n.length;u<h;u++)if(i=this.__charBounds[e][u].width,a+=i,a>t){s=!0;const d=a-i,g=a,p=Math.abs(d-t);c=Math.abs(g-t)<p?u:u-1;break}return s||(c=n.length-1),c}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===jt);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const i=this.text.length;this.selectionStart=as(0,this.selectionStart,i),this.selectionEnd=as(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===at?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let i;if(e.altKey)i=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;i=this["findLineBoundary".concat(n)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=at,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===jt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=at,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===at&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=jt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=jt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Tf=r=>!!r.button;class J5 extends Z5{constructor(){super(...arguments),B(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new q5(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),Ud(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Tf(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Tf(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:n}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Tf(t)||i||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Br(this.calcTransformMatrix())).add(new Y(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,s=0;for(let h=0;h<this._textLines.length&&n<=t.y;h++)n+=this.getHeightOfLine(h),s=h,h>0&&(i+=this._textLines[h-1].length+this.missingNewlineOffset(h-1));let a=Math.abs(this._getLineLeftOffset(s));const c=this._textLines[s].length,u=this.__charBounds[s];for(let h=0;h<c;h++){const d=a+u[h].kernedWidth;if(t.x<=d){Math.abs(t.x-d)<=Math.abs(t.x-a)&&i++;break}a=d,i++}return Math.min(this.flipX?c-i:i,this._text.length)}}const Sl="moveCursorUp",xl="moveCursorDown",Cl="moveCursorLeft",Tl="moveCursorRight",El="exitEditing",Q5=F({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:El,27:El,33:Sl,34:xl,35:Tl,36:Cl,37:Cl,38:Sl,39:Tl,40:xl},keysMapRtl:{9:El,27:El,33:Sl,34:xl,35:Cl,36:Tl,37:Tl,38:Sl,39:Cl,40:xl},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Jn extends J5{static getDefaults(){return F(F({},super.getDefaults()),Jn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,F(F({},Jn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof wf&&this.canvas.textEditingManager.remove(this),t instanceof wf&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:n,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let h=0;h<s;h++)t+=this.getHeightOfLine(h);const a=this._getLineLeftOffset(s),c=this.__charBounds[s][i];c&&(n=c.left),this.charSpacing!==0&&i===this._textLines[s].length&&(n-=this._getWidthOfCharSpacing());const u={top:t,left:a+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===jt||this.textAlign===jn||this.textAlign===Ca?u.left*=-1:this.textAlign===at||this.textAlign===_l?u.left=a-(n>0?n:0):this.textAlign!==Ve&&this.textAlign!==Ta||(u.left=a-(n>0?n:0))),u}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),i=n.lineIndex,s=n.charIndex>0?n.charIndex-1:0,a=this.getValueOfPropertyAt(i,s,"fontSize"),c=this.getObjectScaling().x*this.canvas.getZoom(),u=this.cursorWidth/c,h=this.getValueOfPropertyAt(i,s,"deltaY"),d=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-u/2,top:d+t.top+h,width:u,height:a}}_renderCursor(e,t,n){const{color:i,opacity:s,left:a,top:c,width:u,height:h}=this.getCursorRenderingData(n,t);e.fillStyle=i,e.globalAlpha=s,e.fillRect(a,c,u,h)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const i=t.selectionStart,s=t.selectionEnd,a=this.textAlign.includes(jn),c=this.get2DCursorLocation(i),u=this.get2DCursorLocation(s),h=c.lineIndex,d=u.lineIndex,g=c.charIndex<0?0:c.charIndex,p=u.charIndex<0?0:u.charIndex;for(let v=h;v<=d;v++){const b=this._getLineLeftOffset(v)||0;let S=this.getHeightOfLine(v),C=0,T=0,k=0;if(v===h&&(T=this.__charBounds[h][g].left),v>=h&&v<d)k=a&&!this.isEndOfWrapping(v)?this.width:this.getLineWidth(v)||5;else if(v===d)if(p===0)k=this.__charBounds[d][p].left;else{const $=this._getWidthOfCharSpacing();k=this.__charBounds[d][p-1].left+this.__charBounds[d][p-1].width-$}C=S,(this.lineHeight<1||v===d&&this.lineHeight>1)&&(S/=this.lineHeight);let A=n.left+b+T,M=S,R=0;const N=k-T;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",M=1,R=S):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===jt||this.textAlign===jn||this.textAlign===Ca?A=this.width-A-N:this.textAlign===at||this.textAlign===_l?A=n.left+b-k:this.textAlign!==Ve&&this.textAlign!==Ta||(A=n.left+b-k)),e.fillRect(A,n.top+n.topOffset+R,N,M),n.topOffset+=C}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Wt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}B(Jn,"ownDefaults",Q5),B(Jn,"type","IText"),le.setClass(Jn),le.setClass(Jn,"i-text");class fs extends Jn{static getDefaults(){return F(F({},super.getDefaults()),fs.ownDefaults)}constructor(e,t){super(e,F(F({},fs.ownDefaults),t))}static createControls(){return{controls:w1()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(jn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,i=0;const s={};for(let a=0;a<e.graphemeLines.length;a++)e.graphemeText[i]===`
`&&a>0?(n=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&a>0&&(n++,i++),s[a]={line:t,offset:n},i+=e.graphemeLines[a].length,n+=e.graphemeLines[a].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,i=e+1,s=!1;const a=this._styleMap[e],c=this._styleMap[e+1];a&&(e=a.line,n=a.offset),c&&(i=c.line,s=i===e,t=c.offset);const u=e===void 0?this.styles:{line:this.styles[e]};for(const h in u)for(const d in u[h]){const g=parseInt(d,10);if(g>=n&&(!s||g<t))for(const p in u[h][d])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<n.wordsData.length;s++)i.push(...this._wrapLine(s,t,n));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let i=0;return{wordsData:e.map((s,a)=>{let c=0;const u=t?this.graphemeSplit(s):this.wordSplit(s);return u.length===0?[{word:[],width:0}]:u.map(h=>{const d=t?[h]:this.graphemeSplit(h),g=this._measureWord(d,a,c);return i=Math.max(g,i),c+=d.length+n.length,{word:d,width:g}})}),largestWordWidth:i}}_measureWord(e,t){let n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let a=0,c=e.length;a<c;a++)s+=this._getGraphemeBox(e[a],t,a+i,n,!0).kernedWidth,n=e[a];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:i,wordsData:s}=n,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const c=this._getWidthOfCharSpacing(),u=this.splitByGrapheme,h=[],d=u?"":" ";let g=0,p=[],v=0,b=0,S=!0;t-=a;const C=Math.max(t,i,this.dynamicMinWidth),T=s[e];let k;for(v=0,k=0;k<T.length;k++){const{word:A,width:M}=T[k];v+=A.length,g+=b+M-c,g>C&&!S?(h.push(p),p=[],g=M,S=!0):g+=c,S||u||p.push(d),p=p.concat(A),b=u?0:this._measureWord([d],e,v),v++,S=!1}return k&&h.push(p),i+a>this.dynamicMinWidth&&(this.dynamicMinWidth=i-c+a),h}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),i=new Array(n.length);for(let s=0;s<n.length;s++)i[s]=n[s].join("");return t.lines=i,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}B(fs,"type","Textbox"),B(fs,"textLayoutProperties",[...Jn.textLayoutProperties,"width"]),B(fs,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),le.setClass(fs);class gb extends pl{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:i,group:s}=n;if(!i||!this.shouldPerformLayout(e))return;const{width:a,height:c}=Rn(N1(n,i)),u=new Y(a,c);if(i.absolutePositioned)return{center:Un(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:u};{const h=i.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:d=new Y,correction:g=new Y}=this.calcBoundingBox(t,e)||{};return{center:d.add(h),correction:g.subtract(h),size:u}}return{center:n.getRelativeCenterPoint().add(h),size:u}}}}B(gb,"type","clip-path"),le.setClass(gb);class pb extends pl{getInitialSize(e,t){let{target:n}=e,{size:i}=t;return new Y(n.width||i.x,n.height||i.y)}}B(pb,"type","fixed"),le.setClass(pb);class eP extends Sa{subscribeTargets(e){const t=e.target;e.targets.reduce((n,i)=>(i.parent&&n.add(i.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!n.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})})}}class Ln extends Qr{static getDefaults(){return F(F({},super.getDefaults()),Ln.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ln.ownDefaults),this.setOptions(t);const{left:n,top:i,layoutManager:s}=t;this.groupInit(e,{left:n,top:i,layoutManager:s??new eP})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const s=this._objects.findIndex(c=>c.isInFrontOf(i)),a=s===-1?this.size():s;this.insertAt(a,i)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Si("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(i=>{const{parent:s}=i;s&&n.add(s)}),e===pf?n.forEach(i=>{i._onAfterObjectsChange(fl,t)}):n.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=F(F({hasControls:!1},n),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,t),e.restore()}}B(Ln,"type","ActiveSelection"),B(Ln,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),le.setClass(Ln),le.setClass(Ln,"activeSelection");class tP{constructor(){B(this,"resources",{})}applyFilters(e,t,n,i,s){const a=s.getContext("2d");if(!a)return;a.drawImage(t,0,0,n,i);const c={sourceWidth:n,sourceHeight:i,imageData:a.getImageData(0,0,n,i),originalEl:t,originalImageData:a.getImageData(0,0,n,i),canvasEl:s,ctx:a,filterBackend:this};e.forEach(h=>{h.applyTo(c)});const{imageData:u}=c;return u.width===n&&u.height===i||(s.width=u.width,s.height=u.height),a.putImageData(u,0,0),c}}class mb{constructor(){let{tileSize:e=et.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};B(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),B(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=vn({width:e,height:t}),i=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=n,this.gl=i)}applyFilters(e,t,n,i,s,a){const c=this.gl,u=s.getContext("2d");if(!c||!u)return;let h;a&&(h=this.getCachedTexture(a,t));const d={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:c,sourceTexture:this.createTexture(c,n,i,h?void 0:t),targetTexture:this.createTexture(c,n,i),originalTexture:h||this.createTexture(c,n,i,h?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},g=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,g),e.forEach(p=>{p&&p.applyTo(d)}),function(p){const v=p.targetCanvas,b=v.width,S=v.height,C=p.destinationWidth,T=p.destinationHeight;b===C&&S===T||(v.width=C,v.height=T)}(d),this.copyGLTo2D(c,d),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(d.sourceTexture),c.deleteTexture(d.targetTexture),c.deleteFramebuffer(g),u.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,i,s){const{NEAREST:a,TEXTURE_2D:c,RGBA:u,UNSIGNED_BYTE:h,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:g,TEXTURE_MIN_FILTER:p,TEXTURE_WRAP_S:v,TEXTURE_WRAP_T:b}=e,S=e.createTexture();return e.bindTexture(c,S),e.texParameteri(c,g,s||a),e.texParameteri(c,p,s||a),e.texParameteri(c,v,d),e.texParameteri(c,b,d),i?e.texImage2D(c,0,u,u,h,i):e.texImage2D(c,0,u,t,n,0,u,h,null),S}getCachedTexture(e,t,n){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,n);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const a=n.height-i.height;s.drawImage(n,0,a,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),i=t.destinationWidth,s=t.destinationHeight,a=i*s*4;if(!n)return;const c=new Uint8Array(this.imageBuffer,0,a),u=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,c);const h=new ImageData(u,i,s);n.putImageData(h,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const i=e.getParameter(n.UNMASKED_RENDERER_WEBGL),s=e.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Ef;function rP(){const{WebGLProbe:r}=Dn();return r.queryWebGL(Zr()),et.enableGLFiltering&&r.isSupported(et.textureSize)?new mb({tileSize:et.textureSize}):new tP}function kf(){return!Ef&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Ef=rP()),Ef}const nP=["filters","resizeFilter","src","crossOrigin","type"],vb=["cropX","cropY"];class tn extends dt{static getDefaults(){return F(F({},super.getDefaults()),tn.ownDefaults)}constructor(e,t){super(),B(this,"_lastScaleX",1),B(this,"_lastScaleY",1),B(this,"_filterScalingX",1),B(this,"_filterScalingY",1),this.filters=[],Object.assign(this,tn.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Ti()),this.setElement(typeof e=="string"?(this.canvas&&yn(this.canvas.getElement())||eo()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(tn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=kf(!1);t instanceof mb&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Dn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),F(F({},super.toObject([...vb,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,i=-this.height/2;let s=[],a=[],c="",u="";if(!t)return[];if(this.hasCrop()){const h=Ti();s.push('<clipPath id="imageCrop_'+h+`">
`,'	<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+h+')" '}if(this.imageSmoothing||(u=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(u).concat(c,`></image>
`)),this.stroke||this.strokeDashArray){const h=this.fill;this.fill=null,a=['	<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=h}return s=this.paintFirst!==Wt?s.concat(a,e):s.concat(e,a),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return fa(e,{crossOrigin:t,signal:n}).then(i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,s=n.y,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const c=vn(a),{width:u,height:h}=a;this._element=c,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,kf().applyFilters([e],a,u,h,this._element),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=vn({width:n,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);kf().applyFilters(e,this._originalElement,n,i,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,i=this._filterScalingY,s=this.width,a=this.height,c=Math.max(this.cropX,0),u=Math.max(this.cropY,0),h=t.naturalWidth||t.width,d=t.naturalHeight||t.height,g=c*n,p=u*i,v=Math.min(s*n,h-g),b=Math.min(a*i,d-p),S=-s/2,C=-a/2,T=Math.min(s,h/n-c),k=Math.min(a,d/i-u);t&&e.drawImage(t,g,p,v,b,S,C,T,k)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=Dy(this.preserveAspectRatio||""),t=this.width,n=this.height,i={width:t,height:n};let s,a=this._element.width,c=this._element.height,u=1,h=1,d=0,g=0,p=0,v=0;return!e||e.alignX===Or&&e.alignY===Or?(u=t/a,h=n/c):(e.meetOrSlice==="meet"&&(u=h=V1(this._element,i),s=(t-a*u)/2,e.alignX==="Min"&&(d=-s),e.alignX==="Max"&&(d=s),s=(n-c*h)/2,e.alignY==="Min"&&(g=-s),e.alignY==="Max"&&(g=s)),e.meetOrSlice==="slice"&&(u=h=H1(this._element,i),s=a-t/u,e.alignX==="Mid"&&(p=s/2),e.alignX==="Max"&&(p=s),s=c-n/h,e.alignY==="Mid"&&(v=s/2),e.alignY==="Max"&&(v=s),a=t/u,c=n/h)),{width:a,height:c,scaleX:u,scaleY:h,offsetLeft:d,offsetTop:g,cropX:p,cropY:v}}static fromObject(e,t){let{filters:n,resizeFilter:i,src:s,crossOrigin:a,type:c}=e,u=vt(e,nP);return Promise.all([fa(s,F(F({},t),{},{crossOrigin:a})),n&&ao(n,t),i&&ao([i],t),ga(u,t)]).then(h=>{let[d,g=[],[p]=[],v={}]=h;return new this(d,F(F({},u),{},{src:s,filters:g,resizeFilter:p},v))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return fa(e,{crossOrigin:t,signal:n}).then(s=>new this(s,i))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=Gn(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"],t,i).catch(s=>(Si("log","Unable to parse Image",s),null))}}B(tn,"type","Image"),B(tn,"cacheProperties",[...Yn,...vb]),B(tn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),B(tn,"CSS_CANVAS","canvas-img"),B(tn,"ATTRIBUTE_NAMES",[...Oi,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),le.setClass(tn),le.setSVGClass(tn),sl(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const yb=wy,bb=r=>function(e,t,n){const{points:i,pathOffset:s}=n;return new Y(i[r]).subtract(s).transform(It(n.getViewportTransform(),n.calcTransformMatrix()))},wb=(r,e,t,n)=>{const{target:i,pointIndex:s}=e,a=i,c=Un(new Y(t,n),void 0,a.calcOwnMatrix());return a.points[s]=c.add(a.pathOffset),a.setDimensions(),!0},_b=(r,e)=>function(t,n,i,s){const a=n.target,c=new Y(a.points[(r>0?r:a.points.length)-1]),u=c.subtract(a.pathOffset).transform(a.calcOwnMatrix()),h=e(t,F(F({},n),{},{pointIndex:r}),i,s),d=c.subtract(a.pathOffset).transform(a.calcOwnMatrix()).subtract(u);return a.left-=d.x,a.top-=d.y,h},Sb=r=>ki(yb,_b(r,wb)),Of=(r,e,t)=>{const{path:n,pathOffset:i}=r,s=n[e];return new Y(s[t]-i.x,s[t+1]-i.y).transform(It(r.getViewportTransform(),r.calcTransformMatrix()))};function iP(r,e,t){const{commandIndex:n,pointIndex:i}=this;return Of(t,n,i)}function sP(r,e,t,n){const{target:i}=e,{commandIndex:s,pointIndex:a}=this,c=((u,h,d,g,p)=>{const{path:v,pathOffset:b}=u,S=v[(g>0?g:v.length)-1],C=new Y(S[p],S[p+1]),T=C.subtract(b).transform(u.calcOwnMatrix()),k=Un(new Y(h,d),void 0,u.calcOwnMatrix());v[g][p]=k.x+b.x,v[g][p+1]=k.y+b.y,u.setDimensions();const A=C.subtract(u.pathOffset).transform(u.calcOwnMatrix()).subtract(T);return u.left-=A.x,u.top-=A.y,u.set("dirty",!0),!0})(i,t,n,s,a);return Xd(this.actionName,F(F({},Gd(r,e,t,n)),{},{commandIndex:s,pointIndex:a})),c}class xb extends St{constructor(e){super(e)}render(e,t,n,i,s){const a=F(F({},i),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,n,a,s)}}class oP extends xb{constructor(e){super(e)}render(e,t,n,i,s){const{path:a}=s,{commandIndex:c,pointIndex:u,connectToCommandIndex:h,connectToPointIndex:d}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[g]=a[c],p=Of(s,h,d);if(g==="Q"){const v=Of(s,c,u+2);e.moveTo(v.x,v.y),e.lineTo(t,n)}else e.moveTo(t,n);e.lineTo(p.x,p.y),e.stroke(),e.restore(),super.render(e,t,n,i,s)}}const kl=(r,e,t,n,i,s)=>new(t?oP:xb)(F(F({commandIndex:r,pointIndex:e,actionName:"modifyPath",positionHandler:iP,actionHandler:sP,connectToCommandIndex:i,connectToPointIndex:s},n),t?n.controlPointStyle:n.pointStyle));var hr=Object.freeze({__proto__:null,changeWidth:of,createObjectDefaultControls:hf,createPathControls:function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};let n="M";return r.path.forEach((i,s)=>{const a=i[0];switch(a!=="Z"&&(t["c_".concat(s,"_").concat(a)]=kl(s,i.length-2,!1,e)),a){case"C":t["c_".concat(s,"_C_CP_1")]=kl(s,1,!0,e,s-1,(c=>c==="C"?5:c==="Q"?3:1)(n)),t["c_".concat(s,"_C_CP_2")]=kl(s,3,!0,e,s,5);break;case"Q":t["c_".concat(s,"_Q_CP_1")]=kl(s,1,!0,e,s,3)}n=a}),t},createPolyActionHandler:Sb,createPolyControls:function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};for(let n=0;n<(typeof r=="number"?r:r.points.length);n++)t["p".concat(n)]=new St(F({actionName:yb,positionHandler:bb(n),actionHandler:Sb(n)},e));return t},createPolyPositionHandler:bb,createResizeControls:b1,createTextboxDefaultControls:w1,dragHandler:Gy,factoryPolyActionHandler:_b,getLocalPoint:il,polyActionHandler:wb,renderCircleControl:a1,renderSquareControl:c1,rotationStyleHandler:l1,rotationWithSnapping:u1,scaleCursorStyleHandler:uo,scaleOrSkewActionName:wa,scaleSkewCursorStyleHandler:ls,scalingEqually:ba,scalingX:f1,scalingXOrSkewingY:lf,scalingY:g1,scalingYOrSkewingX:uf,skewCursorStyleHandler:p1,skewHandlerX:v1,skewHandlerY:y1,wrapWithFireEvent:ki,wrapWithFixedAnchor:cs});const Ol=r=>r.webgl!==void 0,Af="precision highp float",aP=`
    `.concat(Af,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),cP=["type"],lP=["type"],uP=new RegExp(Af,"g");class Ut{get type(){return this.constructor.type}constructor(){let e=vt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},cP);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return aP}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=Dn();i!=="highp"&&(t=t.replace(uP,Af.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),a=e.createShader(e.FRAGMENT_SHADER),c=e.createProgram();if(!s||!a||!c)throw new Pn("Vertex, fragment shader or program creation error");if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Pn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Pn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.attachShader(c,s),e.attachShader(c,a),e.linkProgram(c),!e.getProgramParameter(c,e.LINK_STATUS))throw new Pn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(c)));const u=this.getUniformLocations(e,c)||{};return u.uStepW=e.getUniformLocation(c,"uStepW"),u.uStepH=e.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:this.getAttributeLocations(e,c),uniformLocations:u}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,i={};for(let s=0;s<n.length;s++)i[n[s]]=e.getUniformLocation(t,n[s]);return i}sendAttributeData(e,t,n){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Ol(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,i=vn({width:t,height:n});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return F({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(vt(e,lP))}}B(Ut,"type","BaseFilter"),B(Ut,"uniformLocations",[]);const hP={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Al extends Ut{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(hP[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new ut(this.color).getSource(),i=this.alpha,s=n[0]*i,a=n[1]*i,c=n[2]*i,u=1-i;for(let h=0;h<t.length;h+=4){const d=t[h],g=t[h+1],p=t[h+2];let v,b,S;switch(this.mode){case"multiply":v=d*s/255,b=g*a/255,S=p*c/255;break;case"screen":v=255-(255-d)*(255-s)/255,b=255-(255-g)*(255-a)/255,S=255-(255-p)*(255-c)/255;break;case"add":v=d+s,b=g+a,S=p+c;break;case"difference":v=Math.abs(d-s),b=Math.abs(g-a),S=Math.abs(p-c);break;case"subtract":v=d-s,b=g-a,S=p-c;break;case"darken":v=Math.min(d,s),b=Math.min(g,a),S=Math.min(p,c);break;case"lighten":v=Math.max(d,s),b=Math.max(g,a),S=Math.max(p,c);break;case"overlay":v=s<128?2*d*s/255:255-2*(255-d)*(255-s)/255,b=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,S=c<128?2*p*c/255:255-2*(255-p)*(255-c)/255;break;case"exclusion":v=s+d-2*s*d/255,b=a+g-2*a*g/255,S=c+p-2*c*p/255;break;case"tint":v=s+d*u,b=a+g*u,S=c+p*u}t[h]=v,t[h+1]=b,t[h+2]=S}}sendUniformData(e,t){const n=new ut(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}B(Al,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),B(Al,"type","BlendColor"),B(Al,"uniformLocations",["uColor"]),le.setClass(Al);const dP={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},fP=["type","image"];class Il extends Ut{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return dP[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:i},filterBackend:{resources:s}}=e;const a=this.image;s.blendImage||(s.blendImage=Zr());const c=s.blendImage,u=c.getContext("2d");c.width!==n||c.height!==i?(c.width=n,c.height=i):u.clearRect(0,0,n,i),u.setTransform(a.scaleX,0,0,a.scaleY,a.left,a.top),u.drawImage(a.getElement(),0,0,n,i);const h=u.getImageData(0,0,n,i).data;for(let d=0;d<t.length;d+=4){const g=t[d],p=t[d+1],v=t[d+2],b=t[d+3],S=h[d],C=h[d+1],T=h[d+2],k=h[d+3];switch(this.mode){case"multiply":t[d]=g*S/255,t[d+1]=p*C/255,t[d+2]=v*T/255,t[d+3]=b*k/255;break;case"mask":t[d+3]=k}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return F(F({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:i}=e,s=vt(e,fP);return tn.fromObject(i,t).then(a=>new this(F(F({},s),{},{image:a})))}}B(Il,"type","BlendImage"),B(Il,"defaults",{mode:"multiply",alpha:1}),B(Il,"uniformLocations",["uTransformMatrix","uImage"]),le.setClass(Il);class Ml extends Ut{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Ol(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:i}}=e;const{width:s,height:a}=n;i.blurLayer1||(i.blurLayer1=Zr(),i.blurLayer2=Zr());const c=i.blurLayer1,u=i.blurLayer2;c.width===s&&c.height===a||(u.width=c.width=s,u.height=c.height=a);const h=c.getContext("2d"),d=u.getContext("2d"),g=15,p=.06*this.blur*.5;let v,b,S,C;for(h.putImageData(n,0,0),d.clearRect(0,0,s,a),C=-15;C<=g;C++)v=(Math.random()-.5)/4,b=C/g,S=p*b*s+v,d.globalAlpha=1-Math.abs(b),d.drawImage(c,S,v),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);for(C=-15;C<=g;C++)v=(Math.random()-.5)/4,b=C/g,S=p*b*a+v,d.globalAlpha=1-Math.abs(b),d.drawImage(c,v,S),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);t.drawImage(c,0,0);const T=t.getImageData(0,0,c.width,c.height);return h.globalAlpha=1,h.clearRect(0,0,c.width,c.height),T}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}}B(Ml,"type","Blur"),B(Ml,"defaults",{blur:0}),B(Ml,"uniformLocations",["uDelta"]),le.setClass(Ml);class Pl extends Ut{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=n,t[i+1]+=n,t[i+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}B(Pl,"type","Brightness"),B(Pl,"defaults",{brightness:0}),B(Pl,"uniformLocations",["uBrightness"]),le.setClass(Pl);const Cb={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class po extends Ut{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,i=this.colorsOnly;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2];if(t[s]=a*n[0]+c*n[1]+u*n[2]+255*n[4],t[s+1]=a*n[5]+c*n[6]+u*n[7]+255*n[9],t[s+2]=a*n[10]+c*n[11]+u*n[12]+255*n[14],!i){const h=t[s+3];t[s]+=h*n[3],t[s+1]+=h*n[8],t[s+2]+=h*n[13],t[s+3]=a*n[15]+c*n[16]+u*n[17]+h*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],s=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}toObject(){return F(F({},super.toObject()),{},{matrix:[...this.matrix]})}}function gs(r,e){var t;const n=(B(t=class extends po{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),B(t,"defaults",{colorsOnly:!1,matrix:e}),t);return le.setClass(n,r),n}B(po,"type","ColorMatrix"),B(po,"defaults",Cb),B(po,"uniformLocations",["uColorMatrix","uConstants"]),le.setClass(po),gs("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),gs("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),gs("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),gs("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),gs("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),gs("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),gs("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Tb extends Ut{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ol(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>le.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}B(Tb,"type","Composed"),le.setClass(Tb);class Dl extends Ut{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),i=259*(n+255)/(255*(259-n));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}B(Dl,"type","Contrast"),B(Dl,"defaults",{contrast:0}),B(Dl,"uniformLocations",["uContrast"]),le.setClass(Dl);const gP={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Rl extends Ut{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return gP[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),a=Math.floor(s/2),c=t.width,u=t.height,h=e.ctx.createImageData(c,u),d=h.data,g=this.opaque?1:0;let p,v,b,S,C,T,k,A,M,R,N,$,V;for(N=0;N<u;N++)for(R=0;R<c;R++){for(C=4*(N*c+R),p=0,v=0,b=0,S=0,V=0;V<s;V++)for($=0;$<s;$++)k=N+V-a,T=R+$-a,k<0||k>=u||T<0||T>=c||(A=4*(k*c+T),M=i[V*s+$],p+=n[A]*M,v+=n[A+1]*M,b+=n[A+2]*M,g||(S+=n[A+3]*M));d[C]=p,d[C+1]=v,d[C+2]=b,d[C+3]=g?n[C+3]:S}e.imageData=h}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return F(F({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}B(Rl,"type","Convolute"),B(Rl,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),B(Rl,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),le.setClass(Rl);const Eb="Gamma";class jl extends Ut{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,i=1/n[0],s=1/n[1],a=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const c=this.rgbValues;for(let u=0;u<256;u++)c.r[u]=255*Math.pow(u/255,i),c.g[u]=255*Math.pow(u/255,s),c.b[u]=255*Math.pow(u/255,a);for(let u=0;u<t.length;u+=4)t[u]=c.r[t[u]],t[u+1]=c.g[t[u+1]],t[u+2]=c.b[t[u+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Eb,gamma:this.gamma.concat()}}}B(jl,"type",Eb),B(jl,"defaults",{gamma:[1,1,1]}),B(jl,"uniformLocations",["uGamma"]),le.setClass(jl);const pP={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Ll extends Ut{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],c=t[i+2];switch(this.mode){case"average":n=(s+a+c)/3;break;case"lightness":n=(Math.min(s,a,c)+Math.max(s,a,c))/2;break;case"luminosity":n=.21*s+.72*a+.07*c}t[i+2]=t[i+1]=t[i]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return pP[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}B(Ll,"type","Grayscale"),B(Ll,"defaults",{mode:"average"}),B(Ll,"uniformLocations",["uMode"]),le.setClass(Ll);const mP=F(F({},Cb),{},{rotation:0});class If extends po{calculateMatrix(){const e=this.rotation*Math.PI,t=pn(e),n=mn(e),i=1/3,s=Math.sqrt(i)*n,a=1-t;this.matrix=[t+a/3,i*a-s,i*a+s,0,0,i*a+s,t+i*a,i*a-s,0,0,i*a-s,i*a+s,t+i*a,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}B(If,"type","HueRotation"),B(If,"defaults",mP),le.setClass(If);class Fl extends Ut{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}B(Fl,"type","Invert"),B(Fl,"defaults",{alpha:!1,invert:!0}),B(Fl,"uniformLocations",["uInvert","uAlpha"]),le.setClass(Fl);class Nl extends Ut{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*n;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}B(Nl,"type","Noise"),B(Nl,"defaults",{noise:0}),B(Nl,"uniformLocations",["uNoise","uSeed"]),le.setClass(Nl);class Bl extends Ut{applyTo2d(e){let{imageData:{data:t,width:n,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let a=0;a<n;a+=this.blocksize){const c=4*s*n+4*a,u=t[c],h=t[c+1],d=t[c+2],g=t[c+3];for(let p=s;p<Math.min(s+this.blocksize,i);p++)for(let v=a;v<Math.min(a+this.blocksize,n);v++){const b=4*p*n+4*v;t[b]=u,t[b+1]=h,t[b+2]=d,t[b+3]=g}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}B(Bl,"type","Pixelate"),B(Bl,"defaults",{blocksize:4}),B(Bl,"uniformLocations",["uBlocksize"]),le.setClass(Bl);class Vl extends Ut{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,i=new ut(this.color).getSource(),s=[i[0]-n,i[1]-n,i[2]-n],a=[i[0]+n,i[1]+n,i[2]+n];for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];u>s[0]&&h>s[1]&&d>s[2]&&u<a[0]&&h<a[1]&&d<a[2]&&(t[c+3]=0)}}sendUniformData(e,t){const n=new ut(this.color).getSource(),i=this.distance,s=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],a=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,a)}}B(Vl,"type","RemoveColor"),B(Vl,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),B(Vl,"uniformLocations",["uLow","uHigh"]),le.setClass(Vl);class Hl extends Ut{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let s=1;s<=n;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ol(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const s=t.width,a=t.height,c=Math.round(s*n),u=Math.round(a*i);let h;h=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,a,c,u):this.resizeType==="hermite"?this.hermiteFastResize(e,s,a,c,u):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,a,c,u):this.resizeType==="lanczos"?this.lanczosResize(e,s,a,c,u):new ImageData(c,u),e.imageData=h}sliceByTwo(e,t,n,i,s){const a=e.imageData,c=.5;let u=!1,h=!1,d=t*c,g=n*c;const p=e.filterBackend.resources;let v=0,b=0;const S=t;let C=0;p.sliceByTwo||(p.sliceByTwo=Zr());const T=p.sliceByTwo;(T.width<1.5*t||T.height<n)&&(T.width=1.5*t,T.height=n);const k=T.getContext("2d");for(k.clearRect(0,0,1.5*t,n),k.putImageData(a,0,0),i=Math.floor(i),s=Math.floor(s);!u||!h;)t=d,n=g,i<Math.floor(d*c)?d=Math.floor(d*c):(d=i,u=!0),s<Math.floor(g*c)?g=Math.floor(g*c):(g=s,h=!0),k.drawImage(T,v,b,t,n,S,C,d,g),v=S,b=C,C+=g;return k.getImageData(v,b,i,s)}lanczosResize(e,t,n,i,s){const a=e.imageData.data,c=e.ctx.createImageData(i,s),u=c.data,h=this.lanczosCreate(this.lanczosLobes),d=this.rcpScaleX,g=this.rcpScaleY,p=2/this.rcpScaleX,v=2/this.rcpScaleY,b=Math.ceil(d*this.lanczosLobes/2),S=Math.ceil(g*this.lanczosLobes/2),C={},T={x:0,y:0},k={x:0,y:0};return function A(M){let R,N,$,V,G,X,J,q,Z,ae,ye;for(T.x=(M+.5)*d,k.x=Math.floor(T.x),R=0;R<s;R++){for(T.y=(R+.5)*g,k.y=Math.floor(T.y),G=0,X=0,J=0,q=0,Z=0,N=k.x-b;N<=k.x+b;N++)if(!(N<0||N>=t)){ae=Math.floor(1e3*Math.abs(N-T.x)),C[ae]||(C[ae]={});for(let ee=k.y-S;ee<=k.y+S;ee++)ee<0||ee>=n||(ye=Math.floor(1e3*Math.abs(ee-T.y)),C[ae][ye]||(C[ae][ye]=h(Math.sqrt(Math.pow(ae*p,2)+Math.pow(ye*v,2))/1e3)),$=C[ae][ye],$>0&&(V=4*(ee*t+N),G+=$,X+=$*a[V],J+=$*a[V+1],q+=$*a[V+2],Z+=$*a[V+3]))}V=4*(R*i+M),u[V]=X/G,u[V+1]=J/G,u[V+2]=q/G,u[V+3]=Z/G}return++M<i?A(M):c}(0)}bilinearFiltering(e,t,n,i,s){let a,c,u,h,d,g,p,v,b,S,C,T,k,A=0;const M=this.rcpScaleX,R=this.rcpScaleY,N=4*(t-1),$=e.imageData.data,V=e.ctx.createImageData(i,s),G=V.data;for(p=0;p<s;p++)for(v=0;v<i;v++)for(d=Math.floor(M*v),g=Math.floor(R*p),b=M*v-d,S=R*p-g,k=4*(g*t+d),C=0;C<4;C++)a=$[k+C],c=$[k+4+C],u=$[k+N+C],h=$[k+N+4+C],T=a*(1-b)*(1-S)+c*b*(1-S)+u*S*(1-b)+h*b*S,G[A++]=T;return V}hermiteFastResize(e,t,n,i,s){const a=this.rcpScaleX,c=this.rcpScaleY,u=Math.ceil(a/2),h=Math.ceil(c/2),d=e.imageData.data,g=e.ctx.createImageData(i,s),p=g.data;for(let v=0;v<s;v++)for(let b=0;b<i;b++){const S=4*(b+v*i);let C=0,T=0,k=0,A=0,M=0,R=0,N=0;const $=(v+.5)*c;for(let V=Math.floor(v*c);V<(v+1)*c;V++){const G=Math.abs($-(V+.5))/h,X=(b+.5)*a,J=G*G;for(let q=Math.floor(b*a);q<(b+1)*a;q++){let Z=Math.abs(X-(q+.5))/u;const ae=Math.sqrt(J+Z*Z);ae>1&&ae<-1||(C=2*ae*ae*ae-3*ae*ae+1,C>0&&(Z=4*(q+V*t),N+=C*d[Z+3],k+=C,d[Z+3]<255&&(C=C*d[Z+3]/250),A+=C*d[Z],M+=C*d[Z+1],R+=C*d[Z+2],T+=C))}}p[S]=A/T,p[S+1]=M/T,p[S+2]=R/T,p[S+3]=N/k}return g}}B(Hl,"type","Resize"),B(Hl,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),B(Hl,"uniformLocations",["uDelta","uTaps"]),le.setClass(Hl);class zl extends Ut{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],c=t[i+2],u=Math.max(s,a,c);t[i]+=u!==s?(u-s)*n:0,t[i+1]+=u!==a?(u-a)*n:0,t[i+2]+=u!==c?(u-c)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}B(zl,"type","Saturation"),B(zl,"defaults",{saturation:0}),B(zl,"uniformLocations",["uSaturation"]),le.setClass(zl);class Wl extends Ut{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],c=t[i+2],u=Math.max(s,a,c),h=(s+a+c)/3,d=2*Math.abs(u-h)/255*n;t[i]+=u!==s?(u-s)*d:0,t[i+1]+=u!==a?(u-a)*d:0,t[i+2]+=u!==c?(u-c)*d:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}B(Wl,"type","Vibrance"),B(Wl,"defaults",{vibrance:0}),B(Wl,"uniformLocations",["uVibrance"]),le.setClass(Wl);class kb{___eventListeners;___activeObjects;constructor(){this.___activeObjects=[],this.___eventListeners={}}pauseEventListeners(){this.___eventListeners=this.__eventListeners,this.__eventListeners={};const e=this.getActiveObjects();this.discardActiveObject(),this.___activeObjects=e}resumeEventListeners(){this.__eventListeners=this.___eventListeners,this.___eventListeners={};const e=this.___activeObjects;if(!e.length)return this.requestRenderAll(),!1;if(e.length===1)this.setActiveObject(e[0]);else{const t=new Ln(e);this.setActiveObject(t)}this.requestRenderAll()}}class ps extends Ht{isSelected=!1;text;tScale;display;id;backgroundColor;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default",fontSize:16,fontFamily:"Arial",fontColor:"#ffffff",textAlign:"center"};static type="Text";constructor(e){super(e),Object.assign(this,ps.ownDefaults),this.id=e.id,this.tScale=e.tScale,this.display=e.display,this.text=e.text||"",this.backgroundColor=e.backgroundColor||"transparent"}static createControls(){return{controls:Mf()}}static getDefaults(){return{...super.getDefaults(),...ps.ownDefaults}}setSelected(e){this.isSelected=e,this.set({dirty:!0})}_render(e){super._render(e),this.updateSelected(e)}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,6),e.lineWidth=2,e.strokeStyle="rgba(0, 216, 214,1.0)",e.stroke(),e.restore())}}function Qn(r,e,t,n,i){r.save(),r.translate(e,t),r.rotate(Q1.degreesToRadians(90+i.angle)),r.beginPath(),r.lineWidth=4,r.lineCap="round",r.strokeStyle="#dfe2e8",r.moveTo(-6,0),r.lineTo(6,0),r.stroke(),r.restore()}function Mf(){return{mr:new St({x:.5,y:0,actionHandler:Ea,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing",render:Qn}),ml:new St({x:-.5,y:0,actionHandler:Ea,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing",render:Qn})}}const Ea=hr.wrapWithFireEvent("resizing",hr.wrapWithFixedAnchor((r,e,t,n)=>{const i=hr.getLocalPoint(e,e.originX,e.originY,t,n);if(vP(e.originX)||bP(e.originX)&&i.x<0||yP(e.originX)&&i.x>0){const s=e.target,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=wP(e)?2:1,u=s.width,h=Math.ceil(Math.abs(i.x*c/s.scaleX)-a);if(e.corner==="ml"){const g=u-h;if(s.left+g<0)return s.set("width",s.width+s.left),!0}return s.set("width",Math.max(h,0)),u!==s.width}return!1})),Ob={left:-.5,top:-.5,center:0,bottom:.5,right:.5},$e=r=>typeof r=="string"?Ob[r]:r-.5,vP=r=>$e(r)===$e("center"),yP=r=>$e(r)===$e("left"),bP=r=>$e(r)===$e("right");function wP(r){return $e(r.originX)===$e("center")&&$e(r.originY)===$e("center")}le.setClass(ps,"Text");class rn extends Ht{static type="Transition";id;duration;fromId;toId;static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0, 0, 0, 0.5)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};isSelected=!1;constructor(e){super(e),this.id=e.id,this.fromId=e.fromId,this.toId=e.toId,Object.assign(this,{duration:e.duration,fromId:e.fromId,toId:e.toId,kind:e.kind,tScale:e.tScale,strokeDashArray:e.strokeDashArray||[],isSelected:!1,centeredScaling:!0,strokeWidth:0}),Object.assign(this,rn.ownDefaults)}static createControls(){return{controls:_P()}}static getDefaults(){return{...super.getDefaults(),...rn.ownDefaults}}updateCoords(){}_render(e){super._render(e),this.updateSelected(e)}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,this.strokeDashArray&&e.setLineDash(this.strokeDashArray),e.strokeStyle=this.isSelected?"rgba(255, 255, 255,1.0)":"rgba(255, 255, 255,0.15)",e.stroke(),e.restore()}}le.setClass(rn,"Transition");const _P=()=>({mr:new St({x:.5,y:0,actionHandler:Ab,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing",render:Qn}),ml:new St({x:-.5,y:0,actionHandler:Ab,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing",render:Qn})});le.setClass(rn,"Transition");const{wrapWithFireEvent:SP,getLocalPoint:xP}=hr,Pf="center",CP="left",TP="right";function EP(r){return(e,t,n,i)=>{const{target:s,originX:a,originY:c}=t,u=s.getRelativeCenterPoint(),h=s.translateToOriginPoint(u,a,c),d=r(e,t,n,i);return s.setPositionByOrigin(h,a,c),d}}const kP=(r,e,t,n)=>{const i=xP(e,e.originX,e.originY,t,n);if($e(e.originX)===$e(Pf)||$e(e.originX)===$e(TP)&&i.x<0||$e(e.originX)===$e(CP)&&i.x>0){const{target:s}=e,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=OP(e)?2:1,u=s.width,h=Math.ceil(Math.abs(i.x*c/s.scaleX)-a),d=pi(h,s.tScale);return d>=1500||d<500?!1:(s.set("width",Math.max(h,0)),s.set("duration",d),s.setCoords(),s.canvas&&s.canvas.renderAll(),u!==s.width)}return!1};function OP(r){return $e(r.originX)===$e(Pf)&&$e(r.originY)===$e(Pf)}const Ab=SP("resizing",EP(kP));class mo extends Ht{static type="Placeholder";guideItemId;distXToActCenter;trackItemType;defaultPos;draggedObject=null;for;id;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",strokeWidth:0,fill:"rgba(255, 211, 42, 0.1)",stroke:"rgba(255, 211, 42, 1.0)",selectable:!1,borderOpacityWhenMoving:1,hoverCursor:"default",strokeDashArray:[5,1],evented:!1};constructor(e){super(e),this.id=e.id,this.for=e.for,Object.assign(this,mo.ownDefaults)}static getDefaults(){return{...super.getDefaults(),...mo.ownDefaults}}_render(e){super._render(e),this.updateSelected(e)}updateSelected(e){e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,this.strokeDashArray&&e.setLineDash(this.strokeDashArray),e.strokeStyle="rgba(0, 216, 214,1.0)",e.stroke(),e.restore()}}le.setClass(mo,"Placeholder");const AP={top:{top:35,guideHeight:2,bottom:3},center:{top:3,guideHeight:2,bottom:3},bottom:{top:3,guideHeight:2,bottom:35}},ka="rgba(0, 216, 214, 1.0)",Df=(r,e,t)=>new Ht({top:r,left:0,strokeWidth:0,fill:"transparent",selectable:!0,height:t,width:e});class Oa extends Qr{static type="Helper";static defaultSettings={selectable:!1,evented:!1};static ownDefaults={...Oa.defaultSettings};guide;topGuide;bottomGuide;id;metadata={};tScale;kind;constructor(e){const t=AP[e.kind],n=Df(0,e.width,t.top),i=Df(t.top,e.width,t.guideHeight),s=Df(t.top+t.guideHeight,e.width,t.bottom);super([n,i,s],{...Oa.defaultSettings,...e}),this.topGuide=n,this.guide=i,this.bottomGuide=s,this.id=e.id,this.metadata=e.metadata??{},this.tScale=e.tScale,this.kind=e.kind}static getDefaults(){return{...super.getDefaults(),...Oa.defaultSettings}}updateCoords(e){this.scaleToWidth(e),this.set("scaleY",1)}setSelected(e){this.guide.set("fill",e?ka:"transparent")}}const vo=Oa;le.setClass(vo,"Helper");class Ii extends Ht{static ownDefaults={selectable:!1,evented:!1,strokeWidth:0,stroke:"transparent"};static type="Track";id;accepts;metadata;items;borderColor="transparent";stroke="transparent";strokeWidth=0;constructor(e){super(e),Object.assign(this,Ii.ownDefaults),this.id=e.id,this.accepts=e.accepts||["audio","video","image","text"],this.items=e.items||[],this.metadata=e.metadata}static getDefaults(){return{...super.getDefaults(),...Ii.ownDefaults}}updateCoords(e){this.width=e}}le.setClass(Ii,"Track");class Ul extends Ht{isSelected;tScale;display;id;src;itemType;static ownDefaults={rx:8,ry:8,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",fill:"#27272a"};static type="Image";constructor(e){super(e),this.itemType="image",this.isSelected=!1,Object.assign(this,Ul.ownDefaults),this.id=e.id,this.src=e.src,this.display=e.display,this.tScale=e.tScale}static createControls(){return{controls:Mf()}}static getDefaults(){return{...super.getDefaults(),...Ul.ownDefaults}}_render(e){super._render(e),this.updateSelected(e)}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,e.strokeStyle=ka,e.stroke(),e.restore())}}const $l=Ul;le.setClass($l,"Image");class ms extends Ht{id;tScale;isSelected=!1;display;trim;static type="Video";static defaultProps={objectCaching:!1,rx:8,ry:8,fill:"#27272a"};constructor(e){super(Object.assign({},ms.defaultProps,e)),this.id=e.id,this.tScale=e.tScale,this.display=e.display,this.trim=e.trim}static createControls(){return{controls:Ib()}}_render(e){super._render(e),this.updateSelected(e)}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,e.strokeStyle=ka,e.stroke(),e.restore())}}le.setClass(ms,"Video");const Ib=()=>({mr:new St({x:.5,y:0,render:Qn,actionHandler:Mb,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new St({x:-.5,y:0,render:Qn,actionHandler:Mb,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:IP,getLocalPoint:MP}=hr,PP=(r,e,t,n)=>{const i=MP(e,e.originX,e.originY,t,n);if($e(e.originX)===$e("center")||$e(e.originX)===$e("right")&&i.x<0||$e(e.originX)===$e("left")&&i.x>0){const{target:s}=e;return s.width!==s.width}return!1};function Rf(r){return(e,t,n,i)=>{const{target:s,originX:a,originY:c}=t,u=s.getRelativeCenterPoint(),h=s.translateToOriginPoint(u,a,c),d=r(e,t,n,i);return s.setPositionByOrigin(h,a,c),d}}const Mb=IP("resizing",Rf(PP));class ei extends Ht{id;itemType="audio";isSelected=!1;trim;src;tScale;display;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default"};static type="Audio";constructor(e){super({...ei.getDefaults(),...e}),this.id=e.id,this.tScale=e.tScale,this.display=e.display,this.trim=e.trim,this.src=e.src}static getDefaults(){return{...super.getDefaults(),...ei.ownDefaults}}static createControls(){return{controls:Pb()}}setSelected(e){this.isSelected=e,this.set({dirty:!0})}_render(e){super._render(e),this.updateSelected(e)}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,ei.ownDefaults.rx),e.lineWidth=2,e.strokeStyle=ka,e.stroke(),e.restore())}}le.setClass(ei,"Audio");const Pb=()=>({mr:new St({x:.5,y:0,render:Qn,actionHandler:Db,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new St({x:-.5,y:0,render:Qn,actionHandler:Db,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:DP,getLocalPoint:RP}=hr,jP=(r,e,t,n)=>{const i=RP(e,e.originX,e.originY,t,n);if($e(e.originX)===$e("center")||$e(e.originX)===$e("right")&&i.x<0||$e(e.originX)===$e("left")&&i.x>0){const{target:s}=e,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=LP(e)?2:1,u=s.width,h=Math.ceil(Math.abs(i.x*c/s.scaleX)-a);if(e.corner==="mr"){const d=s.trim.to,g=h-u,p=pi(g,s.tScale),v=d+p;if(v>s.duration)return!1;s.set("width",Math.max(h,0)),s.trim.to=v}else{if(s.left<0)return!1;const d=u-h;if(s.left+d<0)return s.set("width",s.width+s.left),!0;const g=h-u,p=s.trim.from,v=pi(g,s.tScale),b=p-v;if(b<0)return!1;s.set("width",Math.max(h,0)),s.trim.from=b}return u!==s.width}return!1};function LP(r){return $e(r.originX)===$e("center")&&$e(r.originY)===$e("center")}const Db=DP("resizing",Rf(jP));class Aa extends Ht{static type="TransitionGuide";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0,0,0,0.85)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};tScale;duration=0;fromId;toId;itemType="none";isSelected=!1;id;constructor(e){super(e),Object.assign(this,Aa.ownDefaults),this.id=e.id}static createControls(){return{controls:Rb()}}static getDefaults(){return{...super.getDefaults(),...Aa.ownDefaults}}updateCoords(){const e=this.canvas;if(!e)return;const t=e.getObjects().find(s=>s.id===this.fromId);if(!t)return;const n=Rt(this.duration,this.tScale),i=t.left+t.width-n/2;this.set({width:n,left:i})}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M3 5.30359C3 3.93159 4.659 3.24359 5.629 4.21359L11.997 10.5826L10.583 11.9966L5 6.41359V17.5856L10.586 11.9996L10.583 11.9966L11.997 10.5826L12 10.5856L18.371 4.21459C19.341 3.24459 21 3.93159 21 5.30359V18.6956C21 20.0676 19.341 20.7556 18.371 19.7856L12 13.5L13.414 11.9996L19 17.5866V6.41359L13.414 11.9996L13.421 12.0056L12.006 13.4206L12 13.4136L5.629 19.7846C4.659 20.7546 3 20.0676 3 18.6956V5.30359Z");e.save(),e.translate(-12,-12),e.fillStyle="#ffffff",e.fill(t),e.restore()}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=1,e.strokeStyle="rgba(255, 255, 255,1.0)",e.stroke(),e.restore())}}function Rb(){return{mr:new St({x:.5,y:0,actionHandler:Ea,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing",render:jb}),ml:new St({x:-.5,y:0,actionHandler:Ea,cursorStyleHandler:hr.scaleSkewCursorStyleHandler,actionName:"resizing",render:jb})}}function jb(r,e,t,n,i){r.save(),r.translate(e,t),r.rotate(Q1.degreesToRadians(90+i.angle)),r.lineWidth=6,r.lineCap="round",r.strokeStyle="white",r.beginPath(),r.moveTo(-6,0),r.lineTo(6,0),r.stroke(),r.lineWidth=4,r.strokeStyle="black",r.beginPath(),r.moveTo(-6,0),r.lineTo(6,0),r.stroke(),r.restore()}class Ia extends Ht{static type="PreviewTrackItem";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",rx:4,ry:4};duration=0;fromId="";toId="";isSelected=!1;name;durationString;id;constructor(e){super(e),Object.assign(this,Ia.ownDefaults),this.id=e.id,this.name=e.name||"item",this.durationString="00:05",this.fill="#27272a"}static getDefaults(){return{...super.getDefaults(),...Ia.ownDefaults}}_render(e){e.save(),super._render(e),e.beginPath(),e.rect(-this.width/2,-this.height/2,this.width,this.height),e.clip(),this.drawTextIdentity(e),e.restore()}drawTextIdentity(e){e.font="600 12px 'Geist variable'",e.textAlign="left";const u=e.measureText(this.name).width,h=e.measureText(this.durationString).width,d=-this.height/2+4,g=-this.width/2,p=g+u+8*2+4,v=u+8*2;this.drawRoundedRect(e,g,d,v,20,4),e.fillStyle="#f4f4f5",e.fillText(this.name,g+8,d+12+2);const b=h+8*2;this.drawRoundedRect(e,p,d,b,20,4),e.fillStyle="#f4f4f5",e.fillText(this.durationString,p+8,d+12+2)}drawRoundedRect(e,t,n,i,s,a){e.fillStyle="rgba(0, 0, 0, 0.5)",e.roundRect?(e.beginPath(),e.roundRect(t,n,i,s,a),e.fill()):e.fillRect(t,n,i,s)}}function Lb(r,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{if(n!=="constructor"){const i=Object.getOwnPropertyDescriptor(t.prototype,n);i&&Object.defineProperty(r.prototype,n,i)}})})}const Yl=(r,e)=>{const t={x:r.size.width/2,y:r.size.height/2},n={x:e.width/2,y:e.height/2},i=t.x-n.x,s=t.y-n.y,a=Math.min(r.size.width/e.width,r.size.height/e.height);return{top:`${s}px`,left:`${i}px`,transform:`scale(${a})`}},Fb=r=>new Promise((e,t)=>{const n=new Audio;n.preload="auto",n.addEventListener("loadedmetadata",()=>{const i=n.duration*1e3;e({duration:i})}),n.addEventListener("error",i=>{t(i)}),n.src=r,n.crossOrigin="anonymous",n.load()}),Nb=r=>new Promise((e,t)=>{const n=new Image;console.warn("Consider updating CDN config for CORS issues?"),n.onload=()=>{const i=n.width,s=n.height;e({width:i,height:s})},n.onerror=i=>{t(i)},n.crossOrigin="anonymous",n.src=r}),Bb=r=>new Promise((e,t)=>{const n=document.createElement("video");n.preload="auto",n.addEventListener("loadedmetadata",()=>{const i=n.duration*1e3,s=n.videoWidth,a=n.videoHeight;e({duration:i,width:s,height:a})}),n.addEventListener("error",i=>{t(i)}),n.src=r,n.load()}),Ma=(r,e)=>{const t=document.createElement("div");Object.keys(e).forEach(i=>{i!=="height"&&(t.style[i]=e[i])}),document.body.appendChild(t),t.textContent=r,t.style.width=`${e.width}px`,t.style.fontSize=`${e.fontSize}px`;const n=getComputedStyle(t).height;return document.body.removeChild(t),parseFloat(n)},Sn=r=>Object.keys(r).reduce((e,t)=>{const{display:{to:n}}=r[t];return Math.max(e,n)},0),Vb=(r,e)=>{if(!r)return{from:0,to:e.duration};const{from:t,to:n}=r;return{from:t??0,to:n??e.duration}},Hb=(r,e)=>{const{duration:t,trim:n}=e,i=n?n.to-n.from:t||5e3,s={from:0,to:i};if(!r)return s;if(r.from!==void 0&&r.from<0)return console.error("'from' must be a non-negative number. Returning default display."),s;if(r.from!==void 0&&r.to===void 0)return{from:r.from,to:r.from+i};if(r.to!==void 0){if(r.to<0)return console.error("'to' must be a non-negative number. Returning default display."),s;if(r.to<r.from)return console.error("'to' must be greater than or equal to 'from'. Returning default display."),s}return r};function zb(r,e){return r.map(t=>{const n=t.items.filter(i=>!e.includes(i));return{...t,items:n}}).filter(t=>t.items.length>0)}const Wb=async(r,e)=>{const t=r.details,n=await Nb(t.src),i=Yl(e,n);return{id:r.id,type:"image",name:"",display:{from:e.origin||0,to:(e.origin||5e3)+5e3},details:{src:t.src||"",width:t.width||n.width||100,height:t.height||n.height||100,opacity:t.opacity??100,transform:i.transform,border:t.border||"none",borderRadius:t.borderRadius||"0",boxShadow:t.boxShadow||"none",top:i.top||"0px",left:i.left||"0px"},metadata:r.metadata||{}}},Ub=async(r,e)=>{const t=r.details.src,n=await Bb(t),i=Yl(e,{...n}),s=Vb(r.trim,{duration:n.duration}),a={width:n.width,height:n.height,duration:n.duration,src:t,volume:r.details.volume??100,top:r.details.top||i.top||"0px",left:r.details.left||i.left||"0px",text:r.details.text};return{...r,trim:s,type:"video",details:a,display:Hb(r?.display,{duration:n.duration,trim:s})}},$b=async r=>{const e=r.details,t=(await Fb(e.src)).duration,n=r?.display?.from??0;return{id:r.id,name:"",type:"audio",display:{from:n,to:n+t},trim:{from:0,to:t},details:{src:e.src,duration:t,volume:e.volume??100,text:e.text},metadata:{...r.metadata}}},FP=5e3,jf=async(r,e)=>{const t=r.id;await yv([{fontFamily:r.details.fontFamily??"",fontUrl:r.details.fontUrl??""}]);const n={fontFamily:r.details.fontFamily??"Arial",fontSize:r.details.fontSize??"16px",fontWeight:r.details.fontWeight??"normal",fontStyle:r.details.fontStyle??"normal",textDecoration:r.details.textDecoration??"none",textAlign:r.details.textAlign??"left",lineHeight:r.details.lineHeight??"normal",letterSpacing:r.details.letterSpacing??"normal",wordSpacing:r.details.wordSpacing??"normal",color:r.details.color??"#ffffff",backgroundColor:r.details.backgroundColor??"transparent",border:r.details.border??"none",textShadow:r.details.textShadow??"none",text:r.details.text??"",opacity:r.details.opacity??100,width:r.details.width??300,wordWrap:r.details.wordWrap??"normal",wordBreak:r.details.wordBreak??"normal",WebkitTextStrokeColor:r.details.WebkitTextStrokeColor??"#ffffff",WebkitTextStrokeWidth:r.details.WebkitTextStrokeWidth??"0px",top:r.details.top??"0px",left:r.details.left??"0px"},i=Ma(r.details.text??"",n),s=Yl(e,{width:n.width??0,height:i});return{id:t,name:"",type:"text",display:{from:0,to:FP},details:{...n,height:i,top:s.top,left:s.left,fontUrl:r.details.fontUrl,text:r.details.text??""},metadata:{}}},Yb=(r,e)=>{const t=r.display,n=Rt(t.from,e.tScale),i=Rt(t.to-t.from,e.tScale),s=le.getClass("Audio")||ei;return new s({width:i,height:42,top:10,left:n,id:r.id,display:t,text:r.details.text,trim:r.trim||{from:0,to:r.details.duration},duration:r.details.duration,src:r.details.src,tScale:e.tScale})},Xb=(r,e)=>{const t=Rt(r.display.from,e.tScale),n=Rt(r.details.duration||5e3,e.tScale),i=le.getClass("Image")||$l;return new i({width:n,height:42,id:r.id,src:r.details.src,tScale:e.tScale,top:10,left:t,display:r.display})},Gb=(r,e)=>{const t=Rt(r.trim.from,e.tScale),n=Rt(r.trim.to-r.trim.from,e.tScale),i=le.getClass("Video")||ms;return new i({width:n,height:42,id:r.id,tScale:e.tScale,fill:"#333333",top:10,left:t,display:r.trim,trim:r.trim,text:r.details.text})},qb=(r,e)=>{const t=r.display,n=Rt(t.from,e.tScale),i=Rt(t.to-t.from,e.tScale),s=le.getClass("Text")||ps;return new s({width:i,height:42,id:r.id,display:t,top:10,left:n,text:r.details.text,tScale:e.tScale})},Kb={video:42,image:42,audio:42,text:42,caption:42,template:42},Zb=(r={})=>{const e={...Kb,...r};return Object.fromEntries(Object.entries(e).filter(([,t])=>typeof t=="number"))};let Jb=class extends ei{static type="Audio";text;constructor(e){super(e),this.text=e.text??"Audio"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M8.24092 0C8.24092 2.51565 10.2795 4.55419 12.7951 4.55419C12.9677 4.55419 13.1331 4.62274 13.2552 4.74475C13.3772 4.86676 13.4457 5.03224 13.4457 5.20479C13.4457 5.37734 13.3772 5.54282 13.2552 5.66483C13.1331 5.78685 12.9677 5.85539 12.7951 5.85539C11.9218 5.85605 11.0594 5.66105 10.2713 5.28471C9.48319 4.90838 8.78942 4.36027 8.24092 3.68066V13.8794C8.24094 14.8271 7.91431 15.7458 7.31606 16.4808C6.71781 17.2157 5.88451 17.722 4.95657 17.9143C4.02863 18.1066 3.06276 17.9731 2.22172 17.5364C1.38067 17.0997 0.715856 16.3865 0.339286 15.5169C-0.0372842 14.6473 -0.10259 13.6744 0.154372 12.7622C0.411334 11.8501 0.974857 11.0544 1.74999 10.5092C2.52512 9.96403 3.46449 9.7027 4.40981 9.76924C5.35512 9.83579 6.24861 10.2261 6.93972 10.8745V0H8.24092ZM6.93972 13.8794C6.93972 13.1317 6.6427 12.4146 6.11398 11.8859C5.58527 11.3572 4.86818 11.0602 4.12046 11.0602C3.37275 11.0602 2.65566 11.3572 2.12694 11.8859C1.59823 12.4146 1.3012 13.1317 1.3012 13.8794C1.3012 14.6272 1.59823 15.3443 2.12694 15.873C2.65566 16.4017 3.37275 16.6987 4.12046 16.6987C4.86818 16.6987 5.58527 16.4017 6.11398 15.873C6.6427 15.3443 6.93972 14.6272 6.93972 13.8794Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,10),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,14),e.translate(10,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}};class Qb extends ms{static type="Video";text;constructor(e){super(e),this.text=e.text??"Video"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M16.5625 0.925L12.5 3.275V0.625L11.875 0H0.625L0 0.625V9.375L0.625 10H11.875L12.5 9.375V6.875L16.5625 9.2125L17.5 8.625V1.475L16.5625 0.925ZM11.25 8.75H1.25V1.25H11.25V8.75ZM16.25 7.5L12.5 5.375V4.725L16.25 2.5V7.5Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,14),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,10),e.translate(8,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}}class Lf extends ps{static type="Text";constructor(e){super(e),this.fill="#303030"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M6.23982 0.361968C6.18894 0.253743 6.10832 0.162234 6.00736 0.0981357C5.9064 0.034038 5.78929 0 5.6697 0C5.55012 0 5.433 0.034038 5.33204 0.0981357C5.23109 0.162234 5.15046 0.253743 5.09959 0.361968L0.0599035 11.0713C0.0246926 11.1462 0.00457285 11.2272 0.000693114 11.3099C-0.00318662 11.3925 0.00924959 11.4751 0.0372917 11.553C0.0939253 11.7102 0.210687 11.8384 0.361891 11.9095C0.513095 11.9806 0.686354 11.9888 0.843555 11.9322C1.00076 11.8755 1.12902 11.7588 1.20013 11.6075L2.51202 8.81998H8.82738L10.1393 11.6075C10.1745 11.6824 10.2241 11.7496 10.2853 11.8053C10.3465 11.861 10.418 11.9041 10.4958 11.9322C10.5737 11.9602 10.6563 11.9726 10.7389 11.9687C10.8216 11.9649 10.9026 11.9447 10.9775 11.9095C11.0524 11.8743 11.1196 11.8247 11.1753 11.7635C11.231 11.7023 11.2741 11.6308 11.3021 11.553C11.3302 11.4751 11.3426 11.3925 11.3387 11.3099C11.3348 11.2272 11.3147 11.1462 11.2795 11.0713L6.23982 0.361968ZM3.10498 7.56005L5.6697 2.11011L8.23443 7.56005H3.10498ZM15.1191 3.78029C14.1143 3.78029 13.3292 4.05354 12.7859 4.59294C12.6721 4.71153 12.6092 4.86987 12.6106 5.03419C12.6119 5.19851 12.6774 5.3558 12.7931 5.4725C12.9088 5.58921 13.0655 5.6561 13.2298 5.6589C13.3941 5.6617 13.553 5.60018 13.6726 5.48748C13.9718 5.19062 14.46 5.04021 15.1191 5.04021C16.1609 5.04021 17.009 5.74892 17.009 6.61511V6.86867C16.45 6.49465 15.7917 6.29663 15.1191 6.30013C13.382 6.30013 11.9693 7.57187 11.9693 9.13495C11.9693 10.698 13.382 11.9698 15.1191 11.9698C15.792 11.9727 16.4503 11.7739 17.009 11.3989C17.0168 11.566 17.0907 11.7231 17.2144 11.8357C17.3381 11.9483 17.5014 12.0071 17.6685 11.9993C17.8356 11.9915 17.9927 11.9176 18.1053 11.7939C18.2179 11.6702 18.2767 11.5069 18.2689 11.3398V6.61511C18.2689 5.05202 16.8562 3.78029 15.1191 3.78029ZM15.1191 10.7099C14.0773 10.7099 13.2292 10.0012 13.2292 9.13495C13.2292 8.26876 14.0773 7.56005 15.1191 7.56005C16.1609 7.56005 17.009 8.26876 17.009 9.13495C17.009 10.0012 16.1609 10.7099 15.1191 10.7099Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,12),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,12),e.translate(8,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}}let ew=class extends $l{static type="Image";text;constructor(e){super(e),this.text=e.text??"Image"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M1.55556 0H14.4444C15.3031 0 16 0.696889 16 1.55556V14.4444C16 14.857 15.8361 15.2527 15.5444 15.5444C15.2527 15.8361 14.857 16 14.4444 16H1.55556C1.143 16 0.747335 15.8361 0.455612 15.5444C0.163889 15.2527 0 14.857 0 14.4444V1.55556C0 0.696889 0.696889 0 1.55556 0ZM14.4444 1.33333H1.55556C1.49662 1.33333 1.4401 1.35675 1.39842 1.39842C1.35675 1.4401 1.33333 1.49662 1.33333 1.55556V14.4444C1.33333 14.5671 1.43289 14.6667 1.55556 14.6667H1.72444L10.456 5.93511C10.6004 5.79065 10.7719 5.67605 10.9607 5.59787C11.1494 5.51968 11.3517 5.47944 11.556 5.47944C11.7603 5.47944 11.9626 5.51968 12.1513 5.59787C12.3401 5.67605 12.5116 5.79065 12.656 5.93511L14.6667 7.94578V1.55556C14.6667 1.49662 14.6433 1.4401 14.6016 1.39842C14.5599 1.35675 14.5034 1.33333 14.4444 1.33333ZM14.6667 9.83111L11.7129 6.87733C11.6922 6.85664 11.6677 6.84022 11.6407 6.82902C11.6137 6.81781 11.5848 6.81205 11.5556 6.81205C11.5263 6.81205 11.4974 6.81781 11.4704 6.82902C11.4434 6.84022 11.4189 6.85664 11.3982 6.87733L3.60978 14.6667H14.4444C14.5034 14.6667 14.5599 14.6433 14.6016 14.6016C14.6433 14.5599 14.6667 14.5034 14.6667 14.4444V9.83111ZM4.88889 7.11111C4.29952 7.11111 3.73429 6.87699 3.31754 6.46024C2.90079 6.04349 2.66667 5.47826 2.66667 4.88889C2.66667 4.29952 2.90079 3.73429 3.31754 3.31754C3.73429 2.90079 4.29952 2.66667 4.88889 2.66667C5.47826 2.66667 6.04349 2.90079 6.46024 3.31754C6.87699 3.73429 7.11111 4.29952 7.11111 4.88889C7.11111 5.47826 6.87699 6.04349 6.46024 6.46024C6.04349 6.87699 5.47826 7.11111 4.88889 7.11111ZM4.88889 5.77778C5.12464 5.77778 5.35073 5.68413 5.51743 5.51743C5.68413 5.35073 5.77778 5.12464 5.77778 4.88889C5.77778 4.65314 5.68413 4.42705 5.51743 4.26035C5.35073 4.09365 5.12464 4 4.88889 4C4.65314 4 4.42705 4.09365 4.26035 4.26035C4.09365 4.42705 4 4.65314 4 4.88889C4 5.12464 4.09365 5.35073 4.26035 5.51743C4.42705 5.68413 4.65314 5.77778 4.88889 5.77778Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,12),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,12),e.translate(8,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}};class tw extends Ii{static type="Track";constructor(e){super(e),this.fill="#18181b"}_render(e){super._render(e);const t=new Path2D("M14.4444 13.3263H11.0667C12.5384 12.3991 13.6259 10.9716 14.1289 9.30644C14.632 7.64131 14.5169 5.85051 13.8048 4.26348C13.0927 2.67645 11.8314 1.39993 10.2531 0.668736C8.67478 -0.0624548 6.8855 -0.199136 5.21442 0.283835C3.54334 0.766806 2.10285 1.83695 1.15794 3.2974C0.213035 4.75785 -0.172743 6.51038 0.0715766 8.23261C0.315896 9.95484 1.17388 11.5309 2.4877 12.671C3.80151 13.811 5.4828 14.4383 7.22227 14.4374H14.4444C14.5918 14.4374 14.7331 14.3789 14.8373 14.2747C14.9415 14.1705 15 14.0292 15 13.8819C15 13.7345 14.9415 13.5932 14.8373 13.489C14.7331 13.3848 14.5918 13.3263 14.4444 13.3263ZM1.1112 7.21523C1.1112 6.00658 1.46961 4.82506 2.14111 3.8201C2.8126 2.81514 3.76702 2.03187 4.88367 1.56934C6.00032 1.10681 7.22905 0.985789 8.41449 1.22159C9.59992 1.45738 10.6888 2.03941 11.5435 2.89405C12.3981 3.7487 12.9801 4.83759 13.2159 6.02302C13.4517 7.20845 13.3307 8.43719 12.8682 9.55384C12.4056 10.6705 11.6224 11.6249 10.6174 12.2964C9.61244 12.9679 8.43093 13.3263 7.22227 13.3263C5.60208 13.3245 4.04878 12.68 2.90313 11.5344C1.75748 10.3887 1.11304 8.83542 1.1112 7.21523ZM7.22227 5.54858C7.55191 5.54858 7.87414 5.45083 8.14822 5.2677C8.4223 5.08456 8.63592 4.82426 8.76206 4.51972C8.88821 4.21518 8.92121 3.88007 8.85691 3.55677C8.7926 3.23347 8.63386 2.9365 8.40078 2.70342C8.16769 2.47033 7.87072 2.3116 7.54742 2.24729C7.22412 2.18298 6.88901 2.21599 6.58447 2.34213C6.27993 2.46828 6.01964 2.6819 5.8365 2.95598C5.65337 3.23006 5.55562 3.55229 5.55562 3.88192C5.55562 4.32395 5.73121 4.74787 6.04377 5.06043C6.35633 5.37298 6.78025 5.54858 7.22227 5.54858ZM7.22227 3.32637C7.33215 3.32637 7.43956 3.35895 7.53092 3.42C7.62228 3.48104 7.69349 3.56781 7.73554 3.66932C7.77759 3.77084 7.78859 3.88254 7.76715 3.9903C7.74572 4.09807 7.6928 4.19706 7.61511 4.27476C7.53741 4.35245 7.43842 4.40536 7.33066 4.4268C7.22289 4.44824 7.11119 4.43723 7.00967 4.39519C6.90816 4.35314 6.82139 4.28193 6.76035 4.19057C6.69931 4.09921 6.66672 3.9918 6.66672 3.88192C6.66672 3.73458 6.72525 3.59327 6.82944 3.48909C6.93363 3.3849 7.07493 3.32637 7.22227 3.32637ZM8.88893 10.5485C8.88893 10.2189 8.79118 9.89668 8.60805 9.6226C8.42491 9.34852 8.16462 9.1349 7.86008 9.00875C7.55553 8.88261 7.22043 8.8496 6.89713 8.91391C6.57383 8.97822 6.27686 9.13695 6.04377 9.37004C5.81069 9.60313 5.65195 9.9001 5.58764 10.2234C5.52334 10.5467 5.55634 10.8818 5.68249 11.1863C5.80863 11.4909 6.02225 11.7512 6.29633 11.9343C6.57041 12.1175 6.89264 12.2152 7.22227 12.2152C7.6643 12.2152 8.08822 12.0396 8.40078 11.727C8.71334 11.4145 8.88893 10.9906 8.88893 10.5485ZM6.66672 10.5485C6.66672 10.4387 6.69931 10.3313 6.76035 10.2399C6.82139 10.1485 6.90816 10.0773 7.00967 10.0353C7.11119 9.99323 7.22289 9.98223 7.33066 10.0037C7.43842 10.0251 7.53741 10.078 7.61511 10.1557C7.6928 10.2334 7.74572 10.3324 7.76715 10.4402C7.78859 10.5479 7.77759 10.6596 7.73554 10.7611C7.69349 10.8627 7.62228 10.9494 7.53092 11.0105C7.43956 11.0715 7.33215 11.1041 7.22227 11.1041C7.07493 11.1041 6.93363 11.0456 6.82944 10.9414C6.72525 10.8372 6.66672 10.6959 6.66672 10.5485ZM10.5556 8.88189C10.8852 8.88189 11.2074 8.78414 11.4815 8.60101C11.7556 8.41787 11.9692 8.15758 12.0954 7.85303C12.2215 7.54849 12.2545 7.21338 12.1902 6.89008C12.1259 6.56678 11.9672 6.26982 11.7341 6.03673C11.501 5.80364 11.204 5.64491 10.8807 5.5806C10.5574 5.51629 10.2223 5.5493 9.91778 5.67544C9.61324 5.80159 9.35295 6.01521 9.16981 6.28929C8.98668 6.56337 8.88893 6.8856 8.88893 7.21523C8.88893 7.65726 9.06452 8.08118 9.37708 8.39374C9.68964 8.70629 10.1136 8.88189 10.5556 8.88189ZM10.5556 6.65968C10.6655 6.65968 10.7729 6.69226 10.8642 6.75331C10.9556 6.81435 11.0268 6.90112 11.0688 7.00263C11.1109 7.10415 11.1219 7.21585 11.1005 7.32362C11.079 7.43138 11.0261 7.53037 10.9484 7.60807C10.8707 7.68576 10.7717 7.73867 10.664 7.76011C10.5562 7.78155 10.4445 7.77054 10.343 7.7285C10.2415 7.68645 10.1547 7.61524 10.0937 7.52388C10.0326 7.43252 10 7.32511 10 7.21523C10 7.06789 10.0586 6.92658 10.1628 6.8224C10.2669 6.71821 10.4082 6.65968 10.5556 6.65968ZM3.88896 5.54858C3.55933 5.54858 3.2371 5.64633 2.96302 5.82946C2.68894 6.01259 2.47532 6.27289 2.34918 6.57743C2.22303 6.88197 2.19002 7.21708 2.25433 7.54038C2.31864 7.86368 2.47737 8.16065 2.71046 8.39374C2.94355 8.62682 3.24052 8.78556 3.56382 8.84986C3.88711 8.91417 4.22222 8.88117 4.52677 8.75502C4.83131 8.62888 5.0916 8.41526 5.27474 8.14118C5.45787 7.8671 5.55562 7.54487 5.55562 7.21523C5.55562 6.77321 5.38003 6.34929 5.06747 6.03673C4.75491 5.72417 4.33099 5.54858 3.88896 5.54858ZM3.88896 7.77078C3.77909 7.77078 3.67168 7.7382 3.58032 7.67716C3.48896 7.61611 3.41775 7.52935 3.3757 7.42783C3.33365 7.32632 3.32265 7.21462 3.34409 7.10685C3.36552 6.99908 3.41843 6.90009 3.49613 6.8224C3.57382 6.7447 3.67281 6.69179 3.78058 6.67036C3.88835 6.64892 4.00005 6.65992 4.10156 6.70197C4.20308 6.74402 4.28984 6.81522 4.35089 6.90658C4.41193 6.99794 4.44452 7.10535 4.44452 7.21523C4.44452 7.36257 4.38598 7.50388 4.2818 7.60807C4.17761 7.71225 4.03631 7.77078 3.88896 7.77078Z");this.items.length||(e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,12),e.font="600 12px 'Geist variable'",e.fillStyle="#A0A4A2",e.textAlign="left",e.clip(),e.fillText("Drag and drop media here",32,12),e.translate(8,1),e.fillStyle="#A0A4A2",e.fill(t),e.restore())}}class rw extends vo{static type="Helper";constructor(e){e.activeGuideFill="#ffffff",super(e)}}class nw{addTrackItem(e){const t=e.id,n=Ff(e,{tScale:this.tScale,sizesMap:this.sizesMap});this.add(n),this.trackItemIds.push(t),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=Sn(this.trackItemsMap)}alignItemsToTrack(){this.pauseEventListeners();const e=new Map(this.getObjects("Track").map(n=>[n.id,n])),t=this.getObjects("Image","Video","Text","Audio");this.trackItemIds.forEach(n=>{const i=this.tracks.find(c=>c.items.includes(n));if(!i)return;const s=e.get(i.id);this.duration;const a=this.getObjects().find(c=>c.id===n);a&&s&&(a.isMain=!1,this.trackItemsMap[n].isMain=!1,a.set({top:s.top}),a.setCoords())}),e.forEach(n=>{n.items=t.filter(i=>i.top===n.top).map(i=>i.id)}),this.resumeEventListeners()}updateTrackItemsPosition(){const e=this.getObjects("Image","Text","Video","Audio");e.sort((t,n)=>t.top-n.top),this.trackItemIds=e.map(t=>t.id).reverse()}restoreTrackItemPositions(){}updateTrackItemsState(){this.pauseEventListeners();const e=this.getObjects("Image","Video","Text","Audio"),t={};e.forEach(n=>{const{id:i,left:s,width:a}=n,c=this.trackItemsMap[i],u=pi(s,this.tScale),h=u+pi(a,this.tScale),d={from:u,to:h},g={...c,display:d,trim:n instanceof ms||n instanceof ei?n.trim:void 0};n.display=d,t[i]=g}),this.trackItemsMap=t,this.resumeEventListeners()}deleteActiveTrackItem(){const e=this.getActiveObjects();if(!e.length)return!1;const t=e.map(i=>i.id),n=Zo(this.tracks,t);this.trackItemsMap=Object.keys(this.trackItemsMap).reduce((i,s)=>(t.includes(s)||(i[s]=this.trackItemsMap[s]),i),{}),this.trackItemIds=this.trackItemIds.filter(i=>!t.includes(i)),this.tracks=n,this.discardActiveObject(),this.remove(...e),this.setActiveIds([]),this.renderTracks(),this.alignItemsToTrack(),this.updateState({updateHistory:!0,kind:"remove"})}updateTrackItemsToHistory(){this.pauseEventListeners();const e=this.getObjects();this.trackItemIds.forEach(t=>{const n=this.tracks.find(h=>h.items.includes(t)),i=e.find(h=>h.id===n?.id)?.top;if(!i){console.warn(`Track top not found for trackItemId: ${t}`);return}const s=this.trackItemsMap[t],a=e.find(h=>h.id===t);if(!a){console.warn(`Object not found for trackItemId: ${t}`);return}const c=Rt(s.display.from,this.tScale),u=Rt(s.display.to-s.display.from,this.tScale);a.set({left:c,width:u,top:i}),a.setCoords()}),this.requestRenderAll(),this.resumeEventListeners()}cloneActiveTrackItem(e){const t=e?.trackItemId||this.activeIds[0];if(!t)return!1;const i={...this.trackItemsMap[t],id:zt()},s=this.tracks.find(d=>d.items.includes(t)),a=this.tracks.findIndex(d=>d.id===s?.id)+1;this.findOrCreateTrack(i,{trackIndex:a});const c=Ff(i,{tScale:this.tScale});c&&this.add(c);const{audioData:u,...h}=i.metadata||{};i.metadata=h,this.trackItemsMap[i.id]=i,this.trackItemIds.push(i.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}splitActiveTrackItem(e){const t=e.trackItemId??this.activeIds[0];if(!t||this.activeIds.length>1)return!1;const n=this.trackItemsMap[t],i=e.time;if(n.display.from>=i||n.display.to<=i)return!1;const s={...n,display:{from:n.display.from,to:i}},a={...n,display:{from:i,to:n.display.to},id:zt()};if(n.type==="video"||n.type==="audio"){const d=i-s.display.from;s.trim={from:n.trim.from,to:n.trim.from+d},a.trim={from:s.trim.to,to:n.trim.to}}const c=this.getObjects().find(d=>d.id===t);c.display=s.display,this.tracks.find(d=>d.items.includes(t))?.items.push(a.id);const h=Ff(a,{tScale:this.tScale});h&&this.add(h),this.trackItemsMap[a.id]=a,this.trackItemsMap[t]=s,this.trackItemIds.push(a.id),this.updateTrackItemCoords(s.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}updateTrackItemCoords(e){const t=this.getObjects().find(a=>a.id===e),n=this.trackItemsMap[e],i=Rt(n.display.from,this.tScale),s=Rt(n.display.to-n.display.from,this.tScale);t?.set({left:i,width:s}),t?.setCoords()}updateTrackItemDetails(e,t){const n=t?.trackItemId;if(!n)return!1;const i=this.trackItemsMap[n],s={...i.details,...e.details};("fontSize"in s||"lineHeight"in s)&&(s.height=Ma(s.text,s)),this.trackItemsMap[n]={...i,...e,details:s},this.updateState()}updateTrackItem(e,t){const n=t.trackItemId;if(!n)return!1;const i=this.trackItemsMap[n],s={...i.details,...e.details};if(i.type==="text"&&e.details.text){const a=this.getObjects("Text").find(c=>c.id===n);a instanceof Lf&&(a.text=e.details.text,this.requestRenderAll())}("fontSize"in s||"lineHeight"in s)&&(s.height=Ma(s.text,s)),this.trackItemsMap[n]={...i,...e,details:s},this.updateState()}updateTrackItemsDetails(e,t){t?.trackItemIds?.forEach((n,i)=>{const s=this.trackItemsMap[n],a={...s.details,...e[i].details};("fontSize"in a||"lineHeight"in a)&&(a.height=Ma(a.text,a)),this.trackItemsMap[n]={...s,...e[i],details:a}}),this.updateState()}getTrackItems(){return this.getObjects(...NP)}setActiveTrackItemCoords(){this.getActiveObjects().forEach(e=>e.setCoords())}deleteTrackItemById(e){const t=this.getObjects().filter(n=>e.includes(n.id));this.tracks=Zo(this.tracks,e),this.trackItemsMap=Object.keys(this.trackItemsMap).filter(n=>!e.includes(n)).reduce((n,i)=>(n[i]=this.trackItemsMap[i],n),{}),this.trackItemIds=this.trackItemIds.filter(n=>!e.includes(n)),this.discardActiveObject(),this.remove(...t),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=Sn(this.trackItemsMap)}selectTrackItemByIds(e){const t=this.getActiveObjects().map(i=>i.id);if(it.isEqual(t,e))return;const n=this.getTrackItems().filter(i=>e.includes(i.id));if(n.length===0)this.discardActiveObject();else if(n.length===1)this.setActiveObject(n[0]);else{const i=new Ln(n);this.setActiveObject(i)}this.requestRenderAll()}}const NP=["Image","Text","Video","Audio","Caption","Template"],Ff=(r,e)=>{const n={text:qb,video:Gb,image:Xb,audio:Yb}[r.type];return n(r,e)},yo={text:32,image:40,video:40,audio:32,main:40},iw=r=>{switch(r){case"text":return yo.text;case"image":return yo.image;case"video":return yo.video;case"audio":return yo.audio;case"helperTop":return 40;case"helperBottom":return 40;case"helperCenter":return 8;case"main":return yo.main;default:return yo.text}};class sw{findOrCreateTrack(e,{trackId:t,trackIndex:n}){const i=t;if(i){const a=this.tracks.find(c=>c.id===i);if(a)return a.items.push(e.id),i}const s={id:zt(),items:[e.id],type:e.type,accepts:this.acceptsMap?.[e.type]};return n!==void 0?this.tracks.splice(n,0,s):this.tracks.push(s),this.renderTracks(),s.id}removeTracks(){this.getObjects("Track","Helper")?.forEach(e=>this.remove(e))}renderTracks(){this.updateTracksState(),this.removeTracks();const e=this.width,t=this.tracks.flatMap(c=>[c,{id:`after-${c.id}`,type:"helper",items:[],accepts:[]}]).slice(0,-1);let n=0;const i=le.getClass("Helper")||vo,s=new i({id:"helperLineTop",top:n,selectable:!1,evented:!1,tScale:this.tScale,width:e,kind:"top",metadata:{}});n+=iw("helperTop"),this.insertAt(0,s),t.forEach((c,u)=>{if(c.type==="helper"){const h=iw("helperCenter"),d=new i({id:c.id,top:n,tScale:this.tScale,width:e,height:h,metadata:{order:(u+1)/2},kind:"center"});n+=h,this.insertAt(0,d)}else{const h=le.getClass("Track")||Ii,d=new h({id:c.id,top:n,left:0,fill:"#18181b",height:42,width:e,tScale:this.tScale,accepts:this.acceptsMap?.[c.type]||[],items:c.items});n+=42,this.insertAt(0,d)}});const a=new i({id:"helperLineBottom",top:n,selectable:!1,evented:!1,tScale:this.tScale,width:e,kind:"bottom",metadata:{}});this.insertAt(0,a)}updateTracksState(){const e=this.tracks.filter(n=>n.items.length||n.type==="main"),t=new Map;e.forEach(n=>t.set(n.id,n)),this.tracks=Array.from(t.values())}updateTrackCoords(){const e=this.bounding.width+this.spacing.right;this.getObjects("Track","Helper").forEach(t=>{t.updateCoords(e),t.setCoords()})}}const BP=60,VP=188;function ow(r,e=1,t=1){const n=VP*e;return r*(BP/1e3)*n/t}class aw{removeTransitions(){const e=this.getObjects("Transition");this.remove(...e)}renderTransitions(){this.removeTransitions(),this.transitionIds.forEach(e=>{const t=this.transitionsMap[e],n=t.fromId,i=t.toId,s=this.getObjects(),a=s.find(p=>p.id===n),c=s.find(p=>p.id===i);if(!a||!c)return;const u=ow(t.duration,this.tScale),h=a.left+a.width-u/2,d=a.height,g=new rn({id:t.id,left:h,top:a.top,height:d,width:u,tScale:this.tScale,duration:t.duration,fromId:a.id,toId:c.id,kind:t.kind});t.kind==="none"&&(g.visible=!1),this.add(g)})}updateTransitionCoordinates(){this.pauseEventListeners(),this.getObjects("Transition").forEach(e=>{e.tScale=this.tScale,e.updateCoords(),e.setCoords()}),this.resumeEventListeners()}alignTransitionsToTrack(){this.pauseEventListeners(),this.transitionIds.forEach(e=>{const t=this.getObjects("Transition").find(n=>n.id===e);if(t instanceof rn){const n=this.getObjects().find(a=>a.id===t.fromId);if(!n)return;const i=ow(t.duration,this.tScale),s=n.left+n.width-i/2;t.set({left:s,top:n.top}),t.setCoords()}}),this.resumeEventListeners()}updateTransitions(e=!0){e&&this.pauseEventListeners();const t=this.getObjects("Track"),n=this.getObjects("Video","Image");this.removeTransitions();const i={},s=[];t.forEach(a=>{const c=n.filter(u=>a.items.includes(u.id)).sort((u,h)=>u.left-h.left);for(let u=0;u<c.length-1;u++){const h=c[u],d=c[u+1];if(Math.abs(h.left+h.width-d.left)<=1){const g=`${h.id}-${d.id}`;if(this.transitionIds.includes(g))i[g]=this.transitionsMap[g];else{const p={id:g,duration:1500,fromId:h.id,toId:d.id,kind:"none",trackId:a.id,type:"transition"};i[g]=p}s.push(g)}}}),this.transitionIds=s,this.transitionsMap=i,this.renderTransitions(),e&&this.resumeEventListeners()}}const oe={canvas:null,enableGuideRedraw:!0,isPointerOverHelperTrack:!1,draggingOverTrack:null,primaryMovingObjects:[],secondaryMovingObjects:[],placeholderMovingObjects:[],objectInitialPositions:{},originTrack:{},trackToItemsMap:{},activeTrackToItemsMap:{},trackTopToIdMap:{},trackTops:[],activeObjects:[],primaryTracks:{},secondaryTracks:{}},Mt={guide:null,object:null,objects:[]},HP=()=>oe,zP=r=>{Object.assign(oe,r)},WP=r=>{r.on("before:transform",cw.bind(r))},UP=r=>{r.off("before:transform",cw.bind(r))};function cw(r){oe.canvas=this,oe.activeTrackToItemsMap={},oe.primaryTracks={},oe.secondaryTracks={},oe.trackTops=[],oe.trackToItemsMap={},oe.activeObjects=[],oe.trackTopToIdMap={},oe.canvas.trackIdAfterTransform="",oe.canvas.positionAfterTransform={};const e=oe.canvas.getActiveObject();if(!e)return;oe.activeObjects=e instanceof Ln?e.getObjects():[e];const t=oe.canvas.getScenePoint(r.e),n=oe.canvas.getObjects("Track");oe.originTrack=n.find(a=>{const c=a.getBoundingRect();return t.x>=c.left&&t.x<=c.left+c.width&&t.y>=c.top&&t.y<=c.top+c.height})??{};const i=oe.canvas.getObjects("Video","Image","Audio","Text","Element");n.forEach(a=>{const c=i.filter(u=>a.items.includes(u.id));oe.trackToItemsMap[a.id]=c,oe.trackTopToIdMap[a.top]=a.id,oe.trackTops.push(a.top)}),oe.trackTops.sort((a,c)=>a-c),oe.activeObjects.forEach(a=>{const c=n?.find(h=>h.items.includes(a.id));if(!c)return;const u=c.id;oe.activeTrackToItemsMap[u]?oe.activeTrackToItemsMap[u].push(a):oe.activeTrackToItemsMap[u]=[a]}),oe.primaryMovingObjects=oe.activeObjects.filter(a=>{const c=a.getBoundingRect();return t.y>=c.top&&t.y<=c.top+c.height&&!(a instanceof rn)}),oe.primaryMovingObjects.forEach(a=>{const c=a.getBoundingRect().top,u=oe.trackTopToIdMap[c];if(oe.primaryTracks[u])oe.primaryTracks[u].objects.push(a);else{const h=Nf(oe.trackTops,oe.originTrack.top,c);if(typeof h!="number")return;oe.primaryTracks[u]={objects:[a],index:h}}}),oe.primaryMovingObjects=oe.primaryMovingObjects.sort((a,c)=>a.left-c.left),oe.secondaryMovingObjects=oe.activeObjects.filter(a=>!oe.primaryMovingObjects.includes(a)&&!(a instanceof rn)),oe.secondaryMovingObjects.forEach(a=>{const c=a.getBoundingRect().top,u=oe.trackTopToIdMap[a.getBoundingRect().top];if(oe.secondaryTracks[u])oe.secondaryTracks[u].objects.push(a);else{const h=Nf(oe.trackTops,oe.originTrack.top,c);if(typeof h!="number")return;oe.secondaryTracks[u]={objects:[a],index:h}}}),oe.originTrack&&(oe.canvas.trackOriginBeforeTransform=oe.originTrack.id),e&&(oe.canvas.positionBeforeTransform={top:e.top,left:e.left}),("transform"in r?r.transform:{}).action==="drag"&&(oe.placeholderMovingObjects=oe.primaryMovingObjects.map(a=>{const c=a.getBoundingRect();oe.objectInitialPositions[a.id]={top:c.top,left:c.left};const u=new mo({id:`${a.id}-placeholder`,left:c.left,top:c.top,width:c.width,height:c.height,for:$P[a.type]});return u.draggedObject=a,u}),oe.canvas.add(...oe.placeholderMovingObjects))}function Nf(r,e,t){const n=r.indexOf(e),i=r.indexOf(t);return n===-1||i===-1?null:i-n}const $P={trackitemvideo:"video",trackitemimage:"image",trackitemaudio:"audio",trackitemtext:"text"};function lw(r){if(!Mt.guide)return!1;r.e.preventDefault();const e=this,t=e.getViewportPoint(r.e);Mt.guide.set({left:t.x-16,top:t.y-Mt.guide.height/2});const n=YP(t,Mt.objects);n&&(Mt.object=n,n.strokeDashArray=[5,1],n.setSelected(!0)),Mt.objects.forEach(i=>{i!==n&&i.setSelected(!1)}),e.requestRenderAll()}function YP(r,e){let t=1/0,n=null;const i=new Y(r.x,r.y);return e.forEach(s=>{const a=XP(s,i);a<t&&(t=a,n=s)}),n}function XP(r,e){return Math.sqrt(Math.pow(r.left-e.x,2)+Math.pow(r.top-e.y,2))}const GP=["transition","image","video","audio","caption","text"];function uw(r){const e=r.e.dataTransfer?.types[0];if(!e)return;const t=JSON.parse(e),{type:n,duration:i=5e3}=t;if(!GP.includes(n))return;const s=this;s.discardActiveObject();const a=Rt(i,s.tScale);Mt.guide=qP({width:a,height:48,id:"TransitionGuide",left:0,top:0,type:n}),s.add(Mt.guide),n==="transition"&&(Mt.objects=s.getObjects("Transition"),Mt.objects.forEach(c=>{c.visible=!0})),Qe.dispatch(xh)}function qP({width:r,height:e,id:t,left:n,top:i,type:s}){return s==="transition"?new Aa({top:0,left:0,height:48,width:48,id:"TransitionGuide"}):new Ia({top:i,left:n,height:e,width:r,id:t,name:"Rivers in the mountains"})}function hw(){if(!Mt.guide)return;Qe.dispatch(qo);const r=this;KP(Mt.objects),r.remove(Mt.guide)}function KP(r){r.forEach(e=>{e.strokeDashArray=[],e.setSelected(!1),e.kind==="none"&&(e.visible=!1)})}var ZP=typeof global=="object"&&global&&global.Object===Object&&global,JP=typeof self=="object"&&self&&self.Object===Object&&self,Bf=ZP||JP||Function("return this")(),Mi=Bf.Symbol,dw=Object.prototype,QP=dw.hasOwnProperty,eD=dw.toString,Pa=Mi?Mi.toStringTag:void 0;function tD(r){var e=QP.call(r,Pa),t=r[Pa];try{r[Pa]=void 0;var n=!0}catch{}var i=eD.call(r);return n&&(e?r[Pa]=t:delete r[Pa]),i}var rD=Object.prototype,nD=rD.toString;function iD(r){return nD.call(r)}var sD="[object Null]",oD="[object Undefined]",fw=Mi?Mi.toStringTag:void 0;function Vf(r){return r==null?r===void 0?oD:sD:fw&&fw in Object(r)?tD(r):iD(r)}function Hf(r){return r!=null&&typeof r=="object"}var aD="[object Symbol]";function zf(r){return typeof r=="symbol"||Hf(r)&&Vf(r)==aD}function cD(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var Da=Array.isArray,gw=Mi?Mi.prototype:void 0,pw=gw?gw.toString:void 0;function mw(r){if(typeof r=="string")return r;if(Da(r))return cD(r,mw)+"";if(zf(r))return pw?pw.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Xl(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function lD(r){return r}var uD="[object AsyncFunction]",hD="[object Function]",dD="[object GeneratorFunction]",fD="[object Proxy]";function gD(r){if(!Xl(r))return!1;var e=Vf(r);return e==hD||e==dD||e==uD||e==fD}var Wf=Bf["__core-js_shared__"],vw=function(){var r=/[^.]+$/.exec(Wf&&Wf.keys&&Wf.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function pD(r){return!!vw&&vw in r}var mD=Function.prototype,vD=mD.toString;function yD(r){if(r!=null){try{return vD.call(r)}catch{}try{return r+""}catch{}}return""}var bD=/[\\^$.*+?()[\]{}|]/g,wD=/^\[object .+?Constructor\]$/,_D=Function.prototype,SD=Object.prototype,xD=_D.toString,CD=SD.hasOwnProperty,TD=RegExp("^"+xD.call(CD).replace(bD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ED(r){if(!Xl(r)||pD(r))return!1;var e=gD(r)?TD:wD;return e.test(yD(r))}function kD(r,e){return r?.[e]}function Uf(r,e){var t=kD(r,e);return ED(t)?t:void 0}function OD(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var AD=800,ID=16,MD=Date.now;function PD(r){var e=0,t=0;return function(){var n=MD(),i=ID-(n-t);if(t=n,i>0){if(++e>=AD)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function DD(r){return function(){return r}}var Gl=function(){try{var r=Uf(Object,"defineProperty");return r({},"",{}),r}catch{}}(),RD=Gl?function(r,e){return Gl(r,"toString",{configurable:!0,enumerable:!1,value:DD(e),writable:!0})}:lD,jD=PD(RD),LD=9007199254740991,FD=/^(?:0|[1-9]\d*)$/;function yw(r,e){var t=typeof r;return e=e??LD,!!e&&(t=="number"||t!="symbol"&&FD.test(r))&&r>-1&&r%1==0&&r<e}function ND(r,e,t){e=="__proto__"&&Gl?Gl(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function bw(r,e){return r===e||r!==r&&e!==e}var BD=Object.prototype,VD=BD.hasOwnProperty;function HD(r,e,t){var n=r[e];(!(VD.call(r,e)&&bw(n,t))||t===void 0&&!(e in r))&&ND(r,e,t)}var ww=Math.max;function zD(r,e,t){return e=ww(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,s=ww(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=n[i];return c[e]=t(a),OD(r,this,c)}}var WD=9007199254740991;function UD(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=WD}var $D="[object Arguments]";function _w(r){return Hf(r)&&Vf(r)==$D}var Sw=Object.prototype,YD=Sw.hasOwnProperty,XD=Sw.propertyIsEnumerable,xw=_w(function(){return arguments}())?_w:function(r){return Hf(r)&&YD.call(r,"callee")&&!XD.call(r,"callee")},GD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qD=/^\w*$/;function KD(r,e){if(Da(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||zf(r)?!0:qD.test(r)||!GD.test(r)||e!=null&&r in Object(e)}var Ra=Uf(Object,"create");function ZD(){this.__data__=Ra?Ra(null):{},this.size=0}function JD(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var QD="__lodash_hash_undefined__",eR=Object.prototype,tR=eR.hasOwnProperty;function rR(r){var e=this.__data__;if(Ra){var t=e[r];return t===QD?void 0:t}return tR.call(e,r)?e[r]:void 0}var nR=Object.prototype,iR=nR.hasOwnProperty;function sR(r){var e=this.__data__;return Ra?e[r]!==void 0:iR.call(e,r)}var oR="__lodash_hash_undefined__";function aR(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Ra&&e===void 0?oR:e,this}function vs(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}vs.prototype.clear=ZD,vs.prototype.delete=JD,vs.prototype.get=rR,vs.prototype.has=sR,vs.prototype.set=aR;function cR(){this.__data__=[],this.size=0}function ql(r,e){for(var t=r.length;t--;)if(bw(r[t][0],e))return t;return-1}var lR=Array.prototype,uR=lR.splice;function hR(r){var e=this.__data__,t=ql(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():uR.call(e,t,1),--this.size,!0}function dR(r){var e=this.__data__,t=ql(e,r);return t<0?void 0:e[t][1]}function fR(r){return ql(this.__data__,r)>-1}function gR(r,e){var t=this.__data__,n=ql(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function bo(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}bo.prototype.clear=cR,bo.prototype.delete=hR,bo.prototype.get=dR,bo.prototype.has=fR,bo.prototype.set=gR;var pR=Uf(Bf,"Map");function mR(){this.size=0,this.__data__={hash:new vs,map:new(pR||bo),string:new vs}}function vR(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Kl(r,e){var t=r.__data__;return vR(e)?t[typeof e=="string"?"string":"hash"]:t.map}function yR(r){var e=Kl(this,r).delete(r);return this.size-=e?1:0,e}function bR(r){return Kl(this,r).get(r)}function wR(r){return Kl(this,r).has(r)}function _R(r,e){var t=Kl(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function ys(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}ys.prototype.clear=mR,ys.prototype.delete=yR,ys.prototype.get=bR,ys.prototype.has=wR,ys.prototype.set=_R;var SR="Expected a function";function $f(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(SR);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var a=r.apply(this,n);return t.cache=s.set(i,a)||s,a};return t.cache=new($f.Cache||ys),t}$f.Cache=ys;var xR=500;function CR(r){var e=$f(r,function(n){return t.size===xR&&t.clear(),n}),t=e.cache;return e}var TR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ER=/\\(\\)?/g,kR=CR(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(TR,function(t,n,i,s){e.push(i?s.replace(ER,"$1"):n||t)}),e});function OR(r){return r==null?"":mw(r)}function Zl(r,e){return Da(r)?r:KD(r,e)?[r]:kR(OR(r))}function Yf(r){if(typeof r=="string"||zf(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function AR(r,e){e=Zl(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[Yf(e[t++])];return t&&t==n?r:void 0}function IR(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var Cw=Mi?Mi.isConcatSpreadable:void 0;function MR(r){return Da(r)||xw(r)||!!(Cw&&r&&r[Cw])}function PR(r,e,t,n,i){var s=-1,a=r.length;for(t||(t=MR),i||(i=[]);++s<a;){var c=r[s];t(c)?IR(i,c):i[i.length]=c}return i}function DR(r){var e=r==null?0:r.length;return e?PR(r):[]}function RR(r){return jD(zD(r,void 0,DR),r+"")}function jR(r,e){return r!=null&&e in Object(r)}function LR(r,e,t){e=Zl(e,r);for(var n=-1,i=e.length,s=!1;++n<i;){var a=Yf(e[n]);if(!(s=r!=null&&t(r,a)))break;r=r[a]}return s||++n!=i?s:(i=r==null?0:r.length,!!i&&UD(i)&&yw(a,i)&&(Da(r)||xw(r)))}function FR(r,e){return r!=null&&LR(r,e,jR)}function NR(r,e,t,n){if(!Xl(r))return r;e=Zl(e,r);for(var i=-1,s=e.length,a=s-1,c=r;c!=null&&++i<s;){var u=Yf(e[i]),h=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return r;if(i!=a){var d=c[u];h=void 0,h===void 0&&(h=Xl(d)?d:yw(e[i+1])?[]:{})}HD(c,u,h),c=c[u]}return r}function BR(r,e,t){for(var n=-1,i=e.length,s={};++n<i;){var a=e[n],c=AR(r,a);t(c,a)&&NR(s,Zl(a,r),c)}return s}function VR(r,e){return BR(r,e,function(t,n){return FR(r,n)})}var HR=RR(function(r,e){return r==null?{}:VR(r,e)});function Tw(r){const e=r.e.dataTransfer?.types[0];if(!e)return;const t=JSON.parse(r.e.dataTransfer.getData(e)),n=this;if(t.type!=="transition"){zR(t),n.remove(Mt.guide),n.requestRenderAll(),Qe.dispatch(qo);return}Mt.guide&&(Mt.object&&WR(t,n),Mt.objects.forEach(i=>{i.strokeDashArray=[],i.setSelected(!1),i.kind==="none"&&(i.visible=!1)}),n.remove(Mt.guide),n.requestRenderAll(),Qe.dispatch(qo))}function zR(r){const e={...r,id:zt()};switch(r.type){case"image":Qe.dispatch(Ws,{payload:e});break;case"video":Qe.dispatch(Hs,{payload:e});break;case"audio":Qe.dispatch(zs,{payload:e});break}}function WR(r,e){const t=Mt.object?.id,n=HR(r,["kind","direction"]);Object.entries(n).forEach(([i,s])=>{i==="kind"?Mt.object.kind=s:Mt.object[i]=s}),e.transitionsMap[t]={...e.transitionsMap[t],...n},e.updateState()}const UR=r=>{r.on("dragover",lw),r.on("dragenter",uw),r.on("dragleave",hw),r.on("drop",Tw)},$R=r=>{r.off("dragover",lw),r.off("dragenter",uw),r.off("dragleave",hw),r.off("drop",Tw)},Ew=r=>{const e=r.target.canvas,t=r.target;if(r.action==="resizing"&&t instanceof rn&&e){const n=t.id,i=e.getObjects("Transition").find(s=>s.id===n);if(i&&i instanceof rn){const s=it.cloneDeep(e.transitionsMap),a={...s,[n]:{...s[n],width:i.width,duration:i.duration}};e.transitionsMap=a,e.updateState()}}e&&(YR(e,e.getObjects()),XR(e.getObjects("Helper")),oe.isPointerOverHelperTrack=!1,oe.draggingOverTrack=null)},YR=(r,e)=>{e.forEach(t=>{t.isAlignmentAuxiliary&&r.remove(t)})},XR=r=>{r.forEach(e=>e.setSelected(!1))};function kw(r){const e=r.target.canvas;if(!e)return;const t=e.getActiveObject();if(!t||!e.positionBeforeTransform)return;const n=e.getScenePoint(r.e),i=e.getObjects("Track","Helper").find(s=>{const a=s.getBoundingRect();return n.x>=a.left&&n.x<=a.left+a.width&&n.y>=a.top&&n.y<=a.top+a.height});if(r.action==="resizing"){const s=(oe.trackToItemsMap[oe.originTrack.id]||[]).filter(c=>c!==t);t.setCoords();const a=Jl(s,t.getBoundingRect());return e.fire("track-items:resized",{trackId:oe.originTrack.id,trackItemIds:[t.id],isOverlapped:!!a}),!1}if(!i)return t&&(t?.set(e.positionBeforeTransform),t?.setCoords()),!1;if(i instanceof vo){let s;switch(i.kind){case"top":s=0;break;case"center":s=i.metadata.order||0;break;case"bottom":s=-1;break;default:return}const a={isSecondaryOverlapped:!1,secondaryTracks:oe.secondaryTracks,primaryTracks:oe.primaryTracks,primaryPositions:{trackIndex:s,trackId:e.trackIdAfterTransform,positions:e.positionAfterTransform}};ZR(a)}else if(i instanceof Ii){const s={isSecondaryOverlapped:qR(),secondaryTracks:oe.secondaryTracks,primaryTracks:oe.primaryTracks,primaryPositions:{trackId:e.trackIdAfterTransform,positions:e.positionAfterTransform}};GR(s)}}const GR=r=>{oe.canvas&&oe.canvas.fire("track-items:moved",r)};function qR(){const r=KR();return Object.keys(r).some(e=>{const t=oe.trackToItemsMap[e],n=r[e].objects;return t?.length?t.filter(i=>!n.includes(i)).some(i=>Jl(n,i.getBoundingRect())):!0})}function KR(){const[r]=oe.primaryMovingObjects,e=r.id,n=oe.canvas.positionAfterTransform[e].top-r.getBoundingRect().top,i={};return oe.secondaryMovingObjects.forEach(s=>{const a=s.getBoundingRect().top+n,c=oe.trackTopToIdMap[a],u=Nf(oe.trackTops,oe.originTrack.top,a);i[c]?i[c].objects.push(s):i[c]={objects:[s],index:u}}),i}const ZR=r=>{oe.canvas&&oe.canvas.fire("track:create",r)};function Jl(r,e){return r.find(t=>{const n=t.getBoundingRect();return e.left<n.left+n.width&&e.left+e.width>n.left&&e.top<n.top+n.height&&e.top+e.height>n.top})}const JR=r=>{r.on("object:modified",Ew),r.on("object:modified",kw)},QR=r=>{r.off("object:modified",Ew),r.off("object:modified",kw)};function e3(r,e){r.remove(...e),e.length=0}function Ow(){e3(this,oe.placeholderMovingObjects)}function Aw(r){const e=this.height<this.bounding.height,t=this.width<this.bounding.width;if(!e&&!t)return;const n=this.viewportTransform;let i=n[4],s=n[5];const a=2;r.e.shiftKey?i=n[4]-r.e.deltaY*a:(e&&(s=n[5]-r.e.deltaY*a),i=n[4]-r.e.deltaX*a),this.setViewportPos(i,s)}const t3=r=>{r.on("mouse:wheel",Aw),r.on("mouse:up",Ow.bind(r))},r3=r=>{r.off("mouse:wheel",Aw),r.off("mouse:up",Ow.bind(r))};function Iw(r){const e=this;if(!e)return;const t=e.getScenePoint(r.e),n=e.getObjects("Helper","Track");oe.draggingOverTrack=n.find(h=>{const d=h.getBoundingRect();return t.x>=d.left&&t.x<=d.left+d.width&&t.y>=d.top&&t.y<=d.top+d.height})??null,n.forEach(h=>{if(Pw(h)){const d=oe.draggingOverTrack;h.setSelected(h===d)}}),oe.isPointerOverHelperTrack=Pw(oe.draggingOverTrack),e.getObjects();const i=r.target;i.getBoundingRect(),i.setCoords();const s=[i,...e.getActiveObjects(),...e.getObjects("Track","Helper","Transition","Placeholder")],a=n3(s,e),c=s3(i);i3(a,c).forEach(h=>{h.orientation==="V"?i.left=h.lineGuide+h.offset:i.top=h.lineGuide+h.offset})}const n3=(r,e)=>{const t=[],n=[];return e.getObjects().filter(i=>i.visible).forEach(i=>{if(r.some(c=>c.id===i.id)||i.isAlignmentAuxiliary)return;const a=i.getBoundingRect();t.push(Mw(a.left,a.width,a.top,a.height)),n.push(Mw(a.top,a.height,a.left,a.width))}),{vertical:t.flat(),horizontal:[]}},Mw=(r,e,t,n)=>[r,r+e].map(i=>({val:i,start:t,end:t+n})),i3=(r,e)=>{const t=[],n=[];r.vertical.forEach(u=>{e.vertical.forEach(h=>{const d=Math.abs(u.val-h.guide);d<10&&t.push({lineGuide:u.val,diff:d,orientation:"V",snap:h.snap,offset:h.offset,targetDim:{start:u.start,end:u.end}})})}),r.horizontal.forEach(u=>{e.horizontal.forEach(h=>{const d=Math.abs(u.val-h.guide);d<10&&n.push({lineGuide:u.val,diff:d,orientation:"H",snap:h.snap,offset:h.offset,targetDim:{start:u.start,end:u.end}})})});const s=[],a=t.sort((u,h)=>u.diff-h.diff)[0],c=n.sort((u,h)=>u.diff-h.diff)[0];return a&&s.push({lineGuide:a.lineGuide,offset:a.offset,orientation:"V",snap:a.snap,targetDim:a.targetDim}),c&&s.push({lineGuide:c.lineGuide,offset:c.offset,orientation:"H",snap:c.snap,targetDim:c.targetDim}),s},s3=r=>{const e=r.getBoundingRect();return{vertical:[{guide:Math.round(e.left),offset:Math.round(r.left-e.left),snap:"start"},{guide:Math.round(e.left+e.width),offset:Math.round(r.left-e.left-e.width),snap:"end"}],horizontal:[{guide:Math.round(e.top),offset:Math.round(r.top-e.top),snap:"start"},{guide:Math.round(e.top+e.height),offset:Math.round(r.top-e.top-e.height),snap:"end"}]}},Pw=r=>r instanceof vo;function o3(r){r.opacity=oe.isPointerOverHelperTrack?0:1}const Dw=f3(r=>{const e=r.target.canvas;if(g3(r),!oe.draggingOverTrack)return;const t=oe.placeholderMovingObjects.map(s=>s.draggedObject),n=(oe.trackToItemsMap[oe.draggingOverTrack.id]||[]).filter(s=>!t.includes(s)),i=n.find(s=>Jl(t,s.getBoundingRect()));oe.placeholderMovingObjects.forEach(s=>{const a=s.draggedObject;a?.setCoords(),o3(s);const c=a3(a,n,i,oe.placeholderMovingObjects.length>1);e.trackIdAfterTransform=oe.trackTopToIdMap[c.top],e.positionAfterTransform[a?.id]={top:c.top,left:c.left},s.left=c.left,s.top=c.top})},5),a3=(r,e,t,n)=>!c3(r)||n&&t?Rw(r):t?l3(r,t,e):d3(r),c3=r=>oe.draggingOverTrack?oe.draggingOverTrack.accepts?.includes(r.type)??!1:!1,Rw=r=>({top:oe.objectInitialPositions[r.id].top,left:oe.objectInitialPositions[r.id].left}),l3=(r,e,t)=>{const n=u3(r,e);return!h3(t,r,n)||oe.activeObjects.length!==1?Rw(r):{left:n,top:e.top}},u3=(r,e)=>{const t=r.left+r.width/2,n=e.left+e.width/2;return t<n?e.left-r.width:e.left+e.width},h3=(r,e,t)=>!(t<0||Jl(r,{...e.getBoundingRect(),left:t})),d3=r=>({left:r.getBoundingRect().left,top:oe.draggingOverTrack?.top??0});function f3(r,e){let t=null;return function(...n){const i=Date.now();(t===null||i-t>=e)&&(t=i,r(...n))}}function g3(r){const e=r.target,t=e.canvas,n=e.top,i=-e.height*.75,s=t.height+e.height*.75;e.top=Math.min(Math.max(n,i),s-e.height);const a=e.left;e.left=Math.max(a,0)}const p3=r=>{r.on("object:moving",Iw.bind(r)),r.on("object:moving",Dw)},m3=r=>{r.off("object:moving",Iw.bind(r)),r.off("object:moving",Dw)};function jw(){const r=this,e=r.getActiveObject(),t=r.getActiveObjects().map(n=>n.id);e instanceof Qr?(e.borderColor="rgba(0, 216, 214, 0.75)",e.hasControls=!1,e.hoverCursor="default",e.borderScaleFactor=1,e.padding=0,e.getObjects().forEach(n=>{n.setSelected(!0)})):e?.setSelected(!0),this.setActiveIds(t)}function Lw(r){const e=this,t=e.getActiveObject();t instanceof Qr&&(t.borderColor="transparent",t.hasControls=!1,t.hoverCursor="default"),r.selected.forEach(i=>{i.setSelected(!0)}),r.deselected.forEach(i=>{i.setSelected(!1)});const n=e.getActiveObjects().map(i=>i.id);this.setActiveIds(n)}function Fw(r){this.getObjects().forEach(t=>{t.isSelected&&(t.isSelected=!1)}),r.deselected.forEach(t=>{t.setSelected(!1)});const e=this.getActiveObjects().map(t=>t.id);this.setActiveIds(e)}const v3=r=>{r.on("selection:created",jw),r.on("selection:updated",Lw),r.on("selection:cleared",Fw)},y3=r=>{r.off("selection:created",jw),r.off("selection:updated",Lw),r.off("selection:cleared",Fw)};let Nw,Bw,Vw;const b3=r=>{const{state:e}=r;Nw=e.subscribeToActiveIds(({activeIds:t})=>{if(t.length===1){const n=t[0],{trackItemIds:i,trackItemsMap:s}=e.getState();i.forEach(a=>{s[a].type}),r.selectTrackItemByIds([n])}else r.selectTrackItemByIds(t)}),Bw=e.subscribeToHistory(t=>{const{tracks:n,trackItemsMap:i,trackItemIds:s,trackItemDetailsMap:a}=t;r.tracks=n,r.trackItemsMap=i,r.trackItemIds=s,r.trackItemDetailsMap=a,r.renderTracks(),r.updateTrackItemsToHistory(),r.alignItemsToTrack(),r.calcBounding(),r.updateTransitions(),r.duration=Sn(r.trackItemsMap)}),Vw=e.subscribeToAddOrRemoveItems(()=>{const t=r.getTrackItems().map(c=>c.id),{trackItemIds:n,trackItemsMap:i,trackItemDetailsMap:s}=e.getState(),a=[];t.forEach(c=>{n.includes(c)||a.push(c)}),r.deleteTrackItemById(a),r.tracks=e.getState().tracks,r.trackItemsMap=i,r.trackItemDetailsMap=s,n.forEach(c=>{if(!t.includes(c)){const u={...i[c],details:{...s[c].details}};r.addTrackItem(u)}}),r.renderTracks(),r.alignItemsToTrack(),n.forEach(c=>{r.updateTrackItemCoords(c)}),r.updateTransitions(),r.updateTrackCoords()})},w3=r=>{Nw.unsubscribe(),Bw.unsubscribe(),Vw.unsubscribe()};function Hw(r){const{isSecondaryOverlapped:e,secondaryTracks:t,primaryTracks:n,primaryPositions:i}=r,{trackId:s,positions:a}=i,c=this.tracks.findIndex(v=>v.id===s),u=Nh(Object.keys(t).map(v=>t[v].objects.map(b=>b.id))),h=Zo(this.tracks,[...Object.keys(a),...u]);Object.keys(n).forEach(v=>{this.pauseEventListeners();const{objects:b}=n[v];b.forEach(C=>{const T=a[C.id];C.left=T.left}),this.resumeEventListeners();const S=h.find(C=>C.id===s);S&&S.items.push(...Object.keys(a)),this.tracks=h});const d=this.tracks[c],g=[];Object.keys(t).forEach(v=>{const{objects:b,index:S}=t[v],C=b.map(A=>A.id),[T]=C,k=this.trackItemsMap[T];if(e){const A={id:zt(),items:C,type:k.type,accepts:this.acceptsMap?.[k.type],tempIndex:S};g.push(A)}else{const A=h[c+S];A&&A.items.push(...C),this.tracks=h}});const p=Bh(d,g);p.length&&h.splice(c,1,...p),this.tracks=h,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}function zw({trackItemIds:r,isOverlapped:e}){const[t]=r;if(t){if(!this.getObjects("Transition").find(n=>n.id===t)){const n=this.tracks.find(i=>i.items.includes(t));if(e){const i=_3(this.tracks,r),s={id:zt(),items:[t],type:n?.type,accepts:n?.accepts},a=this.tracks.findIndex(c=>c.id===n?.id);i.splice(a,0,s),this.tracks=i}}this.renderTracks(),this.alignItemsToTrack(),this.alignTransitionsToTrack(),this.updateTransitions(),this.updateTrackItemsPosition(),this.updateState({updateHistory:!0,kind:"update"})}}function _3(r,e){return r.map(t=>({...t,items:t.items.filter(n=>!e.includes(n))}))}function Ww(r){const{secondaryTracks:e,primaryTracks:t,primaryPositions:n}=r,{positions:i,trackIndex:s}=n,a=s===-1?this.tracks.length:s,[c]=Object.keys(t),u=this.tracks.find(S=>S.id==c),h=t[c],d={id:zt(),items:h.objects.map(S=>S.id),type:u?.type,accepts:u?.accepts},g=Nh(Object.keys(e).map(S=>e[S].objects.map(C=>C.id))),p=Zo(this.tracks,[...Object.keys(i),...g]),v=[];Object.keys(e).forEach(S=>{const{objects:C,index:T}=e[S],k=this.tracks.find(R=>R.id==S),A=C.map(R=>R.id),M={id:zt(),items:A,type:k?.type,accepts:k?.accepts,tempIndex:T};v.push(M)});const b=Bh(d,v);b.length&&p.splice(a,0,...b),this.tracks=p,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}const S3=r=>{r.on("track:create",Ww.bind(r)),r.on("track-items:resized",zw.bind(r)),r.on("track-items:moved",Hw.bind(r))},x3=r=>{r.off("track:create",Ww.bind(r)),r.off("track-items:resized",zw.bind(r)),r.off("track-items:moved",Hw.bind(r))},Uw=r=>{UR(r),JR(r),t3(r),p3(r),S3(r),v3(r),WP(r),b3(r)},$w=r=>{$R(r),QR(r),r3(r),m3(r),x3(r),y3(r),UP(r),w3()},C3={video:["*"],image:["*"],audio:["*"],text:["*"]},T3=["video","image","audio","text"];let Ql=class extends wf{acceptsMap;tracks=[];trackItemsMap={};trackItemIds=[];transitionIds=[];transitionsMap={};trackItemDetailsMap={};bounding;onScroll;tScale;store;state;activeIds=[];spacing;scale;sizesMap;duration;setupFabricDefaults(){dt.ownDefaults.borderColor="transparent",dt.ownDefaults.cornerColor="white",dt.ownDefaults.cornerStrokeColor="transparent",dt.ownDefaults.strokeWidth=0,dt.ownDefaults.borderOpacityWhenMoving=1,dt.ownDefaults.borderScaleFactor=1,dt.ownDefaults.cornerSize=8,dt.ownDefaults.cornerStyle="rect",dt.ownDefaults.centeredScaling=!1,dt.ownDefaults.centeredRotation=!0,dt.ownDefaults.transparentCorners=!1}constructor(e,t){super(e,t),this.bounding=t.bounding||{width:t.width||0,height:t.height||0},this.spacing={left:16,right:80,...t.spacing};const n=this.viewportTransform;n[4]=this.spacing.left,this.tScale=t.tScale||1/300,this.store=t.store,this.state=t.state,this.scale=t.scale,this.onScroll=t.onScroll,this.acceptsMap=this.createAcceptsItemMap(t.acceptsMap),this.sizesMap=Zb(t.sizesMap),this.setupFabricDefaults(),this.initEventListeners()}createAcceptsItemMap(e=C3){const t={};return Object.keys(e).forEach(n=>{const i=e[n];t[n]=i.includes("*")?T3:i}),t}setActiveIds(e){this.activeIds=e,this.getObjects("Transition").some(n=>e.includes(n.id))||(this.state?.updateState({activeIds:it.cloneDeep(this.activeIds)}),Qe.dispatch(Nm,{payload:{activeIds:this.activeIds}}))}purge(){$w(this),this.dispose()}static registerItems(e){Object.keys(e).forEach(t=>{le.setClass(e[t],t)})}initEventListeners(){Uw(this)}getUpdatedState(){const e=Sn(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,scale:this.scale,duration:e}}getState(){const e=Sn(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,trackItemDetailsMap:this.trackItemDetailsMap,scale:this.scale,duration:e}}notify(e={updateHistory:!1}){const t=this.getUpdatedState();this.state.updateState(t,e)}updateState(e){this.updateTracksState(),this.updateTrackItemsState(),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords();const t=this.getUpdatedState();this.state.updateState(t,e)}scrollTo({scrollLeft:e,scrollTop:t}){const n=[...this.viewportTransform];let i=!1;if(typeof e=="number"&&(n[4]=-e+this.spacing.left,i=!0),typeof t=="number"&&(n[5]=-t,i=!0),i){this.viewportTransform=n;const s=this.getActiveObject();s&&s.setCoords(),this.requestRenderAll()}}setBoundingBox(e){this.bounding=e}calcBounding(){const e=this.getTrackItems().reduce((t,n)=>{const{left:i,top:s,width:a,height:c}=n.getBoundingRect();return{left:Math.min(t.left,i),top:Math.min(t.top,s),width:Math.max(t.width,i+a),height:Math.max(t.height,s+c)}},{left:1/0,top:1/0,width:this.width,height:0});this.bounding=e,Qe.dispatch(Ch,{payload:{bounding:e}})}setScale(e){this.pauseEventListeners(),this.tScale=e.zoom,this.scale=e;const t=this.getState();this.getObjects("Video","Image","Text","Audio").forEach(n=>{const i=t.trackItemsMap[n.id],{from:s,to:a}=i.display,c=Rt(s,this.tScale),u=Rt(a-s,this.tScale,n.playbackRate);n.set({left:c,width:u,tScale:e.zoom}),n.setCoords()}),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords(),this.updateTransitions(!1),this.resumeEventListeners(),this.notify()}setViewportPos(e,t){const n=this.getViewportPos(e,t),i=this.viewportTransform;i[4]=n.x,i[5]=n.y,this.requestRenderAll(),this.setActiveTrackItemCoords();const s=this.onScroll;s&&s.call(this,{scrollTop:n.y,scrollLeft:n.x-this.spacing.left})}getViewportPos(e,t){const n=this.bounding.width-100>=this.width?this.spacing.right:0,i=this.width-this.bounding.width-n,s=this.spacing.left,a=Math.max(i,Math.min(e,s));if(this.bounding.height<this.height)return{x:a,y:0};const c=this.height-this.bounding.height-40,u=Math.max(c,Math.min(t,0));return{x:a,y:u}}};Lb(Ql,[kb,nw,sw,aw]);function Yw(r){const e=Qe.subject.pipe(Yi(({key:t})=>t.startsWith(Vm))).subscribe(t=>{if(t.key===Sh){const n=t.value;r.setScale(n?.payload.scale??void 0)}});return{unsubscribe:()=>{e.unsubscribe()}}}Ql.registerItems({Text:Lf,Image:ew,Video:Qb,Audio:Jb,Track:tw,Helper:rw});const E3=({stateManager:r})=>{const e=m.useRef(!1),[t,n]=m.useState(0),i=m.useRef(null),s=m.useRef(null),a=m.useRef(null),c=m.useRef(null),u=m.useRef(null),[h,d]=m.useState({width:0,height:0}),[g,p]=m.useState({width:0,height:0}),{scale:v,playerRef:b,fps:S,setState:C,timeline:T}=mi(),{setTimeline:k}=mi(),A=Cc(b??void 0),M=V=>{u.current&&c.current&&(c.current.scrollTop=-V.scrollTop,u.current.scrollLeft=-V.scrollLeft,n(-V.scrollLeft))};m.useEffect(()=>{const V=Rt(A/S*1e3,v.zoom),G=s.current?.getBoundingClientRect().x+s.current?.clientWidth;if(V-t+40>=G){const J=u.current?.clientWidth,q=u.current?.scrollWidth,Z=u.current?.scrollLeft,ye=(q-(J+Z))/J;ye>=0&&(ye>1?u.current?.scrollTo({left:Z+J}):u.current?.scrollTo({left:q-J}))}},[A]),m.useEffect(()=>{const V=s.current,G=i.current;if(!V||!G)return;const X=G.clientWidth,J=G.clientHeight,q=new Ql(V,{width:X,height:J,bounding:{width:X,height:0},selectionColor:"rgba(0, 216, 214,0.1)",selectionBorderColor:"rgba(0, 216, 214,1.0)",onScroll:M,state:r,scale:v,spacing:{left:xc,right:Lh}}),Z=Yw(q);a.current=q,d({width:X,height:J}),p({width:X,height:0}),k(q);const ae=r.subscribeToSize(W=>{C(W)}),ye=r.subscribeToScale(W=>{C(W)}),ee=r.subscribeToTracks(W=>{C(W)}),me=r.subscribeToDuration(W=>{C(W)}),fe=r.subscribeToUpdateTrackItem(()=>{const W=r.getState();C({duration:W.duration,trackItemsMap:W.trackItemsMap})}),ie=r.subscribeToAddOrRemoveItems(()=>{const W=r.getState();C({trackItemDetailsMap:W.trackItemDetailsMap,trackItemsMap:W.trackItemsMap,trackItemIds:W.trackItemIds,tracks:W.tracks})}),P=r.subscribeToUpdateItemDetails(()=>{const W=r.getState();C({trackItemDetailsMap:W.trackItemDetailsMap})});return()=>{Z.unsubscribe(),q.purge(),ye.unsubscribe(),ee.unsubscribe(),me.unsubscribe(),ie.unsubscribe(),fe.unsubscribe(),P.unsubscribe(),ae.unsubscribe()}},[]),m.useEffect(()=>{const G=Qe.subject.pipe(Yi(({key:X})=>X.startsWith(zm))).subscribe(X=>{if(X.key===Ch){const J=X.value?.payload?.bounding;J&&p({width:J.width,height:J.height})}});return()=>{G.unsubscribe()}},[]);const R=V=>{const G=V.currentTarget.scrollLeft;e.current&&a.current.scrollTo({scrollLeft:G}),n(G)},N=V=>{const G=V.currentTarget.scrollTop;e.current&&a.current.scrollTo({scrollTop:G})};m.useEffect(()=>{const V=u.current?.scrollWidth;if(!V||!T)return;const G=T.width;V<G+t&&T.scrollTo({scrollLeft:V-G})},[v]);const $=V=>{if(!a.current)return;const X=pi(V,v.zoom);b?.current?.seekTo(X*S/1e3)};return w.jsxs("div",{className:"relative overflow-hidden h-80 w-full",children:[w.jsx(Tv,{}),w.jsx(hy,{onClick:$,scrollLeft:t}),w.jsx(uy,{scrollLeft:t}),w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"relative w-10 flex-none"}),w.jsxs("div",{className:"relative h-[230px] flex-1",children:[w.jsx("div",{ref:i,className:"absolute top-0 h-[230px] w-full text-sm text-white ",children:w.jsx("canvas",{ref:s,id:"designcombo-timeline-canvas"})}),w.jsxs(pc,{type:"always",style:{position:"absolute",width:"calc(100vw - 40px)",height:"10px"},className:"ScrollAreaRootH",children:[w.jsx(lh,{onScroll:R,className:"ScrollAreaViewport",id:"viewportH",ref:u,children:w.jsx("div",{style:{width:g.width>h.width?g.width+Lh:g.width},className:"pointer-events-none h-[10px]"})}),w.jsx(hm,{className:"ScrollAreaScrollbar",orientation:"horizontal",children:w.jsx(dm,{className:"ScrollAreaThumb",onMouseDown:()=>{e.current=!0},onMouseUp:()=>{e.current=!1}})})]}),w.jsxs(pc,{type:"always",style:{position:"absolute",height:"230px",width:"10px"},className:"ScrollAreaRootV",children:[w.jsx(lh,{onScroll:N,className:"ScrollAreaViewport",ref:c,children:w.jsx("div",{style:{height:g.height>h.height?g.height+40:h.height},className:"pointer-events-none w-[10px]"})}),w.jsx(hm,{className:"ScrollAreaScrollbar",orientation:"vertical",children:w.jsx(dm,{className:"ScrollAreaThumb",onMouseDown:()=>{e.current=!0},onMouseUp:()=>{e.current=!1}})})]})]})]})]})},k3={Date:!0,RegExp:!0,String:!0,Number:!0};function Xw(r,e,t={cyclesFix:!0},n=[]){let i=[];const s=Array.isArray(r);for(const c in r){const u=r[c],h=s?+c:c;if(!(c in e)){i.push({type:"REMOVE",path:[h],oldValue:r[c]});continue}const d=e[c],g=typeof u=="object"&&typeof d=="object"&&Array.isArray(u)===Array.isArray(d);u&&d&&g&&!k3[Object.getPrototypeOf(u)?.constructor?.name]&&(!t.cyclesFix||!n.includes(u))?i.push.apply(i,Xw(u,d,t,t.cyclesFix?n.concat([u]):[]).map(p=>(p.path.unshift(h),p))):u!==d&&!(Number.isNaN(u)&&Number.isNaN(d))&&!(g&&(isNaN(u)?u+""==d+"":+u==+d))&&i.push({path:[h],type:"CHANGE",value:d,oldValue:u})}const a=Array.isArray(e);for(const c in e)c in r||i.push({type:"CREATE",path:[a?+c:c],value:e[c]});return i}var Xf=Symbol.for("immer-nothing"),ja=Symbol.for("immer-draftable"),Hr=Symbol.for("immer-state"),Gw=process.env.NODE_ENV!=="production"?[function(r){return`The plugin for '${r}' has not been loaded into Immer. To enable the plugin, import and call \`enable${r}()\` when initializing your application.`},function(r){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${r}'`},"This object has been frozen and should not be mutated",function(r){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+r},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(r){return`'current' expects a draft, got: ${r}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(r){return`'original' expects a draft, got: ${r}`}]:[];function $t(r,...e){if(process.env.NODE_ENV!=="production"){const t=Gw[r],n=typeof t=="function"?t.apply(null,e):t;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var bs=Object.getPrototypeOf;function ws(r){return!!r&&!!r[Hr]}function Pi(r){return r?qw(r)||Array.isArray(r)||!!r[ja]||!!r.constructor?.[ja]||Na(r)||Ba(r):!1}var O3=Object.prototype.constructor.toString();function qw(r){if(!r||typeof r!="object")return!1;const e=bs(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===O3}function La(r,e){_s(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,n)=>e(n,t,r))}function _s(r){const e=r[Hr];return e?e.type_:Array.isArray(r)?1:Na(r)?2:Ba(r)?3:0}function Fa(r,e){return _s(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function Gf(r,e){return _s(r)===2?r.get(e):r[e]}function Kw(r,e,t){const n=_s(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function A3(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function Na(r){return r instanceof Map}function Ba(r){return r instanceof Set}function Ss(r){return r.copy_||r.base_}function qf(r,e){if(Na(r))return new Map(r);if(Ba(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=qw(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[Hr];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],c=n[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:r[a]})}return Object.create(bs(r),n)}else{const n=bs(r);if(n!==null&&t)return{...r};const i=Object.create(n);return Object.assign(i,r)}}function Kf(r,e=!1){return eu(r)||ws(r)||!Pi(r)||(_s(r)>1&&(r.set=r.add=r.clear=r.delete=I3),Object.freeze(r),e&&Object.entries(r).forEach(([t,n])=>Kf(n,!0))),r}function I3(){$t(2)}function eu(r){return Object.isFrozen(r)}var Zf={};function xs(r){const e=Zf[r];return e||$t(0,r),e}function M3(r,e){Zf[r]||(Zf[r]=e)}var Va;function Zw(){return Va}function P3(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Jw(r,e){e&&(xs("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function Jf(r){Qf(r),r.drafts_.forEach(D3),r.drafts_=null}function Qf(r){r===Va&&(Va=r.parent_)}function Qw(r){return Va=P3(Va,r)}function D3(r){const e=r[Hr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function e_(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[Hr].modified_&&(Jf(e),$t(4)),Pi(r)&&(r=tu(e,r),e.parent_||ru(e,r)),e.patches_&&xs("Patches").generateReplacementPatches_(t[Hr].base_,r,e.patches_,e.inversePatches_)):r=tu(e,t,[]),Jf(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==Xf?r:void 0}function tu(r,e,t){if(eu(e))return e;const n=e[Hr];if(!n)return La(e,(i,s)=>t_(r,n,e,i,s,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return ru(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let s=i,a=!1;n.type_===3&&(s=new Set(i),i.clear(),a=!0),La(s,(c,u)=>t_(r,n,i,c,u,t,a)),ru(r,i,!1),t&&r.patches_&&xs("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function t_(r,e,t,n,i,s,a){if(process.env.NODE_ENV!=="production"&&i===t&&$t(5),ws(i)){const c=s&&e&&e.type_!==3&&!Fa(e.assigned_,n)?s.concat(n):void 0,u=tu(r,i,c);if(Kw(t,n,u),ws(u))r.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Pi(i)&&!eu(i)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;tu(r,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&ru(r,i)}}function ru(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&Kf(e,t)}function R3(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:Zw(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=eg;t&&(i=[n],s=Ha);const{revoke:a,proxy:c}=Proxy.revocable(i,s);return n.draft_=c,n.revoke_=a,c}var eg={get(r,e){if(e===Hr)return r;const t=Ss(r);if(!Fa(t,e))return j3(r,t,e);const n=t[e];return r.finalized_||!Pi(n)?n:n===tg(r.base_,e)?(ng(r),r.copy_[e]=ig(n,r)):n},has(r,e){return e in Ss(r)},ownKeys(r){return Reflect.ownKeys(Ss(r))},set(r,e,t){const n=r_(Ss(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=tg(Ss(r),e),s=i?.[Hr];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(A3(t,i)&&(t!==void 0||Fa(r.base_,e)))return!0;ng(r),rg(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return tg(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,ng(r),rg(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Ss(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){$t(11)},getPrototypeOf(r){return bs(r.base_)},setPrototypeOf(){$t(12)}},Ha={};La(eg,(r,e)=>{Ha[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ha.deleteProperty=function(r,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&$t(13),Ha.set.call(this,r,e,void 0)},Ha.set=function(r,e,t){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&$t(14),eg.set.call(this,r[0],e,t,r[0])};function tg(r,e){const t=r[Hr];return(t?Ss(t):r)[e]}function j3(r,e,t){const n=r_(e,t);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function r_(r,e){if(!(e in r))return;let t=bs(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=bs(t)}}function rg(r){r.modified_||(r.modified_=!0,r.parent_&&rg(r.parent_))}function ng(r){r.copy_||(r.copy_=qf(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var L3=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(u=s,...h){return a.produce(u,d=>t.call(this,d,...h))}}typeof t!="function"&&$t(6),n!==void 0&&typeof n!="function"&&$t(7);let i;if(Pi(e)){const s=Qw(this),a=ig(e,void 0);let c=!0;try{i=t(a),c=!1}finally{c?Jf(s):Qf(s)}return Jw(s,n),e_(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===Xf&&(i=void 0),this.autoFreeze_&&Kf(i,!0),n){const s=[],a=[];xs("Patches").generateReplacementPatches_(e,i,s,a),n(s,a)}return i}else $t(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...c)=>this.produceWithPatches(a,u=>e(u,...c));let n,i;return[this.produce(e,t,(a,c)=>{n=a,i=c}),n,i]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){Pi(r)||$t(8),ws(r)&&(r=F3(r));const e=Qw(this),t=ig(r,void 0);return t[Hr].isManual_=!0,Qf(e),t}finishDraft(r,e){const t=r&&r[Hr];(!t||!t.isManual_)&&$t(9);const{scope_:n}=t;return Jw(n,e),e_(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=xs("Patches").applyPatches_;return ws(r)?n(r,e):this.produce(r,i=>n(i,e))}};function ig(r,e){const t=Na(r)?xs("MapSet").proxyMap_(r,e):Ba(r)?xs("MapSet").proxySet_(r,e):R3(r,e);return(e?e.scope_:Zw()).drafts_.push(t),t}function F3(r){return ws(r)||$t(10,r),n_(r)}function n_(r){if(!Pi(r)||eu(r))return r;const e=r[Hr];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=qf(r,e.scope_.immer_.useStrictShallowCopy_)}else t=qf(r,!0);return La(t,(n,i)=>{Kw(t,n,n_(i))}),e&&(e.finalized_=!1),t}function i_(){process.env.NODE_ENV!=="production"&&Gw.push('Sets cannot have "replace" patches.',function(p){return"Unsupported patch operation: "+p},function(p){return"Cannot apply patch, path doesn't resolve: "+p},"Patching reserved attributes like __proto__, prototype and constructor is not allowed");const e="replace",t="add",n="remove";function i(p,v,b,S){switch(p.type_){case 0:case 2:return a(p,v,b,S);case 1:return s(p,v,b,S);case 3:return c(p,v,b,S)}}function s(p,v,b,S){let{base_:C,assigned_:T}=p,k=p.copy_;k.length<C.length&&([C,k]=[k,C],[b,S]=[S,b]);for(let A=0;A<C.length;A++)if(T[A]&&k[A]!==C[A]){const M=v.concat([A]);b.push({op:e,path:M,value:g(k[A])}),S.push({op:e,path:M,value:g(C[A])})}for(let A=C.length;A<k.length;A++){const M=v.concat([A]);b.push({op:t,path:M,value:g(k[A])})}for(let A=k.length-1;C.length<=A;--A){const M=v.concat([A]);S.push({op:n,path:M})}}function a(p,v,b,S){const{base_:C,copy_:T}=p;La(p.assigned_,(k,A)=>{const M=Gf(C,k),R=Gf(T,k),N=A?Fa(C,k)?e:t:n;if(M===R&&N===e)return;const $=v.concat(k);b.push(N===n?{op:N,path:$}:{op:N,path:$,value:R}),S.push(N===t?{op:n,path:$}:N===n?{op:t,path:$,value:g(M)}:{op:e,path:$,value:g(M)})})}function c(p,v,b,S){let{base_:C,copy_:T}=p,k=0;C.forEach(A=>{if(!T.has(A)){const M=v.concat([k]);b.push({op:n,path:M,value:A}),S.unshift({op:t,path:M,value:A})}k++}),k=0,T.forEach(A=>{if(!C.has(A)){const M=v.concat([k]);b.push({op:t,path:M,value:A}),S.unshift({op:n,path:M,value:A})}k++})}function u(p,v,b,S){b.push({op:e,path:[],value:v===Xf?void 0:v}),S.push({op:e,path:[],value:p})}function h(p,v){return v.forEach(b=>{const{path:S,op:C}=b;let T=p;for(let R=0;R<S.length-1;R++){const N=_s(T);let $=S[R];typeof $!="string"&&typeof $!="number"&&($=""+$),(N===0||N===1)&&($==="__proto__"||$==="constructor")&&$t(19),typeof T=="function"&&$==="prototype"&&$t(19),T=Gf(T,$),typeof T!="object"&&$t(18,S.join("/"))}const k=_s(T),A=d(b.value),M=S[S.length-1];switch(C){case e:switch(k){case 2:return T.set(M,A);case 3:$t(16);default:return T[M]=A}case t:switch(k){case 1:return M==="-"?T.push(A):T.splice(M,0,A);case 2:return T.set(M,A);case 3:return T.add(A);default:return T[M]=A}case n:switch(k){case 1:return T.splice(M,1);case 2:return T.delete(M);case 3:return T.delete(b.value);default:return delete T[M]}default:$t(17,C)}}),p}function d(p){if(!Pi(p))return p;if(Array.isArray(p))return p.map(d);if(Na(p))return new Map(Array.from(p.entries()).map(([b,S])=>[b,d(S)]));if(Ba(p))return new Set(Array.from(p).map(d));const v=Object.create(bs(p));for(const b in p)v[b]=d(p[b]);return Fa(p,ja)&&(v[ja]=p[ja]),v}function g(p){return ws(p)?d(p):p}M3("Patches",{applyPatches_:h,generatePatches_:i,generateReplacementPatches_:u})}var zr=new L3,N3=zr.produce;zr.produceWithPatches.bind(zr),zr.setAutoFreeze.bind(zr),zr.setUseStrictShallowCopy.bind(zr);var B3=zr.applyPatches.bind(zr);zr.createDraft.bind(zr),zr.finishDraft.bind(zr);function V3(r){const e=r.value,t=[];if(e?.payload?.trackItemIds){const n=e.payload.trackItemIds;t.push(n),this.updateState({activeIds:t})}if(r.key===vh){const n=r.value?.payload.trackItemIds,i=it.cloneDeep(this.getState()),s=n?.length?n:i.activeIds,a=i.trackItemIds.filter(g=>!s.includes(g)),c=Object.fromEntries(Object.entries(i.trackItemDetailsMap).filter(([g])=>!s.includes(g))),u=zb(i.tracks,s),h=Object.fromEntries(Object.entries(i.trackItemsMap).filter(([g])=>!s.includes(g))),d=Sn(h);this.updateState({trackItemIds:a,trackItemDetailsMap:c,activeIds:[],trackItemsMap:h,tracks:u,duration:d},{updateHistory:!0,kind:"remove"})}if(r.key===yh){const n=it.cloneDeep(this.getState()),i=[],s=r.value?.payload.trackItemIds||n.activeIds;if(s.length===0)return;s.forEach(c=>{const u=n.trackItemsMap[c],h=n.trackItemDetailsMap[c],d=zt();i.push(d),n.trackItemsMap={...n.trackItemsMap,[d]:{...it.cloneDeep(u),id:d}},n.trackItemDetailsMap={...n.trackItemDetailsMap,[d]:{...it.cloneDeep(h)}},n.trackItemIds.push(d)});const a=n.tracks.map(c=>{const u={...c,id:zt(),items:c.items.filter(h=>s.includes(h)).map(h=>{const d=s.indexOf(h);return i[d]})};return u.items.length?u:null}).filter(Boolean);n.tracks.unshift(...a),this.updateState({trackItemDetailsMap:n.trackItemDetailsMap,tracks:n.tracks,trackItemIds:n.trackItemIds,trackItemsMap:n.trackItemsMap},{updateHistory:!0,kind:"update"})}if(r.key===bh){const n=it.cloneDeep(this.getState()),i=r.value?.options.time;if(n.activeIds.length!==1)return;const s=n.activeIds[0],a=n.trackItemsMap[s];if(i<=a.display.from||i>=a.display.to)return;const c=zt(),u={...a,id:c,display:{from:i,to:a.display.to},trim:{from:i,to:a.display.to}};n.trackItemsMap[s].display.to=i,n.trackItemsMap[c]=u,n.trackItemDetailsMap[c]=n.trackItemDetailsMap[s],n.trackItemIds.push(c),n.tracks.forEach(h=>{h.items.includes(s)&&h.items.push(c)}),this.updateState({trackItemsMap:n.trackItemsMap,trackItemDetailsMap:n.trackItemDetailsMap,trackItemIds:n.trackItemIds,tracks:n.tracks},{updateHistory:!0,kind:"update"})}}async function H3(r){if(r.key==="scene:load"){const e=r.value?.payload,t=e.size,n=e.trackItemIds,i=e.trackItemsMap,s=e.trackItemDetailsMap;if(!n)return;const a=n?.map(async u=>{try{const h=s[u],d=i[u];if(h.type==="text"){const g=await jf({id:u,details:h.details,...d},{size:t}),{details:p,...v}=g;s[u]={type:"text",details:p},i[u]=v}return!0}catch{return!1}});await Promise.all(a);const c=Sn(i);this.updateState({...e,trackItemsMap:i,duration:c})}}async function z3(r){const e=it.cloneDeep(this.getState()),t=r.value?.options?.trackId,n=r.value?.options?.trackIndex;let i=[],s;if(r.key===Hs){s="video";const c=await Ub(r.value?.payload,{size:e.size}),{details:u,...h}=c;e.trackItemDetailsMap[h.id]={type:s,details:u},e.trackItemsMap[h.id]=h,e.trackItemIds.push(h.id),i=[h.id]}if(r.key===Ws){s="image";const c=await Wb(r.value?.payload,{size:e.size}),{details:u,...h}=c;e.trackItemDetailsMap[h.id]={type:s,details:u},e.trackItemsMap[h.id]=h,e.trackItemIds.push(h.id),i=[h.id]}if(r.key===zs){s="audio";const c=await $b(r.value?.payload),{details:u,...h}=c;e.trackItemDetailsMap[h.id]={type:s,details:u},e.trackItemsMap[h.id]=h,e.trackItemIds.push(h.id),i=[h.id]}if(r.key===mh){s="text";const{details:c,...u}=await jf(r.value?.payload??void 0,{size:e.size});e.trackItemDetailsMap[u.id]={type:s,details:c},e.trackItemsMap[u.id]=u,e.trackItemIds.push(u.id),i.push(u.id)}const a=W3(i,e.tracks,e.trackItemsMap,t,n);if(a.trackId)e.tracks.find(u=>u.id===a.trackId)?.items.push(...i);else if(a.trackIndex!==void 0){const c=s_(s,i);e.tracks.splice(a.trackIndex,0,c)}else{const c=s_(s,i);e.tracks.unshift(c)}e.duration=Sn(e.trackItemsMap),this.updateState({trackItemIds:e.trackItemIds,trackItemDetailsMap:e.trackItemDetailsMap,trackItemsMap:e.trackItemsMap,tracks:e.tracks,duration:e.duration,structure:e.structure},{updateHistory:!0,kind:"add"})}function s_(r,e){return{id:zt(),accepts:["text","audio","helper","video","image"],type:r,items:e,magnetic:!1,static:!1}}const W3=(r,e,t,n,i)=>{if(n===void 0&&i===void 0)return{trackId:void 0,trackIndex:void 0};const s=i!==void 0?e[Math.max(0,Math.min(i,e.length-1))]:e.find(u=>u.id===n);if(!s)return{trackId:void 0,trackIndex:i!==void 0?Math.max(0,Math.min(i,e.length-1)):void 0};const a=s.items.map(u=>t[u]),c=r.map(u=>t[u]);for(const u of a){const h=u.display.from,d=u.display.to;for(const g of c){const p=g.display.from;if(!(g.display.to<=h||p>=d))return{trackId:void 0,trackIndex:e.indexOf(s)}}}return{trackId:s.id,trackIndex:e.indexOf(s)}},o_=["tracks","trackItemsMap","trackItemDetailsMap","transitionIds","transitionsMap","trackItemIds"],U3={size:{width:1080,height:1920},tracks:[],trackItemIds:[],trackItemsMap:{},transitionIds:[],transitionsMap:{},scale:{unit:1,zoom:1,segments:1,index:1},duration:0,activeIds:[],trackItemDetailsMap:{},structure:[]};class $3{stateSubject;stateHistorySubject;prevState;undos;redos;listener;constructor(e){this.stateSubject=null,this.stateHistorySubject=null,this.prevState=null,this.undos=[],this.redos=[],this.listener=null;const t=e||U3;this.stateSubject=new Zm(t),this.stateHistorySubject=new Zm({handleRedo:!1,handleUndo:!1}),this.prevState=t,this.initListeners()}initListeners(){a_(this)}destroyListeners(){this.listener&&this.listener.unsubscribe()}purge(){this.destroyListeners()}updateHistory(e,t){const n=it.pick(e,o_),i=it.pick(this.getState(),o_),s=Xw(i,n);s.length&&(this.undos.push({undos:s,type:t}),this.redos=[])}getStateHistory(){return this.stateHistorySubject.getValue()}subscribeHistory(e){return this.stateHistorySubject.subscribe(e)}getState(){return this.stateSubject.getValue()}subscribe(e){return this.stateSubject.subscribe(e)}updateState(e,t={updateHistory:!1,kind:void 0}){const n=this.getState(),i={...n,...e};if(!it.isEqual(n,i)){t.updateHistory&&this.updateHistory(i,t.kind);const{duration:s,trackItemsMap:a,...c}=n;this.prevState={...c,duration:this.prevState.duration,trackItemsMap:this.prevState.trackItemsMap},this.stateSubject.next(i)}}subscribeToSize(e){return this.stateSubject.asObservable().subscribe(t=>{it.isEqual(t.size,this.prevState.size)||e({size:t.size})})}subscribeToScale(e){return this.stateSubject.asObservable().subscribe(t=>{it.isEqual(t.scale,this.prevState.scale)||e({scale:t.scale})})}subscribeToUpdateTrackItem(e){return this.stateSubject.asObservable().subscribe(t=>{it.isEqual(t.trackItemsMap,this.prevState.trackItemsMap)||e({trackItemsMap:t.trackItemsMap})})}subscribeToUpdateItemDetails(e){return this.stateSubject.asObservable().subscribe(t=>{it.isEqual(t.trackItemDetailsMap,this.prevState.trackItemDetailsMap)||e({trackItemDetailsMap:t.trackItemDetailsMap})})}subscribeToDuration(e){return this.stateSubject.asObservable().subscribe(t=>{t.duration!==this.prevState.duration&&e({duration:t.duration})})}subscribeToHistory(e){return this.stateHistorySubject.asObservable().subscribe(t=>{if(t.handleRedo){const n=this.undos[this.undos.length-1]?.type;n==="update"&&e({...this.getState(),type:n}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}if(t.handleUndo){const n=this.redos[this.redos.length-1]?.type;n==="update"&&e({...this.getState(),type:n}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}})}subscribeToAddOrRemoveItems(e){return this.stateSubject.asObservable().subscribe(t=>{(!t.trackItemIds?.every(n=>this.prevState.trackItemIds?.includes(n))||!it.isEqual(t.tracks,this.prevState.tracks))&&e({trackItemIds:t.trackItemIds})})}subscribeToActiveIds(e){return this.stateSubject.asObservable().subscribe(t=>{it.isEqual(t.activeIds,this.prevState.activeIds)||e({activeIds:t.activeIds})})}subscribeToTracks(e){return this.stateSubject.asObservable().subscribe(t=>{(!it.isEqual(t.tracks,this.prevState.tracks)||!it.isEqual(t.trackItemIds,this.prevState.trackItemIds)||!it.isEqual(t.trackItemsMap,this.prevState.trackItemsMap)||!it.isEqual(t.transitionIds,this.prevState.transitionIds)||!it.isEqual(t.transitionsMap,this.prevState.transitionsMap)||!it.isEqual(t.trackItemDetailsMap,this.prevState.trackItemDetailsMap))&&e({tracks:t.tracks,trackItemIds:t.trackItemIds,trackItemsMap:t.trackItemsMap,transitionIds:t.transitionIds,transitionsMap:t.transitionsMap,trackItemDetailsMap:t.trackItemDetailsMap})})}undo(){const e=this.undos.pop(),t=e?.undos,n=e?.type;if(!t||!n)return;i_();const{trackItemDetailsMap:i,trackItemIds:s,tracks:a,transitionIds:c,transitionsMap:u,trackItemsMap:h}=this.getState(),d=it.cloneDeep({trackItemDetailsMap:i,trackItemIds:s,tracks:a,transitionIds:c,transitionsMap:u,trackItemsMap:h}),g=[],p=[],v=[],b=[],S=[],C=[];t.forEach(q=>{let Z;const ae=q.path.slice(1);q.type==="CREATE"?Z={path:ae,op:"remove",value:q.value}:q.type==="CHANGE"?Z={path:ae,op:"replace",value:q.oldValue}:Z={path:ae,op:"add",value:q.oldValue},q.path.includes("trackItemIds")?v.push(Z):q.path.includes("transitionIds")?p.push(Z):q.path.includes("trackItemsMap")?S.push(Z):q.path.includes("transitionsMap")?b.push(Z):q.path.includes("tracks")?g.push(Z):q.path.includes("trackItemDetailsMap")&&C.push(Z)});const T=this.applyPatch(d.tracks,g),k=this.applyPatch(d.transitionIds,p),A=this.applyPatch(d.trackItemIds,v),M=this.applyPatch(d.transitionsMap,b),R=this.applyPatch(d.trackItemsMap,S),N=this.applyPatch(d.trackItemDetailsMap,C),$=it.cloneDeep({tracks:T,transitionIds:k,trackItemIds:A,transitionsMap:M,trackItemsMap:R,trackItemDetailsMap:N}),V=it.cloneDeep(this.getState()),G={...V,...$};this.prevState=V;const X={redos:t,type:n};this.redos.push(X);const J=Sn(G.trackItemsMap);this.stateSubject.next({...G,duration:J}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!0})}redo(){const e=this.redos.pop();if(!e?.redos||!e?.type)return;i_();const t=this.getState(),{trackItemDetailsMap:n,trackItemIds:i,tracks:s,transitionIds:a,transitionsMap:c,trackItemsMap:u}=t,h=it.cloneDeep({trackItemDetailsMap:n,trackItemIds:i,tracks:s,transitionIds:a,transitionsMap:c,trackItemsMap:u}),d=[],g=[],p=[],v=[],b=[],S=[];e.redos.forEach(M=>{const R=M.path.slice(1);let N={};switch(M.type){case"CREATE":N={path:R,op:"add",value:M.value};break;case"CHANGE":N={path:R,op:"replace",value:M.value};break;case"REMOVE":N={path:R,op:"remove",value:M.oldValue};break;default:return null}M.path.includes("trackItemIds")?p.push(N):M.path.includes("transitionIds")?g.push(N):M.path.includes("trackItemsMap")?b.push(N):M.path.includes("transitionsMap")?v.push(N):M.path.includes("trackItemDetailsMap")?S.push(N):d.push(N)});const C={tracks:this.applyPatch(h.tracks,d),transitionIds:this.applyPatch(h.transitionIds,g),trackItemIds:this.applyPatch(h.trackItemIds,p),transitionsMap:this.applyPatch(h.transitionsMap,v),trackItemsMap:this.applyPatch(h.trackItemsMap,b),trackItemDetailsMap:this.applyPatch(h.trackItemDetailsMap,S)},T=it.cloneDeep(C),k={...it.cloneDeep(t),...T};this.prevState=t,this.undos.push({undos:e.redos,type:e.type});const A=Sn(k.trackItemsMap);this.stateSubject.next({...k,duration:A}),this.stateHistorySubject.next({handleRedo:!0,handleUndo:!1})}applyPatch(e,t){return t.reverse().reduce((n,i)=>N3(n,s=>{B3(s,[i])}),e)}}function a_(r){const e=Qe.subject.pipe(Yi(({key:s})=>s.startsWith(Bm))).subscribe(s=>{s.key===wh&&r.undo(),s.key===_h&&r.redo()}),t=Qe.subject.pipe(Yi(({key:s,value:a})=>s.startsWith(Rm))).subscribe(s=>{z3.bind(r)(s)}),n=Qe.subject.pipe(Yi(({key:s,value:a})=>s.startsWith("scene"))).subscribe(async s=>{await H3.bind(r)(s)}),i=Qe.subject.pipe(Yi(({key:s})=>s.startsWith(Fm))).subscribe(async s=>{V3.bind(r)(s)});return()=>{e.unsubscribe(),t.unsubscribe(),i.unsubscribe(),n.unsubscribe()}}I.ACTIVE_CLONE=yh,I.ACTIVE_DELETE=vh,I.ACTIVE_PASTE=G2,I.ACTIVE_PREFIX=Fm,I.ACTIVE_SET=X2,I.ACTIVE_SPLIT=bh,I.ADD_ANIMATION=L2,I.ADD_AUDIO=zs,I.ADD_IMAGE=Ws,I.ADD_MASK=R2,I.ADD_PLACEHOLDER=D2,I.ADD_PREFIX=Rm,I.ADD_SUFFIX=E2,I.ADD_TEXT=mh,I.ADD_TRANSITION=j2,I.ADD_VIDEO=Hs,I.AUDIOS=Ev,I.Audio=Jb,I.AudioObject=ei,I.BASE_TIMELINE_ELEMENT_DURATION_MS=BT,I.Button=or,I.CanvasMixin=kb,I.DEFAULT_AUDIO_BITRATE=WT,I.DEFAULT_AUDIO_SAMPLE_RATE=zT,I.DEFAULT_BLUR=IE,I.DEFAULT_BLUR_STEP=AE,I.DEFAULT_BRIGHTNESS=uE,I.DEFAULT_BRIGHTNESS_STEP=lE,I.DEFAULT_CONTRAST=SE,I.DEFAULT_CONTRAST_STEP=_E,I.DEFAULT_FADE_IN=QT,I.DEFAULT_FADE_OUT=eE,I.DEFAULT_FADE_STEP=JT,I.DEFAULT_FLIP_X=sE,I.DEFAULT_FLIP_Y=oE,I.DEFAULT_FONT=Vh,I.DEFAULT_FRAMERATE=ov,I.DEFAULT_MAX_BLUR=OE,I.DEFAULT_MAX_BRIGHTNESS=cE,I.DEFAULT_MAX_CONTRAST=wE,I.DEFAULT_MAX_FADE=ZT,I.DEFAULT_MAX_OPACITY=CE,I.DEFAULT_MAX_ROTATION=rE,I.DEFAULT_MAX_SATURATION=dE,I.DEFAULT_MAX_SPEED=PE,I.DEFAULT_MAX_TEMPERATURE=mE,I.DEFAULT_MAX_VOLUME=LE,I.DEFAULT_MEDIA_PANEL_WIDTH=XT,I.DEFAULT_MIN_BLUR=kE,I.DEFAULT_MIN_BRIGHTNESS=aE,I.DEFAULT_MIN_CONTRAST=bE,I.DEFAULT_MIN_FADE=KT,I.DEFAULT_MIN_OPACITY=xE,I.DEFAULT_MIN_ROTATION=tE,I.DEFAULT_MIN_SATURATION=hE,I.DEFAULT_MIN_SPEED=ME,I.DEFAULT_MIN_TEMPERATURE=pE,I.DEFAULT_MIN_VOLUME=jE,I.DEFAULT_OPACITY=EE,I.DEFAULT_OPACITY_STEP=TE,I.DEFAULT_PREVIEW_HEIGHT=$T,I.DEFAULT_PREVIEW_SCALE=jh,I.DEFAULT_PREVIEW_WIDTH=UT,I.DEFAULT_ROTATION=iE,I.DEFAULT_ROTATION_STEP=nE,I.DEFAULT_SATURATION=gE,I.DEFAULT_SATURATION_STEP=fE,I.DEFAULT_SETTINGS_PANEL_WIDTH=qT,I.DEFAULT_SPEED=RE,I.DEFAULT_SPEED_STEP=DE,I.DEFAULT_TEMPERATURE=yE,I.DEFAULT_TEMPERATURE_STEP=vE,I.DEFAULT_VIDEO_HEIGHT=sv,I.DEFAULT_VIDEO_MAX_BITRATE=HT,I.DEFAULT_VIDEO_MIN_BITRATE=VT,I.DEFAULT_VIDEO_WIDTH=iv,I.DEFAULT_VOLUME=NE,I.DEFAULT_VOLUME_STEP=FE,I.DEFAULT_WEIGHT=NT,I.DRAG_END=qo,I.DRAG_PREFIX=Hm,I.DRAG_START=xh,I.Draggable=Go,I.DroppableArea=tv,I.EDIT_OBJECT=N2,I.EDIT_PREFIX=F2,I.EDIT_SHAPE=V2,I.EDIT_TEXT=B2,I.ENTER_EDIT_MODE=H2,I.FRAME_INTERVAL=av,I.GIANT_ICON_SIZE=MT,I.HISTORY_PREFIX=Bm,I.HISTORY_REDO=_h,I.HISTORY_RESET=lT,I.HISTORY_UNDO=wh,I.Header=Tv,I.Helper=rw,I.HelperObject=vo,I.IMAGES=kv,I.Image=ew,I.ImageObject=$l,I.LARGER_FONT_SIZE=jT,I.LARGE_FONT_SIZE=LT,I.LARGE_ICON_SIZE=PT,I.LAYER_CLONE=sT,I.LAYER_COPY=nT,I.LAYER_CUT=aT,I.LAYER_DELETE=cT,I.LAYER_EDITING_NAME=rT,I.LAYER_HIDDEN=Z2,I.LAYER_LOCKED=K2,I.LAYER_MOVE=J2,I.LAYER_PASTE=iT,I.LAYER_PREFIX=q2,I.LAYER_RENAME=tT,I.LAYER_SELECT=Q2,I.LAYER_SELECTION=Nm,I.LAYER_SEND_TO=eT,I.LAYER_SPLIT=oT,I.MAX_MEDIA_PANEL_WIDTH=GT,I.MIN_MEDIA_PANEL_WIDTH=YT,I.MenuItem=bk,I.NORMAL_FONT_SIZE=FT,I.NORMAL_ICON_SIZE=DT,I.NavbarComponent=wk,I.PLAYER_PAUSE=Lm,I.PLAYER_PLAY=jm,I.PLAYER_PREFIX=z2,I.PLAYER_SEEK=W2,I.PLAYER_SEEK_BY=$2,I.PLAYER_SEEK_TO=U2,I.PLAYER_TOGGLE_PLAY=Y2,I.PREVIEW_FRAME_WIDTH=Ko,I.Placeholder=mo,I.Player=ly,I.PlayheadComponent=uy,I.PreviewTrackItem=Ia,I.RulerComponent=hy,I.SECONDARY_FONT=nv,I.SMALL_FONT_SIZE=rv,I.SMALL_ICON_SIZE=RT,I.STATE_CHANGED=P2,I.STATE_PREFIX=M2,I.Scene=oM,I.SceneBoard=IT,I.ScrollArea=$i,I.ScrollBar=uh,I.SequenceItem=ny,I.Slider=Jp,I.StateManager=$3,I.TIMELINE_BOUNDING_CHANGED=Ch,I.TIMELINE_OFFSET_CANVAS_LEFT=xc,I.TIMELINE_OFFSET_CANVAS_RIGHT=Lh,I.TIMELINE_OFFSET_X=Sc,I.TIMELINE_PREFIX=zm,I.TIMELINE_SCALE_CHANGED=Sh,I.TIMELINE_SCALE_PREFIX=Vm,I.TIMELINE_ZOOM_LEVELS=fn,I.TRACKS_CHANGED=A2,I.TRACK_ITEMS_CHANGED=I2,I.TRACK_ITEMS_PREFIX=O2,I.TRACK_PREFIX=k2,I.TRANSITIONS=Av,I.Tabs=Dm,I.TabsContent=yc,I.TabsList=ph,I.TabsTrigger=vc,I.Text=Lf,I.TextObject=ps,I.Timeline=Ql,I.TimelineComponent=E3,I.Track=tw,I.TrackItemsMixin=nw,I.TrackObject=Ii,I.TracksMixin=sw,I.Transition=rn,I.TransitionGuide=Aa,I.TransitionsMixin=aw,I.UPLOADS=ok,I.VIDEOS=Ov,I.Video=Qb,I.VideoObject=ms,I.addEventListeners=Uw,I.applyMixins=Lb,I.buttonVariants=Dp,I.calculateDisplayRange=Hb,I.calculateDuration=Sn,I.calculatePosition=Yl,I.calculateTimelineWidth=vv,I.calculateTrim=Vb,I.cn=gi,I.createAudioControls=Pb,I.createControls=Rb,I.createMediaControls=Ib,I.createResizeControls=Mf,I.defaultColor=ka,I.defaultSizes=Kb,I.filterAndCleanTracks=zb,I.findIndex=Fh,I.formatBytes=_C,I.formatTimeToHumanReadable=BE,I.formatTimelineUnit=cv,I.frameToTimeString=lv,I.getCurrentTime=hv,I.getFitZoomLevel=VE,I.getMovingState=HP,I.getNextZoom=gv,I.getNextZoomIndex=mv,I.getNextZoomLevel=pv,I.getOffset=$e,I.getPreviousZoom=fv,I.getPreviousZoomIndex=zE,I.getPreviousZoomLevel=dv,I.getTextHeight=Ma,I.getZoomByIndex=HE,I.handleEvents=Yw,I.handleResize=Ea,I.loadAudio=Fb,I.loadAudioItem=$b,I.loadAudioObject=Yb,I.loadFonts=yv,I.loadImage=Nb,I.loadImageItem=Wb,I.loadImageObject=Xb,I.loadTextItem=jf,I.loadTextObject=qb,I.loadVideo=Bb,I.loadVideoItem=Ub,I.loadVideoObject=Gb,I.mergeSizes=Zb,I.mergeTrackObjects=Nh,I.movingState=oe,I.positionOffsets=Ob,I.randomInt=WE,I.removeEventListeners=$w,I.removeItemsFromTrack=Zo,I.renderControl=Qn,I.reorderTracksByIndex=Bh,I.setupHistoryListeners=a_,I.timeMsToUnits=Rt,I.timeToString=uv,I.transitionStore=Mt,I.unitsToTimeMs=pi,I.updateMovingState=zP,I.useCurrentPlayerFrame=Cc,I.useIsDraggingOverTimeline=Jo,I.useLayoutStore=Hh,I.useStore=mi,I.wrapResizeWithAnchorPosition=Rf,Object.defineProperty(I,Symbol.toStringTag,{value:"Module"})});
