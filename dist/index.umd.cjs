(function(A,v){typeof exports=="object"&&typeof module<"u"?v(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],v):(A=typeof globalThis<"u"?globalThis:A||self,v(A["super-timeline"]={},A.React,A.ReactDOM))})(this,function(A,v,yu){"use strict";function oS(r){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return e.default=r,Object.freeze(e)}const H=oS(v);var ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var bu={exports:{}},fo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function cS(){if(Hg)return fo;Hg=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:a,ref:i!==void 0?i:null,props:s}}return fo.Fragment=e,fo.jsx=t,fo.jsxs=t,fo}var go={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function lS(){return Ug||(Ug=1,process.env.NODE_ENV!=="production"&&function(){function r(P){if(P==null)return null;if(typeof P=="function")return P.$$typeof===oe?null:P.displayName||P.name||null;if(typeof P=="string")return P;switch(P){case N:return"Fragment";case F:return"Portal";case R:return"Profiler";case W:return"StrictMode";case $:return"Suspense";case G:return"SuspenseList"}if(typeof P=="object")switch(typeof P.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),P.$$typeof){case U:return(P.displayName||"Context")+".Provider";case X:return(P._context.displayName||"Context")+".Consumer";case K:var le=P.render;return P=P.displayName,P||(P=le.displayName||le.name||"",P=P!==""?"ForwardRef("+P+")":"ForwardRef"),P;case re:return le=P.displayName||null,le!==null?le:r(P.type)||"Memo";case fe:le=P._payload,P=P._init;try{return r(P(le))}catch{}}return null}function e(P){return""+P}function t(P){try{e(P);var le=!1}catch{le=!0}if(le){le=console;var ce=le.error,Oe=typeof Symbol=="function"&&Symbol.toStringTag&&P[Symbol.toStringTag]||P.constructor.name||"Object";return ce.call(le,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",Oe),e(P)}}function n(){}function i(){if(Re===0){xe=console.log,ke=console.info,ut=console.warn,or=console.error,Rt=console.group,Mt=console.groupCollapsed,ar=console.groupEnd;var P={configurable:!0,enumerable:!0,value:n,writable:!0};Object.defineProperties(console,{info:P,log:P,warn:P,error:P,group:P,groupCollapsed:P,groupEnd:P})}Re++}function s(){if(Re--,Re===0){var P={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ne({},P,{value:xe}),info:ne({},P,{value:ke}),warn:ne({},P,{value:ut}),error:ne({},P,{value:or}),group:ne({},P,{value:Rt}),groupCollapsed:ne({},P,{value:Mt}),groupEnd:ne({},P,{value:ar})})}0>Re&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function a(P){if(pe===void 0)try{throw Error()}catch(ce){var le=ce.stack.trim().match(/\n( *(at )?)/);pe=le&&le[1]||"",wr=-1<ce.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ce.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+P+wr}function c(P,le){if(!P||rt)return"";var ce=jt.get(P);if(ce!==void 0)return ce;rt=!0,ce=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var Oe=null;Oe=se.H,se.H=null,i();try{var Ke={DetermineComponentFrameRoot:function(){try{if(le){var lr=function(){throw Error()};if(Object.defineProperty(lr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lr,[])}catch(Qt){var mn=Qt}Reflect.construct(P,[],lr)}else{try{lr.call()}catch(Qt){mn=Qt}P.call(lr.prototype)}}else{try{throw Error()}catch(Qt){mn=Qt}(lr=P())&&typeof lr.catch=="function"&&lr.catch(function(){})}}catch(Qt){if(Qt&&mn&&typeof Qt.stack=="string")return[Qt.stack,mn.stack]}return[null,null]}};Ke.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var $e=Object.getOwnPropertyDescriptor(Ke.DetermineComponentFrameRoot,"name");$e&&$e.configurable&&Object.defineProperty(Ke.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var be=Ke.DetermineComponentFrameRoot(),nt=be[0],cr=be[1];if(nt&&cr){var wt=nt.split(`
`),xr=cr.split(`
`);for(be=$e=0;$e<wt.length&&!wt[$e].includes("DetermineComponentFrameRoot");)$e++;for(;be<xr.length&&!xr[be].includes("DetermineComponentFrameRoot");)be++;if($e===wt.length||be===xr.length)for($e=wt.length-1,be=xr.length-1;1<=$e&&0<=be&&wt[$e]!==xr[be];)be--;for(;1<=$e&&0<=be;$e--,be--)if(wt[$e]!==xr[be]){if($e!==1||be!==1)do if($e--,be--,0>be||wt[$e]!==xr[be]){var tn=`
`+wt[$e].replace(" at new "," at ");return P.displayName&&tn.includes("<anonymous>")&&(tn=tn.replace("<anonymous>",P.displayName)),typeof P=="function"&&jt.set(P,tn),tn}while(1<=$e&&0<=be);break}}}finally{rt=!1,se.H=Oe,s(),Error.prepareStackTrace=ce}return wt=(wt=P?P.displayName||P.name:"")?a(wt):"",typeof P=="function"&&jt.set(P,wt),wt}function u(P){if(P==null)return"";if(typeof P=="function"){var le=P.prototype;return c(P,!(!le||!le.isReactComponent))}if(typeof P=="string")return a(P);switch(P){case $:return a("Suspense");case G:return a("SuspenseList")}if(typeof P=="object")switch(P.$$typeof){case K:return P=c(P.render,!1),P;case re:return u(P.type);case fe:le=P._payload,P=P._init;try{return u(P(le))}catch{}}return""}function h(){var P=se.A;return P===null?null:P.getOwner()}function d(P){if(de.call(P,"key")){var le=Object.getOwnPropertyDescriptor(P,"key").get;if(le&&le.isReactWarning)return!1}return P.key!==void 0}function g(P,le){function ce(){Qe||(Qe=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",le))}ce.isReactWarning=!0,Object.defineProperty(P,"key",{get:ce,configurable:!0})}function p(){var P=r(this.type);return Ot[P]||(Ot[P]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),P=this.props.ref,P!==void 0?P:null}function y(P,le,ce,Oe,Ke,$e){return ce=$e.ref,P={$$typeof:M,type:P,key:le,props:$e,_owner:Ke},(ce!==void 0?ce:null)!==null?Object.defineProperty(P,"ref",{enumerable:!1,get:p}):Object.defineProperty(P,"ref",{enumerable:!1,value:null}),P._store={},Object.defineProperty(P._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(P,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.freeze&&(Object.freeze(P.props),Object.freeze(P)),P}function b(P,le,ce,Oe,Ke,$e){if(typeof P=="string"||typeof P=="function"||P===N||P===R||P===W||P===$||P===G||P===Q||typeof P=="object"&&P!==null&&(P.$$typeof===fe||P.$$typeof===re||P.$$typeof===U||P.$$typeof===X||P.$$typeof===K||P.$$typeof===Fe||P.getModuleId!==void 0)){var be=le.children;if(be!==void 0)if(Oe)if(Ge(be)){for(Oe=0;Oe<be.length;Oe++)x(be[Oe],P);Object.freeze&&Object.freeze(be)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else x(be,P)}else be="",(P===void 0||typeof P=="object"&&P!==null&&Object.keys(P).length===0)&&(be+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),P===null?Oe="null":Ge(P)?Oe="array":P!==void 0&&P.$$typeof===M?(Oe="<"+(r(P.type)||"Unknown")+" />",be=" Did you accidentally export a JSX literal instead of a component?"):Oe=typeof P,console.error("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Oe,be);if(de.call(le,"key")){be=r(P);var nt=Object.keys(le).filter(function(wt){return wt!=="key"});Oe=0<nt.length?"{key: someKey, "+nt.join(": ..., ")+": ...}":"{key: someKey}",Fn[be+Oe]||(nt=0<nt.length?"{"+nt.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Oe,be,nt,be),Fn[be+Oe]=!0)}if(be=null,ce!==void 0&&(t(ce),be=""+ce),d(le)&&(t(le.key),be=""+le.key),"key"in le){ce={};for(var cr in le)cr!=="key"&&(ce[cr]=le[cr])}else ce=le;return be&&g(ce,typeof P=="function"?P.displayName||P.name||"Unknown":P),y(P,be,$e,Ke,h(),ce)}function x(P,le){if(typeof P=="object"&&P&&P.$$typeof!==di){if(Ge(P))for(var ce=0;ce<P.length;ce++){var Oe=P[ce];S(Oe)&&T(Oe,le)}else if(S(P))P._store&&(P._store.validated=1);else if(P===null||typeof P!="object"?ce=null:(ce=ue&&P[ue]||P["@@iterator"],ce=typeof ce=="function"?ce:null),typeof ce=="function"&&ce!==P.entries&&(ce=ce.call(P),ce!==P))for(;!(P=ce.next()).done;)S(P.value)&&T(P.value,le)}}function S(P){return typeof P=="object"&&P!==null&&P.$$typeof===M}function T(P,le){if(P._store&&!P._store.validated&&P.key==null&&(P._store.validated=1,le=k(le),!_r[le])){_r[le]=!0;var ce="";P&&P._owner!=null&&P._owner!==h()&&(ce=null,typeof P._owner.tag=="number"?ce=r(P._owner.type):typeof P._owner.name=="string"&&(ce=P._owner.name),ce=" It was passed a child from "+ce+".");var Oe=se.getCurrentStack;se.getCurrentStack=function(){var Ke=u(P.type);return Oe&&(Ke+=Oe()||""),Ke},console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',le,ce),se.getCurrentStack=Oe}}function k(P){var le="",ce=h();return ce&&(ce=r(ce.type))&&(le=`

Check the render method of \``+ce+"`."),le||(P=r(P))&&(le=`

Check the top-level render call using <`+P+">."),le}var I=v,M=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),U=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),ue=Symbol.iterator,oe=Symbol.for("react.client.reference"),se=I.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=Object.prototype.hasOwnProperty,ne=Object.assign,Fe=Symbol.for("react.client.reference"),Ge=Array.isArray,Re=0,xe,ke,ut,or,Rt,Mt,ar;n.__reactDisabledLog=!0;var pe,wr,rt=!1,jt=new(typeof WeakMap=="function"?WeakMap:Map),di=Symbol.for("react.client.reference"),Qe,Ot={},Fn={},_r={};go.Fragment=N,go.jsx=function(P,le,ce,Oe,Ke){return b(P,le,ce,!1,Oe,Ke)},go.jsxs=function(P,le,ce,Oe,Ke){return b(P,le,ce,!0,Oe,Ke)}}()),go}process.env.NODE_ENV==="production"?bu.exports=cS():bu.exports=lS();var w=bu.exports;function $g(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Yg(...r){return e=>{let t=!1;const n=r.map(i=>{const s=$g(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():$g(r[i],null)}}}}function Xt(...r){return H.useCallback(Yg(...r),r)}var hs=H.forwardRef((r,e)=>{const{children:t,...n}=r,i=H.Children.toArray(t),s=i.find(hS);if(s){const a=s.props.children,c=i.map(u=>u===s?H.Children.count(a)>1?H.Children.only(null):H.isValidElement(a)?a.props.children:null:u);return w.jsx(wu,{...n,ref:e,children:H.isValidElement(a)?H.cloneElement(a,void 0,c):null})}return w.jsx(wu,{...n,ref:e,children:t})});hs.displayName="Slot";var wu=H.forwardRef((r,e)=>{const{children:t,...n}=r;if(H.isValidElement(t)){const i=fS(t),s=dS(n,t.props);return t.type!==H.Fragment&&(s.ref=e?Yg(e,i):i),H.cloneElement(t,s)}return H.Children.count(t)>1?H.Children.only(null):null});wu.displayName="SlotClone";var uS=({children:r})=>w.jsx(w.Fragment,{children:r});function hS(r){return H.isValidElement(r)&&r.type===uS}function dS(r,e){const t={...e};for(const n in e){const i=r[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?t[n]=(...c)=>{s(...c),i(...c)}:i&&(t[n]=i):n==="style"?t[n]={...i,...s}:n==="className"&&(t[n]=[i,s].filter(Boolean).join(" "))}return{...r,...t}}function fS(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var gS=hs;function Xg(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=Xg(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Gg(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=Xg(r))&&(n&&(n+=" "),n+=e);return n}const qg=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Kg=Gg,pS=(r,e)=>t=>{var n;if(e?.variants==null)return Kg(r,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const d=t?.[h],g=s?.[h];if(d===null)return null;const p=qg(d)||qg(g);return i[h][p]}),c=t&&Object.entries(t).reduce((h,d)=>{let[g,p]=d;return p===void 0||(h[g]=p),h},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,d)=>{let{class:g,className:p,...y}=d;return Object.entries(y).every(b=>{let[x,S]=b;return Array.isArray(S)?S.includes({...s,...c}[x]):{...s,...c}[x]===S})?[...h,g,p]:h},[]);return Kg(r,a,u,t?.class,t?.className)},_u="-",mS=r=>{const e=yS(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:a=>{const c=a.split(_u);return c[0]===""&&c.length!==1&&c.shift(),Zg(c,e)||vS(a)},getConflictingClassGroupIds:(a,c)=>{const u=t[a]||[];return c&&n[a]?[...u,...n[a]]:u}}},Zg=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?Zg(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(_u);return e.validators.find(({validator:a})=>a(s))?.classGroupId},Jg=/^\[(.+)\]$/,vS=r=>{if(Jg.test(r)){const e=Jg.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},yS=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return wS(Object.entries(r.classGroups),t).forEach(([s,a])=>{xu(a,n,s,e)}),n},xu=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Qg(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(bS(i)){xu(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,a])=>{xu(a,Qg(e,s),t,n)})})},Qg=(r,e)=>{let t=r;return e.split(_u).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},bS=r=>r.isThemeGetter,wS=(r,e)=>e?r.map(([t,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,c])=>[e+a,c])):s);return[t,i]}):r,_S=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(s,a)=>{t.set(s,a),e++,e>r&&(e=0,n=t,t=new Map)};return{get(s){let a=t.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){t.has(s)?t.set(s,a):i(s,a)}}},ep="!",xS=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,i=e[0],s=e.length,a=c=>{const u=[];let h=0,d=0,g;for(let S=0;S<c.length;S++){let T=c[S];if(h===0){if(T===i&&(n||c.slice(S,S+s)===e)){u.push(c.slice(d,S)),d=S+s;continue}if(T==="/"){g=S;continue}}T==="["?h++:T==="]"&&h--}const p=u.length===0?c:c.substring(d),y=p.startsWith(ep),b=y?p.substring(1):p,x=g&&g>d?g-d:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:x}};return t?c=>t({className:c,parseClassName:a}):a},SS=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},CS=r=>({cache:_S(r.cacheSize),parseClassName:xS(r),...mS(r)}),TS=/\s+/,ES=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],a=r.trim().split(TS);let c="";for(let u=a.length-1;u>=0;u-=1){const h=a[u],{modifiers:d,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:y}=t(h);let b=!!y,x=n(b?p.substring(0,y):p);if(!x){if(!b){c=h+(c.length>0?" "+c:c);continue}if(x=n(p),!x){c=h+(c.length>0?" "+c:c);continue}b=!1}const S=SS(d).join(":"),T=g?S+ep:S,k=T+x;if(s.includes(k))continue;s.push(k);const I=i(x,b);for(let M=0;M<I.length;++M){const F=I[M];s.push(T+F)}c=h+(c.length>0?" "+c:c)}return c};function kS(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=tp(e))&&(n&&(n+=" "),n+=t);return n}const tp=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=tp(r[n]))&&(t&&(t+=" "),t+=e);return t};function IS(r,...e){let t,n,i,s=a;function a(u){const h=e.reduce((d,g)=>g(d),r());return t=CS(h),n=t.cache.get,i=t.cache.set,s=c,c(u)}function c(u){const h=n(u);if(h)return h;const d=ES(u,t);return i(u,d),d}return function(){return s(kS.apply(null,arguments))}}const tt=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},rp=/^\[(?:([a-z-]+):)?(.+)\]$/i,AS=/^\d+\/\d+$/,MS=new Set(["px","full","screen"]),OS=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DS=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,FS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_n=r=>ds(r)||MS.has(r)||AS.test(r),$n=r=>fs(r,"length",HS),ds=r=>!!r&&!Number.isNaN(Number(r)),Su=r=>fs(r,"number",ds),po=r=>!!r&&Number.isInteger(Number(r)),LS=r=>r.endsWith("%")&&ds(r.slice(0,-1)),Te=r=>rp.test(r),Yn=r=>OS.test(r),NS=new Set(["length","size","percentage"]),RS=r=>fs(r,NS,np),VS=r=>fs(r,"position",np),BS=new Set(["image","url"]),zS=r=>fs(r,BS,$S),WS=r=>fs(r,"",US),mo=()=>!0,fs=(r,e,t)=>{const n=rp.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},HS=r=>PS.test(r)&&!DS.test(r),np=()=>!1,US=r=>jS.test(r),$S=r=>FS.test(r),YS=IS(()=>{const r=tt("colors"),e=tt("spacing"),t=tt("blur"),n=tt("brightness"),i=tt("borderColor"),s=tt("borderRadius"),a=tt("borderSpacing"),c=tt("borderWidth"),u=tt("contrast"),h=tt("grayscale"),d=tt("hueRotate"),g=tt("invert"),p=tt("gap"),y=tt("gradientColorStops"),b=tt("gradientColorStopPositions"),x=tt("inset"),S=tt("margin"),T=tt("opacity"),k=tt("padding"),I=tt("saturate"),M=tt("scale"),F=tt("sepia"),N=tt("skew"),W=tt("space"),R=tt("translate"),X=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",Te,e],$=()=>[Te,e],G=()=>["",_n,$n],re=()=>["auto",ds,Te],fe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>["start","end","center","between","around","evenly","stretch"],se=()=>["","0",Te],de=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>[ds,Te];return{cacheSize:500,separator:":",theme:{colors:[mo],spacing:[_n,$n],blur:["none","",Yn,Te],brightness:ne(),borderColor:[r],borderRadius:["none","","full",Yn,Te],borderSpacing:$(),borderWidth:G(),contrast:ne(),grayscale:se(),hueRotate:ne(),invert:se(),gap:$(),gradientColorStops:[r],gradientColorStopPositions:[LS,$n],inset:K(),margin:K(),opacity:ne(),padding:$(),saturate:ne(),scale:ne(),sepia:se(),skew:ne(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[Yn]}],"break-after":[{"break-after":de()}],"break-before":[{"break-before":de()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...fe(),Te]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",po,Te]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:se()}],shrink:[{shrink:se()}],order:[{order:["first","last","none",po,Te]}],"grid-cols":[{"grid-cols":[mo]}],"col-start-end":[{col:["auto",{span:["full",po,Te]},Te]}],"col-start":[{"col-start":re()}],"col-end":[{"col-end":re()}],"grid-rows":[{"grid-rows":[mo]}],"row-start-end":[{row:["auto",{span:[po,Te]},Te]}],"row-start":[{"row-start":re()}],"row-end":[{"row-end":re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...oe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...oe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...oe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,e]}],"min-w":[{"min-w":[Te,e,"min","max","fit"]}],"max-w":[{"max-w":[Te,e,"none","full","min","max","fit","prose",{screen:[Yn]},Yn]}],h:[{h:[Te,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Yn,$n]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Su]}],"font-family":[{font:[mo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",ds,Su]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_n,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_n,$n]}],"underline-offset":[{"underline-offset":["auto",_n,Te]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...fe(),VS]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RS]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zS]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[_n,Te]}],"outline-w":[{outline:[_n,$n]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[_n,$n]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Yn,WS]}],"shadow-color":[{shadow:[mo]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...ue(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ue()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Yn,Te]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[g]}],saturate:[{saturate:[I]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:ne()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[po,Te]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[_n,$n,Su]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Xn(...r){return YS(Gg(r))}function XS(r,e={}){const{decimals:t=0,sizeType:n="normal"}=e,i=["Bytes","KB","MB","GB","TB"],s=["Bytes","KiB","MiB","GiB","TiB"];if(r===0)return"0 Byte";const a=Math.floor(Math.log(r)/Math.log(1024));return`${(r/Math.pow(1024,a)).toFixed(t)} ${n==="accurate"?s[a]??"Bytest":i[a]??"Bytes"}`}const ip=pS("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),zt=H.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...i},s)=>{const a=n?hs:"button";return w.jsx(a,{className:Xn(ip({variant:e,size:t,className:r})),ref:s,...i})});zt.displayName="Button";function Cu(r,[e,t]){return Math.min(t,Math.max(e,r))}function dt(r,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(r?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function vo(r,e=[]){let t=[];function n(s,a){const c=H.createContext(a),u=t.length;t=[...t,a];const h=g=>{const{scope:p,children:y,...b}=g,x=p?.[r]?.[u]||c,S=H.useMemo(()=>b,Object.values(b));return w.jsx(x.Provider,{value:S,children:y})};h.displayName=s+"Provider";function d(g,p){const y=p?.[r]?.[u]||c,b=H.useContext(y);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,d]}const i=()=>{const s=t.map(a=>H.createContext(a));return function(c){const u=c?.[r]||s;return H.useMemo(()=>({[`__scope${r}`]:{...c,[r]:u}}),[c,u])}};return i.scopeName=r,[n,GS(i,...e)]}function GS(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((c,{useScope:u,scopeName:h})=>{const g=u(s)[`__scope${h}`];return{...c,...g}},{});return H.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function an(r){const e=H.useRef(r);return H.useEffect(()=>{e.current=r}),H.useMemo(()=>(...t)=>e.current?.(...t),[])}function Tu({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,i]=qS({defaultProp:e,onChange:t}),s=r!==void 0,a=s?r:n,c=an(t),u=H.useCallback(h=>{if(s){const g=typeof h=="function"?h(r):h;g!==r&&c(g)}else i(h)},[s,r,i,c]);return[a,u]}function qS({defaultProp:r,onChange:e}){const t=H.useState(r),[n]=t,i=H.useRef(n),s=an(e);return H.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),t}var KS=H.createContext(void 0);function Ma(r){const e=H.useContext(KS);return r||e||"ltr"}function ZS(r){const e=H.useRef({value:r,previous:r});return H.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var yo=globalThis?.document?H.useLayoutEffect:()=>{};function JS(r){const[e,t]=H.useState(void 0);return yo(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,c;if("borderBoxSize"in s){const u=s.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,c=h.blockSize}else a=r.offsetWidth,c=r.offsetHeight;t({width:a,height:c})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var QS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gt=QS.reduce((r,e)=>{const t=H.forwardRef((n,i)=>{const{asChild:s,...a}=n,c=s?hs:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(c,{...a,ref:i})});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{});function sp(r){const e=r+"CollectionProvider",[t,n]=vo(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:b,children:x}=y,S=v.useRef(null),T=v.useRef(new Map).current;return w.jsx(i,{scope:b,itemMap:T,collectionRef:S,children:x})};a.displayName=e;const c=r+"CollectionSlot",u=v.forwardRef((y,b)=>{const{scope:x,children:S}=y,T=s(c,x),k=Xt(b,T.collectionRef);return w.jsx(hs,{ref:k,children:S})});u.displayName=c;const h=r+"CollectionItemSlot",d="data-radix-collection-item",g=v.forwardRef((y,b)=>{const{scope:x,children:S,...T}=y,k=v.useRef(null),I=Xt(b,k),M=s(h,x);return v.useEffect(()=>(M.itemMap.set(k,{ref:k,...T}),()=>void M.itemMap.delete(k))),w.jsx(hs,{[d]:"",ref:I,children:S})});g.displayName=h;function p(y){const b=s(r+"CollectionConsumer",y);return v.useCallback(()=>{const S=b.collectionRef.current;if(!S)return[];const T=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(b.itemMap.values()).sort((M,F)=>T.indexOf(M.ref.current)-T.indexOf(F.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},p,n]}var op=["PageUp","PageDown"],ap=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],cp={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gs="Slider",[Eu,eC,tC]=sp(gs),[lp,R9]=vo(gs,[tC]),[rC,Oa]=lp(gs),up=H.forwardRef((r,e)=>{const{name:t,min:n=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[n],value:d,onValueChange:g=()=>{},onValueCommit:p=()=>{},inverted:y=!1,form:b,...x}=r,S=H.useRef(new Set),T=H.useRef(0),I=a==="horizontal"?nC:iC,[M=[],F]=Tu({prop:d,defaultProp:h,onChange:K=>{[...S.current][T.current]?.focus(),g(K)}}),N=H.useRef(M);function W(K){const $=lC(M,K);U(K,$)}function R(K){U(K,T.current)}function X(){const K=N.current[T.current];M[T.current]!==K&&p(M)}function U(K,$,{commit:G}={commit:!1}){const re=fC(s),fe=gC(Math.round((K-n)/s)*s+n,re),Q=Cu(fe,[n,i]);F((ue=[])=>{const oe=aC(ue,Q,$);if(dC(oe,u*s)){T.current=oe.indexOf(Q);const se=String(oe)!==String(ue);return se&&G&&p(oe),se?oe:ue}else return ue})}return w.jsx(rC,{scope:r.__scopeSlider,name:t,disabled:c,min:n,max:i,valueIndexToChangeRef:T,thumbs:S.current,values:M,orientation:a,form:b,children:w.jsx(Eu.Provider,{scope:r.__scopeSlider,children:w.jsx(Eu.Slot,{scope:r.__scopeSlider,children:w.jsx(I,{"aria-disabled":c,"data-disabled":c?"":void 0,...x,ref:e,onPointerDown:dt(x.onPointerDown,()=>{c||(N.current=M)}),min:n,max:i,inverted:y,onSlideStart:c?void 0:W,onSlideMove:c?void 0:R,onSlideEnd:c?void 0:X,onHomeKeyDown:()=>!c&&U(n,0,{commit:!0}),onEndKeyDown:()=>!c&&U(i,M.length-1,{commit:!0}),onStepKeyDown:({event:K,direction:$})=>{if(!c){const fe=op.includes(K.key)||K.shiftKey&&ap.includes(K.key)?10:1,Q=T.current,ue=M[Q],oe=s*fe*$;U(ue+oe,Q,{commit:!0})}}})})})})});up.displayName=gs;var[hp,dp]=lp(gs,{startEdge:"left",endEdge:"right",size:"width",direction:1}),nC=H.forwardRef((r,e)=>{const{min:t,max:n,dir:i,inverted:s,onSlideStart:a,onSlideMove:c,onSlideEnd:u,onStepKeyDown:h,...d}=r,[g,p]=H.useState(null),y=Xt(e,I=>p(I)),b=H.useRef(void 0),x=Ma(i),S=x==="ltr",T=S&&!s||!S&&s;function k(I){const M=b.current||g.getBoundingClientRect(),F=[0,M.width],W=Au(F,T?[t,n]:[n,t]);return b.current=M,W(I-M.left)}return w.jsx(hp,{scope:r.__scopeSlider,startEdge:T?"left":"right",endEdge:T?"right":"left",direction:T?1:-1,size:"width",children:w.jsx(fp,{dir:x,"data-orientation":"horizontal",...d,ref:y,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:I=>{const M=k(I.clientX);a?.(M)},onSlideMove:I=>{const M=k(I.clientX);c?.(M)},onSlideEnd:()=>{b.current=void 0,u?.()},onStepKeyDown:I=>{const F=cp[T?"from-left":"from-right"].includes(I.key);h?.({event:I,direction:F?-1:1})}})})}),iC=H.forwardRef((r,e)=>{const{min:t,max:n,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...h}=r,d=H.useRef(null),g=Xt(e,d),p=H.useRef(void 0),y=!i;function b(x){const S=p.current||d.current.getBoundingClientRect(),T=[0,S.height],I=Au(T,y?[n,t]:[t,n]);return p.current=S,I(x-S.top)}return w.jsx(hp,{scope:r.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:w.jsx(fp,{"data-orientation":"vertical",...h,ref:g,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const S=b(x.clientY);s?.(S)},onSlideMove:x=>{const S=b(x.clientY);a?.(S)},onSlideEnd:()=>{p.current=void 0,c?.()},onStepKeyDown:x=>{const T=cp[y?"from-bottom":"from-top"].includes(x.key);u?.({event:x,direction:T?-1:1})}})})}),fp=H.forwardRef((r,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:c,onStepKeyDown:u,...h}=r,d=Oa(gs,t);return w.jsx(Gt.span,{...h,ref:e,onKeyDown:dt(r.onKeyDown,g=>{g.key==="Home"?(a(g),g.preventDefault()):g.key==="End"?(c(g),g.preventDefault()):op.concat(ap).includes(g.key)&&(u(g),g.preventDefault())}),onPointerDown:dt(r.onPointerDown,g=>{const p=g.target;p.setPointerCapture(g.pointerId),g.preventDefault(),d.thumbs.has(p)?p.focus():n(g)}),onPointerMove:dt(r.onPointerMove,g=>{g.target.hasPointerCapture(g.pointerId)&&i(g)}),onPointerUp:dt(r.onPointerUp,g=>{const p=g.target;p.hasPointerCapture(g.pointerId)&&(p.releasePointerCapture(g.pointerId),s(g))})})}),gp="SliderTrack",pp=H.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,i=Oa(gp,t);return w.jsx(Gt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:e})});pp.displayName=gp;var ku="SliderRange",mp=H.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,i=Oa(ku,t),s=dp(ku,t),a=H.useRef(null),c=Xt(e,a),u=i.values.length,h=i.values.map(p=>yp(p,i.min,i.max)),d=u>1?Math.min(...h):0,g=100-Math.max(...h);return w.jsx(Gt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:c,style:{...r.style,[s.startEdge]:d+"%",[s.endEdge]:g+"%"}})});mp.displayName=ku;var Iu="SliderThumb",vp=H.forwardRef((r,e)=>{const t=eC(r.__scopeSlider),[n,i]=H.useState(null),s=Xt(e,c=>i(c)),a=H.useMemo(()=>n?t().findIndex(c=>c.ref.current===n):-1,[t,n]);return w.jsx(sC,{...r,ref:s,index:a})}),sC=H.forwardRef((r,e)=>{const{__scopeSlider:t,index:n,name:i,...s}=r,a=Oa(Iu,t),c=dp(Iu,t),[u,h]=H.useState(null),d=Xt(e,k=>h(k)),g=u?a.form||!!u.closest("form"):!0,p=JS(u),y=a.values[n],b=y===void 0?0:yp(y,a.min,a.max),x=cC(n,a.values.length),S=p?.[c.size],T=S?uC(S,b,c.direction):0;return H.useEffect(()=>{if(u)return a.thumbs.add(u),()=>{a.thumbs.delete(u)}},[u,a.thumbs]),w.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${b}% + ${T}px)`},children:[w.jsx(Eu.ItemSlot,{scope:r.__scopeSlider,children:w.jsx(Gt.span,{role:"slider","aria-label":r["aria-label"]||x,"aria-valuemin":a.min,"aria-valuenow":y,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:d,style:y===void 0?{display:"none"}:r.style,onFocus:dt(r.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),g&&w.jsx(oC,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:y},n)]})});vp.displayName=Iu;var oC=r=>{const{value:e,...t}=r,n=H.useRef(null),i=ZS(e);return H.useEffect(()=>{const s=n.current,a=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==e&&u){const h=new Event("input",{bubbles:!0});u.call(s,e),s.dispatchEvent(h)}},[i,e]),w.jsx("input",{style:{display:"none"},...t,ref:n,defaultValue:e})};function aC(r=[],e,t){const n=[...r];return n[t]=e,n.sort((i,s)=>i-s)}function yp(r,e,t){const s=100/(t-e)*(r-e);return Cu(s,[0,100])}function cC(r,e){return e>2?`Value ${r+1} of ${e}`:e===2?["Minimum","Maximum"][r]:void 0}function lC(r,e){if(r.length===1)return 0;const t=r.map(i=>Math.abs(i-e)),n=Math.min(...t);return t.indexOf(n)}function uC(r,e,t){const n=r/2,s=Au([0,50],[0,n]);return(n-s(e)*t)*t}function hC(r){return r.slice(0,-1).map((e,t)=>r[t+1]-e)}function dC(r,e){if(e>0){const t=hC(r);return Math.min(...t)>=e}return!0}function Au(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function fC(r){return(String(r).split(".")[1]||"").length}function gC(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}var bp=up,pC=pp,mC=mp,vC=vp;const wp=H.forwardRef(({className:r,...e},t)=>w.jsxs(bp,{ref:t,className:Xn("relative flex w-full touch-none select-none items-center",r),...e,children:[w.jsx(pC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:w.jsx(mC,{className:"absolute h-full bg-primary"})}),w.jsx(vC,{className:"block h-4 w-4 cursor-pointer rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));wp.displayName=bp.displayName;function yC(r,e){return H.useReducer((t,n)=>e[t][n]??t,r)}var ps=r=>{const{present:e,children:t}=r,n=bC(e),i=typeof t=="function"?t({present:n.isPresent}):H.Children.only(t),s=Xt(n.ref,wC(i));return typeof t=="function"||n.isPresent?H.cloneElement(i,{ref:s}):null};ps.displayName="Presence";function bC(r){const[e,t]=H.useState(),n=H.useRef({}),i=H.useRef(r),s=H.useRef("none"),a=r?"mounted":"unmounted",[c,u]=yC(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return H.useEffect(()=>{const h=Pa(n.current);s.current=c==="mounted"?h:"none"},[c]),yo(()=>{const h=n.current,d=i.current;if(d!==r){const p=s.current,y=Pa(h);r?u("MOUNT"):y==="none"||h?.display==="none"?u("UNMOUNT"):u(d&&p!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=r}},[r,u]),yo(()=>{if(e){let h;const d=e.ownerDocument.defaultView??window,g=y=>{const x=Pa(n.current).includes(y.animationName);if(y.target===e&&x&&(u("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",h=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=y=>{y.target===e&&(s.current=Pa(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{d.clearTimeout(h),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:H.useCallback(h=>{h&&(n.current=getComputedStyle(h)),t(h)},[])}}function Pa(r){return r?.animationName||"none"}function wC(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function _C(r,e){return H.useReducer((t,n)=>e[t][n]??t,r)}var Mu="ScrollArea",[_p,V9]=vo(Mu),[xC,Mr]=_p(Mu),xp=H.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:i,scrollHideDelay:s=600,...a}=r,[c,u]=H.useState(null),[h,d]=H.useState(null),[g,p]=H.useState(null),[y,b]=H.useState(null),[x,S]=H.useState(null),[T,k]=H.useState(0),[I,M]=H.useState(0),[F,N]=H.useState(!1),[W,R]=H.useState(!1),X=Xt(e,K=>u(K)),U=Ma(i);return w.jsx(xC,{scope:t,type:n,dir:U,scrollHideDelay:s,scrollArea:c,viewport:h,onViewportChange:d,content:g,onContentChange:p,scrollbarX:y,onScrollbarXChange:b,scrollbarXEnabled:F,onScrollbarXEnabledChange:N,scrollbarY:x,onScrollbarYChange:S,scrollbarYEnabled:W,onScrollbarYEnabledChange:R,onCornerWidthChange:k,onCornerHeightChange:M,children:w.jsx(Gt.div,{dir:U,...a,ref:X,style:{position:"relative","--radix-scroll-area-corner-width":T+"px","--radix-scroll-area-corner-height":I+"px",...r.style}})})});xp.displayName=Mu;var Sp="ScrollAreaViewport",Cp=H.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:n,nonce:i,...s}=r,a=Mr(Sp,t),c=H.useRef(null),u=Xt(e,c,a.onViewportChange);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),w.jsx(Gt.div,{"data-radix-scroll-area-viewport":"",...s,ref:u,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...r.style},children:w.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Cp.displayName=Sp;var cn="ScrollAreaScrollbar",Da=H.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=Mr(cn,r.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,c=r.orientation==="horizontal";return H.useEffect(()=>(c?s(!0):a(!0),()=>{c?s(!1):a(!1)}),[c,s,a]),i.type==="hover"?w.jsx(SC,{...n,ref:e,forceMount:t}):i.type==="scroll"?w.jsx(CC,{...n,ref:e,forceMount:t}):i.type==="auto"?w.jsx(Tp,{...n,ref:e,forceMount:t}):i.type==="always"?w.jsx(Ou,{...n,ref:e}):null});Da.displayName=cn;var SC=H.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=Mr(cn,r.__scopeScrollArea),[s,a]=H.useState(!1);return H.useEffect(()=>{const c=i.scrollArea;let u=0;if(c){const h=()=>{window.clearTimeout(u),a(!0)},d=()=>{u=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",d),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),w.jsx(ps,{present:t||s,children:w.jsx(Tp,{"data-state":s?"visible":"hidden",...n,ref:e})})}),CC=H.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=Mr(cn,r.__scopeScrollArea),s=r.orientation==="horizontal",a=Na(()=>u("SCROLL_END"),100),[c,u]=_C("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return H.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,i.scrollHideDelay,u]),H.useEffect(()=>{const h=i.viewport,d=s?"scrollLeft":"scrollTop";if(h){let g=h[d];const p=()=>{const y=h[d];g!==y&&(u("SCROLL"),a()),g=y};return h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,s,u,a]),w.jsx(ps,{present:t||c!=="hidden",children:w.jsx(Ou,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:dt(r.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:dt(r.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Tp=H.forwardRef((r,e)=>{const t=Mr(cn,r.__scopeScrollArea),{forceMount:n,...i}=r,[s,a]=H.useState(!1),c=r.orientation==="horizontal",u=Na(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;a(c?h:d)}},10);return ms(t.viewport,u),ms(t.content,u),w.jsx(ps,{present:n||s,children:w.jsx(Ou,{"data-state":s?"visible":"hidden",...i,ref:e})})}),Ou=H.forwardRef((r,e)=>{const{orientation:t="vertical",...n}=r,i=Mr(cn,r.__scopeScrollArea),s=H.useRef(null),a=H.useRef(0),[c,u]=H.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Ap(c.viewport,c.content),d={...n,sizes:c,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function g(p,y){return MC(p,a.current,c,y)}return t==="horizontal"?w.jsx(TC,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,y=Mp(p,c,i.dir);s.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=g(p,i.dir))}}):t==="vertical"?w.jsx(EC,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,y=Mp(p,c);s.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=g(p))}}):null}),TC=H.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...i}=r,s=Mr(cn,r.__scopeScrollArea),[a,c]=H.useState(),u=H.useRef(null),h=Xt(e,u,s.onScrollbarXChange);return H.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),w.jsx(kp,{"data-orientation":"horizontal",...i,ref:h,sizes:t,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":La(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.x),onDragScroll:d=>r.onDragScroll(d.x),onWheelScroll:(d,g)=>{if(s.viewport){const p=s.viewport.scrollLeft+d.deltaX;r.onWheelScroll(p),Pp(p,g)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&a&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Fa(a.paddingLeft),paddingEnd:Fa(a.paddingRight)}})}})}),EC=H.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...i}=r,s=Mr(cn,r.__scopeScrollArea),[a,c]=H.useState(),u=H.useRef(null),h=Xt(e,u,s.onScrollbarYChange);return H.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),w.jsx(kp,{"data-orientation":"vertical",...i,ref:h,sizes:t,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":La(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.y),onDragScroll:d=>r.onDragScroll(d.y),onWheelScroll:(d,g)=>{if(s.viewport){const p=s.viewport.scrollTop+d.deltaY;r.onWheelScroll(p),Pp(p,g)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&a&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Fa(a.paddingTop),paddingEnd:Fa(a.paddingBottom)}})}})}),[kC,Ep]=_p(cn),kp=H.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:d,onResize:g,...p}=r,y=Mr(cn,t),[b,x]=H.useState(null),S=Xt(e,X=>x(X)),T=H.useRef(null),k=H.useRef(""),I=y.viewport,M=n.content-n.viewport,F=an(d),N=an(u),W=Na(g,10);function R(X){if(T.current){const U=X.clientX-T.current.left,K=X.clientY-T.current.top;h({x:U,y:K})}}return H.useEffect(()=>{const X=U=>{const K=U.target;b?.contains(K)&&F(U,M)};return document.addEventListener("wheel",X,{passive:!1}),()=>document.removeEventListener("wheel",X,{passive:!1})},[I,b,M,F]),H.useEffect(N,[n,N]),ms(b,W),ms(y.content,W),w.jsx(kC,{scope:t,scrollbar:b,hasThumb:i,onThumbChange:an(s),onThumbPointerUp:an(a),onThumbPositionChange:N,onThumbPointerDown:an(c),children:w.jsx(Gt.div,{...p,ref:S,style:{position:"absolute",...p.style},onPointerDown:dt(r.onPointerDown,X=>{X.button===0&&(X.target.setPointerCapture(X.pointerId),T.current=b.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),R(X))}),onPointerMove:dt(r.onPointerMove,R),onPointerUp:dt(r.onPointerUp,X=>{const U=X.target;U.hasPointerCapture(X.pointerId)&&U.releasePointerCapture(X.pointerId),document.body.style.webkitUserSelect=k.current,y.viewport&&(y.viewport.style.scrollBehavior=""),T.current=null})})})}),ja="ScrollAreaThumb",Pu=H.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=Ep(ja,r.__scopeScrollArea);return w.jsx(ps,{present:t||i.hasThumb,children:w.jsx(IC,{ref:e,...n})})}),IC=H.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:n,...i}=r,s=Mr(ja,t),a=Ep(ja,t),{onThumbPositionChange:c}=a,u=Xt(e,g=>a.onThumbChange(g)),h=H.useRef(void 0),d=Na(()=>{h.current&&(h.current(),h.current=void 0)},100);return H.useEffect(()=>{const g=s.viewport;if(g){const p=()=>{if(d(),!h.current){const y=OC(g,c);h.current=y,c()}};return c(),g.addEventListener("scroll",p),()=>g.removeEventListener("scroll",p)}},[s.viewport,d,c]),w.jsx(Gt.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:dt(r.onPointerDownCapture,g=>{const y=g.target.getBoundingClientRect(),b=g.clientX-y.left,x=g.clientY-y.top;a.onThumbPointerDown({x:b,y:x})}),onPointerUp:dt(r.onPointerUp,a.onThumbPointerUp)})});Pu.displayName=ja;var Du="ScrollAreaCorner",Ip=H.forwardRef((r,e)=>{const t=Mr(Du,r.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?w.jsx(AC,{...r,ref:e}):null});Ip.displayName=Du;var AC=H.forwardRef((r,e)=>{const{__scopeScrollArea:t,...n}=r,i=Mr(Du,t),[s,a]=H.useState(0),[c,u]=H.useState(0),h=!!(s&&c);return ms(i.scrollbarX,()=>{const d=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(d),u(d)}),ms(i.scrollbarY,()=>{const d=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(d),a(d)}),h?w.jsx(Gt.div,{...n,ref:e,style:{width:s,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function Fa(r){return r?parseInt(r,10):0}function Ap(r,e){const t=r/e;return isNaN(t)?0:t}function La(r){const e=Ap(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*e;return Math.max(n,18)}function MC(r,e,t,n="ltr"){const i=La(t),s=i/2,a=e||s,c=i-a,u=t.scrollbar.paddingStart+a,h=t.scrollbar.size-t.scrollbar.paddingEnd-c,d=t.content-t.viewport,g=n==="ltr"?[0,d]:[d*-1,0];return Op([u,h],g)(r)}function Mp(r,e,t="ltr"){const n=La(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,a=e.content-e.viewport,c=s-n,u=t==="ltr"?[0,a]:[a*-1,0],h=Cu(r,u);return Op([0,a],[0,c])(h)}function Op(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function Pp(r,e){return r>0&&r<e}var OC=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},n=0;return function i(){const s={left:r.scrollLeft,top:r.scrollTop},a=t.left!==s.left,c=t.top!==s.top;(a||c)&&e(),t=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function Na(r,e){const t=an(r),n=H.useRef(0);return H.useEffect(()=>()=>window.clearTimeout(n.current),[]),H.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function ms(r,e){const t=an(e);yo(()=>{let n=0;if(r){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return i.observe(r),()=>{window.cancelAnimationFrame(n),i.unobserve(r)}}},[r,t])}var Ra=xp,ju=Cp,Dp=Da,jp=Pu,PC=Ip;const xi=H.forwardRef(({className:r,children:e,...t},n)=>w.jsxs(Ra,{ref:n,className:Xn("relative overflow-hidden",r),...t,children:[w.jsx(ju,{className:"h-full w-full rounded-[inherit]",children:e}),w.jsx(Fu,{}),w.jsx(PC,{})]}));xi.displayName=Ra.displayName;const Fu=H.forwardRef(({className:r,orientation:e="vertical",...t},n)=>w.jsx(Da,{ref:n,orientation:e,className:Xn("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:w.jsx(Pu,{className:"relative flex-1 rounded-full bg-border"})}));Fu.displayName=Da.displayName;const bo=({children:r,renderCustomPreview:e,data:t={},shouldDisplayPreview:n=!0})=>{const[i,s]=v.useState(!1),[a,c]=v.useState({x:0,y:0}),u=v.useRef(null),h=y=>{s(!0),y.dataTransfer.setDragImage(new Image,0,0),y.dataTransfer.setData(JSON.stringify(t),JSON.stringify(t)),c({x:y.clientX,y:y.clientY})},d=()=>{s(!1)},g=y=>{i&&c({x:y.clientX,y:y.clientY})},p=v.cloneElement(r,{draggable:!0,onDragStart:h,onDragEnd:d,onDrag:g,style:{...r.props.style}});return w.jsxs(w.Fragment,{children:[p,i&&n&&e?yu.createPortal(w.jsx("div",{ref:u,style:{position:"fixed",left:a.x,top:a.y,pointerEvents:"none",zIndex:9999,transform:"translate(-50%, -50%)"},children:e}),document.body):null]})};var DC=H.useId||(()=>{}),jC=0;function Fp(r){const[e,t]=H.useState(DC());return yo(()=>{t(n=>n??String(jC++))},[r]),e?`radix-${e}`:""}var Lu="rovingFocusGroup.onEntryFocus",FC={bubbles:!1,cancelable:!0},Va="RovingFocusGroup",[Nu,Lp,LC]=sp(Va),[NC,Np]=vo(Va,[LC]),[RC,VC]=NC(Va),Rp=H.forwardRef((r,e)=>w.jsx(Nu.Provider,{scope:r.__scopeRovingFocusGroup,children:w.jsx(Nu.Slot,{scope:r.__scopeRovingFocusGroup,children:w.jsx(BC,{...r,ref:e})})}));Rp.displayName=Va;var BC=H.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:d=!1,...g}=r,p=H.useRef(null),y=Xt(e,p),b=Ma(s),[x=null,S]=Tu({prop:a,defaultProp:c,onChange:u}),[T,k]=H.useState(!1),I=an(h),M=Lp(t),F=H.useRef(!1),[N,W]=H.useState(0);return H.useEffect(()=>{const R=p.current;if(R)return R.addEventListener(Lu,I),()=>R.removeEventListener(Lu,I)},[I]),w.jsx(RC,{scope:t,orientation:n,dir:b,loop:i,currentTabStopId:x,onItemFocus:H.useCallback(R=>S(R),[S]),onItemShiftTab:H.useCallback(()=>k(!0),[]),onFocusableItemAdd:H.useCallback(()=>W(R=>R+1),[]),onFocusableItemRemove:H.useCallback(()=>W(R=>R-1),[]),children:w.jsx(Gt.div,{tabIndex:T||N===0?-1:0,"data-orientation":n,...g,ref:y,style:{outline:"none",...r.style},onMouseDown:dt(r.onMouseDown,()=>{F.current=!0}),onFocus:dt(r.onFocus,R=>{const X=!F.current;if(R.target===R.currentTarget&&X&&!T){const U=new CustomEvent(Lu,FC);if(R.currentTarget.dispatchEvent(U),!U.defaultPrevented){const K=M().filter(Q=>Q.focusable),$=K.find(Q=>Q.active),G=K.find(Q=>Q.id===x),fe=[$,G,...K].filter(Boolean).map(Q=>Q.ref.current);zp(fe,d)}}F.current=!1}),onBlur:dt(r.onBlur,()=>k(!1))})})}),Vp="RovingFocusGroupItem",Bp=H.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:s,...a}=r,c=Fp(),u=s||c,h=VC(Vp,t),d=h.currentTabStopId===u,g=Lp(t),{onFocusableItemAdd:p,onFocusableItemRemove:y}=h;return H.useEffect(()=>{if(n)return p(),()=>y()},[n,p,y]),w.jsx(Nu.ItemSlot,{scope:t,id:u,focusable:n,active:i,children:w.jsx(Gt.span,{tabIndex:d?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:dt(r.onMouseDown,b=>{n?h.onItemFocus(u):b.preventDefault()}),onFocus:dt(r.onFocus,()=>h.onItemFocus(u)),onKeyDown:dt(r.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=HC(b,h.orientation,h.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let T=g().filter(k=>k.focusable).map(k=>k.ref.current);if(x==="last")T.reverse();else if(x==="prev"||x==="next"){x==="prev"&&T.reverse();const k=T.indexOf(b.currentTarget);T=h.loop?UC(T,k+1):T.slice(k+1)}setTimeout(()=>zp(T))}})})})});Bp.displayName=Vp;var zC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function WC(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function HC(r,e,t){const n=WC(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return zC[n]}function zp(r,e=!1){const t=document.activeElement;for(const n of r)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function UC(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var $C=Rp,YC=Bp,Ru="Tabs",[XC,B9]=vo(Ru,[Np]),Wp=Np(),[GC,Vu]=XC(Ru),Hp=H.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:u="automatic",...h}=r,d=Ma(c),[g,p]=Tu({prop:n,onChange:i,defaultProp:s});return w.jsx(GC,{scope:t,baseId:Fp(),value:g,onValueChange:p,orientation:a,dir:d,activationMode:u,children:w.jsx(Gt.div,{dir:d,"data-orientation":a,...h,ref:e})})});Hp.displayName=Ru;var Up="TabsList",$p=H.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...i}=r,s=Vu(Up,t),a=Wp(t);return w.jsx($C,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:w.jsx(Gt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});$p.displayName=Up;var Yp="TabsTrigger",Xp=H.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:i=!1,...s}=r,a=Vu(Yp,t),c=Wp(t),u=Kp(a.baseId,n),h=Zp(a.baseId,n),d=n===a.value;return w.jsx(YC,{asChild:!0,...c,focusable:!i,active:d,children:w.jsx(Gt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":h,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...s,ref:e,onMouseDown:dt(r.onMouseDown,g=>{!i&&g.button===0&&g.ctrlKey===!1?a.onValueChange(n):g.preventDefault()}),onKeyDown:dt(r.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(n)}),onFocus:dt(r.onFocus,()=>{const g=a.activationMode!=="manual";!d&&!i&&g&&a.onValueChange(n)})})})});Xp.displayName=Yp;var Gp="TabsContent",qp=H.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:i,children:s,...a}=r,c=Vu(Gp,t),u=Kp(c.baseId,n),h=Zp(c.baseId,n),d=n===c.value,g=H.useRef(d);return H.useEffect(()=>{const p=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(p)},[]),w.jsx(ps,{present:i||d,children:({present:p})=>w.jsx(Gt.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:h,tabIndex:0,...a,ref:e,style:{...r.style,animationDuration:g.current?"0s":void 0},children:p&&s})})});qp.displayName=Gp;function Kp(r,e){return`${r}-trigger-${e}`}function Zp(r,e){return`${r}-content-${e}`}var qC=Hp,Jp=$p,Qp=Xp,em=qp;const tm=qC,Bu=H.forwardRef(({className:r,...e},t)=>w.jsx(Jp,{ref:t,className:Xn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));Bu.displayName=Jp.displayName;const Ba=H.forwardRef(({className:r,...e},t)=>w.jsx(Qp,{ref:t,className:Xn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));Ba.displayName=Qp.displayName;const za=H.forwardRef(({className:r,...e},t)=>w.jsx(em,{ref:t,className:Xn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));za.displayName=em.displayName;const KC="add",ZC="track",JC="trackItems",QC="track:changed",e2="trackItems:changed",t2="state",r2="state:changed",rm="add",zu="add:text",vs="add:video",ys="add:audio",n2="add:placeholder",bs="add:image",i2="add:mask",s2="add:transition",o2="add:animation",a2="edit",c2="edit:object",l2="edit:text",u2="edit:shape",h2="enterEditMode",d2="player",nm="player:play",im="player:pause",f2="player:seek",g2="player:seekTo",p2="player:seekBy",m2="player:togglePlay",sm="active",v2="active:set",Wu="active:delete",y2="active:paste",Hu="active:clone",Uu="active:split",b2="layer",w2="layer:locked",_2="layer:hidden",x2="layer:move",S2="layer:select",om="layer:selection",C2="layer:sendTo",T2="layer:rename",E2="layer:editingName",k2="layer:copy",I2="layer:paste",A2="layer:clone",M2="layer:split",O2="layer:cut",P2="layer:delete",am="history",$u="history:undo",Yu="history:redo",D2="history:reset",cm="scale",Xu="scale:changed",lm="drag",Gu="drag:start",wo="drag:end",um="timeline",qu="timeline:boundingChanged";var Ku=function(r,e){return Ku=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Ku(r,e)};function ws(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ku(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Zu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ju(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return s}function Qu(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function ln(r){return typeof r=="function"}function hm(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var eh=hm(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function th(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Wa=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,i,s;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var c=Zu(a),u=c.next();!u.done;u=c.next()){var h=u.value;h.remove(this)}}catch(x){e={error:x}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else a.remove(this);var d=this.initialTeardown;if(ln(d))try{d()}catch(x){s=x instanceof eh?x.errors:[x]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var p=Zu(g),y=p.next();!y.done;y=p.next()){var b=y.value;try{gm(b)}catch(x){s=s??[],x instanceof eh?s=Qu(Qu([],Ju(s)),Ju(x.errors)):s.push(x)}}}catch(x){n={error:x}}finally{try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}if(s)throw new eh(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)gm(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&th(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&th(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),dm=Wa.EMPTY;function fm(r){return r instanceof Wa||r&&"closed"in r&&ln(r.remove)&&ln(r.add)&&ln(r.unsubscribe)}function gm(r){ln(r)?r():r.unsubscribe()}var j2={Promise:void 0},F2={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,Qu([r,e],Ju(t)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function L2(r){F2.setTimeout(function(){throw r})}function pm(){}function Ha(r){r()}var rh=function(r){ws(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,fm(t)&&t.add(n)):n.destination=V2,n}return e.create=function(t,n,i){return new nh(t,n,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Wa),N2=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Ua(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Ua(n)}else Ua(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Ua(t)}},r}(),nh=function(r){ws(e,r);function e(t,n,i){var s=r.call(this)||this,a;return ln(t)||!t?a={next:t??void 0,error:n??void 0,complete:i??void 0}:a=t,s.destination=new N2(a),s}return e}(rh);function Ua(r){L2(r)}function R2(r){throw r}var V2={closed:!0,next:pm,error:R2,complete:pm},B2=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function z2(r){return r}function W2(r){return r.length===0?z2:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var mm=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this,s=U2(e)?e:new nh(e,t,n);return Ha(function(){var a=i,c=a.operator,u=a.source;s.add(c?c.call(s,u):u?i._subscribe(s):i._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=vm(t),new t(function(i,s){var a=new nh({next:function(c){try{e(c)}catch(u){s(u),a.unsubscribe()}},error:s,complete:i});n.subscribe(a)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[B2]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return W2(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=vm(e),new e(function(n,i){var s;t.subscribe(function(a){return s=a},function(a){return i(a)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();function vm(r){var e;return(e=r??j2.Promise)!==null&&e!==void 0?e:Promise}function H2(r){return r&&ln(r.next)&&ln(r.error)&&ln(r.complete)}function U2(r){return r&&r instanceof rh||H2(r)&&fm(r)}function $2(r){return ln(r?.lift)}function Y2(r){return function(e){if($2(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function X2(r,e,t,n,i){return new G2(r,e,t,n,i)}var G2=function(r){ws(e,r);function e(t,n,i,s,a,c){var u=r.call(this,t)||this;return u.onFinalize=a,u.shouldUnsubscribe=c,u._next=n?function(h){try{n(h)}catch(d){t.error(d)}}:r.prototype._next,u._error=s?function(h){try{s(h)}catch(d){t.error(d)}finally{this.unsubscribe()}}:r.prototype._error,u._complete=i?function(){try{i()}catch(h){t.error(h)}finally{this.unsubscribe()}}:r.prototype._complete,u}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(rh),q2=hm(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ih=function(r){ws(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new ym(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new q2},e.prototype.next=function(t){var n=this;Ha(function(){var i,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=Zu(n.currentObservers),c=a.next();!c.done;c=a.next()){var u=c.value;u.next(t)}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var n=this;Ha(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;Ha(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,i=this,s=i.hasError,a=i.isStopped,c=i.observers;return s||a?dm:(this.currentObservers=null,c.push(t),new Wa(function(){n.currentObservers=null,th(c,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,s=n.thrownError,a=n.isStopped;i?t.error(s):a&&t.complete()},e.prototype.asObservable=function(){var t=new mm;return t.source=this,t},e.create=function(t,n){return new ym(t,n)},e}(mm),ym=function(r){ws(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},e.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:dm},e}(ih),bm=function(r){ws(e,r);function e(t){var n=r.call(this)||this;return n._value=t,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var n=r.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},e.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,s=t._value;if(n)throw i;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(ih);function Si(r,e){return Y2(function(t,n){var i=0;t.subscribe(X2(n,function(s){return r.call(e,s,i++)&&n.next(s)}))})}const wm=new ih,Ne={subject:wm,dispatch:(r,e)=>{wm.next({key:r,value:e})}},Lt=[];for(let r=0;r<256;++r)Lt.push((r+256).toString(16).slice(1));function K2(r,e=0){return(Lt[r[e+0]]+Lt[r[e+1]]+Lt[r[e+2]]+Lt[r[e+3]]+"-"+Lt[r[e+4]]+Lt[r[e+5]]+"-"+Lt[r[e+6]]+Lt[r[e+7]]+"-"+Lt[r[e+8]]+Lt[r[e+9]]+"-"+Lt[r[e+10]]+Lt[r[e+11]]+Lt[r[e+12]]+Lt[r[e+13]]+Lt[r[e+14]]+Lt[r[e+15]]).toLowerCase()}let sh;const Z2=new Uint8Array(16);function J2(){if(!sh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");sh=crypto.getRandomValues.bind(crypto)}return sh(Z2)}const _m={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Et(r,e,t){if(_m.randomUUID&&!r)return _m.randomUUID();r=r||{};const n=r.random??r.rng?.()??J2();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,K2(n)}var xm=(r=>(r.IMAGE="image",r.VIDEO="video",r.AUDIO="audio",r))(xm||{});const Q2=r=>{const[e,t]=v.useState(!1),[n,i]=v.useState(!1),s=v.useCallback(d=>{const g={...d,id:Et()};switch(d.type){case"image":Ne.dispatch(bs,{payload:g});break;case"video":Ne.dispatch(vs,{payload:g});break;case"audio":Ne.dispatch(ys,{payload:g});break}},[]),a=v.useCallback(d=>{d.preventDefault();try{const g=d.dataTransfer?.types[0],p=JSON.parse(g);if(!Object.values(xm).includes(p.type))return;i(!0),t(!0),r?.(!0)}catch(g){console.error("Error parsing dragged data:",g)}},[r]),c=v.useCallback(d=>{d.preventDefault(),e&&(i(!0),r?.(!0))},[e,r]),u=v.useCallback(d=>{if(n){d.preventDefault(),i(!1),r?.(!1);try{const g=d.dataTransfer?.types[0],p=JSON.parse(d.dataTransfer.getData(g));s(p)}catch(g){console.error("Error parsing dropped data:",g)}}},[n,r,s]),h=v.useCallback(d=>{d.preventDefault(),d.currentTarget.contains(d.relatedTarget)||(i(!1),t(!1),r?.(!1))},[r]);return{onDragEnter:a,onDragOver:c,onDrop:u,onDragLeave:h,isDraggingOver:n}},Sm=({children:r,className:e,style:t,onDragStateChange:n,id:i})=>{const{onDragEnter:s,onDragOver:a,onDrop:c,onDragLeave:u}=Q2(n);return w.jsx("div",{id:i,onDragEnter:s,onDrop:c,onDragOver:a,onDragLeave:u,className:e,style:t,role:"region","aria-label":"Droppable area for images, videos, and audio",children:r})},eT=({size:r,children:e})=>{const[t,n]=v.useState(!1);return w.jsxs(Sm,{id:"artboard",onDragStateChange:n,style:{width:r.width,height:r.height},className:"designcombo_scene pointer-events-auto mt-3.5 bg-black",children:[w.jsx("div",{style:{width:r.width,height:r.height},className:`pointer-events-none absolute z-50 mt-3.5 transition-colors duration-200 ease-in-out ${t?"border-4 border-dashed border-white bg-white/[0.075]":"bg-transparent"} shadow-[0_0_0_5000px_#1D1D1F]`}),e]})},tT=100,rT=30,nT=18,iT=14,sT=30,oT=24,aT=16,Cm=12,cT="Regular",Tm="sans-serif",_o=188,$a=40,lT=4e3,Em=1920,km=1080,Im=60,Am=1e3/Im,uT=2e6,hT=1e7,dT=48e3,fT=192e3,oh=2.3,gT=Em/oh,pT=km/oh,mT=184,vT=348,yT=512,bT=300,wT=0,_T=5e3,xT=1,ST=0,CT=0,TT=0,ET=359,kT=1,IT=0,AT=!1,MT=!1,OT=0,PT=2,DT=.01,jT=1,FT=0,LT=3,NT=.01,RT=1,VT=0,BT=1,zT=.01,WT=.5,HT=-1e3,UT=1e3,$T=1,YT=1,XT=0,GT=1,qT=.01,KT=1,ZT=0,JT=1,QT=.01,eE=0,tE=.5,rE=10,nE=.01,iE=1,sE=0,oE=1,aE=.01,cE=1,Ya=16,ah=80;function Mm(r){if(!r)return"0";const e=r/_o,t=Math.trunc(e)%60,n=Math.trunc(e/60)%60,i=Math.trunc(e/3600)%60,a=[Math.trunc(e/216e3).toString(),i.toString(),n.toString(),t.toString()];return e<60?`${a[3].padStart(2,"0")}f`:e<3600?`${a[2].padStart(1,"0")}s`:e<216e3?`${a[1].padStart(2,"0")}:${a[2].padStart(2,"0")}`:`${a[0].padStart(2,"0")}:${a[1].padStart(2,"0")}:${a[2].padStart(2,"0")}`}function lE(r,e=!1){if(!r)return"00:00";const n=1e3/60;if(r<1e3)return e?`${Math.floor(r/n)}f`:`${(r/1e3).toFixed(1)}s`;const i=Math.floor(r/1e3);if(i<60)return`${i}s`;const s=Math.floor(i/60);if(s<60){const h=i%60;return`${s.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}const a=Math.floor(s/60),c=s%60,u=i%60;return`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`}function xo(r,e){return r.map(t=>({...t,items:t.items.filter(n=>!e.includes(n))}))}const Om=({frame:r},{fps:e})=>{const t=r/e,n=Math.floor(t/3600),i=t%3600,s=Math.floor(i/60),a=Math.floor(i%60),c=Math.floor((i-Math.floor(i))*100);return n>0?`${n}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`:`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`},Pm=({time:r})=>{const e=r/1e3,t=Math.floor(e/3600),n=e%3600,i=Math.floor(n/60),s=Math.floor(n%60),a=Math.floor((n-Math.floor(n))*100);return t>0?`${t}:${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},Dm=()=>{const r=document.getElementById("video-current-time");return(r?parseFloat(r.getAttribute("data-current-time")??""):0)*1e3},$r=[{index:0,unit:18e3,zoom:1/18e3,segments:5},{index:1,unit:10800,zoom:1/10800,segments:3},{index:2,unit:7200,zoom:1/7200,segments:2},{index:3,unit:3600,zoom:1/3600,segments:1},{index:4,unit:1800,zoom:1/1800,segments:2},{index:5,unit:900,zoom:1/900,segments:3},{index:6,unit:600,zoom:1/600,segments:2},{index:7,unit:300,zoom:1/300,segments:5},{index:8,unit:180,zoom:1/180,segments:3},{index:9,unit:120,zoom:1/120,segments:10},{index:10,unit:60,zoom:1/60,segments:5},{index:11,unit:60,zoom:1/60,segments:5},{index:12,unit:30,zoom:1/30,segments:2},{index:13,unit:15,zoom:1/15,segments:3},{index:14,unit:10,zoom:1/10,segments:2},{index:15,unit:5,zoom:1/5,segments:5},{index:16,unit:3,zoom:1/3,segments:3},{index:17,unit:2,zoom:1/2,segments:5},{index:18,unit:1,zoom:1,segments:5},{index:19,unit:1,zoom:2,segments:5},{index:20,unit:1,zoom:4,segments:10}];function ch(r,e){let t=-1,n=r.length-1;for(;1+t<n;){const i=t+(n-t>>1);e(r[i],i,r)?n=i:t=i}return n}function uE(r,e=1){const t=()=>{const u=Math.max(0,$a),d=document.getElementById("designcombo-timeline-canvas")?.offsetWidth??document.body.offsetWidth;return Math.max(1,d-u)},n=()=>typeof r=="number"?yt(r,e):Vm(r,e),i=t()/n(),s=e*i;return{segments:5,index:ch($r,c=>c.zoom>s),zoom:s,unit:1/s}}function hE(r){return $r[r]}function jm(r){return Fm(r)||$r[0]}const Fm=r=>{const e=$r.filter(n=>n.zoom<r.zoom);return e.length===0?null:e.reduce((n,i)=>i.zoom>n.zoom?i:n)},Lm=r=>{const e=$r.filter(n=>n.zoom>r.zoom);return e.length===0?null:e.reduce((n,i)=>i.zoom<n.zoom?i:n)};function Nm(r){return Lm(r)||$r[$r.length-1]}function dE(r){const e=$r.at(-1),t=r===e,i=Rm(r)-(t?1:2);return Math.max(0,i)}function Rm(r){const e=ch($r,t=>t.zoom>r.zoom);return Math.min($r.length-1,e)}function yt(r,e=1,t=1){const n=_o*e;return r*(60/1e3)*n/t}function Gn(r,e=1){const t=_o*e;return r/t*Am}function Vm(r,e=1){return yt(r,e)}const fE=Math.floor(Math.random()*1e3)+1;function lh(r,e=1){const t=[],n=Math.floor(e),i=(s,a)=>{for(const c of s)Array.isArray(c)&&a<n?i(c,a+1):t.push(c)};return i(r,0),t}function uh(r,e){const t=e.sort((i,s)=>i.tempIndex-s.tempIndex),n=[];for(const i of t)i.tempIndex<0&&n.push(i);n.push(r);for(const i of t)i.tempIndex>=0&&n.push(i);return n}const hh={id:"font_UwdNKSyVq2iiMiuHSRRsUIOu",family:"Roboto",fullName:"Roboto Bold",postScriptName:"Roboto-Bold",preview:"https://ik.imagekit.io/lh/fonts/v2/5zQgS86djScKA0ri67BBCqW7.png",style:"Roboto-Bold",url:"https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmWUlvAx05IsDqlA.ttf",category:"sans-serif",createdAt:"2023-06-20T04:42:55.909Z",updatedAt:"2023-06-20T04:42:55.909Z",userId:null},Bm=r=>{const e=r.map(t=>new FontFace(t.fontFamily,`url(${t.fontUrl})`).load());return e.length===0?Promise.resolve(!0):new Promise((t,n)=>{Promise.all(e).then(i=>{i.forEach(s=>{s instanceof FontFace&&s.family&&(document.fonts.add(s),t(!0))})}).catch(i=>{n(i)})})},zm=r=>{let e;const t=new Set,n=(h,d)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const p=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(y=>y(e,p))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=r(n,i,c);return c},gE=r=>r?zm(r):zm,pE=r=>r;function mE(r,e=pE){const t=v.useSyncExternalStore(r.subscribe,()=>e(r.getState()),()=>e(r.getInitialState()));return v.useDebugValue(t),t}const Wm=r=>{const e=gE(r),t=n=>mE(e,n);return Object.assign(t,e),t},Hm=r=>r?Wm(r):Wm,qn=Hm(r=>({timeline:null,size:{width:1080,height:1920},duration:5e3,fps:30,scale:{index:7,unit:300,zoom:1/300,segments:5},scroll:{left:0,top:0},playerRef:null,activeIds:[],targetIds:[],tracks:[],trackItemIds:[],transitionIds:[],transitionsMap:{},trackItemDetailsMap:{},trackItemsMap:{},setTimeline:e=>{r(()=>({timeline:e}))},setScale:e=>{r(()=>({scale:e}))},setScroll:e=>{r(()=>({scroll:e}))},setState:async e=>{r({...e})},setPlayerRef:e=>{r({playerRef:e})}}));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Um=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=v.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...c},u)=>v.createElement("svg",{ref:u,...yE,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:Um("lucide",i),...c},[...a.map(([h,d])=>v.createElement(h,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(r,e)=>{const t=v.forwardRef(({className:n,...i},s)=>v.createElement(bE,{ref:s,iconNode:e,className:Um(`lucide-${vE(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("FolderClosed",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("LayoutPanelLeft",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=we("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=we("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=we("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("RectangleVertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=we("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=we("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=we("SquareSplitHorizontal",[["path",{d:"M8 19H5c-1 0-2-1-2-2V7c0-1 1-2 2-2h3",key:"lubmu8"}],["path",{d:"M16 5h3c1 0 2 1 2 2v10c0 1-1 2-2 2h-3",key:"1ag34g"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=we("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */we("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=we("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=we("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Xa=r=>{const e=v.useCallback(n=>{if(!r?.current)return()=>{};const i=()=>{n()};return r.current.addEventListener("frameupdate",i),()=>{r.current&&r.current.removeEventListener("frameupdate",i)}},[r]);return v.useSyncExternalStore(e,()=>r?.current?.getCurrentFrame()??0,()=>0)},So=()=>{const[r,e]=v.useState(!1);return v.useEffect(()=>{const n=Ne.subject.pipe(Si(({key:i})=>i.startsWith(lm))).subscribe(i=>{i.key===Gu?e(!0):i.key===wo&&e(!1)});return()=>n.unsubscribe()},[]),r},Xm=()=>{const[r,e]=v.useState(!1),{duration:t,fps:n,scale:i,playerRef:s,activeIds:a}=qn(),c=Xa(s),u=()=>{Ne.dispatch(Wu)},h=()=>{Ne.dispatch(Uu,{payload:{},options:{time:Dm()}})},d=y=>{Ne.dispatch(Xu,{payload:{scale:y}})},g=()=>{Ne.dispatch(nm)},p=()=>{Ne.dispatch(im)};return v.useEffect(()=>(s?.current?.addEventListener("play",()=>{e(!0)}),s?.current?.addEventListener("pause",()=>{e(!1)}),()=>{s?.current?.removeEventListener("play",()=>{e(!0)}),s?.current?.removeEventListener("pause",()=>{e(!1)})}),[s]),w.jsx("div",{style:{position:"relative",height:"50px",boxShadow:"inset 0 1px 0 0 #27272a",flex:"none"},className:"bg-background",children:w.jsx("div",{style:{position:"absolute",height:50,width:"100%",display:"flex",alignItems:"center"},children:w.jsxs("div",{style:{height:36,width:"100%",display:"grid",gridTemplateColumns:"1fr 260px 1fr",alignItems:"center"},children:[w.jsxs("div",{className:"flex px-2",children:[w.jsxs(zt,{disabled:!a.length,onClick:u,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[w.jsx(TE,{size:14})," Delete"]}),w.jsxs(zt,{disabled:!a.length,onClick:h,variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[w.jsx($m,{size:15})," Split"]}),w.jsxs(zt,{disabled:!a.length,onClick:()=>{Ne.dispatch(Hu)},variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",children:[w.jsx($m,{size:15})," Clone"]})]}),w.jsxs("div",{className:"flex items-center justify-center",children:[w.jsxs("div",{children:[w.jsx(zt,{onClick:u,variant:"ghost",size:"icon",children:w.jsx(SE,{size:14})}),w.jsx(zt,{onClick:()=>{if(r)return p();g()},variant:"ghost",size:"icon",children:r?w.jsx(_E,{size:14}):w.jsx(xE,{size:14})}),w.jsx(zt,{onClick:h,variant:"ghost",size:"icon",children:w.jsx(CE,{size:14})})]}),w.jsxs("div",{className:"text-xs font-light",style:{display:"grid",alignItems:"center",gridTemplateColumns:"54px 4px 54px",paddingTop:"2px",justifyContent:"center"},children:[w.jsx("div",{className:"font-medium text-zinc-200",style:{display:"flex",justifyContent:"center"},"data-current-time":c/n,id:"video-current-time",children:Om({frame:c},{fps:n})}),w.jsx("span",{children:"/"}),w.jsx("div",{className:"text-muted-foreground",style:{display:"flex",justifyContent:"center"},children:Pm({time:t})})]})]}),w.jsx(AE,{scale:i,onChangeTimelineScale:d,duration:t})]})})})},AE=({scale:r,onChangeTimelineScale:e,duration:t})=>{const n=()=>{const s=jm(r);e(s)},i=()=>{const s=Nm(r);e(s)};return w.jsx("div",{className:"flex items-center justify-end",children:w.jsxs("div",{className:"flex border-l border-border pl-4 pr-2",children:[w.jsx(zt,{size:"icon",variant:"ghost",onClick:n,disabled:r.index===0,children:w.jsx(IE,{size:16})}),w.jsx(zt,{size:"icon",variant:"ghost",onClick:i,disabled:r.index===20,children:w.jsx(kE,{size:16})})]})})},Gm=[{id:"1",details:{src:"https://cdn.designcombo.dev/audio/Dawn%20of%20change.mp3",text:"Voiceover"},name:"Dawn of change",type:"audio",metadata:{author:"Roman Senyk"},display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/audio/Hope.mp3"},name:"Hope",type:"audio",metadata:{author:"Hugo Dujardin"}},{id:"3",details:{src:"https://cdn.designcombo.dev/audio/Tenderness.mp3"},name:"Tenderness",type:"audio",metadata:{author:"Benjamin Tissot"}},{id:"4",details:{src:"https://cdn.designcombo.dev/audio/Piano%20Moment.mp3"},name:"Piano moment",type:"audio",metadata:{author:"Benjamin Tissot"}}],qm=[{id:"1",details:{src:"https://ik.imagekit.io/wombo/images/img1.jpg"},preview:"https://ik.imagekit.io/wombo/images/img1.jpg?tr=w-190",type:"image"},{id:"2",details:{src:"https://ik.imagekit.io/wombo/images/img2.jpg"},preview:"https://ik.imagekit.io/wombo/images/img2.jpg?tr=w-190",type:"image"},{id:"3",details:{src:"https://ik.imagekit.io/wombo/images/img3.jpg"},preview:"https://ik.imagekit.io/wombo/images/img3.jpg?tr=w-190",type:"image"},{id:"4",details:{src:"https://ik.imagekit.io/wombo/images/img4.jpg"},preview:"https://ik.imagekit.io/wombo/images/img4.jpg?tr=w-190",type:"image"},{id:"5",details:{src:"https://ik.imagekit.io/wombo/images/img5.jpg"},preview:"https://ik.imagekit.io/wombo/images/img5.jpg?tr=w-190",type:"image"},,{id:"6",details:{src:"https://ik.imagekit.io/wombo/images/img6.jpg"},preview:"https://ik.imagekit.io/wombo/images/img6.jpg?tr=w-190",type:"image"},{id:"7",details:{src:"https://ik.imagekit.io/wombo/images/img7.jpg"},preview:"https://ik.imagekit.io/wombo/images/img7.jpg?tr=w-190",type:"image"}],Km=[{id:"1",details:{src:"https://cdn.designcombo.dev/videos/demo-video-1.mp4",text:"Scene"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-1.png",duration:17e3,display:{from:3e3}},{id:"2",details:{src:"https://cdn.designcombo.dev/videos/demo-video-2.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-2.png"},{id:"3",details:{src:"https://cdn.designcombo.dev/videos/demo-video-3.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-3.png",duration:2e4},{id:"4",details:{src:"https://cdn.designcombo.dev/videos/demo-video-4.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-4.png",duration:2e4},{id:"5",details:{src:"https://cdn.designcombo.dev/videos/demo-video-5.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-5.png",duration:23e3},{id:"6",details:{src:"https://cdn.designcombo.dev/videos/demo-video-6.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-6.png",duration:1e4},{id:"7",details:{src:"https://cdn.designcombo.dev/videos/demo-video-7.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-7.png",duration:12e3},{id:"8",details:{src:"https://cdn.designcombo.dev/videos/demo-video-8.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-8.png",duration:15e3},{id:"9",details:{src:"https://cdn.designcombo.dev/videos/demo-video-9.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-9.png",duration:15e3},{id:"10",details:{src:"https://cdn.designcombo.dev/videos/demo-video-10.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-10.png",duration:5e3},{id:"11",details:{src:"https://cdn.designcombo.dev/videos/demo-video-11.mp4"},type:"video",preview:"https://cdn.designcombo.dev/thumbnails/demo-video-s-11.png",duration:5e3}],Zm=[{id:"1",kind:"none",duration:0,preview:"https://ik.imagekit.io/wombo/transitions-v2/transition-none.png",type:"transition"},{id:"2",kind:"fade",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/fade.webp",type:"transition"},{id:"3",kind:"slide",name:"slide up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-up.webp",type:"transition",direction:"from-bottom"},{id:"4",kind:"slide",name:"slide down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-down.webp",type:"transition",direction:"from-top"},{id:"5",kind:"slide",name:"slide left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-left.webp",type:"transition",direction:"from-right"},{id:"6",kind:"slide",name:"slide right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/slide-right.webp",type:"transition",direction:"from-left"},{id:"7",kind:"wipe",name:"wipe up",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-up.webp",type:"transition",direction:"from-bottom"},{id:"8",kind:"wipe",name:"wipe down",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-down.webp",type:"transition",direction:"from-top"},{id:"9",kind:"wipe",name:"wipe left",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-left.webp",type:"transition",direction:"from-right"},{id:"10",kind:"wipe",name:"wipe right",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/wipe-right.webp",type:"transition",direction:"from-left"},{id:"11",kind:"flip",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/flip.webp",type:"transition"},{id:"12",kind:"clockWipe",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/clock-wipe.webp",type:"transition"},{id:"13",kind:"star",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/star.webp",type:"transition"},{id:"14",kind:"circle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/circle.webp",type:"transition"},{id:"15",kind:"rectangle",duration:.5,preview:"https://ik.imagekit.io/wombo/transitions-v2/rectangle.webp",type:"transition"}],ME=[{id:"1",src:"https://ik.imagekit.io/snapmotion/upload-video-1.mp4",type:"video"},{id:"2",src:"https://ik.imagekit.io/snapmotion/upload-video-2.mp4",type:"video"},{id:"3",src:"https://ik.imagekit.io/snapmotion/upload-video-3.mp4",type:"video"}],OE=()=>{const r=So();return w.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Transitions"}),w.jsx(xi,{children:w.jsx("div",{className:"grid grid-cols-3 gap-2 px-4",children:Zm.map((e,t)=>w.jsx(PE,{transition:e,shouldDisplayPreview:!r},t))})})]})},PE=({transition:r,shouldDisplayPreview:e})=>{const t=v.useMemo(()=>({backgroundImage:`url(${r.preview})`,backgroundSize:"cover",width:"70px",height:"70px"}),[r.preview]);return w.jsx(bo,{data:r,renderCustomPreview:w.jsx("div",{style:t}),shouldDisplayPreview:e,children:w.jsxs("div",{children:[w.jsx("div",{children:w.jsx("div",{style:t,draggable:!1})}),w.jsx("div",{className:"flex h-6 items-center overflow-ellipsis text-nowrap text-[12px] capitalize text-muted-foreground",children:r.name||r.type})]})})},DE=()=>{const r=()=>{Ne.dispatch(zu,{payload:{id:Et(),display:{from:0,to:5e3},details:{text:"Heading and some body",fontSize:120,width:600,fontUrl:hh.url,fontFamily:hh.postScriptName,color:"#ffffff",wordWrap:"break-word",textAlign:"center",borderWidth:0,borderColor:"#000000",boxShadow:{color:"#ffffff",x:0,y:0,blur:0}}},options:{}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Text"}),w.jsx("div",{className:"flex flex-col gap-2 px-4",children:w.jsx(zt,{draggable:!1,onClick:r,variant:"secondary",className:"w-full",children:"Add text"})})]})},jE=()=>{const r=v.useRef(null),e=n=>{t(n)},t=async n=>{const i=n[0].type;i.includes("audio")&&Ne.dispatch(ys,{payload:{id:Et(),details:{src:URL.createObjectURL(n[0]),volume:50}}}),i.includes("video")&&Ne.dispatch(vs,{payload:{id:Et(),display:{from:2e3,to:7e3},details:{src:URL.createObjectURL(n[0]),name:n[0].name}}}),i.includes("image")&&Ne.dispatch(bs,{payload:{id:Et(),details:{src:URL.createObjectURL(n[0])}}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Your media"}),w.jsx("input",{ref:r,id:"file-upload-handle",type:"file",accept:"audio/*,video/*,image/*",onChange:n=>e(Array.from(n.target.files||[])),className:"hidden"}),w.jsx("div",{className:"px-4 py-2",children:w.jsx("div",{children:w.jsxs(tm,{defaultValue:"projects",className:"w-full",children:[w.jsxs(Bu,{className:"grid w-full grid-cols-2",children:[w.jsx(Ba,{value:"projects",children:"Project"}),w.jsx(Ba,{value:"workspace",children:"Workspace"})]}),w.jsxs(za,{value:"projects",children:[w.jsxs(zt,{onClick:()=>{r.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[w.jsx(Ym,{size:16})," Upload"]}),w.jsx("div",{})]}),w.jsx(za,{value:"workspace",children:w.jsxs(zt,{onClick:()=>{r.current?.click()},className:"flex w-full gap-2",variant:"secondary",children:[w.jsx(Ym,{size:16})," Upload"]})})]})})}),w.jsx(xi,{children:w.jsx("div",{className:"masonry-sm px-4"})})]})},FE=()=>{const r=So(),e=t=>{Ne.dispatch(ys,{payload:t,options:{}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Audios"}),w.jsx(xi,{children:w.jsx("div",{className:"flex flex-col px-2",children:Gm.map((t,n)=>w.jsx(LE,{shouldDisplayPreview:!r,handleAddAudio:e,audio:t},n))})})]})},LE=({handleAddAudio:r,audio:e,shouldDisplayPreview:t})=>{const n=v.useMemo(()=>({backgroundImage:"url(https://cdn.designcombo.dev/thumbnails/music-preview.png)",backgroundSize:"cover",width:"70px",height:"70px"}),[]);return w.jsx(bo,{data:e,renderCustomPreview:w.jsx("div",{style:n}),shouldDisplayPreview:t,children:w.jsxs("div",{draggable:!1,onClick:()=>r(e),style:{display:"grid",gridTemplateColumns:"48px 1fr"},className:"flex cursor-pointer gap-4 px-2 py-1 text-sm hover:bg-zinc-800/70",children:[w.jsx("div",{className:"flex h-12 items-center justify-center bg-zinc-800",children:w.jsx(wE,{width:16})}),w.jsxs("div",{className:"flex flex-col justify-center",children:[w.jsx("div",{children:e.name}),w.jsx("div",{className:"text-zinc-400",children:e.metadata?.author})]})]})})},NE=()=>{const r=So(),e=t=>{Ne.dispatch(bs,{payload:t,options:{trackId:"main"}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Photos"}),w.jsx(xi,{children:w.jsx("div",{className:"masonry-sm px-4",children:qm.map((t,n)=>w.jsx(RE,{image:t,shouldDisplayPreview:!r,handleAddImage:e},n))})})]})},RE=({handleAddImage:r,image:e,shouldDisplayPreview:t})=>{const n=v.useMemo(()=>({backgroundImage:`url(${e.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[e.preview]);return w.jsx(bo,{data:e,renderCustomPreview:w.jsx("div",{style:n}),shouldDisplayPreview:t,children:w.jsx("div",{onClick:()=>r({id:Et(),details:{src:e.details.src}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:w.jsx("img",{draggable:!1,src:e.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},VE=()=>{const r=So(),e=t=>{Ne.dispatch(vs,{payload:t,options:{resourceId:"main"}})};return w.jsxs("div",{className:"flex flex-1 flex-col",children:[w.jsx("div",{className:"text-text-primary flex h-12 flex-none items-center px-4 text-sm font-medium",children:"Videos"}),w.jsx(xi,{children:w.jsx("div",{className:"masonry-sm px-4",children:Km.map((t,n)=>w.jsx(BE,{video:t,shouldDisplayPreview:!r,handleAddVideo:e},n))})})]})},BE=({handleAddVideo:r,video:e,shouldDisplayPreview:t})=>{const n=v.useMemo(()=>({backgroundImage:`url(${e.preview})`,backgroundSize:"cover",width:"80px",height:"80px"}),[e.preview]);return w.jsx(bo,{data:e,renderCustomPreview:w.jsx("div",{style:n,className:"draggable"}),shouldDisplayPreview:t,children:w.jsx("div",{onClick:()=>r({...e,id:Et(),details:{src:e.details.src,...e.details}}),className:"flex w-full items-center justify-center overflow-hidden bg-background pb-2",children:w.jsx("img",{draggable:!1,src:e.preview,className:"h-full w-full rounded-md object-cover",alt:"image"})})})},dh=Hm(r=>({activeMenuItem:null,showMenuItem:!1,cropTarget:null,showControlItem:!1,showToolboxItem:!1,activeToolboxItem:null,setCropTarget:e=>r({cropTarget:e}),setActiveMenuItem:e=>r({activeMenuItem:e}),setShowMenuItem:e=>r({showMenuItem:e}),setShowControlItem:e=>r({showControlItem:e}),setShowToolboxItem:e=>r({showToolboxItem:e}),setActiveToolboxItem:e=>r({activeToolboxItem:e})})),zE=({children:r})=>{const{showMenuItem:e,setShowMenuItem:t}=dh(),n=()=>{t(!1)};return w.jsxs("div",{style:{left:e?"0":"-100%",transition:"left 0.25s ease-in-out",zIndex:200},className:"absolute top-1/2 mt-6 flex h-[calc(100%-32px-64px)] w-[340px] -translate-y-1/2 rounded-lg shadow-lg",children:[w.jsx("div",{className:"w-[74px]"}),w.jsxs("div",{className:"relative flex flex-1 bg-background/80 backdrop-blur-lg backdrop-filter",children:[w.jsx(zt,{variant:"ghost",className:"absolute right-2 top-2 h-8 w-8 text-muted-foreground",size:"icon",children:w.jsx(EE,{width:16,onClick:n})}),r]})]})},WE=()=>{const{activeMenuItem:r}=dh();return r==="transitions"?w.jsx(OE,{}):r==="texts"?w.jsx(DE,{}):r==="videos"?w.jsx(VE,{}):r==="audios"?w.jsx(FE,{}):r==="images"?w.jsx(NE,{}):r==="uploads"?w.jsx(jE,{}):null},HE=()=>w.jsx(zE,{children:w.jsx(WE,{})}),Jm={redo:({...r})=>w.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:w.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2957 4.15721C13.9052 3.76669 13.9052 3.13352 14.2957 2.743C14.6862 2.35247 15.3194 2.35247 15.7099 2.743L20.953 7.98603C21.1387 8.16758 21.2539 8.42087 21.2539 8.70108C21.2539 8.70111 21.2539 8.70114 21.2539 8.70117C21.2539 8.70431 21.2539 8.70744 21.2539 8.71057C21.2518 8.93273 21.1773 9.13757 21.0528 9.30262C21.0249 9.33973 20.9942 9.37505 20.961 9.40828L15.7099 14.6593C15.3194 15.0499 14.6862 15.0499 14.2957 14.6593C13.9052 14.2688 13.9052 13.6357 14.2957 13.2451L17.8398 9.70108H9.22665C8.59943 9.70108 7.97836 9.82462 7.39888 10.0646C6.81941 10.3047 6.29289 10.6565 5.84938 11.1C5.40587 11.5435 5.05406 12.07 4.81403 12.6495C4.57401 13.229 4.45047 13.85 4.45047 14.4773C4.45047 15.1045 4.57401 15.7256 4.81403 16.305C5.05406 16.8845 5.40587 17.411 5.84938 17.8545C6.29289 18.298 6.81941 18.6498 7.39888 18.8899C7.97836 19.1299 8.59943 19.2534 9.22665 19.2534H12.9024C13.4547 19.2534 13.9024 19.7012 13.9024 20.2534C13.9024 20.8057 13.4547 21.2534 12.9024 21.2534H9.22665C8.33679 21.2534 7.45564 21.0782 6.63352 20.7376C5.81139 20.3971 5.06439 19.898 4.43517 19.2687C3.80594 18.6395 3.30681 17.8925 2.96627 17.0704C2.62574 16.2483 2.45047 15.3671 2.45047 14.4773C2.45047 13.5874 2.62574 12.7063 2.96627 11.8841C3.30681 11.062 3.80594 10.315 4.43517 9.68578C5.06439 9.05655 5.81139 8.55742 6.63352 8.21689C7.45564 7.87635 8.33679 7.70108 9.22665 7.70108H17.8396L14.2957 4.15721Z",fill:"currentColor"})}),undo:({...r})=>w.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:w.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.60387 4.30711C9.99439 3.91659 9.99439 3.28342 9.60387 2.8929C9.21334 2.50238 8.58018 2.50237 8.18965 2.8929L2.8925 8.19004C2.70497 8.37758 2.59961 8.63193 2.59961 8.89715C2.59961 9.16237 2.70497 9.41672 2.8925 9.60426L8.18965 14.9014C8.58018 15.2919 9.21334 15.2919 9.60387 14.9014C9.99439 14.5109 9.99439 13.8777 9.60387 13.4872L5.86478 9.7481H15.1044C15.7383 9.7481 16.366 9.87295 16.9516 10.1155C17.5372 10.3581 18.0693 10.7136 18.5176 11.1619C18.9658 11.6101 19.3213 12.1422 19.5639 12.7278C19.8065 13.3134 19.9313 13.9411 19.9313 14.575C19.9313 15.2088 19.8065 15.8365 19.5639 16.4221C19.3213 17.0077 18.9658 17.5398 18.5176 17.9881C18.0693 18.4363 17.5372 18.7918 16.9516 19.0344C16.366 19.277 15.7383 19.4018 15.1044 19.4018H11.3964C10.8442 19.4018 10.3964 19.8495 10.3964 20.4018C10.3964 20.9541 10.8442 21.4018 11.3964 21.4018H15.1044C16.001 21.4018 16.8887 21.2252 17.717 20.8822C18.5452 20.5391 19.2978 20.0362 19.9318 19.4023C20.5657 18.7683 21.0686 18.0158 21.4116 17.1875C21.7547 16.3592 21.9313 15.4715 21.9313 14.575C21.9313 13.6784 21.7547 12.7907 21.4116 11.9624C21.0686 11.1342 20.5657 10.3816 19.9318 9.74764C19.2978 9.11371 18.5452 8.61085 17.717 8.26777C16.8887 7.92469 16.001 7.7481 15.1044 7.7481H6.16287L9.60387 4.30711Z",fill:"currentColor"})})};function UE(){const r=()=>{Ne.dispatch($u)},e=()=>{Ne.dispatch(Yu)};return w.jsx("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr 320px"},className:"pointer-events-none absolute left-0 right-0 top-0 z-[205] flex h-[72px] items-center px-2",children:w.jsxs("div",{className:"pointer-events-auto flex h-14 items-center gap-2",children:[w.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-background"}),w.jsxs("div",{className:"flex h-12 items-center bg-background px-1.5",children:[w.jsx(zt,{onClick:r,className:"text-muted-foreground",variant:"ghost",size:"icon",children:w.jsx(Jm.undo,{width:20})}),w.jsx(zt,{onClick:e,className:"text-muted-foreground",variant:"ghost",size:"icon",children:w.jsx(Jm.redo,{width:20})})]})]})})}var $E=Object.defineProperty,Qm=(r,e)=>{for(var t in e)$E(r,t,{get:e[t],enumerable:!0,configurable:!0,set:n=>e[t]=()=>n})};if(typeof v.createContext!="function"){const r=['Remotion requires React.createContext, but it is "undefined".','If you are in a React Server Component, turn it into a client component by adding "use client" at the top of the file.',"","Before:",'  import {useCurrentFrame} from "remotion";',"","After:",'  "use client";','  import {useCurrentFrame} from "remotion";'];throw new Error(r.join(`
`))}function e0(){return["NOD","E_EN","V"].join("")}var t0=()=>["e","nv"].join(""),St=()=>{const r=typeof window<"u"&&window.remotion_isPlayer,e=typeof window<"u"&&typeof window.process<"u"&&typeof window.process.env<"u"&&(window.process[t0()][e0()]==="test"||window.process[t0()][e0()]==="production"&&typeof window<"u"&&typeof window.remotion_puppeteerTimeout<"u");return{isStudio:typeof window<"u"&&window.remotion_isStudio,isRendering:e,isPlayer:r}},YE=v.createElement,r0=[],n0=()=>{if(!St().isStudio)return;const r=new Proxy(YE,{apply(e,t,n){if(r0.includes(n[0])){const[i,s,...a]=n,c={...s??{},stack:new Error().stack};return Reflect.apply(e,t,[i,c,...a])}return Reflect.apply(e,t,n)}});v.createElement=r},Co=r=>{r0.push(r),n0()},i0=v.createContext(!1),XE=({children:r})=>w.jsx(i0.Provider,{value:!0,children:r}),fh=()=>v.useContext(i0);function Ga(r){return!!r}var qa="4.0.229",GE=()=>{if(typeof globalThis>"u")return;const r=globalThis.remotion_imported||typeof window<"u"&&window.remotion_imported;if(r){if(r===qa)return;throw new TypeError(` Multiple versions of Remotion detected: ${[qa,typeof r=="string"?r:"an older version"].filter(Ga).join(" and ")}. This will cause things to break in an unexpected way.
Check that all your Remotion packages are on the same version. If your dependencies depend on Remotion, make them peer dependencies. You can also run \`npx remotion versions\` from your terminal to see which versions are mismatching.`)}globalThis.remotion_imported=qa,typeof window<"u"&&(window.remotion_imported=qa)},qE=(r,e)=>{const{style:t,...n}=r,i=v.useMemo(()=>({position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",...t}),[t]);return w.jsx("div",{ref:e,style:i,...n})},To=v.forwardRef(qE),Wt=v.createContext(null),_s=v.createContext({registerSequence:()=>{throw new Error("SequenceManagerContext not initialized")},unregisterSequence:()=>{throw new Error("SequenceManagerContext not initialized")},sequences:[]}),Eo=v.createContext({hidden:{},setHidden:()=>{throw new Error("SequenceVisibilityToggle not initialized")}}),KE=({children:r})=>{const[e,t]=v.useState([]),[n,i]=v.useState({}),s=v.useCallback(h=>{t(d=>[...d,h])},[]),a=v.useCallback(h=>{t(d=>d.filter(g=>g.id!==h))},[]),c=v.useMemo(()=>({registerSequence:s,sequences:e,unregisterSequence:a}),[s,e,a]),u=v.useMemo(()=>({hidden:n,setHidden:i}),[n]);return w.jsx(_s.Provider,{value:c,children:w.jsx(Eo.Provider,{value:u,children:r})})},xs=v.createContext({getNonce:()=>0,fastRefreshes:0}),gh=()=>{const r=v.useContext(xs),[e,t]=v.useState(()=>r.getNonce()),n=v.useRef(r);return v.useEffect(()=>{n.current!==r&&(n.current=r,t(r.getNonce))},[r]),e},s0={};Qm(s0,{useTimelineSetFrame:()=>x0,useTimelinePosition:()=>Ti,usePlayingState:()=>_h,persistCurrentFrame:()=>b0,getInitialFrameState:()=>w0,getFrameForComposition:()=>_0,TimelineContext:()=>Yr,SetTimelineContext:()=>Ss});var Kn=v.createContext({compositions:[],registerComposition:()=>{},unregisterComposition:()=>{},registerFolder:()=>{},unregisterFolder:()=>{},setCurrentCompositionMetadata:()=>{},updateCompositionDefaultProps:()=>{},folders:[],currentCompositionMetadata:null,canvasContent:null,setCanvasContent:()=>{}}),Ka=v.createContext({props:{},updateProps:()=>{throw new Error("Not implemented")},resetUnsaved:()=>{throw new Error("Not implemented")}}),o0=v.createRef(),a0=({children:r})=>{const[e,t]=v.useState({}),n=v.useCallback(({defaultProps:a,id:c,newProps:u})=>{t(h=>({...h,[c]:typeof u=="function"?u(h[c]??a):u}))},[]),i=v.useCallback(()=>{t({})},[]);v.useImperativeHandle(o0,()=>({getProps:()=>e,setProps:t}),[e]);const s=v.useMemo(()=>({props:e,updateProps:n,resetUnsaved:i}),[e,i,n]);return w.jsx(Ka.Provider,{value:s,children:r})},ZE={"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";"},c0={},JE=r=>{c0[r]||(console.warn(r),c0[r]=!0)},QE=r=>{for(const e of Object.keys(ZE))if(r.includes(e))return{containsHex:!0,hexCode:e};return{containsHex:!1}},ph=r=>r.startsWith("/")?ph(r.substring(1)):r,ek=r=>{if(typeof window<"u"&&window.remotion_staticBase){if(r.startsWith(window.remotion_staticBase))throw new Error(`The value "${r}" is already prefixed with the static base ${window.remotion_staticBase}. You don't need to call staticFile() on it.`);return`${window.remotion_staticBase}/${ph(r)}`}return`/${ph(r)}`},tk=r=>r.split("/").map(i=>encodeURIComponent(i)).join("/"),rk=r=>{if(r===null)throw new TypeError("null was passed to staticFile()");if(typeof r>"u")throw new TypeError("undefined was passed to staticFile()");if(r.startsWith("http://")||r.startsWith("https://"))throw new TypeError(`staticFile() does not support remote URLs - got "${r}". Instead, pass the URL without wrapping it in staticFile(). See: https://remotion.dev/docs/staticfile-remote-urls`);if(r.startsWith("..")||r.startsWith("./"))throw new TypeError(`staticFile() does not support relative paths - got "${r}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(r.startsWith("/Users")||r.startsWith("/home")||r.startsWith("/tmp")||r.startsWith("/etc")||r.startsWith("/opt")||r.startsWith("/var")||r.startsWith("C:")||r.startsWith("D:")||r.startsWith("E:"))throw new TypeError(`staticFile() does not support absolute paths - got "${r}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(r.startsWith("public/"))throw new TypeError(`Do not include the public/ prefix when using staticFile() - got "${r}". See: https://remotion.dev/docs/staticfile-relative-paths`);const e=QE(r);e.containsHex&&JE(`WARNING: You seem to pass an already encoded path (path contains ${e.hexCode}). Since Remotion 4.0, the encoding is done by staticFile() itself. You may want to remove a encodeURIComponent() wrapping.`);const t=tk(r),n=ek(t);return n.startsWith("/")?n:`/${n}`},mh="remotion-date:",vh="remotion-file:",nk=({data:r,indent:e,staticBase:t})=>{let n=!1,i=!1,s=!1,a=!1;try{return{serializedString:JSON.stringify(r,function(u,h){const d=this[u];return d instanceof Date?(n=!0,`${mh}${d.toISOString()}`):d instanceof Map?(s=!0,h):d instanceof Set?(a=!0,h):typeof d=="string"&&t!==null&&d.startsWith(t)?(i=!0,`${vh}${d.replace(t+"/","")}`):h},e),customDateUsed:n,customFileUsed:i,mapUsed:s,setUsed:a}}catch(c){throw new Error("Could not serialize the passed input props to JSON: "+c.message)}},l0=r=>JSON.parse(r,(e,t)=>typeof t=="string"&&t.startsWith(mh)?new Date(t.replace(mh,"")):typeof t=="string"&&t.startsWith(vh)?rk(t.replace(vh,"")):t),Ci=r=>St().isStudio?l0(nk({data:r,indent:2,staticBase:window.remotion_staticBase}).serializedString):r,u0=!1,ik=()=>{u0||(u0=!0,console.warn("Called `getInputProps()` on the server. This function is not available server-side and has returned an empty object."),console.warn("To hide this warning, don't call this function on the server:"),console.warn("  typeof window === 'undefined' ? {} : getInputProps()"))},h0=()=>{if(typeof window>"u")return ik(),{};if(St().isPlayer)throw new Error("You cannot call `getInputProps()` from a <Player>. Instead, the props are available as React props from component that you passed as `component` prop.");const r=window.remotion_inputProps;return r?l0(r):{}},d0=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"];function sk(r,e){if(!(typeof r>"u")){if(typeof r!="string")throw new TypeError(`The "defaultCodec" prop ${e} must be a string, but you passed a value of type ${typeof r}.`);if(!d0.includes(r))throw new Error(`The "defaultCodec" prop ${e} must be one of ${d0.join(", ")}, but you passed ${r}.`)}}function Za(r,e,t){if(typeof r!="number")throw new Error(`The "${e}" prop ${t} must be a number, but you passed a value of type ${typeof r}`);if(isNaN(r))throw new TypeError(`The "${e}" prop ${t} must not be NaN, but is NaN.`);if(!Number.isFinite(r))throw new TypeError(`The "${e}" prop ${t} must be finite, but is ${r}.`);if(r%1!==0)throw new TypeError(`The "${e}" prop ${t} must be an integer, but is ${r}.`);if(r<=0)throw new TypeError(`The "${e}" prop ${t} must be positive, but got ${r}.`)}function yh(r,e){const{allowFloats:t,component:n}=e;if(typeof r>"u")throw new Error(`The "durationInFrames" prop ${n} is missing.`);if(typeof r!="number")throw new Error(`The "durationInFrames" prop ${n} must be a number, but you passed a value of type ${typeof r}`);if(r<=0)throw new TypeError(`The "durationInFrames" prop ${n} must be positive, but got ${r}.`);if(!t&&r%1!==0)throw new TypeError(`The "durationInFrames" prop ${n} must be an integer, but got ${r}.`);if(!Number.isFinite(r))throw new TypeError(`The "durationInFrames" prop ${n} must be finite, but got ${r}.`)}function f0(r,e,t){if(typeof r!="number")throw new Error(`"fps" must be a number, but you passed a value of type ${typeof r} ${e}`);if(!Number.isFinite(r))throw new Error(`"fps" must be a finite, but you passed ${r} ${e}`);if(isNaN(r))throw new Error(`"fps" must not be NaN, but got ${r} ${e}`);if(r<=0)throw new TypeError(`"fps" must be positive, but got ${r} ${e}`)}var g0=({calculated:r,compositionId:e,compositionFps:t,compositionHeight:n,compositionWidth:i,compositionDurationInFrames:s})=>{const a=`calculated by calculateMetadata() for the composition "${e}"`,c=`of the "<Composition />" component with the id "${e}"`,u=r?.width??i??void 0;Za(u,"width",r?.width?a:c);const h=r?.height??n??void 0;Za(h,"height",r?.height?a:c);const d=r?.fps??t??null;f0(d,r?.fps?a:c);const g=r?.durationInFrames??s??null;yh(g,{allowFloats:!1,component:`of the "<Composition />" component with the id "${e}"`});const p=r?.defaultCodec;return sk(p,a),{width:u,height:h,fps:d,durationInFrames:g,defaultCodec:p}},p0=({calculateMetadata:r,signal:e,defaultProps:t,originalProps:n,compositionId:i,compositionDurationInFrames:s,compositionFps:a,compositionHeight:c,compositionWidth:u})=>{const h=r?r({defaultProps:t,props:n,abortSignal:e,compositionId:i}):null;if(h!==null&&typeof h=="object"&&"then"in h)return h.then(g=>{const{height:p,width:y,durationInFrames:b,fps:x,defaultCodec:S}=g0({calculated:g,compositionDurationInFrames:s,compositionFps:a,compositionHeight:c,compositionWidth:u,compositionId:i});return{width:y,height:p,fps:x,durationInFrames:b,id:i,defaultProps:Ci(t),props:Ci(g.props??n),defaultCodec:S??null}});const d=g0({calculated:h,compositionDurationInFrames:s,compositionFps:a,compositionHeight:c,compositionWidth:u,compositionId:i});return h===null?{...d,id:i,defaultProps:Ci(t??{}),props:Ci(n),defaultCodec:null}:{...d,id:i,defaultProps:Ci(t??{}),props:Ci(h.props??n),defaultCodec:h.defaultCodec??null}},ok=r=>{try{return{type:"success",result:p0(r)}}catch(e){return{type:"error",error:e}}},Ja=v.createContext(null),m0=v.createRef(),v0=r=>!!r.calculateMetadata,ak="remotion.propsUpdatedExternally",y0=({children:r})=>{const[e,t]=v.useState(null),{compositions:n,canvasContent:i,currentCompositionMetadata:s}=v.useContext(Kn),{fastRefreshes:a}=v.useContext(xs),c=v.useMemo(()=>n.find(R=>i&&i.type==="composition"&&i.compositionId===R.id),[i,n]),u=n.find(R=>R.id===e),{props:h}=v.useContext(Ka),d=v.useMemo(()=>typeof window>"u"||St().isPlayer?{}:h0()??{},[]),[g,p]=v.useState({}),y=v.useMemo(()=>c?h[c.id]??{}:{},[h,c]),b=v.useMemo(()=>u?h[u.id]??{}:{},[h,u]),x=!!s,S=v.useCallback(({calculateMetadata:R,combinedProps:X,compositionDurationInFrames:U,compositionFps:K,compositionHeight:$,compositionId:G,compositionWidth:re,defaultProps:fe})=>{const Q=new AbortController;if(x)return Q;const{signal:ue}=Q,oe=ok({compositionId:G,calculateMetadata:R,originalProps:X,signal:ue,defaultProps:fe,compositionDurationInFrames:U,compositionFps:K,compositionHeight:$,compositionWidth:re});if(oe.type==="error")return p(de=>({...de,[G]:{type:"error",error:oe.error}})),Q;const se=oe.result;return typeof se=="object"&&"then"in se?(p(de=>{const ne=de[G];return ne?.type==="success"||ne?.type==="success-and-refreshing"?{...de,[G]:{type:"success-and-refreshing",result:ne.result}}:{...de,[G]:{type:"loading"}}}),se.then(de=>{Q.signal.aborted||p(ne=>({...ne,[G]:{type:"success",result:de}}))}).catch(de=>{Q.signal.aborted||p(ne=>({...ne,[G]:{type:"error",error:de}}))})):p(de=>({...de,[G]:{type:"success",result:se}})),Q},[x]),T=i?.type==="composition"?i.compositionId:null;v.useImperativeHandle(m0,()=>({setCurrentRenderModalComposition:R=>{t(R)},reloadCurrentlySelectedComposition:()=>{if(!T)return;const R=n.find($=>$.id===T);if(!R)throw new Error(`Could not find composition with id ${T}`);const X=h[T]??{},U={...R.defaultProps??{},...X??{}},K={...U,...d??{}};S({defaultProps:U,calculateMetadata:R.calculateMetadata,combinedProps:K,compositionDurationInFrames:R.durationInFrames??null,compositionFps:R.fps??null,compositionHeight:R.height??null,compositionWidth:R.width??null,compositionId:R.id})}}),[h,n,T,S,d]);const k=c?.id===u?.id,I=v.useMemo(()=>({...c?.defaultProps??{},...y??{}}),[c?.defaultProps,y]),M=v.useMemo(()=>({...I,...d??{}}),[I,d]),F=c&&v0(c),N=typeof window<"u"&&window.remotion_ignoreFastRefreshUpdate&&a<=window.remotion_ignoreFastRefreshUpdate;v.useEffect(()=>{if(!N&&F){const R=S({calculateMetadata:c.calculateMetadata,combinedProps:M,compositionDurationInFrames:c.durationInFrames??null,compositionFps:c.fps??null,compositionHeight:c.height??null,compositionWidth:c.width??null,defaultProps:I,compositionId:c.id});return()=>{R.abort()}}},[F,I,S,M,c?.calculateMetadata,c?.durationInFrames,c?.fps,c?.height,c?.id,c?.width,N]),v.useEffect(()=>{N||window.dispatchEvent(new CustomEvent("remotion.propsUpdatedExternally"))},[a]),v.useEffect(()=>{if(u&&!k){const R={...u.defaultProps??{},...b??{},...d??{}},X=S({calculateMetadata:u.calculateMetadata,compositionDurationInFrames:u.durationInFrames??null,compositionFps:u.fps??null,compositionHeight:u.height??null,compositionId:u.id,compositionWidth:u.width??null,defaultProps:I,combinedProps:R});return()=>{X.abort()}}},[I,S,d,k,u,b]);const W=v.useMemo(()=>{const R=n.filter(X=>X.calculateMetadata===null);return{...g,...R.reduce((X,U)=>({...X,[U.id]:{type:"success",result:{...U,defaultProps:U.defaultProps??{}}}}),{})}},[n,g]);return w.jsx(Ja.Provider,{value:W,children:r})},bh=r=>{const e=v.useContext(Ja),{props:t}=v.useContext(Ka),{compositions:n,canvasContent:i,currentCompositionMetadata:s}=v.useContext(Kn),a=i?.type==="composition"?i.compositionId:null,c=r??a,u=n.find(d=>d.id===c),h=v.useMemo(()=>u?t[u.id]??{}:{},[t,u]);return v.useMemo(()=>u?s?{type:"success",result:{...s,id:u.id,props:s.props,defaultProps:u.defaultProps??{},defaultCodec:s.defaultCodec}}:v0(u)?e[u.id]?e[u.id]:null:(yh(u.durationInFrames,{allowFloats:!1,component:`in <Composition id="${u.id}">`}),f0(u.fps,`in <Composition id="${u.id}">`),Za(u.width,"width",`in <Composition id="${u.id}">`),Za(u.height,"height",`in <Composition id="${u.id}">`),{type:"success",result:{width:u.width,height:u.height,fps:u.fps,id:u.id,durationInFrames:u.durationInFrames,defaultProps:u.defaultProps??{},props:{...u.defaultProps??{},...h??{},...typeof window>"u"||St().isPlayer?{}:h0()??{}},defaultCodec:null}}):null,[u,e,s,h])},Qa=()=>{const{canvasContent:r,compositions:e,currentCompositionMetadata:t}=v.useContext(Kn),n=e.find(s=>r?.type==="composition"&&s.id===r.compositionId),i=bh(n?.id??null);return v.useMemo(()=>!i||i.type==="error"||i.type==="loading"||!n?null:{...i.result,defaultProps:n.defaultProps??{},id:n.id,...t??{},component:n.component},[t,i,n])},Yr=v.createContext({frame:{},playing:!1,playbackRate:1,rootId:"",imperativePlaying:{current:!1},setPlaybackRate:()=>{throw new Error("default")},audioAndVideoTags:{current:[]}}),Ss=v.createContext({setFrame:()=>{throw new Error("default")},setPlaying:()=>{throw new Error("default")}}),wh=()=>"remotion.time-all",b0=r=>{localStorage.setItem(wh(),JSON.stringify(r))},w0=()=>{const r=localStorage.getItem(wh())??"{}";return JSON.parse(r)},_0=r=>{const e=localStorage.getItem(wh())??"{}",t=JSON.parse(e);return t[r]!==void 0?Number(t[r]):typeof window>"u"?0:window.remotion_initialFrame??0},Ti=()=>{const r=Qa(),e=v.useContext(Yr);if(!r)return typeof window>"u"?0:window.remotion_initialFrame??0;const t=e.frame[r.id]??(St().isPlayer?0:_0(r.id));return Math.min(r.durationInFrames-1,t)},x0=()=>{const{setFrame:r}=v.useContext(Ss);return r},_h=()=>{const{playing:r,imperativePlaying:e}=v.useContext(Yr),{setPlaying:t}=v.useContext(Ss);return v.useMemo(()=>[r,t,e],[e,r,t])},Ei=v.createContext(!1),xh=({children:r})=>w.jsx(Ei.Provider,{value:!0,children:r}),ec=()=>{const r=v.useContext(Wt),e=r?.width??null,t=r?.height??null,n=r?.durationInFrames??null,i=Qa();return v.useMemo(()=>{if(!i)return null;const{id:s,durationInFrames:a,fps:c,height:u,width:h,defaultProps:d,props:g,defaultCodec:p}=i;return{id:s,width:e??h,height:t??u,fps:c,durationInFrames:n??a,defaultProps:d,props:g,defaultCodec:p}},[n,t,e,i])},Zn=()=>{const r=ec(),e=v.useContext(Ei),t=fh();if(!r)throw typeof window<"u"&&window.remotion_isPlayer||t?new Error(["No video config found. Likely reasons:","- You are probably calling useVideoConfig() from outside the component passed to <Player />. See https://www.remotion.dev/docs/player/examples for how to set up the Player correctly.","- You have multiple versions of Remotion installed which causes the React context to get lost."].join("-")):new Error("No video config found. You are probably calling useVideoConfig() from a component which has not been registered as a <Composition />. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions for more information.");if(!e)throw new Error("Called useVideoConfig() outside a Remotion composition.");return r},Jn=()=>{if(!v.useContext(Ei))throw St().isPlayer?new Error("useCurrentFrame can only be called inside a component that was passed to <Player>. See: https://www.remotion.dev/docs/player/examples"):new Error("useCurrentFrame() can only be called inside a component that was registered as a composition. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions");const e=Ti(),t=v.useContext(Wt),n=t?t.cumulatedFrom+t.relativeFrom:0;return e-n},ck=({frame:r,children:e,active:t=!0})=>{const n=Jn(),i=Zn();if(typeof r>"u")throw new Error("The <Freeze /> component requires a 'frame' prop, but none was passed.");if(typeof r!="number")throw new Error(`The 'frame' prop of <Freeze /> must be a number, but is of type ${typeof r}`);if(Number.isNaN(r))throw new Error("The 'frame' prop of <Freeze /> must be a real number, but it is NaN.");if(!Number.isFinite(r))throw new Error(`The 'frame' prop of <Freeze /> must be a finite number, but it is ${r}.`);const s=v.useMemo(()=>{if(typeof t=="boolean")return t;if(typeof t=="function")return t(n)},[t,n]),a=v.useContext(Yr),u=v.useContext(Wt)?.relativeFrom??0,h=v.useMemo(()=>s?{...a,playing:!1,imperativePlaying:{current:!1},frame:{[i.id]:r+u}}:a,[s,a,i.id,r,u]);return w.jsx(Yr.Provider,{value:h,children:e})},lk=({from:r=0,durationInFrames:e=1/0,children:t,name:n,height:i,width:s,showInTimeline:a=!0,_remotionInternalLoopDisplay:c,_remotionInternalStack:u,_remotionInternalPremountDisplay:h,...d},g)=>{const{layout:p="absolute-fill"}=d,[y]=v.useState(()=>String(Math.random())),b=v.useContext(Wt),{rootId:x}=v.useContext(Yr),S=b?b.cumulatedFrom+b.relativeFrom:0,T=gh();if(p!=="absolute-fill"&&p!=="none")throw new TypeError(`The layout prop of <Sequence /> expects either "absolute-fill" or "none", but you passed: ${p}`);if(p==="none"&&typeof d.style<"u")throw new TypeError('If layout="none", you may not pass a style.');if(typeof e!="number")throw new TypeError(`You passed to durationInFrames an argument of type ${typeof e}, but it must be a number.`);if(e<=0)throw new TypeError(`durationInFrames must be positive, but got ${e}`);if(typeof r!="number")throw new TypeError(`You passed to the "from" props of your <Sequence> an argument of type ${typeof r}, but it must be a number.`);if(!Number.isFinite(r))throw new TypeError(`The "from" prop of a sequence must be finite, but got ${r}.`);const k=Ti(),I=Zn(),M=b?Math.min(b.durationInFrames-r,e):e,F=Math.max(0,Math.min(I.durationInFrames-r,M)),{registerSequence:N,unregisterSequence:W}=v.useContext(_s),{hidden:R}=v.useContext(Eo),X=v.useMemo(()=>b?.premounting??!!d._remotionInternalIsPremounting,[d._remotionInternalIsPremounting,b?.premounting]),U=v.useMemo(()=>({cumulatedFrom:S,relativeFrom:r,durationInFrames:F,parentFrom:b?.relativeFrom??0,id:y,height:i??b?.height??null,width:s??b?.width??null,premounting:X}),[S,r,F,b,y,i,s,X]),K=v.useMemo(()=>n??"",[n]);v.useEffect(()=>{if(St().isStudio)return N({from:r,duration:F,id:y,displayName:K,parent:b?.id??null,type:"sequence",rootId:x,showInTimeline:a,nonce:T,loopDisplay:c,stack:u??null,premountDisplay:h??null}),()=>{W(y)}},[e,y,n,N,K,W,b?.id,F,x,r,a,T,c,u,h]);const $=Math.ceil(S+r+e-1),G=k<S+r||k>$?null:t,re=d.layout==="none"?void 0:d.style,fe=v.useMemo(()=>({flexDirection:void 0,...s?{width:s}:{},...i?{height:i}:{},...re??{}}),[i,re,s]);if(g!==null&&p==="none")throw new TypeError('It is not supported to pass both a `ref` and `layout="none"` to <Sequence />.');return R[y]??!1?null:w.jsx(Wt.Provider,{value:U,children:G===null?null:d.layout==="none"?G:w.jsx(To,{ref:g,style:fe,className:d.className,children:G})})},uk=v.forwardRef(lk),hk=(r,e)=>{const t=Jn();if(r.layout==="none")throw new Error('`<Sequence>` with `premountFor` prop does not support layout="none"');const{style:n,from:i=0,premountFor:s=0,...a}=r,c=t<i&&t>=i-s,u=v.useMemo(()=>({...n,opacity:c?0:1,pointerEvents:c?"none":n?.pointerEvents??void 0}),[c,n]);return w.jsx(ck,{frame:i,active:c,children:w.jsx(un,{ref:e,from:i,style:u,_remotionInternalPremountDisplay:s,_remotionInternalIsPremounting:c,...a})})},dk=v.forwardRef(hk),fk=(r,e)=>r.layout!=="none"&&r.premountFor&&!St().isRendering?w.jsx(dk,{...r,ref:e}):w.jsx(uk,{...r,ref:e}),un=v.forwardRef(fk),gk=r=>{if(typeof r!="string")throw new TypeError(`The "filename" must be a string, but you passed a value of type ${typeof r}`);if(r.trim()==="")throw new Error("The `filename` must not be empty");if(!r.match(/^([0-9a-zA-Z-!_.*'()/:&$@=;+,?]+)/g))throw new Error('The `filename` must match "/^([0-9a-zA-Z-!_.*\'()/:&$@=;+,?]+)/g". Use forward slashes only, even on Windows.')},pk=r=>{if(typeof r!="string"&&!(r instanceof Uint8Array))throw new TypeError(`The "content" must be a string or Uint8Array, but you passed a value of type ${typeof r}`);if(typeof r=="string"&&r.trim()==="")throw new Error("The `content` must not be empty")},S0=r=>{r.type==="artifact"&&(gk(r.filename),pk(r.content))},ki=v.createContext({registerRenderAsset:()=>{},unregisterRenderAsset:()=>{},renderAssets:[]}),mk=({children:r})=>{const[e,t]=v.useState([]),n=v.useCallback(a=>{S0(a),t(c=>[...c,a])},[]),i=v.useCallback(a=>{t(c=>c.filter(u=>u.id!==a))},[]);v.useLayoutEffect(()=>{typeof window<"u"&&(window.remotion_collectAssets=()=>(t([]),e))},[e]);const s=v.useMemo(()=>({registerRenderAsset:n,unregisterRenderAsset:i,renderAssets:e}),[e,n,i]);return w.jsx(ki.Provider,{value:s,children:r})},xn=r=>typeof window>"u"?r:new URL(r,window.origin).href,C0=({endAt:r,mediaDuration:e,playbackRate:t,startFrom:n})=>{let i=e;typeof r<"u"&&(i=r),typeof n<"u"&&(i-=n);const s=i/t;return Math.floor(s)};function ko(r){let e;throw vk(r)?(e=r,e.stack||(e.stack=new Error(e.message).stack)):typeof r=="string"?e=Error(r):e=Error("Rendering was cancelled"),window.remotion_cancelledError=e.stack,e}var vk=r=>r instanceof Error?!0:!(r===null||typeof r!="object"||!("stack"in r)||typeof r.stack!="string"||!("message"in r)||typeof r.message!="string"),T0=v.createContext(null),yk=()=>v.useContext(T0),tc=({durationInFrames:r,times:e=1/0,children:t,name:n,...i})=>{const s=Jn(),{durationInFrames:a}=Zn();if(yh(r,{component:"of the <Loop /> component",allowFloats:!0}),typeof e!="number")throw new TypeError(`You passed to "times" an argument of type ${typeof e}, but it must be a number.`);if(e!==1/0&&e%1!==0)throw new TypeError(`The "times" prop of a loop must be an integer, but got ${e}.`);if(e<0)throw new TypeError(`The "times" prop of a loop must be at least 0, but got ${e}`);const c=Math.ceil(a/r),u=Math.min(c,e),h=i.layout==="none"?void 0:i.style,d=r*(u-1),p=Math.floor(s/r)*r,y=Math.min(p,d),b=v.useMemo(()=>({numberOfTimes:u,startOffset:-y,durationInFrames:r}),[u,r,y]),x=v.useMemo(()=>({iteration:Math.floor(s/r),durationInFrames:r}),[s,r]);return w.jsx(T0.Provider,{value:x,children:w.jsx(un,{durationInFrames:r,from:y,name:n??"<Loop>",_remotionInternalLoopDisplay:b,layout:i.layout,style:h,children:t})})};tc.useLoop=yk;var rc=v.createContext({}),E0={},Sh=[],k0=({children:r})=>{const[e,t]=v.useState(()=>E0);return v.useEffect(()=>{const n=()=>{t(E0)};return Sh.push(n),()=>{Sh=Sh.filter(i=>i!==n)}},[]),w.jsx(rc.Provider,{value:e,children:r})},Cs=r=>v.useContext(rc)[r]??r,Ch=(r,e)=>{if(typeof r.volume!="number"&&typeof r.volume!="function"&&typeof r.volume<"u")throw new TypeError(`You have passed a volume of type ${typeof r.volume} to your <${e} /> component. Volume must be a number or a function with the signature '(frame: number) => number' undefined.`);if(typeof r.volume=="number"&&r.volume<0)throw new TypeError(`You have passed a volume below 0 to your <${e} /> component. Volume must be between 0 and 1`);if(typeof r.playbackRate!="number"&&typeof r.playbackRate<"u")throw new TypeError(`You have passed a playbackRate of type ${typeof r.playbackRate} to your <${e} /> component. Playback rate must a real number or undefined.`);if(typeof r.playbackRate=="number"&&(isNaN(r.playbackRate)||!Number.isFinite(r.playbackRate)||r.playbackRate<=0))throw new TypeError(`You have passed a playbackRate of ${r.playbackRate} to your <${e} /> component. Playback rate must be a real number above 0.`)},Th=(r,e)=>{if(typeof r<"u"){if(typeof r!="number")throw new TypeError(`type of startFrom prop must be a number, instead got type ${typeof r}.`);if(isNaN(r)||r===1/0)throw new TypeError("startFrom prop can not be NaN or Infinity.");if(r<0)throw new TypeError(`startFrom must be greater than equal to 0 instead got ${r}.`)}if(typeof e<"u"){if(typeof e!="number")throw new TypeError(`type of endAt prop must be a number, instead got type ${typeof e}.`);if(isNaN(e))throw new TypeError("endAt prop can not be NaN.");if(e<=0)throw new TypeError(`endAt must be a positive number, instead got ${e}.`)}if(e<r)throw new TypeError("endAt prop must be greater than startFrom prop.")},bk=(r,e)=>{switch(e.type){case"got-duration":{const t=xn(e.src);return r[t]===e.durationInSeconds?r:{...r,[t]:e.durationInSeconds}}default:return r}},Eh=v.createContext({durations:{},setDurations:()=>{throw new Error("context missing")}}),I0=({children:r})=>{const[e,t]=v.useReducer(bk,{}),n=v.useMemo(()=>({durations:e,setDurations:t}),[e]);return w.jsx(Eh.Provider,{value:n,children:r})};function A0(r){let e=r+1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function wk(r){let e=0,t=0,n=0;for(e=0;e<r.length;e++)t=r.charCodeAt(e),n=(n<<5)-n+t,n|=0;return n}var Ii=(r,e)=>{if(r===null)return Math.random();if(typeof r=="string")return A0(wk(r));if(typeof r=="number")return A0(r*1e10);throw new Error("random() argument must be a number or a string")},Ts=()=>{const r=v.useContext(Wt);return Math.min(0,r?.relativeFrom??0)},Io=r=>{const e=tc.useLoop(),t=Jn(),n=Ts();return r==="repeat"||e===null?t+n:t+n+e.durationInFrames*e.iteration},_k=r=>{if(/data:|blob:/.test(r.substring(0,5)))return"Data URL";const e=r.split("/").map(t=>t.split("\\")).flat(1);return e[e.length-1]},nc=(r,e,t)=>{const{current:n}=r;if(!n)return;const i=n.play();i.catch&&i.catch(s=>{if(n&&!s.message.includes("request was interrupted by a call to pause")&&!s.message.includes("The operation was aborted.")&&!s.message.includes("The fetching process for the media resource was aborted by the user agent")&&!s.message.includes("request was interrupted by a new load request")&&!s.message.includes("because the media was removed from the document")&&!(s.message.includes("user didn't interact with the document")&&n.muted)&&(console.log(`Could not play ${e} due to following error: `,s),!n.muted)){if(t){t();return}console.log("The video will be muted and we'll retry playing it."),e==="video"&&St().isPlayer&&console.log("Use onAutoPlayError() to handle this error yourself."),n.muted=!0,n.play()}})},Es=({frame:r,volume:e,mediaVolume:t=1,allowAmplificationDuringRender:n})=>{const i=n?1/0:1;if(typeof e=="number")return Math.min(i,e*t);if(typeof e>"u")return Number(t);const s=e(r)*t;if(typeof s!="number")throw new TypeError(`You passed in a a function to the volume prop but it did not return a number but a value of type ${typeof s} for frame ${r}`);if(Number.isNaN(s))throw new TypeError(`You passed in a function to the volume prop but it returned NaN for frame ${r}.`);if(!Number.isFinite(s))throw new TypeError(`You passed in a function to the volume prop but it returned a non-finite number for frame ${r}.`);return Math.max(0,Math.min(i,s))},M0={},xk=r=>{M0[r]||(console.warn(r),M0[r]=!0)},O0=({volume:r,mediaVolume:e,mediaRef:t,src:n,mediaType:i,playbackRate:s,displayName:a,id:c,stack:u,showInTimeline:h,premountDisplay:d,onAutoPlayError:g})=>{const p=Zn(),{rootId:y,audioAndVideoTags:b}=v.useContext(Yr),x=v.useContext(Wt),S=x?x.relativeFrom+x.cumulatedFrom:0,[T]=_h(),k=Ts(),{registerSequence:I,unregisterSequence:M}=v.useContext(_s),[F]=v.useState(()=>r),N=gh(),W=x?Math.min(x.durationInFrames,p.durationInFrames):p.durationInFrames,R=typeof r=="function",X=v.useMemo(()=>typeof r=="number"?r:new Array(Math.floor(Math.max(0,W+k))).fill(!0).map((U,K)=>Es({frame:K+k,volume:r,mediaVolume:e,allowAmplificationDuringRender:!1})).join(","),[W,k,r,e]);v.useEffect(()=>{typeof r=="number"&&r!==F&&xk(`Remotion: The ${i} with src ${n} has changed it's volume. Prefer the callback syntax for setting volume to get better timeline display: https://www.remotion.dev/docs/using-audio/#controlling-volume`)},[F,i,n,r]),v.useEffect(()=>{if(t.current){if(!n)throw new Error("No src passed");if(!(!St().isStudio&&window.process?.env?.NODE_ENV!=="test")&&h)return I({type:i,src:n,id:c,duration:W,from:0,parent:x?.id??null,displayName:a??_k(n),rootId:y,volume:X,showInTimeline:!0,nonce:N,startMediaFrom:0-k,doesVolumeChange:R,loopDisplay:void 0,playbackRate:s,stack:u,premountDisplay:d}),()=>{M(c)}}},[S,W,c,x,n,I,y,M,p,X,R,N,t,i,k,s,a,u,h,d]),v.useEffect(()=>{const U={id:c,play:()=>{if(T)return nc(t,i,g)}};return b.current.push(U),()=>{b.current=b.current.filter(K=>K.id!==c)}},[b,c,t,i,g,T])},Sk=()=>{const[r,e]=v.useState([]),[t,n]=v.useState([]),[i,s]=v.useState([]),a=v.useRef(!1),c=v.useCallback(d=>(e(g=>[...g,d]),{unblock:()=>{e(g=>{const p=g.filter(y=>y!==d);return p.length===g.length?g:p})}}),[]),u=v.useCallback(d=>(n(g=>[...g,d]),{remove:()=>{n(g=>g.filter(p=>p!==d))}}),[]),h=v.useCallback(d=>(s(g=>[...g,d]),{remove:()=>{s(g=>g.filter(p=>p!==d))}}),[]);return v.useEffect(()=>{r.length>0&&t.forEach(d=>d())},[r]),v.useEffect(()=>{r.length===0&&i.forEach(d=>d())},[r]),v.useMemo(()=>({addBlock:c,listenForBuffering:u,listenForResume:h,buffering:a}),[c,a,u,h])},ks=v.createContext(null),P0=({children:r})=>{const e=Sk();return w.jsx(ks.Provider,{value:e,children:r})},Ck=r=>{const[e,t]=v.useState(r.buffering.current);return v.useEffect(()=>{const n=()=>{t(!0)},i=()=>{t(!1)};return r.listenForBuffering(n),r.listenForResume(i),()=>{r.listenForBuffering(()=>{}),r.listenForResume(()=>{})}},[r]),e},kh=()=>{const r=v.useContext(ks),e=r?r.addBlock:null;return v.useMemo(()=>({delayPlayback:()=>{if(!e)throw new Error("Tried to enable the buffering state, but a Remotion context was not found. This API can only be called in a component that was passed to the Remotion Player or a <Composition>. Or you might have experienced a version mismatch - run `npx remotion versions` and ensure all packages have the same version. This error is thrown by the buffer state https://remotion.dev/docs/player/buffer-state");const{unblock:t}=e({id:String(Math.random())});return{unblock:t}}}),[e])},Tk=({mediaRef:r,mediaType:e,onVariableFpsVideoDetected:t,pauseWhenBuffering:n})=>{const i=v.useRef(!1),{delayPlayback:s}=kh(),a=v.useCallback(c=>{if(e!=="video"||!n)return;const u=r.current;if(!u||!u.requestVideoFrameCallback)return;i.current=!0;const h=s(),d=()=>{h.unblock(),u.removeEventListener("ended",d,{once:!0}),u.removeEventListener("pause",d,{once:!0}),i.current=!1},g=()=>{d()};u.requestVideoFrameCallback((p,y)=>{Math.abs(y.mediaTime-c)>.5&&t(),d()}),u.addEventListener("ended",g,{once:!0}),u.addEventListener("pause",g,{once:!0}),u.addEventListener("canplay",g,{once:!0})},[s,r,e,t,n]);return v.useMemo(()=>({isBuffering:()=>i.current,bufferUntilFirstFrame:a}),[a])},Ek=({element:r,shouldBuffer:e,isPremounting:t})=>{const n=kh(),[i,s]=v.useState(!1);return v.useEffect(()=>{let a=[];const{current:c}=r;if(!c||!e||t)return;const u=()=>{a.forEach(g=>g()),a=[],s(!1)},h=()=>{s(!0);const{unblock:g}=n.delayPlayback(),p=()=>{u(),d()},y=()=>{u(),d()};c.addEventListener("canplay",p,{once:!0}),a.push(()=>{c.removeEventListener("canplay",p)}),c.addEventListener("error",y,{once:!0}),a.push(()=>{c.removeEventListener("error",y)}),a.push(()=>{g()})},d=()=>{c.readyState<c.HAVE_FUTURE_DATA?(h(),navigator.userAgent.includes("Firefox/")||c.load()):(c.addEventListener("waiting",h),a.push(()=>{c.removeEventListener("waiting",h)}))};return d(),()=>{u()}},[n,r,t,e]),i},kk=({mediaRef:r,mediaType:e,lastSeek:t,onVariableFpsVideoDetected:n})=>{const i=v.useRef(null);return v.useEffect(()=>{const{current:s}=r;if(s)i.current=s.currentTime;else{i.current=null;return}if(e!=="video"){i.current=null;return}const a=s;if(!a.requestVideoFrameCallback)return;let c=()=>{};const u=()=>{if(!a)return;const h=a.requestVideoFrameCallback((d,g)=>{if(i.current!==null){const p=Math.abs(i.current-g.mediaTime),y=Math.abs(t.current===null?1/0:g.mediaTime-t.current);p>.5&&y>.5&&g.mediaTime>i.current&&n()}i.current=g.mediaTime,u()});c=()=>{a.cancelVideoFrameCallback(h),c=()=>{}}};return u(),()=>{c()}},[t,r,e,n]),i};function Ik(r,e,t,n){const{extrapolateLeft:i,extrapolateRight:s,easing:a}=n;let c=r;const[u,h]=e,[d,g]=t;if(c<u){if(i==="identity")return c;if(i==="clamp")c=u;else if(i==="wrap"){const p=h-u;c=((c-u)%p+p)%p+u}}if(c>h){if(s==="identity")return c;if(s==="clamp")c=h;else if(s==="wrap"){const p=h-u;c=((c-u)%p+p)%p+u}}return d===g?d:(c=(c-u)/(h-u),c=a(c),c=c*(g-d)+d,c)}function Ak(r,e){let t;for(t=1;t<e.length-1&&!(e[t]>=r);++t);return t-1}function Mk(r){for(let e=1;e<r.length;++e)if(!(r[e]>r[e-1]))throw new Error(`inputRange must be strictly monotonically increasing but got [${r.join(",")}]`)}function D0(r,e){if(e.length<2)throw new Error(r+" must have at least 2 elements");for(const t of e){if(typeof t!="number")throw new Error(`${r} must contain only numbers`);if(!Number.isFinite(t))throw new Error(`${r} must contain only finite numbers, but got [${e.join(",")}]`)}}function j0(r,e,t,n){if(typeof r>"u")throw new Error("input can not be undefined");if(typeof e>"u")throw new Error("inputRange can not be undefined");if(typeof t>"u")throw new Error("outputRange can not be undefined");if(e.length!==t.length)throw new Error("inputRange ("+e.length+") and outputRange ("+t.length+") must have the same length");D0("inputRange",e),D0("outputRange",t),Mk(e);const i=n?.easing??(u=>u);let s="extend";n?.extrapolateLeft!==void 0&&(s=n.extrapolateLeft);let a="extend";if(n?.extrapolateRight!==void 0&&(a=n.extrapolateRight),typeof r!="number")throw new TypeError("Cannot interpolate an input which is not a number");const c=Ak(r,e);return Ik(r,[e[c],e[c+1]],[t[c],t[c+1]],{easing:i,extrapolateLeft:s,extrapolateRight:a})}var F0=({frame:r,playbackRate:e,startFrom:t})=>j0(r,[-1,t,t+1],[-1,t,t+e]),L0=({fps:r,frame:e,playbackRate:t,startFrom:n})=>{const i=F0({frame:e,playbackRate:t,startFrom:n}),s=1e3/r;return i*s/1e3},N0=(r,e)=>Math.round(r/e*100)/100,ic=()=>{if(typeof window>"u")return!1;const r=/iP(ad|od|hone)/i.test(window.navigator.userAgent),e=/AppleWebKit/.test(window.navigator.userAgent);return r&&e},Ok=r=>ic()&&r.startsWith("blob:"),Ih=({actualFrom:r,fps:e})=>N0(Math.max(0,-r),e),Ah=({duration:r,fps:e})=>N0(r,e),Pk=({actualSrc:r,actualFrom:e,duration:t,fps:n})=>{if(Ok(r)||r.startsWith("data:")||!!new URL(r,(typeof window>"u"?null:window.location.href)??"http://localhost:3000").hash||!Number.isFinite(e))return r;const s=`${r}#t=${Ih({actualFrom:e,fps:n})}`;return Number.isFinite(t)?`${s},${Ah({duration:t,fps:n})}`:s},Dk=({prevStartFrom:r,newStartFrom:e,prevDuration:t,newDuration:n,fps:i})=>{const s=Ih({actualFrom:r,fps:i}),a=Ih({actualFrom:e,fps:i}),c=Ah({duration:t,fps:i}),u=Ah({duration:n,fps:i});return!(a<s||u>c)},jk=({actualSrc:r,actualFrom:e,duration:t,fps:n})=>{const i=v.useRef(e),s=v.useRef(t),a=v.useRef(r);return(!Dk({prevStartFrom:i.current,newStartFrom:e,prevDuration:s.current,newDuration:t,fps:n})||r!==a.current)&&(i.current=e,s.current=t,a.current=r),Pk({actualSrc:a.current,actualFrom:i.current,duration:s.current,fps:n})},R0={},Fk=(r,e)=>{if(r===null||r.seekable.length===0||r.seekable.length>1||R0[r.src])return;const t={start:r.seekable.start(0),end:r.seekable.end(0)};if(t.start===0&&t.end===0){const n=[`The media ${r.src} cannot be seeked. This could be one of few reasons:`,"1) The media resource was replaced while the video is playing but it was not loaded yet.","2) The media does not support seeking.","3) The media was loaded with security headers prventing it from being included.","Please see https://remotion.dev/docs/non-seekable-media for assistance."].join(`
`);if(e==="console-error")console.error(n);else if(e==="console-warning")console.warn(`The media ${r.src} does not support seeking. The video will render fine, but may not play correctly in the Remotion Studio and in the <Player>. See https://remotion.dev/docs/non-seekable-media for an explanation.`);else throw new Error(n);R0[r.src]=!0}},Mh=.45,Oh=(r,e)=>{if(!r.current)return;const t=ic()?Number(e.toFixed(1)):e;r.current.currentTime=t},V0=({mediaRef:r,src:e,mediaType:t,playbackRate:n,onlyWarnForMediaSeekingError:i,acceptableTimeshift:s,pauseWhenBuffering:a,isPremounting:c,debugSeeking:u,onAutoPlayError:h})=>{const{playbackRate:d}=v.useContext(Yr),g=Jn(),p=Ti(),[y]=_h(),b=v.useContext(ks),{fps:x}=Zn(),S=Ts(),T=v.useRef(null),k=v.useRef(null);if(!b)throw new Error("useMediaPlayback must be used inside a <BufferingContext>");const I=v.useRef({}),M=v.useCallback(()=>{e&&(u&&console.log(`Detected ${e} as a variable FPS video. Disabling buffering while seeking.`),I.current[e]=!0)},[u,e]),F=kk({mediaRef:r,mediaType:t,lastSeek:k,onVariableFpsVideoDetected:M}),N=L0({frame:g,playbackRate:n,startFrom:-S,fps:x}),W=Ek({element:r,shouldBuffer:a,isPremounting:c}),{bufferUntilFirstFrame:R,isBuffering:X}=Tk({mediaRef:r,mediaType:t,onVariableFpsVideoDetected:M,pauseWhenBuffering:a}),U=n*d,K=r.current?.duration?Math.min(r.current.duration,s??Mh):s,$=Ck(b);v.useEffect(()=>{if(!y){r.current?.pause();return}const G=W||X();$&&!G&&r.current?.pause()},[X,W,$,r,y]),v.useEffect(()=>{const G=t==="audio"?"<Audio>":"<Video>";if(!r.current)throw new Error(`No ${t} ref found`);if(!e)throw new Error(`No 'src' attribute was passed to the ${G} element.`);const re=Math.max(0,U);r.current.playbackRate!==re&&(r.current.playbackRate=re);const{duration:fe}=r.current,Q=!Number.isNaN(fe)&&Number.isFinite(fe)?Math.min(fe,N):N,ue=r.current.currentTime,oe=F.current??null,se=I.current[e],de=Math.abs(Q-ue),ne=oe?Math.abs(Q-oe):null,Fe=ne&&!se?ne:de;if(u&&console.log({mediaTagTime:ue,rvcTime:oe,shouldBeTime:Q,state:r.current.readyState,playing:!r.current.paused,isVariableFpsVideo:se}),Fe>K&&T.current!==Q){u&&console.log("Seeking",{shouldBeTime:Q,isTime:ue,rvcTime:oe,timeShift:Fe,isVariableFpsVideo:se}),Oh(r,Q),k.current=Q,T.current=Q,y&&!se&&(U>0&&R(Q),r.current.paused&&nc(r,t,h)),i||Fk(r.current,i?"console-warning":"console-error");return}const Ge=y?.15:1e-5,Re=Math.abs(r.current.currentTime-Q)>Ge,xe=W||X(),ke=b.buffering.current&&!xe;if(!y||ke){Re&&(Oh(r,Q),k.current=Q);return}(r.current.paused&&!r.current.ended||p===0)&&(Re&&(Oh(r,Q),k.current=Q),nc(r,t,h),se||U>0&&R(Q))},[p,K,R,b.buffering,F,u,N,X,W,r,t,i,U,y,e,h])},B0=r=>{const[e,t]=v.useState(1);return v.useEffect(()=>{const n=r.current;if(!n)return;const i=()=>{t(n.volume)};return n.addEventListener("volumechange",i),()=>n.removeEventListener("volumechange",i)},[r]),v.useEffect(()=>{const n=r.current;n&&n.volume!==e&&t(n.volume)},[e,r]),e},Lk=1e-5,Ph=(r,e)=>Math.abs(r-e)<Lk,z0=({volumePropFrame:r,actualVolume:e,volume:t,mediaVolume:n,mediaRef:i})=>{v.useEffect(()=>{const s=Es({frame:r,volume:t,mediaVolume:n,allowAmplificationDuringRender:!1});!Ph(s,e)&&i.current&&(i.current.volume=s)},[e,r,i,t,n])},Dh=v.createContext({mediaMuted:!1,mediaVolume:1}),jh=v.createContext({setMediaMuted:()=>{throw new Error("default")},setMediaVolume:()=>{throw new Error("default")}}),Fh=()=>{const{mediaVolume:r}=v.useContext(Dh),{setMediaVolume:e}=v.useContext(jh);return v.useMemo(()=>[r,e],[r,e])},Lh=()=>{const{mediaMuted:r}=v.useContext(Dh),{setMediaMuted:e}=v.useContext(jh);return v.useMemo(()=>[r,e],[r,e])},W0="data:audio/mp3;base64,/+MYxAAJcAV8AAgAABn//////+/gQ5BAMA+D4Pg+BAQBAEAwD4Pg+D4EBAEAQDAPg++hYBH///hUFQVBUFREDQNHmf///////+MYxBUGkAGIMAAAAP/29Xt6lUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxDUAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",Nk=(r,e)=>{const t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==n[i]||r[t[i]]!==e[n[i]])return!1;return!0},Rk=(r,e,t)=>r==="src"&&!t.startsWith("data:")&&!e.startsWith("data:")?new URL(t,window.origin).toString()!==new URL(e,window.origin).toString():t!==e,sc=v.createContext(null),H0=({children:r,numberOfAudioTags:e,component:t})=>{const n=v.useRef([]),[i]=v.useState(e);if(e!==i)throw new Error("The number of shared audio tags has changed dynamically. Once you have set this property, you cannot change it afterwards.");const s=v.useMemo(()=>new Array(e).fill(!0).map(()=>({id:Math.random(),ref:v.createRef()})),[e]),a=v.useRef(new Array(e).fill(!1)),c=v.useCallback(()=>{s.forEach(({ref:b,id:x})=>{const S=n.current?.find(k=>k.id===x),{current:T}=b;if(T){if(S===void 0){T.src=W0;return}if(!S)throw new TypeError("Expected audio data to be there");Object.keys(S.props).forEach(k=>{Rk(k,S.props[k],T[k])&&(T[k]=S.props[k])})}})},[s]),u=v.useCallback((b,x)=>{const S=n.current?.find(N=>N.audioId===x);if(S)return S;const T=a.current.findIndex(N=>N===!1);if(T===-1)throw new Error(`Tried to simultaneously mount ${e+1} <Audio /> tags at the same time. With the current settings, the maximum amount of <Audio /> tags is limited to ${e} at the same time. Remotion pre-mounts silent audio tags to help avoid browser autoplay restrictions. See https://remotion.dev/docs/player/autoplay#use-the-numberofsharedaudiotags-property for more information on how to increase this limit.`);const{id:k,ref:I}=s[T],M=[...a.current];M[T]=k,a.current=M;const F={props:b,id:k,el:I,audioId:x};return n.current?.push(F),c(),F},[e,s,c]),h=v.useCallback(b=>{const x=[...a.current],S=s.findIndex(T=>T.id===b);if(S===-1)throw new TypeError("Error occured in ");x[S]=!1,a.current=x,n.current=n.current?.filter(T=>T.id!==b),c()},[s,c]),d=v.useCallback(({aud:b,audioId:x,id:S})=>{let T=!1;n.current=n.current?.map(k=>k.id===S?Nk(b,k.props)?k:(T=!0,{...k,props:b,audioId:x}):k),T&&c()},[c]),g=v.useCallback(()=>{s.forEach(b=>{nc(b.ref,"audio",null)})},[s]),p=v.useMemo(()=>({registerAudio:u,unregisterAudio:h,updateAudio:d,playAllAudios:g,numberOfAudioTags:e}),[e,g,u,h,d]),y=v.useCallback(()=>{a.current=new Array(e).fill(!1),n.current=[],c()},[e,c]);return v.useEffect(()=>()=>{y()},[t,y]),w.jsxs(sc.Provider,{value:p,children:[s.map(({id:b,ref:x})=>w.jsx("audio",{ref:x,preload:"metadata",src:W0},b)),r]})},Vk=(r,e)=>{const t=v.useContext(sc),[n]=v.useState(()=>t&&t.numberOfAudioTags>0?t.registerAudio(r,e):{el:v.createRef(),id:Math.random(),props:r,audioId:e}),i=v.useInsertionEffect??v.useLayoutEffect;return typeof document<"u"&&(i(()=>{t&&t.numberOfAudioTags>0&&t.updateAudio({id:n.id,aud:r,audioId:e})},[r,t,n.id,e]),i(()=>()=>{t&&t.numberOfAudioTags>0&&t.unregisterAudio(n.id)},[t,n.id])),n},Bk=(r,e)=>{const[t]=v.useState(r.shouldPreMountAudioTags);if(r.shouldPreMountAudioTags!==t)throw new Error("Cannot change the behavior for pre-mounting audio tags dynamically.");const{volume:n,muted:i,playbackRate:s,shouldPreMountAudioTags:a,src:c,onDuration:u,acceptableTimeShiftInSeconds:h,_remotionInternalNeedsDurationCalculation:d,_remotionInternalNativeLoopPassed:g,_remotionInternalStack:p,_remotionDebugSeeking:y,allowAmplificationDuringRender:b,name:x,pauseWhenBuffering:S,showInTimeline:T,loopVolumeCurveBehavior:k,stack:I,...M}=r,[F]=Fh(),[N]=Lh(),W=Io(k??"repeat"),{hidden:R}=v.useContext(Eo);if(!c)throw new TypeError("No 'src' was passed to <Audio>.");const X=Cs(c),U=v.useContext(Wt),[K]=v.useState(()=>String(Math.random())),$=R[K]??!1,G=Es({frame:W,volume:n,mediaVolume:F,allowAmplificationDuringRender:!1}),re=v.useMemo(()=>({muted:i||N||$||G<=0,src:X,loop:g,...M}),[g,$,N,i,M,X,G]),fe=v.useMemo(()=>`audio-${Ii(c??"")}-${U?.relativeFrom}-${U?.cumulatedFrom}-${U?.durationInFrames}-muted:${r.muted}-loop:${r.loop}`,[c,U?.relativeFrom,U?.cumulatedFrom,U?.durationInFrames,r.muted,r.loop]),Q=Vk(re,fe).el,ue=B0(Q);z0({volumePropFrame:W,actualVolume:ue,volume:n,mediaVolume:F,mediaRef:Q}),O0({volume:n,mediaVolume:F,mediaRef:Q,src:c,mediaType:"audio",playbackRate:s??1,displayName:x??null,id:K,stack:p,showInTimeline:T,premountDisplay:null,onAutoPlayError:null}),V0({mediaRef:Q,src:c,mediaType:"audio",playbackRate:s??1,onlyWarnForMediaSeekingError:!1,acceptableTimeshift:h??Mh,isPremounting:!!U?.premounting,pauseWhenBuffering:S,debugSeeking:y,onAutoPlayError:null}),v.useImperativeHandle(e,()=>Q.current,[Q]);const oe=v.useRef();return oe.current=u,v.useEffect(()=>{const{current:se}=Q;if(!se)return;if(se.duration){oe.current?.(se.src,se.duration);return}const de=()=>{oe.current?.(se.src,se.duration)};return se.addEventListener("loadedmetadata",de),()=>{se.removeEventListener("loadedmetadata",de)}},[Q,c]),t?null:w.jsx("audio",{ref:Q,preload:"metadata",...re})},zk=v.forwardRef(Bk);typeof window<"u"&&(window.remotion_renderReady=!1);var oc=[];typeof window<"u"&&(window.remotion_delayRenderTimeouts={});var Wk="The delayRender was called:",Hk="Retries left: ",Uk="- Rendering the frame will be retried.",U0=3e4,Qn=(r,e)=>{if(typeof r!="string"&&typeof r<"u")throw new Error("The label parameter of delayRender() must be a string or undefined, got: "+JSON.stringify(r));const t=Math.random();oc.push(t);const n=Error().stack?.replace(/^Error/g,"")??"";if(St().isRendering){const i=(e?.timeoutInMilliseconds??(typeof window>"u"?U0:window.remotion_puppeteerTimeout??U0))-2e3;if(typeof window<"u"){const s=(e?.retries??0)-(window.remotion_attempt-1);window.remotion_delayRenderTimeouts[t]={label:r??null,timeout:setTimeout(()=>{const a=["A delayRender()",r?`"${r}"`:null,`was called but not cleared after ${i}ms. See https://remotion.dev/docs/timeout for help.`,s>0?Hk+s:null,s>0?Uk:null,Wk,n].filter(Ga).join(" ");ko(Error(a))},i)}}}return typeof window<"u"&&(window.remotion_renderReady=!1),t},ft=r=>{if(typeof r>"u")throw new TypeError("The continueRender() method must be called with a parameter that is the return value of delayRender(). No value was passed.");if(typeof r!="number")throw new TypeError("The parameter passed into continueRender() must be the return value of delayRender() which is a number. Got: "+JSON.stringify(r));oc=oc.filter(e=>e===r?(St().isRendering&&(clearTimeout(window.remotion_delayRenderTimeouts[r].timeout),delete window.remotion_delayRenderTimeouts[r]),!1):!0),oc.length===0&&typeof window<"u"&&(window.remotion_renderReady=!0)},$k=(r,e)=>{const t=v.useRef(null),{volume:n,playbackRate:i,allowAmplificationDuringRender:s,onDuration:a,toneFrequency:c,_remotionInternalNeedsDurationCalculation:u,_remotionInternalNativeLoopPassed:h,acceptableTimeShiftInSeconds:d,name:g,onError:p,delayRenderRetries:y,delayRenderTimeoutInMilliseconds:b,loopVolumeCurveBehavior:x,pauseWhenBuffering:S,...T}=r,k=Ti(),I=Io(x??"repeat"),M=Jn(),F=v.useContext(Wt),{registerRenderAsset:N,unregisterRenderAsset:W}=v.useContext(ki),R=v.useMemo(()=>`audio-${Ii(r.src??"")}-${F?.relativeFrom}-${F?.cumulatedFrom}-${F?.durationInFrames}`,[r.src,F?.relativeFrom,F?.cumulatedFrom,F?.durationInFrames]),X=Es({volume:n,frame:I,mediaVolume:1,allowAmplificationDuringRender:s??!1});v.useImperativeHandle(e,()=>t.current,[]),v.useEffect(()=>{if(!r.src)throw new Error("No src passed");if(window.remotion_audioEnabled&&!r.muted&&!(X<=0))return N({type:"audio",src:xn(r.src),id:R,frame:k,volume:X,mediaFrame:M,playbackRate:r.playbackRate??1,allowAmplificationDuringRender:s??!1,toneFrequency:c??null,audioStartFrame:Math.max(0,-(F?.relativeFrom??0))}),()=>W(R)},[r.muted,r.src,N,k,R,W,X,I,M,i,r.playbackRate,s,c,F?.relativeFrom]);const{src:U}=r,K=e||u;return v.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test"||!K)return;const $=Qn("Loading <Audio> duration with src="+U,{retries:y??void 0,timeoutInMilliseconds:b??void 0}),{current:G}=t,re=()=>{G?.duration&&a(G.src,G.duration),ft($)};return G?.duration?(a(G.src,G.duration),ft($)):G?.addEventListener("loadedmetadata",re,{once:!0}),()=>{G?.removeEventListener("loadedmetadata",re),ft($)}},[U,a,K,y,b]),K?w.jsx("audio",{ref:t,...T}):null},Yk=v.forwardRef($k),Xk=(r,e)=>{const t=v.useContext(sc),{startFrom:n,endAt:i,name:s,stack:a,pauseWhenBuffering:c,showInTimeline:u,_remotionDebugSeeking:h,...d}=r,{loop:g,...p}=r,{fps:y}=Zn(),b=St(),{durations:x,setDurations:S}=v.useContext(Eh);if(typeof r.src!="string")throw new TypeError(`The \`<Audio>\` tag requires a string for \`src\`, but got ${JSON.stringify(r.src)} instead.`);const T=Cs(r.src),k=v.useCallback(F=>{console.log(F.currentTarget.error);const N=`Could not play audio with src ${T}: ${F.currentTarget.error}. See https://remotion.dev/docs/media-playback-error for help.`;g?ko(new Error(N)):console.warn(N)},[g,T]),I=v.useCallback((F,N)=>{S({type:"got-duration",durationInSeconds:N,src:F})},[S]),M=x[xn(T)]??x[xn(r.src)];if(g&&M!==void 0){if(!Number.isFinite(M))return w.jsx(Ao,{...p,ref:e,_remotionInternalNativeLoopPassed:!0});const F=M*y;return w.jsx(tc,{layout:"none",durationInFrames:C0({endAt:i,mediaDuration:F,playbackRate:r.playbackRate??1,startFrom:n}),children:w.jsx(Ao,{...p,ref:e,_remotionInternalNativeLoopPassed:!0})})}if(typeof n<"u"||typeof i<"u"){Th(n,i);const F=n??0,N=i??1/0;return w.jsx(un,{layout:"none",from:0-F,showInTimeline:!1,durationInFrames:N,name:s,children:w.jsx(Ao,{_remotionInternalNeedsDurationCalculation:!!g,pauseWhenBuffering:c??!1,...d,ref:e})})}return Ch(r,"Audio"),b.isRendering?w.jsx(Yk,{onDuration:I,...r,ref:e,onError:k,_remotionInternalNeedsDurationCalculation:!!g}):w.jsx(zk,{_remotionInternalNativeLoopPassed:r._remotionInternalNativeLoopPassed??!1,_remotionDebugSeeking:h??!1,_remotionInternalStack:a??null,shouldPreMountAudioTags:t!==null&&t.numberOfAudioTags>0,...r,ref:e,onError:k,onDuration:I,pauseWhenBuffering:c??!1,_remotionInternalNeedsDurationCalculation:!!g,showInTimeline:u??!0})},Ao=v.forwardRef(Xk);Co(Ao);var Gk=v.createContext({folderName:null,parentName:null}),qk={transform:"rotate(90deg)"},$0=40,Kk={color:"white",fontSize:14,fontFamily:"sans-serif"},Zk={justifyContent:"center",alignItems:"center"},Jk=()=>w.jsxs(To,{style:Zk,id:"remotion-comp-loading",children:[w.jsx("style",{type:"text/css",children:`
				@keyframes anim {
					from {
						opacity: 0
					}
					to {
						opacity: 1
					}
				}
				#remotion-comp-loading {
					animation: anim 2s;
					animation-fill-mode: forwards;
				}
			`}),w.jsx("svg",{width:$0,height:$0,viewBox:"-100 -100 400 400",style:qk,children:w.jsx("path",{fill:"#555",stroke:"#555",strokeWidth:"100",strokeLinejoin:"round",d:"M 2 172 a 196 100 0 0 0 195 5 A 196 240 0 0 0 100 2.259 A 196 240 0 0 0 2 172 z"})}),w.jsxs("p",{style:Kk,children:["Resolving ","<Suspense>","..."]})]}),gr=null,Nh=()=>{if(!gr){if(typeof document>"u")throw new Error("Tried to call an API that only works in the browser from outside the browser");gr=document.createElement("div"),gr.style.position="absolute",gr.style.top="0px",gr.style.left="0px",gr.style.right="0px",gr.style.bottom="0px",gr.style.width="100%",gr.style.height="100%",gr.style.display="flex",gr.style.flexDirection="column";const r=document.createElement("div");r.style.position="fixed",r.style.top="-999999px",r.appendChild(gr),document.body.appendChild(r)}return gr},Y0=r=>v.useMemo(()=>{if("lazyComponent"in r&&typeof r.lazyComponent<"u")return v.lazy(r.lazyComponent);if("component"in r)return typeof document>"u"?r.component:v.lazy(()=>Promise.resolve({default:r.component}));throw new Error("You must pass either 'component' or 'lazyComponent'")},[r.component,r.lazyComponent]),X0=()=>/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g,G0=r=>r.match(X0()),Qk=r=>{if(!G0(r))throw new Error(`Composition id can only contain a-z, A-Z, 0-9, CJK characters and -. You passed ${r}`)},e5=`Composition ID must match ${String(X0())}`,t5=(r,e,t)=>{if(r){if(typeof r!="object")throw new Error(`"${e}" must be an object, but you passed a value of type ${typeof r}`);if(Array.isArray(r))throw new Error(`"${e}" must be an object, an array was passed ${t?`for composition "${t}"`:""}`)}},r5=()=>(v.useEffect(()=>{const r=Qn("Waiting for Root component to unsuspend");return()=>ft(r)},[]),null),q0=({width:r,height:e,fps:t,durationInFrames:n,id:i,defaultProps:s,schema:a,...c})=>{const{registerComposition:u,unregisterComposition:h}=v.useContext(Kn),d=Qa(),g=Y0(c),p=gh(),y=fh(),b=St();if(v.useContext(Ei))throw y?new Error("<Composition> was mounted inside the `component` that was passed to the <Player>. See https://remotion.dev/docs/wrong-composition-mount for help."):new Error("<Composition> mounted inside another composition. See https://remotion.dev/docs/wrong-composition-mount for help.");const{folderName:S,parentName:T}=v.useContext(Gk);v.useEffect(()=>{if(!i)throw new Error("No id for composition passed.");return Qk(i),t5(s,"defaultProps",i),u({durationInFrames:n??void 0,fps:t??void 0,height:e??void 0,width:r??void 0,id:i,folderName:S,component:g,defaultProps:Ci(s??{}),nonce:p,parentFolderName:T,schema:a??null,calculateMetadata:c.calculateMetadata??null}),()=>{h(i)}},[n,t,e,g,i,S,s,u,h,r,p,T,a,c.calculateMetadata]);const k=bh(i);if(b.isStudio&&d&&d.component===g){const I=g;return k===null||k.type!=="success"?null:yu.createPortal(w.jsx(xh,{children:w.jsx(v.Suspense,{fallback:w.jsx(Jk,{}),children:w.jsx(I,{...k.result.props??{}})})}),Nh())}if(b.isRendering&&d&&d.component===g){const I=g;return k===null||k.type!=="success"?null:yu.createPortal(w.jsx(xh,{children:w.jsx(v.Suspense,{fallback:w.jsx(r5,{}),children:w.jsx(I,{...k.result.props??{}})})}),Nh())}return null},K0=v.createRef(),n5=({children:r,numberOfAudioTags:e})=>{const[t,n]=v.useState([]),i=v.useRef(t),[s,a]=v.useState([]),[c,u]=v.useState(null),[h,d]=v.useState(null),g=v.useCallback(I=>{n(M=>{const F=I(M);return i.current=F,F})},[]),p=v.useCallback(I=>{g(M=>{if(M.find(N=>N.id===I.id))throw new Error(`Multiple composition with id ${I.id} are registered.`);return[...M,I].slice().sort((N,W)=>N.nonce-W.nonce)})},[g]),y=v.useCallback(I=>{n(M=>M.filter(F=>F.id!==I))},[]),b=v.useCallback((I,M)=>{a(F=>[...F,{name:I,parent:M}])},[]),x=v.useCallback((I,M)=>{a(F=>F.filter(N=>!(N.name===I&&N.parent===M)))},[]);v.useImperativeHandle(K0,()=>({getCompositions:()=>i.current}),[]);const S=t.find(I=>c?.type==="composition"?I.id===c.compositionId:null),T=v.useCallback((I,M)=>{n(F=>F.map(W=>W.id===I?{...W,defaultProps:M}:W))},[]),k=v.useMemo(()=>({compositions:t,registerComposition:p,unregisterComposition:y,folders:s,registerFolder:b,unregisterFolder:x,currentCompositionMetadata:h,setCurrentCompositionMetadata:d,canvasContent:c,setCanvasContent:u,updateCompositionDefaultProps:T}),[t,p,y,s,b,x,h,c,T]);return w.jsx(Kn.Provider,{value:k,children:w.jsx(KE,{children:w.jsx(mk,{children:w.jsx(y0,{children:w.jsx(H0,{numberOfAudioTags:e,component:S?.component??null,children:r})})})})})},i5=({onLoad:r,onError:e,delayRenderRetries:t,delayRenderTimeoutInMilliseconds:n,...i},s)=>{const[a]=v.useState(()=>Qn(`Loading <IFrame> with source ${i.src}`,{retries:t??void 0,timeoutInMilliseconds:n??void 0})),c=v.useCallback(h=>{ft(a),r?.(h)},[a,r]),u=v.useCallback(h=>{ft(a),e?e(h):console.error("Error loading iframe:",h,"Handle the event using the onError() prop to make this message disappear.")},[a,e]);return w.jsx("iframe",{...i,ref:s,onError:u,onLoad:c})};v.forwardRef(i5);function s5(r){return 1e3*2**(r-1)}var o5=({onError:r,maxRetries:e=2,src:t,pauseWhenLoading:n,delayRenderRetries:i,delayRenderTimeoutInMilliseconds:s,onImageFrame:a,...c},u)=>{const h=v.useRef(null),d=v.useRef({}),{delayPlayback:g}=kh(),p=v.useContext(Wt);if(!t)throw new Error('No "src" prop was passed to <Img>.');v.useImperativeHandle(u,()=>h.current,[]);const y=Cs(t),b=v.useCallback(S=>{if(!h.current)return;const T=h.current.src;setTimeout(()=>{if(!h.current)return;const k=h.current?.src;k===T&&(h.current.removeAttribute("src"),h.current.setAttribute("src",k))},S)},[]),x=v.useCallback(S=>{if(d.current){if(d.current[h.current?.src]=(d.current[h.current?.src]??0)+1,r&&(d.current[h.current?.src]??0)>e){r(S);return}if((d.current[h.current?.src]??0)<=e){const T=s5(d.current[h.current?.src]??0);console.warn(`Could not load image with source ${h.current?.src}, retrying again in ${T}ms`),b(T);return}ko("Error loading image with src: "+h.current?.src)}},[e,r,b]);if(typeof window<"u"){const S=!!p?.premounting;v.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test"){h.current&&(h.current.src=y);return}const T=Qn("Loading <Img> with src="+y,{retries:i??void 0,timeoutInMilliseconds:s??void 0}),k=n&&!S?g().unblock:()=>{},{current:I}=h;let M=!1;const F=()=>{M||((d.current[h.current?.src]??0)>0&&(delete d.current[h.current?.src],console.info(`Retry successful - ${h.current?.src} is now loaded`)),I&&(I.src=y,a?.(I)),k(),ft(T))},N=new Image;return N.src=y,N.decode().then(F).catch(W=>{console.warn(W),N.complete?F():N.addEventListener("load",F)}),()=>{M=!0,N.removeEventListener("load",F),k(),ft(T)}},[y,g,i,s,n,S,a])}return w.jsx("img",{...c,ref:h,onError:x})},Z0=v.forwardRef(o5),J0={};Qm(J0,{makeDefaultPreviewCSS:()=>c5,injectCSS:()=>a5,OFFTHREAD_VIDEO_CLASS_NAME:()=>ac});var Q0={},a5=r=>{if(typeof document>"u"||Q0[r])return;const e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.appendChild(document.createTextNode(r)),e.prepend(t),Q0[r]=!0},ac="__remotion_offthreadvideo",c5=(r,e)=>r?`
    ${r} * {
      box-sizing: border-box;
    }
    ${r} *:-webkit-full-screen {
      width: 100%;
      height: 100%;
    }
    ${r} .${ac} {
      object-fit: contain;
    }
  `:`
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
	    background-color: ${e};
    }
    .${ac} {
      object-fit: contain;
    }
    `,ev="__remotion-studio-container",l5=()=>document.getElementById(ev),u5=null,Rh=[],h5=()=>u5,d5=r=>(Rh.push(r),()=>{Rh=Rh.filter(e=>e!==r)}),f5=({children:r,numberOfAudioTags:e})=>{const[t]=v.useState(()=>String(Ii(null))),[n,i]=v.useState(()=>w0()),[s,a]=v.useState(!1),c=v.useRef(!1),[u,h]=v.useState(0),[d,g]=v.useState(1),p=v.useRef([]);typeof window<"u"&&v.useLayoutEffect(()=>{window.remotion_setFrame=(S,T,k)=>{window.remotion_attempt=k;const I=Qn(`Setting the current frame to ${S}`);let M=!0;i(F=>(F[T]??window.remotion_initialFrame)===S?(M=!1,F):{...F,[T]:S}),M?requestAnimationFrame(()=>ft(I)):ft(I)},window.remotion_isPlayer=!1},[]);const y=v.useMemo(()=>({frame:n,playing:s,imperativePlaying:c,rootId:t,playbackRate:d,setPlaybackRate:g,audioAndVideoTags:p}),[n,d,s,t]),b=v.useMemo(()=>({setFrame:i,setPlaying:a}),[]),x=v.useMemo(()=>{let S=0;return{getNonce:()=>S++,fastRefreshes:u}},[u]);return v.useEffect(()=>{typeof __webpack_module__<"u"&&__webpack_module__.hot&&__webpack_module__.hot.addStatusHandler(S=>{S==="idle"&&h(T=>T+1)})},[]),w.jsx(xs.Provider,{value:x,children:w.jsx(Yr.Provider,{value:y,children:w.jsx(Ss.Provider,{value:b,children:w.jsx(a0,{children:w.jsx(k0,{children:w.jsx(n5,{numberOfAudioTags:e,children:w.jsx(I0,{children:w.jsx(P0,{children:r})})})})})})})})},g5=()=>{if(St().isRendering){const r=window.remotion_envVariables;return r?{...JSON.parse(r),NODE_ENV:"production"}:{}}return{NODE_ENV:"production"}},p5=()=>{const r=g5();window.process||(window.process={}),window.process.env||(window.process.env={}),Object.keys(r).forEach(e=>{window.process.env[e]=r[e]})},m5=v.createContext(null),v5=v.createContext({setSize:()=>{},size:{size:"auto",translation:{x:0,y:0}}}),y5=({canvasSize:r,compositionHeight:e,compositionWidth:t,previewSize:n})=>{const i=r.height/e,s=r.width/t,a=Math.min(i,s);return n==="auto"?a:Number(n)},b5="remotion_staticFilesChanged";function w5(){const r=v.useContext(Kn),e=v.useContext(Yr),t=v.useContext(Ss),n=v.useContext(Wt),i=v.useContext(xs),s=v.useContext(Ei),a=v.useContext(rc),c=v.useContext(Ja),u=v.useContext(ki),h=v.useContext(_s),d=v.useContext(ks);return v.useMemo(()=>({compositionManagerCtx:r,timelineContext:e,setTimelineContext:t,sequenceContext:n,nonceContext:i,canUseRemotionHooksContext:s,preloadContext:a,resolveCompositionContext:c,renderAssetManagerContext:u,sequenceManagerContext:h,bufferManagerContext:d}),[r,i,n,t,e,s,a,c,u,h,d])}var _5=r=>{const{children:e,contexts:t}=r;return w.jsx(Ei.Provider,{value:t.canUseRemotionHooksContext,children:w.jsx(xs.Provider,{value:t.nonceContext,children:w.jsx(rc.Provider,{value:t.preloadContext,children:w.jsx(Kn.Provider,{value:t.compositionManagerCtx,children:w.jsx(_s.Provider,{value:t.sequenceManagerContext,children:w.jsx(ki.Provider,{value:t.renderAssetManagerContext,children:w.jsx(Ja.Provider,{value:t.resolveCompositionContext,children:w.jsx(Yr.Provider,{value:t.timelineContext,children:w.jsx(Ss.Provider,{value:t.setTimelineContext,children:w.jsx(Wt.Provider,{value:t.sequenceContext,children:w.jsx(ks.Provider,{value:t.bufferManagerContext,children:e})})})})})})})})})})})},_e={useUnsafeVideoConfig:ec,Timeline:s0,CompositionManager:Kn,SequenceManager:_s,SequenceVisibilityToggleContext:Eo,RemotionRoot:f5,useVideo:Qa,getRoot:h5,useMediaVolumeState:Fh,useMediaMutedState:Lh,useLazyComponent:Y0,truthy:Ga,SequenceContext:Wt,useRemotionContexts:w5,RemotionContextProvider:_5,CSSUtils:J0,setupEnvVariables:p5,MediaVolumeContext:Dh,SetMediaVolumeContext:jh,getRemotionEnvironment:St,SharedAudioContext:sc,SharedAudioContextProvider:H0,invalidCompositionErrorMessage:e5,isCompositionIdValid:G0,getPreviewDomElement:l5,compositionsRef:K0,portalNode:Nh,waitForRoot:d5,CanUseRemotionHooksProvider:xh,CanUseRemotionHooks:Ei,PrefetchProvider:k0,DurationsContextProvider:I0,IsPlayerContextProvider:XE,useIsPlayer:fh,EditorPropsProvider:a0,EditorPropsContext:Ka,usePreload:Cs,NonceContext:xs,resolveVideoConfig:p0,useResolvedVideoConfig:bh,resolveCompositionsRef:m0,ResolveCompositionConfig:y0,REMOTION_STUDIO_CONTAINER_ELEMENT:ev,RenderAssetManager:ki,persistCurrentFrame:b0,useTimelineSetFrame:x0,isIosSafari:ic,WATCH_REMOTION_STATIC_FILES:b5,addSequenceStackTraces:Co,useMediaStartsAt:Ts,BufferingProvider:P0,BufferingContextReact:ks,enableSequenceStackTraces:n0,CurrentScaleContext:m5,PreviewSizeContext:v5,calculateScale:y5,editorPropsProviderRef:o0,PROPS_UPDATED_EXTERNALLY:ak,validateRenderAsset:S0},x5=({src:r,transparent:e,currentTime:t,toneMapped:n})=>`http://localhost:${window.remotion_proxyPort}/proxy?src=${encodeURIComponent(xn(r))}&time=${encodeURIComponent(t)}&transparent=${String(e)}&toneMapped=${String(n)}`,tv=v.createContext(!1),S5=({children:r})=>w.jsx(tv.Provider,{value:!1,children:r}),C5=()=>{if(!v.useContext(tv))throw new Error("This component must be inside a <Series /> component.")},T5=({children:r},e)=>(C5(),w.jsx(S5,{children:r})),E5=v.forwardRef(T5);Co(E5);var k5=({onError:r,volume:e,playbackRate:t,src:n,muted:i,allowAmplificationDuringRender:s,transparent:a=!1,toneMapped:c=!0,toneFrequency:u,name:h,loopVolumeCurveBehavior:d,delayRenderRetries:g,delayRenderTimeoutInMilliseconds:p,onVideoFrame:y,...b})=>{const x=Ti(),S=Jn(),T=Io(d??"repeat"),k=ec(),I=v.useContext(Wt),M=Ts(),{registerRenderAsset:F,unregisterRenderAsset:N}=v.useContext(ki);if(!n)throw new TypeError("No `src` was passed to <OffthreadVideo>.");const W=v.useMemo(()=>`offthreadvideo-${Ii(n??"")}-${I?.cumulatedFrom}-${I?.relativeFrom}-${I?.durationInFrames}`,[n,I?.cumulatedFrom,I?.relativeFrom,I?.durationInFrames]);if(!k)throw new Error("No video config found");const R=Es({volume:e,frame:T,mediaVolume:1,allowAmplificationDuringRender:s??!1});v.useEffect(()=>{if(!n)throw new Error("No src passed");if(window.remotion_audioEnabled&&!i&&!(R<=0))return F({type:"video",src:xn(n),id:W,frame:x,volume:R,mediaFrame:S,playbackRate:t??1,allowAmplificationDuringRender:s??!1,toneFrequency:u??null,audioStartFrame:Math.max(0,-(I?.relativeFrom??0))}),()=>N(W)},[i,n,F,W,N,R,S,x,t,s,u,I?.relativeFrom]);const X=v.useMemo(()=>F0({frame:S,playbackRate:t||1,startFrom:-M})/k.fps,[S,M,t,k.fps]),U=v.useMemo(()=>x5({src:n,currentTime:X,transparent:a,toneMapped:c}),[c,X,n,a]),[K,$]=v.useState(null);v.useLayoutEffect(()=>{if(!window.remotion_videoEnabled)return;const Q=[];$(null);const ue=new AbortController,oe=Qn(`Fetching ${U} from server`,{retries:g??void 0,timeoutInMilliseconds:p??void 0});return(async()=>{try{const de=await fetch(U,{signal:ue.signal});if(de.status!==200){if(de.status===500){const Ge=await de.json();if(Ge.error){const Re=Ge.error.replace(/^Error: /,"");throw new Error(Re)}}throw new Error(`Server returned status ${de.status} while fetching ${U}`)}const ne=await de.blob(),Fe=URL.createObjectURL(ne);Q.push(()=>URL.revokeObjectURL(Fe)),$({src:Fe,handle:oe})}catch(de){if(de.message.includes("aborted")){ft(oe);return}if(ue.signal.aborted){ft(oe);return}de.message.includes("Failed to fetch")&&(de=new Error(`Failed to fetch ${U}. This could be caused by Chrome rejecting the request because the disk space is low. Consider increasing the disk size of your environment.`,{cause:de})),r?r(de):ko(de)}})(),Q.push(()=>{ue.signal.aborted||ue.abort()}),()=>{Q.forEach(de=>de())}},[U,g,p,r]);const G=v.useCallback(()=>{r?r?.(new Error("Failed to load image with src "+K)):ko("Failed to load image with src "+K)},[K,r]),re=v.useMemo(()=>[ac,b.className].filter(Ga).join(" "),[b.className]),fe=v.useCallback(Q=>{y&&y(Q)},[y]);return!K||!window.remotion_videoEnabled?null:(ft(K.handle),w.jsx(Z0,{src:K.src,className:re,delayRenderRetries:g,delayRenderTimeoutInMilliseconds:p,onImageFrame:fe,...b,onError:G}))},I5=({ref:r,onVideoFrame:e})=>{v.useEffect(()=>{const{current:t}=r;if(!t||!e)return;let n=0;const i=()=>{r.current&&(e(r.current),n=r.current.requestVideoFrameCallback(i))};return i(),()=>{t.cancelVideoFrameCallback(n)}},[e,r])},A5=(r,e)=>{const t=v.useRef(null),{volume:n,muted:i,playbackRate:s,onlyWarnForMediaSeekingError:a,src:c,onDuration:u,acceptableTimeShift:h,acceptableTimeShiftInSeconds:d,toneFrequency:g,name:p,_remotionInternalNativeLoopPassed:y,_remotionInternalStack:b,_remotionDebugSeeking:x,style:S,pauseWhenBuffering:T,showInTimeline:k,loopVolumeCurveBehavior:I,onError:M,onAutoPlayError:F,onVideoFrame:N,crossOrigin:W,...R}=r,X=Io(I??"repeat"),{fps:U,durationInFrames:K}=Zn(),$=v.useContext(Wt),{hidden:G}=v.useContext(Eo),[re]=v.useState(()=>String(Math.random())),fe=G[re]??!1;if(typeof h<"u")throw new Error("acceptableTimeShift has been removed. Use acceptableTimeShiftInSeconds instead.");const Q=B0(t),[ue]=Fh(),[oe]=Lh();O0({mediaRef:t,volume:n,mediaVolume:ue,mediaType:"video",src:c,playbackRate:r.playbackRate??1,displayName:p??null,id:re,stack:b,showInTimeline:k,premountDisplay:null,onAutoPlayError:F??null}),z0({volumePropFrame:X,actualVolume:Q,volume:n,mediaVolume:ue,mediaRef:t}),V0({mediaRef:t,src:c,mediaType:"video",playbackRate:r.playbackRate??1,onlyWarnForMediaSeekingError:a,acceptableTimeshift:d??Mh,isPremounting:!!$?.premounting,pauseWhenBuffering:T,debugSeeking:x,onAutoPlayError:F??null});const se=$?$.relativeFrom:0,de=$?Math.min($.durationInFrames,K):K,ne=jk({actualSrc:Cs(c),actualFrom:se,duration:de,fps:U});v.useImperativeHandle(e,()=>t.current,[]),v.useEffect(()=>{const{current:xe}=t;if(!xe)return;const ke=()=>{if(xe.error){if(console.error("Error occurred in video",xe?.error),M){const ut=new Error(`Code ${xe.error.code}: ${xe.error.message}`);M(ut);return}throw new Error(`The browser threw an error while playing the video ${c}: Code ${xe.error.code} - ${xe?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else{if(M){const ut=new Error(`The browser threw an error while playing the video ${c}`);M(ut);return}throw new Error("The browser threw an error while playing the video")}};return xe.addEventListener("error",ke,{once:!0}),()=>{xe.removeEventListener("error",ke)}},[M,c]);const Fe=v.useRef();Fe.current=u,I5({ref:t,onVideoFrame:N}),v.useEffect(()=>{const{current:xe}=t;if(!xe)return;if(xe.duration){Fe.current?.(c,xe.duration);return}const ke=()=>{Fe.current?.(c,xe.duration)};return xe.addEventListener("loadedmetadata",ke),()=>{xe.removeEventListener("loadedmetadata",ke)}},[c]),v.useEffect(()=>{const{current:xe}=t;xe&&(ic()?xe.preload="metadata":xe.preload="auto")},[]);const Ge=v.useMemo(()=>({...S,opacity:fe?0:S?.opacity??1}),[fe,S]),Re=W??(N?"anonymous":void 0);return w.jsx("video",{ref:t,muted:i||oe,playsInline:!0,src:ne,loop:y,style:Ge,disableRemotePlayback:!0,crossOrigin:Re,...R})},rv=v.forwardRef(A5),nv=r=>{const{startFrom:e,endAt:t,name:n,pauseWhenBuffering:i,stack:s,showInTimeline:a,...c}=r,u=St(),h=v.useCallback(()=>{},[]);if(typeof r.src!="string")throw new TypeError(`The \`<OffthreadVideo>\` tag requires a string for \`src\`, but got ${JSON.stringify(r.src)} instead.`);if(r.imageFormat)throw new TypeError("The `<OffthreadVideo>` tag does no longer accept `imageFormat`. Use the `transparent` prop if you want to render a transparent video.");if(typeof e<"u"||typeof t<"u"){Th(e,t);const T=e??0,k=t??1/0;return w.jsx(un,{layout:"none",from:0-T,showInTimeline:!1,durationInFrames:k,name:n,children:w.jsx(nv,{pauseWhenBuffering:i??!1,...c})})}if(Ch(r,"Video"),u.isRendering)return w.jsx(k5,{...c});const{transparent:d,toneMapped:g,_remotionDebugSeeking:p,onAutoPlayError:y,onVideoFrame:b,crossOrigin:x,...S}=c;return w.jsx(rv,{_remotionInternalStack:s??null,_remotionInternalNativeLoopPassed:!1,_remotionDebugSeeking:p??!1,onDuration:h,onlyWarnForMediaSeekingError:!0,pauseWhenBuffering:i??!1,showInTimeline:a??!0,onAutoPlayError:y??void 0,onVideoFrame:b??null,crossOrigin:x,...S})},iv=r=>Math.round(r*1e5)/1e5,Vh=(r,e)=>{if(Ph(r.currentTime,e))return{wait:Promise.resolve(e),cancel:()=>{}};r.currentTime=e;let t,n=null;const i=new Promise(a=>{t=r.requestVideoFrameCallback((c,u)=>{const h=u.expectedDisplayTime-c;if(h<=0){a(u.mediaTime);return}setTimeout(()=>{a(u.mediaTime)},h+150)})}),s=new Promise(a=>{const c=()=>{a()};r.addEventListener("seeked",c,{once:!0}),n=()=>{r.removeEventListener("seeked",c)}});return{wait:Promise.all([i,s]).then(([a])=>a),cancel:()=>{n?.(),r.cancelVideoFrameCallback(t)}}},M5=(r,e,t)=>{const n=1/t/2;let i=()=>{};return Number.isFinite(r.duration)&&r.currentTime>=r.duration&&e>=r.duration?{prom:Promise.resolve(),cancel:()=>{}}:{prom:new Promise((a,c)=>{const u=Vh(r,e+n);u.wait.then(h=>{if(Math.abs(e-h)<=n)return a();const g=e>h?1:-1,p=Vh(r,h+n*g);i=p.cancel,p.wait.then(y=>{const b=Math.abs(e-y);if(iv(b)<=iv(n))return a();const x=Vh(r,e+n);return i=x.cancel,x.wait.then(()=>{a()}).catch(S=>{c(S)})}).catch(y=>{c(y)})}),i=u.cancel}),cancel:()=>{i()}}},O5=({onError:r,volume:e,allowAmplificationDuringRender:t,playbackRate:n,onDuration:i,toneFrequency:s,name:a,acceptableTimeShiftInSeconds:c,delayRenderRetries:u,delayRenderTimeoutInMilliseconds:h,loopVolumeCurveBehavior:d,...g},p)=>{const y=Ti(),b=Jn(),x=Io(d??"repeat"),S=ec(),T=v.useRef(null),k=v.useContext(Wt),I=Ts(),M=St(),{registerRenderAsset:F,unregisterRenderAsset:N}=v.useContext(ki),W=v.useMemo(()=>`video-${Ii(g.src??"")}-${k?.cumulatedFrom}-${k?.relativeFrom}-${k?.durationInFrames}`,[g.src,k?.cumulatedFrom,k?.relativeFrom,k?.durationInFrames]);if(!S)throw new Error("No video config found");const R=Es({volume:e,frame:x,mediaVolume:1,allowAmplificationDuringRender:t??!1});v.useEffect(()=>{if(!g.src)throw new Error("No src passed");if(!g.muted&&!(R<=0)&&window.remotion_audioEnabled)return F({type:"video",src:xn(g.src),id:W,frame:y,volume:R,mediaFrame:b,playbackRate:n??1,allowAmplificationDuringRender:t??!1,toneFrequency:s??null,audioStartFrame:Math.max(0,-(k?.relativeFrom??0))}),()=>N(W)},[g.muted,g.src,F,W,N,R,b,y,n,t,s,k?.relativeFrom]),v.useImperativeHandle(p,()=>T.current,[]),v.useEffect(()=>{if(!window.remotion_videoEnabled)return;const{current:U}=T;if(!U)return;const K=L0({frame:b,playbackRate:n||1,startFrom:-I,fps:S.fps}),$=Qn(`Rendering <Video /> with src="${g.src}" at time ${K}`,{retries:u??void 0,timeoutInMilliseconds:h??void 0});if(window.process?.env?.NODE_ENV==="test"){ft($);return}if(Ph(U.currentTime,K)){if(U.readyState>=2){ft($);return}const Q=()=>{ft($)};return U.addEventListener("loadeddata",Q,{once:!0}),()=>{U.removeEventListener("loadeddata",Q)}}const G=()=>{ft($)},re=M5(U,K,S.fps);re.prom.then(()=>{ft($)}),U.addEventListener("ended",G,{once:!0});const fe=()=>{if(U?.error){if(console.error("Error occurred in video",U?.error),r)return;throw new Error(`The browser threw an error while playing the video ${g.src}: Code ${U.error.code} - ${U?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else throw new Error("The browser threw an error")};return U.addEventListener("error",fe,{once:!0}),()=>{re.cancel(),U.removeEventListener("ended",G),U.removeEventListener("error",fe),ft($)}},[x,g.src,n,S.fps,b,I,r,u,h]);const{src:X}=g;return M.isRendering&&v.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test")return;const U=Qn("Loading <Video> duration with src="+X,{retries:u??void 0,timeoutInMilliseconds:h??void 0}),{current:K}=T,$=()=>{K?.duration&&i(X,K.duration),ft(U)};return K?.duration?(i(X,K.duration),ft(U)):K?.addEventListener("loadedmetadata",$,{once:!0}),()=>{K?.removeEventListener("loadedmetadata",$),ft(U)}},[X,i,u,h]),w.jsx("video",{ref:T,disableRemotePlayback:!0,...g})},P5=v.forwardRef(O5),D5=(r,e)=>{const{startFrom:t,endAt:n,name:i,pauseWhenBuffering:s,stack:a,_remotionInternalNativeLoopPassed:c,showInTimeline:u,onAutoPlayError:h,...d}=r,{loop:g,_remotionDebugSeeking:p,...y}=r,{fps:b}=Zn(),x=St(),{durations:S,setDurations:T}=v.useContext(Eh);if(typeof e=="string")throw new Error("string refs are not supported");if(typeof r.src!="string")throw new TypeError(`The \`<Video>\` tag requires a string for \`src\`, but got ${JSON.stringify(r.src)} instead.`);const k=Cs(r.src),I=v.useCallback((N,W)=>{T({type:"got-duration",durationInSeconds:W,src:N})},[T]),M=v.useCallback(()=>{},[]),F=S[xn(k)]??S[xn(r.src)];if(g&&F!==void 0){if(!Number.isFinite(F))return w.jsx(cc,{...y,ref:e,_remotionInternalNativeLoopPassed:!0});const N=F*b;return w.jsx(tc,{durationInFrames:C0({endAt:n,mediaDuration:N,playbackRate:r.playbackRate??1,startFrom:t}),layout:"none",name:i,children:w.jsx(cc,{...y,ref:e,_remotionInternalNativeLoopPassed:!0})})}if(typeof t<"u"||typeof n<"u"){Th(t,n);const N=t??0,W=n??1/0;return w.jsx(un,{layout:"none",from:0-N,showInTimeline:!1,durationInFrames:W,name:i,children:w.jsx(cc,{pauseWhenBuffering:s??!1,...d,ref:e})})}return Ch(r,"Video"),x.isRendering?w.jsx(P5,{onDuration:I,onVideoFrame:M??null,...d,ref:e}):w.jsx(rv,{onlyWarnForMediaSeekingError:!1,...d,ref:e,onVideoFrame:null,pauseWhenBuffering:s??!1,onDuration:I,_remotionInternalStack:a??null,_remotionInternalNativeLoopPassed:c??!1,_remotionDebugSeeking:p??!1,showInTimeline:u??!0,onAutoPlayError:h??void 0})},cc=v.forwardRef(D5);Co(cc),GE();var j5={},F5=new Proxy(j5,{get(r,e){return e==="Bundling"||e==="Rendering"||e==="Log"||e==="Puppeteer"||e==="Output"?F5:()=>{console.warn("  The CLI configuration has been extracted from Remotion Core."),console.warn("Update the import from the config file:"),console.warn(),console.warn("- Delete:"),console.warn('import {Config} from "remotion";'),console.warn("+ Replace:"),console.warn('import {Config} from "@remotion/cli/config";'),console.warn(),console.warn("For more information, see https://www.remotion.dev/docs/4-0-migration."),process.exit(1)}}});Co(un),typeof window<"u"&&(window.remotion_renderReady=!1),typeof window<"u"&&(window.remotion_delayRenderTimeouts={});var L5=(r,e,t)=>{if(r){if(typeof r!="object")throw new Error(`"${e}" must be an object, but you passed a value of type ${typeof r}`);if(Array.isArray(r))throw new Error(`"${e}" must be an object, an array was passed ${t?`for composition "${t}"`:""}`)}};function N5(r,e,t){if(typeof r!="number")throw new Error(`The "${e}" prop ${t} must be a number, but you passed a value of type ${typeof r}`);if(isNaN(r))throw new TypeError(`The "${e}" prop ${t} must not be NaN, but is NaN.`);if(!Number.isFinite(r))throw new TypeError(`The "${e}" prop ${t} must be finite, but is ${r}.`);if(r%1!==0)throw new TypeError(`The "${e}" prop ${t} must be an integer, but is ${r}.`);if(r<=0)throw new TypeError(`The "${e}" prop ${t} must be positive, but got ${r}.`)}function R5(r,e){const{allowFloats:t,component:n}=e;if(typeof r>"u")throw new Error(`The "durationInFrames" prop ${n} is missing.`);if(typeof r!="number")throw new Error(`The "durationInFrames" prop ${n} must be a number, but you passed a value of type ${typeof r}`);if(r<=0)throw new TypeError(`The "durationInFrames" prop ${n} must be positive, but got ${r}.`);if(!t&&r%1!==0)throw new TypeError(`The "durationInFrames" prop ${n} must be an integer, but got ${r}.`);if(!Number.isFinite(r))throw new TypeError(`The "durationInFrames" prop ${n} must be finite, but got ${r}.`)}function V5(r,e,t){if(typeof r!="number")throw new Error(`"fps" must be a number, but you passed a value of type ${typeof r} ${e}`);if(!Number.isFinite(r))throw new Error(`"fps" must be a finite, but you passed ${r} ${e}`);if(isNaN(r))throw new Error(`"fps" must not be NaN, but got ${r} ${e}`);if(r<=0)throw new TypeError(`"fps" must be positive, but got ${r} ${e}`);if(t&&r>50)throw new TypeError("The FPS for a GIF cannot be higher than 50. Use the --every-nth-frame option to lower the FPS: https://remotion.dev/docs/render-as-gif")}var lc={validateFps:V5,validateDimension:N5,validateDurationInFrames:R5,validateDefaultAndInputProps:L5},Nt=25,Bh=16,B5=()=>w.jsx("svg",{width:Nt,height:Nt,viewBox:"0 0 25 25",fill:"none",children:w.jsx("path",{d:"M8 6.375C7.40904 8.17576 7.06921 10.2486 7.01438 12.3871C6.95955 14.5255 7.19163 16.6547 7.6875 18.5625C9.95364 18.2995 12.116 17.6164 14.009 16.5655C15.902 15.5147 17.4755 14.124 18.6088 12.5C17.5158 10.8949 15.9949 9.51103 14.1585 8.45082C12.3222 7.3906 10.2174 6.68116 8 6.375Z",fill:"white",stroke:"white",strokeWidth:"6.25",strokeLinejoin:"round"})}),z5=()=>w.jsxs("svg",{viewBox:"0 0 100 100",width:Nt,height:Nt,children:[w.jsx("rect",{x:"25",y:"20",width:"20",height:"60",fill:"#fff",ry:"5",rx:"5"}),w.jsx("rect",{x:"55",y:"20",width:"20",height:"60",fill:"#fff",ry:"5",rx:"5"})]}),W5=({isFullscreen:r})=>{const n=r?0:3,i=r?6*1.6:6/2,s=r?6*1.6:6*2;return w.jsxs("svg",{viewBox:"0 0 32 32",height:Bh,width:Bh,children:[w.jsx("path",{d:`
				M ${n} ${s}
				L ${i} ${i}
				L ${s} ${n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),w.jsx("path",{d:`
				M ${32-n} ${s}
				L ${32-i} ${i}
				L ${32-s} ${n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),w.jsx("path",{d:`
				M ${n} ${32-s}
				L ${i} ${32-i}
				L ${s} ${32-n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),w.jsx("path",{d:`
				M ${32-n} ${32-s}
				L ${32-i} ${32-i}
				L ${32-s} ${32-n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"})]})},H5=()=>w.jsx("svg",{width:Nt,height:Nt,viewBox:"0 0 24 24",children:w.jsx("path",{d:"M3.63 3.63a.996.996 0 000 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.996.996 0 101.41-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12A4.5 4.5 0 0014 7.97v1.79l2.48 2.48c.01-.08.02-.16.02-.24z",fill:"#fff"})}),U5=()=>w.jsx("svg",{width:Nt,height:Nt,viewBox:"0 0 24 24",children:w.jsx("path",{d:"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z",fill:"#fff"})}),sv="__remotion_buffering_indicator",ov="__remotion_buffering_animation",$5={width:Nt,height:Nt,overflow:"hidden",lineHeight:"normal",fontSize:"inherit"},Y5={width:14,height:14,overflow:"hidden",lineHeight:"normal",fontSize:"inherit"},X5=({type:r})=>{const e=r==="player"?$5:Y5;return w.jsxs(w.Fragment,{children:[w.jsx("style",{type:"text/css",children:`
				@keyframes ${ov} {
          0% {
            rotate: 0deg;
          }
          100% {
            rotate: 360deg;
          }
        }
        
        .${sv} {
            animation: ${ov} 1s linear infinite;
        }        
			`}),w.jsx("div",{style:e,children:w.jsx("svg",{viewBox:r==="player"?"0 0 22 22":"0 0 18 18",style:e,className:sv,children:w.jsx("path",{d:r==="player"?"M 11 4 A 7 7 0 0 1 15.1145 16.66312":"M 9 2 A 7 7 0 0 1 13.1145 14.66312",stroke:"white",strokeLinecap:"round",fill:"none",strokeWidth:3})})})]})},G5=({currentSize:r,width:e,height:t,compositionWidth:n,compositionHeight:i})=>e!==void 0&&t===void 0?{aspectRatio:[n,i].join("/")}:t!==void 0&&e===void 0?{aspectRatio:[n,i].join("/")}:r?{width:n,height:i}:{width:n,height:i},av=({previewSize:r,compositionWidth:e,compositionHeight:t,canvasSize:n})=>{const i=_e.calculateScale({canvasSize:n,compositionHeight:t,compositionWidth:e,previewSize:r}),s=0-(1-i)/2,a=s*e,c=s*t,u=e*i,h=t*i,d=n.width/2-u/2,g=n.height/2-h/2;return{centerX:d,centerY:g,xCorrection:a,yCorrection:c,scale:i}},cv=({config:r,style:e,canvasSize:t,overflowVisible:n,layout:i})=>r?{position:"relative",overflow:n?"visible":"hidden",...G5({compositionHeight:r.height,compositionWidth:r.width,currentSize:t,height:e?.height,width:e?.width}),opacity:i?1:0,...e}:{},lv=({config:r,canvasSize:e,layout:t,scale:n,overflowVisible:i})=>!r||!e||!t?{}:{position:"absolute",width:r.width,height:r.height,display:"flex",transform:`scale(${n})`,marginLeft:t.xCorrection,marginTop:t.yCorrection,overflow:i?"visible":"hidden"},uv=({layout:r,scale:e,config:t,overflowVisible:n})=>{if(!r||!t)return{};const{centerX:i,centerY:s}=r;return{width:t.width*e,height:t.height*e,display:"flex",flexDirection:"column",position:"absolute",left:i,top:s,overflow:n?"visible":"hidden"}},hv=v.createContext(void 0),dv=v.createContext(void 0);class q5{listeners={ended:[],error:[],pause:[],play:[],ratechange:[],scalechange:[],seeked:[],timeupdate:[],frameupdate:[],fullscreenchange:[],volumechange:[],mutechange:[],waiting:[],resume:[]};addEventListener(e,t){this.listeners[e].push(t)}removeEventListener(e,t){this.listeners[e]=this.listeners[e].filter(n=>n!==t)}dispatchEvent(e,t){this.listeners[e].forEach(n=>{n({detail:t})})}dispatchSeek(e){this.dispatchEvent("seeked",{frame:e})}dispatchVolumeChange(e){this.dispatchEvent("volumechange",{volume:e})}dispatchPause(){this.dispatchEvent("pause",void 0)}dispatchPlay(){this.dispatchEvent("play",void 0)}dispatchEnded(){this.dispatchEvent("ended",void 0)}dispatchRateChange(e){this.dispatchEvent("ratechange",{playbackRate:e})}dispatchScaleChange(e){this.dispatchEvent("scalechange",{scale:e})}dispatchError(e){this.dispatchEvent("error",{error:e})}dispatchTimeUpdate(e){this.dispatchEvent("timeupdate",e)}dispatchFrameUpdate(e){this.dispatchEvent("frameupdate",e)}dispatchFullscreenChange(e){this.dispatchEvent("fullscreenchange",e)}dispatchMuteChange(e){this.dispatchEvent("mutechange",e)}dispatchWaiting(e){this.dispatchEvent("waiting",e)}dispatchResume(e){this.dispatchEvent("resume",e)}}class K5{listeners={error:[],waiting:[],resume:[]};addEventListener(e,t){this.listeners[e].push(t)}removeEventListener(e,t){this.listeners[e]=this.listeners[e].filter(n=>n!==t)}dispatchEvent(e,t){this.listeners[e].forEach(n=>{n({detail:t})})}dispatchError(e){this.dispatchEvent("error",{error:e})}dispatchWaiting(e){this.dispatchEvent("waiting",e)}dispatchResume(e){this.dispatchEvent("resume",e)}}var fv=r=>{const e=v.useContext(_e.BufferingContextReact);if(!e)throw new Error("BufferingContextReact not found");v.useEffect(()=>{const t=e.listenForBuffering(()=>{e.buffering.current=!0,r.dispatchWaiting({})}),n=e.listenForResume(()=>{e.buffering.current=!1,r.dispatchResume({})});return()=>{t.remove(),n.remove()}},[e,r])},Z5=({children:r,currentPlaybackRate:e})=>{const[t]=v.useState(()=>new q5);if(!v.useContext(_e.BufferingContextReact))throw new Error("BufferingContextReact not found");return v.useEffect(()=>{e&&t.dispatchRateChange(e)},[t,e]),fv(t),w.jsx(hv.Provider,{value:t,children:r})},zh=(r,e)=>{const[t,n]=v.useState(!1);return v.useEffect(()=>{const{current:i}=r;if(!i)return;let s;const a=()=>{e&&(clearTimeout(s),s=setTimeout(()=>{n(!1)},e===!0?3e3:e))},c=()=>{n(!0),a()},u=()=>{n(!1),clearTimeout(s)},h=()=>{n(!0),a()};return i.addEventListener("mouseenter",c),i.addEventListener("mouseleave",u),i.addEventListener("mousemove",h),()=>{i.removeEventListener("mouseenter",c),i.removeEventListener("mouseleave",u),i.removeEventListener("mousemove",h),clearTimeout(s)}},[e,r]),t},uc=()=>{const[r,e,t]=_e.Timeline.usePlayingState(),[n,i]=v.useState(!1),s=_e.Timeline.useTimelinePosition(),a=v.useRef(s),c=_e.Timeline.useTimelineSetFrame(),u=_e.Timeline.useTimelineSetFrame(),h=v.useContext(_e.SharedAudioContext),{audioAndVideoTags:d}=v.useContext(_e.Timeline.TimelineContext),g=v.useRef(s);g.current=s;const p=_e.useVideo(),y=_e.useUnsafeVideoConfig(),b=v.useContext(hv),x=(y?.durationInFrames??1)-1,S=s===x,T=s===0;if(!b)throw new TypeError("Expected Player event emitter context");const k=v.useContext(_e.BufferingContextReact);if(!k)throw new Error("Missing the buffering context. Most likely you have a Remotion version mismatch.");const{buffering:I}=k,M=v.useCallback($=>{p?.id&&u(G=>({...G,[p.id]:$})),g.current=$,b.dispatchSeek($)},[b,u,p?.id]),F=v.useCallback($=>{t.current||(i(!0),S&&M(0),h&&h.numberOfAudioTags>0&&$&&h.playAllAudios(),d.current.forEach(G=>G.play()),t.current=!0,e(!0),a.current=g.current,b.dispatchPlay())},[t,S,h,e,b,M,d]),N=v.useCallback(()=>{t.current&&(t.current=!1,e(!1),b.dispatchPause())},[b,t,e]),W=v.useCallback(()=>{t.current&&(t.current=!1,g.current=a.current,y&&(u($=>({...$,[y.id]:a.current})),e(!1),b.dispatchPause()))},[y,b,t,e,u]),R=p?.id,X=v.useCallback($=>{if(!R)return null;t.current||c(G=>{const re=G[R]??window.remotion_initialFrame??0;return{...G,[R]:Math.max(0,re-$)}})},[t,c,R]),U=v.useCallback($=>{if(!R)return null;t.current||c(G=>{const re=G[R]??window.remotion_initialFrame??0;return{...G,[R]:Math.min(x,re+$)}})},[R,t,x,c]);return v.useMemo(()=>({frameBack:X,frameForward:U,isLastFrame:S,emitter:b,playing:r,play:F,pause:N,seek:M,isFirstFrame:T,getCurrentFrame:()=>g.current,isPlaying:()=>t.current,isBuffering:()=>I.current,pauseAndReturnToPlayStart:W,hasPlayed:n,remotionInternal_currentFrameRef:g}),[X,U,S,b,r,F,N,M,T,W,n,t,I])},J5=({browserMediaControlsBehavior:r,videoConfig:e,playbackRate:t})=>{const{playing:n,pause:i,play:s,emitter:a,getCurrentFrame:c,seek:u}=uc();v.useEffect(()=>{navigator.mediaSession&&r.mode!=="do-nothing"&&(n?navigator.mediaSession.playbackState="playing":navigator.mediaSession.playbackState="paused")},[r.mode,n]),v.useEffect(()=>{if(!navigator.mediaSession||r.mode==="do-nothing")return;const h=()=>{e&&navigator.mediaSession&&navigator.mediaSession.setPositionState({duration:e.durationInFrames/e.fps,playbackRate:t,position:c()/e.fps})};return a.addEventListener("timeupdate",h),()=>{a.removeEventListener("timeupdate",h)}},[r.mode,a,c,t,e]),v.useEffect(()=>{if(navigator.mediaSession&&r.mode!=="do-nothing")return navigator.mediaSession.setActionHandler("play",()=>{r.mode==="register-media-session"&&s()}),navigator.mediaSession.setActionHandler("pause",()=>{r.mode==="register-media-session"&&i()}),navigator.mediaSession.setActionHandler("seekto",h=>{r.mode==="register-media-session"&&h.seekTime!==void 0&&e&&u(Math.round(h.seekTime*e.fps))}),navigator.mediaSession.setActionHandler("seekbackward",()=>{r.mode==="register-media-session"&&e&&u(Math.max(0,Math.round((c()-10)*e.fps)))}),navigator.mediaSession.setActionHandler("seekforward",()=>{r.mode==="register-media-session"&&e&&u(Math.max(e.durationInFrames-1,Math.round((c()+10)*e.fps)))}),navigator.mediaSession.setActionHandler("previoustrack",()=>{r.mode==="register-media-session"&&u(0)}),()=>{navigator.mediaSession.metadata=null,navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("seekto",null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("previoustrack",null)}},[r.mode,c,i,s,u,e])},Q5=({time:r,currentFrame:e,playbackSpeed:t,fps:n,actualLastFrame:i,actualFirstFrame:s,framesAdvanced:a,shouldLoop:c})=>{const h=(t<0?Math.ceil:Math.floor)(r*t/(1e3/n))-a,d=h+e,g=e>i||e<s,p=d>i||d<s,y=!c&&p&&!g;return t>0?p?{nextFrame:s,framesToAdvance:h,hasEnded:y}:{nextFrame:d,framesToAdvance:h,hasEnded:y}:p?{nextFrame:i,framesToAdvance:h,hasEnded:y}:{nextFrame:d,framesToAdvance:h,hasEnded:y}},gv=()=>typeof document>"u"?!1:document.visibilityState==="hidden",eI=()=>{const r=v.useRef(gv());return v.useEffect(()=>{const e=()=>{r.current=gv()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),r},tI=({loop:r,playbackRate:e,moveToBeginningWhenEnded:t,inFrame:n,outFrame:i,frameRef:s,browserMediaControlsBehavior:a})=>{const c=_e.useUnsafeVideoConfig(),u=_e.Timeline.useTimelinePosition(),{playing:h,pause:d,emitter:g}=uc(),p=_e.Timeline.useTimelineSetFrame(),y=v.useRef(null),b=eI(),x=v.useRef(null),S=v.useContext(_e.BufferingContextReact);if(!S)throw new Error("Missing the buffering context. Most likely you have a Remotion version mismatch.");J5({browserMediaControlsBehavior:a,playbackRate:e,videoConfig:c}),v.useEffect(()=>{const T=S.listenForBuffering(()=>{y.current=performance.now()}),k=S.listenForResume(()=>{y.current=null});return()=>{T.remove(),k.remove()}},[S]),v.useEffect(()=>{if(!c||!h)return;let T=!1,k=null,I=performance.now(),M=0;const F=()=>{k!==null&&(k.type==="raf"?cancelAnimationFrame(k.id):clearTimeout(k.id))},N=()=>{T=!0,F()},W=()=>{const U=performance.now()-I,K=i??c.durationInFrames-1,$=n??0,G=s.current,{nextFrame:re,framesToAdvance:fe,hasEnded:Q}=Q5({time:U,currentFrame:G,playbackSpeed:e,fps:c.fps,actualFirstFrame:$,actualLastFrame:K,framesAdvanced:M,shouldLoop:r});if(M+=fe,re!==s.current&&(!Q||t)&&p(ue=>({...ue,[c.id]:re})),Q){N(),d(),g.dispatchEnded();return}T||R()},R=()=>{if(y.current){const U=S.listenForResume(()=>{U.remove(),!T&&(I=performance.now(),M=0,W())});return}b.current?k={type:"timeout",id:setTimeout(W,1e3/c.fps)}:k={type:"raf",id:requestAnimationFrame(W)}};R();const X=()=>{document.visibilityState!=="visible"&&(F(),W())};return window.addEventListener("visibilitychange",X),()=>{window.removeEventListener("visibilitychange",X),N()}},[c,r,d,h,p,g,e,n,i,t,b,s,y,S]),v.useEffect(()=>{const T=setInterval(()=>{x.current!==s.current&&(g.dispatchTimeUpdate({frame:s.current}),x.current=s.current)},250);return()=>clearInterval(T)},[g,s]),v.useEffect(()=>{g.dispatchFrameUpdate({frame:u})},[g,u])},Wh=[],Hh=(r,e)=>{const[t,n]=v.useState(()=>{if(!r.current)return null;const a=r.current.getClientRects();return a[0]?{width:a[0].width,height:a[0].height,left:a[0].x,top:a[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}}:null}),i=v.useMemo(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(a=>{const{contentRect:c,target:u}=a[0],h=u.getClientRects();if(!h?.[0]){n(null);return}const d=c.width===0?1:h[0].width/c.width,g=e.shouldApplyCssTransforms?h[0].width:h[0].width*(1/d),p=e.shouldApplyCssTransforms?h[0].height:h[0].height*(1/d);n({width:g,height:p,left:h[0].x,top:h[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}})}),[e.shouldApplyCssTransforms]),s=v.useCallback(()=>{if(!r.current)return;const a=r.current.getClientRects();if(!a[0]){n(null);return}n(c=>c&&c.width===a[0].width&&c.height===a[0].height&&c.left===a[0].x&&c.top===a[0].y&&c.windowSize.height===window.innerHeight&&c.windowSize.width===window.innerWidth?c:{width:a[0].width,height:a[0].height,left:a[0].x,top:a[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}})},[r]);return v.useEffect(()=>{if(!i)return;const{current:a}=r;return a&&i.observe(a),()=>{a&&i.unobserve(a)}},[i,r,s]),v.useEffect(()=>{if(e.triggerOnWindowResize)return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[e.triggerOnWindowResize,s]),v.useEffect(()=>(Wh.push(s),()=>{Wh=Wh.filter(a=>a!==s)}),[s]),v.useMemo(()=>t?{...t,refresh:s}:null,[t,s])},pv=({playing:r,buffering:e})=>r&&e?w.jsx(X5,{type:"player"}):r?w.jsx(z5,{}):w.jsx(B5,{}),Is=12,mv=5,rI=({volume:r,isVertical:e,onBlur:t,inputRef:n,setVolume:i})=>{const s=v.useMemo(()=>{const p={paddingLeft:5,height:Nt,width:Ai,display:"inline-flex",alignItems:"center"};return e?{...p,position:"absolute",transform:`rotate(-90deg) translateX(${Ai/2+Nt/2}px)`}:{...p}},[e]),a=typeof v.useId>"u"?"volume-slider":v.useId(),[c]=v.useState(()=>`__remotion-volume-slider-${Ii(a)}`.replace(".","")),u=v.useCallback(g=>{i(parseFloat(g.target.value))},[i]),h=v.useMemo(()=>{const g={WebkitAppearance:"none",backgroundColor:"rgba(255, 255, 255, 0.5)",borderRadius:mv/2,cursor:"pointer",height:mv,width:Ai,backgroundImage:`linear-gradient(
				to right,
				white ${r*100}%, rgba(255, 255, 255, 0) ${r*100}%
			)`};return e?{...g,bottom:Nt+Ai/2}:g},[e,r]),d=`
	.${c}::-webkit-slider-thumb {
		-webkit-appearance: none;
		background-color: white;
		border-radius: ${Is/2}px;
		box-shadow: 0 0 2px black;
		height: ${Is}px;
		width: ${Is}px;
	}

	.${c}::-moz-range-thumb {
		-webkit-appearance: none;
		background-color: white;
		border-radius: ${Is/2}px;
		box-shadow: 0 0 2px black;
		height: ${Is}px;
		width: ${Is}px;
	}
`;return w.jsxs("div",{style:s,children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:d}}),w.jsx("input",{ref:n,"aria-label":"Change volume",className:c,max:1,min:0,onBlur:t,onChange:u,step:.01,type:"range",value:r,style:h})]})},nI=r=>w.jsx(rI,{...r}),Ai=100,iI=({displayVerticalVolumeSlider:r,renderMuteButton:e,renderVolumeSlider:t})=>{const[n,i]=_e.useMediaMutedState(),[s,a]=_e.useMediaVolumeState(),[c,u]=v.useState(!1),h=v.useRef(null),d=v.useRef(null),g=zh(h,!1),p=v.useCallback(()=>{setTimeout(()=>{d.current&&document.activeElement!==d.current&&u(!1)},10)},[]),y=s===0,b=v.useCallback(()=>{if(y){a(1),i(!1);return}i(M=>!M)},[y,i,a]),x=v.useMemo(()=>({display:"inline-flex",background:"none",border:"none",justifyContent:"center",alignItems:"center",touchAction:"none",...r&&{position:"relative"}}),[r]),S=v.useMemo(()=>({display:"inline",width:Nt,height:Nt,cursor:"pointer",appearance:"none",background:"none",border:"none",padding:0}),[]),T=v.useCallback(({muted:M,volume:F})=>{const N=M||F===0;return w.jsx("button",{"aria-label":N?"Unmute sound":"Mute sound",title:N?"Unmute sound":"Mute sound",onClick:b,onBlur:p,onFocus:()=>u(!0),style:S,type:"button",children:N?w.jsx(H5,{}):w.jsx(U5,{})})},[p,b,S]),k=v.useMemo(()=>e?e({muted:n,volume:s}):T({muted:n,volume:s}),[n,s,T,e]),I=v.useMemo(()=>(c||g)&&!n&&!_e.isIosSafari()?(t??nI)({isVertical:r,volume:s,onBlur:()=>u(!1),inputRef:d,setVolume:a}):null,[r,c,g,n,s,t,a]);return w.jsxs("div",{ref:h,style:x,children:[k,I]})};function sI(r){const[e,t]=v.useState(r),n=v.useRef(null);return v.useEffect(()=>{const i=s=>{n.current&&!n.current.contains(s.target)&&t(!1)};return document.addEventListener("pointerup",i,!0),()=>{document.removeEventListener("pointerup",i,!0)}},[]),{ref:n,isComponentVisible:e,setIsComponentVisible:t}}var oI=35,aI=70,cI={height:30,paddingRight:15,paddingLeft:12,display:"flex",flexDirection:"row",alignItems:"center"},lI={width:22,display:"flex",alignItems:"center"},uI={width:14,height:14,color:"black"},hI=()=>w.jsx("svg",{viewBox:"0 0 512 512",style:uI,children:w.jsx("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})}),dI=({rate:r,onSelect:e,selectedRate:t,keyboardSelectedRate:n})=>{const i=v.useCallback(g=>{g.stopPropagation(),g.preventDefault(),e(r)},[e,r]),[s,a]=v.useState(!1),c=v.useCallback(()=>{a(!0)},[]),u=v.useCallback(()=>{a(!1)},[]),h=n===r,d=v.useMemo(()=>({...cI,backgroundColor:s||h?"#eee":"transparent"}),[s,h]);return w.jsxs("div",{onMouseEnter:c,onMouseLeave:u,tabIndex:0,style:d,onClick:i,children:[w.jsx("div",{style:lI,children:r===t?w.jsx(hI,{}):null}),r.toFixed(1),"x"]},r)},fI=({setIsComponentVisible:r,playbackRates:e,canvasSize:t})=>{const{setPlaybackRate:n,playbackRate:i}=v.useContext(_e.Timeline.TimelineContext),[s,a]=v.useState(i);v.useEffect(()=>{const h=d=>{if(d.preventDefault(),d.key==="ArrowUp"){const g=e.findIndex(p=>p===s);if(g===0)return;a(g===-1?e[0]:e[g-1])}else if(d.key==="ArrowDown"){const g=e.findIndex(p=>p===s);if(g===e.length-1)return;a(g===-1?e[e.length-1]:e[g+1])}else d.key==="Enter"&&(n(s),r(!1))};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[e,s,n,r]);const c=v.useCallback(h=>{n(h),r(!1)},[r,n]),u=v.useMemo(()=>({position:"absolute",right:0,width:125,maxHeight:t.height-aI-oI,bottom:35,background:"#fff",borderRadius:4,overflow:"auto",color:"black",textAlign:"left"}),[t.height]);return w.jsx("div",{style:u,children:e.map(h=>w.jsx(dI,{selectedRate:i,onSelect:c,rate:h,keyboardSelectedRate:s},h))})},gI={fontSize:13,fontWeight:"bold",color:"white",border:"2px solid white",borderRadius:20,paddingLeft:8,paddingRight:8,paddingTop:2,paddingBottom:2},Uh={appearance:"none",backgroundColor:"transparent",border:"none",cursor:"pointer",paddingLeft:0,paddingRight:0,paddingTop:6,paddingBottom:6,height:37,display:"inline-flex",marginBottom:0,marginTop:0,alignItems:"center"},pI={...Uh,position:"relative"},mI=({playbackRates:r,canvasSize:e})=>{const{ref:t,isComponentVisible:n,setIsComponentVisible:i}=sI(!1),{playbackRate:s}=v.useContext(_e.Timeline.TimelineContext),a=v.useCallback(c=>{c.stopPropagation(),c.preventDefault(),i(u=>!u)},[i]);return w.jsx("div",{ref:t,children:w.jsxs("button",{type:"button","aria-label":"Change playback rate",style:pI,onClick:a,children:[w.jsxs("div",{style:gI,children:[s,"x"]}),n&&w.jsx(fI,{canvasSize:e,playbackRates:r,setIsComponentVisible:i})]})})},vv=(r,e,t)=>Math.round(j0(r,[0,t],[0,e-1],{extrapolateLeft:"clamp",extrapolateRight:"clamp"})),As=5,Mo=12,$h=4,vI={userSelect:"none",WebkitUserSelect:"none",paddingTop:$h,paddingBottom:$h,boxSizing:"border-box",cursor:"pointer",position:"relative",touchAction:"none"},yI={height:As,backgroundColor:"rgba(255, 255, 255, 0.25)",width:"100%",borderRadius:As/2},bI=r=>{let e=r;for(;e.parentElement;)e=e.parentElement;return e},wI=({durationInFrames:r,onSeekEnd:e,onSeekStart:t,inFrame:n,outFrame:i})=>{const s=v.useRef(null),a=zh(s,!1),c=Hh(s,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),{seek:u,play:h,pause:d,playing:g}=uc(),p=_e.Timeline.useTimelinePosition(),[y,b]=v.useState({dragging:!1}),x=c?.width??0,S=v.useCallback(N=>{if(N.button!==0)return;const W=s.current?.getBoundingClientRect().left,R=vv(N.clientX-W,r,x);d(),u(R),b({dragging:!0,wasPlaying:g}),t()},[r,x,d,u,g,t]),T=v.useCallback(N=>{if(!c)throw new Error("Player has no size");if(!y.dragging)return;const W=s.current?.getBoundingClientRect().left,R=vv(N.clientX-W,r,c.width);u(R)},[y.dragging,r,u,c]),k=v.useCallback(()=>{b({dragging:!1}),y.dragging&&(y.wasPlaying?h():d(),e())},[y,e,d,h]);v.useEffect(()=>{if(!y.dragging)return;const N=bI(s.current);return N.addEventListener("pointermove",T),N.addEventListener("pointerup",k),()=>{N.removeEventListener("pointermove",T),N.removeEventListener("pointerup",k)}},[y.dragging,T,k]);const I=v.useMemo(()=>({height:Mo,width:Mo,borderRadius:Mo/2,position:"absolute",top:$h-Mo/2+5/2,backgroundColor:"white",left:Math.max(0,p/Math.max(1,r-1)*x-Mo/2),boxShadow:"0 0 2px black",opacity:Number(a)}),[a,r,p,x]),M=v.useMemo(()=>({height:As,backgroundColor:"rgba(255, 255, 255, 1)",width:(p-(n??0))/(r-1)*100+"%",marginLeft:(n??0)/(r-1)*100+"%",borderRadius:As/2}),[r,p,n]),F=v.useMemo(()=>({height:As,backgroundColor:"rgba(255, 255, 255, 0.25)",width:((i??r-1)-(n??0))/(r-1)*100+"%",marginLeft:(n??0)/(r-1)*100+"%",borderRadius:As/2,position:"absolute"}),[r,n,i]);return w.jsxs("div",{ref:s,onPointerDown:S,style:vI,children:[w.jsxs("div",{style:yI,children:[w.jsx("div",{style:F}),w.jsx("div",{style:M})]}),w.jsx("div",{style:I})]})},yv=r=>{const e=Math.floor(r/60),t=Math.floor(r-e*60);return`${String(e)}:${String(t).padStart(2,"0")}`},_I=10,Yh=12,xI=({allowFullscreen:r,playerWidth:e})=>v.useMemo(()=>{const n=Nt,i=Nt,s=r?Bh:0,a=i+n+s+Yh*2+_I*2,c=e-a,u=Math.max(c,0),h=u-Ai,g=(h<Ai?u:h)+a+Ai,p=e<g;return{maxTimeLabelWidth:u===0?null:u,displayVerticalVolumeSlider:p}},[r,e]),SI=[0,.013,.049,.104,.175,.259,.352,.45,.55,.648,.741,.825,.896,.951,.987],CI=[0,8.1,15.5,22.5,29,35.3,41.2,47.1,52.9,58.8,64.7,71,77.5,84.5,91.9],TI=1/.7,EI={boxSizing:"border-box",position:"absolute",bottom:0,width:"100%",paddingTop:40,paddingBottom:10,backgroundImage:`linear-gradient(to bottom,${SI.map((r,e)=>`hsla(0, 0%, 0%, ${r}) ${CI[e]*TI}%`).join(", ")}, hsl(0, 0%, 0%) 100%)`,backgroundSize:"auto 145px",display:"flex",paddingRight:Yh,paddingLeft:Yh,flexDirection:"column",transition:"opacity 0.3s"},kI={display:"flex",flexDirection:"row",width:"100%",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none"},II={display:"flex",flexDirection:"row",userSelect:"none",WebkitUserSelect:"none",alignItems:"center"},hc={width:12},AI={height:8},MI={flex:1},OI={},PI=({durationInFrames:r,isFullscreen:e,fps:t,player:n,showVolumeControls:i,onFullscreenButtonClick:s,allowFullscreen:a,onExitFullscreenButtonClick:c,spaceKeyToPlayOrPause:u,onSeekEnd:h,onSeekStart:d,inFrame:g,outFrame:p,initiallyShowControls:y,canvasSize:b,renderPlayPauseButton:x,renderFullscreenButton:S,alwaysShowControls:T,showPlaybackRateControl:k,containerRef:I,buffering:M,hideControlsWhenPointerDoesntMove:F,onPointerDown:N,onDoubleClick:W,renderMuteButton:R,renderVolumeSlider:X})=>{const U=v.useRef(null),K=_e.Timeline.useTimelinePosition(),[$,G]=v.useState(!1),re=zh(I,F),{maxTimeLabelWidth:fe,displayVerticalVolumeSlider:Q}=xI({allowFullscreen:a,playerWidth:b?.width??0}),[ue,oe]=v.useState(()=>{if(typeof y=="boolean")return y;if(typeof y=="number"){if(y%1!==0)throw new Error("initiallyShowControls must be an integer or a boolean");if(Number.isNaN(y))throw new Error("initiallyShowControls must not be NaN");if(!Number.isFinite(y))throw new Error("initiallyShowControls must be finite");if(y<=0)throw new Error("initiallyShowControls must be a positive integer");return y}throw new TypeError("initiallyShowControls must be a number or a boolean")}),se=v.useMemo(()=>{const ke=re||!n.playing||ue||T;return{...EI,opacity:Number(ke)}},[re,ue,n.playing,T]);v.useEffect(()=>{U.current&&u&&U.current.focus({preventScroll:!0})},[n.playing,u]),v.useEffect(()=>{G((typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled))??!1)},[]),v.useEffect(()=>{if(ue===!1)return;const ut=setTimeout(()=>{oe(!1)},ue===!0?2e3:ue);return()=>{clearInterval(ut)}},[ue]);const de=v.useMemo(()=>({color:"white",fontFamily:"sans-serif",fontSize:14,maxWidth:fe===null?void 0:fe,overflow:"hidden",textOverflow:"ellipsis"}),[fe]),ne=v.useMemo(()=>{if(k===!0)return[.5,.8,1,1.2,1.5,1.8,2,2.5,3];if(Array.isArray(k)){for(const ke of k){if(typeof ke!="number")throw new Error("Every item in showPlaybackRateControl must be a number");if(ke<=0)throw new Error("Every item in showPlaybackRateControl must be positive")}return k}return null},[k]),Fe=v.useRef(null),Ge=v.useRef(null),Re=v.useCallback(ke=>{(ke.target===Fe.current||ke.target===Ge.current)&&N?.(ke)},[N]),xe=v.useCallback(ke=>{(ke.target===Fe.current||ke.target===Ge.current)&&W?.(ke)},[W]);return w.jsxs("div",{ref:Fe,style:se,onPointerDown:Re,onDoubleClick:xe,children:[w.jsxs("div",{ref:Ge,style:kI,children:[w.jsxs("div",{style:II,children:[w.jsx("button",{ref:U,type:"button",style:Uh,onClick:n.playing?n.pause:n.play,"aria-label":n.playing?"Pause video":"Play video",title:n.playing?"Pause video":"Play video",children:x===null?w.jsx(pv,{buffering:M,playing:n.playing}):x({playing:n.playing,isBuffering:M})??w.jsx(pv,{buffering:M,playing:n.playing})}),i?w.jsxs(w.Fragment,{children:[w.jsx("div",{style:hc}),w.jsx(iI,{renderMuteButton:R,renderVolumeSlider:X,displayVerticalVolumeSlider:Q})]}):null,w.jsx("div",{style:hc}),w.jsxs("div",{style:de,children:[yv(K/t)," / ",yv(r/t)]}),w.jsx("div",{style:hc})]}),w.jsx("div",{style:MI}),ne&&b&&w.jsx(mI,{canvasSize:b,playbackRates:ne}),ne&&$&&a?w.jsx("div",{style:hc}):null,w.jsx("div",{style:OI,children:$&&a?w.jsx("button",{type:"button","aria-label":e?"Exit fullscreen":"Enter Fullscreen",title:e?"Exit fullscreen":"Enter Fullscreen",style:Uh,onClick:e?c:s,children:S===null?w.jsx(W5,{isFullscreen:e}):S({isFullscreen:e})}):null})]}),w.jsx("div",{style:AI}),w.jsx(wI,{onSeekEnd:h,onSeekStart:d,durationInFrames:r,inFrame:g,outFrame:p})]})},DI={display:"flex",justifyContent:"center",alignItems:"center",flex:1,height:"100%",width:"100%"};class bv extends v.Component{state={hasError:null};static getDerivedStateFromError(e){return{hasError:e}}componentDidCatch(e){this.props.onError(e)}render(){return this.state.hasError?w.jsx("div",{style:DI,children:this.props.errorFallback({error:this.state.hasError})}):this.props.children}}var Xh="__remotion-player",wv=typeof document>"u",jI=r=>{let e=!1;return{promise:new Promise((n,i)=>{r.then(s=>{if(e){i({isCanceled:e,value:s});return}n(s)}).catch(s=>{i({isCanceled:e,error:s})})}),cancel:()=>{e=!0}}},FI=r=>new Promise(e=>setTimeout(e,r)),LI=()=>{const r=v.useRef([]),e=v.useCallback(s=>{r.current=[...r.current,s]},[]),t=v.useCallback(s=>{r.current=r.current.filter(a=>a!==s)},[]),n=v.useCallback(()=>r.current.map(s=>s.cancel()),[]);return v.useMemo(()=>({appendPendingPromise:e,removePendingPromise:t,clearPendingPromises:n}),[e,n,t])},NI=(r,e,t)=>{const n=LI(),i=v.useCallback(async u=>{if(u instanceof PointerEvent?u.pointerType==="touch":u.nativeEvent.pointerType==="touch"){r(u);return}n.clearPendingPromises();const h=jI(FI(200));n.appendPendingPromise(h);try{await h.promise,n.removePendingPromise(h),r(u)}catch(d){const g=d;if(n.removePendingPromise(h),!g.isCanceled)throw g.error}},[n,r]),s=v.useCallback(()=>{document.addEventListener("pointerup",u=>{i(u)},{once:!0})},[i]),a=v.useCallback(()=>{n.clearPendingPromises(),e()},[n,e]);return v.useMemo(()=>t?{handlePointerDown:s,handleDoubleClick:a}:{handlePointerDown:r,handleDoubleClick:()=>{}},[t,a,s,r])},Gh=v.version.split(".")[0];if(Gh==="0")throw new Error(`Version ${Gh} of "react" is not supported by Remotion`);var RI=parseInt(Gh,10)>=18,VI=({controls:r,style:e,loop:t,autoPlay:n,allowFullscreen:i,inputProps:s,clickToPlay:a,showVolumeControls:c,doubleClickToFullscreen:u,spaceKeyToPlayOrPause:h,errorFallback:d,playbackRate:g,renderLoading:p,renderPoster:y,className:b,moveToBeginningWhenEnded:x,showPosterWhenUnplayed:S,showPosterWhenEnded:T,showPosterWhenPaused:k,showPosterWhenBuffering:I,inFrame:M,outFrame:F,initiallyShowControls:N,renderFullscreen:W,renderPlayPauseButton:R,renderMuteButton:X,renderVolumeSlider:U,alwaysShowControls:K,showPlaybackRateControl:$,posterFillMode:G,bufferStateDelayInMilliseconds:re,hideControlsWhenPointerDoesntMove:fe,overflowVisible:Q,browserMediaControlsBehavior:ue},oe)=>{const se=_e.useUnsafeVideoConfig(),de=_e.useVideo(),ne=v.useRef(null),Fe=Hh(ne,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!1}),[Ge,Re]=v.useState(!1),[xe,ke]=v.useState(n),[ut,or]=v.useState(()=>!1),[Rt,Mt]=v.useState(!1),ar=v.useMemo(()=>typeof document>"u"?!1:!!(document.fullscreenEnabled||document.webkitFullscreenEnabled),[]),pe=uc();tI({loop:t,playbackRate:g,moveToBeginningWhenEnded:x,inFrame:M,outFrame:F,frameRef:pe.remotionInternal_currentFrameRef,browserMediaControlsBehavior:ue}),v.useEffect(()=>{Ge&&!pe.playing&&(Re(!1),pe.play())},[Ge,pe]),v.useEffect(()=>{const{current:ze}=ne;if(!ze)return;const Be=()=>{const Sr=document.fullscreenElement===ze||document.webkitFullscreenElement===ze;or(Sr)};return document.addEventListener("fullscreenchange",Be),document.addEventListener("webkitfullscreenchange",Be),()=>{document.removeEventListener("fullscreenchange",Be),document.removeEventListener("webkitfullscreenchange",Be)}},[]);const wr=v.useCallback(ze=>{pe.isPlaying()?pe.pause():pe.play(ze)},[pe]),rt=v.useCallback(()=>{if(!i)throw new Error("allowFullscreen is false");if(!ar)throw new Error("Browser doesnt support fullscreen");if(!ne.current)throw new Error("No player ref found");ne.current.webkitRequestFullScreen?ne.current.webkitRequestFullScreen():ne.current.requestFullscreen()},[i,ar]),jt=v.useCallback(()=>{document.webkitExitFullscreen?document.webkitExitFullscreen():document.exitFullscreen()},[]);v.useEffect(()=>{const{current:ze}=ne;if(!ze)return;const Be=()=>{const Sr=document.webkitFullscreenElement??document.fullscreenElement;Sr&&Sr===ne.current?pe.emitter.dispatchFullscreenChange({isFullscreen:!0}):pe.emitter.dispatchFullscreenChange({isFullscreen:!1})};return ze.addEventListener("webkitfullscreenchange",Be),ze.addEventListener("fullscreenchange",Be),()=>{ze.removeEventListener("webkitfullscreenchange",Be),ze.removeEventListener("fullscreenchange",Be)}},[pe.emitter]);const di=se?.durationInFrames??1,Qe=v.useMemo(()=>!se||!Fe?null:av({canvasSize:Fe,compositionHeight:se.height,compositionWidth:se.width,previewSize:"auto"}),[Fe,se]),Ot=Qe?.scale??1,Fn=v.useRef(!1);v.useEffect(()=>{if(!Fn.current){Fn.current=!0;return}pe.emitter.dispatchScaleChange(Ot)},[pe.emitter,Ot]);const{setMediaVolume:_r,setMediaMuted:P}=v.useContext(_e.SetMediaVolumeContext),{mediaMuted:le,mediaVolume:ce}=v.useContext(_e.MediaVolumeContext);v.useEffect(()=>{pe.emitter.dispatchVolumeChange(ce)},[pe.emitter,ce]);const Oe=le||ce===0;v.useEffect(()=>{pe.emitter.dispatchMuteChange({isMuted:Oe})},[pe.emitter,Oe]);const[Ke,$e]=v.useState(!1);v.useEffect(()=>{let ze=null,Be=!1;const Sr=()=>{Be=!1,requestAnimationFrame(()=>{re===0?$e(!0):ze=setTimeout(()=>{Be||$e(!0)},re)})},vn=()=>{requestAnimationFrame(()=>{Be=!0,$e(!1),ze&&clearTimeout(ze)})};return pe.emitter.addEventListener("waiting",Sr),pe.emitter.addEventListener("resume",vn),()=>{pe.emitter.removeEventListener("waiting",Sr),pe.emitter.removeEventListener("resume",vn),$e(!1),ze&&clearTimeout(ze),Be=!0}},[re,pe.emitter]),v.useImperativeHandle(oe,()=>{const ze={play:pe.play,pause:()=>{Re(!1),pe.pause()},toggle:wr,getContainerNode:()=>ne.current,getCurrentFrame:pe.getCurrentFrame,isPlaying:pe.isPlaying,seekTo:Be=>{const Sr=di-1,vn=Math.max(0,Math.min(Sr,Be));pe.isPlaying()&&(Re(vn!==Sr||t),pe.pause()),vn===Sr&&!t&&pe.emitter.dispatchEnded(),pe.seek(vn)},isFullscreen:()=>{const{current:Be}=ne;return Be?document.fullscreenElement===Be||document.webkitFullscreenElement===Be:!1},requestFullscreen:rt,exitFullscreen:jt,getVolume:()=>le?0:ce,setVolume:Be=>{if(typeof Be!="number")throw new TypeError(`setVolume() takes a number, got value of type ${typeof Be}`);if(isNaN(Be))throw new TypeError("setVolume() got a number that is NaN. Volume must be between 0 and 1.");if(Be<0||Be>1)throw new TypeError(`setVolume() got a number that is out of range. Must be between 0 and 1, got ${typeof Be}`);_r(Be)},isMuted:()=>Oe,mute:()=>{P(!0)},unmute:()=>{P(!1)},getScale:()=>Ot,pauseAndReturnToPlayStart:()=>{pe.pauseAndReturnToPlayStart()}};return Object.assign(pe.emitter,ze)},[di,jt,t,le,Oe,ce,pe,rt,P,_r,wr,Ot]);const be=de?de.component:null,nt=v.useMemo(()=>cv({canvasSize:Fe,config:se,style:e,overflowVisible:Q,layout:Qe}),[Fe,se,Qe,Q,e]),cr=v.useMemo(()=>uv({config:se,layout:Qe,scale:Ot,overflowVisible:Q}),[se,Qe,Q,Ot]),wt=v.useMemo(()=>lv({canvasSize:Fe,config:se,layout:Qe,scale:Ot,overflowVisible:Q}),[Fe,se,Qe,Q,Ot]),xr=v.useCallback(ze=>{pe.pause(),pe.emitter.dispatchError(ze)},[pe]),tn=v.useCallback(ze=>{ze.stopPropagation(),rt()},[rt]),lr=v.useCallback(ze=>{ze.stopPropagation(),jt()},[jt]),mn=v.useCallback(ze=>{(ze instanceof MouseEvent?ze.button===2:ze.nativeEvent.button)||wr(ze)},[wr]),Qt=v.useCallback(()=>{Mt(!0)},[]),fa=v.useCallback(()=>{Mt(!1)},[]),ga=v.useCallback(()=>{ut?jt():rt()},[jt,ut,rt]),{handlePointerDown:qs,handleDoubleClick:Ks}=NI(mn,ga,u&&i&&ar);v.useEffect(()=>{xe&&(pe.play(),ke(!1))},[xe,pe]);const Mf=v.useMemo(()=>p?p({height:nt.height,width:nt.width,isBuffering:Ke}):null,[nt.height,nt.width,p,Ke]),El=v.useMemo(()=>({type:"scale",scale:Ot}),[Ot]);if(!se)return null;const ts=y?y({height:G==="player-size"?nt.height:se.height,width:G==="player-size"?nt.width:se.width,isBuffering:Ke}):null;if(ts===void 0)throw new TypeError("renderPoster() must return a React element, but undefined was returned");const kl=ts&&[k&&!pe.isPlaying()&&!Rt,T&&pe.isLastFrame&&!pe.isPlaying(),S&&!pe.hasPlayed&&!pe.isPlaying(),I&&Ke&&pe.isPlaying()].some(Boolean),{left:Mw,top:Ow,width:Pw,height:Of,...Pf}=cr,Il=w.jsxs(w.Fragment,{children:[w.jsx("div",{style:cr,onPointerDown:a?qs:void 0,onDoubleClick:u?Ks:void 0,children:w.jsxs("div",{style:wt,className:Xh,children:[be?w.jsx(bv,{onError:xr,errorFallback:d,children:w.jsx(_e.CurrentScaleContext.Provider,{value:El,children:w.jsx(be,{...de?.props??{},...s??{}})})}):null,kl&&G==="composition-size"?w.jsx("div",{style:{...Pf,width:se.width,height:se.height},onPointerDown:a?qs:void 0,onDoubleClick:u?Ks:void 0,children:ts}):null]})}),kl&&G==="player-size"?w.jsx("div",{style:cr,onPointerDown:a?qs:void 0,onDoubleClick:u?Ks:void 0,children:ts}):null,r?w.jsx(PI,{fps:se.fps,durationInFrames:se.durationInFrames,player:pe,containerRef:ne,onFullscreenButtonClick:tn,isFullscreen:ut,allowFullscreen:i,showVolumeControls:c,onExitFullscreenButtonClick:lr,spaceKeyToPlayOrPause:h,onSeekEnd:fa,onSeekStart:Qt,inFrame:M,outFrame:F,initiallyShowControls:N,canvasSize:Fe,renderFullscreenButton:W,renderPlayPauseButton:R,alwaysShowControls:K,showPlaybackRateControl:$,buffering:Ke,hideControlsWhenPointerDoesntMove:fe,onDoubleClick:u?Ks:void 0,onPointerDown:a?qs:void 0,renderMuteButton:X,renderVolumeSlider:U}):null]});return wv&&!RI?w.jsx("div",{ref:ne,style:nt,className:b,children:Il}):w.jsx("div",{ref:ne,style:nt,className:b,children:w.jsx(v.Suspense,{fallback:Mf,children:Il})})},BI=v.forwardRef(VI),_v="remotion.volumePreference",zI=r=>{if(!(typeof window>"u"))try{window.localStorage.setItem(_v,String(r))}catch(e){console.log("Could not persist volume",e)}},WI=()=>{if(typeof window>"u")return 1;try{const r=window.localStorage.getItem(_v);return r?Number(r):1}catch{return 1}},qh="player-comp",xv=({children:r,timelineContext:e,fps:t,compositionHeight:n,compositionWidth:i,durationInFrames:s,component:a,numberOfSharedAudioTags:c,initiallyMuted:u})=>{const h=v.useMemo(()=>({compositions:[{component:a,durationInFrames:s,height:n,width:i,fps:t,id:qh,nonce:777,folderName:null,parentFolderName:null,schema:null,calculateMetadata:null}],folders:[],registerFolder:()=>{},unregisterFolder:()=>{},registerComposition:()=>{},unregisterComposition:()=>{},currentCompositionMetadata:null,setCurrentCompositionMetadata:()=>{},canvasContent:{type:"composition",compositionId:"player-comp"},setCanvasContent:()=>{},updateCompositionDefaultProps:()=>{}}),[a,s,n,i,t]),[d,g]=v.useState(()=>u),[p,y]=v.useState(()=>WI()),b=v.useMemo(()=>({mediaMuted:d,mediaVolume:p}),[d,p]),x=v.useCallback(T=>{y(T),zI(T)},[]),S=v.useMemo(()=>({setMediaMuted:g,setMediaVolume:x}),[x]);return w.jsx(_e.CanUseRemotionHooksProvider,{children:w.jsx(_e.Timeline.TimelineContext.Provider,{value:e,children:w.jsx(_e.CompositionManager.Provider,{value:h,children:w.jsx(_e.ResolveCompositionConfig,{children:w.jsx(_e.PrefetchProvider,{children:w.jsx(_e.DurationsContextProvider,{children:w.jsx(_e.MediaVolumeContext.Provider,{value:b,children:w.jsx(_e.SetMediaVolumeContext.Provider,{value:S,children:w.jsx(_e.SharedAudioContextProvider,{numberOfAudioTags:c,component:a,children:w.jsx(_e.BufferingProvider,{children:r})})})})})})})})})})},Sv=(r,e)=>{if(typeof r>"u"||r===null)return r??null;if(typeof r!="number")throw new TypeError(`"${e}" must be a number, but is ${JSON.stringify(r)}`);if(Number.isNaN(r))throw new TypeError(`"${e}" must not be NaN, but is ${JSON.stringify(r)}`);if(!Number.isFinite(r))throw new TypeError(`"${e}" must be finite, but is ${JSON.stringify(r)}`);if(r%1!==0)throw new TypeError(`"${e}" must be an integer, but is ${JSON.stringify(r)}`);return r},HI=({inFrame:r,durationInFrames:e,outFrame:t})=>{const n=Sv(r,"inFrame"),i=Sv(t,"outFrame");if(!(n===null&&i===null)){if(n!==null&&n>e-1)throw new Error("inFrame must be less than (durationInFrames - 1), but is "+n);if(i!==null&&i>e-1)throw new Error("outFrame must be less than (durationInFrames - 1), but is "+i);if(n!==null&&n<0)throw new Error("inFrame must be greater than 0, but is "+n);if(i!==null&&i<=0)throw new Error(`outFrame must be greater than 0, but is ${i}. If you want to render a single frame, use <Thumbnail /> instead.`);if(i!==null&&n!==null&&i<=n)throw new Error("outFrame must be greater than inFrame, but is "+i+" <= "+n)}},UI=({initialFrame:r,durationInFrames:e})=>{if(typeof e!="number")throw new Error(`\`durationInFrames\` must be a number, but is ${JSON.stringify(e)}`);if(!(typeof r>"u")){if(typeof r!="number")throw new Error(`\`initialFrame\` must be a number, but is ${JSON.stringify(r)}`);if(Number.isNaN(r))throw new Error("`initialFrame` must be a number, but is NaN");if(!Number.isFinite(r))throw new Error("`initialFrame` must be a number, but is Infinity");if(r%1!==0)throw new Error(`\`initialFrame\` must be an integer, but is ${JSON.stringify(r)}`);if(r>e-1)throw new Error(`\`initialFrame\` must be less or equal than \`durationInFrames - 1\`, but is ${JSON.stringify(r)}`)}},$I=r=>{if(r!==void 0){if(r>4)throw new Error(`The highest possible playback rate is 4. You passed: ${r}`);if(r<-4)throw new Error(`The lowest possible playback rate is -4. You passed: ${r}`);if(r===0)throw new Error("A playback rate of 0 is not supported.")}},YI=lc.validateFps,Cv=lc.validateDimension,XI=lc.validateDurationInFrames,GI=lc.validateDefaultAndInputProps,qI=r=>"component"in r?r.component:null,KI=({durationInFrames:r,compositionHeight:e,compositionWidth:t,fps:n,inputProps:i,style:s,controls:a=!1,loop:c=!1,autoPlay:u=!1,showVolumeControls:h=!0,allowFullscreen:d=!0,clickToPlay:g,doubleClickToFullscreen:p=!1,spaceKeyToPlayOrPause:y=!0,moveToBeginningWhenEnded:b=!0,numberOfSharedAudioTags:x=5,errorFallback:S=()=>"",playbackRate:T=1,renderLoading:k,className:I,showPosterWhenUnplayed:M,showPosterWhenEnded:F,showPosterWhenPaused:N,showPosterWhenBuffering:W,initialFrame:R,renderPoster:X,inFrame:U,outFrame:K,initiallyShowControls:$,renderFullscreenButton:G,renderPlayPauseButton:re,renderVolumeSlider:fe,alwaysShowControls:Q=!1,initiallyMuted:ue=!1,showPlaybackRateControl:oe=!1,posterFillMode:se="player-size",bufferStateDelayInMilliseconds:de,hideControlsWhenPointerDoesntMove:ne=!0,overflowVisible:Fe=!1,renderMuteButton:Ge,browserMediaControlsBehavior:Re,...xe},ke)=>{if(typeof window<"u"&&v.useLayoutEffect(()=>{window.remotion_isPlayer=!0},[]),xe.defaultProps!==void 0)throw new Error("The <Player /> component does not accept `defaultProps`, but some were passed. Use `inputProps` instead.");const ut=qI(xe);if(ut?.type===q0)throw new TypeError("'component' should not be an instance of <Composition/>. Pass the React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.");if(ut===q0)throw new TypeError("'component' must not be the 'Composition' component. Pass your own React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.");const or=_e.useLazyComponent(xe);UI({initialFrame:R,durationInFrames:r});const[Rt,Mt]=v.useState(()=>({[qh]:R??0})),[ar,pe]=v.useState(!1),[wr]=v.useState("player-comp"),rt=v.useRef(null),jt=v.useRef([]),di=v.useRef(!1),[Qe,Ot]=v.useState(T);if(typeof e!="number")throw new TypeError(`'compositionHeight' must be a number but got '${typeof e}' instead`);if(typeof t!="number")throw new TypeError(`'compositionWidth' must be a number but got '${typeof t}' instead`);if(Cv(e,"compositionHeight","of the <Player /> component"),Cv(t,"compositionWidth","of the <Player /> component"),XI(r,{component:"of the <Player/> component",allowFloats:!1}),YI(n,"as a prop of the <Player/> component",!1),GI(i,"inputProps",null),HI({durationInFrames:r,inFrame:U,outFrame:K}),typeof a!="boolean"&&typeof a<"u")throw new TypeError(`'controls' must be a boolean or undefined but got '${typeof a}' instead`);if(typeof u!="boolean"&&typeof u<"u")throw new TypeError(`'autoPlay' must be a boolean or undefined but got '${typeof u}' instead`);if(typeof c!="boolean"&&typeof c<"u")throw new TypeError(`'loop' must be a boolean or undefined but got '${typeof c}' instead`);if(typeof p!="boolean"&&typeof p<"u")throw new TypeError(`'doubleClickToFullscreen' must be a boolean or undefined but got '${typeof p}' instead`);if(typeof h!="boolean"&&typeof h<"u")throw new TypeError(`'showVolumeControls' must be a boolean or undefined but got '${typeof h}' instead`);if(typeof d!="boolean"&&typeof d<"u")throw new TypeError(`'allowFullscreen' must be a boolean or undefined but got '${typeof d}' instead`);if(typeof g!="boolean"&&typeof g<"u")throw new TypeError(`'clickToPlay' must be a boolean or undefined but got '${typeof g}' instead`);if(typeof y!="boolean"&&typeof y<"u")throw new TypeError(`'spaceKeyToPlayOrPause' must be a boolean or undefined but got '${typeof y}' instead`);if(typeof x!="number"||x%1!==0||!Number.isFinite(x)||Number.isNaN(x)||x<0)throw new TypeError(`'numberOfSharedAudioTags' must be an integer but got '${x}' instead`);$I(Qe),v.useEffect(()=>{Ot(T)},[T]),v.useImperativeHandle(ke,()=>rt.current,[]);const Fn=v.useMemo(()=>({frame:Rt,playing:ar,rootId:wr,playbackRate:Qe,imperativePlaying:di,setPlaybackRate:ce=>{Ot(ce)},audioAndVideoTags:jt}),[Rt,Qe,ar,wr]),_r=v.useMemo(()=>({setFrame:Mt,setPlaying:pe}),[Mt]);typeof window<"u"&&v.useLayoutEffect(()=>{_e.CSSUtils.injectCSS(_e.CSSUtils.makeDefaultPreviewCSS(`.${Xh}`,"#fff"))},[]);const P=v.useMemo(()=>i??{},[i]),le=v.useMemo(()=>Re??{mode:"prevent-media-session"},[Re]);return w.jsx(_e.IsPlayerContextProvider,{children:w.jsx(xv,{timelineContext:Fn,component:or,compositionHeight:e,compositionWidth:t,durationInFrames:r,fps:n,numberOfSharedAudioTags:x,initiallyMuted:ue,children:w.jsx(_e.Timeline.SetTimelineContext.Provider,{value:_r,children:w.jsx(Z5,{currentPlaybackRate:Qe,children:w.jsx(BI,{ref:rt,posterFillMode:se,renderLoading:k,autoPlay:!!u,loop:!!c,controls:!!a,errorFallback:S,style:s,inputProps:P,allowFullscreen:!!d,moveToBeginningWhenEnded:!!b,clickToPlay:typeof g=="boolean"?g:!!a,showVolumeControls:!!h,doubleClickToFullscreen:!!p,spaceKeyToPlayOrPause:!!y,playbackRate:Qe,className:I??void 0,showPosterWhenUnplayed:!!M,showPosterWhenEnded:!!F,showPosterWhenPaused:!!N,showPosterWhenBuffering:!!W,renderPoster:X,inFrame:U??null,outFrame:K??null,initiallyShowControls:$??!0,renderFullscreen:G??null,renderPlayPauseButton:re??null,renderMuteButton:Ge??null,renderVolumeSlider:fe??null,alwaysShowControls:Q,showPlaybackRateControl:oe,bufferStateDelayInMilliseconds:de??300,hideControlsWhenPointerDoesntMove:ne,overflowVisible:Fe,browserMediaControlsBehavior:le})})})})})},ZI=v.forwardRef,JI=ZI(KI),QI=()=>{const r=v.useContext(dv);if(!r)throw new TypeError("Expected Player event emitter context");return v.useMemo(()=>({emitter:r}),[r])},Kh=v.version.split(".")[0];if(Kh==="0")throw new Error(`Version ${Kh} of "react" is not supported by Remotion`);var eA=parseInt(Kh,10)>=18,tA=({style:r,inputProps:e,errorFallback:t,renderLoading:n,className:i,overflowVisible:s},a)=>{const c=_e.useUnsafeVideoConfig(),u=_e.useVideo(),h=v.useRef(null),d=Hh(h,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!1}),g=v.useMemo(()=>!c||!d?null:av({canvasSize:d,compositionHeight:c.height,compositionWidth:c.width,previewSize:"auto"}),[d,c]),p=g?.scale??1,y=QI();fv(y.emitter),v.useImperativeHandle(a,()=>{const N={getContainerNode:()=>h.current,getScale:()=>p};return Object.assign(y.emitter,N)},[p,y.emitter]);const b=u?u.component:null,x=v.useMemo(()=>cv({config:c,style:r,canvasSize:d,overflowVisible:s,layout:g}),[d,c,g,s,r]),S=v.useMemo(()=>uv({config:c,layout:g,scale:p,overflowVisible:s}),[c,g,s,p]),T=v.useMemo(()=>lv({canvasSize:d,config:c,layout:g,scale:p,overflowVisible:s}),[d,c,g,s,p]),k=v.useCallback(N=>{y.emitter.dispatchError(N)},[y.emitter]),I=v.useMemo(()=>n?n({height:x.height,width:x.width,isBuffering:!1}):null,[x.height,x.width,n]),M=v.useMemo(()=>({type:"scale",scale:p}),[p]);if(!c)return null;const F=w.jsx("div",{style:S,children:w.jsx("div",{style:T,className:Xh,children:b?w.jsx(bv,{onError:k,errorFallback:t,children:w.jsx(_e.CurrentScaleContext.Provider,{value:M,children:w.jsx(b,{...u?.props??{},...e??{}})})}):null})});return wv&&!eA?w.jsx("div",{ref:h,style:x,className:i,children:F}):w.jsx("div",{ref:h,style:x,className:i,children:w.jsx(v.Suspense,{fallback:I,children:F})})},rA=v.forwardRef(tA),nA=({frameToDisplay:r,style:e,inputProps:t,compositionHeight:n,compositionWidth:i,durationInFrames:s,fps:a,className:c,errorFallback:u=()=>"",renderLoading:h,overflowVisible:d=!1,...g},p)=>{typeof window<"u"&&v.useLayoutEffect(()=>{window.remotion_isPlayer=!0},[]);const[y]=v.useState(()=>String(Ii(null))),b=v.useRef(null),x=v.useMemo(()=>({playing:!1,frame:{[qh]:r},rootId:y,imperativePlaying:{current:!1},playbackRate:1,setPlaybackRate:()=>{throw new Error("thumbnail")},audioAndVideoTags:{current:[]}}),[r,y]);v.useImperativeHandle(p,()=>b.current,[]);const S=_e.useLazyComponent(g),[T]=v.useState(()=>new K5),k=v.useMemo(()=>t??{},[t]);return w.jsx(_e.IsPlayerContextProvider,{children:w.jsx(xv,{timelineContext:x,component:S,compositionHeight:n,compositionWidth:i,durationInFrames:s,fps:a,numberOfSharedAudioTags:0,initiallyMuted:!0,children:w.jsx(dv.Provider,{value:T,children:w.jsx(rA,{ref:b,className:c,errorFallback:u,inputProps:k,renderLoading:h,style:e,overflowVisible:d})})})})},iA=v.forwardRef;iA(nA);const dc=(r,e)=>{const t=r.from/1e3*e,n=r.to/1e3*e-t;return{from:t,durationInFrames:n}},Tv={text:(r,e)=>{const{fps:t,height:n,width:i}=e,{from:s,durationInFrames:a}=dc(r.display,t);return w.jsx(un,{from:s,durationInFrames:a,"data-track-item":"transition-element",style:{position:"absolute",width:r.details.width??300,height:r.details.height??400,transform:r.details.transform??"none",fontSize:r.details.fontSize||"16px",textAlign:r.details.textAlign||"left",top:r.details.top??300,left:r.details.left??600,color:r.details.color||"#000000",backgroundColor:r.details.backgroundColor||"transparent",border:r.details.border??"none",opacity:r.details.opacity??100/100,fontFamily:r.details.fontFamily||"Arial",textDecoration:r.details.textDecoration||"none",fontWeight:r.details.fontWeight||"normal",lineHeight:r.details.lineHeight||"normal",letterSpacing:r.details.letterSpacing||"normal",wordSpacing:r.details.wordSpacing||"normal",wordWrap:r.details.wordWrap||"normal",wordBreak:r.details.wordBreak||"normal",pointerEvents:"auto"},children:w.jsx("div",{children:r.details.text})},r.id)},image:(r,e)=>{const{fps:t}=e,{from:n,durationInFrames:i}=dc(r.display,t);return w.jsx(un,{from:n,durationInFrames:i,style:{width:r.details.width??"100%",height:r.details.height??"auto",transform:r.details.transform??"none",opacity:(r.details.opacity??100)/100||1,border:r.details.border??"none",borderRadius:r.details.borderRadius??"0",boxShadow:r.details.boxShadow??"none",filter:r.details.filter||"none",top:r.details.top??0,left:r.details.left??0},children:w.jsx(To,{style:{pointerEvents:"none"},children:w.jsx(Z0,{style:{pointerEvents:"none"},"data-id":r.id,src:r.details.src})})},r.id)},video:(r,e)=>{const{fps:t}=e,{from:n,durationInFrames:i}=dc(r.display,t),s=r.trim,a=r.details.crop||{x:0,y:0,width:r.details.width,height:r.details.height};return s?w.jsx(un,{premountFor:30*5,from:n,durationInFrames:i,style:{width:a.width||"100%",height:a.height||"auto",transform:r.details.transform??"none",opacity:(r.details.opacity??100)/100||1,border:r.details.border??"none",borderRadius:r.details.borderRadius??"0",boxShadow:r.details.boxShadow??"none",top:r.details.top??0,left:r.details.left??0,overflow:"hidden"},children:w.jsx(To,{style:{pointerEvents:"none",width:r.details.width,height:r.details.height,top:-a.y,left:-a.x},children:w.jsx(nv,{startFrom:s.from/1e3*t,endAt:s.to/1e3*t,src:r.details.src,volume:(r.details.volume??100)/100,style:{pointerEvents:"none",width:r.details.width,height:r.details.height}})})},r.id):w.jsx(w.Fragment,{})},audio:(r,e)=>{const{fps:t}=e,{from:n,durationInFrames:i}=dc(r.display,t),s=r.trim;return s?w.jsx(un,{className:`moonshine-scene-item id-${r.id} moonshine-scene-item-type-${r.type}`,from:n,durationInFrames:i,style:{userSelect:"none",pointerEvents:"none"},children:w.jsx(To,{children:w.jsx(Ao,{startFrom:s.from/1e3*t,endAt:s.to/1e3*t,src:r.details.src,volume:(r.details.volume??100)/100})})},r.id):w.jsx(w.Fragment,{})}};var fc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */fc.exports,function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",g=1,p=2,y=4,b=1,x=2,S=1,T=2,k=4,I=8,M=16,F=32,N=64,W=128,R=256,X=512,U=30,K="...",$=800,G=16,re=1,fe=2,Q=3,ue=1/0,oe=9007199254740991,se=17976931348623157e292,de=NaN,ne=4294967295,Fe=ne-1,Ge=ne>>>1,Re=[["ary",W],["bind",S],["bindKey",T],["curry",I],["curryRight",M],["flip",X],["partial",F],["partialRight",N],["rearg",R]],xe="[object Arguments]",ke="[object Array]",ut="[object AsyncFunction]",or="[object Boolean]",Rt="[object Date]",Mt="[object DOMException]",ar="[object Error]",pe="[object Function]",wr="[object GeneratorFunction]",rt="[object Map]",jt="[object Number]",di="[object Null]",Qe="[object Object]",Ot="[object Promise]",Fn="[object Proxy]",_r="[object RegExp]",P="[object Set]",le="[object String]",ce="[object Symbol]",Oe="[object Undefined]",Ke="[object WeakMap]",$e="[object WeakSet]",be="[object ArrayBuffer]",nt="[object DataView]",cr="[object Float32Array]",wt="[object Float64Array]",xr="[object Int8Array]",tn="[object Int16Array]",lr="[object Int32Array]",mn="[object Uint8Array]",Qt="[object Uint8ClampedArray]",fa="[object Uint16Array]",ga="[object Uint32Array]",qs=/\b__p \+= '';/g,Ks=/\b(__p \+=) '' \+/g,Mf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,El=/&(?:amp|lt|gt|quot|#39);/g,ts=/[&<>"']/g,kl=RegExp(El.source),Mw=RegExp(ts.source),Ow=/<%-([\s\S]+?)%>/g,Pw=/<%([\s\S]+?)%>/g,Of=/<%=([\s\S]+?)%>/g,Pf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Il=/^\w*$/,ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,Sr=RegExp(Be.source),vn=/^\s+/,Dw=/\s/,m3=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,v3=/\{\n\/\* \[wrapped with (.+)\] \*/,y3=/,? & /,b3=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,w3=/[()=,{}\[\]\/\s]/,_3=/\\(\\)?/g,x3=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jw=/\w*$/,S3=/^[-+]0x[0-9a-f]+$/i,C3=/^0b[01]+$/i,T3=/^\[object .+?Constructor\]$/,E3=/^0o[0-7]+$/i,k3=/^(?:0|[1-9]\d*)$/,I3=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Al=/($^)/,A3=/['\n\r\u2028\u2029\\]/g,Ml="\\ud800-\\udfff",M3="\\u0300-\\u036f",O3="\\ufe20-\\ufe2f",P3="\\u20d0-\\u20ff",Fw=M3+O3+P3,Lw="\\u2700-\\u27bf",Nw="a-z\\xdf-\\xf6\\xf8-\\xff",D3="\\xac\\xb1\\xd7\\xf7",j3="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",F3="\\u2000-\\u206f",L3=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rw="A-Z\\xc0-\\xd6\\xd8-\\xde",Vw="\\ufe0e\\ufe0f",Bw=D3+j3+F3+L3,Df="[']",N3="["+Ml+"]",zw="["+Bw+"]",Ol="["+Fw+"]",Ww="\\d+",R3="["+Lw+"]",Hw="["+Nw+"]",Uw="[^"+Ml+Bw+Ww+Lw+Nw+Rw+"]",jf="\\ud83c[\\udffb-\\udfff]",V3="(?:"+Ol+"|"+jf+")",$w="[^"+Ml+"]",Ff="(?:\\ud83c[\\udde6-\\uddff]){2}",Lf="[\\ud800-\\udbff][\\udc00-\\udfff]",Zs="["+Rw+"]",Yw="\\u200d",Xw="(?:"+Hw+"|"+Uw+")",B3="(?:"+Zs+"|"+Uw+")",Gw="(?:"+Df+"(?:d|ll|m|re|s|t|ve))?",qw="(?:"+Df+"(?:D|LL|M|RE|S|T|VE))?",Kw=V3+"?",Zw="["+Vw+"]?",z3="(?:"+Yw+"(?:"+[$w,Ff,Lf].join("|")+")"+Zw+Kw+")*",W3="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",H3="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jw=Zw+Kw+z3,U3="(?:"+[R3,Ff,Lf].join("|")+")"+Jw,$3="(?:"+[$w+Ol+"?",Ol,Ff,Lf,N3].join("|")+")",Y3=RegExp(Df,"g"),X3=RegExp(Ol,"g"),Nf=RegExp(jf+"(?="+jf+")|"+$3+Jw,"g"),G3=RegExp([Zs+"?"+Hw+"+"+Gw+"(?="+[zw,Zs,"$"].join("|")+")",B3+"+"+qw+"(?="+[zw,Zs+Xw,"$"].join("|")+")",Zs+"?"+Xw+"+"+Gw,Zs+"+"+qw,H3,W3,Ww,U3].join("|"),"g"),q3=RegExp("["+Yw+Ml+Fw+Vw+"]"),K3=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Z3=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],J3=-1,it={};it[cr]=it[wt]=it[xr]=it[tn]=it[lr]=it[mn]=it[Qt]=it[fa]=it[ga]=!0,it[xe]=it[ke]=it[be]=it[or]=it[nt]=it[Rt]=it[ar]=it[pe]=it[rt]=it[jt]=it[Qe]=it[_r]=it[P]=it[le]=it[Ke]=!1;var et={};et[xe]=et[ke]=et[be]=et[nt]=et[or]=et[Rt]=et[cr]=et[wt]=et[xr]=et[tn]=et[lr]=et[rt]=et[jt]=et[Qe]=et[_r]=et[P]=et[le]=et[ce]=et[mn]=et[Qt]=et[fa]=et[ga]=!0,et[ar]=et[pe]=et[Ke]=!1;var Q3={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},e6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},t6={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},r6={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},n6=parseFloat,i6=parseInt,Qw=typeof ho=="object"&&ho&&ho.Object===Object&&ho,s6=typeof self=="object"&&self&&self.Object===Object&&self,Vt=Qw||s6||Function("return this")(),Rf=e&&!e.nodeType&&e,rs=Rf&&!0&&r&&!r.nodeType&&r,e_=rs&&rs.exports===Rf,Vf=e_&&Qw.process,Nr=function(){try{var V=rs&&rs.require&&rs.require("util").types;return V||Vf&&Vf.binding&&Vf.binding("util")}catch{}}(),t_=Nr&&Nr.isArrayBuffer,r_=Nr&&Nr.isDate,n_=Nr&&Nr.isMap,i_=Nr&&Nr.isRegExp,s_=Nr&&Nr.isSet,o_=Nr&&Nr.isTypedArray;function Cr(V,q,Y){switch(Y.length){case 0:return V.call(q);case 1:return V.call(q,Y[0]);case 2:return V.call(q,Y[0],Y[1]);case 3:return V.call(q,Y[0],Y[1],Y[2])}return V.apply(q,Y)}function o6(V,q,Y,he){for(var Se=-1,He=V==null?0:V.length;++Se<He;){var Pt=V[Se];q(he,Pt,Y(Pt),V)}return he}function Rr(V,q){for(var Y=-1,he=V==null?0:V.length;++Y<he&&q(V[Y],Y,V)!==!1;);return V}function a6(V,q){for(var Y=V==null?0:V.length;Y--&&q(V[Y],Y,V)!==!1;);return V}function a_(V,q){for(var Y=-1,he=V==null?0:V.length;++Y<he;)if(!q(V[Y],Y,V))return!1;return!0}function fi(V,q){for(var Y=-1,he=V==null?0:V.length,Se=0,He=[];++Y<he;){var Pt=V[Y];q(Pt,Y,V)&&(He[Se++]=Pt)}return He}function Pl(V,q){var Y=V==null?0:V.length;return!!Y&&Js(V,q,0)>-1}function Bf(V,q,Y){for(var he=-1,Se=V==null?0:V.length;++he<Se;)if(Y(q,V[he]))return!0;return!1}function at(V,q){for(var Y=-1,he=V==null?0:V.length,Se=Array(he);++Y<he;)Se[Y]=q(V[Y],Y,V);return Se}function gi(V,q){for(var Y=-1,he=q.length,Se=V.length;++Y<he;)V[Se+Y]=q[Y];return V}function zf(V,q,Y,he){var Se=-1,He=V==null?0:V.length;for(he&&He&&(Y=V[++Se]);++Se<He;)Y=q(Y,V[Se],Se,V);return Y}function c6(V,q,Y,he){var Se=V==null?0:V.length;for(he&&Se&&(Y=V[--Se]);Se--;)Y=q(Y,V[Se],Se,V);return Y}function Wf(V,q){for(var Y=-1,he=V==null?0:V.length;++Y<he;)if(q(V[Y],Y,V))return!0;return!1}var l6=Hf("length");function u6(V){return V.split("")}function h6(V){return V.match(b3)||[]}function c_(V,q,Y){var he;return Y(V,function(Se,He,Pt){if(q(Se,He,Pt))return he=He,!1}),he}function Dl(V,q,Y,he){for(var Se=V.length,He=Y+(he?1:-1);he?He--:++He<Se;)if(q(V[He],He,V))return He;return-1}function Js(V,q,Y){return q===q?S6(V,q,Y):Dl(V,l_,Y)}function d6(V,q,Y,he){for(var Se=Y-1,He=V.length;++Se<He;)if(he(V[Se],q))return Se;return-1}function l_(V){return V!==V}function u_(V,q){var Y=V==null?0:V.length;return Y?$f(V,q)/Y:de}function Hf(V){return function(q){return q==null?t:q[V]}}function Uf(V){return function(q){return V==null?t:V[q]}}function h_(V,q,Y,he,Se){return Se(V,function(He,Pt,Je){Y=he?(he=!1,He):q(Y,He,Pt,Je)}),Y}function f6(V,q){var Y=V.length;for(V.sort(q);Y--;)V[Y]=V[Y].value;return V}function $f(V,q){for(var Y,he=-1,Se=V.length;++he<Se;){var He=q(V[he]);He!==t&&(Y=Y===t?He:Y+He)}return Y}function Yf(V,q){for(var Y=-1,he=Array(V);++Y<V;)he[Y]=q(Y);return he}function g6(V,q){return at(q,function(Y){return[Y,V[Y]]})}function d_(V){return V&&V.slice(0,m_(V)+1).replace(vn,"")}function Tr(V){return function(q){return V(q)}}function Xf(V,q){return at(q,function(Y){return V[Y]})}function pa(V,q){return V.has(q)}function f_(V,q){for(var Y=-1,he=V.length;++Y<he&&Js(q,V[Y],0)>-1;);return Y}function g_(V,q){for(var Y=V.length;Y--&&Js(q,V[Y],0)>-1;);return Y}function p6(V,q){for(var Y=V.length,he=0;Y--;)V[Y]===q&&++he;return he}var m6=Uf(Q3),v6=Uf(e6);function y6(V){return"\\"+r6[V]}function b6(V,q){return V==null?t:V[q]}function Qs(V){return q3.test(V)}function w6(V){return K3.test(V)}function _6(V){for(var q,Y=[];!(q=V.next()).done;)Y.push(q.value);return Y}function Gf(V){var q=-1,Y=Array(V.size);return V.forEach(function(he,Se){Y[++q]=[Se,he]}),Y}function p_(V,q){return function(Y){return V(q(Y))}}function pi(V,q){for(var Y=-1,he=V.length,Se=0,He=[];++Y<he;){var Pt=V[Y];(Pt===q||Pt===d)&&(V[Y]=d,He[Se++]=Y)}return He}function jl(V){var q=-1,Y=Array(V.size);return V.forEach(function(he){Y[++q]=he}),Y}function x6(V){var q=-1,Y=Array(V.size);return V.forEach(function(he){Y[++q]=[he,he]}),Y}function S6(V,q,Y){for(var he=Y-1,Se=V.length;++he<Se;)if(V[he]===q)return he;return-1}function C6(V,q,Y){for(var he=Y+1;he--;)if(V[he]===q)return he;return he}function eo(V){return Qs(V)?E6(V):l6(V)}function rn(V){return Qs(V)?k6(V):u6(V)}function m_(V){for(var q=V.length;q--&&Dw.test(V.charAt(q)););return q}var T6=Uf(t6);function E6(V){for(var q=Nf.lastIndex=0;Nf.test(V);)++q;return q}function k6(V){return V.match(Nf)||[]}function I6(V){return V.match(G3)||[]}var A6=function V(q){q=q==null?Vt:to.defaults(Vt.Object(),q,to.pick(Vt,Z3));var Y=q.Array,he=q.Date,Se=q.Error,He=q.Function,Pt=q.Math,Je=q.Object,qf=q.RegExp,M6=q.String,Vr=q.TypeError,Fl=Y.prototype,O6=He.prototype,ro=Je.prototype,Ll=q["__core-js_shared__"],Nl=O6.toString,qe=ro.hasOwnProperty,P6=0,v_=function(){var o=/[^.]+$/.exec(Ll&&Ll.keys&&Ll.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Rl=ro.toString,D6=Nl.call(Je),j6=Vt._,F6=qf("^"+Nl.call(qe).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=e_?q.Buffer:t,mi=q.Symbol,Bl=q.Uint8Array,y_=Vl?Vl.allocUnsafe:t,zl=p_(Je.getPrototypeOf,Je),b_=Je.create,w_=ro.propertyIsEnumerable,Wl=Fl.splice,__=mi?mi.isConcatSpreadable:t,ma=mi?mi.iterator:t,ns=mi?mi.toStringTag:t,Hl=function(){try{var o=cs(Je,"defineProperty");return o({},"",{}),o}catch{}}(),L6=q.clearTimeout!==Vt.clearTimeout&&q.clearTimeout,N6=he&&he.now!==Vt.Date.now&&he.now,R6=q.setTimeout!==Vt.setTimeout&&q.setTimeout,Ul=Pt.ceil,$l=Pt.floor,Kf=Je.getOwnPropertySymbols,V6=Vl?Vl.isBuffer:t,x_=q.isFinite,B6=Fl.join,z6=p_(Je.keys,Je),Dt=Pt.max,$t=Pt.min,W6=he.now,H6=q.parseInt,S_=Pt.random,U6=Fl.reverse,Zf=cs(q,"DataView"),va=cs(q,"Map"),Jf=cs(q,"Promise"),no=cs(q,"Set"),ya=cs(q,"WeakMap"),ba=cs(Je,"create"),Yl=ya&&new ya,io={},$6=ls(Zf),Y6=ls(va),X6=ls(Jf),G6=ls(no),q6=ls(ya),Xl=mi?mi.prototype:t,wa=Xl?Xl.valueOf:t,C_=Xl?Xl.toString:t;function C(o){if(vt(o)&&!Ce(o)&&!(o instanceof je)){if(o instanceof Br)return o;if(qe.call(o,"__wrapped__"))return Tx(o)}return new Br(o)}var so=function(){function o(){}return function(l){if(!ht(l))return{};if(b_)return b_(l);o.prototype=l;var f=new o;return o.prototype=t,f}}();function Gl(){}function Br(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=t}C.templateSettings={escape:Ow,evaluate:Pw,interpolate:Of,variable:"",imports:{_:C}},C.prototype=Gl.prototype,C.prototype.constructor=C,Br.prototype=so(Gl.prototype),Br.prototype.constructor=Br;function je(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function K6(){var o=new je(this.__wrapped__);return o.__actions__=ur(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=ur(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=ur(this.__views__),o}function Z6(){if(this.__filtered__){var o=new je(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function J6(){var o=this.__wrapped__.value(),l=this.__dir__,f=Ce(o),m=l<0,_=f?o.length:0,E=u7(0,_,this.__views__),O=E.start,D=E.end,B=D-O,Z=m?D:O-1,J=this.__iteratees__,ee=J.length,ae=0,ge=$t(B,this.__takeCount__);if(!f||!m&&_==B&&ge==B)return G_(o,this.__actions__);var ve=[];e:for(;B--&&ae<ge;){Z+=l;for(var Ae=-1,ye=o[Z];++Ae<ee;){var De=J[Ae],Le=De.iteratee,Ir=De.type,rr=Le(ye);if(Ir==fe)ye=rr;else if(!rr){if(Ir==re)continue e;break e}}ve[ae++]=ye}return ve}je.prototype=so(Gl.prototype),je.prototype.constructor=je;function is(o){var l=-1,f=o==null?0:o.length;for(this.clear();++l<f;){var m=o[l];this.set(m[0],m[1])}}function Q6(){this.__data__=ba?ba(null):{},this.size=0}function ej(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function tj(o){var l=this.__data__;if(ba){var f=l[o];return f===u?t:f}return qe.call(l,o)?l[o]:t}function rj(o){var l=this.__data__;return ba?l[o]!==t:qe.call(l,o)}function nj(o,l){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=ba&&l===t?u:l,this}is.prototype.clear=Q6,is.prototype.delete=ej,is.prototype.get=tj,is.prototype.has=rj,is.prototype.set=nj;function Ln(o){var l=-1,f=o==null?0:o.length;for(this.clear();++l<f;){var m=o[l];this.set(m[0],m[1])}}function ij(){this.__data__=[],this.size=0}function sj(o){var l=this.__data__,f=ql(l,o);if(f<0)return!1;var m=l.length-1;return f==m?l.pop():Wl.call(l,f,1),--this.size,!0}function oj(o){var l=this.__data__,f=ql(l,o);return f<0?t:l[f][1]}function aj(o){return ql(this.__data__,o)>-1}function cj(o,l){var f=this.__data__,m=ql(f,o);return m<0?(++this.size,f.push([o,l])):f[m][1]=l,this}Ln.prototype.clear=ij,Ln.prototype.delete=sj,Ln.prototype.get=oj,Ln.prototype.has=aj,Ln.prototype.set=cj;function Nn(o){var l=-1,f=o==null?0:o.length;for(this.clear();++l<f;){var m=o[l];this.set(m[0],m[1])}}function lj(){this.size=0,this.__data__={hash:new is,map:new(va||Ln),string:new is}}function uj(o){var l=au(this,o).delete(o);return this.size-=l?1:0,l}function hj(o){return au(this,o).get(o)}function dj(o){return au(this,o).has(o)}function fj(o,l){var f=au(this,o),m=f.size;return f.set(o,l),this.size+=f.size==m?0:1,this}Nn.prototype.clear=lj,Nn.prototype.delete=uj,Nn.prototype.get=hj,Nn.prototype.has=dj,Nn.prototype.set=fj;function ss(o){var l=-1,f=o==null?0:o.length;for(this.__data__=new Nn;++l<f;)this.add(o[l])}function gj(o){return this.__data__.set(o,u),this}function pj(o){return this.__data__.has(o)}ss.prototype.add=ss.prototype.push=gj,ss.prototype.has=pj;function nn(o){var l=this.__data__=new Ln(o);this.size=l.size}function mj(){this.__data__=new Ln,this.size=0}function vj(o){var l=this.__data__,f=l.delete(o);return this.size=l.size,f}function yj(o){return this.__data__.get(o)}function bj(o){return this.__data__.has(o)}function wj(o,l){var f=this.__data__;if(f instanceof Ln){var m=f.__data__;if(!va||m.length<i-1)return m.push([o,l]),this.size=++f.size,this;f=this.__data__=new Nn(m)}return f.set(o,l),this.size=f.size,this}nn.prototype.clear=mj,nn.prototype.delete=vj,nn.prototype.get=yj,nn.prototype.has=bj,nn.prototype.set=wj;function T_(o,l){var f=Ce(o),m=!f&&us(o),_=!f&&!m&&_i(o),E=!f&&!m&&!_&&lo(o),O=f||m||_||E,D=O?Yf(o.length,M6):[],B=D.length;for(var Z in o)(l||qe.call(o,Z))&&!(O&&(Z=="length"||_&&(Z=="offset"||Z=="parent")||E&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||zn(Z,B)))&&D.push(Z);return D}function E_(o){var l=o.length;return l?o[lg(0,l-1)]:t}function _j(o,l){return cu(ur(o),os(l,0,o.length))}function xj(o){return cu(ur(o))}function Qf(o,l,f){(f!==t&&!sn(o[l],f)||f===t&&!(l in o))&&Rn(o,l,f)}function _a(o,l,f){var m=o[l];(!(qe.call(o,l)&&sn(m,f))||f===t&&!(l in o))&&Rn(o,l,f)}function ql(o,l){for(var f=o.length;f--;)if(sn(o[f][0],l))return f;return-1}function Sj(o,l,f,m){return vi(o,function(_,E,O){l(m,_,f(_),O)}),m}function k_(o,l){return o&&bn(l,Ft(l),o)}function Cj(o,l){return o&&bn(l,dr(l),o)}function Rn(o,l,f){l=="__proto__"&&Hl?Hl(o,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[l]=f}function eg(o,l){for(var f=-1,m=l.length,_=Y(m),E=o==null;++f<m;)_[f]=E?t:jg(o,l[f]);return _}function os(o,l,f){return o===o&&(f!==t&&(o=o<=f?o:f),l!==t&&(o=o>=l?o:l)),o}function zr(o,l,f,m,_,E){var O,D=l&g,B=l&p,Z=l&y;if(f&&(O=_?f(o,m,_,E):f(o)),O!==t)return O;if(!ht(o))return o;var J=Ce(o);if(J){if(O=d7(o),!D)return ur(o,O)}else{var ee=Yt(o),ae=ee==pe||ee==wr;if(_i(o))return Z_(o,D);if(ee==Qe||ee==xe||ae&&!_){if(O=B||ae?{}:mx(o),!D)return B?t7(o,Cj(O,o)):e7(o,k_(O,o))}else{if(!et[ee])return _?o:{};O=f7(o,ee,D)}}E||(E=new nn);var ge=E.get(o);if(ge)return ge;E.set(o,O),$x(o)?o.forEach(function(ye){O.add(zr(ye,l,f,ye,o,E))}):Hx(o)&&o.forEach(function(ye,De){O.set(De,zr(ye,l,f,De,o,E))});var ve=Z?B?wg:bg:B?dr:Ft,Ae=J?t:ve(o);return Rr(Ae||o,function(ye,De){Ae&&(De=ye,ye=o[De]),_a(O,De,zr(ye,l,f,De,o,E))}),O}function Tj(o){var l=Ft(o);return function(f){return I_(f,o,l)}}function I_(o,l,f){var m=f.length;if(o==null)return!m;for(o=Je(o);m--;){var _=f[m],E=l[_],O=o[_];if(O===t&&!(_ in o)||!E(O))return!1}return!0}function A_(o,l,f){if(typeof o!="function")throw new Vr(a);return Ia(function(){o.apply(t,f)},l)}function xa(o,l,f,m){var _=-1,E=Pl,O=!0,D=o.length,B=[],Z=l.length;if(!D)return B;f&&(l=at(l,Tr(f))),m?(E=Bf,O=!1):l.length>=i&&(E=pa,O=!1,l=new ss(l));e:for(;++_<D;){var J=o[_],ee=f==null?J:f(J);if(J=m||J!==0?J:0,O&&ee===ee){for(var ae=Z;ae--;)if(l[ae]===ee)continue e;B.push(J)}else E(l,ee,m)||B.push(J)}return B}var vi=rx(yn),M_=rx(rg,!0);function Ej(o,l){var f=!0;return vi(o,function(m,_,E){return f=!!l(m,_,E),f}),f}function Kl(o,l,f){for(var m=-1,_=o.length;++m<_;){var E=o[m],O=l(E);if(O!=null&&(D===t?O===O&&!kr(O):f(O,D)))var D=O,B=E}return B}function kj(o,l,f,m){var _=o.length;for(f=Ie(f),f<0&&(f=-f>_?0:_+f),m=m===t||m>_?_:Ie(m),m<0&&(m+=_),m=f>m?0:Xx(m);f<m;)o[f++]=l;return o}function O_(o,l){var f=[];return vi(o,function(m,_,E){l(m,_,E)&&f.push(m)}),f}function Bt(o,l,f,m,_){var E=-1,O=o.length;for(f||(f=p7),_||(_=[]);++E<O;){var D=o[E];l>0&&f(D)?l>1?Bt(D,l-1,f,m,_):gi(_,D):m||(_[_.length]=D)}return _}var tg=nx(),P_=nx(!0);function yn(o,l){return o&&tg(o,l,Ft)}function rg(o,l){return o&&P_(o,l,Ft)}function Zl(o,l){return fi(l,function(f){return Wn(o[f])})}function as(o,l){l=bi(l,o);for(var f=0,m=l.length;o!=null&&f<m;)o=o[wn(l[f++])];return f&&f==m?o:t}function D_(o,l,f){var m=l(o);return Ce(o)?m:gi(m,f(o))}function er(o){return o==null?o===t?Oe:di:ns&&ns in Je(o)?l7(o):x7(o)}function ng(o,l){return o>l}function Ij(o,l){return o!=null&&qe.call(o,l)}function Aj(o,l){return o!=null&&l in Je(o)}function Mj(o,l,f){return o>=$t(l,f)&&o<Dt(l,f)}function ig(o,l,f){for(var m=f?Bf:Pl,_=o[0].length,E=o.length,O=E,D=Y(E),B=1/0,Z=[];O--;){var J=o[O];O&&l&&(J=at(J,Tr(l))),B=$t(J.length,B),D[O]=!f&&(l||_>=120&&J.length>=120)?new ss(O&&J):t}J=o[0];var ee=-1,ae=D[0];e:for(;++ee<_&&Z.length<B;){var ge=J[ee],ve=l?l(ge):ge;if(ge=f||ge!==0?ge:0,!(ae?pa(ae,ve):m(Z,ve,f))){for(O=E;--O;){var Ae=D[O];if(!(Ae?pa(Ae,ve):m(o[O],ve,f)))continue e}ae&&ae.push(ve),Z.push(ge)}}return Z}function Oj(o,l,f,m){return yn(o,function(_,E,O){l(m,f(_),E,O)}),m}function Sa(o,l,f){l=bi(l,o),o=wx(o,l);var m=o==null?o:o[wn(Hr(l))];return m==null?t:Cr(m,o,f)}function j_(o){return vt(o)&&er(o)==xe}function Pj(o){return vt(o)&&er(o)==be}function Dj(o){return vt(o)&&er(o)==Rt}function Ca(o,l,f,m,_){return o===l?!0:o==null||l==null||!vt(o)&&!vt(l)?o!==o&&l!==l:jj(o,l,f,m,Ca,_)}function jj(o,l,f,m,_,E){var O=Ce(o),D=Ce(l),B=O?ke:Yt(o),Z=D?ke:Yt(l);B=B==xe?Qe:B,Z=Z==xe?Qe:Z;var J=B==Qe,ee=Z==Qe,ae=B==Z;if(ae&&_i(o)){if(!_i(l))return!1;O=!0,J=!1}if(ae&&!J)return E||(E=new nn),O||lo(o)?fx(o,l,f,m,_,E):a7(o,l,B,f,m,_,E);if(!(f&b)){var ge=J&&qe.call(o,"__wrapped__"),ve=ee&&qe.call(l,"__wrapped__");if(ge||ve){var Ae=ge?o.value():o,ye=ve?l.value():l;return E||(E=new nn),_(Ae,ye,f,m,E)}}return ae?(E||(E=new nn),c7(o,l,f,m,_,E)):!1}function Fj(o){return vt(o)&&Yt(o)==rt}function sg(o,l,f,m){var _=f.length,E=_,O=!m;if(o==null)return!E;for(o=Je(o);_--;){var D=f[_];if(O&&D[2]?D[1]!==o[D[0]]:!(D[0]in o))return!1}for(;++_<E;){D=f[_];var B=D[0],Z=o[B],J=D[1];if(O&&D[2]){if(Z===t&&!(B in o))return!1}else{var ee=new nn;if(m)var ae=m(Z,J,B,o,l,ee);if(!(ae===t?Ca(J,Z,b|x,m,ee):ae))return!1}}return!0}function F_(o){if(!ht(o)||v7(o))return!1;var l=Wn(o)?F6:T3;return l.test(ls(o))}function Lj(o){return vt(o)&&er(o)==_r}function Nj(o){return vt(o)&&Yt(o)==P}function Rj(o){return vt(o)&&gu(o.length)&&!!it[er(o)]}function L_(o){return typeof o=="function"?o:o==null?fr:typeof o=="object"?Ce(o)?V_(o[0],o[1]):R_(o):iS(o)}function og(o){if(!ka(o))return z6(o);var l=[];for(var f in Je(o))qe.call(o,f)&&f!="constructor"&&l.push(f);return l}function Vj(o){if(!ht(o))return _7(o);var l=ka(o),f=[];for(var m in o)m=="constructor"&&(l||!qe.call(o,m))||f.push(m);return f}function ag(o,l){return o<l}function N_(o,l){var f=-1,m=hr(o)?Y(o.length):[];return vi(o,function(_,E,O){m[++f]=l(_,E,O)}),m}function R_(o){var l=xg(o);return l.length==1&&l[0][2]?yx(l[0][0],l[0][1]):function(f){return f===o||sg(f,o,l)}}function V_(o,l){return Cg(o)&&vx(l)?yx(wn(o),l):function(f){var m=jg(f,o);return m===t&&m===l?Fg(f,o):Ca(l,m,b|x)}}function Jl(o,l,f,m,_){o!==l&&tg(l,function(E,O){if(_||(_=new nn),ht(E))Bj(o,l,O,f,Jl,m,_);else{var D=m?m(Eg(o,O),E,O+"",o,l,_):t;D===t&&(D=E),Qf(o,O,D)}},dr)}function Bj(o,l,f,m,_,E,O){var D=Eg(o,f),B=Eg(l,f),Z=O.get(B);if(Z){Qf(o,f,Z);return}var J=E?E(D,B,f+"",o,l,O):t,ee=J===t;if(ee){var ae=Ce(B),ge=!ae&&_i(B),ve=!ae&&!ge&&lo(B);J=B,ae||ge||ve?Ce(D)?J=D:_t(D)?J=ur(D):ge?(ee=!1,J=Z_(B,!0)):ve?(ee=!1,J=J_(B,!0)):J=[]:Aa(B)||us(B)?(J=D,us(D)?J=Gx(D):(!ht(D)||Wn(D))&&(J=mx(B))):ee=!1}ee&&(O.set(B,J),_(J,B,m,E,O),O.delete(B)),Qf(o,f,J)}function B_(o,l){var f=o.length;if(f)return l+=l<0?f:0,zn(l,f)?o[l]:t}function z_(o,l,f){l.length?l=at(l,function(E){return Ce(E)?function(O){return as(O,E.length===1?E[0]:E)}:E}):l=[fr];var m=-1;l=at(l,Tr(me()));var _=N_(o,function(E,O,D){var B=at(l,function(Z){return Z(E)});return{criteria:B,index:++m,value:E}});return f6(_,function(E,O){return Qj(E,O,f)})}function zj(o,l){return W_(o,l,function(f,m){return Fg(o,m)})}function W_(o,l,f){for(var m=-1,_=l.length,E={};++m<_;){var O=l[m],D=as(o,O);f(D,O)&&Ta(E,bi(O,o),D)}return E}function Wj(o){return function(l){return as(l,o)}}function cg(o,l,f,m){var _=m?d6:Js,E=-1,O=l.length,D=o;for(o===l&&(l=ur(l)),f&&(D=at(o,Tr(f)));++E<O;)for(var B=0,Z=l[E],J=f?f(Z):Z;(B=_(D,J,B,m))>-1;)D!==o&&Wl.call(D,B,1),Wl.call(o,B,1);return o}function H_(o,l){for(var f=o?l.length:0,m=f-1;f--;){var _=l[f];if(f==m||_!==E){var E=_;zn(_)?Wl.call(o,_,1):dg(o,_)}}return o}function lg(o,l){return o+$l(S_()*(l-o+1))}function Hj(o,l,f,m){for(var _=-1,E=Dt(Ul((l-o)/(f||1)),0),O=Y(E);E--;)O[m?E:++_]=o,o+=f;return O}function ug(o,l){var f="";if(!o||l<1||l>oe)return f;do l%2&&(f+=o),l=$l(l/2),l&&(o+=o);while(l);return f}function Me(o,l){return kg(bx(o,l,fr),o+"")}function Uj(o){return E_(uo(o))}function $j(o,l){var f=uo(o);return cu(f,os(l,0,f.length))}function Ta(o,l,f,m){if(!ht(o))return o;l=bi(l,o);for(var _=-1,E=l.length,O=E-1,D=o;D!=null&&++_<E;){var B=wn(l[_]),Z=f;if(B==="__proto__"||B==="constructor"||B==="prototype")return o;if(_!=O){var J=D[B];Z=m?m(J,B,D):t,Z===t&&(Z=ht(J)?J:zn(l[_+1])?[]:{})}_a(D,B,Z),D=D[B]}return o}var U_=Yl?function(o,l){return Yl.set(o,l),o}:fr,Yj=Hl?function(o,l){return Hl(o,"toString",{configurable:!0,enumerable:!1,value:Ng(l),writable:!0})}:fr;function Xj(o){return cu(uo(o))}function Wr(o,l,f){var m=-1,_=o.length;l<0&&(l=-l>_?0:_+l),f=f>_?_:f,f<0&&(f+=_),_=l>f?0:f-l>>>0,l>>>=0;for(var E=Y(_);++m<_;)E[m]=o[m+l];return E}function Gj(o,l){var f;return vi(o,function(m,_,E){return f=l(m,_,E),!f}),!!f}function Ql(o,l,f){var m=0,_=o==null?m:o.length;if(typeof l=="number"&&l===l&&_<=Ge){for(;m<_;){var E=m+_>>>1,O=o[E];O!==null&&!kr(O)&&(f?O<=l:O<l)?m=E+1:_=E}return _}return hg(o,l,fr,f)}function hg(o,l,f,m){var _=0,E=o==null?0:o.length;if(E===0)return 0;l=f(l);for(var O=l!==l,D=l===null,B=kr(l),Z=l===t;_<E;){var J=$l((_+E)/2),ee=f(o[J]),ae=ee!==t,ge=ee===null,ve=ee===ee,Ae=kr(ee);if(O)var ye=m||ve;else Z?ye=ve&&(m||ae):D?ye=ve&&ae&&(m||!ge):B?ye=ve&&ae&&!ge&&(m||!Ae):ge||Ae?ye=!1:ye=m?ee<=l:ee<l;ye?_=J+1:E=J}return $t(E,Fe)}function $_(o,l){for(var f=-1,m=o.length,_=0,E=[];++f<m;){var O=o[f],D=l?l(O):O;if(!f||!sn(D,B)){var B=D;E[_++]=O===0?0:O}}return E}function Y_(o){return typeof o=="number"?o:kr(o)?de:+o}function Er(o){if(typeof o=="string")return o;if(Ce(o))return at(o,Er)+"";if(kr(o))return C_?C_.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}function yi(o,l,f){var m=-1,_=Pl,E=o.length,O=!0,D=[],B=D;if(f)O=!1,_=Bf;else if(E>=i){var Z=l?null:s7(o);if(Z)return jl(Z);O=!1,_=pa,B=new ss}else B=l?[]:D;e:for(;++m<E;){var J=o[m],ee=l?l(J):J;if(J=f||J!==0?J:0,O&&ee===ee){for(var ae=B.length;ae--;)if(B[ae]===ee)continue e;l&&B.push(ee),D.push(J)}else _(B,ee,f)||(B!==D&&B.push(ee),D.push(J))}return D}function dg(o,l){return l=bi(l,o),o=wx(o,l),o==null||delete o[wn(Hr(l))]}function X_(o,l,f,m){return Ta(o,l,f(as(o,l)),m)}function eu(o,l,f,m){for(var _=o.length,E=m?_:-1;(m?E--:++E<_)&&l(o[E],E,o););return f?Wr(o,m?0:E,m?E+1:_):Wr(o,m?E+1:0,m?_:E)}function G_(o,l){var f=o;return f instanceof je&&(f=f.value()),zf(l,function(m,_){return _.func.apply(_.thisArg,gi([m],_.args))},f)}function fg(o,l,f){var m=o.length;if(m<2)return m?yi(o[0]):[];for(var _=-1,E=Y(m);++_<m;)for(var O=o[_],D=-1;++D<m;)D!=_&&(E[_]=xa(E[_]||O,o[D],l,f));return yi(Bt(E,1),l,f)}function q_(o,l,f){for(var m=-1,_=o.length,E=l.length,O={};++m<_;){var D=m<E?l[m]:t;f(O,o[m],D)}return O}function gg(o){return _t(o)?o:[]}function pg(o){return typeof o=="function"?o:fr}function bi(o,l){return Ce(o)?o:Cg(o,l)?[o]:Cx(Ye(o))}var qj=Me;function wi(o,l,f){var m=o.length;return f=f===t?m:f,!l&&f>=m?o:Wr(o,l,f)}var K_=L6||function(o){return Vt.clearTimeout(o)};function Z_(o,l){if(l)return o.slice();var f=o.length,m=y_?y_(f):new o.constructor(f);return o.copy(m),m}function mg(o){var l=new o.constructor(o.byteLength);return new Bl(l).set(new Bl(o)),l}function Kj(o,l){var f=l?mg(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function Zj(o){var l=new o.constructor(o.source,jw.exec(o));return l.lastIndex=o.lastIndex,l}function Jj(o){return wa?Je(wa.call(o)):{}}function J_(o,l){var f=l?mg(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function Q_(o,l){if(o!==l){var f=o!==t,m=o===null,_=o===o,E=kr(o),O=l!==t,D=l===null,B=l===l,Z=kr(l);if(!D&&!Z&&!E&&o>l||E&&O&&B&&!D&&!Z||m&&O&&B||!f&&B||!_)return 1;if(!m&&!E&&!Z&&o<l||Z&&f&&_&&!m&&!E||D&&f&&_||!O&&_||!B)return-1}return 0}function Qj(o,l,f){for(var m=-1,_=o.criteria,E=l.criteria,O=_.length,D=f.length;++m<O;){var B=Q_(_[m],E[m]);if(B){if(m>=D)return B;var Z=f[m];return B*(Z=="desc"?-1:1)}}return o.index-l.index}function ex(o,l,f,m){for(var _=-1,E=o.length,O=f.length,D=-1,B=l.length,Z=Dt(E-O,0),J=Y(B+Z),ee=!m;++D<B;)J[D]=l[D];for(;++_<O;)(ee||_<E)&&(J[f[_]]=o[_]);for(;Z--;)J[D++]=o[_++];return J}function tx(o,l,f,m){for(var _=-1,E=o.length,O=-1,D=f.length,B=-1,Z=l.length,J=Dt(E-D,0),ee=Y(J+Z),ae=!m;++_<J;)ee[_]=o[_];for(var ge=_;++B<Z;)ee[ge+B]=l[B];for(;++O<D;)(ae||_<E)&&(ee[ge+f[O]]=o[_++]);return ee}function ur(o,l){var f=-1,m=o.length;for(l||(l=Y(m));++f<m;)l[f]=o[f];return l}function bn(o,l,f,m){var _=!f;f||(f={});for(var E=-1,O=l.length;++E<O;){var D=l[E],B=m?m(f[D],o[D],D,f,o):t;B===t&&(B=o[D]),_?Rn(f,D,B):_a(f,D,B)}return f}function e7(o,l){return bn(o,Sg(o),l)}function t7(o,l){return bn(o,gx(o),l)}function tu(o,l){return function(f,m){var _=Ce(f)?o6:Sj,E=l?l():{};return _(f,o,me(m,2),E)}}function oo(o){return Me(function(l,f){var m=-1,_=f.length,E=_>1?f[_-1]:t,O=_>2?f[2]:t;for(E=o.length>3&&typeof E=="function"?(_--,E):t,O&&tr(f[0],f[1],O)&&(E=_<3?t:E,_=1),l=Je(l);++m<_;){var D=f[m];D&&o(l,D,m,E)}return l})}function rx(o,l){return function(f,m){if(f==null)return f;if(!hr(f))return o(f,m);for(var _=f.length,E=l?_:-1,O=Je(f);(l?E--:++E<_)&&m(O[E],E,O)!==!1;);return f}}function nx(o){return function(l,f,m){for(var _=-1,E=Je(l),O=m(l),D=O.length;D--;){var B=O[o?D:++_];if(f(E[B],B,E)===!1)break}return l}}function r7(o,l,f){var m=l&S,_=Ea(o);function E(){var O=this&&this!==Vt&&this instanceof E?_:o;return O.apply(m?f:this,arguments)}return E}function ix(o){return function(l){l=Ye(l);var f=Qs(l)?rn(l):t,m=f?f[0]:l.charAt(0),_=f?wi(f,1).join(""):l.slice(1);return m[o]()+_}}function ao(o){return function(l){return zf(rS(tS(l).replace(Y3,"")),o,"")}}function Ea(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=so(o.prototype),m=o.apply(f,l);return ht(m)?m:f}}function n7(o,l,f){var m=Ea(o);function _(){for(var E=arguments.length,O=Y(E),D=E,B=co(_);D--;)O[D]=arguments[D];var Z=E<3&&O[0]!==B&&O[E-1]!==B?[]:pi(O,B);if(E-=Z.length,E<f)return lx(o,l,ru,_.placeholder,t,O,Z,t,t,f-E);var J=this&&this!==Vt&&this instanceof _?m:o;return Cr(J,this,O)}return _}function sx(o){return function(l,f,m){var _=Je(l);if(!hr(l)){var E=me(f,3);l=Ft(l),f=function(D){return E(_[D],D,_)}}var O=o(l,f,m);return O>-1?_[E?l[O]:O]:t}}function ox(o){return Bn(function(l){var f=l.length,m=f,_=Br.prototype.thru;for(o&&l.reverse();m--;){var E=l[m];if(typeof E!="function")throw new Vr(a);if(_&&!O&&ou(E)=="wrapper")var O=new Br([],!0)}for(m=O?m:f;++m<f;){E=l[m];var D=ou(E),B=D=="wrapper"?_g(E):t;B&&Tg(B[0])&&B[1]==(W|I|F|R)&&!B[4].length&&B[9]==1?O=O[ou(B[0])].apply(O,B[3]):O=E.length==1&&Tg(E)?O[D]():O.thru(E)}return function(){var Z=arguments,J=Z[0];if(O&&Z.length==1&&Ce(J))return O.plant(J).value();for(var ee=0,ae=f?l[ee].apply(this,Z):J;++ee<f;)ae=l[ee].call(this,ae);return ae}})}function ru(o,l,f,m,_,E,O,D,B,Z){var J=l&W,ee=l&S,ae=l&T,ge=l&(I|M),ve=l&X,Ae=ae?t:Ea(o);function ye(){for(var De=arguments.length,Le=Y(De),Ir=De;Ir--;)Le[Ir]=arguments[Ir];if(ge)var rr=co(ye),Ar=p6(Le,rr);if(m&&(Le=ex(Le,m,_,ge)),E&&(Le=tx(Le,E,O,ge)),De-=Ar,ge&&De<Z){var xt=pi(Le,rr);return lx(o,l,ru,ye.placeholder,f,Le,xt,D,B,Z-De)}var on=ee?f:this,Un=ae?on[o]:o;return De=Le.length,D?Le=S7(Le,D):ve&&De>1&&Le.reverse(),J&&B<De&&(Le.length=B),this&&this!==Vt&&this instanceof ye&&(Un=Ae||Ea(Un)),Un.apply(on,Le)}return ye}function ax(o,l){return function(f,m){return Oj(f,o,l(m),{})}}function nu(o,l){return function(f,m){var _;if(f===t&&m===t)return l;if(f!==t&&(_=f),m!==t){if(_===t)return m;typeof f=="string"||typeof m=="string"?(f=Er(f),m=Er(m)):(f=Y_(f),m=Y_(m)),_=o(f,m)}return _}}function vg(o){return Bn(function(l){return l=at(l,Tr(me())),Me(function(f){var m=this;return o(l,function(_){return Cr(_,m,f)})})})}function iu(o,l){l=l===t?" ":Er(l);var f=l.length;if(f<2)return f?ug(l,o):l;var m=ug(l,Ul(o/eo(l)));return Qs(l)?wi(rn(m),0,o).join(""):m.slice(0,o)}function i7(o,l,f,m){var _=l&S,E=Ea(o);function O(){for(var D=-1,B=arguments.length,Z=-1,J=m.length,ee=Y(J+B),ae=this&&this!==Vt&&this instanceof O?E:o;++Z<J;)ee[Z]=m[Z];for(;B--;)ee[Z++]=arguments[++D];return Cr(ae,_?f:this,ee)}return O}function cx(o){return function(l,f,m){return m&&typeof m!="number"&&tr(l,f,m)&&(f=m=t),l=Hn(l),f===t?(f=l,l=0):f=Hn(f),m=m===t?l<f?1:-1:Hn(m),Hj(l,f,m,o)}}function su(o){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=Ur(l),f=Ur(f)),o(l,f)}}function lx(o,l,f,m,_,E,O,D,B,Z){var J=l&I,ee=J?O:t,ae=J?t:O,ge=J?E:t,ve=J?t:E;l|=J?F:N,l&=~(J?N:F),l&k||(l&=-4);var Ae=[o,l,_,ge,ee,ve,ae,D,B,Z],ye=f.apply(t,Ae);return Tg(o)&&_x(ye,Ae),ye.placeholder=m,xx(ye,o,l)}function yg(o){var l=Pt[o];return function(f,m){if(f=Ur(f),m=m==null?0:$t(Ie(m),292),m&&x_(f)){var _=(Ye(f)+"e").split("e"),E=l(_[0]+"e"+(+_[1]+m));return _=(Ye(E)+"e").split("e"),+(_[0]+"e"+(+_[1]-m))}return l(f)}}var s7=no&&1/jl(new no([,-0]))[1]==ue?function(o){return new no(o)}:Bg;function ux(o){return function(l){var f=Yt(l);return f==rt?Gf(l):f==P?x6(l):g6(l,o(l))}}function Vn(o,l,f,m,_,E,O,D){var B=l&T;if(!B&&typeof o!="function")throw new Vr(a);var Z=m?m.length:0;if(Z||(l&=-97,m=_=t),O=O===t?O:Dt(Ie(O),0),D=D===t?D:Ie(D),Z-=_?_.length:0,l&N){var J=m,ee=_;m=_=t}var ae=B?t:_g(o),ge=[o,l,f,m,_,J,ee,E,O,D];if(ae&&w7(ge,ae),o=ge[0],l=ge[1],f=ge[2],m=ge[3],_=ge[4],D=ge[9]=ge[9]===t?B?0:o.length:Dt(ge[9]-Z,0),!D&&l&(I|M)&&(l&=-25),!l||l==S)var ve=r7(o,l,f);else l==I||l==M?ve=n7(o,l,D):(l==F||l==(S|F))&&!_.length?ve=i7(o,l,f,m):ve=ru.apply(t,ge);var Ae=ae?U_:_x;return xx(Ae(ve,ge),o,l)}function hx(o,l,f,m){return o===t||sn(o,ro[f])&&!qe.call(m,f)?l:o}function dx(o,l,f,m,_,E){return ht(o)&&ht(l)&&(E.set(l,o),Jl(o,l,t,dx,E),E.delete(l)),o}function o7(o){return Aa(o)?t:o}function fx(o,l,f,m,_,E){var O=f&b,D=o.length,B=l.length;if(D!=B&&!(O&&B>D))return!1;var Z=E.get(o),J=E.get(l);if(Z&&J)return Z==l&&J==o;var ee=-1,ae=!0,ge=f&x?new ss:t;for(E.set(o,l),E.set(l,o);++ee<D;){var ve=o[ee],Ae=l[ee];if(m)var ye=O?m(Ae,ve,ee,l,o,E):m(ve,Ae,ee,o,l,E);if(ye!==t){if(ye)continue;ae=!1;break}if(ge){if(!Wf(l,function(De,Le){if(!pa(ge,Le)&&(ve===De||_(ve,De,f,m,E)))return ge.push(Le)})){ae=!1;break}}else if(!(ve===Ae||_(ve,Ae,f,m,E))){ae=!1;break}}return E.delete(o),E.delete(l),ae}function a7(o,l,f,m,_,E,O){switch(f){case nt:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case be:return!(o.byteLength!=l.byteLength||!E(new Bl(o),new Bl(l)));case or:case Rt:case jt:return sn(+o,+l);case ar:return o.name==l.name&&o.message==l.message;case _r:case le:return o==l+"";case rt:var D=Gf;case P:var B=m&b;if(D||(D=jl),o.size!=l.size&&!B)return!1;var Z=O.get(o);if(Z)return Z==l;m|=x,O.set(o,l);var J=fx(D(o),D(l),m,_,E,O);return O.delete(o),J;case ce:if(wa)return wa.call(o)==wa.call(l)}return!1}function c7(o,l,f,m,_,E){var O=f&b,D=bg(o),B=D.length,Z=bg(l),J=Z.length;if(B!=J&&!O)return!1;for(var ee=B;ee--;){var ae=D[ee];if(!(O?ae in l:qe.call(l,ae)))return!1}var ge=E.get(o),ve=E.get(l);if(ge&&ve)return ge==l&&ve==o;var Ae=!0;E.set(o,l),E.set(l,o);for(var ye=O;++ee<B;){ae=D[ee];var De=o[ae],Le=l[ae];if(m)var Ir=O?m(Le,De,ae,l,o,E):m(De,Le,ae,o,l,E);if(!(Ir===t?De===Le||_(De,Le,f,m,E):Ir)){Ae=!1;break}ye||(ye=ae=="constructor")}if(Ae&&!ye){var rr=o.constructor,Ar=l.constructor;rr!=Ar&&"constructor"in o&&"constructor"in l&&!(typeof rr=="function"&&rr instanceof rr&&typeof Ar=="function"&&Ar instanceof Ar)&&(Ae=!1)}return E.delete(o),E.delete(l),Ae}function Bn(o){return kg(bx(o,t,Ix),o+"")}function bg(o){return D_(o,Ft,Sg)}function wg(o){return D_(o,dr,gx)}var _g=Yl?function(o){return Yl.get(o)}:Bg;function ou(o){for(var l=o.name+"",f=io[l],m=qe.call(io,l)?f.length:0;m--;){var _=f[m],E=_.func;if(E==null||E==o)return _.name}return l}function co(o){var l=qe.call(C,"placeholder")?C:o;return l.placeholder}function me(){var o=C.iteratee||Rg;return o=o===Rg?L_:o,arguments.length?o(arguments[0],arguments[1]):o}function au(o,l){var f=o.__data__;return m7(l)?f[typeof l=="string"?"string":"hash"]:f.map}function xg(o){for(var l=Ft(o),f=l.length;f--;){var m=l[f],_=o[m];l[f]=[m,_,vx(_)]}return l}function cs(o,l){var f=b6(o,l);return F_(f)?f:t}function l7(o){var l=qe.call(o,ns),f=o[ns];try{o[ns]=t;var m=!0}catch{}var _=Rl.call(o);return m&&(l?o[ns]=f:delete o[ns]),_}var Sg=Kf?function(o){return o==null?[]:(o=Je(o),fi(Kf(o),function(l){return w_.call(o,l)}))}:zg,gx=Kf?function(o){for(var l=[];o;)gi(l,Sg(o)),o=zl(o);return l}:zg,Yt=er;(Zf&&Yt(new Zf(new ArrayBuffer(1)))!=nt||va&&Yt(new va)!=rt||Jf&&Yt(Jf.resolve())!=Ot||no&&Yt(new no)!=P||ya&&Yt(new ya)!=Ke)&&(Yt=function(o){var l=er(o),f=l==Qe?o.constructor:t,m=f?ls(f):"";if(m)switch(m){case $6:return nt;case Y6:return rt;case X6:return Ot;case G6:return P;case q6:return Ke}return l});function u7(o,l,f){for(var m=-1,_=f.length;++m<_;){var E=f[m],O=E.size;switch(E.type){case"drop":o+=O;break;case"dropRight":l-=O;break;case"take":l=$t(l,o+O);break;case"takeRight":o=Dt(o,l-O);break}}return{start:o,end:l}}function h7(o){var l=o.match(v3);return l?l[1].split(y3):[]}function px(o,l,f){l=bi(l,o);for(var m=-1,_=l.length,E=!1;++m<_;){var O=wn(l[m]);if(!(E=o!=null&&f(o,O)))break;o=o[O]}return E||++m!=_?E:(_=o==null?0:o.length,!!_&&gu(_)&&zn(O,_)&&(Ce(o)||us(o)))}function d7(o){var l=o.length,f=new o.constructor(l);return l&&typeof o[0]=="string"&&qe.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function mx(o){return typeof o.constructor=="function"&&!ka(o)?so(zl(o)):{}}function f7(o,l,f){var m=o.constructor;switch(l){case be:return mg(o);case or:case Rt:return new m(+o);case nt:return Kj(o,f);case cr:case wt:case xr:case tn:case lr:case mn:case Qt:case fa:case ga:return J_(o,f);case rt:return new m;case jt:case le:return new m(o);case _r:return Zj(o);case P:return new m;case ce:return Jj(o)}}function g7(o,l){var f=l.length;if(!f)return o;var m=f-1;return l[m]=(f>1?"& ":"")+l[m],l=l.join(f>2?", ":" "),o.replace(m3,`{
/* [wrapped with `+l+`] */
`)}function p7(o){return Ce(o)||us(o)||!!(__&&o&&o[__])}function zn(o,l){var f=typeof o;return l=l??oe,!!l&&(f=="number"||f!="symbol"&&k3.test(o))&&o>-1&&o%1==0&&o<l}function tr(o,l,f){if(!ht(f))return!1;var m=typeof l;return(m=="number"?hr(f)&&zn(l,f.length):m=="string"&&l in f)?sn(f[l],o):!1}function Cg(o,l){if(Ce(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||kr(o)?!0:Il.test(o)||!Pf.test(o)||l!=null&&o in Je(l)}function m7(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function Tg(o){var l=ou(o),f=C[l];if(typeof f!="function"||!(l in je.prototype))return!1;if(o===f)return!0;var m=_g(f);return!!m&&o===m[0]}function v7(o){return!!v_&&v_ in o}var y7=Ll?Wn:Wg;function ka(o){var l=o&&o.constructor,f=typeof l=="function"&&l.prototype||ro;return o===f}function vx(o){return o===o&&!ht(o)}function yx(o,l){return function(f){return f==null?!1:f[o]===l&&(l!==t||o in Je(f))}}function b7(o){var l=du(o,function(m){return f.size===h&&f.clear(),m}),f=l.cache;return l}function w7(o,l){var f=o[1],m=l[1],_=f|m,E=_<(S|T|W),O=m==W&&f==I||m==W&&f==R&&o[7].length<=l[8]||m==(W|R)&&l[7].length<=l[8]&&f==I;if(!(E||O))return o;m&S&&(o[2]=l[2],_|=f&S?0:k);var D=l[3];if(D){var B=o[3];o[3]=B?ex(B,D,l[4]):D,o[4]=B?pi(o[3],d):l[4]}return D=l[5],D&&(B=o[5],o[5]=B?tx(B,D,l[6]):D,o[6]=B?pi(o[5],d):l[6]),D=l[7],D&&(o[7]=D),m&W&&(o[8]=o[8]==null?l[8]:$t(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=_,o}function _7(o){var l=[];if(o!=null)for(var f in Je(o))l.push(f);return l}function x7(o){return Rl.call(o)}function bx(o,l,f){return l=Dt(l===t?o.length-1:l,0),function(){for(var m=arguments,_=-1,E=Dt(m.length-l,0),O=Y(E);++_<E;)O[_]=m[l+_];_=-1;for(var D=Y(l+1);++_<l;)D[_]=m[_];return D[l]=f(O),Cr(o,this,D)}}function wx(o,l){return l.length<2?o:as(o,Wr(l,0,-1))}function S7(o,l){for(var f=o.length,m=$t(l.length,f),_=ur(o);m--;){var E=l[m];o[m]=zn(E,f)?_[E]:t}return o}function Eg(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var _x=Sx(U_),Ia=R6||function(o,l){return Vt.setTimeout(o,l)},kg=Sx(Yj);function xx(o,l,f){var m=l+"";return kg(o,g7(m,C7(h7(m),f)))}function Sx(o){var l=0,f=0;return function(){var m=W6(),_=G-(m-f);if(f=m,_>0){if(++l>=$)return arguments[0]}else l=0;return o.apply(t,arguments)}}function cu(o,l){var f=-1,m=o.length,_=m-1;for(l=l===t?m:l;++f<l;){var E=lg(f,_),O=o[E];o[E]=o[f],o[f]=O}return o.length=l,o}var Cx=b7(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(ze,function(f,m,_,E){l.push(_?E.replace(_3,"$1"):m||f)}),l});function wn(o){if(typeof o=="string"||kr(o))return o;var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}function ls(o){if(o!=null){try{return Nl.call(o)}catch{}try{return o+""}catch{}}return""}function C7(o,l){return Rr(Re,function(f){var m="_."+f[0];l&f[1]&&!Pl(o,m)&&o.push(m)}),o.sort()}function Tx(o){if(o instanceof je)return o.clone();var l=new Br(o.__wrapped__,o.__chain__);return l.__actions__=ur(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function T7(o,l,f){(f?tr(o,l,f):l===t)?l=1:l=Dt(Ie(l),0);var m=o==null?0:o.length;if(!m||l<1)return[];for(var _=0,E=0,O=Y(Ul(m/l));_<m;)O[E++]=Wr(o,_,_+=l);return O}function E7(o){for(var l=-1,f=o==null?0:o.length,m=0,_=[];++l<f;){var E=o[l];E&&(_[m++]=E)}return _}function k7(){var o=arguments.length;if(!o)return[];for(var l=Y(o-1),f=arguments[0],m=o;m--;)l[m-1]=arguments[m];return gi(Ce(f)?ur(f):[f],Bt(l,1))}var I7=Me(function(o,l){return _t(o)?xa(o,Bt(l,1,_t,!0)):[]}),A7=Me(function(o,l){var f=Hr(l);return _t(f)&&(f=t),_t(o)?xa(o,Bt(l,1,_t,!0),me(f,2)):[]}),M7=Me(function(o,l){var f=Hr(l);return _t(f)&&(f=t),_t(o)?xa(o,Bt(l,1,_t,!0),t,f):[]});function O7(o,l,f){var m=o==null?0:o.length;return m?(l=f||l===t?1:Ie(l),Wr(o,l<0?0:l,m)):[]}function P7(o,l,f){var m=o==null?0:o.length;return m?(l=f||l===t?1:Ie(l),l=m-l,Wr(o,0,l<0?0:l)):[]}function D7(o,l){return o&&o.length?eu(o,me(l,3),!0,!0):[]}function j7(o,l){return o&&o.length?eu(o,me(l,3),!0):[]}function F7(o,l,f,m){var _=o==null?0:o.length;return _?(f&&typeof f!="number"&&tr(o,l,f)&&(f=0,m=_),kj(o,l,f,m)):[]}function Ex(o,l,f){var m=o==null?0:o.length;if(!m)return-1;var _=f==null?0:Ie(f);return _<0&&(_=Dt(m+_,0)),Dl(o,me(l,3),_)}function kx(o,l,f){var m=o==null?0:o.length;if(!m)return-1;var _=m-1;return f!==t&&(_=Ie(f),_=f<0?Dt(m+_,0):$t(_,m-1)),Dl(o,me(l,3),_,!0)}function Ix(o){var l=o==null?0:o.length;return l?Bt(o,1):[]}function L7(o){var l=o==null?0:o.length;return l?Bt(o,ue):[]}function N7(o,l){var f=o==null?0:o.length;return f?(l=l===t?1:Ie(l),Bt(o,l)):[]}function R7(o){for(var l=-1,f=o==null?0:o.length,m={};++l<f;){var _=o[l];m[_[0]]=_[1]}return m}function Ax(o){return o&&o.length?o[0]:t}function V7(o,l,f){var m=o==null?0:o.length;if(!m)return-1;var _=f==null?0:Ie(f);return _<0&&(_=Dt(m+_,0)),Js(o,l,_)}function B7(o){var l=o==null?0:o.length;return l?Wr(o,0,-1):[]}var z7=Me(function(o){var l=at(o,gg);return l.length&&l[0]===o[0]?ig(l):[]}),W7=Me(function(o){var l=Hr(o),f=at(o,gg);return l===Hr(f)?l=t:f.pop(),f.length&&f[0]===o[0]?ig(f,me(l,2)):[]}),H7=Me(function(o){var l=Hr(o),f=at(o,gg);return l=typeof l=="function"?l:t,l&&f.pop(),f.length&&f[0]===o[0]?ig(f,t,l):[]});function U7(o,l){return o==null?"":B6.call(o,l)}function Hr(o){var l=o==null?0:o.length;return l?o[l-1]:t}function $7(o,l,f){var m=o==null?0:o.length;if(!m)return-1;var _=m;return f!==t&&(_=Ie(f),_=_<0?Dt(m+_,0):$t(_,m-1)),l===l?C6(o,l,_):Dl(o,l_,_,!0)}function Y7(o,l){return o&&o.length?B_(o,Ie(l)):t}var X7=Me(Mx);function Mx(o,l){return o&&o.length&&l&&l.length?cg(o,l):o}function G7(o,l,f){return o&&o.length&&l&&l.length?cg(o,l,me(f,2)):o}function q7(o,l,f){return o&&o.length&&l&&l.length?cg(o,l,t,f):o}var K7=Bn(function(o,l){var f=o==null?0:o.length,m=eg(o,l);return H_(o,at(l,function(_){return zn(_,f)?+_:_}).sort(Q_)),m});function Z7(o,l){var f=[];if(!(o&&o.length))return f;var m=-1,_=[],E=o.length;for(l=me(l,3);++m<E;){var O=o[m];l(O,m,o)&&(f.push(O),_.push(m))}return H_(o,_),f}function Ig(o){return o==null?o:U6.call(o)}function J7(o,l,f){var m=o==null?0:o.length;return m?(f&&typeof f!="number"&&tr(o,l,f)?(l=0,f=m):(l=l==null?0:Ie(l),f=f===t?m:Ie(f)),Wr(o,l,f)):[]}function Q7(o,l){return Ql(o,l)}function e8(o,l,f){return hg(o,l,me(f,2))}function t8(o,l){var f=o==null?0:o.length;if(f){var m=Ql(o,l);if(m<f&&sn(o[m],l))return m}return-1}function r8(o,l){return Ql(o,l,!0)}function n8(o,l,f){return hg(o,l,me(f,2),!0)}function i8(o,l){var f=o==null?0:o.length;if(f){var m=Ql(o,l,!0)-1;if(sn(o[m],l))return m}return-1}function s8(o){return o&&o.length?$_(o):[]}function o8(o,l){return o&&o.length?$_(o,me(l,2)):[]}function a8(o){var l=o==null?0:o.length;return l?Wr(o,1,l):[]}function c8(o,l,f){return o&&o.length?(l=f||l===t?1:Ie(l),Wr(o,0,l<0?0:l)):[]}function l8(o,l,f){var m=o==null?0:o.length;return m?(l=f||l===t?1:Ie(l),l=m-l,Wr(o,l<0?0:l,m)):[]}function u8(o,l){return o&&o.length?eu(o,me(l,3),!1,!0):[]}function h8(o,l){return o&&o.length?eu(o,me(l,3)):[]}var d8=Me(function(o){return yi(Bt(o,1,_t,!0))}),f8=Me(function(o){var l=Hr(o);return _t(l)&&(l=t),yi(Bt(o,1,_t,!0),me(l,2))}),g8=Me(function(o){var l=Hr(o);return l=typeof l=="function"?l:t,yi(Bt(o,1,_t,!0),t,l)});function p8(o){return o&&o.length?yi(o):[]}function m8(o,l){return o&&o.length?yi(o,me(l,2)):[]}function v8(o,l){return l=typeof l=="function"?l:t,o&&o.length?yi(o,t,l):[]}function Ag(o){if(!(o&&o.length))return[];var l=0;return o=fi(o,function(f){if(_t(f))return l=Dt(f.length,l),!0}),Yf(l,function(f){return at(o,Hf(f))})}function Ox(o,l){if(!(o&&o.length))return[];var f=Ag(o);return l==null?f:at(f,function(m){return Cr(l,t,m)})}var y8=Me(function(o,l){return _t(o)?xa(o,l):[]}),b8=Me(function(o){return fg(fi(o,_t))}),w8=Me(function(o){var l=Hr(o);return _t(l)&&(l=t),fg(fi(o,_t),me(l,2))}),_8=Me(function(o){var l=Hr(o);return l=typeof l=="function"?l:t,fg(fi(o,_t),t,l)}),x8=Me(Ag);function S8(o,l){return q_(o||[],l||[],_a)}function C8(o,l){return q_(o||[],l||[],Ta)}var T8=Me(function(o){var l=o.length,f=l>1?o[l-1]:t;return f=typeof f=="function"?(o.pop(),f):t,Ox(o,f)});function Px(o){var l=C(o);return l.__chain__=!0,l}function E8(o,l){return l(o),o}function lu(o,l){return l(o)}var k8=Bn(function(o){var l=o.length,f=l?o[0]:0,m=this.__wrapped__,_=function(E){return eg(E,o)};return l>1||this.__actions__.length||!(m instanceof je)||!zn(f)?this.thru(_):(m=m.slice(f,+f+(l?1:0)),m.__actions__.push({func:lu,args:[_],thisArg:t}),new Br(m,this.__chain__).thru(function(E){return l&&!E.length&&E.push(t),E}))});function I8(){return Px(this)}function A8(){return new Br(this.value(),this.__chain__)}function M8(){this.__values__===t&&(this.__values__=Yx(this.value()));var o=this.__index__>=this.__values__.length,l=o?t:this.__values__[this.__index__++];return{done:o,value:l}}function O8(){return this}function P8(o){for(var l,f=this;f instanceof Gl;){var m=Tx(f);m.__index__=0,m.__values__=t,l?_.__wrapped__=m:l=m;var _=m;f=f.__wrapped__}return _.__wrapped__=o,l}function D8(){var o=this.__wrapped__;if(o instanceof je){var l=o;return this.__actions__.length&&(l=new je(this)),l=l.reverse(),l.__actions__.push({func:lu,args:[Ig],thisArg:t}),new Br(l,this.__chain__)}return this.thru(Ig)}function j8(){return G_(this.__wrapped__,this.__actions__)}var F8=tu(function(o,l,f){qe.call(o,f)?++o[f]:Rn(o,f,1)});function L8(o,l,f){var m=Ce(o)?a_:Ej;return f&&tr(o,l,f)&&(l=t),m(o,me(l,3))}function N8(o,l){var f=Ce(o)?fi:O_;return f(o,me(l,3))}var R8=sx(Ex),V8=sx(kx);function B8(o,l){return Bt(uu(o,l),1)}function z8(o,l){return Bt(uu(o,l),ue)}function W8(o,l,f){return f=f===t?1:Ie(f),Bt(uu(o,l),f)}function Dx(o,l){var f=Ce(o)?Rr:vi;return f(o,me(l,3))}function jx(o,l){var f=Ce(o)?a6:M_;return f(o,me(l,3))}var H8=tu(function(o,l,f){qe.call(o,f)?o[f].push(l):Rn(o,f,[l])});function U8(o,l,f,m){o=hr(o)?o:uo(o),f=f&&!m?Ie(f):0;var _=o.length;return f<0&&(f=Dt(_+f,0)),pu(o)?f<=_&&o.indexOf(l,f)>-1:!!_&&Js(o,l,f)>-1}var $8=Me(function(o,l,f){var m=-1,_=typeof l=="function",E=hr(o)?Y(o.length):[];return vi(o,function(O){E[++m]=_?Cr(l,O,f):Sa(O,l,f)}),E}),Y8=tu(function(o,l,f){Rn(o,f,l)});function uu(o,l){var f=Ce(o)?at:N_;return f(o,me(l,3))}function X8(o,l,f,m){return o==null?[]:(Ce(l)||(l=l==null?[]:[l]),f=m?t:f,Ce(f)||(f=f==null?[]:[f]),z_(o,l,f))}var G8=tu(function(o,l,f){o[f?0:1].push(l)},function(){return[[],[]]});function q8(o,l,f){var m=Ce(o)?zf:h_,_=arguments.length<3;return m(o,me(l,4),f,_,vi)}function K8(o,l,f){var m=Ce(o)?c6:h_,_=arguments.length<3;return m(o,me(l,4),f,_,M_)}function Z8(o,l){var f=Ce(o)?fi:O_;return f(o,fu(me(l,3)))}function J8(o){var l=Ce(o)?E_:Uj;return l(o)}function Q8(o,l,f){(f?tr(o,l,f):l===t)?l=1:l=Ie(l);var m=Ce(o)?_j:$j;return m(o,l)}function eF(o){var l=Ce(o)?xj:Xj;return l(o)}function tF(o){if(o==null)return 0;if(hr(o))return pu(o)?eo(o):o.length;var l=Yt(o);return l==rt||l==P?o.size:og(o).length}function rF(o,l,f){var m=Ce(o)?Wf:Gj;return f&&tr(o,l,f)&&(l=t),m(o,me(l,3))}var nF=Me(function(o,l){if(o==null)return[];var f=l.length;return f>1&&tr(o,l[0],l[1])?l=[]:f>2&&tr(l[0],l[1],l[2])&&(l=[l[0]]),z_(o,Bt(l,1),[])}),hu=N6||function(){return Vt.Date.now()};function iF(o,l){if(typeof l!="function")throw new Vr(a);return o=Ie(o),function(){if(--o<1)return l.apply(this,arguments)}}function Fx(o,l,f){return l=f?t:l,l=o&&l==null?o.length:l,Vn(o,W,t,t,t,t,l)}function Lx(o,l){var f;if(typeof l!="function")throw new Vr(a);return o=Ie(o),function(){return--o>0&&(f=l.apply(this,arguments)),o<=1&&(l=t),f}}var Mg=Me(function(o,l,f){var m=S;if(f.length){var _=pi(f,co(Mg));m|=F}return Vn(o,m,l,f,_)}),Nx=Me(function(o,l,f){var m=S|T;if(f.length){var _=pi(f,co(Nx));m|=F}return Vn(l,m,o,f,_)});function Rx(o,l,f){l=f?t:l;var m=Vn(o,I,t,t,t,t,t,l);return m.placeholder=Rx.placeholder,m}function Vx(o,l,f){l=f?t:l;var m=Vn(o,M,t,t,t,t,t,l);return m.placeholder=Vx.placeholder,m}function Bx(o,l,f){var m,_,E,O,D,B,Z=0,J=!1,ee=!1,ae=!0;if(typeof o!="function")throw new Vr(a);l=Ur(l)||0,ht(f)&&(J=!!f.leading,ee="maxWait"in f,E=ee?Dt(Ur(f.maxWait)||0,l):E,ae="trailing"in f?!!f.trailing:ae);function ge(xt){var on=m,Un=_;return m=_=t,Z=xt,O=o.apply(Un,on),O}function ve(xt){return Z=xt,D=Ia(De,l),J?ge(xt):O}function Ae(xt){var on=xt-B,Un=xt-Z,sS=l-on;return ee?$t(sS,E-Un):sS}function ye(xt){var on=xt-B,Un=xt-Z;return B===t||on>=l||on<0||ee&&Un>=E}function De(){var xt=hu();if(ye(xt))return Le(xt);D=Ia(De,Ae(xt))}function Le(xt){return D=t,ae&&m?ge(xt):(m=_=t,O)}function Ir(){D!==t&&K_(D),Z=0,m=B=_=D=t}function rr(){return D===t?O:Le(hu())}function Ar(){var xt=hu(),on=ye(xt);if(m=arguments,_=this,B=xt,on){if(D===t)return ve(B);if(ee)return K_(D),D=Ia(De,l),ge(B)}return D===t&&(D=Ia(De,l)),O}return Ar.cancel=Ir,Ar.flush=rr,Ar}var sF=Me(function(o,l){return A_(o,1,l)}),oF=Me(function(o,l,f){return A_(o,Ur(l)||0,f)});function aF(o){return Vn(o,X)}function du(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new Vr(a);var f=function(){var m=arguments,_=l?l.apply(this,m):m[0],E=f.cache;if(E.has(_))return E.get(_);var O=o.apply(this,m);return f.cache=E.set(_,O)||E,O};return f.cache=new(du.Cache||Nn),f}du.Cache=Nn;function fu(o){if(typeof o!="function")throw new Vr(a);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function cF(o){return Lx(2,o)}var lF=qj(function(o,l){l=l.length==1&&Ce(l[0])?at(l[0],Tr(me())):at(Bt(l,1),Tr(me()));var f=l.length;return Me(function(m){for(var _=-1,E=$t(m.length,f);++_<E;)m[_]=l[_].call(this,m[_]);return Cr(o,this,m)})}),Og=Me(function(o,l){var f=pi(l,co(Og));return Vn(o,F,t,l,f)}),zx=Me(function(o,l){var f=pi(l,co(zx));return Vn(o,N,t,l,f)}),uF=Bn(function(o,l){return Vn(o,R,t,t,t,l)});function hF(o,l){if(typeof o!="function")throw new Vr(a);return l=l===t?l:Ie(l),Me(o,l)}function dF(o,l){if(typeof o!="function")throw new Vr(a);return l=l==null?0:Dt(Ie(l),0),Me(function(f){var m=f[l],_=wi(f,0,l);return m&&gi(_,m),Cr(o,this,_)})}function fF(o,l,f){var m=!0,_=!0;if(typeof o!="function")throw new Vr(a);return ht(f)&&(m="leading"in f?!!f.leading:m,_="trailing"in f?!!f.trailing:_),Bx(o,l,{leading:m,maxWait:l,trailing:_})}function gF(o){return Fx(o,1)}function pF(o,l){return Og(pg(l),o)}function mF(){if(!arguments.length)return[];var o=arguments[0];return Ce(o)?o:[o]}function vF(o){return zr(o,y)}function yF(o,l){return l=typeof l=="function"?l:t,zr(o,y,l)}function bF(o){return zr(o,g|y)}function wF(o,l){return l=typeof l=="function"?l:t,zr(o,g|y,l)}function _F(o,l){return l==null||I_(o,l,Ft(l))}function sn(o,l){return o===l||o!==o&&l!==l}var xF=su(ng),SF=su(function(o,l){return o>=l}),us=j_(function(){return arguments}())?j_:function(o){return vt(o)&&qe.call(o,"callee")&&!w_.call(o,"callee")},Ce=Y.isArray,CF=t_?Tr(t_):Pj;function hr(o){return o!=null&&gu(o.length)&&!Wn(o)}function _t(o){return vt(o)&&hr(o)}function TF(o){return o===!0||o===!1||vt(o)&&er(o)==or}var _i=V6||Wg,EF=r_?Tr(r_):Dj;function kF(o){return vt(o)&&o.nodeType===1&&!Aa(o)}function IF(o){if(o==null)return!0;if(hr(o)&&(Ce(o)||typeof o=="string"||typeof o.splice=="function"||_i(o)||lo(o)||us(o)))return!o.length;var l=Yt(o);if(l==rt||l==P)return!o.size;if(ka(o))return!og(o).length;for(var f in o)if(qe.call(o,f))return!1;return!0}function AF(o,l){return Ca(o,l)}function MF(o,l,f){f=typeof f=="function"?f:t;var m=f?f(o,l):t;return m===t?Ca(o,l,t,f):!!m}function Pg(o){if(!vt(o))return!1;var l=er(o);return l==ar||l==Mt||typeof o.message=="string"&&typeof o.name=="string"&&!Aa(o)}function OF(o){return typeof o=="number"&&x_(o)}function Wn(o){if(!ht(o))return!1;var l=er(o);return l==pe||l==wr||l==ut||l==Fn}function Wx(o){return typeof o=="number"&&o==Ie(o)}function gu(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=oe}function ht(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function vt(o){return o!=null&&typeof o=="object"}var Hx=n_?Tr(n_):Fj;function PF(o,l){return o===l||sg(o,l,xg(l))}function DF(o,l,f){return f=typeof f=="function"?f:t,sg(o,l,xg(l),f)}function jF(o){return Ux(o)&&o!=+o}function FF(o){if(y7(o))throw new Se(s);return F_(o)}function LF(o){return o===null}function NF(o){return o==null}function Ux(o){return typeof o=="number"||vt(o)&&er(o)==jt}function Aa(o){if(!vt(o)||er(o)!=Qe)return!1;var l=zl(o);if(l===null)return!0;var f=qe.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&Nl.call(f)==D6}var Dg=i_?Tr(i_):Lj;function RF(o){return Wx(o)&&o>=-9007199254740991&&o<=oe}var $x=s_?Tr(s_):Nj;function pu(o){return typeof o=="string"||!Ce(o)&&vt(o)&&er(o)==le}function kr(o){return typeof o=="symbol"||vt(o)&&er(o)==ce}var lo=o_?Tr(o_):Rj;function VF(o){return o===t}function BF(o){return vt(o)&&Yt(o)==Ke}function zF(o){return vt(o)&&er(o)==$e}var WF=su(ag),HF=su(function(o,l){return o<=l});function Yx(o){if(!o)return[];if(hr(o))return pu(o)?rn(o):ur(o);if(ma&&o[ma])return _6(o[ma]());var l=Yt(o),f=l==rt?Gf:l==P?jl:uo;return f(o)}function Hn(o){if(!o)return o===0?o:0;if(o=Ur(o),o===ue||o===-1/0){var l=o<0?-1:1;return l*se}return o===o?o:0}function Ie(o){var l=Hn(o),f=l%1;return l===l?f?l-f:l:0}function Xx(o){return o?os(Ie(o),0,ne):0}function Ur(o){if(typeof o=="number")return o;if(kr(o))return de;if(ht(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=ht(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=d_(o);var f=C3.test(o);return f||E3.test(o)?i6(o.slice(2),f?2:8):S3.test(o)?de:+o}function Gx(o){return bn(o,dr(o))}function UF(o){return o?os(Ie(o),-9007199254740991,oe):o===0?o:0}function Ye(o){return o==null?"":Er(o)}var $F=oo(function(o,l){if(ka(l)||hr(l)){bn(l,Ft(l),o);return}for(var f in l)qe.call(l,f)&&_a(o,f,l[f])}),qx=oo(function(o,l){bn(l,dr(l),o)}),mu=oo(function(o,l,f,m){bn(l,dr(l),o,m)}),YF=oo(function(o,l,f,m){bn(l,Ft(l),o,m)}),XF=Bn(eg);function GF(o,l){var f=so(o);return l==null?f:k_(f,l)}var qF=Me(function(o,l){o=Je(o);var f=-1,m=l.length,_=m>2?l[2]:t;for(_&&tr(l[0],l[1],_)&&(m=1);++f<m;)for(var E=l[f],O=dr(E),D=-1,B=O.length;++D<B;){var Z=O[D],J=o[Z];(J===t||sn(J,ro[Z])&&!qe.call(o,Z))&&(o[Z]=E[Z])}return o}),KF=Me(function(o){return o.push(t,dx),Cr(Kx,t,o)});function ZF(o,l){return c_(o,me(l,3),yn)}function JF(o,l){return c_(o,me(l,3),rg)}function QF(o,l){return o==null?o:tg(o,me(l,3),dr)}function eL(o,l){return o==null?o:P_(o,me(l,3),dr)}function tL(o,l){return o&&yn(o,me(l,3))}function rL(o,l){return o&&rg(o,me(l,3))}function nL(o){return o==null?[]:Zl(o,Ft(o))}function iL(o){return o==null?[]:Zl(o,dr(o))}function jg(o,l,f){var m=o==null?t:as(o,l);return m===t?f:m}function sL(o,l){return o!=null&&px(o,l,Ij)}function Fg(o,l){return o!=null&&px(o,l,Aj)}var oL=ax(function(o,l,f){l!=null&&typeof l.toString!="function"&&(l=Rl.call(l)),o[l]=f},Ng(fr)),aL=ax(function(o,l,f){l!=null&&typeof l.toString!="function"&&(l=Rl.call(l)),qe.call(o,l)?o[l].push(f):o[l]=[f]},me),cL=Me(Sa);function Ft(o){return hr(o)?T_(o):og(o)}function dr(o){return hr(o)?T_(o,!0):Vj(o)}function lL(o,l){var f={};return l=me(l,3),yn(o,function(m,_,E){Rn(f,l(m,_,E),m)}),f}function uL(o,l){var f={};return l=me(l,3),yn(o,function(m,_,E){Rn(f,_,l(m,_,E))}),f}var hL=oo(function(o,l,f){Jl(o,l,f)}),Kx=oo(function(o,l,f,m){Jl(o,l,f,m)}),dL=Bn(function(o,l){var f={};if(o==null)return f;var m=!1;l=at(l,function(E){return E=bi(E,o),m||(m=E.length>1),E}),bn(o,wg(o),f),m&&(f=zr(f,g|p|y,o7));for(var _=l.length;_--;)dg(f,l[_]);return f});function fL(o,l){return Zx(o,fu(me(l)))}var gL=Bn(function(o,l){return o==null?{}:zj(o,l)});function Zx(o,l){if(o==null)return{};var f=at(wg(o),function(m){return[m]});return l=me(l),W_(o,f,function(m,_){return l(m,_[0])})}function pL(o,l,f){l=bi(l,o);var m=-1,_=l.length;for(_||(_=1,o=t);++m<_;){var E=o==null?t:o[wn(l[m])];E===t&&(m=_,E=f),o=Wn(E)?E.call(o):E}return o}function mL(o,l,f){return o==null?o:Ta(o,l,f)}function vL(o,l,f,m){return m=typeof m=="function"?m:t,o==null?o:Ta(o,l,f,m)}var Jx=ux(Ft),Qx=ux(dr);function yL(o,l,f){var m=Ce(o),_=m||_i(o)||lo(o);if(l=me(l,4),f==null){var E=o&&o.constructor;_?f=m?new E:[]:ht(o)?f=Wn(E)?so(zl(o)):{}:f={}}return(_?Rr:yn)(o,function(O,D,B){return l(f,O,D,B)}),f}function bL(o,l){return o==null?!0:dg(o,l)}function wL(o,l,f){return o==null?o:X_(o,l,pg(f))}function _L(o,l,f,m){return m=typeof m=="function"?m:t,o==null?o:X_(o,l,pg(f),m)}function uo(o){return o==null?[]:Xf(o,Ft(o))}function xL(o){return o==null?[]:Xf(o,dr(o))}function SL(o,l,f){return f===t&&(f=l,l=t),f!==t&&(f=Ur(f),f=f===f?f:0),l!==t&&(l=Ur(l),l=l===l?l:0),os(Ur(o),l,f)}function CL(o,l,f){return l=Hn(l),f===t?(f=l,l=0):f=Hn(f),o=Ur(o),Mj(o,l,f)}function TL(o,l,f){if(f&&typeof f!="boolean"&&tr(o,l,f)&&(l=f=t),f===t&&(typeof l=="boolean"?(f=l,l=t):typeof o=="boolean"&&(f=o,o=t)),o===t&&l===t?(o=0,l=1):(o=Hn(o),l===t?(l=o,o=0):l=Hn(l)),o>l){var m=o;o=l,l=m}if(f||o%1||l%1){var _=S_();return $t(o+_*(l-o+n6("1e-"+((_+"").length-1))),l)}return lg(o,l)}var EL=ao(function(o,l,f){return l=l.toLowerCase(),o+(f?eS(l):l)});function eS(o){return Lg(Ye(o).toLowerCase())}function tS(o){return o=Ye(o),o&&o.replace(I3,m6).replace(X3,"")}function kL(o,l,f){o=Ye(o),l=Er(l);var m=o.length;f=f===t?m:os(Ie(f),0,m);var _=f;return f-=l.length,f>=0&&o.slice(f,_)==l}function IL(o){return o=Ye(o),o&&Mw.test(o)?o.replace(ts,v6):o}function AL(o){return o=Ye(o),o&&Sr.test(o)?o.replace(Be,"\\$&"):o}var ML=ao(function(o,l,f){return o+(f?"-":"")+l.toLowerCase()}),OL=ao(function(o,l,f){return o+(f?" ":"")+l.toLowerCase()}),PL=ix("toLowerCase");function DL(o,l,f){o=Ye(o),l=Ie(l);var m=l?eo(o):0;if(!l||m>=l)return o;var _=(l-m)/2;return iu($l(_),f)+o+iu(Ul(_),f)}function jL(o,l,f){o=Ye(o),l=Ie(l);var m=l?eo(o):0;return l&&m<l?o+iu(l-m,f):o}function FL(o,l,f){o=Ye(o),l=Ie(l);var m=l?eo(o):0;return l&&m<l?iu(l-m,f)+o:o}function LL(o,l,f){return f||l==null?l=0:l&&(l=+l),H6(Ye(o).replace(vn,""),l||0)}function NL(o,l,f){return(f?tr(o,l,f):l===t)?l=1:l=Ie(l),ug(Ye(o),l)}function RL(){var o=arguments,l=Ye(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var VL=ao(function(o,l,f){return o+(f?"_":"")+l.toLowerCase()});function BL(o,l,f){return f&&typeof f!="number"&&tr(o,l,f)&&(l=f=t),f=f===t?ne:f>>>0,f?(o=Ye(o),o&&(typeof l=="string"||l!=null&&!Dg(l))&&(l=Er(l),!l&&Qs(o))?wi(rn(o),0,f):o.split(l,f)):[]}var zL=ao(function(o,l,f){return o+(f?" ":"")+Lg(l)});function WL(o,l,f){return o=Ye(o),f=f==null?0:os(Ie(f),0,o.length),l=Er(l),o.slice(f,f+l.length)==l}function HL(o,l,f){var m=C.templateSettings;f&&tr(o,l,f)&&(l=t),o=Ye(o),l=mu({},l,m,hx);var _=mu({},l.imports,m.imports,hx),E=Ft(_),O=Xf(_,E),D,B,Z=0,J=l.interpolate||Al,ee="__p += '",ae=qf((l.escape||Al).source+"|"+J.source+"|"+(J===Of?x3:Al).source+"|"+(l.evaluate||Al).source+"|$","g"),ge="//# sourceURL="+(qe.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++J3+"]")+`
`;o.replace(ae,function(ye,De,Le,Ir,rr,Ar){return Le||(Le=Ir),ee+=o.slice(Z,Ar).replace(A3,y6),De&&(D=!0,ee+=`' +
__e(`+De+`) +
'`),rr&&(B=!0,ee+=`';
`+rr+`;
__p += '`),Le&&(ee+=`' +
((__t = (`+Le+`)) == null ? '' : __t) +
'`),Z=Ar+ye.length,ye}),ee+=`';
`;var ve=qe.call(l,"variable")&&l.variable;if(!ve)ee=`with (obj) {
`+ee+`
}
`;else if(w3.test(ve))throw new Se(c);ee=(B?ee.replace(qs,""):ee).replace(Ks,"$1").replace(Mf,"$1;"),ee="function("+(ve||"obj")+`) {
`+(ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(D?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var Ae=nS(function(){return He(E,ge+"return "+ee).apply(t,O)});if(Ae.source=ee,Pg(Ae))throw Ae;return Ae}function UL(o){return Ye(o).toLowerCase()}function $L(o){return Ye(o).toUpperCase()}function YL(o,l,f){if(o=Ye(o),o&&(f||l===t))return d_(o);if(!o||!(l=Er(l)))return o;var m=rn(o),_=rn(l),E=f_(m,_),O=g_(m,_)+1;return wi(m,E,O).join("")}function XL(o,l,f){if(o=Ye(o),o&&(f||l===t))return o.slice(0,m_(o)+1);if(!o||!(l=Er(l)))return o;var m=rn(o),_=g_(m,rn(l))+1;return wi(m,0,_).join("")}function GL(o,l,f){if(o=Ye(o),o&&(f||l===t))return o.replace(vn,"");if(!o||!(l=Er(l)))return o;var m=rn(o),_=f_(m,rn(l));return wi(m,_).join("")}function qL(o,l){var f=U,m=K;if(ht(l)){var _="separator"in l?l.separator:_;f="length"in l?Ie(l.length):f,m="omission"in l?Er(l.omission):m}o=Ye(o);var E=o.length;if(Qs(o)){var O=rn(o);E=O.length}if(f>=E)return o;var D=f-eo(m);if(D<1)return m;var B=O?wi(O,0,D).join(""):o.slice(0,D);if(_===t)return B+m;if(O&&(D+=B.length-D),Dg(_)){if(o.slice(D).search(_)){var Z,J=B;for(_.global||(_=qf(_.source,Ye(jw.exec(_))+"g")),_.lastIndex=0;Z=_.exec(J);)var ee=Z.index;B=B.slice(0,ee===t?D:ee)}}else if(o.indexOf(Er(_),D)!=D){var ae=B.lastIndexOf(_);ae>-1&&(B=B.slice(0,ae))}return B+m}function KL(o){return o=Ye(o),o&&kl.test(o)?o.replace(El,T6):o}var ZL=ao(function(o,l,f){return o+(f?" ":"")+l.toUpperCase()}),Lg=ix("toUpperCase");function rS(o,l,f){return o=Ye(o),l=f?t:l,l===t?w6(o)?I6(o):h6(o):o.match(l)||[]}var nS=Me(function(o,l){try{return Cr(o,t,l)}catch(f){return Pg(f)?f:new Se(f)}}),JL=Bn(function(o,l){return Rr(l,function(f){f=wn(f),Rn(o,f,Mg(o[f],o))}),o});function QL(o){var l=o==null?0:o.length,f=me();return o=l?at(o,function(m){if(typeof m[1]!="function")throw new Vr(a);return[f(m[0]),m[1]]}):[],Me(function(m){for(var _=-1;++_<l;){var E=o[_];if(Cr(E[0],this,m))return Cr(E[1],this,m)}})}function e9(o){return Tj(zr(o,g))}function Ng(o){return function(){return o}}function t9(o,l){return o==null||o!==o?l:o}var r9=ox(),n9=ox(!0);function fr(o){return o}function Rg(o){return L_(typeof o=="function"?o:zr(o,g))}function i9(o){return R_(zr(o,g))}function s9(o,l){return V_(o,zr(l,g))}var o9=Me(function(o,l){return function(f){return Sa(f,o,l)}}),a9=Me(function(o,l){return function(f){return Sa(o,f,l)}});function Vg(o,l,f){var m=Ft(l),_=Zl(l,m);f==null&&!(ht(l)&&(_.length||!m.length))&&(f=l,l=o,o=this,_=Zl(l,Ft(l)));var E=!(ht(f)&&"chain"in f)||!!f.chain,O=Wn(o);return Rr(_,function(D){var B=l[D];o[D]=B,O&&(o.prototype[D]=function(){var Z=this.__chain__;if(E||Z){var J=o(this.__wrapped__),ee=J.__actions__=ur(this.__actions__);return ee.push({func:B,args:arguments,thisArg:o}),J.__chain__=Z,J}return B.apply(o,gi([this.value()],arguments))})}),o}function c9(){return Vt._===this&&(Vt._=j6),this}function Bg(){}function l9(o){return o=Ie(o),Me(function(l){return B_(l,o)})}var u9=vg(at),h9=vg(a_),d9=vg(Wf);function iS(o){return Cg(o)?Hf(wn(o)):Wj(o)}function f9(o){return function(l){return o==null?t:as(o,l)}}var g9=cx(),p9=cx(!0);function zg(){return[]}function Wg(){return!1}function m9(){return{}}function v9(){return""}function y9(){return!0}function b9(o,l){if(o=Ie(o),o<1||o>oe)return[];var f=ne,m=$t(o,ne);l=me(l),o-=ne;for(var _=Yf(m,l);++f<o;)l(f);return _}function w9(o){return Ce(o)?at(o,wn):kr(o)?[o]:ur(Cx(Ye(o)))}function _9(o){var l=++P6;return Ye(o)+l}var x9=nu(function(o,l){return o+l},0),S9=yg("ceil"),C9=nu(function(o,l){return o/l},1),T9=yg("floor");function E9(o){return o&&o.length?Kl(o,fr,ng):t}function k9(o,l){return o&&o.length?Kl(o,me(l,2),ng):t}function I9(o){return u_(o,fr)}function A9(o,l){return u_(o,me(l,2))}function M9(o){return o&&o.length?Kl(o,fr,ag):t}function O9(o,l){return o&&o.length?Kl(o,me(l,2),ag):t}var P9=nu(function(o,l){return o*l},1),D9=yg("round"),j9=nu(function(o,l){return o-l},0);function F9(o){return o&&o.length?$f(o,fr):0}function L9(o,l){return o&&o.length?$f(o,me(l,2)):0}return C.after=iF,C.ary=Fx,C.assign=$F,C.assignIn=qx,C.assignInWith=mu,C.assignWith=YF,C.at=XF,C.before=Lx,C.bind=Mg,C.bindAll=JL,C.bindKey=Nx,C.castArray=mF,C.chain=Px,C.chunk=T7,C.compact=E7,C.concat=k7,C.cond=QL,C.conforms=e9,C.constant=Ng,C.countBy=F8,C.create=GF,C.curry=Rx,C.curryRight=Vx,C.debounce=Bx,C.defaults=qF,C.defaultsDeep=KF,C.defer=sF,C.delay=oF,C.difference=I7,C.differenceBy=A7,C.differenceWith=M7,C.drop=O7,C.dropRight=P7,C.dropRightWhile=D7,C.dropWhile=j7,C.fill=F7,C.filter=N8,C.flatMap=B8,C.flatMapDeep=z8,C.flatMapDepth=W8,C.flatten=Ix,C.flattenDeep=L7,C.flattenDepth=N7,C.flip=aF,C.flow=r9,C.flowRight=n9,C.fromPairs=R7,C.functions=nL,C.functionsIn=iL,C.groupBy=H8,C.initial=B7,C.intersection=z7,C.intersectionBy=W7,C.intersectionWith=H7,C.invert=oL,C.invertBy=aL,C.invokeMap=$8,C.iteratee=Rg,C.keyBy=Y8,C.keys=Ft,C.keysIn=dr,C.map=uu,C.mapKeys=lL,C.mapValues=uL,C.matches=i9,C.matchesProperty=s9,C.memoize=du,C.merge=hL,C.mergeWith=Kx,C.method=o9,C.methodOf=a9,C.mixin=Vg,C.negate=fu,C.nthArg=l9,C.omit=dL,C.omitBy=fL,C.once=cF,C.orderBy=X8,C.over=u9,C.overArgs=lF,C.overEvery=h9,C.overSome=d9,C.partial=Og,C.partialRight=zx,C.partition=G8,C.pick=gL,C.pickBy=Zx,C.property=iS,C.propertyOf=f9,C.pull=X7,C.pullAll=Mx,C.pullAllBy=G7,C.pullAllWith=q7,C.pullAt=K7,C.range=g9,C.rangeRight=p9,C.rearg=uF,C.reject=Z8,C.remove=Z7,C.rest=hF,C.reverse=Ig,C.sampleSize=Q8,C.set=mL,C.setWith=vL,C.shuffle=eF,C.slice=J7,C.sortBy=nF,C.sortedUniq=s8,C.sortedUniqBy=o8,C.split=BL,C.spread=dF,C.tail=a8,C.take=c8,C.takeRight=l8,C.takeRightWhile=u8,C.takeWhile=h8,C.tap=E8,C.throttle=fF,C.thru=lu,C.toArray=Yx,C.toPairs=Jx,C.toPairsIn=Qx,C.toPath=w9,C.toPlainObject=Gx,C.transform=yL,C.unary=gF,C.union=d8,C.unionBy=f8,C.unionWith=g8,C.uniq=p8,C.uniqBy=m8,C.uniqWith=v8,C.unset=bL,C.unzip=Ag,C.unzipWith=Ox,C.update=wL,C.updateWith=_L,C.values=uo,C.valuesIn=xL,C.without=y8,C.words=rS,C.wrap=pF,C.xor=b8,C.xorBy=w8,C.xorWith=_8,C.zip=x8,C.zipObject=S8,C.zipObjectDeep=C8,C.zipWith=T8,C.entries=Jx,C.entriesIn=Qx,C.extend=qx,C.extendWith=mu,Vg(C,C),C.add=x9,C.attempt=nS,C.camelCase=EL,C.capitalize=eS,C.ceil=S9,C.clamp=SL,C.clone=vF,C.cloneDeep=bF,C.cloneDeepWith=wF,C.cloneWith=yF,C.conformsTo=_F,C.deburr=tS,C.defaultTo=t9,C.divide=C9,C.endsWith=kL,C.eq=sn,C.escape=IL,C.escapeRegExp=AL,C.every=L8,C.find=R8,C.findIndex=Ex,C.findKey=ZF,C.findLast=V8,C.findLastIndex=kx,C.findLastKey=JF,C.floor=T9,C.forEach=Dx,C.forEachRight=jx,C.forIn=QF,C.forInRight=eL,C.forOwn=tL,C.forOwnRight=rL,C.get=jg,C.gt=xF,C.gte=SF,C.has=sL,C.hasIn=Fg,C.head=Ax,C.identity=fr,C.includes=U8,C.indexOf=V7,C.inRange=CL,C.invoke=cL,C.isArguments=us,C.isArray=Ce,C.isArrayBuffer=CF,C.isArrayLike=hr,C.isArrayLikeObject=_t,C.isBoolean=TF,C.isBuffer=_i,C.isDate=EF,C.isElement=kF,C.isEmpty=IF,C.isEqual=AF,C.isEqualWith=MF,C.isError=Pg,C.isFinite=OF,C.isFunction=Wn,C.isInteger=Wx,C.isLength=gu,C.isMap=Hx,C.isMatch=PF,C.isMatchWith=DF,C.isNaN=jF,C.isNative=FF,C.isNil=NF,C.isNull=LF,C.isNumber=Ux,C.isObject=ht,C.isObjectLike=vt,C.isPlainObject=Aa,C.isRegExp=Dg,C.isSafeInteger=RF,C.isSet=$x,C.isString=pu,C.isSymbol=kr,C.isTypedArray=lo,C.isUndefined=VF,C.isWeakMap=BF,C.isWeakSet=zF,C.join=U7,C.kebabCase=ML,C.last=Hr,C.lastIndexOf=$7,C.lowerCase=OL,C.lowerFirst=PL,C.lt=WF,C.lte=HF,C.max=E9,C.maxBy=k9,C.mean=I9,C.meanBy=A9,C.min=M9,C.minBy=O9,C.stubArray=zg,C.stubFalse=Wg,C.stubObject=m9,C.stubString=v9,C.stubTrue=y9,C.multiply=P9,C.nth=Y7,C.noConflict=c9,C.noop=Bg,C.now=hu,C.pad=DL,C.padEnd=jL,C.padStart=FL,C.parseInt=LL,C.random=TL,C.reduce=q8,C.reduceRight=K8,C.repeat=NL,C.replace=RL,C.result=pL,C.round=D9,C.runInContext=V,C.sample=J8,C.size=tF,C.snakeCase=VL,C.some=rF,C.sortedIndex=Q7,C.sortedIndexBy=e8,C.sortedIndexOf=t8,C.sortedLastIndex=r8,C.sortedLastIndexBy=n8,C.sortedLastIndexOf=i8,C.startCase=zL,C.startsWith=WL,C.subtract=j9,C.sum=F9,C.sumBy=L9,C.template=HL,C.times=b9,C.toFinite=Hn,C.toInteger=Ie,C.toLength=Xx,C.toLower=UL,C.toNumber=Ur,C.toSafeInteger=UF,C.toString=Ye,C.toUpper=$L,C.trim=YL,C.trimEnd=XL,C.trimStart=GL,C.truncate=qL,C.unescape=KL,C.uniqueId=_9,C.upperCase=ZL,C.upperFirst=Lg,C.each=Dx,C.eachRight=jx,C.first=Ax,Vg(C,function(){var o={};return yn(C,function(l,f){qe.call(C.prototype,f)||(o[f]=l)}),o}(),{chain:!1}),C.VERSION=n,Rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){C[o].placeholder=C}),Rr(["drop","take"],function(o,l){je.prototype[o]=function(f){f=f===t?1:Dt(Ie(f),0);var m=this.__filtered__&&!l?new je(this):this.clone();return m.__filtered__?m.__takeCount__=$t(f,m.__takeCount__):m.__views__.push({size:$t(f,ne),type:o+(m.__dir__<0?"Right":"")}),m},je.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),Rr(["filter","map","takeWhile"],function(o,l){var f=l+1,m=f==re||f==Q;je.prototype[o]=function(_){var E=this.clone();return E.__iteratees__.push({iteratee:me(_,3),type:f}),E.__filtered__=E.__filtered__||m,E}}),Rr(["head","last"],function(o,l){var f="take"+(l?"Right":"");je.prototype[o]=function(){return this[f](1).value()[0]}}),Rr(["initial","tail"],function(o,l){var f="drop"+(l?"":"Right");je.prototype[o]=function(){return this.__filtered__?new je(this):this[f](1)}}),je.prototype.compact=function(){return this.filter(fr)},je.prototype.find=function(o){return this.filter(o).head()},je.prototype.findLast=function(o){return this.reverse().find(o)},je.prototype.invokeMap=Me(function(o,l){return typeof o=="function"?new je(this):this.map(function(f){return Sa(f,o,l)})}),je.prototype.reject=function(o){return this.filter(fu(me(o)))},je.prototype.slice=function(o,l){o=Ie(o);var f=this;return f.__filtered__&&(o>0||l<0)?new je(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),l!==t&&(l=Ie(l),f=l<0?f.dropRight(-l):f.take(l-o)),f)},je.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},je.prototype.toArray=function(){return this.take(ne)},yn(je.prototype,function(o,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),m=/^(?:head|last)$/.test(l),_=C[m?"take"+(l=="last"?"Right":""):l],E=m||/^find/.test(l);_&&(C.prototype[l]=function(){var O=this.__wrapped__,D=m?[1]:arguments,B=O instanceof je,Z=D[0],J=B||Ce(O),ee=function(De){var Le=_.apply(C,gi([De],D));return m&&ae?Le[0]:Le};J&&f&&typeof Z=="function"&&Z.length!=1&&(B=J=!1);var ae=this.__chain__,ge=!!this.__actions__.length,ve=E&&!ae,Ae=B&&!ge;if(!E&&J){O=Ae?O:new je(this);var ye=o.apply(O,D);return ye.__actions__.push({func:lu,args:[ee],thisArg:t}),new Br(ye,ae)}return ve&&Ae?o.apply(this,D):(ye=this.thru(ee),ve?m?ye.value()[0]:ye.value():ye)})}),Rr(["pop","push","shift","sort","splice","unshift"],function(o){var l=Fl[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",m=/^(?:pop|shift)$/.test(o);C.prototype[o]=function(){var _=arguments;if(m&&!this.__chain__){var E=this.value();return l.apply(Ce(E)?E:[],_)}return this[f](function(O){return l.apply(Ce(O)?O:[],_)})}}),yn(je.prototype,function(o,l){var f=C[l];if(f){var m=f.name+"";qe.call(io,m)||(io[m]=[]),io[m].push({name:l,func:f})}}),io[ru(t,T).name]=[{name:"wrapper",func:t}],je.prototype.clone=K6,je.prototype.reverse=Z6,je.prototype.value=J6,C.prototype.at=k8,C.prototype.chain=I8,C.prototype.commit=A8,C.prototype.next=M8,C.prototype.plant=P8,C.prototype.reverse=D8,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=j8,C.prototype.first=C.prototype.head,ma&&(C.prototype[ma]=O8),C},to=A6();rs?((rs.exports=to)._=to,Rf._=to):Vt._=to}).call(ho)}(fc,fc.exports);var We=fc.exports;const sA=()=>{const{trackItemIds:r,trackItemsMap:e,fps:t,trackItemDetailsMap:n}=qn(),i=We.merge(e,n);return w.jsx(w.Fragment,{children:r.map(s=>{const a=i[s];return Tv[a.type](a,{fps:t})})})};var Ev={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(s=i(s,n(c)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var c in s)e.call(s,c)&&s[c]&&(a=i(a,c));return a}function i(s,a){return a?s?s+" "+a:s+a:s}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(Ev);var oA=Ev.exports;const Oo=aS(oA),aA={asChild:{type:"boolean"}},cA={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},lA={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},Zh=["initial","xs","sm","md","lg","xl"];function kv(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Po(r){return typeof r=="object"&&Object.keys(r).some(e=>Zh.includes(e))}function uA({className:r,customProperties:e,...t}){const n=Iv({allowArbitraryValues:!0,className:r,...t}),i=hA({customProperties:e,...t});return[n,i]}function Iv({allowArbitraryValues:r,value:e,className:t,propValues:n,parseValue:i=s=>s}){const s=[];if(e){if(typeof e=="string"&&n.includes(e))return Av(t,e,i);if(Po(e)){const a=e;for(const c in a){if(!kv(a,c)||!Zh.includes(c))continue;const u=a[c];if(u!==void 0){if(n.includes(u)){const h=Av(t,u,i),d=c==="initial"?h:`${c}:${h}`;s.push(d)}else if(r){const h=c==="initial"?t:`${c}:${t}`;s.push(h)}}}return s.join(" ")}if(r)return t}}function Av(r,e,t){const n=r?"-":"",i=t(e),s=i?.startsWith("-"),a=s?"-":"",c=s?i?.substring(1):i;return`${a}${r}${n}${c}`}function hA({customProperties:r,value:e,propValues:t,parseValue:n=i=>i}){let i={};if(!(!e||typeof e=="string"&&t.includes(e))){if(typeof e=="string"&&(i=Object.fromEntries(r.map(s=>[s,e]))),Po(e)){const s=e;for(const a in s){if(!kv(s,a)||!Zh.includes(a))continue;const c=s[a];if(!t.includes(c))for(const u of r)i={[a==="initial"?u:`${u}-${a}`]:c,...i}}}for(const s in i){const a=i[s];a!==void 0&&(i[s]=n(a))}return i}}function Mv(...r){let e={};for(const t of r)t&&(e={...e,...t});return Object.keys(e).length?e:void 0}function dA(...r){return Object.assign({},...r)}function fA(r,...e){let t,n;const i={...r},s=dA(...e);for(const a in s){let c=i[a];const u=s[a];if(u.default!==void 0&&c===void 0&&(c=u.default),u.type==="enum"&&![u.default,...u.values].includes(c)&&!Po(c)&&(c=u.default),i[a]=c,"className"in u&&u.className){delete i[a];const h="responsive"in u;if(!c||Po(c)&&!h)continue;if(Po(c)&&(u.default!==void 0&&c.initial===void 0&&(c.initial=u.default),u.type==="enum"&&([u.default,...u.values].includes(c.initial)||(c.initial=u.default))),u.type==="enum"){const d=Iv({allowArbitraryValues:!1,value:c,className:u.className,propValues:u.values,parseValue:u.parseValue});t=Oo(t,d);continue}if(u.type==="string"||u.type==="enum | string"){const d=u.type==="string"?[]:u.values,[g,p]=uA({className:u.className,customProperties:u.customProperties,propValues:d,parseValue:u.parseValue,value:c});n=Mv(n,p),t=Oo(t,g);continue}if(u.type==="boolean"&&c){t=Oo(t,u.className);continue}}}return i.className=Oo(t,r.className),i.style=Mv(n,r.style),i}const Mi=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],gA={m:{type:"enum | string",values:Mi,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:Mi,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:Mi,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:Mi,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:Mi,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:Mi,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:Mi,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},pA=gS,Oi=["0","1","2","3","4","5","6","7","8","9"],mA={p:{type:"enum | string",className:"rt-r-p",customProperties:["--p"],values:Oi,responsive:!0},px:{type:"enum | string",className:"rt-r-px",customProperties:["--pl","--pr"],values:Oi,responsive:!0},py:{type:"enum | string",className:"rt-r-py",customProperties:["--pt","--pb"],values:Oi,responsive:!0},pt:{type:"enum | string",className:"rt-r-pt",customProperties:["--pt"],values:Oi,responsive:!0},pr:{type:"enum | string",className:"rt-r-pr",customProperties:["--pr"],values:Oi,responsive:!0},pb:{type:"enum | string",className:"rt-r-pb",customProperties:["--pb"],values:Oi,responsive:!0},pl:{type:"enum | string",className:"rt-r-pl",customProperties:["--pl"],values:Oi,responsive:!0}},Jh=["visible","hidden","clip","scroll","auto"],vA=["static","relative","absolute","fixed","sticky"],Do=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],yA=["0","1"],bA=["0","1"],wA={...mA,...cA,...lA,position:{type:"enum",className:"rt-r-position",values:vA,responsive:!0},inset:{type:"enum | string",className:"rt-r-inset",customProperties:["--inset"],values:Do,responsive:!0},top:{type:"enum | string",className:"rt-r-top",customProperties:["--top"],values:Do,responsive:!0},right:{type:"enum | string",className:"rt-r-right",customProperties:["--right"],values:Do,responsive:!0},bottom:{type:"enum | string",className:"rt-r-bottom",customProperties:["--bottom"],values:Do,responsive:!0},left:{type:"enum | string",className:"rt-r-left",customProperties:["--left"],values:Do,responsive:!0},overflow:{type:"enum",className:"rt-r-overflow",values:Jh,responsive:!0},overflowX:{type:"enum",className:"rt-r-ox",values:Jh,responsive:!0},overflowY:{type:"enum",className:"rt-r-oy",values:Jh,responsive:!0},flexBasis:{type:"string",className:"rt-r-fb",customProperties:["--flex-basis"],responsive:!0},flexShrink:{type:"enum | string",className:"rt-r-fs",customProperties:["--flex-shrink"],values:yA,responsive:!0},flexGrow:{type:"enum | string",className:"rt-r-fg",customProperties:["--flex-grow"],values:bA,responsive:!0},gridArea:{type:"string",className:"rt-r-ga",customProperties:["--grid-area"],responsive:!0},gridColumn:{type:"string",className:"rt-r-gc",customProperties:["--grid-column"],responsive:!0},gridColumnStart:{type:"string",className:"rt-r-gcs",customProperties:["--grid-column-start"],responsive:!0},gridColumnEnd:{type:"string",className:"rt-r-gce",customProperties:["--grid-column-end"],responsive:!0},gridRow:{type:"string",className:"rt-r-gr",customProperties:["--grid-row"],responsive:!0},gridRowStart:{type:"string",className:"rt-r-grs",customProperties:["--grid-row-start"],responsive:!0},gridRowEnd:{type:"string",className:"rt-r-gre",customProperties:["--grid-row-end"],responsive:!0}},Qh=["0","1","2","3","4","5","6","7","8","9"],_A={gap:{type:"enum | string",className:"rt-r-gap",customProperties:["--gap"],values:Qh,responsive:!0},gapX:{type:"enum | string",className:"rt-r-cg",customProperties:["--column-gap"],values:Qh,responsive:!0},gapY:{type:"enum | string",className:"rt-r-rg",customProperties:["--row-gap"],values:Qh,responsive:!0}},xA=["div","span"],SA=["none","inline-flex","flex"],CA=["row","column","row-reverse","column-reverse"],TA=["start","center","end","baseline","stretch"],EA=["start","center","end","between"],kA=["nowrap","wrap","wrap-reverse"],IA={as:{type:"enum",values:xA,default:"div"},...aA,display:{type:"enum",className:"rt-r-display",values:SA,responsive:!0},direction:{type:"enum",className:"rt-r-fd",values:CA,responsive:!0},align:{type:"enum",className:"rt-r-ai",values:TA,responsive:!0},justify:{type:"enum",className:"rt-r-jc",values:EA,parseValue:AA,responsive:!0},wrap:{type:"enum",className:"rt-r-fw",values:kA,responsive:!0},..._A};function AA(r){return r==="between"?"space-between":r}const ed=H.forwardRef((r,e)=>{const{className:t,asChild:n,as:i="div",...s}=fA(r,IA,wA,gA);return H.createElement(n?pA:i,{...s,ref:e,className:Oo("rt-Flex",t)})});ed.displayName="Flex";const Ov=()=>{const r=v.useRef(null),{setPlayerRef:e,duration:t,fps:n,size:i}=qn();return v.useEffect(()=>{e(r)},[]),w.jsx(ed,{className:"size-full",children:w.jsx(JI,{ref:r,component:sA,durationInFrames:Math.round(t/1e3*n)||5*30,compositionWidth:1920,compositionHeight:1080,style:{width:"100%",height:"100%"},inputProps:{},fps:n,controls:!0})})},Pv=({scrollLeft:r})=>{const e=v.useRef(null),{playerRef:t,fps:n,scale:i}=qn(),s=Xa(t??void 0),a=yt(s/n*1e3,i.zoom)-r,[c,u]=v.useState(!1),[h,d]=v.useState(0),[g,p]=v.useState(a),y=()=>{u(!1)},b=S=>{u(!0);const T="touches"in S?S.touches[0].clientX:S.clientX;d(T),p(a)},x=S=>{if(c){const k=("touches"in S?S.touches[0].clientX:S.clientX)-h,I=g+k,M=Gn(I,i.zoom);t?.current?.seekTo(M*n/1e3)}};return v.useEffect(()=>{const S=T=>{T.preventDefault()};return c?(document.addEventListener("mousemove",x),document.addEventListener("mouseup",y),document.addEventListener("touchmove",x),document.addEventListener("touchend",y),document.addEventListener("dragstart",S)):(document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",y)),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",y),document.removeEventListener("dragstart",S)}},[c,x,y]),w.jsx("div",{ref:e,role:"button",tabIndex:0,onMouseDown:S=>{b(S)},onTouchStart:S=>{b(S)},onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&b(S)},style:{position:"absolute",left:40+Ya+a,top:80,width:1,height:"calc(100% - 80px)",background:"#d4d4d8",zIndex:10,cursor:"pointer"},children:w.jsxs("div",{className:"relative h-full",children:[w.jsx("div",{className:"absolute top-0  h-full w-3 -translate-x-1/2"}),w.jsx("div",{className:"absolute top-0  h-full w-0.5 -translate-x-1/2 bg-white/50"}),w.jsx("div",{style:{borderRadius:"0 0 20px 20px"},className:"absolute h-3 -translate-x-1/2 px-1.5",children:w.jsx("svg",{height:"12",viewBox:"0 0 12 12",fill:"none",children:w.jsx("path",{fill:"currentColor",d:"M11.6585 7.04881L6.6585 11.4238C6.28148 11.7537 5.71852 11.7537 5.3415 11.4238L0.341495 7.04881C0.12448 6.85892 0 6.58459 0 6.29623V1C0 0.447715 0.447715 0 1 0H11C11.5523 0 12 0.447715 12 1V6.29623C12 6.58459 11.8755 6.85892 11.6585 7.04881Z"})})})]})})},Dv=r=>{const{height:e=40,longLineSize:t=8,shortLineSize:n=6,offsetX:i=$a+Ya,textOffsetY:s=12,textFormat:a=Mm,scrollLeft:c=0,onClick:u}=r,{scale:h}=qn(),d=v.useRef(null),[g,p]=v.useState(null),[y,b]=v.useState({width:0,height:e});v.useEffect(()=>{const k=d.current;if(k){const I=k.getContext("2d");p(I),x(k,I,c)}},[]),v.useEffect(()=>{g&&x(d.current,g,c)},[g,c,h]);const x=(k,I,M)=>{if(!k||!I)return;const N=k.offsetParent.offsetWidth??k.offsetWidth,W=y.height;k.width=N,k.height=W,S(I,M,N,W),b({width:N,height:W})},S=(k,I,M,F)=>{const N=h.zoom,W=h.unit,R=h.segments;k.clearRect(0,0,M,F),k.save(),k.strokeStyle="#71717a",k.fillStyle="#71717a",k.lineWidth=1,k.font=`${Cm}px ${Tm}`,k.textBaseline="top",k.translate(.5,0),k.beginPath();const X=W*N*_o,U=Math.floor(I/X),$=Math.ceil((I+M)/X)-U;for(let G=0;G<=$;++G){const re=G+U;if(re<0)continue;const fe=re*X/N,Q=(fe-I/N)*N;if(Q<-X||Q>=M+X)continue;const ue=a(fe),se=-k.measureText(ue).width/2;k.fillText(ue,Q+se+i,s)}for(let G=0;G<=$;++G){const re=G+U;if(re<0)continue;const Q=re*X-I+i;for(let ue=0;ue<R;++ue){const oe=Q+ue/R*X;if(oe<0||oe>=M)continue;const se=ue%R?n:t;se===n?k.strokeStyle="#a1a1aa":k.strokeStyle="#d4d4d8";const de=32,[ne,Fe]=[oe,de],[Ge,Re]=[ne,Fe+se];k.beginPath(),k.moveTo(ne,Fe),k.lineTo(Ge,Re),k.stroke()}}k.restore()},T=k=>{const I=d.current;if(!I)return;const M=I.getBoundingClientRect(),N=k.clientX-M.left+c-$a;u?.(N)};return w.jsx("div",{className:"border-border border-t",style:{position:"relative",width:"100%",height:`${y.height}px`,backgroundColor:"transparent"},children:w.jsx("canvas",{onClick:T,ref:d,height:y.height})})},MA=()=>w.jsx(ed,{flexGrow:"1",justify:"center",width:"100%",height:"100%",className:"bg-scene py-3",children:w.jsx("div",{className:"max-w-3xl flex-1  w-full h-full flex relative",children:w.jsx(Ov,{})})});function L(r,e,t){return(e=function(n){var i=function(s,a){if(typeof s!="object"||!s)return s;var c=s[Symbol.toPrimitive];if(c!==void 0){var u=c.call(s,a);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}(n,"string");return typeof i=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function jv(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function j(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jv(Object(t),!0).forEach(function(n){L(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jv(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function st(r,e){if(r==null)return{};var t,n,i=function(a,c){if(a==null)return{};var u={};for(var h in a)if({}.hasOwnProperty.call(a,h)){if(c.indexOf(h)>=0)continue;u[h]=a[h]}return u}(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function ei(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}class Fv{constructor(){L(this,"browserShadowBlurConstant",1),L(this,"DPI",96),L(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),L(this,"perfLimitSizeTotal",2097152),L(this,"maxCacheSideLimit",4096),L(this,"minCacheSideLimit",256),L(this,"disableStyleCopyPaste",!1),L(this,"enableGLFiltering",!0),L(this,"textureSize",4096),L(this,"forceGLPutImageData",!1),L(this,"cachesBoundsOfCurve",!1),L(this,"fontPaths",{}),L(this,"NUM_FRACTION_DIGITS",4)}}const Ve=new class extends Fv{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=j(j({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>{delete this.fontPaths[r]})}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new Fv,t=r?.reduce((n,i)=>(n[i]=e[i],n),{})||e;this.configure(t)}},ti=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[r]("fabric",...t)};class hn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class Lv extends hn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class OA{}class PA extends OA{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,n),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),ti("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const DA={};let Nv;const dn=()=>Nv||(Nv={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new PA,dispose(){},copyPasteData:DA}),Ms=()=>dn().document,gc=()=>dn().window,Rv=()=>{var r;return Math.max((r=Ve.devicePixelRatio)!==null&&r!==void 0?r:gc().devicePixelRatio,1)},jo=new class{constructor(){L(this,"charWidthsCache",{}),L(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:n}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=Ve,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},td="6.5.4";function Pi(){}const ri=Math.PI/2,Sn=2*Math.PI,rd=Math.PI/180,qt=Object.freeze([1,0,0,1,0,0]),nd=16,ni=.4477152502,Ee="center",Ue="left",nr="top",id="bottom",bt="right",ir="none",sd=/\r?\n/,Vv="moving",pc="scaling",Bv="rotating",od="rotate",zv="skewing",Fo="resizing",Wv="modifyPoly",jA="modifyPath",mc="changed",vc="scale",Kt="scaleX",pr="scaleY",Os="skewX",Ps="skewY",kt="fill",sr="stroke",yc="modified",Ds="json",ad="svg",ie=new class{constructor(){this[Ds]=new Map,this[ad]=new Map}has(r){return this[Ds].has(r)}getClass(r){const e=this[Ds].get(r);if(!e)throw new hn("No class registered for ".concat(r));return e}setClass(r,e){e?this[Ds].set(e,r):(this[Ds].set(r.type,r),this[Ds].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[ad].get(r)}setSVGClass(r,e){this[ad].set(e??r.type.toLowerCase(),r)}},bc=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach(e=>e.abort()),r}cancelByCanvas(r){if(!r)return[];const e=this.filter(t=>{var n;return t.target===r||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===r});return e.forEach(t=>t.abort()),e}cancelByTarget(r){if(!r)return[];const e=this.filter(t=>t.target===r);return e.forEach(t=>t.abort()),e}};class FA{constructor(){L(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[i,s]=n;this.on(i,s)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(i=>{let[s,a]=i;n.push(this.once(s,a))}),()=>n.forEach(i=>i())}if(t){const n=this.on(e,function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];t.call(this,...s),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],i=n.indexOf(t);i>-1&&n.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[i,s]=n;this._removeEventListener(i,s)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const i=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const Di=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},Xr=r=>{if(r===0)return 1;switch(Math.abs(r)/ri){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},Gr=r=>{if(r===0)return 0;const e=r/ri,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class z{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new z(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new z(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new z(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new z(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new z(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new z(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new z(this.x/e.x,this.y/e.y)}scalarDivide(e){return new z(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new z(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new z(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new z(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new z(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cd;const n=Gr(e),i=Xr(e),s=this.subtract(t);return new z(s.x*i-s.y*n,s.x*n+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new z(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const cd=new z(0,0),wc=r=>!!r&&Array.isArray(r._objects);function Hv(r){class e extends r{constructor(){super(...arguments),L(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];const a=this._objects.push(...i);return i.forEach(c=>this._onObjectAdded(c)),a}insertAt(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return this._objects.splice(n,0,...s),s.forEach(c=>this._onObjectAdded(c)),this._objects.length}remove(){const n=this._objects,i=[];for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return a.forEach(u=>{const h=n.indexOf(u);h!==-1&&(n.splice(h,1),i.push(u),this._onObjectRemoved(u))}),i}forEachObject(n){this.getObjects().forEach((i,s,a)=>n(i,s,a))}getObjects(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(a=>a.isType(...i))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,i){return!!this._objects.includes(n)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(n,!0))}complexity(){return this._objects.reduce((n,i)=>n+=i.complexity?i.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(Di(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(Di(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==0){const a=this.findNewLowerIndex(n,s,i);return Di(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,i){if(!n)return!1;const s=this._objects.indexOf(n);if(s!==this._objects.length-1){const a=this.findNewUpperIndex(n,s,i);return Di(this._objects,n),this._objects.splice(a,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,i){return n!==this._objects[i]&&(Di(this._objects,n),this._objects.splice(i,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,i,s){let a;if(s){a=i;for(let c=i-1;c>=0;--c)if(n.isOverlapping(this._objects[c])){a=c;break}}else a=i-1;return a}findNewUpperIndex(n,i,s){let a;if(s){a=i;for(let c=i+1;c<this._objects.length;++c)if(n.isOverlapping(this._objects[c])){a=c;break}}else a=i+1;return a}collectObjects(n){let{left:i,top:s,width:a,height:c}=n,{includeIntersecting:u=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=[],d=new z(i,s),g=d.add(new z(a,c));for(let p=this._objects.length-1;p>=0;p--){const y=this._objects[p];y.selectable&&y.visible&&(u&&y.intersectsWithRect(d,g)||y.isContainedWithinRect(d,g)||u&&y.containsPoint(d)||u&&y.containsPoint(g))&&h.push(y)}return h}}return e}class Uv extends FA{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Lo(r){return gc().requestAnimationFrame(r)}function $v(r){return gc().cancelAnimationFrame(r)}let LA=0;const ii=()=>LA++,Or=()=>{const r=Ms().createElement("canvas");if(!r||r.getContext===void 0)throw new hn("Failed to create `canvas` element");return r},Yv=()=>Ms().createElement("img"),qr=r=>{const e=Or();return e.width=r.width,e.height=r.height,e},ld=(r,e,t)=>r.toDataURL("image/".concat(e),t),gt=r=>r*rd,si=r=>r/rd,Xv=r=>r.every((e,t)=>e===qt[t]),Ht=(r,e,t)=>new z(r).transform(e,t),mr=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:n,y:i}=new z(r[4],r[5]).transform(t,!0);return t[4]=-n,t[5]=-i,t},pt=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],_c=(r,e)=>r.reduceRight((t,n)=>n&&t?pt(n,t,e):n||t,void 0)||qt.concat(),Gv=r=>{let[e,t]=r;return Math.atan2(t,e)},js=r=>{const e=Gv(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(t),i=(r[0]*r[3]-r[2]*r[1])/n,s=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:si(e),scaleX:n,scaleY:i,skewX:si(s),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},Fs=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ls(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=gt(r),i=Xr(n),s=Gr(n);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const xc=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},qv=r=>Math.tan(gt(r)),ud=r=>[1,0,qv(r),1,0,0],hd=r=>[1,qv(r),0,1,0,0],No=r=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:i=!1,skewX:s=0,skewY:a=0}=r,c=xc(n?-e:e,i?-t:t);return s&&(c=pt(c,ud(s),!0)),a&&(c=pt(c,hd(a),!0)),c},Kv=r=>{const{translateX:e=0,translateY:t=0,angle:n=0}=r;let i=Fs(e,t);n&&(i=pt(i,Ls({angle:n})));const s=No(r);return Xv(s)||(i=pt(i,s)),i},Ro=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,i){if(e&&e.aborted)return i(new Lv("loadImage"));const s=Yv();let a;e&&(a=function(u){s.src="",i(u)},e.addEventListener("abort",a,{once:!0}));const c=function(){s.onload=s.onerror=null,a&&e?.removeEventListener("abort",a),n(s)};r?(s.onload=c,s.onerror=function(){a&&e?.removeEventListener("abort",a),i(new hn("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=r):c()})},Ns=function(r){let{signal:e,reviver:t=Pi}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(r.map(a=>ie.getClass(a.type).fromObject(a,{signal:e}).then(c=>(t(a,c),s.push(c),c)))).then(n).catch(a=>{s.forEach(c=>{c.dispose&&c.dispose()}),i(a)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},Vo=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const i=[];e&&e.addEventListener("abort",n,{once:!0});const s=Object.values(r).map(c=>c&&c.type&&ie.has(c.type)?Ns([c],{signal:e}).then(u=>{let[h]=u;return i.push(h),h}):c),a=Object.keys(r);Promise.all(s).then(c=>c.reduce((u,h,d)=>(u[a[d]]=h,u),{})).then(t).catch(c=>{i.forEach(u=>{u.dispose&&u.dispose()}),n(c)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},ji=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in r&&(e[t]=r[t]),e),{})},dd=(r,e)=>Object.keys(r).reduce((t,n)=>(e(r[n],n,r)&&(t[n]=r[n]),t),{}),Zv={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},fd=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),Jv=(r,e,t,n)=>{r/=255,e/=255,t/=255;const i=Math.max(r,e,t),s=Math.min(r,e,t);let a,c;const u=(i+s)/2;if(i===s)a=c=0;else{const h=i-s;switch(c=u>.5?h/(2-i-s):h/(i+s),i){case r:a=(e-t)/h+(e<t?6:0);break;case e:a=(t-r)/h+2;break;case t:a=(r-e)/h+4}a/=6}return[Math.round(360*a),Math.round(100*c),Math.round(100*u),n]},Qv=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},Sc=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),e1=r=>{let[e,t,n,i=1]=r;const s=Math.round(.3*e+.59*t+.11*n);return[s,s,s,i]};class Xe{constructor(e){if(L(this,"isUnrecognised",!1),e)if(e instanceof Xe)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,i,s=1]=e;this.setSource([t,n,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Zv&&(e=Zv[e]),e==="transparent"?[255,255,255,0]:Xe.sourceFromHex(e)||Xe.sourceFromRgb(e)||Xe.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Jv(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,i]=Jv(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,i]=this.getSource();return"".concat(Sc(e)).concat(Sc(t)).concat(Sc(n)).concat(Sc(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(e1(this.getSource())),this}toBlackWhite(e){const[t,,,n]=e1(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(e){e instanceof Xe||(e=new Xe(e));const t=this.getSource(),n=e.getSource(),[i,s,a]=t.map((c,u)=>Math.round(.5*c+.5*n[u]));return this.setSource([i,s,a,t[3]]),this}static fromRgb(e){return Xe.fromRgba(e)}static fromRgba(e){return new Xe(Xe.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,i,s]=t.slice(1,4).map(a=>{const c=parseFloat(a);return a.endsWith("%")?Math.round(2.55*c):c});return[n,i,s,Qv(t[4])]}}static fromHsl(e){return Xe.fromHsla(e)}static fromHsla(e){return new Xe(Xe.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(Xe.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let a,c,u;if(i===0)a=c=u=s;else{const h=s<=.5?s*(i+1):s+i-s*i,d=2*s-h;a=fd(d,h,n+1/3),c=fd(d,h,n),u=fd(d,h,n-1/3)}return[Math.round(255*a),Math.round(255*c),Math.round(255*u),Qv(t[4])]}static fromHex(e){return new Xe(Xe.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(u=>u+u):t.match(/.{2}/g);const[i,s,a,c=255]=n.map(u=>parseInt(u,16));return[i,s,a,c/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?si(n):t.includes("turn")?360*n:n}}const ot=(r,e)=>parseFloat(Number(r).toFixed(e)),Fi=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nd;const t=/\D{0,2}$/.exec(r),n=parseFloat(r),i=Ve.DPI;switch(t?.[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*e;default:return n}},t1=r=>{const[e,t]=r.trim().split(" "),[n,i]=(s=e)&&s!==ir?[s.slice(1,4),s.slice(5,8)]:s===ir?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:n,alignY:i}},Bo=r=>"matrix("+r.map(e=>ot(e,Ve.NUM_FRACTION_DIGITS)).join(" ")+")",zo=function(r,e){let t,n,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new Xe(e),a=s.getAlpha();t=s.toRgb(),a!==1&&(n=a.toString())}else t="none";return i?"".concat(r,": ").concat(t,"; ").concat(n?"".concat(r,"-opacity: ").concat(n,"; "):""):"".concat(r,'="').concat(t,'" ').concat(n?"".concat(r,'-opacity="').concat(n,'" '):"")},Pr=r=>!!r&&r.toLive!==void 0,r1=r=>!!r&&typeof r.toObject=="function",n1=r=>!!r&&r.offsetX!==void 0&&"source"in r,Li=r=>!!r&&"multiSelectionStacking"in r;function i1(r){const e=r&&Kr(r);let t=0,n=0;if(!r||!e)return{left:t,top:n};let i=r;const s=e.documentElement,a=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=a.scrollLeft||s.scrollLeft||0,n=a.scrollTop||s.scrollTop||0):(t+=i.scrollLeft||0,n+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:n}}const Kr=r=>r.ownerDocument||null,s1=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},o1=function(r,e,t){let{width:n,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=i,s>1&&(r.setAttribute("width",(n*s).toString()),r.setAttribute("height",(i*s).toString()),e.scale(s,s))},gd=(r,e)=>{let{width:t,height:n}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function a1(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=ir,r}class c1{constructor(e){L(this,"_originalCanvasStyle",void 0),L(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&Ms().getElementById(e)||Or();var n;if(t.hasAttribute("data-fabric"))throw new hn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:i}=this.lower;o1(n,i,e,t)}setCSSDimensions(e){gd(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&Kr(e),i={left:0,top:0};if(!n)return i;const s=((t=s1(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let a={left:0,top:0};const c=n.documentElement;e.getBoundingClientRect!==void 0&&(a=e.getBoundingClientRect());const u=i1(e);return{left:a.left+u.left-(c.clientLeft||0)+i.left,top:a.top+u.top-(c.clientTop||0)+i.top}}(this.lower.el)}dispose(){dn().dispose(this.lower.el),delete this.lower}}const NA={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...qt]};class Wo extends Hv(Uv){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Wo.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new c1(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(ti("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Rv():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=j({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,i=[...this.viewportTransform],s=Ht(e,mr(i));i[0]=t,i[3]=t;const a=Ht(s,i);i[4]+=n.x-a.x,i[5]+=n.y-a.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new z(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new z(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Lo(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=mr(this.viewportTransform),i=Ht({x:0,y:0},n),s=Ht({x:e,y:t},n),a=i.min(s),c=i.max(s);return this.vptCoords={tl:a,tr:new z(c.x,a.y),bl:new z(a.x,c.y),br:c}}cancelRequestedRender(){this.nextRenderHandle&&($v(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,i=t.length;n<i;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,a=this["".concat(t,"Vpt")];if(!n&&!i)return;const c=Pr(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=c?n.toLive(e):n,a&&e.transform(...s),c){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const u=n.gradientTransform||n.patternTransform;u&&e.transform(...u)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:u}=this;this.skipOffscreen=a,a&&e.transform(...s),i.render(e),this.skipOffscreen=u,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new z(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new z(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new z(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new z(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new z(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Ht(this.getCenterPoint(),mr(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Ee,Ee),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return j(j(j({version:td},ji(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,n){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const n={},i=this.backgroundImage,s=this.overlayImage,a=this.backgroundColor,c=this.overlayColor;return Pr(a)?a.excludeFromExport||(n.background=a.toObject(t)):a&&(n.background=a),Pr(c)?c.excludeFromExport||(n.overlay=c.toObject(t)):c&&(n.overlay=c),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(n.overlayImage=this._toObject(s,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=Ve.NUM_FRACTION_DIGITS,a=t.viewBox;let c;if(a)c='viewBox="'.concat(a.x," ").concat(a.y," ").concat(a.width," ").concat(a.height,'" ');else if(this.svgViewportTransformation){const u=this.viewportTransform;c='viewBox="'.concat(ot(-u[4]/u[0],s)," ").concat(ot(-u[5]/u[3],s)," ").concat(ot(this.width/u[0],s)," ").concat(ot(this.height/u[3],s),'" ')}else c='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',c,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",td,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(ii()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Pr(t)){const n=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return t.toSVG(s,{additionalTransform:n?Bo(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=Ve.fontPaths;this._objects.forEach(function s(a){e.push(a),wc(a)&&a._objects.forEach(s)}),e.forEach(s=>{if(!(a=s)||typeof a._renderText!="function")return;var a;const{styles:c,fontFamily:u}=s;!t[u]&&n[u]&&(t[u]=!0,c&&Object.values(c).forEach(h=>{Object.values(h).forEach(d=>{let{fontFamily:g=""}=d;!t[g]&&n[g]&&(t[g]=!0)})}))});const i=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(n[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Pr(n)){const i=n.repeat||"",s=this.width,a=this.height,c=this["".concat(t,"Vpt")]?Bo(mr(this.viewportTransform)):"";e.push('<rect transform="'.concat(c," translate(").concat(s/2,",").concat(a/2,')" x="').concat(n.offsetX-s/2,'" y="').concat(n.offsetY-a/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!n1(n)?s:n.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!n1(n)?a:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new hn("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:a,background:c,overlayImage:u,overlay:h,clipPath:d}=i,g=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ns(s,{reviver:t,signal:n}),Vo({backgroundImage:a,backgroundColor:c,overlayImage:u,overlayColor:h,clipPath:d},{signal:n})]).then(p=>{let[y,b]=p;return this.clear(),this.add(...y),this.set(i),this.set(b),this.renderOnAddRemove=g,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=qr(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,a=i*(s?this.getRetinaScaling():1);return ld(this.toCanvasElement(a,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:i,top:s,filter:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=(t||this.width)*e,u=(n||this.height)*e,h=this.getZoom(),d=this.width,g=this.height,p=this.skipControlsDrawing,y=h*e,b=this.viewportTransform,x=[y,0,0,y,(b[4]-(i||0))*e,(b[5]-(s||0))*e],S=this.enableRetinaScaling,T=qr({width:c,height:u}),k=a?this._objects.filter(I=>a(I)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=x,this.width=c,this.height=u,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),k),this.viewportTransform=b,this.width=d,this.height=g,this.calcViewportBoundaries(),this.enableRetinaScaling=S,this.skipControlsDrawing=p,T}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),bc.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}L(Wo,"ownDefaults",NA);const RA=["touchstart","touchmove","touchend"],l1=r=>{const e=i1(r.target),t=function(n){const i=n.changedTouches;return i&&i[0]?i[0]:n}(r);return new z(t.clientX+e.left,t.clientY+e.top)},Cc=r=>RA.includes(r.type)||r.pointerType==="touch",pd=r=>{r.preventDefault(),r.stopPropagation()},fn=r=>{let e=0,t=0,n=0,i=0;for(let s=0,a=r.length;s<a;s++){const{x:c,y:u}=r[s];(c>n||!s)&&(n=c),(c<e||!s)&&(e=c),(u>i||!s)&&(i=u),(u<t||!s)&&(t=u)}return{left:e,top:t,width:n-e,height:i-t}},VA=["translateX","translateY","scaleX","scaleY"],u1=(r,e)=>Rs(r,pt(e,r.calcOwnMatrix())),Rs=(r,e)=>{const t=js(e),{translateX:n,translateY:i,scaleX:s,scaleY:a}=t,c=st(t,VA),u=new z(n,i);r.flipX=!1,r.flipY=!1,Object.assign(r,c),r.set({scaleX:s,scaleY:a}),r.setPositionByOrigin(u,Ee,Ee)},h1=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},md=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),Tc=(r,e,t)=>{const n=r/2,i=e/2,s=[new z(-n,-i),new z(n,-i),new z(-n,i),new z(n,i)].map(c=>c.transform(t)),a=fn(s);return new z(a.width,a.height)},Ho=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qt;return pt(mr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:qt),r)},Cn=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qt;return r.transform(Ho(e,t))},d1=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qt;return r.transform(Ho(e,t),!0)},vd=(r,e,t)=>{const n=Ho(e,t);return Rs(r,pt(n,r.calcOwnMatrix())),n},yd=(r,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(r),j(j({},e),{},{target:n})),n.fire(r,e)},BA={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ct=r=>typeof r=="string"?BA[r]:r-.5,Ec="not-allowed";function f1(r){return Ct(r.originX)===Ct(Ee)&&Ct(r.originY)===Ct(Ee)}function g1(r){return .5-Ct(r)}const Zr=(r,e)=>r[e],bd=(r,e,t,n)=>({e:r,transform:e,pointer:new z(t,n)});function p1(r,e){const t=r.getTotalAngle()+si(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function kc(r,e,t,n,i){var s;let{target:a,corner:c}=r;const u=a.controls[c],h=((s=a.canvas)===null||s===void 0?void 0:s.getZoom())||1,d=a.padding/h,g=function(p,y,b,x){const S=p.getRelativeCenterPoint(),T=b!==void 0&&x!==void 0?p.translateToGivenOrigin(S,Ee,Ee,b,x):new z(p.left,p.top);return(p.angle?y.rotate(-gt(p.angle),S):y).subtract(T)}(a,new z(n,i),e,t);return g.x>=d&&(g.x-=d),g.x<=-d&&(g.x+=d),g.y>=d&&(g.y-=d),g.y<=d&&(g.y+=d),g.x-=u.offsetX,g.y-=u.offsetY,g}const m1=(r,e,t,n)=>{const{target:i,offsetX:s,offsetY:a}=e,c=t-s,u=n-a,h=!Zr(i,"lockMovementX")&&i.left!==c,d=!Zr(i,"lockMovementY")&&i.top!==u;return h&&i.set(Ue,c),d&&i.set(nr,u),(h||d)&&yd(Vv,bd(r,e,t,n)),h||d};class v1{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):ir,s=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",c=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=this.opacity!==void 0?this.opacity:"1",d=this.visible?"":" visibility: hidden;",g=e?"":this.getSvgFilter(),p=zo(kt,this.fill);return[zo(sr,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",c,"; ","stroke-miterlimit: ",u,"; ",p,"fill-rule: ",t,"; ","opacity: ",h,";",g,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(Bo(n));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=t?"":'style="'.concat(this.getSvgStyles(),'" '),c=i?'style="'.concat(this.getSvgFilter(),'" '):"",u=this.clipPath,h=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=u&&u.absolutePositioned,g=this.stroke,p=this.fill,y=this.shadow,b=[],x=e.indexOf("COMMON_PARTS");let S;u&&(u.clipPathId="CLIPPATH_".concat(ii()),S='<clipPath id="'.concat(u.clipPathId,`" >
`).concat(u.toClipPathSVG(n),`</clipPath>
`)),d&&b.push("<g ",c,this.getSvgCommons(),` >
`),b.push("<g ",this.getSvgTransform(!1),d?"":c+this.getSvgCommons(),` >
`);const T=[a,h,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[x]=T,Pr(p)&&b.push(p.toSVG(this)),Pr(g)&&b.push(g.toSVG(this)),y&&b.push(y.toSVG(this)),u&&b.push(S),b.push(e.join("")),b.push(`</g>
`),d&&b.push(`</g>
`),n?n(b.join("")):b.join("")}addPaintOrder(){return this.paintFirst!==kt?' paint-order="'.concat(this.paintFirst,'" '):""}}function Ic(r){return new RegExp("^("+r.join("|")+")\\b","i")}var y1;const Ni=String.raw(y1||(y1=ei(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),zA=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Ni+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Ni+"))?\\s+(.*)"),WA={cx:Ue,x:Ue,r:"radius",cy:nr,y:nr,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},wd="font-size",_d="clip-path";Ic(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),Ic(["symbol","image","marker","pattern","view","svg"]);const b1=Ic(["symbol","g","a","svg","clipPath","defs"]),HA=new z(1,0),w1=new z,xd=(r,e)=>r.rotate(e),Ac=(r,e)=>new z(e).subtract(r),Mc=r=>r.distanceFrom(w1),Oc=(r,e)=>Math.atan2(Vs(r,e),x1(r,e)),_1=r=>Oc(HA,r),Pc=r=>r.eq(w1)?r:r.scalarDivide(Mc(r)),Sd=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Pc(new z(-r.y,r.x).scalarMultiply(e?1:-1))},Vs=(r,e)=>r.x*e.y-r.y*e.x,x1=(r,e)=>r.x*e.x+r.y*e.y,Cd=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const n=Vs(e,t),i=Vs(e,r),s=Vs(t,r);return n>=0?i>=0&&s<=0:!(i<=0&&s>=0)},S1="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",C1=new RegExp("(?:\\s|^)"+S1+S1+"("+Ni+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Tn{constructor(e){const t=typeof e=="string"?Tn.parseShadow(e):e;Object.assign(this,Tn.ownDefaults,t),this.id=ii()}static parseShadow(e){const t=e.trim(),[,n=0,i=0,s=0]=(C1.exec(t)||[]).map(a=>parseFloat(a)||0);return{color:(t.replace(C1,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=xd(new z(this.offsetX,this.offsetY),gt(-e.angle)),n=new Xe(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*ot((Math.abs(t.x)+this.blur)/e.width,Ve.NUM_FRACTION_DIGITS)+20,s=100*ot((Math.abs(t.y)+this.blur)/e.height,Ve.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(ot(this.blur?this.blur/2:0,Ve.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(ot(t.x,Ve.NUM_FRACTION_DIGITS),'" dy="').concat(ot(t.y,Ve.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Tn.ownDefaults;return this.includeDefaultValues?e:dd(e,(n,i)=>n!==t[i])}static async fromObject(e){return new this(e)}}L(Tn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),L(Tn,"type","shadow"),ie.setClass(Tn,"shadow");const Ri=(r,e,t)=>Math.max(r,Math.min(e,t)),UA=[nr,Ue,Kt,pr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Os,Ps],En=[kt,sr,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],$A={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Ue,originY:nr,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:kt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Td=(r,e,t,n)=>(r<Math.abs(e)?(r=e,n=t/4):n=e===0&&r===0?t/Sn*Math.asin(1):t/Sn*Math.asin(e/r),{a:r,c:e,p:t,s:n}),T1=(r,e,t,n,i)=>r*Math.pow(2,10*(n-=1))*Math.sin((n*i-e)*Sn/t),E1=(r,e,t,n)=>-t*Math.cos(r/n*ri)+t+e,Ed=(r,e,t,n)=>(r/=n)<1/2.75?t*(7.5625*r*r)+e:r<2/2.75?t*(7.5625*(r-=1.5/2.75)*r+.75)+e:r<2.5/2.75?t*(7.5625*(r-=2.25/2.75)*r+.9375)+e:t*(7.5625*(r-=2.625/2.75)*r+.984375)+e,k1=(r,e,t,n)=>t-Ed(n-r,0,t,n)+e;var YA=Object.freeze({__proto__:null,defaultEasing:E1,easeInBack:function(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*(r/=n)*r*((i+1)*r-i)+e},easeInBounce:k1,easeInCirc:(r,e,t,n)=>-t*(Math.sqrt(1-(r/=n)*r)-1)+e,easeInCubic:(r,e,t,n)=>t*(r/n)**3+e,easeInElastic:(r,e,t,n)=>{const i=t;let s=0;if(r===0)return e;if((r/=n)===1)return e+t;s||(s=.3*n);const{a,s:c,p:u}=Td(i,t,s,1.70158);return-T1(a,c,u,r,n)+e},easeInExpo:(r,e,t,n)=>r===0?e:t*2**(10*(r/n-1))+e,easeInOutBack:function(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(r/=n/2)<1?t/2*(r*r*((1+(i*=1.525))*r-i))+e:t/2*((r-=2)*r*((1+(i*=1.525))*r+i)+2)+e},easeInOutBounce:(r,e,t,n)=>r<n/2?.5*k1(2*r,0,t,n)+e:.5*Ed(2*r-n,0,t,n)+.5*t+e,easeInOutCirc:(r,e,t,n)=>(r/=n/2)<1?-t/2*(Math.sqrt(1-r**2)-1)+e:t/2*(Math.sqrt(1-(r-=2)*r)+1)+e,easeInOutCubic:(r,e,t,n)=>(r/=n/2)<1?t/2*r**3+e:t/2*((r-2)**3+2)+e,easeInOutElastic:(r,e,t,n)=>{const i=t;let s=0;if(r===0)return e;if((r/=n/2)===2)return e+t;s||(s=n*(.3*1.5));const{a,s:c,p:u,c:h}=Td(i,t,s,1.70158);return r<1?-.5*T1(a,c,u,r,n)+e:a*Math.pow(2,-10*(r-=1))*Math.sin((r*n-c)*Sn/u)*.5+h+e},easeInOutExpo:(r,e,t,n)=>r===0?e:r===n?e+t:(r/=n/2)<1?t/2*2**(10*(r-1))+e:t/2*-(2**(-10*--r)+2)+e,easeInOutQuad:(r,e,t,n)=>(r/=n/2)<1?t/2*r**2+e:-t/2*(--r*(r-2)-1)+e,easeInOutQuart:(r,e,t,n)=>(r/=n/2)<1?t/2*r**4+e:-t/2*((r-=2)*r**3-2)+e,easeInOutQuint:(r,e,t,n)=>(r/=n/2)<1?t/2*r**5+e:t/2*((r-2)**5+2)+e,easeInOutSine:(r,e,t,n)=>-t/2*(Math.cos(Math.PI*r/n)-1)+e,easeInQuad:(r,e,t,n)=>t*(r/=n)*r+e,easeInQuart:(r,e,t,n)=>t*(r/=n)*r**3+e,easeInQuint:(r,e,t,n)=>t*(r/n)**5+e,easeInSine:(r,e,t,n)=>-t*Math.cos(r/n*ri)+t+e,easeOutBack:function(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*((r=r/n-1)*r*((i+1)*r+i)+1)+e},easeOutBounce:Ed,easeOutCirc:(r,e,t,n)=>t*Math.sqrt(1-(r=r/n-1)*r)+e,easeOutCubic:(r,e,t,n)=>t*((r/n-1)**3+1)+e,easeOutElastic:(r,e,t,n)=>{const i=t;let s=0;if(r===0)return e;if((r/=n)===1)return e+t;s||(s=.3*n);const{a,s:c,p:u,c:h}=Td(i,t,s,1.70158);return a*2**(-10*r)*Math.sin((r*n-c)*Sn/u)+h+e},easeOutExpo:(r,e,t,n)=>r===n?e+t:t*-(2**(-10*r/n)+1)+e,easeOutQuad:(r,e,t,n)=>-t*(r/=n)*(r-2)+e,easeOutQuart:(r,e,t,n)=>-t*((r=r/n-1)*r**3-1)+e,easeOutQuint:(r,e,t,n)=>t*((r/n-1)**5+1)+e,easeOutSine:(r,e,t,n)=>t*Math.sin(r/n*ri)+e});const XA=()=>!1;class kd{constructor(e){let{startValue:t,byValue:n,duration:i=500,delay:s=0,easing:a=E1,onStart:c=Pi,onChange:u=Pi,onComplete:h=Pi,abort:d=XA,target:g}=e;L(this,"_state","pending"),L(this,"durationProgress",0),L(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=a,this._onStart=c,this._onChange=u,this._onComplete=h,this._abort=d,this.target=g,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Lo(e),this.delay):Lo(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:s}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Lo(this.tick)))}register(){bc.push(this)}unregister(){bc.remove(this)}abort(){this._state="aborted",this.unregister()}}const GA=["startValue","endValue"];class qA extends kd{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(j(j({},st(e,GA)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const KA=["startValue","endValue"];class ZA extends kd{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(j(j({},st(e,KA)),{},{startValue:t,byValue:n.map((i,s)=>i-t[s])}))}calculate(e){const t=this.startValue.map((n,i)=>this.easing(e,n,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const JA=["startValue","endValue","easing","onChange","onComplete","abort"],QA=(r,e,t,n)=>e+t*(1-Math.cos(r/n*ri)),Id=r=>r&&((e,t,n)=>r(new Xe(e).toRgba(),t,n));class eM extends kd{constructor(e){let{startValue:t,endValue:n,easing:i=QA,onChange:s,onComplete:a,abort:c}=e,u=st(e,JA);const h=new Xe(t).getSource(),d=new Xe(n).getSource();super(j(j({},u),{},{startValue:h,byValue:d.map((g,p)=>g-h[p]),easing:i,onChange:Id(s),onComplete:Id(a),abort:Id(c)}))}calculate(e){const[t,n,i,s]=this.startValue.map((c,u)=>this.easing(e,c,this.byValue[u],this.duration,u)),a=[...[t,n,i].map(Math.round),Ri(0,s,1)];return{value:a,valueProgress:a.map((c,u)=>this.byValue[u]!==0?Math.abs((c-this.startValue[u])/this.byValue[u]):0).find(c=>c!==0)||0}}}function Ad(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new ZA(r):new qA(r);return e.start(),e}function I1(r){const e=new eM(r);return e.start(),e}class ct{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const s=Ac(t,n),a=Ac(t,e).divide(s);return i?Math.abs(a.x)===Math.abs(a.y):a.x===a.y&&a.x>=0&&a.x<=1}}static isPointInPolygon(e,t){const n=new z(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let i=0;for(let s=0;s<t.length;s++){const a=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,n);if(a.includes(e))return!0;i+=+(a.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,n,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const c=t.x-e.x,u=t.y-e.y,h=i.x-n.x,d=i.y-n.y,g=e.x-n.x,p=e.y-n.y,y=h*p-d*g,b=c*p-u*g,x=d*c-h*u;if(x!==0){const S=y/x,T=b/x;return(s||0<=S&&S<=1)&&(a||0<=T&&T<=1)?new ct("Intersection").append(new z(e.x+S*c,e.y+S*u)):new ct}if(y===0||b===0){const S=s||a||ct.isPointContained(e,n,i)||ct.isPointContained(t,n,i)||ct.isPointContained(n,e,t)||ct.isPointContained(i,e,t);return new ct(S?"Coincident":void 0)}return new ct("Parallel")}static intersectSegmentLine(e,t,n,i){return ct.intersectLineLine(e,t,n,i,!1,!0)}static intersectSegmentSegment(e,t,n,i){return ct.intersectLineLine(e,t,n,i,!1,!1)}static intersectLinePolygon(e,t,n){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new ct,a=n.length;for(let c,u,h,d=0;d<a;d++){if(c=n[d],u=n[(d+1)%a],h=ct.intersectLineLine(e,t,c,u,i,!1),h.status==="Coincident")return h;s.append(...h.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,n){return ct.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new ct,i=e.length,s=[];for(let a=0;a<i;a++){const c=e[a],u=e[(a+1)%i],h=ct.intersectSegmentPolygon(c,u,t);h.status==="Coincident"?(s.push(h),n.append(c,u)):n.append(...h.points)}return s.length>0&&s.length===e.length?new ct("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const i=t.min(n),s=t.max(n),a=new z(s.x,i.y),c=new z(i.x,s.y);return ct.intersectPolygonPolygon(e,[i,a,s,c])}}class tM extends Uv{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Ht(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=Ht(e,mr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new z(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,n,i];if(this.group){const a=this.group.calcTransformMatrix();return s.map(c=>Ht(c,a))}return s}intersectsWithRect(e,t){return ct.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=ct.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:i,width:s,height:a}=this.getBoundingRect();return n>=e.x&&n+s<=t.x&&i>=e.y&&i+a<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return ct.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return fn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Kt,e),this._set(pr,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?si(Gv(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||qt.concat()}calcACoords(){const e=Ls({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),i=Fs(t,n),s=pt(i,e),a=this._getTransformedDimensions(),c=a.x/2,u=a.y/2;return{tl:Ht({x:-c,y:-u},s),tr:Ht({x:c,y:-u},s),bl:Ht({x:-c,y:u},s),br:Ht({x:c,y:u},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ct(this.originX),Ct(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,a)=>s===n[a])?i.value:(this.group&&(t=pt(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=Kv(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new z(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let i=n,s=0;this.strokeUniform&&(i=0,s=n);const a=t.width+i,c=t.height+i;let u;return u=t.skewX===0&&t.skewY===0?new z(a*t.scaleX,c*t.scaleY):Tc(a,c,No(t)),u.scalarAdd(s)}translateToGivenOrigin(e,t,n,i,s){let a=e.x,c=e.y;const u=Ct(i)-Ct(t),h=Ct(s)-Ct(n);if(u||h){const d=this._getTransformedDimensions();a+=u*d.x,c+=h*d.y}return new z(a,c)}translateToCenterPoint(e,t,n){if(t===Ee&&n===Ee)return e;const i=this.translateToGivenOrigin(e,t,n,Ee,Ee);return this.angle?i.rotate(gt(this.angle),e):i}translateToOriginPoint(e,t,n){const i=this.translateToGivenOrigin(e,Ee,Ee,t,n);return this.angle?i.rotate(gt(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Ht(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new z(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const i=this.translateToCenterPoint(e,t,n),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Ue,nr)}}const rM=["type"],nM=["extraParam"];let kn=class vu extends tM{static getDefaults(){return vu.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){ti("warn","Setting type has no effect",e)}constructor(e){super(),L(this,"_cacheContext",null),Object.assign(this,vu.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Or(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,i=Ve.maxCacheSideLimit,s=Ve.minCacheSideLimit;if(t<=i&&n<=i&&t*n<=Ve.perfLimitSizeTotal)return t<s&&(e.width=s),n<s&&(e.height=s),e;const a=t/n,[c,u]=jo.limitDimsByArea(a),h=Ri(s,c,i),d=Ri(s,u,i);return t>h&&(e.zoomX/=t/h,e.width=h,e.capped=!0),n>d&&(e.zoomY/=n/d,e.height=d,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:n,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:i,zoomX:s,zoomY:a,x:c,y:u}=this._limitCacheSize(this._getCacheCanvasDimensions()),h=n!==e.width||i!==e.height,d=this.zoomX!==s||this.zoomY!==a;if(!e||!t)return!1;if(h||d){n!==e.width||i!==e.height?(e.width=n,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const g=c/2,p=u/2;return this.cacheTranslationX=Math.round(e.width/2-g)+g,this.cacheTranslationY=Math.round(e.height/2-p)+p,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,a),this.zoomX=s,this.zoomY=a,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new z(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=js(this.calcTransformMatrix());return new z(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Kt&&e!==pr||(t=this._constrainScale(t)),e===Kt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Tn||(t=new Tn(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:s}=this,{width:a,height:c}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:s,width:a,height:c,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===sr&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const i=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=i,this.stroke=s}createClipPathLayer(e,t){const n=qr(t),i=n.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(s=>{s.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=mr(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Pr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Pr(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,a]=n?.viewportTransform||qt,c=s*i,u=a*i,h=t.nonScaling?new z(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Ve.browserShadowBlurConstant*(c+u)*(h.x+h.y)/4,e.shadowOffsetX=t.offsetX*c*h.x,e.shadowOffsetY=t.offsetY*u*h.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Pr(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===sr?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),a=i.x/this.scaleX/s,c=i.y/this.scaleY/s,u=qr({width:Math.ceil(a),height:Math.ceil(c)}),h=u.getContext("2d");h&&(h.beginPath(),h.moveTo(0,0),h.lineTo(a,0),h.lineTo(a,c),h.lineTo(0,c),h.closePath(),h.translate(a/2,c/2),h.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(h,t),h.fillStyle=t.toLive(e),h.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(n=h.createPattern(u,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new z(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(ie.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=md(this),n=this.group,i=this.shadow,s=Math.abs,a=e.enableRetinaScaling?Rv():1,c=(e.multiplier||1)*a,u=e.canvasProvider||(k=>new Wo(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&h1(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&vd(this,this.getViewportTransform()),this.setCoords();const h=Or(),d=this.getBoundingRect(),g=this.shadow,p=new z;if(g){const k=g.blur,I=g.nonScaling?new z(1,1):this.getObjectScaling();p.x=2*Math.round(s(g.offsetX)+k)*s(I.x),p.y=2*Math.round(s(g.offsetY)+k)*s(I.y)}const y=d.width+p.x,b=d.height+p.y;h.width=Math.ceil(y),h.height=Math.ceil(b);const x=u(h);e.format==="jpeg"&&(x.backgroundColor="#fff"),this.setPositionByOrigin(new z(x.width/2,x.height/2),Ee,Ee);const S=this.canvas;x._objects=[this],this.set("canvas",x),this.setCoords();const T=x.toCanvasElement(c||1,e);return this.set("canvas",S),this.shadow=i,n&&(this.group=n),this.set(t),this.setCoords(),x._objects=[],x.destroy(),T}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ld(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:i}=this;if(t){const{x:s,y:a}=this.getRelativeCenterPoint();this.originX=Ee,this.originY=Ee,this.left=s,this.top=a}if(this.set("angle",e),t){const{x:s,y:a}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=s,this.top=a,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){bc.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&dn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,i)=>{let[s,a]=i;return n[s]=this._animate(s,a,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:a,startValue:c,onChange:u,onComplete:h}=n,d=j(j({},n),{},{target:this,startValue:c??i.reduce((g,p)=>g[p],this),endValue:t,abort:a?.bind(this),onChange:(g,p,y)=>{i.reduce((b,x,S)=>(S===i.length-1&&(b[x]=g),b[x]),this),u&&u(g,p,y)},onComplete:(g,p,y)=>{this.setCoords(),h&&h(g,p,y)}});return s?I1(d):Ad(d)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let i,s=0;s<t.length;s++){if(i=t[s],i===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let a=0;a<n.length;a++){if(this===n[a])return{fork:[],otherFork:[e,...n.slice(0,a)],common:[this,...t]};if(i===n[a])return{fork:[this,...t.slice(0,s)],otherFork:[e,...n.slice(0,a)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const i=t.fork.pop(),s=t.otherFork.pop(),a=n._objects.indexOf(i),c=n._objects.indexOf(s);return a>-1&&a>c}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(vu.customProperties,this.constructor.customProperties||[]);let t;const n=Ve.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:a,shadow:c,strokeDashArray:u,left:h,top:d,originX:g,originY:p,width:y,height:b,strokeWidth:x,strokeLineCap:S,strokeDashOffset:T,strokeLineJoin:k,strokeUniform:I,strokeMiterLimit:M,scaleX:F,scaleY:N,angle:W,flipX:R,flipY:X,opacity:U,visible:K,backgroundColor:$,fillRule:G,paintFirst:re,globalCompositeOperation:fe,skewX:Q,skewY:ue}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const oe=de=>ot(de,n),se=j(j({},ji(this,e)),{},{type:this.constructor.type,version:td,originX:g,originY:p,left:oe(h),top:oe(d),width:oe(y),height:oe(b),fill:r1(s)?s.toObject():s,stroke:r1(a)?a.toObject():a,strokeWidth:oe(x),strokeDashArray:u&&u.concat(),strokeLineCap:S,strokeDashOffset:T,strokeLineJoin:k,strokeUniform:I,strokeMiterLimit:oe(M),scaleX:oe(F),scaleY:oe(N),angle:oe(W),flipX:R,flipY:X,opacity:oe(U),shadow:c&&c.toObject(),visible:K,backgroundColor:$,fillRule:G,paintFirst:re,globalCompositeOperation:fe,skewX:oe(Q),skewY:oe(ue)},t?{clipPath:t}:null);return this.includeDefaultValues?se:this._removeDefaultValues(se)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return dd(e,(i,s)=>{if(s===Ue||s===nr||s==="type")return!0;const a=n[s];return i!==a&&!(Array.isArray(i)&&Array.isArray(a)&&i.length===0&&a.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=st(e,rM),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=n,s=st(n,nM);return Vo(t,s).then(a=>i?(delete a[i],new this(t[i],a)):new this(a))}static fromObject(e,t){return this._fromObject(e,t)}};L(kn,"stateProperties",UA),L(kn,"cacheProperties",En),L(kn,"ownDefaults",$A),L(kn,"type","FabricObject"),L(kn,"colorProperties",[kt,sr,"backgroundColor"]),L(kn,"customProperties",[]),ie.setClass(kn),ie.setClass(kn,"object");const oi=(r,e,t)=>(n,i,s,a)=>{const c=e(n,i,s,a);return c&&yd(r,j(j({},bd(n,i,s,a)),t)),c};function Vi(r){return(e,t,n,i)=>{const{target:s,originX:a,originY:c}=t,u=s.getRelativeCenterPoint(),h=s.translateToOriginPoint(u,a,c),d=r(e,t,n,i);return s.setPositionByOrigin(h,t.originX,t.originY),d}}const Md=oi(Fo,Vi((r,e,t,n)=>{const i=kc(e,e.originX,e.originY,t,n);if(Ct(e.originX)===Ct(Ee)||Ct(e.originX)===Ct(bt)&&i.x<0||Ct(e.originX)===Ct(Ue)&&i.x>0){const{target:s}=e,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=f1(e)?2:1,u=s.width,h=Math.abs(i.x*c/s.scaleX)-a;return s.set("width",Math.max(h,1)),u!==s.width}return!1}));function A1(r,e,t,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,a=this.sizeY||n.cornerSize||i.cornerSize,c=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,u=c?sr:kt,h=!c&&(n.cornerStrokeColor||i.cornerStrokeColor);let d,g=e,p=t;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",s>a?(d=s,r.scale(1,a/s),p=t*s/a):a>s?(d=a,r.scale(s/a,1),g=e*a/s):d=s,r.beginPath(),r.arc(g,p,d/2,0,Sn,!1),r[u](),h&&r.stroke(),r.restore()}function M1(r,e,t,n,i){n=n||{};const s=this.sizeX||n.cornerSize||i.cornerSize,a=this.sizeY||n.cornerSize||i.cornerSize,c=n.transparentCorners!==void 0?n.transparentCorners:i.transparentCorners,u=c?sr:kt,h=!c&&(n.cornerStrokeColor||i.cornerStrokeColor),d=s/2,g=a/2;r.save(),r.fillStyle=n.cornerColor||i.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",r.translate(e,t);const p=i.getTotalAngle();r.rotate(gt(p)),r["".concat(u,"Rect")](-d,-g,s,a),h&&r.strokeRect(-d,-g,s,a),r.restore()}class lt{constructor(e){L(this,"visible",!0),L(this,"actionName",vc),L(this,"angle",0),L(this,"x",0),L(this,"y",0),L(this,"offsetX",0),L(this,"offsetY",0),L(this,"sizeX",0),L(this,"sizeY",0),L(this,"touchSizeX",0),L(this,"touchSizeY",0),L(this,"cursorStyle","crosshair"),L(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,i){var s;let{tl:a,tr:c,br:u,bl:h}=i;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&ct.isPointInPolygon(n,[a,c,u,h])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,i;return(n=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,i){return new z(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,i,s,a){const c=_c([Fs(n,i),Ls({angle:e}),xc((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new z(-.5,-.5).transform(c),tr:new z(.5,-.5).transform(c),br:new z(.5,.5).transform(c),bl:new z(-.5,.5).transform(c)}}render(e,t,n,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?A1.call(this,e,t,n,i,s):M1.call(this,e,t,n,i,s)}}const O1=(r,e,t)=>t.lockRotation?Ec:e.cursorStyle,P1=oi(Bv,Vi((r,e,t,n)=>{let{target:i,ex:s,ey:a,theta:c,originX:u,originY:h}=e;const d=i.translateToOriginPoint(i.getRelativeCenterPoint(),u,h);if(Zr(i,"lockRotation"))return!1;const g=Math.atan2(a-d.y,s-d.x),p=Math.atan2(n-d.y,t-d.x);let y=si(p-g+c);if(i.snapAngle&&i.snapAngle>0){const x=i.snapAngle,S=i.snapThreshold||x,T=Math.ceil(y/x)*x,k=Math.floor(y/x)*x;Math.abs(y-k)<S?y=k:Math.abs(y-T)<S&&(y=T)}y<0&&(y=360+y),y%=360;const b=i.angle!==y;return i.angle=y,b}));function D1(r,e){const t=e.canvas,n=r[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function j1(r,e,t){const n=Zr(r,"lockScalingX"),i=Zr(r,"lockScalingY");if(n&&i||!e&&(n||i)&&t||n&&e==="x"||i&&e==="y")return!0;const{width:s,height:a,strokeWidth:c}=r;return s===0&&c===0&&e!=="y"||a===0&&c===0&&e!=="x"}const iM=["e","se","s","sw","w","nw","n","ne","e"],Bs=(r,e,t)=>{const n=D1(r,t);if(j1(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return Ec;const i=p1(t,e);return"".concat(iM[i],"-resize")};function Od(r,e,t,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,a=i.by,c=D1(r,s);let u,h,d,g,p,y;if(j1(s,a,c))return!1;if(e.gestureScale)h=e.scaleX*e.gestureScale,d=e.scaleY*e.gestureScale;else{if(u=kc(e,e.originX,e.originY,t,n),p=a!=="y"?Math.sign(u.x||e.signX||1):1,y=a!=="x"?Math.sign(u.y||e.signY||1):1,e.signX||(e.signX=p),e.signY||(e.signY=y),Zr(s,"lockScalingFlip")&&(e.signX!==p||e.signY!==y))return!1;if(g=s._getTransformedDimensions(),c&&!a){const S=Math.abs(u.x)+Math.abs(u.y),{original:T}=e,k=S/(Math.abs(g.x*T.scaleX/s.scaleX)+Math.abs(g.y*T.scaleY/s.scaleY));h=T.scaleX*k,d=T.scaleY*k}else h=Math.abs(u.x*s.scaleX/g.x),d=Math.abs(u.y*s.scaleY/g.y);f1(e)&&(h*=2,d*=2),e.signX!==p&&a!=="y"&&(e.originX=g1(e.originX),h*=-1,e.signX=p),e.signY!==y&&a!=="x"&&(e.originY=g1(e.originY),d*=-1,e.signY=y)}const b=s.scaleX,x=s.scaleY;return a?(a==="x"&&s.set(Kt,h),a==="y"&&s.set(pr,d)):(!Zr(s,"lockScalingX")&&s.set(Kt,h),!Zr(s,"lockScalingY")&&s.set(pr,d)),b!==s.scaleX||x!==s.scaleY}const Uo=oi(pc,Vi((r,e,t,n)=>Od(r,e,t,n))),F1=oi(pc,Vi((r,e,t,n)=>Od(r,e,t,n,{by:"x"}))),L1=oi(pc,Vi((r,e,t,n)=>Od(r,e,t,n,{by:"y"}))),sM=["target","ex","ey","skewingSide"],Pd={x:{counterAxis:"y",scale:Kt,skew:Os,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:pr,skew:Ps,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},oM=["ns","nesw","ew","nwse"],N1=(r,e,t)=>{if(e.x!==0&&Zr(t,"lockSkewingY")||e.y!==0&&Zr(t,"lockSkewingX"))return Ec;const n=p1(t,e)%4;return"".concat(oM[n],"-resize")};function R1(r,e,t,n,i){const{target:s}=t,{counterAxis:a,origin:c,lockSkewing:u,skew:h,flip:d}=Pd[r];if(Zr(s,u))return!1;const{origin:g,flip:p}=Pd[a],y=Ct(t[g])*(s[p]?-1:1),b=-Math.sign(y)*(s[d]?-1:1),x=.5*-((s[h]===0&&kc(t,Ee,Ee,n,i)[r]>0||s[h]>0?1:-1)*b)+.5;return oi(zv,Vi((T,k,I,M)=>function(F,N,W){let{target:R,ex:X,ey:U,skewingSide:K}=N,$=st(N,sM);const{skew:G}=Pd[F],re=W.subtract(new z(X,U)).divide(new z(R.scaleX,R.scaleY))[F],fe=R[G],Q=$[G],ue=Math.tan(gt(Q)),oe=F==="y"?R._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:R._getTransformedDimensions({scaleX:1,scaleY:1}).y,se=2*re*K/Math.max(oe,1)+ue,de=si(Math.atan(se));R.set(G,de);const ne=fe!==R[G];if(ne&&F==="y"){const{skewX:Fe,scaleX:Ge}=R,Re=R._getTransformedDimensions({skewY:fe}),xe=R._getTransformedDimensions(),ke=Fe!==0?Re.x/xe.x:1;ke!==1&&R.set(Kt,ke*Ge)}return ne}(r,k,new z(I,M))))(e,j(j({},t),{},{[c]:x,skewingSide:b}),n,i)}const V1=(r,e,t,n)=>R1("x",r,e,t,n),B1=(r,e,t,n)=>R1("y",r,e,t,n);function Dc(r,e){return r[e.canvas.altActionKey]}const $o=(r,e,t)=>{const n=Dc(r,t);return e.x===0?n?Os:pr:e.y===0?n?Ps:Kt:""},Bi=(r,e,t)=>Dc(r,t)?N1(0,e,t):Bs(r,e,t),Dd=(r,e,t,n)=>Dc(r,e.target)?B1(r,e,t,n):F1(r,e,t,n),jd=(r,e,t,n)=>Dc(r,e.target)?V1(r,e,t,n):L1(r,e,t,n),Fd=()=>({ml:new lt({x:-.5,y:0,cursorStyleHandler:Bi,actionHandler:Dd,getActionName:$o}),mr:new lt({x:.5,y:0,cursorStyleHandler:Bi,actionHandler:Dd,getActionName:$o}),mb:new lt({x:0,y:.5,cursorStyleHandler:Bi,actionHandler:jd,getActionName:$o}),mt:new lt({x:0,y:-.5,cursorStyleHandler:Bi,actionHandler:jd,getActionName:$o}),tl:new lt({x:-.5,y:-.5,cursorStyleHandler:Bs,actionHandler:Uo}),tr:new lt({x:.5,y:-.5,cursorStyleHandler:Bs,actionHandler:Uo}),bl:new lt({x:-.5,y:.5,cursorStyleHandler:Bs,actionHandler:Uo}),br:new lt({x:.5,y:.5,cursorStyleHandler:Bs,actionHandler:Uo}),mtr:new lt({x:0,y:-.5,actionHandler:P1,cursorStyleHandler:O1,offsetY:-40,withConnection:!0,actionName:od})}),z1=()=>({mr:new lt({x:.5,y:0,actionHandler:Md,cursorStyleHandler:Bi,actionName:Fo}),ml:new lt({x:-.5,y:0,actionHandler:Md,cursorStyleHandler:Bi,actionName:Fo})}),W1=()=>j(j({},Fd()),z1());class Yo extends kn{static getDefaults(){return j(j({},super.getDefaults()),Yo.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Yo.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Fd()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,i=t.action;if(this===n&&i&&i.startsWith(vc))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[s,a]=n[i],c=this.controls[s];if(c.shouldActivate(s,this,e,t?a.touchCorner:a.corner))return this.__corner=s,{key:s,control:c,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=Fs(t.x,t.y),i=Ls({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=pt(n,i),a=pt(e,s),c=pt(a,[1/e[0],0,0,1/e[3],0,0]),u=this.group?js(this.calcTransformMatrix()):void 0;u&&(u.scaleX=Math.abs(u.scaleX),u.scaleY=Math.abs(u.scaleY));const h=this._calculateCurrentDimensions(u),d={};return this.forEachControl((g,p)=>{const y=g.positionHandler(h,c,this,g);d[p]=Object.assign(y,this._calcCornerCoords(g,y))}),d}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(gt(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=j({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,s=j({hasBorders:n,hasControls:i},t),a=this.getViewportTransform(),c=s.hasBorders,u=s.hasControls,h=pt(a,this.calcTransformMatrix()),d=js(h);e.save(),e.translate(d.translateX,d.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),e.rotate(gt(this.group?d.angle:this.angle)),c&&this.drawBorders(e,d,t),u&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let i;if(n&&n.forActiveSelection||this.group){const s=Tc(this.width,this.height,No(t)),a=this.isStrokeAccountedForInDimensions()?cd:(this.strokeUniform?new z().scalarAdd(this.canvas?this.canvas.getZoom():1):new z(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(a).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(n=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:a}=this,c=j({cornerStrokeColor:i,cornerDashArray:s,cornerColor:a},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=c.cornerColor,this.transparentCorners||(e.strokeStyle=c.cornerStrokeColor),this._setLineDash(e,c.cornerDashArray),this.forEachControl((u,h)=>{if(u.getVisibility(this,h)){const d=this.oCoords[h];u.render(e,d.x,d.y,c,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,i]=t;return this.setControlVisible(n,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function H1(r,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),r}L(Yo,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Ze extends Yo{}H1(Ze,[v1]),ie.setClass(Ze),ie.setClass(Ze,"object");const U1=(r,e,t,n)=>{const i=2*(n=Math.round(n))+1,{data:s}=r.getImageData(e-n,t-n,i,i);for(let a=3;a<s.length;a+=4)if(s[a]>0)return!1;return!0};class $1{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new z(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new z(1/this.options.scaleX,1/this.options.scaleY):new z(1,1)}createSideVector(e,t){const n=Ac(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new z(e);return t.y+=t.x*Math.tan(gt(this.options.skewY)),t.x+=t.y*Math.tan(gt(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const aM=new z;class zs extends $1{static getOrthogonalRotationFactor(e,t){const n=t?Oc(e,t):_1(e);return Math.abs(n)<ri?-1:1}constructor(e,t,n,i){super(i),L(this,"AB",void 0),L(this,"AC",void 0),L(this,"alpha",void 0),L(this,"bisector",void 0),this.A=new z(e),this.B=new z(t),this.C=new z(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Oc(this.AB,this.AC),this.bisector=Pc(xd(this.AB.eq(aM)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=Sd(i),a=zs.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,n*a)}projectBevel(){const e=[];return(this.alpha%Sn==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),s=this.options.strokeUniform?Mc(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Mc(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],i=new z(zs.getOrthogonalRotationFactor(this.bisector),zs.getOrthogonalRotationFactor(new z(this.bisector.y,this.bisector.x)));return[new z(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new z(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{Cd(s,e,t)&&n.push(this.A.add(s))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:i,skewY:s,scaleX:a,scaleY:c,strokeUniform:u}=this.options,h=new z(Math.tan(gt(i)),Math.tan(gt(s))),d=this.strokeProjectionMagnitude,g=u?d/c/Math.sqrt(1/c**2+1/a**2*h.y**2):d/Math.sqrt(1+h.y**2),p=new z(Math.sqrt(Math.max(d**2-g**2,0)),g),y=u?d/Math.sqrt(1+h.x**2*(1/c)**2/(1/a+1/a*h.x*h.y)**2):d/Math.sqrt(1+h.x**2/(1+h.x*h.y)**2),b=new z(y,Math.sqrt(Math.max(d**2-y**2,0)));return[b,b.scalarMultiply(-1),p,p.scalarMultiply(-1)].map(x=>this.applySkew(u?x.multiply(this.strokeUniformScalar):x)).forEach(x=>{Cd(x,e,t)&&n.push(this.applySkew(this.A).add(x))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Sn==0,n=this.applySkew(this.A),i=e[t?0:2].subtract(n),s=e[t?1:0].subtract(n),a=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),c=Vs(i,a)>0,u=c?i:s,h=c?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(u,h)):e.push(...this.projectRoundNoSkew(u,h)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Y1 extends $1{constructor(e,t,n){super(n),this.A=new z(e),this.T=new z(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(Sd(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new z(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new zs(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new z(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(Pc(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);e.push(i.add(t),i.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const X1=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(r.length===0)return n;const i=r.reduce((s,a)=>(s[s.length-1].eq(a)||s.push(new z(a)),s),[new z(r[0])]);if(i.length===1)t=!0;else if(!t){const s=i[0],a=((c,u)=>{for(let h=c.length-1;h>=0;h--)if(u(c[h],h,c))return h;return-1})(i,c=>!c.eq(s));i.splice(a+1)}return i.forEach((s,a,c)=>{let u,h;a===0?(h=c[1],u=t?s:c[c.length-1]):a===c.length-1?(u=c[a-1],h=t?s:c[0]):(u=c[a-1],h=c[a+1]),t&&c.length===1?n.push(...new Y1(s,s,e).project()):!t||a!==0&&a!==c.length-1?n.push(...new zs(s,u,h,e).project()):n.push(...new Y1(s,a===0?h:u,e).project())}),n},Ld=r=>{const e={};return Object.keys(r).forEach(t=>{e[t]={},Object.keys(r[t]).forEach(n=>{e[t][n]=j({},r[t][n])})}),e},G1=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),jc=r=>{const e=[];for(let t,n=0;n<r.length;n++)(t=cM(r,n))!==!1&&e.push(t);return e},cM=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const i=r.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var lM=Object.freeze({__proto__:null,capitalize:function(r){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(r.charAt(0).toUpperCase()).concat(e?r.slice(1):r.slice(1).toLowerCase())},escapeXml:G1,graphemeSplit:jc});const Fc=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},q1=(r,e)=>{const t=e.split(`
`),n=[];let i=-1,s={};r=Ld(r);for(let a=0;a<t.length;a++){const c=jc(t[a]);if(r[a])for(let u=0;u<c.length;u++){i++;const h=r[a][u];h&&Object.keys(h).length>0&&(Fc(s,h,!0)?n.push({start:i,end:i+1,style:h}):n[n.length-1].end++),s=h||{}}else i+=c.length,s={}}return n},K1=(r,e)=>{if(!Array.isArray(r))return Ld(r);const t=e.split(sd),n={};let i=-1,s=0;for(let a=0;a<t.length;a++){const c=jc(t[a]);for(let u=0;u<c.length;u++)i++,r[s]&&r[s].start<=i&&i<r[s].end&&(n[a]=n[a]||{},n[a][u]=j({},r[s].style),i===r[s].end-1&&s++)}return n},ai=["display","transform",kt,"fill-opacity","fill-rule","opacity",sr,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Z1(r,e){const t=r.nodeName,n=r.getAttribute("class"),i=r.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let a;if(a=new RegExp("^"+t,"i"),e=e.replace(a,""),i&&e.length&&(a=new RegExp("#"+i+s,"i"),e=e.replace(a,"")),n&&e.length){const c=n.split(" ");for(let u=c.length;u--;)a=new RegExp("\\."+c[u]+s,"i"),e=e.replace(a,"")}return e.length===0}function uM(r,e){let t=!0;const n=Z1(r,e.pop());return n&&e.length&&(t=function(i,s){let a,c=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)c&&(a=s.pop()),c=Z1(i=i.parentElement,a);return s.length===0}(r,e)),n&&t&&e.length===0}const hM=r=>{var e;return(e=WA[r])!==null&&e!==void 0?e:r},dM=new RegExp("(".concat(Ni,")"),"gi"),fM=r=>r.replace(dM," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var J1,Q1,ey,ty,ry,ny,iy;const Zt="(".concat(Ni,")"),gM=String.raw(J1||(J1=ei(["(skewX)(",")"],["(skewX)\\(","\\)"])),Zt),pM=String.raw(Q1||(Q1=ei(["(skewY)(",")"],["(skewY)\\(","\\)"])),Zt),mM=String.raw(ey||(ey=ei(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Zt,Zt,Zt),vM=String.raw(ty||(ty=ei(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Zt,Zt),yM=String.raw(ry||(ry=ei(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Zt,Zt),bM=String.raw(ny||(ny=ei(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Zt,Zt,Zt,Zt,Zt,Zt),Nd="(?:".concat(bM,"|").concat(yM,"|").concat(mM,"|").concat(vM,"|").concat(gM,"|").concat(pM,")"),wM="(?:".concat(Nd,"*)"),_M=String.raw(iy||(iy=ei(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),wM),xM=new RegExp(_M),SM=new RegExp(Nd),CM=new RegExp(Nd,"g");function Rd(r){const e=[];if(!(r=fM(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!xM.test(r))return[...qt];for(const t of r.matchAll(CM)){const n=SM.exec(t[0]);if(!n)continue;let i=qt;const s=n.filter(b=>!!b),[,a,...c]=s,[u,h,d,g,p,y]=c.map(b=>parseFloat(b));switch(a){case"translate":i=Fs(u,h);break;case od:i=Ls({angle:u},{x:h,y:d});break;case vc:i=xc(u,h);break;case Os:i=ud(u);break;case Ps:i=hd(u);break;case"matrix":i=[u,h,d,g,p,y]}e.push(i)}return _c(e)}function TM(r,e,t,n){const i=Array.isArray(e);let s,a=e;if(r!==kt&&r!==sr||e!==ir){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")a=e===ir?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")a=t&&t.transformMatrix?pt(t.transformMatrix,Rd(e)):Rd(e);else if(r==="visible")a=e!==ir&&e!=="hidden",t&&t.visible===!1&&(a=!1);else if(r==="opacity")a=parseFloat(e),t&&t.opacity!==void 0&&(a*=t.opacity);else if(r==="textAnchor")a=e==="start"?Ue:e==="end"?bt:Ee;else if(r==="charSpacing")s=Fi(e,n)/n*1e3;else if(r==="paintFirst"){const c=e.indexOf(kt),u=e.indexOf(sr);a=kt,(c>-1&&u>-1&&u<c||c===-1&&u>-1)&&(a=sr)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return e;if(r==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(Fi):Fi(e,n)}}else a="";return!i&&isNaN(s)?a:s}function EM(r,e){const t=r.match(zA);if(!t)return;const n=t[1],i=t[3],s=t[4],a=t[5],c=t[6];n&&(e.fontStyle=n),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=Fi(s)),c&&(e.fontFamily=c),a&&(e.lineHeight=a==="normal"?1:a)}function kM(r,e){r.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,i]=t.split(":");e[n.trim().toLowerCase()]=i.trim()})}function IM(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?kM(t,e):function(n,i){Object.entries(n).forEach(s=>{let[a,c]=s;c!==void 0&&(i[a.toLowerCase()]=c)})}(t,e)),e}const AM={stroke:"strokeOpacity",fill:"fillOpacity"};function In(r,e,t){if(!r)return{};let n,i={},s=nd;r.parentNode&&b1.test(r.parentNode.nodeName)&&(i=In(r.parentElement,e,t),i.fontSize&&(n=s=Fi(i.fontSize)));const a=j(j(j({},e.reduce((h,d)=>{const g=r.getAttribute(d);return g&&(h[d]=g),h},{})),function(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g={};for(const p in d)uM(h,p.split(" "))&&(g=j(j({},g),d[p]));return g}(r,t)),IM(r));a[_d]&&r.setAttribute(_d,a[_d]),a[wd]&&(n=Fi(a[wd],s),a[wd]="".concat(n));const c={};for(const h in a){const d=hM(h),g=TM(d,a[h],i,n);c[d]=g}c&&c.font&&EM(c.font,c);const u=j(j({},i),c);return b1.test(r.nodeName)?u:function(h){const d=Ze.getDefaults();return Object.entries(AM).forEach(g=>{let[p,y]=g;if(h[y]===void 0||h[p]==="")return;if(h[p]===void 0){if(!d[p])return;h[p]=d[p]}if(h[p].indexOf("url(")===0)return;const b=new Xe(h[p]);h[p]=b.setAlpha(ot(b.getAlpha()*h[y],2)).toRgba()}),h}(u)}const MM=["left","top","width","height","visible"],sy=["rx","ry"];class Tt extends Ze{static getDefaults(){return j(j({},super.getDefaults()),Tt.ownDefaults)}constructor(e){super(),Object.assign(this,Tt.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,i=-t/2,s=-n/2,a=this.rx?Math.min(this.rx,t/2):0,c=this.ry?Math.min(this.ry,n/2):0,u=a!==0||c!==0;e.beginPath(),e.moveTo(i+a,s),e.lineTo(i+t-a,s),u&&e.bezierCurveTo(i+t-ni*a,s,i+t,s+ni*c,i+t,s+c),e.lineTo(i+t,s+n-c),u&&e.bezierCurveTo(i+t,s+n-ni*c,i+t-ni*a,s+n,i+t-a,s+n),e.lineTo(i+a,s+n),u&&e.bezierCurveTo(i+ni*a,s+n,i,s+n-ni*c,i,s+n-c),e.lineTo(i,s+c),u&&e.bezierCurveTo(i,s+ni*c,i+ni*a,s,i+a,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...sy,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const i=In(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,width:c=0,height:u=0,visible:h=!0}=i,d=st(i,MM);return new this(j(j(j({},t),d),{},{left:s,top:a,width:c,height:u,visible:!!(h&&c&&u)}))}}L(Tt,"type","Rect"),L(Tt,"cacheProperties",[...En,...sy]),L(Tt,"ownDefaults",{rx:0,ry:0}),L(Tt,"ATTRIBUTE_NAMES",[...ai,"x","y","rx","ry","width","height"]),ie.setClass(Tt),ie.setSVGClass(Tt);const An="initialization",Lc="added",Vd="removed",Nc="imperative",oy=(r,e)=>{const{strokeUniform:t,strokeWidth:n,width:i,height:s,group:a}=e,c=a&&a!==r?Ho(a.calcTransformMatrix(),r.calcTransformMatrix()):null,u=c?e.getRelativeCenterPoint().transform(c):e.getRelativeCenterPoint(),h=!e.isStrokeAccountedForInDimensions(),d=t&&h?d1(new z(n,n),void 0,r.calcTransformMatrix()):cd,g=!t&&h?n:0,p=Tc(i+g,s+g,_c([c,e.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[u.subtract(p),u.add(p)]};class Rc{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:i}=e;return t===An||t===Nc||!!n&&i!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==An&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:i}=t;if(n===Nc&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:a,width:c,height:u}=fn(e.map(g=>oy(i,g)).reduce((g,p)=>g.concat(p),[])),h=new z(c,u),d=new z(s,a).add(h.scalarDivide(2));if(n===An){const g=this.getInitialSize(t,{size:h,center:d});return{center:d,relativeCorrection:new z(0,0),size:g}}return{center:d.transform(i.calcOwnMatrix()),size:h}}}L(Rc,"type","strategy");class Bd extends Rc{shouldPerformLayout(e){return!0}}L(Bd,"type","fit-content"),ie.setClass(Bd);const OM=["strategy"],PM=["target","strategy","bubbles","prevStrategy"],ay="layoutManager";class Xo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Bd;L(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=j(j({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[yc,Vv,Fo,Bv,pc,zv,mc,Wv,jA].map(i=>e.on(i,s=>this.performLayout(i===yc?{type:"object_modified",trigger:i,e:s,target:n}:{type:"object_modifying",trigger:i,e:s,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:i}=t;if(n===An||n===Lc?this.subscribeTargets(e):n===Vd&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),n===Nc&&e.deep){const s=st(e,OM);t.forEachObject(a=>a.layoutManager&&a.layoutManager.performLayout(j(j({},s),{},{bubbles:!1,target:a})))}}getLayoutResult(e){const{target:t,strategy:n,type:i}=e,s=n.calcLayoutResult(e,t.getObjects());if(!s)return;const a=i===An?new z:t.getRelativeCenterPoint(),{center:c,correction:u=new z,relativeCorrection:h=new z}=s,d=a.subtract(c).add(u).transform(i===An?qt:mr(t.calcOwnMatrix()),!0).add(h);return{result:s,prevCenter:a,nextCenter:c,offset:d}}commitLayout(e,t){const{target:n}=e,{result:{size:i},nextCenter:s}=t;var a,c;n.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===An?n.set({left:(a=e.x)!==null&&a!==void 0?a:s.x+i.x*Ct(n.originX),top:(c=e.y)!==null&&c!==void 0?c:s.y+i.y*Ct(n.originY)}):(n.setPositionByOrigin(s,Ee,Ee),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(i=>{i.group===n&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:i}=t;n.set({left:n.left+i.x,top:n.top+i.y})}onAfterLayout(e,t){const{target:n,strategy:i,bubbles:s,prevStrategy:a}=e,c=st(e,PM),{canvas:u}=n;n.fire("layout:after",{context:e,result:t}),u&&u.fire("object:layout:after",{context:e,result:t,target:n});const h=n.parent;s&&h!=null&&h.layoutManager&&((c.path||(c.path=[])).push(n),h.layoutManager.performLayout(j(j({},c),{},{target:h}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:ay,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ie.setClass(Xo,ay);const DM=["type","objects","layoutManager"];class jM extends Xo{performLayout(){}}class Dr extends Hv(Ze){static getDefaults(){return j(j({},super.getDefaults()),Dr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),L(this,"_activeObjects",[]),L(this,"__objectSelectionTracker",void 0),L(this,"__objectSelectionDisposer",void 0),Object.assign(this,Dr.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new Xo,this.layoutManager.performLayout({type:An,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(ti("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(ti("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,i)=>this.canEnterGroup(t)&&i.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange(Lc,i),s}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(n),a=super.insertAt(e,...s);return this._onAfterObjectsChange(Lc,s),a}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Vd,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(i=>{i._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const i=this._activeObjects;if(e)i.push(n),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(n);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Rs(e,pt(mr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Rs(e,pt(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=Ze.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const a=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&a.group!==this?(e.save(),e.transform(...mr(this.calcTransformMatrix())),a.render(e),e.restore()):a.group===this&&a.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(j({target:this,type:Nc},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=n;const a=i[e||"toObject"](t);return i.includeDefaultValues=s,a})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return j(j(j({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Tt.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:i=[],layoutManager:s}=e,a=st(e,DM);return Promise.all([Ns(i,t),Vo(a,t)]).then(c=>{let[u,h]=c;const d=new this(u,j(j(j({},a),h),{},{layoutManager:new jM}));if(s){const g=ie.getClass(s.type),p=ie.getClass(s.strategy);d.layoutManager=new g(new p)}else d.layoutManager=new Xo;return d.layoutManager.subscribeTargets({type:An,target:d,targets:d.getObjects()}),d.setCoords(),d})}}L(Dr,"type","Group"),L(Dr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ie.setClass(Dr);const cy=(r,e)=>Math.min(e.width/r.width,e.height/r.height),ly=(r,e)=>Math.max(e.width/r.width,e.height/r.height),zd="\\s*,?\\s*",Go="".concat(zd,"(").concat(Ni,")"),FM="".concat(Go).concat(Go).concat(Go).concat(zd,"([01])").concat(zd,"([01])").concat(Go).concat(Go),LM={m:"l",M:"L"},NM=(r,e,t,n,i,s,a,c,u,h,d)=>{const g=Xr(r),p=Gr(r),y=Xr(e),b=Gr(e),x=t*i*y-n*s*b+a,S=n*i*y+t*s*b+c;return["C",h+u*(-t*i*p-n*s*g),d+u*(-n*i*p+t*s*g),x+u*(t*i*b+n*s*y),S+u*(n*i*b-t*s*y),x,S]},uy=(r,e,t,n)=>{const i=Math.atan2(e,r),s=Math.atan2(n,t);return s>=i?s-i:2*Math.PI-(i-s)};function Wd(r,e,t,n,i,s,a,c){let u;if(Ve.cachesBoundsOfCurve&&(u=[...arguments].join(),jo.boundsOfCurveCache[u]))return jo.boundsOfCurveCache[u];const h=Math.sqrt,d=Math.abs,g=[],p=[[0,0],[0,0]];let y=6*r-12*t+6*i,b=-3*r+9*t-9*i+3*a,x=3*t-3*r;for(let M=0;M<2;++M){if(M>0&&(y=6*e-12*n+6*s,b=-3*e+9*n-9*s+3*c,x=3*n-3*e),d(b)<1e-12){if(d(y)<1e-12)continue;const X=-x/y;0<X&&X<1&&g.push(X);continue}const F=y*y-4*x*b;if(F<0)continue;const N=h(F),W=(-y+N)/(2*b);0<W&&W<1&&g.push(W);const R=(-y-N)/(2*b);0<R&&R<1&&g.push(R)}let S=g.length;const T=S,k=dy(r,e,t,n,i,s,a,c);for(;S--;){const{x:M,y:F}=k(g[S]);p[0][S]=M,p[1][S]=F}p[0][T]=r,p[1][T]=e,p[0][T+1]=a,p[1][T+1]=c;const I=[new z(Math.min(...p[0]),Math.min(...p[1])),new z(Math.max(...p[0]),Math.max(...p[1]))];return Ve.cachesBoundsOfCurve&&(jo.boundsOfCurveCache[u]=I),I}const RM=(r,e,t)=>{let[n,i,s,a,c,u,h,d]=t;const g=((p,y,b,x,S,T,k)=>{if(b===0||x===0)return[];let I=0,M=0,F=0;const N=Math.PI,W=k*rd,R=Gr(W),X=Xr(W),U=.5*(-X*p-R*y),K=.5*(-X*y+R*p),$=b**2,G=x**2,re=K**2,fe=U**2,Q=$*G-$*re-G*fe;let ue=Math.abs(b),oe=Math.abs(x);if(Q<0){const Mt=Math.sqrt(1-Q/($*G));ue*=Mt,oe*=Mt}else F=(S===T?-1:1)*Math.sqrt(Q/($*re+G*fe));const se=F*ue*K/oe,de=-F*oe*U/ue,ne=X*se-R*de+.5*p,Fe=R*se+X*de+.5*y;let Ge=uy(1,0,(U-se)/ue,(K-de)/oe),Re=uy((U-se)/ue,(K-de)/oe,(-U-se)/ue,(-K-de)/oe);T===0&&Re>0?Re-=2*N:T===1&&Re<0&&(Re+=2*N);const xe=Math.ceil(Math.abs(Re/N*2)),ke=[],ut=Re/xe,or=8/3*Math.sin(ut/4)*Math.sin(ut/4)/Math.sin(ut/2);let Rt=Ge+ut;for(let Mt=0;Mt<xe;Mt++)ke[Mt]=NM(Ge,Rt,X,R,ue,oe,ne,Fe,or,I,M),I=ke[Mt][5],M=ke[Mt][6],Ge=Rt,Rt+=ut;return ke})(h-r,d-e,i,s,c,u,a);for(let p=0,y=g.length;p<y;p++)g[p][1]+=r,g[p][2]+=e,g[p][3]+=r,g[p][4]+=e,g[p][5]+=r,g[p][6]+=e;return g},hy=r=>{let e=0,t=0,n=0,i=0;const s=[];let a,c=0,u=0;for(const h of r){const d=[...h];let g;switch(d[0]){case"l":d[1]+=e,d[2]+=t;case"L":e=d[1],t=d[2],g=["L",e,t];break;case"h":d[1]+=e;case"H":e=d[1],g=["L",e,t];break;case"v":d[1]+=t;case"V":t=d[1],g=["L",e,t];break;case"m":d[1]+=e,d[2]+=t;case"M":e=d[1],t=d[2],n=d[1],i=d[2],g=["M",e,t];break;case"c":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t,d[5]+=e,d[6]+=t;case"C":c=d[3],u=d[4],e=d[5],t=d[6],g=["C",d[1],d[2],c,u,e,t];break;case"s":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"S":a==="C"?(c=2*e-c,u=2*t-u):(c=e,u=t),e=d[3],t=d[4],g=["C",c,u,d[1],d[2],e,t],c=g[3],u=g[4];break;case"q":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"Q":c=d[1],u=d[2],e=d[3],t=d[4],g=["Q",c,u,e,t];break;case"t":d[1]+=e,d[2]+=t;case"T":a==="Q"?(c=2*e-c,u=2*t-u):(c=e,u=t),e=d[1],t=d[2],g=["Q",c,u,e,t];break;case"a":d[6]+=e,d[7]+=t;case"A":RM(e,t,d).forEach(p=>s.push(p)),e=d[6],t=d[7];break;case"z":case"Z":e=n,t=i,g=["Z"]}g?(s.push(g),a=g[0]):a=""}return s},Vc=(r,e,t,n)=>Math.sqrt((t-r)**2+(n-e)**2),dy=(r,e,t,n,i,s,a,c)=>u=>{const h=u**3,d=(y=>3*y**2*(1-y))(u),g=(y=>3*y*(1-y)**2)(u),p=(y=>(1-y)**3)(u);return new z(a*h+i*d+t*g+r*p,c*h+s*d+n*g+e*p)},fy=r=>r**2,gy=r=>2*r*(1-r),py=r=>(1-r)**2,VM=(r,e,t,n,i,s,a,c)=>u=>{const h=fy(u),d=gy(u),g=py(u),p=3*(g*(t-r)+d*(i-t)+h*(a-i)),y=3*(g*(n-e)+d*(s-n)+h*(c-s));return Math.atan2(y,p)},BM=(r,e,t,n,i,s)=>a=>{const c=fy(a),u=gy(a),h=py(a);return new z(i*c+t*u+r*h,s*c+n*u+e*h)},zM=(r,e,t,n,i,s)=>a=>{const c=1-a,u=2*(c*(t-r)+a*(i-t)),h=2*(c*(n-e)+a*(s-n));return Math.atan2(h,u)},my=(r,e,t)=>{let n=new z(e,t),i=0;for(let s=1;s<=100;s+=1){const a=r(s/100);i+=Vc(n.x,n.y,a.x,a.y),n=a}return i},WM=(r,e)=>{let t,n=0,i=0,s={x:r.x,y:r.y},a=j({},s),c=.01,u=0;const h=r.iterator,d=r.angleFinder;for(;i<e&&c>1e-4;)a=h(n),u=n,t=Vc(s.x,s.y,a.x,a.y),t+i>e?(n-=c,c/=2):(s=a,n+=c,i+=t);return j(j({},a),{},{angle:d(u)})},Hd=r=>{let e,t,n=0,i=0,s=0,a=0,c=0;const u=[];for(const h of r){const d={x:i,y:s,command:h[0],length:0};switch(h[0]){case"M":t=d,t.x=a=i=h[1],t.y=c=s=h[2];break;case"L":t=d,t.length=Vc(i,s,h[1],h[2]),i=h[1],s=h[2];break;case"C":e=dy(i,s,h[1],h[2],h[3],h[4],h[5],h[6]),t=d,t.iterator=e,t.angleFinder=VM(i,s,h[1],h[2],h[3],h[4],h[5],h[6]),t.length=my(e,i,s),i=h[5],s=h[6];break;case"Q":e=BM(i,s,h[1],h[2],h[3],h[4]),t=d,t.iterator=e,t.angleFinder=zM(i,s,h[1],h[2],h[3],h[4]),t.length=my(e,i,s),i=h[3],s=h[4];break;case"Z":t=d,t.destX=a,t.destY=c,t.length=Vc(i,s,a,c),i=a,s=c}n+=t.length,u.push(t)}return u.push({length:n,x:i,y:s}),u},vy=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hd(r),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const i=t[n],s=e/i.length,a=r[n];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return j(j({},new z(i.x,i.y).lerp(new z(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return j(j({},new z(i.x,i.y).lerp(new z(a[1],a[2]),s)),{},{angle:Math.atan2(a[2]-i.y,a[1]-i.x)});case"C":case"Q":return WM(i,e)}},HM=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),yy=new RegExp(FM,"g"),UM=new RegExp(Ni,"gi"),$M={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},by=r=>{var e;const t=[],n=(e=r.match(HM))!==null&&e!==void 0?e:[];for(const i of n){const s=i[0];if(s==="z"||s==="Z"){t.push([s]);continue}const a=$M[s.toLowerCase()];let c=[];if(s==="a"||s==="A"){yy.lastIndex=0;for(let u=null;u=yy.exec(i);)c.push(...u.slice(1))}else c=i.match(UM)||[];for(let u=0;u<c.length;u+=a){const h=new Array(a),d=LM[s];h[0]=u>0&&d?d:s;for(let g=0;g<a;g++)h[g+1]=parseFloat(c[u+g]);t.push(h)}}return t},YM=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new z(r[0]),n=new z(r[1]),i=1,s=0;const a=[],c=r.length,u=c>2;let h;for(u&&(i=r[2].x<n.x?-1:r[2].x===n.x?0:1,s=r[2].y<n.y?-1:r[2].y===n.y?0:1),a.push(["M",t.x-i*e,t.y-s*e]),h=1;h<c;h++){if(!t.eq(n)){const d=t.midPointFrom(n);a.push(["Q",t.x,t.y,d.x,d.y])}t=r[h],h+1<r.length&&(n=r[h+1])}return u&&(i=t.x>r[h-2].x?1:t.x===r[h-2].x?0:-1,s=t.y>r[h-2].y?1:t.y===r[h-2].y?0:-1),a.push(["L",t.x+i*e,t.y+s*e]),a},wy=(r,e)=>r.map(t=>t.map((n,i)=>i===0||e===void 0?n:ot(n,e)).join(" ")).join(" ");function Bc(r,e){const t=r.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[i,s]=n;return t.setProperty(i,s)}))}const XM=(r,e)=>Math.floor(Math.random()*(e-r+1))+r;function GM(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=e.onComplete||Pi,n=new(gc()).XMLHttpRequest,i=e.signal,s=function(){n.abort()},a=function(){i&&i.removeEventListener("abort",s),n.onerror=n.ontimeout=Pi};if(i&&i.aborted)throw new Lv("request");return i&&i.addEventListener("abort",s,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(a(),t(n),n.onreadystatechange=Pi)},n.onerror=n.ontimeout=a,n.open("get",r,!0),n.send(),n}var _y=Object.freeze({__proto__:null,addTransformToObject:u1,animate:Ad,animateColor:I1,applyTransformToObject:Rs,calcAngleBetweenVectors:Oc,calcDimensionsMatrix:No,calcPlaneChangeMatrix:Ho,calcVectorRotation:_1,cancelAnimFrame:$v,capValue:Ri,composeMatrix:Kv,copyCanvasElement:r=>{var e;const t=qr(r);return(e=t.getContext("2d"))===null||e===void 0||e.drawImage(r,0,0),t},cos:Xr,createCanvasElement:Or,createImage:Yv,createRotateMatrix:Ls,createScaleMatrix:xc,createSkewXMatrix:ud,createSkewYMatrix:hd,createTranslateMatrix:Fs,createVector:Ac,crossProduct:Vs,degreesToRadians:gt,dotProduct:x1,ease:YA,enlivenObjectEnlivables:Vo,enlivenObjects:Ns,findScaleToCover:ly,findScaleToFit:cy,getBoundsOfCurve:Wd,getOrthonormalVector:Sd,getPathSegmentsInfo:Hd,getPointOnPath:vy,getPointer:l1,getRandomInt:XM,getRegularPolygonPath:(r,e)=>{const t=2*Math.PI/r;let n=-ri;r%2==0&&(n+=t/2);const i=new Array(r+1);for(let s=0;s<r;s++){const a=s*t+n,{x:c,y:u}=new z(Xr(a),Gr(a)).scalarMultiply(e);i[s]=[s===0?"M":"L",c,u]}return i[r]=["Z"],i},getSmoothPathFromPoints:YM,getSvgAttributes:r=>{const e=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:Pc,groupSVGElements:(r,e)=>r&&r.length===1?r[0]:new Dr(r,e),hasStyleChanged:Fc,invertTransform:mr,isBetweenVectors:Cd,isIdentityMatrix:Xv,isTouchEvent:Cc,isTransparent:U1,joinPath:wy,loadImage:Ro,magnitude:Mc,makeBoundingBoxFromPoints:fn,makePathSimpler:hy,matrixToSVG:Bo,mergeClipPaths:(r,e)=>{var t;let n=r,i=e;n.inverted&&!i.inverted&&(n=e,i=r),vd(i,(t=i.group)===null||t===void 0?void 0:t.calcTransformMatrix(),n.calcTransformMatrix());const s=n.inverted&&i.inverted;return s&&(n.inverted=i.inverted=!1),new Dr([n],{clipPath:i,inverted:s})},multiplyTransformMatrices:pt,multiplyTransformMatrixArray:_c,parsePath:by,parsePreserveAspectRatioAttribute:t1,parseUnit:Fi,pick:ji,projectStrokeOnPoints:X1,qrDecompose:js,radiansToDegrees:si,removeFromArray:Di,removeTransformFromObject:(r,e)=>{const t=mr(e),n=pt(t,r.calcOwnMatrix());Rs(r,n)},removeTransformMatrixForSvgParsing:(r,e)=>{let t=r._findCenterFromElement();r.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:i,scaleY:s,angle:a,skewX:c}=js(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(Kt,i),n.set(pr,s),n.angle=a,n.skewX=c,n.skewY=0}})(r),t=t.transform(r.transformMatrix)),delete r.transformMatrix,e&&(r.scaleX*=e.scaleX,r.scaleY*=e.scaleY,r.cropX=e.cropX,r.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,r.width=e.width,r.height=e.height),r.setPositionByOrigin(t,Ee,Ee)},request:GM,requestAnimFrame:Lo,resetObjectTransform:h1,rotatePoint:(r,e,t)=>r.rotate(t,e),rotateVector:xd,saveObjectTransform:md,sendObjectToPlane:vd,sendPointToPlane:Cn,sendVectorToPlane:d1,setStyle:Bc,sin:Gr,sizeAfterTransform:Tc,string:lM,stylesFromArray:K1,stylesToArray:q1,toDataURL:ld,toFixed:ot,transformPath:(r,e,t)=>(t&&(e=pt(e,[1,0,0,1,-t.x,-t.y])),r.map(n=>{const i=[...n];for(let s=1;s<n.length-1;s+=2){const{x:a,y:c}=Ht({x:n[s],y:n[s+1]},e);i[s]=a,i[s+1]=c}return i})),transformPoint:Ht});class qM extends c1{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),L(this,"upper",void 0),L(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const a=this.createContainerElement();a.classList.add(n),i.parentNode&&i.parentNode.replaceChild(a,i),a.append(i,s),this.container=a}createUpperCanvas(){const{el:e}=this.lower,t=Or();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Ms().createElement("div");return e.setAttribute("data-fabric","wrapper"),Bc(e,{position:"relative"}),a1(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:i}=t;Bc(e,j(j({},n),{},{"touch-action":i?"manipulation":ir})),a1(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:i}=this.upper;o1(n,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),gd(this.upper.el,e),gd(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),dn().dispose(this.upper.el),delete this.upper,delete this.container}}class zc extends Wo{constructor(){super(...arguments),L(this,"targets",[]),L(this,"_hoveredTargets",[]),L(this,"_objectsToRender",void 0),L(this,"_currentTransform",null),L(this,"_groupSelector",null),L(this,"contextTopDirty",!1)}static getDefaults(){return j(j({},super.getDefaults()),zc.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new qM(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-n+i),s.transform(...this.viewportTransform);const a=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=a,s.restore();const c=Math.round(i*this.getRetinaScaling());return U1(s,c,c,c)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&n.length>1&&n.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let i;return t===vc||t===Kt||t===pr||t===Fo?i=this.centeredScaling||e.centeredScaling:t===od&&(i=this.centeredRotation||e.centeredRotation),i?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=bt:["mr","tr","br"].includes(t)&&(n.x=Ue),["tl","mt","tr"].includes(t)?n.y=id:["bl","mb","br"].includes(t)&&(n.y=nr)),n}_setupCurrentTransform(e,t,n){var i;const s=t.group?Cn(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:a="",control:c}=t.getActiveControl()||{},u=n&&c?(i=c.getActionHandler(e,t,c))===null||i===void 0?void 0:i.bind(c):m1,h=((y,b,x,S)=>{if(!b||!y)return"drag";const T=S.controls[b];return T.getActionName(x,T,S)})(n,a,e,t),d=e[this.centeredKey],g=this._shouldCenterTransform(t,h,d)?{x:Ee,y:Ee}:this._getOriginFromCorner(t,a),p={target:t,action:h,actionHandler:u,actionPerformed:!1,corner:a,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:g.x,originY:g.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:gt(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:d,original:j(j({},md(t)),{},{originX:g.x,originY:g.y})};this._currentTransform=p,this.fire("before:transform",{e,transform:p})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:i,deltaY:s}=this._groupSelector,a=new z(t,n).transform(this.viewportTransform),c=new z(t+i,n+s).transform(this.viewportTransform),u=this.selectionLineWidth/2;let h=Math.min(a.x,c.x),d=Math.min(a.y,c.y),g=Math.max(a.x,c.x),p=Math.max(a.y,c.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(h,d,g-h,p-d)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,h+=u,d+=u,g-=u,p-=u,Ze.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(h,d,g-h,p-d))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n.findControl(t,Cc(e))||i.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const a=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&a&&a!==n?(this.targets=s,n):a}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[a,c,u,h]=n,d=Math.atan2(c.y-a.y,c.x-a.x),g=Xr(d)*s,p=Gr(d)*s,y=g+p,b=g-p;n=[new z(a.x-b,a.y-y),new z(c.x+y,c.y-b),new z(u.x+b,u.y+y),new z(h.x-y,h.y+b)]}return ct.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Cn(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const i=e[n];if(this._checkTarget(i,t)){if(wc(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,t);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&wc(n)&&n.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const a=i[s];if(!wc(a)||!a.interactive)return a}return i[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,i=n.getBoundingClientRect();let s=l1(e),a=i.width||0,c=i.height||0;a&&c||(nr in i&&id in i&&(c=Math.abs(i.top-i.bottom)),bt in i&&Ue in i&&(a=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Cn(s,void 0,this.viewportTransform));const u=this.getRetinaScaling();u!==1&&(s.x/=u,s.y/=u);const h=a===0||c===0?new z(1,1):new z(n.width/a,n.height/c);return s.multiply(h)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Or(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Li(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,i=!1;const s=this.getActiveObjects(),a=[],c=[];e.forEach(u=>{s.includes(u)||(n=!0,u.fire("deselected",{e:t,target:u}),c.push(u))}),s.forEach(u=>{e.includes(u)||(n=!0,u.fire("selected",{e:t,target:u}),a.push(u))}),e.length>0&&s.length>0?(i=!0,n&&this.fire("selection:updated",{e:t,selected:a,deselected:c})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:a})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:c})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),i}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Li(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),Li(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,i={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),n.fire(yc,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Li(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,n);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Li(t)&&this._activeObject===t){const n=ji(e,["angle","flipX","flipY",Ue,Kt,pr,Os,Ps,nr]);return u1(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(i)}}L(zc,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class KM{constructor(e){L(this,"targets",[]),L(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Di(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const ZM=["target","oldTarget","fireCanvas","e"],vr={passive:!1},Ws=(r,e)=>{const t=r.getViewportPoint(e),n=r.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},ci=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.addEventListener(...t)},jr=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.removeEventListener(...t)},JM={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Ud extends zc{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),L(this,"_isClick",void 0),L(this,"textEditingManager",new KM(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(ci,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,i=this._getEventPrefix();e(s1(n),"resize",this._onResize),e(n,i+"down",this._onMouseDown),e(n,"".concat(i,"move"),this._onMouseMove,vr),e(n,"".concat(i,"out"),this._onMouseOut),e(n,"".concat(i,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,vr)}removeListeners(){this.addOrRemove(jr,"remove");const e=this._getEventPrefix(),t=Kr(this.upperCanvasEl);jr(t,"".concat(e,"up"),this._onMouseUp),jr(t,"touchend",this._onTouchEnd,vr),jr(t,"".concat(e,"move"),this._onMouseMove,vr),jr(t,"touchmove",this._onMouseMove,vr),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=j({e},Ws(this,e));this.fire("mouse:out",j(j({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",j({},n)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",j(j({},n),{},{target:i})),i&&i.fire("mouseout",j({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",j({e},Ws(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void ci(this.upperCanvasEl,"drag",this._onDragProgress)}pd(e)}_renderDragEffects(e,t,n){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==n&&(s.clearContextTop(),i=!0),t?.clearContextTop(),n!==t&&n?.clearContextTop();const a=this.contextTop;a.save(),a.transform(...this.viewportTransform),t&&(a.save(),t.transform(a),t.renderDragSourceEffect(e),a.restore(),i=!0),n&&(a.save(),n.transform(a),n.renderDropTargetEffect(e),a.restore(),i=!0),a.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==ir,n=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};jr(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:i}=this.findDragTargets(e),s=this._dragSource,a={e,target:n,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let c;this.fire(t,a),this._fireEnterLeaveEvents(n,a),n&&(n.canDrop(e)&&(c=n),n.fire(t,a));for(let u=0;u<i.length;u++){const h=i[u];h.canDrop(e)&&(c=h),h.fire(t,a)}this._renderDragEffects(e,s,c),this._dropTarget=c}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),i={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",j({e,target:t,subTargets:n,dragSource:this._dragSource},Ws(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&pd(e),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),a=Kr(i);ci(a,"touchend",this._onTouchEnd,vr),t&&ci(a,"touchmove",this._onMouseMove,vr),jr(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();jr(t,"".concat(n,"move"),this._onMouseMove,vr);const i=Kr(t);ci(i,"".concat(n,"up"),this._onMouseUp),ci(i,"".concat(n,"move"),this._onMouseMove,vr)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=Kr(this.upperCanvasEl);jr(n,"touchend",this._onTouchEnd,vr),jr(n,"touchmove",this._onMouseMove,vr),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{ci(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const i=Kr(this.upperCanvasEl);jr(i,"".concat(n,"up"),this._onMouseUp),jr(i,"".concat(n,"move"),this._onMouseMove,vr),ci(t,"".concat(n,"move"),this._onMouseMove,vr)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,i=this._isClick,s=this._target,{button:a}=e;if(a)return(this.fireMiddleClick&&a===1||this.fireRightClick&&a===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let c,u,h=!1;if(n&&(this._finalizeCurrentTransform(e),h=n.actionPerformed),!i){const d=s===this._activeObject;this.handleSelection(e),h||(h=this._shouldRender(s)||!d&&s===this._activeObject)}if(s){const d=s.findControl(this.getViewportPoint(e),Cc(e)),{key:g,control:p}=d||{};if(u=g,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),h=!0;else if(p){const y=p.getMouseUpHandler(e,s,p);y&&(c=this.getScenePoint(e),y.call(p,e,n,c.x,c.y))}s.isMoving=!1}if(n&&(n.target!==s||n.corner!==u)){const d=n.target&&n.target.controls[n.corner],g=d&&d.getMouseUpHandler(e,n.target,d);c=c||this.getScenePoint(e),g&&g.call(d,e,n,c.x,c.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),h?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:i=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let s=0;s<i.length;s++)i[s]!==n&&i[s].fire(e,t);return t}_handleEvent(e,t){const n=this._target,i=this.targets||[],s=j(j({e,target:n,subTargets:i},Ws(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),s),n&&n.fire("mouse".concat(t),s);for(let a=0;a<i.length;a++)i[a]!==n&&i[a].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(t){const a=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const c=t.findControl(this.getViewportPoint(e),Cc(e));if(t===this._activeObject&&(c||!s)){this._setupCurrentTransform(e,t,a);const u=c?c.control:void 0,h=this.getScenePoint(e),d=u&&u.getMouseDownHandler(e,t,u);d&&d.call(u,e,this._currentTransform,h.x,h.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Cn(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,a=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let c=0;c<a;c++)this.fireSyntheticInOutEvents("mouse",{e,target:s[c],oldTarget:i[c]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,a=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",j(j({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let c=0;c<a;c++)this.fireSyntheticInOutEvents("drag",j(j({},t),{},{target:s[c],oldTarget:i[c]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:i,fireCanvas:s,e:a}=t,c=st(t,ZM);const{targetIn:u,targetOut:h,canvasIn:d,canvasOut:g}=JM[e],p=i!==n;if(i&&p){const y=j(j({},c),{},{e:a,target:i,nextTarget:n},Ws(this,a));s&&this.fire(g,y),i.fire(h,y)}if(n&&p){const y=j(j({},c),{},{e:a,target:n,previousTarget:i},Ws(this,a));s&&this.fire(d,y),n.fire(u,y)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,i=n.target,s=i.group?Cn(t,void 0,i.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,s),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:i,actionHandler:s,target:a}=t,c=!!s&&s(e,t,n.x,n.y);c&&a.setCoords(),i==="drag"&&c&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||c}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const i=Li(this._activeObject)?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(s){const a=s.control;this.setCursor(a.cursorStyleHandler(e,a,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(a=>{n=a.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,i=Li(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||i)&&(i||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(i){const s=n.getObjects();if(t===n){const a=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,a)||this.searchPossibleTargets(this._objects,a))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{n.isEditing&&n.exitEditing();const s=new(ie.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(n,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:i,deltaY:s}=this._groupSelector,a=new z(t,n),c=a.add(new z(i,s)),u=a.min(c),h=a.max(c).subtract(u),d=this.collectObjects({left:u.x,top:u.y,width:h.x,height:h.y},{includeIntersecting:!this.selectionFullyContained}),g=a.eq(c)?d[0]?[d[0]]:[]:d.length>1?d.filter(p=>!p.onSelect({e})).reverse():d;if(g.length===1)this.setActiveObject(g[0],e);else if(g.length>1){const p=ie.getClass("ActiveSelection");this.setActiveObject(new p(g,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const xy={x1:0,y1:0,x2:0,y2:0},QM=j(j({},xy),{},{r1:0,r2:0}),Hs=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,eO=/^(\d+\.\d+)%|(\d+)%$/;function Sy(r){return r&&eO.test(r)}function Cy(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(Sy(r)?100:1):NaN;return Ri(0,Hs(t,e),1)}const tO=/\s*;\s*/,rO=/\s*:\s*/;function nO(r,e){let t,n;const i=r.getAttribute("style");if(i){const a=i.split(tO);a[a.length-1]===""&&a.pop();for(let c=a.length;c--;){const[u,h]=a[c].split(rO).map(d=>d.trim());u==="stop-color"?t=h:u==="stop-opacity"&&(n=h)}}const s=new Xe(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Cy(r.getAttribute("offset"),0),color:s.toRgb(),opacity:Hs(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function iO(r,e){const t=[],n=r.getElementsByTagName("stop"),i=Cy(e,1);for(let s=n.length;s--;)t.push(nO(n[s],i));return t}function Ty(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Ey(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Jr(r,e){return r.getAttribute(e)}function sO(r,e){return function(t,n){let i,{width:s,height:a,gradientUnits:c}=n;return Object.keys(t).reduce((u,h)=>{const d=t[h];return d==="Infinity"?i=1:d==="-Infinity"?i=0:(i=typeof d=="string"?parseFloat(d):d,typeof d=="string"&&Sy(d)&&(i*=.01,c==="pixels"&&(h!=="x1"&&h!=="x2"&&h!=="r2"||(i*=s),h!=="y1"&&h!=="y2"||(i*=a)))),u[h]=i,u},{})}(Ty(r)==="linear"?function(t){return{x1:Jr(t,"x1")||0,y1:Jr(t,"y1")||0,x2:Jr(t,"x2")||"100%",y2:Jr(t,"y2")||0}}(r):function(t){return{x1:Jr(t,"fx")||Jr(t,"cx")||"50%",y1:Jr(t,"fy")||Jr(t,"cy")||"50%",r1:0,x2:Jr(t,"cx")||"50%",y2:Jr(t,"cy")||"50%",r2:Jr(t,"r")||"50%"}}(r),j(j({},e),{},{gradientUnits:Ey(r)}))}class Wc{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:i={},colorStops:s=[],offsetX:a=0,offsetY:c=0,gradientTransform:u,id:h}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:j(j({},t==="radial"?QM:xy),i),colorStops:s,offsetX:a,offsetY:c,gradientTransform:u,id:h?"".concat(h,"_").concat(ii()):ii()})}addColorStop(e){for(const t in e){const n=new Xe(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return j(j({},ji(this,e)),{},{type:this.type,coords:j({},this.coords),colorStops:this.colorStops.map(t=>j({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():qt.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",a=this.colorStops.map(g=>j({},g)).sort((g,p)=>g.offset-p.offset);let c=-this.offsetX,u=-this.offsetY;var h;s==="objectBoundingBox"?(c/=e.width,u/=e.height):(c+=e.width/2,u+=e.height/2),(h=e)&&typeof h._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(c-=e.pathOffset.x,u-=e.pathOffset.y),i[4]-=c,i[5]-=u;const d=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Bo(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:g,y1:p,x2:y,y2:b}=this.coords;n.push("<linearGradient ",d,' x1="',g,'" y1="',p,'" x2="',y,'" y2="',b,`">
`)}else if(this.type==="radial"){const{x1:g,y1:p,x2:y,y2:b,r1:x,r2:S}=this.coords,T=x>S;n.push("<radialGradient ",d,' cx="',T?g:y,'" cy="',T?p:b,'" r="',T?x:S,'" fx="',T?y:g,'" fy="',T?b:p,`">
`),T&&(a.reverse(),a.forEach(I=>{I.offset=1-I.offset}));const k=Math.min(x,S);if(k>0){const I=k/Math.max(x,S);a.forEach(M=>{M.offset+=I*(1-M.offset)})}}return a.forEach(g=>{let{color:p,offset:y,opacity:b}=g;n.push("<stop ",'offset="',100*y+"%",'" style="stop-color:',p,b!==void 0?";stop-opacity: "+b:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:i,y2:s,r1:a,r2:c}=this.coords,u=this.type==="linear"?e.createLinearGradient(t,n,i,s):e.createRadialGradient(t,n,a,i,s,c);return this.colorStops.forEach(h=>{let{color:d,opacity:g,offset:p}=h;u.addColorStop(p,g!==void 0?new Xe(d).setAlpha(g).toRgba():d)}),u}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(j(j({},e),{},{colorStops:t?t.map(i=>j({},i)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const i=Ey(e),s=t._findCenterFromElement();return new this(j({id:e.getAttribute("id")||void 0,type:Ty(e),coords:sO(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:iO(e,n.opacity),gradientUnits:i,gradientTransform:Rd(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}L(Wc,"type","Gradient"),ie.setClass(Wc,"gradient"),ie.setClass(Wc,"linear"),ie.setClass(Wc,"radial");const oO=["type","source","patternTransform"];class $d{get type(){return"pattern"}set type(e){ti("warn","Setting type has no effect",e)}constructor(e){L(this,"repeat","repeat"),L(this,"offsetX",0),L(this,"offsetY",0),L(this,"crossOrigin",""),this.id=ii(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return j(j({},ji(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:ot(this.offsetX,Ve.NUM_FRACTION_DIGITS),offsetY:ot(this.offsetY,Ve.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:i,repeat:s,id:a}=this,c=Hs(this.offsetX/t,0),u=Hs(this.offsetY/n,0),h=s==="repeat-y"||s==="no-repeat"?1+Math.abs(c||0):Hs(i.width/t,0),d=s==="repeat-x"||s==="no-repeat"?1+Math.abs(u||0):Hs(i.height/n,0);return['<pattern id="SVGID_'.concat(a,'" x="').concat(c,'" y="').concat(u,'" width="').concat(h,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:i,patternTransform:s}=e,a=st(e,oO);const c=await Ro(i,j(j({},t),{},{crossOrigin:a.crossOrigin}));return new this(j(j({},a),{},{patternTransform:s&&s.slice(0),source:c}))}}L($d,"type","Pattern"),ie.setClass($d),ie.setClass($d,"pattern");const aO=["path","left","top"],cO=["d"];class zi extends Ze{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:i,top:s}=t,a=st(t,aO);super(),Object.assign(this,zi.ownDefaults),this.setOptions(a),this._setPath(e||[],!0),typeof i=="number"&&this.set(Ue,i),typeof s=="number"&&this.set(nr,s)}_setPath(e,t){this.path=hy(Array.isArray(e)?e:by(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new z(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+n);break;case"M":e.moveTo(i[1]+t,i[2]+n);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n,i[5]+t,i[6]+n);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=wy(this.path,Ve.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Ve.NUM_FRACTION_DIGITS;return" translate(".concat(ot(-this.pathOffset.x,e),", ").concat(ot(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:i}=this._calcDimensions();this.set({width:t,height:n,pathOffset:i}),e&&this.setPositionByOrigin(i,Ee,Ee)}_calcBoundsFromPath(){const e=[];let t=0,n=0,i=0,s=0;for(const a of this.path)switch(a[0]){case"L":i=a[1],s=a[2],e.push({x:t,y:n},{x:i,y:s});break;case"M":i=a[1],s=a[2],t=i,n=s;break;case"C":e.push(...Wd(i,s,a[1],a[2],a[3],a[4],a[5],a[6])),i=a[5],s=a[6];break;case"Q":e.push(...Wd(i,s,a[1],a[2],a[1],a[2],a[3],a[4])),i=a[3],s=a[4];break;case"Z":i=t,s=n}return fn(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return j(j({},e),{},{pathOffset:new z(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const i=In(e,this.ATTRIBUTE_NAMES,n),{d:s}=i;return new this(s,j(j(j({},st(i,cO)),t),{},{left:void 0,top:void 0}))}}L(zi,"type","Path"),L(zi,"cacheProperties",[...En,"path","fillRule"]),L(zi,"ATTRIBUTE_NAMES",[...ai,"d"]),ie.setClass(zi),ie.setSVGClass(zi);const lO=["left","top","radius"],ky=["radius","startAngle","endAngle","counterClockwise"];class Mn extends Ze{static getDefaults(){return j(j({},super.getDefaults()),Mn.ownDefaults)}constructor(e){super(),Object.assign(this,Mn.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,gt(this.startAngle),gt(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Kt)}getRadiusY(){return this.get("radius")*this.get(pr)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ky,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=gt(this.startAngle),i=gt(this.endAngle),s=Xr(n)*t,a=Gr(n)*t,c=Xr(i)*t,u=Gr(i)*t,h=e>180?1:0,d=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(a," A ").concat(t," ").concat(t," 0 ").concat(h," ").concat(d," ").concat(c," ").concat(u,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const i=In(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,radius:c=0}=i;return new this(j(j({},st(i,lO)),{},{radius:c,left:s-c,top:a-c}))}static fromObject(e){return super._fromObject(e)}}L(Mn,"type","Circle"),L(Mn,"cacheProperties",[...En,...ky]),L(Mn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),L(Mn,"ATTRIBUTE_NAMES",["cx","cy","r",...ai]),ie.setClass(Mn),ie.setSVGClass(Mn);const uO=["x1","y1","x2","y2"],hO=["x1","y1","x2","y2"],Yd=["x1","x2","y1","y2"];class Wi extends Ze{constructor(){let[e,t,n,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Wi.ownDefaults),this.setOptions(s),this.x1=e,this.x2=n,this.y1=t,this.y2=i,this._setWidthHeight();const{left:a,top:c}=s;typeof a=="number"&&this.set(Ue,a),typeof c=="number"&&this.set(nr,c)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:i}=this;this.width=Math.abs(n-e),this.height=Math.abs(i-t);const{left:s,top:a,width:c,height:u}=fn([{x:e,y:t},{x:n,y:i}]),h=new z(s+c/2,a+u/2);this.setPositionByOrigin(h,Ee,Ee)}_set(e,t){return super._set(e,t),Yd.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var i;Pr(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new z((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:i,width:s,height:a}=this,c=e<=t?-1:1,u=n<=i?-1:1;return{x1:c*s/2,x2:c*-s/2,y1:u*a/2,y2:u*-a/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,n){const i=In(e,this.ATTRIBUTE_NAMES,n),{x1:s=0,y1:a=0,x2:c=0,y2:u=0}=i;return new this([s,a,c,u],st(i,uO))}static fromObject(e){let{x1:t,y1:n,x2:i,y2:s}=e,a=st(e,hO);return this._fromObject(j(j({},a),{},{points:[t,n,i,s]}),{extraParam:"points"})}}L(Wi,"type","Line"),L(Wi,"cacheProperties",[...En,...Yd]),L(Wi,"ATTRIBUTE_NAMES",ai.concat(Yd)),ie.setClass(Wi),ie.setSVGClass(Wi);class Hi extends Ze{static getDefaults(){return j(j({},super.getDefaults()),Hi.ownDefaults)}constructor(e){super(),Object.assign(this,Hi.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}L(Hi,"type","Triangle"),L(Hi,"ownDefaults",{width:100,height:100}),ie.setClass(Hi),ie.setSVGClass(Hi);const Iy=["rx","ry"];class On extends Ze{static getDefaults(){return j(j({},super.getDefaults()),On.ownDefaults)}constructor(e){super(),Object.assign(this,On.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Kt)}getRy(){return this.get("ry")*this.get(pr)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Iy,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Sn,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const i=In(e,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function dO(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}L(On,"type","Ellipse"),L(On,"cacheProperties",[...En,...Iy]),L(On,"ownDefaults",{rx:0,ry:0}),L(On,"ATTRIBUTE_NAMES",[...ai,"cx","cy","rx","ry"]),ie.setClass(On),ie.setSVGClass(On);const fO=["left","top"],Ay={exactBoundingBox:!1};class Qr extends Ze{static getDefaults(){return j(j({},super.getDefaults()),Qr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),L(this,"strokeDiff",void 0),Object.assign(this,Qr.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Ue,n),typeof i=="number"&&this.set(nr,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return X1(this.points,e,this.isOpen())}_calcDimensions(e){e=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(h=>h.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new z,strokeOffset:new z,strokeDiff:new z};const n=fn(t),i=No(j(j({},e),{},{scaleX:1,scaleY:1})),s=fn(this.points.map(h=>Ht(h,i,!0))),a=new z(this.scaleX,this.scaleY);let c=n.left+n.width/2,u=n.top+n.height/2;return this.exactBoundingBox&&(c-=u*Math.tan(gt(this.skewX)),u-=c*Math.tan(gt(this.skewY))),j(j({},n),{},{pathOffset:new z(c,u),strokeOffset:new z(s.left,s.top).subtract(new z(n.left,n.top)).multiply(a),strokeDiff:new z(n.width,n.height).subtract(new z(s.width,s.height)).multiply(a)})}_findCenterFromElement(){const e=fn(this.points);return new z(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:i,height:s,pathOffset:a,strokeOffset:c,strokeDiff:u}=this._calcDimensions();this.set({width:i,height:s,pathOffset:a,strokeOffset:c,strokeDiff:u}),e&&this.setPositionByOrigin(new z(t+i/2,n+s/2),Ee,Ee)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new z(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let a;if(Object.keys(e).some(c=>this.strokeUniform||this.constructor.layoutProperties.includes(c))){var t,n;const{width:c,height:u}=this._calcDimensions(e);a=new z((t=e.width)!==null&&t!==void 0?t:c,(n=e.height)!==null&&n!==void 0?n:u)}else{var i,s;a=new z((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return a.multiply(new z(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&n&&((e===Kt||e===pr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:i}=t;return{x:n,y:i}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,i=Ve.NUM_FRACTION_DIGITS;for(let s=0,a=this.points.length;s<a;s++)e.push(ot(this.points[s].x-t,i),",",ot(this.points[s].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-i);for(let s=0;s<t;s++){const a=this.points[s];e.lineTo(a.x-n,a.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(dO(e.getAttribute("points")),j(j({},st(In(e,this.ATTRIBUTE_NAMES,n),fO)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}L(Qr,"ownDefaults",Ay),L(Qr,"type","Polyline"),L(Qr,"layoutProperties",[Os,Ps,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),L(Qr,"cacheProperties",[...En,"points"]),L(Qr,"ATTRIBUTE_NAMES",[...ai]),ie.setClass(Qr),ie.setSVGClass(Qr);class Hc extends Qr{isOpen(){return!1}}L(Hc,"ownDefaults",Ay),L(Hc,"type","Polygon"),ie.setClass(Hc),ie.setSVGClass(Hc);const My=["fontSize","fontWeight","fontFamily","fontStyle"],Oy=["underline","overline","linethrough"],Py=[...My,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Dy=[...Py,...Oy,"textBackgroundColor","direction"],gO=[...My,...Oy,sr,"strokeWidth",kt,"deltaY","textBackgroundColor"],pO={_reNewline:sd,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Ue,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Ue,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},gn="justify",Uc="justify-left",qo="justify-right",Ko="justify-center";class jy extends Ze{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const i in t[n])for(const s in t[n][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const i in n)for(const s in n[i])if(n[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,i,s=0,a=!0,c=0;for(const u in t){n=0;for(const h in t[u]){const d=t[u][h]||{};s++,d[e]!==void 0?(i?d[e]!==i&&(a=!1):i=d[e],d[e]===this[e]&&delete d[e]):a=!1,Object.keys(d).length!==0?n++:delete t[u][h]}n===0&&delete t[u]}for(let u=0;u<this._textLines.length;u++)c+=this._textLines[u].length;a&&s===c&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,i,s;for(i in t){for(s in n=t[i],n)delete n[s][e],Object.keys(n[s]).length===0&&delete n[s];Object.keys(n).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const s=dd(j(j({},this._getStyleDeclaration(n,i)),t),a=>a!==void 0);this._setStyleDeclaration(n,i,s)}getSelectionStyles(e,t,n){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,n));return i}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(e,t,n){for(let i=t;i<(n||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const i=this.styles&&this.styles[e];return i&&(n=i[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return j(j({},ji(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}L(jy,"_styleProperties",gO);const mO=/  +/g,vO=/"/g;function Xd(r,e,t,n,i){return"		".concat(function(s,a){let{left:c,top:u,width:h,height:d}=a,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ve.NUM_FRACTION_DIGITS;const p=zo(kt,s,!1),[y,b,x,S]=[c,u,h,d].map(T=>ot(T,g));return"<rect ".concat(p,' x="').concat(y,'" y="').concat(b,'" width="').concat(x,'" height="').concat(S,'"></rect>')}(r,{left:e,top:t,width:n,height:i}),`
`)}const yO=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Gd;class Jt extends jy{static getDefaults(){return j(j({},super.getDefaults()),Jt.ownDefaults)}constructor(e,t){super(),L(this,"__charBounds",[]),Object.assign(this,Jt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Hd(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(gn)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,i,s,a,c;for(let u=0,h=this._textLines.length;u<h;u++)if((this.textAlign===gn||u!==h-1&&!this.isEndOfWrapping(u))&&(i=0,s=this._textLines[u],t=this.getLineWidth(u),t<this.width&&(c=this.textLines[u].match(this._reSpacesAndTabs)))){n=c.length,e=(this.width-t)/n;for(let d=0;d<=s.length;d++)a=this.__charBounds[u][d],this._reSpaceAndTab.test(s[d])?(a.width+=e,a.kernedWidth+=e,a.left+=i,i+=e):a.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(e<=n[i].length)return{lineIndex:i,charIndex:e};e-=n[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:n[i-1].length<e?n[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===sr?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Ee:e.textBaseline="middle";break;case"ascender":e.textBaseline=nr;break;case"descender":e.textBaseline=id}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,n,i,s,a){this._renderChars(e,t,n,i,s,a)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,a=this._textLines.length;s<a;s++){const c=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=c;continue}const u=this._textLines[s].length,h=this._getLineLeftOffset(s);let d,g,p=0,y=0,b=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let x=0;x<u;x++){const S=this.__charBounds[s][x];g=this.getValueOfPropertyAt(s,x,"textBackgroundColor"),this.path?(e.save(),e.translate(S.renderLeft,S.renderTop),e.rotate(S.angle),e.fillStyle=g,g&&e.fillRect(-S.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),S.width,c/this.lineHeight),e.restore()):g!==b?(d=n+h+y,this.direction==="rtl"&&(d=this.width-d-p),e.fillStyle=b,b&&e.fillRect(d,i,p,c/this.lineHeight),y=S.left,p=S.width,b=g):p+=S.kernedWidth}g&&!this.path&&(d=n+h+y,this.direction==="rtl"&&(d=this.width-d-p),e.fillStyle=g,e.fillRect(d,i,p,c/this.lineHeight)),i+=c}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,i){const s=jo.getFontCache(t),a=this._getFontDeclaration(t),c=n+e,u=n&&a===this._getFontDeclaration(i),h=t.fontSize/this.CACHE_FONT_SIZE;let d,g,p,y;if(n&&s[n]!==void 0&&(p=s[n]),s[e]!==void 0&&(y=d=s[e]),u&&s[c]!==void 0&&(g=s[c],y=g-p),d===void 0||p===void 0||g===void 0){const b=function(){return Gd||(Gd=qr({width:0,height:0}).getContext("2d")),Gd}();this._setTextStyles(b,t,!0),d===void 0&&(y=d=b.measureText(e).width,s[e]=d),p===void 0&&u&&n&&(p=b.measureText(n).width,s[n]=p),u&&g===void 0&&(g=b.measureText(c).width,s[c]=g,y=g-p)}return{width:d*h,kernedWidth:y*h}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,i=0;const s=this.pathSide===bt,a=this.path,c=this._textLines[e],u=c.length,h=new Array(u);this.__charBounds[e]=h;for(let d=0;d<u;d++){const g=c[d];n=this._getGraphemeBox(g,e,d,t),h[d]=n,i+=n.kernedWidth,t=g}if(h[u]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},a&&a.segmentsInfo){let d=0;const g=a.segmentsInfo[a.segmentsInfo.length-1].length;switch(this.textAlign){case Ue:d=s?g-i:0;break;case Ee:d=(g-i)/2;break;case bt:d=s?0:g-i}d+=this.pathStartOffset*(s?-1:1);for(let p=s?u-1:0;s?p>=0:p<u;s?p--:p++)n=h[p],d>g?d%=g:d<0&&(d+=g),this._setGraphemeOnPath(d,n),d+=n.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,i=this.path,s=vy(i.path,n,i.segmentsInfo);t.renderLeft=s.x-i.pathOffset.x,t.renderTop=s.y-i.pathOffset.y,t.angle=s.angle+(this.pathSide===bt?Math.PI:0)}_getGraphemeBox(e,t,n,i,s){const a=this.getCompleteStyleDeclaration(t,n),c=i?this.getCompleteStyleDeclaration(t,n-1):{},u=this._measureChar(e,a,i,c);let h,d=u.kernedWidth,g=u.width;this.charSpacing!==0&&(h=this._getWidthOfCharSpacing(),g+=h,d+=h);const p={width:g,left:0,height:a.fontSize,kernedWidth:d,deltaY:a.deltaY};if(n>0&&!s){const y=this.__charBounds[t][n-1];p.left=y.left+y.width+u.kernedWidth-u.width}return p}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,i=this._textLines[e].length;n<i;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,i=this._textLines.length;n<i;n++)e=this.getHeightOfLine(n),t+=n===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let a=0,c=this._textLines.length;a<c;a++){const u=this.getHeightOfLine(a),h=u/this.lineHeight,d=this._getLineLeftOffset(a);this._renderTextLine(t,e,this._textLines[a],i+d,s+n+h,a),n+=u}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(kt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,i,s,a){const c=this.getHeightOfLine(a),u=this.textAlign.includes(gn),h=this.path,d=!u&&this.charSpacing===0&&this.isEmptyStyles(a)&&!h,g=this.direction==="ltr",p=this.direction==="ltr"?1:-1,y=t.direction;let b,x,S,T,k,I="",M=0;if(t.save(),y!==this.direction&&(t.canvas.setAttribute("dir",g?"ltr":"rtl"),t.direction=g?"ltr":"rtl",t.textAlign=g?Ue:bt),s-=c*this._fontSizeFraction/this.lineHeight,d)return this._renderChar(e,t,a,0,n.join(""),i,s),void t.restore();for(let F=0,N=n.length-1;F<=N;F++)T=F===N||this.charSpacing||h,I+=n[F],S=this.__charBounds[a][F],M===0?(i+=p*(S.kernedWidth-S.width),M+=S.width):M+=S.kernedWidth,u&&!T&&this._reSpaceAndTab.test(n[F])&&(T=!0),T||(b=b||this.getCompleteStyleDeclaration(a,F),x=this.getCompleteStyleDeclaration(a,F+1),T=Fc(b,x,!1)),T&&(h?(t.save(),t.translate(S.renderLeft,S.renderTop),t.rotate(S.angle),this._renderChar(e,t,a,F,I,-M/2,0),t.restore()):(k=i,this._renderChar(e,t,a,F,I,k,s)),I="",b=x,i+=p*M,M=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,i=qr({width:t,height:n}),s=i.getContext("2d");return i.width=t,i.height=n,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,n),s.lineTo(0,n),s.closePath(),s.translate(t/2,n/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,t,n){let i,s;return Pr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:s}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,i,s,a,c){const u=this._getStyleDeclaration(n,i),h=this.getCompleteStyleDeclaration(n,i),d=e==="fillText"&&h.fill,g=e==="strokeText"&&h.stroke&&h.strokeWidth;if(g||d){if(t.save(),t.font=this._getFontDeclaration(h),u.textBackgroundColor&&this._removeShadow(t),u.deltaY&&(c+=u.deltaY),d){const p=this._setFillStyles(t,h);t.fillText(s,a-p.offsetX,c-p.offsetY)}if(g){const p=this._setStrokeStyles(t,h);t.strokeText(s,a-p.offsetX,c-p.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),c={fontSize:s*n.size,deltaY:a+s*n.baseline};this.setSelectionStyles(c,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,i=this.textAlign,s=this.direction,a=this.isEndOfWrapping(e);let c=0;return i===gn||i===Ko&&!a||i===qo&&!a||i===Uc&&!a?0:(i===Ee&&(c=n/2),i===bt&&(c=n),i===Ko&&(c=n/2),i===qo&&(c=n),s==="rtl"&&(i===bt||i===gn||i===qo?c=0:i===Ue||i===Uc?c=-n:i!==Ee&&i!==Ko||(c=-n/2)),c)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var i;return(i=this._getStyleDeclaration(e,t)[n])!==null&&i!==void 0?i:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,a=this._getWidthOfCharSpacing(),c=this.offsets[t];for(let u=0,h=this._textLines.length;u<h;u++){const d=this.getHeightOfLine(u);if(!this[t]&&!this.styleHas(t,u)){n+=d;continue}const g=this._textLines[u],p=d/this.lineHeight,y=this._getLineLeftOffset(u);let b,x,S=0,T=0,k=this.getValueOfPropertyAt(u,0,t),I=this.getValueOfPropertyAt(u,0,kt);const M=n+p*(1-this._fontSizeFraction);let F=this.getHeightOfChar(u,0),N=this.getValueOfPropertyAt(u,0,"deltaY");for(let R=0,X=g.length;R<X;R++){const U=this.__charBounds[u][R];b=this.getValueOfPropertyAt(u,R,t),x=this.getValueOfPropertyAt(u,R,kt);const K=this.getHeightOfChar(u,R),$=this.getValueOfPropertyAt(u,R,"deltaY");if(s&&b&&x)e.save(),e.fillStyle=I,e.translate(U.renderLeft,U.renderTop),e.rotate(U.angle),e.fillRect(-U.kernedWidth/2,c*K+$,U.kernedWidth,this.fontSize/15),e.restore();else if((b!==k||x!==I||K!==F||$!==N)&&T>0){let G=i+y+S;this.direction==="rtl"&&(G=this.width-G-T),k&&I&&(e.fillStyle=I,e.fillRect(G,M+c*F+N,T,this.fontSize/15)),S=U.left,T=U.width,k=b,I=x,F=K,N=$}else T+=U.kernedWidth}let W=i+y+S;this.direction==="rtl"&&(W=this.width-W-T),e.fillStyle=x,b&&x&&e.fillRect(W,M+c*F+N,T-a,this.fontSize/15),n+=d}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const a=e.includes("'")||e.includes('"')||e.includes(",")||Jt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),a].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return jc(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),i=[`
`];let s=[];for(let a=0;a<t.length;a++)n[a]=this.graphemeSplit(t[a]),s=s.concat(n[a],i);return s.pop(),{_unwrappedLines:n,lines:t,graphemeText:s,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject([...Dy,...e])),{},{styles:q1(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const a in e)a==="path"&&this.setPathInfo(),i=i||n.includes(a),s=s||a==="path";else i=n.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const i=In(e,Jt.ATTRIBUTE_NAMES,n),s=j(j({},t),i),{textAnchor:a=Ue,textDecoration:c="",dx:u=0,dy:h=0,top:d=0,left:g=0,fontSize:p=nd,strokeWidth:y=1}=s,b=st(s,yO),x=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),j({left:g+u,top:d+h,underline:c.includes("underline"),overline:c.includes("overline"),linethrough:c.includes("line-through"),strokeWidth:0,fontSize:p},b)),S=x.getScaledHeight()/x.height,T=((x.height+x.strokeWidth)*x.lineHeight-x.height)*S,k=x.getScaledHeight()+T;let I=0;return a===Ee&&(I=x.getScaledWidth()/2),a===bt&&(I=x.getScaledWidth()),x.set({left:x.left-I,top:x.top-(k-x.fontSize*(.07+x._fontSizeFraction))/x.lineHeight,strokeWidth:y}),x}static fromObject(e){return this._fromObject(j(j({},e),{},{styles:K1(e.styles||{},e.text)}),{extraParam:"text"})}}L(Jt,"textLayoutProperties",Py),L(Jt,"cacheProperties",[...En,...Dy]),L(Jt,"ownDefaults",pO),L(Jt,"type","Text"),L(Jt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),L(Jt,"ATTRIBUTE_NAMES",ai.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),H1(Jt,[class extends v1{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){return this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(vO,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],n=[];let i,s=r;this.backgroundColor&&n.push(...Xd(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let a=0,c=this._textLines.length;a<c;a++)i=this._getLineLeftOffset(a),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(n,a,e+i,s),this._setSVGTextLineText(t,a,e+i,s),s+=this.getHeightOfLine(a);return{textSpans:t,textBgRects:n}}_createTextCharSpan(r,e,t,n){const i=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match(mO)),s=i?'style="'.concat(i,'"'):"",a=e.deltaY,c=a?' dy="'.concat(ot(a,Ve.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(ot(t,Ve.NUM_FRACTION_DIGITS),'" y="').concat(ot(n,Ve.NUM_FRACTION_DIGITS),'" ').concat(c).concat(s,">").concat(G1(r),"</tspan>")}_setSVGTextLineText(r,e,t,n){const i=this.getHeightOfLine(e),s=this.textAlign.includes(gn),a=this._textLines[e];let c,u,h,d,g,p="",y=0;n+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let b=0,x=a.length-1;b<=x;b++)g=b===x||this.charSpacing,p+=a[b],h=this.__charBounds[e][b],y===0?(t+=h.kernedWidth-h.width,y+=h.width):y+=h.kernedWidth,s&&!g&&this._reSpaceAndTab.test(a[b])&&(g=!0),g||(c=c||this.getCompleteStyleDeclaration(e,b),u=this.getCompleteStyleDeclaration(e,b+1),g=Fc(c,u,!0)),g&&(d=this._getStyleDeclaration(e,b),r.push(this._createTextCharSpan(p,d,t,n)),p="",c=u,this.direction==="rtl"?t-=y:t+=y,y=0)}_setSVGTextLineBg(r,e,t,n){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let a,c=0,u=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let d=0;d<i.length;d++){const{left:g,width:p,kernedWidth:y}=this.__charBounds[e][d];a=this.getValueOfPropertyAt(e,d,"textBackgroundColor"),a!==h?(h&&r.push(...Xd(h,t+u,n,c,s)),u=g,c=p,h=a):c+=y}a&&r.push(...Xd(h,t+u,n,c,s))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:n,stroke:i,fill:s,fontSize:a,fontStyle:c,fontWeight:u,deltaY:h}=r,d=this.getSvgTextDecoration(r);return[i?zo(sr,i):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",a?"font-size: ".concat(a,"px; "):"",c?"font-style: ".concat(c,"; "):"",u?"font-weight: ".concat(u,"; "):"",d&&"text-decoration: ".concat(d,"; "),s?zo(kt,s):"",h?"baseline-shift: ".concat(-h,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter(e=>r[e.replace("-","")]).join(" ")}}]),ie.setClass(Jt),ie.setSVGClass(Jt);class bO{constructor(e){L(this,"target",void 0),L(this,"__mouseDownInPlace",!1),L(this,"__dragStartFired",!1),L(this,"__isDraggingOver",!1),L(this,"__dragStartSelection",void 0),L(this,"__dragImageDisposer",void 0),L(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:i,selectionEnd:s}=t;const a=this.target,c=a.canvas,u=new z(a.flipX?-1:1,a.flipY?-1:1),h=a._getCursorBoundaries(i),d=new z(h.left+h.leftOffset,h.top+h.topOffset).multiply(u).transform(a.calcTransformMatrix()),g=c.getScenePoint(e).subtract(d),p=a.getCanvasRetinaScaling(),y=a.getBoundingRect(),b=d.subtract(new z(y.left,y.top)),x=c.viewportTransform,S=b.add(g).transform(x,!0),T=a.backgroundColor,k=Ld(a.styles);a.backgroundColor="";const I={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};a.setSelectionStyles(I,0,i),a.setSelectionStyles(I,s,a.text.length),a.dirty=!0;const M=a.toCanvasElement({enableRetinaScaling:c.enableRetinaScaling,viewportTransform:!0});a.backgroundColor=T,a.styles=k,a.dirty=!0,Bc(M,{position:"fixed",left:"".concat(-M.width,"px"),border:ir,width:"".concat(M.width/p,"px"),height:"".concat(M.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{M.remove()},Kr(e.target||this.target.hiddenTextarea).body.appendChild(M),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(M,S.x,S.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),a=j({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,a)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let s=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const a=this.target,c=a.canvas;let u=a.getSelectionStartFromPointer(n);const{styles:h}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},d=s[Math.max(0,s.length-1)],g=0;if(this.__dragStartSelection){const p=this.__dragStartSelection.selectionStart,y=this.__dragStartSelection.selectionEnd;u>p&&u<=y?u=p:u>y&&(u-=y-p),a.removeChars(p,y),delete this.__dragStartSelection}a._reNewline.test(d)&&(a._reNewline.test(a._text[u])||u===a._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=a,a.insertChars(s,h,u),c.setActiveObject(a),a.enterEditing(n),a.selectionStart=Math.min(u+g,a._text.length),a.selectionEnd=Math.min(a.selectionStart+s.length,a._text.length),a.hiddenTextarea.value=a.text,a._updateTextarea(),a.hiddenTextarea.focus(),a.fire(mc,{index:u+g,action:"drop"}),c.fire("text:changed",{target:a}),c.contextTopDirty=!0,c.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const i=this.target,s=this.target.canvas,{selectionStart:a,selectionEnd:c}=this.__dragStartSelection,u=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||ir;u===ir?(i.selectionStart=a,i.selectionEnd=c,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),u==="move"&&(i.removeChars(a,c),i.selectionStart=i.selectionEnd=a,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(mc,{index:a,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Fy=/[ \n\.,;!\?\-]/;class wO extends Jt{constructor(){super(...arguments),L(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:i,onComplete:s}=e;return Ad({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:a=>{this._currentCursorOpacity=a,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let i=e>0&&this._reSpace.test(n[e])&&(t===-1||!sd.test(n[e-1]))?e-1:e,s=n[i];for(;i>0&&i<n.length&&!Fy.test(s);)i+=t,s=n[i];return t===-1&&Fy.test(s)&&i++,i}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),n=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Kr(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&i!==s||i!==n&&s!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const i=n.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const a=n.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(a).length}}fromGraphemeToStringSelection(e,t,n){const i=n.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),i=n.lineIndex,s=n.charIndex,a=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,c=t.leftOffset,u=this.getCanvasRetinaScaling(),h=this.canvas.upperCanvasEl,d=h.width/u,g=h.height/u,p=d-a,y=g-a,b=new z(t.left+c,t.top+t.topOffset+a).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new z(h.clientWidth/d,h.clientHeight/g));return b.x<0&&(b.x=0),b.x>p&&(b.x=p),b.y<0&&(b.y=0),b.y>y&&(b.y=y),b.x+=this.canvas._offset.left,b.y+=this.canvas._offset.top,{left:"".concat(b.x,"px"),top:"".concat(b.y,"px"),fontSize:"".concat(a,"px"),charHeight:a}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(yc),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:a}=this.get2DCursorLocation(t,!0);if(n!==s){if(this.styles[n])for(let c=i;c<this._unwrappedTextLines[n].length;c++)delete this.styles[n][c];if(this.styles[s])for(let c=a;c<this._unwrappedTextLines[s].length;c++){const u=this.styles[s][c];u&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+c-a]=u)}for(let c=n+1;c<=s;c++)delete this.styles[c];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){const c=this.styles[n],u=a-i;for(let h=i;h<a;h++)delete c[h];for(const h in this.styles[n]){const d=parseInt(h,10);d>=a&&(c[d-u]=c[h],delete c[h])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=n[s],n[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,n,i){const s={},a=this._unwrappedTextLines[e].length,c=a===t;let u=!1;n||(n=1),this.shiftLineStyles(e,n);const h=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const g in this.styles[e]){const p=parseInt(g,10);p>=t&&(u=!0,s[p-t]=this.styles[e][g],c&&t===0||delete this.styles[e][g])}let d=!1;for(u&&!c&&(this.styles[e+n]=s,d=!0),(d||a>t)&&n--;n>0;)i&&i[n-1]?this.styles[e+n]={0:j({},i[n-1])}:h?this.styles[e+n]={0:j({},h)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,i){this.styles||(this.styles={});const s=this.styles[e],a=s?j({},s):{};n||(n=1);for(const u in a){const h=parseInt(u,10);h>=t&&(s[h+n]=a[h],a[h-n]||delete s[h])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=j({},i[n]));return}if(!s)return;const c=s[t?t-1:1];for(;c&&n--;)this.styles[e][t+n]=j({},c)}insertNewStyleBlock(e,t,n){const i=this.get2DCursorLocation(t,!0),s=[0];let a,c=0;for(let u=0;u<e.length;u++)e[u]===`
`?(c++,s[c]=0):s[c]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],n),n=n&&n.slice(s[0]+1)),c&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],c),a=1;a<c;a++)s[a]>0?this.insertCharStyleObject(i.lineIndex+a,0,s[a],n):n&&this.styles[i.lineIndex+a]&&n[0]&&(this.styles[i.lineIndex+a][0]=n[0]),n=n&&n.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(i.lineIndex+a,0,s[a],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,n,t),this._text=[...this._text.slice(0,n),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=Ue:this._selectionDirection===bt&&(this._selectionDirection=Ue,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===bt?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=bt:this._selectionDirection===Ue&&(this._selectionDirection=bt,this.selectionStart=t),this.selectionEnd=n)}}class _O extends wO{initHiddenTextarea(){const e=this.canvas&&Kr(this.canvas.getElement())||Ms(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(a=>{let[c,u]=a;return t.setAttribute(c,u)});const{top:n,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(a=>{let[c,u]=a;return t.addEventListener(c,this[u].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(mc),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,a=i.length,c=this.selectionStart,u=this.selectionEnd,h=c!==u;let d,g,p,y,b=a-s;const x=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=c>x.selectionStart;h?(g=this._text.slice(c,u),b+=u-c):a<s&&(g=S?this._text.slice(u+b,u):this._text.slice(c,c-b));const T=i.slice(x.selectionEnd-b,x.selectionEnd);if(g&&g.length&&(T.length&&(d=this.getSelectionStyles(c,c+1,!1),d=T.map(()=>d[0])),h?(p=c,y=u):S?(p=u-g.length,y=u):(p=u,y=u+g.length),this.removeStyleFromTo(p,y)),T.length){const{copyPasteData:k}=dn();t&&T.join("")===k.copiedText&&!Ve.disableStyleCopyPaste&&(d=k.copiedTextStyle),this.insertNewStyleBlock(T,c,d)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:i}=t;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=dn();e.copiedText=this.getSelectedText(),Ve.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,i=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],i+=n.left+n.width),i}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const a=i.charIndex,c=this._getWidthBeforeCursor(s,a),u=this._getIndexOnLine(s+1,c);return this._textLines[s].slice(a).length+u+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-n;const a=i.charIndex,c=this._getWidthBeforeCursor(s,a),u=this._getIndexOnLine(s-1,c),h=this._textLines[s].slice(0,a),d=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+u-h.length+(1-d)}_getIndexOnLine(e,t){const n=this._textLines[e];let i,s,a=this._getLineLeftOffset(e),c=0;for(let u=0,h=n.length;u<h;u++)if(i=this.__charBounds[e][u].width,a+=i,a>t){s=!0;const d=a-i,g=a,p=Math.abs(d-t);c=Math.abs(g-t)<p?u:u-1;break}return s||(c=n.length-1),c}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===bt);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const i=this.text.length;this.selectionStart=Ri(0,this.selectionStart,i),this.selectionEnd=Ri(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Ue?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let i;if(e.altKey)i=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;i=this["findLineBoundary".concat(n)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Ue,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===bt&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Ue,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Ue&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=bt,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=bt,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const qd=r=>!!r.button;class xO extends _O{constructor(){super(...arguments),L(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new bO(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),pd(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!qd(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!qd(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:n}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||qd(t)||i||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(mr(this.calcTransformMatrix())).add(new z(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,s=0;for(let h=0;h<this._textLines.length&&n<=t.y;h++)n+=this.getHeightOfLine(h),s=h,h>0&&(i+=this._textLines[h-1].length+this.missingNewlineOffset(h-1));let a=Math.abs(this._getLineLeftOffset(s));const c=this._textLines[s].length,u=this.__charBounds[s];for(let h=0;h<c;h++){const d=a+u[h].kernedWidth;if(t.x<=d){Math.abs(t.x-d)<=Math.abs(t.x-a)&&i++;break}a=d,i++}return Math.min(this.flipX?c-i:i,this._text.length)}}const $c="moveCursorUp",Yc="moveCursorDown",Xc="moveCursorLeft",Gc="moveCursorRight",qc="exitEditing",SO=j({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:qc,27:qc,33:$c,34:Yc,35:Gc,36:Xc,37:Xc,38:$c,39:Gc,40:Yc},keysMapRtl:{9:qc,27:qc,33:$c,34:Yc,35:Xc,36:Gc,37:Gc,38:$c,39:Xc,40:Yc},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Pn extends xO{static getDefaults(){return j(j({},super.getDefaults()),Pn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,j(j({},Pn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Ud&&this.canvas.textEditingManager.remove(this),t instanceof Ud&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:n,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let h=0;h<s;h++)t+=this.getHeightOfLine(h);const a=this._getLineLeftOffset(s),c=this.__charBounds[s][i];c&&(n=c.left),this.charSpacing!==0&&i===this._textLines[s].length&&(n-=this._getWidthOfCharSpacing());const u={top:t,left:a+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===bt||this.textAlign===gn||this.textAlign===qo?u.left*=-1:this.textAlign===Ue||this.textAlign===Uc?u.left=a-(n>0?n:0):this.textAlign!==Ee&&this.textAlign!==Ko||(u.left=a-(n>0?n:0))),u}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),i=n.lineIndex,s=n.charIndex>0?n.charIndex-1:0,a=this.getValueOfPropertyAt(i,s,"fontSize"),c=this.getObjectScaling().x*this.canvas.getZoom(),u=this.cursorWidth/c,h=this.getValueOfPropertyAt(i,s,"deltaY"),d=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-u/2,top:d+t.top+h,width:u,height:a}}_renderCursor(e,t,n){const{color:i,opacity:s,left:a,top:c,width:u,height:h}=this.getCursorRenderingData(n,t);e.fillStyle=i,e.globalAlpha=s,e.fillRect(a,c,u,h)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const i=t.selectionStart,s=t.selectionEnd,a=this.textAlign.includes(gn),c=this.get2DCursorLocation(i),u=this.get2DCursorLocation(s),h=c.lineIndex,d=u.lineIndex,g=c.charIndex<0?0:c.charIndex,p=u.charIndex<0?0:u.charIndex;for(let y=h;y<=d;y++){const b=this._getLineLeftOffset(y)||0;let x=this.getHeightOfLine(y),S=0,T=0,k=0;if(y===h&&(T=this.__charBounds[h][g].left),y>=h&&y<d)k=a&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===d)if(p===0)k=this.__charBounds[d][p].left;else{const W=this._getWidthOfCharSpacing();k=this.__charBounds[d][p-1].left+this.__charBounds[d][p-1].width-W}S=x,(this.lineHeight<1||y===d&&this.lineHeight>1)&&(x/=this.lineHeight);let I=n.left+b+T,M=x,F=0;const N=k-T;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",M=1,F=x):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===bt||this.textAlign===gn||this.textAlign===qo?I=this.width-I-N:this.textAlign===Ue||this.textAlign===Uc?I=n.left+b-k:this.textAlign!==Ee&&this.textAlign!==Ko||(I=n.left+b-k)),e.fillRect(I,n.top+n.topOffset+F,N,M),n.topOffset+=S}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,kt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}L(Pn,"ownDefaults",SO),L(Pn,"type","IText"),ie.setClass(Pn),ie.setClass(Pn,"i-text");class Ui extends Pn{static getDefaults(){return j(j({},super.getDefaults()),Ui.ownDefaults)}constructor(e,t){super(e,j(j({},Ui.ownDefaults),t))}static createControls(){return{controls:W1()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(gn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,i=0;const s={};for(let a=0;a<e.graphemeLines.length;a++)e.graphemeText[i]===`
`&&a>0?(n=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&a>0&&(n++,i++),s[a]={line:t,offset:n},i+=e.graphemeLines[a].length,n+=e.graphemeLines[a].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,i=e+1,s=!1;const a=this._styleMap[e],c=this._styleMap[e+1];a&&(e=a.line,n=a.offset),c&&(i=c.line,s=i===e,t=c.offset);const u=e===void 0?this.styles:{line:this.styles[e]};for(const h in u)for(const d in u[h]){const g=parseInt(d,10);if(g>=n&&(!s||g<t))for(const p in u[h][d])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<n.wordsData.length;s++)i.push(...this._wrapLine(s,t,n));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let i=0;return{wordsData:e.map((s,a)=>{let c=0;const u=t?this.graphemeSplit(s):this.wordSplit(s);return u.length===0?[{word:[],width:0}]:u.map(h=>{const d=t?[h]:this.graphemeSplit(h),g=this._measureWord(d,a,c);return i=Math.max(g,i),c+=d.length+n.length,{word:d,width:g}})}),largestWordWidth:i}}_measureWord(e,t){let n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let a=0,c=e.length;a<c;a++)s+=this._getGraphemeBox(e[a],t,a+i,n,!0).kernedWidth,n=e[a];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:i,wordsData:s}=n,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const c=this._getWidthOfCharSpacing(),u=this.splitByGrapheme,h=[],d=u?"":" ";let g=0,p=[],y=0,b=0,x=!0;t-=a;const S=Math.max(t,i,this.dynamicMinWidth),T=s[e];let k;for(y=0,k=0;k<T.length;k++){const{word:I,width:M}=T[k];y+=I.length,g+=b+M-c,g>S&&!x?(h.push(p),p=[],g=M,x=!0):g+=c,x||u||p.push(d),p=p.concat(I),b=u?0:this._measureWord([d],e,y),y++,x=!1}return k&&h.push(p),i+a>this.dynamicMinWidth&&(this.dynamicMinWidth=i-c+a),h}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),i=new Array(n.length);for(let s=0;s<n.length;s++)i[s]=n[s].join("");return t.lines=i,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}L(Ui,"type","Textbox"),L(Ui,"textLayoutProperties",[...Pn.textLayoutProperties,"width"]),L(Ui,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ie.setClass(Ui);class Ly extends Rc{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:i,group:s}=n;if(!i||!this.shouldPerformLayout(e))return;const{width:a,height:c}=fn(oy(n,i)),u=new z(a,c);if(i.absolutePositioned)return{center:Cn(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:u};{const h=i.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:d=new z,correction:g=new z}=this.calcBoundingBox(t,e)||{};return{center:d.add(h),correction:g.subtract(h),size:u}}return{center:n.getRelativeCenterPoint().add(h),size:u}}}}L(Ly,"type","clip-path"),ie.setClass(Ly);class Ny extends Rc{getInitialSize(e,t){let{target:n}=e,{size:i}=t;return new z(n.width||i.x,n.height||i.y)}}L(Ny,"type","fixed"),ie.setClass(Ny);class CO extends Xo{subscribeTargets(e){const t=e.target;e.targets.reduce((n,i)=>(i.parent&&n.add(i.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!n.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})})}}class pn extends Dr{static getDefaults(){return j(j({},super.getDefaults()),pn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,pn.ownDefaults),this.setOptions(t);const{left:n,top:i,layoutManager:s}=t;this.groupInit(e,{left:n,top:i,layoutManager:s??new CO})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const s=this._objects.findIndex(c=>c.isInFrontOf(i)),a=s===-1?this.size():s;this.insertAt(a,i)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(ti("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(i=>{const{parent:s}=i;s&&n.add(s)}),e===Vd?n.forEach(i=>{i._onAfterObjectsChange(Lc,t)}):n.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=j(j({hasControls:!1},n),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,t),e.restore()}}L(pn,"type","ActiveSelection"),L(pn,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ie.setClass(pn),ie.setClass(pn,"activeSelection");class TO{constructor(){L(this,"resources",{})}applyFilters(e,t,n,i,s){const a=s.getContext("2d");if(!a)return;a.drawImage(t,0,0,n,i);const c={sourceWidth:n,sourceHeight:i,imageData:a.getImageData(0,0,n,i),originalEl:t,originalImageData:a.getImageData(0,0,n,i),canvasEl:s,ctx:a,filterBackend:this};e.forEach(h=>{h.applyTo(c)});const{imageData:u}=c;return u.width===n&&u.height===i||(s.width=u.width,s.height=u.height),a.putImageData(u,0,0),c}}class Ry{constructor(){let{tileSize:e=Ve.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};L(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),L(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=qr({width:e,height:t}),i=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=n,this.gl=i)}applyFilters(e,t,n,i,s,a){const c=this.gl,u=s.getContext("2d");if(!c||!u)return;let h;a&&(h=this.getCachedTexture(a,t));const d={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:c,sourceTexture:this.createTexture(c,n,i,h?void 0:t),targetTexture:this.createTexture(c,n,i),originalTexture:h||this.createTexture(c,n,i,h?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},g=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,g),e.forEach(p=>{p&&p.applyTo(d)}),function(p){const y=p.targetCanvas,b=y.width,x=y.height,S=p.destinationWidth,T=p.destinationHeight;b===S&&x===T||(y.width=S,y.height=T)}(d),this.copyGLTo2D(c,d),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(d.sourceTexture),c.deleteTexture(d.targetTexture),c.deleteFramebuffer(g),u.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,i,s){const{NEAREST:a,TEXTURE_2D:c,RGBA:u,UNSIGNED_BYTE:h,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:g,TEXTURE_MIN_FILTER:p,TEXTURE_WRAP_S:y,TEXTURE_WRAP_T:b}=e,x=e.createTexture();return e.bindTexture(c,x),e.texParameteri(c,g,s||a),e.texParameteri(c,p,s||a),e.texParameteri(c,y,d),e.texParameteri(c,b,d),i?e.texImage2D(c,0,u,u,h,i):e.texImage2D(c,0,u,t,n,0,u,h,null),x}getCachedTexture(e,t,n){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,n);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const a=n.height-i.height;s.drawImage(n,0,a,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),i=t.destinationWidth,s=t.destinationHeight,a=i*s*4;if(!n)return;const c=new Uint8Array(this.imageBuffer,0,a),u=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,c);const h=new ImageData(u,i,s);n.putImageData(h,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const i=e.getParameter(n.UNMASKED_RENDERER_WEBGL),s=e.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Kd;function EO(){const{WebGLProbe:r}=dn();return r.queryWebGL(Or()),Ve.enableGLFiltering&&r.isSupported(Ve.textureSize)?new Ry({tileSize:Ve.textureSize}):new TO}function Zd(){return!Kd&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Kd=EO()),Kd}const kO=["filters","resizeFilter","src","crossOrigin","type"],Vy=["cropX","cropY"];class Fr extends Ze{static getDefaults(){return j(j({},super.getDefaults()),Fr.ownDefaults)}constructor(e,t){super(),L(this,"_lastScaleX",1),L(this,"_lastScaleY",1),L(this,"_filterScalingX",1),L(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Fr.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(ii()),this.setElement(typeof e=="string"?(this.canvas&&Kr(this.canvas.getElement())||Ms()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(Fr.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Zd(!1);t instanceof Ry&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&dn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),j(j({},super.toObject([...Vy,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,i=-this.height/2;let s=[],a=[],c="",u="";if(!t)return[];if(this.hasCrop()){const h=ii();s.push('<clipPath id="imageCrop_'+h+`">
`,'	<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),c=' clip-path="url(#imageCrop_'+h+')" '}if(this.imageSmoothing||(u=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(u).concat(c,`></image>
`)),this.stroke||this.strokeDashArray){const h=this.fill;this.fill=null,a=['	<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=h}return s=this.paintFirst!==kt?s.concat(a,e):s.concat(e,a),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ro(e,{crossOrigin:t,signal:n}).then(i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,s=n.y,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const c=qr(a),{width:u,height:h}=a;this._element=c,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,Zd().applyFilters([e],a,u,h,this._element),this._filterScalingX=c.width/this._originalElement.width,this._filterScalingY=c.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=qr({width:n,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);Zd().applyFilters(e,this._originalElement,n,i,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,i=this._filterScalingY,s=this.width,a=this.height,c=Math.max(this.cropX,0),u=Math.max(this.cropY,0),h=t.naturalWidth||t.width,d=t.naturalHeight||t.height,g=c*n,p=u*i,y=Math.min(s*n,h-g),b=Math.min(a*i,d-p),x=-s/2,S=-a/2,T=Math.min(s,h/n-c),k=Math.min(a,d/i-u);t&&e.drawImage(t,g,p,y,b,x,S,T,k)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=t1(this.preserveAspectRatio||""),t=this.width,n=this.height,i={width:t,height:n};let s,a=this._element.width,c=this._element.height,u=1,h=1,d=0,g=0,p=0,y=0;return!e||e.alignX===ir&&e.alignY===ir?(u=t/a,h=n/c):(e.meetOrSlice==="meet"&&(u=h=cy(this._element,i),s=(t-a*u)/2,e.alignX==="Min"&&(d=-s),e.alignX==="Max"&&(d=s),s=(n-c*h)/2,e.alignY==="Min"&&(g=-s),e.alignY==="Max"&&(g=s)),e.meetOrSlice==="slice"&&(u=h=ly(this._element,i),s=a-t/u,e.alignX==="Mid"&&(p=s/2),e.alignX==="Max"&&(p=s),s=c-n/h,e.alignY==="Mid"&&(y=s/2),e.alignY==="Max"&&(y=s),a=t/u,c=n/h)),{width:a,height:c,scaleX:u,scaleY:h,offsetLeft:d,offsetTop:g,cropX:p,cropY:y}}static fromObject(e,t){let{filters:n,resizeFilter:i,src:s,crossOrigin:a,type:c}=e,u=st(e,kO);return Promise.all([Ro(s,j(j({},t),{},{crossOrigin:a})),n&&Ns(n,t),i&&Ns([i],t),Vo(u,t)]).then(h=>{let[d,g=[],[p]=[],y={}]=h;return new this(d,j(j({},u),{},{src:s,filters:g,resizeFilter:p},y))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Ro(e,{crossOrigin:t,signal:n}).then(s=>new this(s,i))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=In(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"],t,i).catch(s=>(ti("log","Unable to parse Image",s),null))}}L(Fr,"type","Image"),L(Fr,"cacheProperties",[...En,...Vy]),L(Fr,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),L(Fr,"CSS_CANVAS","canvas-img"),L(Fr,"ATTRIBUTE_NAMES",[...ai,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),ie.setClass(Fr),ie.setSVGClass(Fr),Ic(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const By=Wv,zy=r=>function(e,t,n){const{points:i,pathOffset:s}=n;return new z(i[r]).subtract(s).transform(pt(n.getViewportTransform(),n.calcTransformMatrix()))},Wy=(r,e,t,n)=>{const{target:i,pointIndex:s}=e,a=i,c=Cn(new z(t,n),void 0,a.calcOwnMatrix());return a.points[s]=c.add(a.pathOffset),a.setDimensions(),!0},Hy=(r,e)=>function(t,n,i,s){const a=n.target,c=new z(a.points[(r>0?r:a.points.length)-1]),u=c.subtract(a.pathOffset).transform(a.calcOwnMatrix()),h=e(t,j(j({},n),{},{pointIndex:r}),i,s),d=c.subtract(a.pathOffset).transform(a.calcOwnMatrix()).subtract(u);return a.left-=d.x,a.top-=d.y,h},Uy=r=>oi(By,Hy(r,Wy)),Jd=(r,e,t)=>{const{path:n,pathOffset:i}=r,s=n[e];return new z(s[t]-i.x,s[t+1]-i.y).transform(pt(r.getViewportTransform(),r.calcTransformMatrix()))};function IO(r,e,t){const{commandIndex:n,pointIndex:i}=this;return Jd(t,n,i)}function AO(r,e,t,n){const{target:i}=e,{commandIndex:s,pointIndex:a}=this,c=((u,h,d,g,p)=>{const{path:y,pathOffset:b}=u,x=y[(g>0?g:y.length)-1],S=new z(x[p],x[p+1]),T=S.subtract(b).transform(u.calcOwnMatrix()),k=Cn(new z(h,d),void 0,u.calcOwnMatrix());y[g][p]=k.x+b.x,y[g][p+1]=k.y+b.y,u.setDimensions();const I=S.subtract(u.pathOffset).transform(u.calcOwnMatrix()).subtract(T);return u.left-=I.x,u.top-=I.y,u.set("dirty",!0),!0})(i,t,n,s,a);return yd(this.actionName,j(j({},bd(r,e,t,n)),{},{commandIndex:s,pointIndex:a})),c}class $y extends lt{constructor(e){super(e)}render(e,t,n,i,s){const a=j(j({},i),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,n,a,s)}}class MO extends $y{constructor(e){super(e)}render(e,t,n,i,s){const{path:a}=s,{commandIndex:c,pointIndex:u,connectToCommandIndex:h,connectToPointIndex:d}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[g]=a[c],p=Jd(s,h,d);if(g==="Q"){const y=Jd(s,c,u+2);e.moveTo(y.x,y.y),e.lineTo(t,n)}else e.moveTo(t,n);e.lineTo(p.x,p.y),e.stroke(),e.restore(),super.render(e,t,n,i,s)}}const Kc=(r,e,t,n,i,s)=>new(t?MO:$y)(j(j({commandIndex:r,pointIndex:e,actionName:"modifyPath",positionHandler:IO,actionHandler:AO,connectToCommandIndex:i,connectToPointIndex:s},n),t?n.controlPointStyle:n.pointStyle));var Ut=Object.freeze({__proto__:null,changeWidth:Md,createObjectDefaultControls:Fd,createPathControls:function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};let n="M";return r.path.forEach((i,s)=>{const a=i[0];switch(a!=="Z"&&(t["c_".concat(s,"_").concat(a)]=Kc(s,i.length-2,!1,e)),a){case"C":t["c_".concat(s,"_C_CP_1")]=Kc(s,1,!0,e,s-1,(c=>c==="C"?5:c==="Q"?3:1)(n)),t["c_".concat(s,"_C_CP_2")]=Kc(s,3,!0,e,s,5);break;case"Q":t["c_".concat(s,"_Q_CP_1")]=Kc(s,1,!0,e,s,3)}n=a}),t},createPolyActionHandler:Uy,createPolyControls:function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};for(let n=0;n<(typeof r=="number"?r:r.points.length);n++)t["p".concat(n)]=new lt(j({actionName:By,positionHandler:zy(n),actionHandler:Uy(n)},e));return t},createPolyPositionHandler:zy,createResizeControls:z1,createTextboxDefaultControls:W1,dragHandler:m1,factoryPolyActionHandler:Hy,getLocalPoint:kc,polyActionHandler:Wy,renderCircleControl:A1,renderSquareControl:M1,rotationStyleHandler:O1,rotationWithSnapping:P1,scaleCursorStyleHandler:Bs,scaleOrSkewActionName:$o,scaleSkewCursorStyleHandler:Bi,scalingEqually:Uo,scalingX:F1,scalingXOrSkewingY:Dd,scalingY:L1,scalingYOrSkewingX:jd,skewCursorStyleHandler:N1,skewHandlerX:V1,skewHandlerY:B1,wrapWithFireEvent:oi,wrapWithFixedAnchor:Vi});const Zc=r=>r.webgl!==void 0,Qd="precision highp float",OO=`
    `.concat(Qd,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),PO=["type"],DO=["type"],jO=new RegExp(Qd,"g");class It{get type(){return this.constructor.type}constructor(){let e=st(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},PO);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return OO}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=dn();i!=="highp"&&(t=t.replace(jO,Qd.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),a=e.createShader(e.FRAGMENT_SHADER),c=e.createProgram();if(!s||!a||!c)throw new hn("Vertex, fragment shader or program creation error");if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new hn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new hn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.attachShader(c,s),e.attachShader(c,a),e.linkProgram(c),!e.getProgramParameter(c,e.LINK_STATUS))throw new hn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(c)));const u=this.getUniformLocations(e,c)||{};return u.uStepW=e.getUniformLocation(c,"uStepW"),u.uStepH=e.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:this.getAttributeLocations(e,c),uniformLocations:u}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,i={};for(let s=0;s<n.length;s++)i[n[s]]=e.getUniformLocation(t,n[s]);return i}sendAttributeData(e,t,n){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Zc(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,i=qr({width:t,height:n});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return j({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(st(e,DO))}}L(It,"type","BaseFilter"),L(It,"uniformLocations",[]);const FO={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Jc extends It{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(FO[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new Xe(this.color).getSource(),i=this.alpha,s=n[0]*i,a=n[1]*i,c=n[2]*i,u=1-i;for(let h=0;h<t.length;h+=4){const d=t[h],g=t[h+1],p=t[h+2];let y,b,x;switch(this.mode){case"multiply":y=d*s/255,b=g*a/255,x=p*c/255;break;case"screen":y=255-(255-d)*(255-s)/255,b=255-(255-g)*(255-a)/255,x=255-(255-p)*(255-c)/255;break;case"add":y=d+s,b=g+a,x=p+c;break;case"difference":y=Math.abs(d-s),b=Math.abs(g-a),x=Math.abs(p-c);break;case"subtract":y=d-s,b=g-a,x=p-c;break;case"darken":y=Math.min(d,s),b=Math.min(g,a),x=Math.min(p,c);break;case"lighten":y=Math.max(d,s),b=Math.max(g,a),x=Math.max(p,c);break;case"overlay":y=s<128?2*d*s/255:255-2*(255-d)*(255-s)/255,b=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,x=c<128?2*p*c/255:255-2*(255-p)*(255-c)/255;break;case"exclusion":y=s+d-2*s*d/255,b=a+g-2*a*g/255,x=c+p-2*c*p/255;break;case"tint":y=s+d*u,b=a+g*u,x=c+p*u}t[h]=y,t[h+1]=b,t[h+2]=x}}sendUniformData(e,t){const n=new Xe(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}L(Jc,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),L(Jc,"type","BlendColor"),L(Jc,"uniformLocations",["uColor"]),ie.setClass(Jc);const LO={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},NO=["type","image"];class Qc extends It{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return LO[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:i},filterBackend:{resources:s}}=e;const a=this.image;s.blendImage||(s.blendImage=Or());const c=s.blendImage,u=c.getContext("2d");c.width!==n||c.height!==i?(c.width=n,c.height=i):u.clearRect(0,0,n,i),u.setTransform(a.scaleX,0,0,a.scaleY,a.left,a.top),u.drawImage(a.getElement(),0,0,n,i);const h=u.getImageData(0,0,n,i).data;for(let d=0;d<t.length;d+=4){const g=t[d],p=t[d+1],y=t[d+2],b=t[d+3],x=h[d],S=h[d+1],T=h[d+2],k=h[d+3];switch(this.mode){case"multiply":t[d]=g*x/255,t[d+1]=p*S/255,t[d+2]=y*T/255,t[d+3]=b*k/255;break;case"mask":t[d+3]=k}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return j(j({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:i}=e,s=st(e,NO);return Fr.fromObject(i,t).then(a=>new this(j(j({},s),{},{image:a})))}}L(Qc,"type","BlendImage"),L(Qc,"defaults",{mode:"multiply",alpha:1}),L(Qc,"uniformLocations",["uTransformMatrix","uImage"]),ie.setClass(Qc);class el extends It{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Zc(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:i}}=e;const{width:s,height:a}=n;i.blurLayer1||(i.blurLayer1=Or(),i.blurLayer2=Or());const c=i.blurLayer1,u=i.blurLayer2;c.width===s&&c.height===a||(u.width=c.width=s,u.height=c.height=a);const h=c.getContext("2d"),d=u.getContext("2d"),g=15,p=.06*this.blur*.5;let y,b,x,S;for(h.putImageData(n,0,0),d.clearRect(0,0,s,a),S=-15;S<=g;S++)y=(Math.random()-.5)/4,b=S/g,x=p*b*s+y,d.globalAlpha=1-Math.abs(b),d.drawImage(c,x,y),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);for(S=-15;S<=g;S++)y=(Math.random()-.5)/4,b=S/g,x=p*b*a+y,d.globalAlpha=1-Math.abs(b),d.drawImage(c,y,x),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);t.drawImage(c,0,0);const T=t.getImageData(0,0,c.width,c.height);return h.globalAlpha=1,h.clearRect(0,0,c.width,c.height),T}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}}L(el,"type","Blur"),L(el,"defaults",{blur:0}),L(el,"uniformLocations",["uDelta"]),ie.setClass(el);class tl extends It{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=n,t[i+1]+=n,t[i+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}L(tl,"type","Brightness"),L(tl,"defaults",{brightness:0}),L(tl,"uniformLocations",["uBrightness"]),ie.setClass(tl);const Yy={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Us extends It{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,i=this.colorsOnly;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2];if(t[s]=a*n[0]+c*n[1]+u*n[2]+255*n[4],t[s+1]=a*n[5]+c*n[6]+u*n[7]+255*n[9],t[s+2]=a*n[10]+c*n[11]+u*n[12]+255*n[14],!i){const h=t[s+3];t[s]+=h*n[3],t[s+1]+=h*n[8],t[s+2]+=h*n[13],t[s+3]=a*n[15]+c*n[16]+u*n[17]+h*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],s=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}toObject(){return j(j({},super.toObject()),{},{matrix:[...this.matrix]})}}function $i(r,e){var t;const n=(L(t=class extends Us{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),L(t,"defaults",{colorsOnly:!1,matrix:e}),t);return ie.setClass(n,r),n}L(Us,"type","ColorMatrix"),L(Us,"defaults",Yy),L(Us,"uniformLocations",["uColorMatrix","uConstants"]),ie.setClass(Us),$i("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),$i("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),$i("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),$i("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),$i("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),$i("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),$i("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Xy extends It{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Zc(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>ie.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}L(Xy,"type","Composed"),ie.setClass(Xy);class rl extends It{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),i=259*(n+255)/(255*(259-n));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}L(rl,"type","Contrast"),L(rl,"defaults",{contrast:0}),L(rl,"uniformLocations",["uContrast"]),ie.setClass(rl);const RO={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class nl extends It{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return RO[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),a=Math.floor(s/2),c=t.width,u=t.height,h=e.ctx.createImageData(c,u),d=h.data,g=this.opaque?1:0;let p,y,b,x,S,T,k,I,M,F,N,W,R;for(N=0;N<u;N++)for(F=0;F<c;F++){for(S=4*(N*c+F),p=0,y=0,b=0,x=0,R=0;R<s;R++)for(W=0;W<s;W++)k=N+R-a,T=F+W-a,k<0||k>=u||T<0||T>=c||(I=4*(k*c+T),M=i[R*s+W],p+=n[I]*M,y+=n[I+1]*M,b+=n[I+2]*M,g||(x+=n[I+3]*M));d[S]=p,d[S+1]=y,d[S+2]=b,d[S+3]=g?n[S+3]:x}e.imageData=h}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return j(j({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}L(nl,"type","Convolute"),L(nl,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),L(nl,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ie.setClass(nl);const Gy="Gamma";class il extends It{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,i=1/n[0],s=1/n[1],a=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const c=this.rgbValues;for(let u=0;u<256;u++)c.r[u]=255*Math.pow(u/255,i),c.g[u]=255*Math.pow(u/255,s),c.b[u]=255*Math.pow(u/255,a);for(let u=0;u<t.length;u+=4)t[u]=c.r[t[u]],t[u+1]=c.g[t[u+1]],t[u+2]=c.b[t[u+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Gy,gamma:this.gamma.concat()}}}L(il,"type",Gy),L(il,"defaults",{gamma:[1,1,1]}),L(il,"uniformLocations",["uGamma"]),ie.setClass(il);const VO={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class sl extends It{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],c=t[i+2];switch(this.mode){case"average":n=(s+a+c)/3;break;case"lightness":n=(Math.min(s,a,c)+Math.max(s,a,c))/2;break;case"luminosity":n=.21*s+.72*a+.07*c}t[i+2]=t[i+1]=t[i]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return VO[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}L(sl,"type","Grayscale"),L(sl,"defaults",{mode:"average"}),L(sl,"uniformLocations",["uMode"]),ie.setClass(sl);const BO=j(j({},Yy),{},{rotation:0});class ef extends Us{calculateMatrix(){const e=this.rotation*Math.PI,t=Xr(e),n=Gr(e),i=1/3,s=Math.sqrt(i)*n,a=1-t;this.matrix=[t+a/3,i*a-s,i*a+s,0,0,i*a+s,t+i*a,i*a-s,0,0,i*a-s,i*a+s,t+i*a,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}L(ef,"type","HueRotation"),L(ef,"defaults",BO),ie.setClass(ef);class ol extends It{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}L(ol,"type","Invert"),L(ol,"defaults",{alpha:!1,invert:!0}),L(ol,"uniformLocations",["uInvert","uAlpha"]),ie.setClass(ol);class al extends It{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*n;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}L(al,"type","Noise"),L(al,"defaults",{noise:0}),L(al,"uniformLocations",["uNoise","uSeed"]),ie.setClass(al);class cl extends It{applyTo2d(e){let{imageData:{data:t,width:n,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let a=0;a<n;a+=this.blocksize){const c=4*s*n+4*a,u=t[c],h=t[c+1],d=t[c+2],g=t[c+3];for(let p=s;p<Math.min(s+this.blocksize,i);p++)for(let y=a;y<Math.min(a+this.blocksize,n);y++){const b=4*p*n+4*y;t[b]=u,t[b+1]=h,t[b+2]=d,t[b+3]=g}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}L(cl,"type","Pixelate"),L(cl,"defaults",{blocksize:4}),L(cl,"uniformLocations",["uBlocksize"]),ie.setClass(cl);class ll extends It{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,i=new Xe(this.color).getSource(),s=[i[0]-n,i[1]-n,i[2]-n],a=[i[0]+n,i[1]+n,i[2]+n];for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];u>s[0]&&h>s[1]&&d>s[2]&&u<a[0]&&h<a[1]&&d<a[2]&&(t[c+3]=0)}}sendUniformData(e,t){const n=new Xe(this.color).getSource(),i=this.distance,s=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],a=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,a)}}L(ll,"type","RemoveColor"),L(ll,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),L(ll,"uniformLocations",["uLow","uHigh"]),ie.setClass(ll);class ul extends It{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let s=1;s<=n;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Zc(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const s=t.width,a=t.height,c=Math.round(s*n),u=Math.round(a*i);let h;h=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,a,c,u):this.resizeType==="hermite"?this.hermiteFastResize(e,s,a,c,u):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,a,c,u):this.resizeType==="lanczos"?this.lanczosResize(e,s,a,c,u):new ImageData(c,u),e.imageData=h}sliceByTwo(e,t,n,i,s){const a=e.imageData,c=.5;let u=!1,h=!1,d=t*c,g=n*c;const p=e.filterBackend.resources;let y=0,b=0;const x=t;let S=0;p.sliceByTwo||(p.sliceByTwo=Or());const T=p.sliceByTwo;(T.width<1.5*t||T.height<n)&&(T.width=1.5*t,T.height=n);const k=T.getContext("2d");for(k.clearRect(0,0,1.5*t,n),k.putImageData(a,0,0),i=Math.floor(i),s=Math.floor(s);!u||!h;)t=d,n=g,i<Math.floor(d*c)?d=Math.floor(d*c):(d=i,u=!0),s<Math.floor(g*c)?g=Math.floor(g*c):(g=s,h=!0),k.drawImage(T,y,b,t,n,x,S,d,g),y=x,b=S,S+=g;return k.getImageData(y,b,i,s)}lanczosResize(e,t,n,i,s){const a=e.imageData.data,c=e.ctx.createImageData(i,s),u=c.data,h=this.lanczosCreate(this.lanczosLobes),d=this.rcpScaleX,g=this.rcpScaleY,p=2/this.rcpScaleX,y=2/this.rcpScaleY,b=Math.ceil(d*this.lanczosLobes/2),x=Math.ceil(g*this.lanczosLobes/2),S={},T={x:0,y:0},k={x:0,y:0};return function I(M){let F,N,W,R,X,U,K,$,G,re,fe;for(T.x=(M+.5)*d,k.x=Math.floor(T.x),F=0;F<s;F++){for(T.y=(F+.5)*g,k.y=Math.floor(T.y),X=0,U=0,K=0,$=0,G=0,N=k.x-b;N<=k.x+b;N++)if(!(N<0||N>=t)){re=Math.floor(1e3*Math.abs(N-T.x)),S[re]||(S[re]={});for(let Q=k.y-x;Q<=k.y+x;Q++)Q<0||Q>=n||(fe=Math.floor(1e3*Math.abs(Q-T.y)),S[re][fe]||(S[re][fe]=h(Math.sqrt(Math.pow(re*p,2)+Math.pow(fe*y,2))/1e3)),W=S[re][fe],W>0&&(R=4*(Q*t+N),X+=W,U+=W*a[R],K+=W*a[R+1],$+=W*a[R+2],G+=W*a[R+3]))}R=4*(F*i+M),u[R]=U/X,u[R+1]=K/X,u[R+2]=$/X,u[R+3]=G/X}return++M<i?I(M):c}(0)}bilinearFiltering(e,t,n,i,s){let a,c,u,h,d,g,p,y,b,x,S,T,k,I=0;const M=this.rcpScaleX,F=this.rcpScaleY,N=4*(t-1),W=e.imageData.data,R=e.ctx.createImageData(i,s),X=R.data;for(p=0;p<s;p++)for(y=0;y<i;y++)for(d=Math.floor(M*y),g=Math.floor(F*p),b=M*y-d,x=F*p-g,k=4*(g*t+d),S=0;S<4;S++)a=W[k+S],c=W[k+4+S],u=W[k+N+S],h=W[k+N+4+S],T=a*(1-b)*(1-x)+c*b*(1-x)+u*x*(1-b)+h*b*x,X[I++]=T;return R}hermiteFastResize(e,t,n,i,s){const a=this.rcpScaleX,c=this.rcpScaleY,u=Math.ceil(a/2),h=Math.ceil(c/2),d=e.imageData.data,g=e.ctx.createImageData(i,s),p=g.data;for(let y=0;y<s;y++)for(let b=0;b<i;b++){const x=4*(b+y*i);let S=0,T=0,k=0,I=0,M=0,F=0,N=0;const W=(y+.5)*c;for(let R=Math.floor(y*c);R<(y+1)*c;R++){const X=Math.abs(W-(R+.5))/h,U=(b+.5)*a,K=X*X;for(let $=Math.floor(b*a);$<(b+1)*a;$++){let G=Math.abs(U-($+.5))/u;const re=Math.sqrt(K+G*G);re>1&&re<-1||(S=2*re*re*re-3*re*re+1,S>0&&(G=4*($+R*t),N+=S*d[G+3],k+=S,d[G+3]<255&&(S=S*d[G+3]/250),I+=S*d[G],M+=S*d[G+1],F+=S*d[G+2],T+=S))}}p[x]=I/T,p[x+1]=M/T,p[x+2]=F/T,p[x+3]=N/k}return g}}L(ul,"type","Resize"),L(ul,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),L(ul,"uniformLocations",["uDelta","uTaps"]),ie.setClass(ul);class hl extends It{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],c=t[i+2],u=Math.max(s,a,c);t[i]+=u!==s?(u-s)*n:0,t[i+1]+=u!==a?(u-a)*n:0,t[i+2]+=u!==c?(u-c)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}L(hl,"type","Saturation"),L(hl,"defaults",{saturation:0}),L(hl,"uniformLocations",["uSaturation"]),ie.setClass(hl);class dl extends It{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=t[i],a=t[i+1],c=t[i+2],u=Math.max(s,a,c),h=(s+a+c)/3,d=2*Math.abs(u-h)/255*n;t[i]+=u!==s?(u-s)*d:0,t[i+1]+=u!==a?(u-a)*d:0,t[i+2]+=u!==c?(u-c)*d:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}L(dl,"type","Vibrance"),L(dl,"defaults",{vibrance:0}),L(dl,"uniformLocations",["uVibrance"]),ie.setClass(dl);class qy{___eventListeners;___activeObjects;constructor(){this.___activeObjects=[],this.___eventListeners={}}pauseEventListeners(){this.___eventListeners=this.__eventListeners,this.__eventListeners={};const e=this.getActiveObjects();this.discardActiveObject(),this.___activeObjects=e}resumeEventListeners(){this.__eventListeners=this.___eventListeners,this.___eventListeners={};const e=this.___activeObjects;if(!e.length)return this.requestRenderAll(),!1;if(e.length===1)this.setActiveObject(e[0]);else{const t=new pn(e);this.setActiveObject(t)}this.requestRenderAll()}}class Yi extends Tt{isSelected=!1;text;tScale;display;id;backgroundColor;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default",fontSize:16,fontFamily:"Arial",fontColor:"#ffffff",textAlign:"center"};static type="Text";constructor(e){super(e),Object.assign(this,Yi.ownDefaults),this.id=e.id,this.tScale=e.tScale,this.display=e.display,this.text=e.text||"",this.backgroundColor=e.backgroundColor||"transparent"}static createControls(){return{controls:tf()}}static getDefaults(){return{...super.getDefaults(),...Yi.ownDefaults}}setSelected(e){this.isSelected=e,this.set({dirty:!0})}_render(e){super._render(e),this.updateSelected(e)}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,6),e.lineWidth=2,e.strokeStyle="rgba(0, 216, 214,1.0)",e.stroke(),e.restore())}}function Dn(r,e,t,n,i){r.save(),r.translate(e,t),r.rotate(_y.degreesToRadians(90+i.angle)),r.beginPath(),r.lineWidth=4,r.lineCap="round",r.strokeStyle="#dfe2e8",r.moveTo(-6,0),r.lineTo(6,0),r.stroke(),r.restore()}function tf(){return{mr:new lt({x:.5,y:0,actionHandler:Zo,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing",render:Dn}),ml:new lt({x:-.5,y:0,actionHandler:Zo,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing",render:Dn})}}const Zo=Ut.wrapWithFireEvent("resizing",Ut.wrapWithFixedAnchor((r,e,t,n)=>{const i=Ut.getLocalPoint(e,e.originX,e.originY,t,n);if(zO(e.originX)||HO(e.originX)&&i.x<0||WO(e.originX)&&i.x>0){const s=e.target,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=UO(e)?2:1,u=s.width,h=Math.ceil(Math.abs(i.x*c/s.scaleX)-a);if(e.corner==="ml"){const g=u-h;if(s.left+g<0)return s.set("width",s.width+s.left),!0}return s.set("width",Math.max(h,0)),u!==s.width}return!1})),Ky={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Pe=r=>typeof r=="string"?Ky[r]:r-.5,zO=r=>Pe(r)===Pe("center"),WO=r=>Pe(r)===Pe("left"),HO=r=>Pe(r)===Pe("right");function UO(r){return Pe(r.originX)===Pe("center")&&Pe(r.originY)===Pe("center")}ie.setClass(Yi,"Text");class Lr extends Tt{static type="Transition";id;duration;fromId;toId;static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0, 0, 0, 0.5)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};isSelected=!1;constructor(e){super(e),this.id=e.id,this.fromId=e.fromId,this.toId=e.toId,Object.assign(this,{duration:e.duration,fromId:e.fromId,toId:e.toId,kind:e.kind,tScale:e.tScale,strokeDashArray:e.strokeDashArray||[],isSelected:!1,centeredScaling:!0,strokeWidth:0}),Object.assign(this,Lr.ownDefaults)}static createControls(){return{controls:$O()}}static getDefaults(){return{...super.getDefaults(),...Lr.ownDefaults}}updateCoords(){}_render(e){super._render(e),this.updateSelected(e)}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,this.strokeDashArray&&e.setLineDash(this.strokeDashArray),e.strokeStyle=this.isSelected?"rgba(255, 255, 255,1.0)":"rgba(255, 255, 255,0.15)",e.stroke(),e.restore()}}ie.setClass(Lr,"Transition");const $O=()=>({mr:new lt({x:.5,y:0,actionHandler:Zy,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing",render:Dn}),ml:new lt({x:-.5,y:0,actionHandler:Zy,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing",render:Dn})});ie.setClass(Lr,"Transition");const{wrapWithFireEvent:YO,getLocalPoint:XO}=Ut,rf="center",GO="left",qO="right";function KO(r){return(e,t,n,i)=>{const{target:s,originX:a,originY:c}=t,u=s.getRelativeCenterPoint(),h=s.translateToOriginPoint(u,a,c),d=r(e,t,n,i);return s.setPositionByOrigin(h,a,c),d}}const ZO=(r,e,t,n)=>{const i=XO(e,e.originX,e.originY,t,n);if(Pe(e.originX)===Pe(rf)||Pe(e.originX)===Pe(qO)&&i.x<0||Pe(e.originX)===Pe(GO)&&i.x>0){const{target:s}=e,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=JO(e)?2:1,u=s.width,h=Math.ceil(Math.abs(i.x*c/s.scaleX)-a),d=Gn(h,s.tScale);return d>=1500||d<500?!1:(s.set("width",Math.max(h,0)),s.set("duration",d),s.setCoords(),s.canvas&&s.canvas.renderAll(),u!==s.width)}return!1};function JO(r){return Pe(r.originX)===Pe(rf)&&Pe(r.originY)===Pe(rf)}const Zy=YO("resizing",KO(ZO));class $s extends Tt{static type="Placeholder";guideItemId;distXToActCenter;trackItemType;defaultPos;draggedObject=null;for;id;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",strokeWidth:0,fill:"rgba(255, 211, 42, 0.1)",stroke:"rgba(255, 211, 42, 1.0)",selectable:!1,borderOpacityWhenMoving:1,hoverCursor:"default",strokeDashArray:[5,1],evented:!1};constructor(e){super(e),this.id=e.id,this.for=e.for,Object.assign(this,$s.ownDefaults)}static getDefaults(){return{...super.getDefaults(),...$s.ownDefaults}}_render(e){super._render(e),this.updateSelected(e)}updateSelected(e){e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,this.strokeDashArray&&e.setLineDash(this.strokeDashArray),e.strokeStyle="rgba(0, 216, 214,1.0)",e.stroke(),e.restore()}}ie.setClass($s,"Placeholder");const QO={top:{top:35,guideHeight:2,bottom:3},center:{top:3,guideHeight:2,bottom:3},bottom:{top:3,guideHeight:2,bottom:35}},Jo="rgba(0, 216, 214, 1.0)",nf=(r,e,t)=>new Tt({top:r,left:0,strokeWidth:0,fill:"transparent",selectable:!0,height:t,width:e});class Qo extends Dr{static type="Helper";static defaultSettings={selectable:!1,evented:!1};static ownDefaults={...Qo.defaultSettings};guide;topGuide;bottomGuide;id;metadata={};tScale;kind;constructor(e){const t=QO[e.kind],n=nf(0,e.width,t.top),i=nf(t.top,e.width,t.guideHeight),s=nf(t.top+t.guideHeight,e.width,t.bottom);super([n,i,s],{...Qo.defaultSettings,...e}),this.topGuide=n,this.guide=i,this.bottomGuide=s,this.id=e.id,this.metadata=e.metadata??{},this.tScale=e.tScale,this.kind=e.kind}static getDefaults(){return{...super.getDefaults(),...Qo.defaultSettings}}updateCoords(e){this.scaleToWidth(e),this.set("scaleY",1)}setSelected(e){this.guide.set("fill",e?Jo:"transparent")}}const Ys=Qo;ie.setClass(Ys,"Helper");class li extends Tt{static ownDefaults={selectable:!1,evented:!1,strokeWidth:0,stroke:"transparent"};static type="Track";id;accepts;metadata;items;borderColor="transparent";stroke="transparent";strokeWidth=0;constructor(e){super(e),Object.assign(this,li.ownDefaults),this.id=e.id,this.accepts=e.accepts||["audio","video","image","text"],this.items=e.items||[],this.metadata=e.metadata}static getDefaults(){return{...super.getDefaults(),...li.ownDefaults}}updateCoords(e){this.width=e}}ie.setClass(li,"Track");class fl extends Tt{isSelected;tScale;display;id;src;itemType;static ownDefaults={rx:8,ry:8,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",fill:"#27272a"};static type="Image";constructor(e){super(e),this.itemType="image",this.isSelected=!1,Object.assign(this,fl.ownDefaults),this.id=e.id,this.src=e.src,this.display=e.display,this.tScale=e.tScale}static createControls(){return{controls:tf()}}static getDefaults(){return{...super.getDefaults(),...fl.ownDefaults}}_render(e){super._render(e),this.updateSelected(e)}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,e.strokeStyle=Jo,e.stroke(),e.restore())}}const gl=fl;ie.setClass(gl,"Image");class Xi extends Tt{id;tScale;isSelected=!1;display;trim;static type="Video";static defaultProps={objectCaching:!1,rx:8,ry:8,fill:"#27272a"};constructor(e){super(Object.assign({},Xi.defaultProps,e)),this.id=e.id,this.tScale=e.tScale,this.display=e.display,this.trim=e.trim}static createControls(){return{controls:Jy()}}_render(e){super._render(e),this.updateSelected(e)}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=2,e.strokeStyle=Jo,e.stroke(),e.restore())}}ie.setClass(Xi,"Video");const Jy=()=>({mr:new lt({x:.5,y:0,render:Dn,actionHandler:Qy,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new lt({x:-.5,y:0,render:Dn,actionHandler:Qy,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:eP,getLocalPoint:tP}=Ut,rP=(r,e,t,n)=>{const i=tP(e,e.originX,e.originY,t,n);if(Pe(e.originX)===Pe("center")||Pe(e.originX)===Pe("right")&&i.x<0||Pe(e.originX)===Pe("left")&&i.x>0){const{target:s}=e;return s.width!==s.width}return!1};function sf(r){return(e,t,n,i)=>{const{target:s,originX:a,originY:c}=t,u=s.getRelativeCenterPoint(),h=s.translateToOriginPoint(u,a,c),d=r(e,t,n,i);return s.setPositionByOrigin(h,a,c),d}}const Qy=eP("resizing",sf(rP));class jn extends Tt{id;itemType="audio";isSelected=!1;trim;src;tScale;display;static ownDefaults={rx:6,ry:6,objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,fill:"#27272a",borderOpacityWhenMoving:1,hoverCursor:"default"};static type="Audio";constructor(e){super({...jn.getDefaults(),...e}),this.id=e.id,this.tScale=e.tScale,this.display=e.display,this.trim=e.trim,this.src=e.src}static getDefaults(){return{...super.getDefaults(),...jn.ownDefaults}}static createControls(){return{controls:eb()}}setSelected(e){this.isSelected=e,this.set({dirty:!0})}_render(e){super._render(e),this.updateSelected(e)}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,jn.ownDefaults.rx),e.lineWidth=2,e.strokeStyle=Jo,e.stroke(),e.restore())}}ie.setClass(jn,"Audio");const eb=()=>({mr:new lt({x:.5,y:0,render:Dn,actionHandler:tb,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing"}),ml:new lt({x:-.5,y:0,render:Dn,actionHandler:tb,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing"})}),{wrapWithFireEvent:nP,getLocalPoint:iP}=Ut,sP=(r,e,t,n)=>{const i=iP(e,e.originX,e.originY,t,n);if(Pe(e.originX)===Pe("center")||Pe(e.originX)===Pe("right")&&i.x<0||Pe(e.originX)===Pe("left")&&i.x>0){const{target:s}=e,a=s.strokeWidth/(s.strokeUniform?s.scaleX:1),c=oP(e)?2:1,u=s.width,h=Math.ceil(Math.abs(i.x*c/s.scaleX)-a);if(e.corner==="mr"){const d=s.trim.to,g=h-u,p=Gn(g,s.tScale),y=d+p;if(y>s.duration)return!1;s.set("width",Math.max(h,0)),s.trim.to=y}else{if(s.left<0)return!1;const d=u-h;if(s.left+d<0)return s.set("width",s.width+s.left),!0;const g=h-u,p=s.trim.from,y=Gn(g,s.tScale),b=p-y;if(b<0)return!1;s.set("width",Math.max(h,0)),s.trim.from=b}return u!==s.width}return!1};function oP(r){return Pe(r.originX)===Pe("center")&&Pe(r.originY)===Pe("center")}const tb=nP("resizing",sf(sP));class ea extends Tt{static type="TransitionGuide";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:1.5,fill:"rgba(0,0,0,0.85)",borderOpacityWhenMoving:1,hoverCursor:"default",lockMovementX:!0,lockMovementY:!0,duration:1500,rx:8,ry:8};tScale;duration=0;fromId;toId;itemType="none";isSelected=!1;id;constructor(e){super(e),Object.assign(this,ea.ownDefaults),this.id=e.id}static createControls(){return{controls:rb()}}static getDefaults(){return{...super.getDefaults(),...ea.ownDefaults}}updateCoords(){const e=this.canvas;if(!e)return;const t=e.getObjects().find(s=>s.id===this.fromId);if(!t)return;const n=yt(this.duration,this.tScale),i=t.left+t.width-n/2;this.set({width:n,left:i})}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M3 5.30359C3 3.93159 4.659 3.24359 5.629 4.21359L11.997 10.5826L10.583 11.9966L5 6.41359V17.5856L10.586 11.9996L10.583 11.9966L11.997 10.5826L12 10.5856L18.371 4.21459C19.341 3.24459 21 3.93159 21 5.30359V18.6956C21 20.0676 19.341 20.7556 18.371 19.7856L12 13.5L13.414 11.9996L19 17.5866V6.41359L13.414 11.9996L13.421 12.0056L12.006 13.4206L12 13.4136L5.629 19.7846C4.659 20.7546 3 20.0676 3 18.6956V5.30359Z");e.save(),e.translate(-12,-12),e.fillStyle="#ffffff",e.fill(t),e.restore()}setSelected(e){this.isSelected=e,this.set({dirty:!0})}updateSelected(e){this.isSelected&&(e.save(),e.beginPath(),e.roundRect(-this.width/2,-this.height/2,this.width,this.height,this.rx),e.lineWidth=1,e.strokeStyle="rgba(255, 255, 255,1.0)",e.stroke(),e.restore())}}function rb(){return{mr:new lt({x:.5,y:0,actionHandler:Zo,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing",render:nb}),ml:new lt({x:-.5,y:0,actionHandler:Zo,cursorStyleHandler:Ut.scaleSkewCursorStyleHandler,actionName:"resizing",render:nb})}}function nb(r,e,t,n,i){r.save(),r.translate(e,t),r.rotate(_y.degreesToRadians(90+i.angle)),r.lineWidth=6,r.lineCap="round",r.strokeStyle="white",r.beginPath(),r.moveTo(-6,0),r.lineTo(6,0),r.stroke(),r.lineWidth=4,r.strokeStyle="black",r.beginPath(),r.moveTo(-6,0),r.lineTo(6,0),r.stroke(),r.restore()}class ta extends Tt{static type="PreviewTrackItem";static ownDefaults={objectCaching:!1,borderColor:"transparent",stroke:"transparent",strokeWidth:0,borderOpacityWhenMoving:1,hoverCursor:"default",rx:4,ry:4};duration=0;fromId="";toId="";isSelected=!1;name;durationString;id;constructor(e){super(e),Object.assign(this,ta.ownDefaults),this.id=e.id,this.name=e.name||"item",this.durationString="00:05",this.fill="#27272a"}static getDefaults(){return{...super.getDefaults(),...ta.ownDefaults}}_render(e){e.save(),super._render(e),e.beginPath(),e.rect(-this.width/2,-this.height/2,this.width,this.height),e.clip(),this.drawTextIdentity(e),e.restore()}drawTextIdentity(e){e.font="600 12px 'Geist variable'",e.textAlign="left";const u=e.measureText(this.name).width,h=e.measureText(this.durationString).width,d=-this.height/2+4,g=-this.width/2,p=g+u+8*2+4,y=u+8*2;this.drawRoundedRect(e,g,d,y,20,4),e.fillStyle="#f4f4f5",e.fillText(this.name,g+8,d+12+2);const b=h+8*2;this.drawRoundedRect(e,p,d,b,20,4),e.fillStyle="#f4f4f5",e.fillText(this.durationString,p+8,d+12+2)}drawRoundedRect(e,t,n,i,s,a){e.fillStyle="rgba(0, 0, 0, 0.5)",e.roundRect?(e.beginPath(),e.roundRect(t,n,i,s,a),e.fill()):e.fillRect(t,n,i,s)}}function ib(r,e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{if(n!=="constructor"){const i=Object.getOwnPropertyDescriptor(t.prototype,n);i&&Object.defineProperty(r.prototype,n,i)}})})}const pl=(r,e)=>{const t={x:r.size.width/2,y:r.size.height/2},n={x:e.width/2,y:e.height/2},i=t.x-n.x,s=t.y-n.y,a=Math.min(r.size.width/e.width,r.size.height/e.height);return{top:`${s}px`,left:`${i}px`,transform:`scale(${a})`}},sb=r=>new Promise((e,t)=>{const n=new Audio;n.preload="auto",n.addEventListener("loadedmetadata",()=>{const i=n.duration*1e3;e({duration:i})}),n.addEventListener("error",i=>{t(i)}),n.src=r,n.crossOrigin="anonymous",n.load()}),ob=r=>new Promise((e,t)=>{const n=new Image;console.warn("Consider updating CDN config for CORS issues?"),n.onload=()=>{const i=n.width,s=n.height;e({width:i,height:s})},n.onerror=i=>{t(i)},n.crossOrigin="anonymous",n.src=r}),ab=r=>new Promise((e,t)=>{const n=document.createElement("video");n.preload="auto",n.addEventListener("loadedmetadata",()=>{const i=n.duration*1e3,s=n.videoWidth,a=n.videoHeight;e({duration:i,width:s,height:a})}),n.addEventListener("error",i=>{t(i)}),n.src=r,n.load()}),ra=(r,e)=>{const t=document.createElement("div");Object.keys(e).forEach(i=>{i!=="height"&&(t.style[i]=e[i])}),document.body.appendChild(t),t.textContent=r,t.style.width=`${e.width}px`,t.style.fontSize=`${e.fontSize}px`;const n=getComputedStyle(t).height;return document.body.removeChild(t),parseFloat(n)},en=r=>Object.keys(r).reduce((e,t)=>{const{display:{to:n}}=r[t];return Math.max(e,n)},0),cb=(r,e)=>{if(!r)return{from:0,to:e.duration};const{from:t,to:n}=r;return{from:t??0,to:n??e.duration}},lb=(r,e)=>{const{duration:t,trim:n}=e,i=n?n.to-n.from:t||5e3,s={from:0,to:i};if(!r)return s;if(r.from!==void 0&&r.from<0)return console.error("'from' must be a non-negative number. Returning default display."),s;if(r.from!==void 0&&r.to===void 0)return{from:r.from,to:r.from+i};if(r.to!==void 0){if(r.to<0)return console.error("'to' must be a non-negative number. Returning default display."),s;if(r.to<r.from)return console.error("'to' must be greater than or equal to 'from'. Returning default display."),s}return r};function ub(r,e){return r.map(t=>{const n=t.items.filter(i=>!e.includes(i));return{...t,items:n}}).filter(t=>t.items.length>0)}const hb=async(r,e)=>{const t=r.details,n=await ob(t.src),i=pl(e,n);return{id:r.id,type:"image",name:"",display:{from:e.origin||0,to:(e.origin||5e3)+5e3},details:{src:t.src||"",width:t.width||n.width||100,height:t.height||n.height||100,opacity:t.opacity??100,transform:i.transform,border:t.border||"none",borderRadius:t.borderRadius||"0",boxShadow:t.boxShadow||"none",top:i.top||"0px",left:i.left||"0px"},metadata:r.metadata||{}}},db=async(r,e)=>{const t=r.details.src,n=await ab(t),i=pl(e,{...n}),s=cb(r.trim,{duration:n.duration}),a={width:n.width,height:n.height,duration:n.duration,src:t,volume:r.details.volume??100,top:r.details.top||i.top||"0px",left:r.details.left||i.left||"0px",text:r.details.text};return{...r,trim:s,type:"video",details:a,display:lb(r?.display,{duration:n.duration,trim:s})}},fb=async r=>{const e=r.details,t=(await sb(e.src)).duration,n=r?.display?.from??0;return{id:r.id,name:"",type:"audio",display:{from:n,to:n+t},trim:{from:0,to:t},details:{src:e.src,duration:t,volume:e.volume??100,text:e.text},metadata:{...r.metadata}}},aP=5e3,of=async(r,e)=>{const t=r.id;await Bm([{fontFamily:r.details.fontFamily??"",fontUrl:r.details.fontUrl??""}]);const n={fontFamily:r.details.fontFamily??"Arial",fontSize:r.details.fontSize??"16px",fontWeight:r.details.fontWeight??"normal",fontStyle:r.details.fontStyle??"normal",textDecoration:r.details.textDecoration??"none",textAlign:r.details.textAlign??"left",lineHeight:r.details.lineHeight??"normal",letterSpacing:r.details.letterSpacing??"normal",wordSpacing:r.details.wordSpacing??"normal",color:r.details.color??"#ffffff",backgroundColor:r.details.backgroundColor??"transparent",border:r.details.border??"none",textShadow:r.details.textShadow??"none",text:r.details.text??"",opacity:r.details.opacity??100,width:r.details.width??300,wordWrap:r.details.wordWrap??"normal",wordBreak:r.details.wordBreak??"normal",WebkitTextStrokeColor:r.details.WebkitTextStrokeColor??"#ffffff",WebkitTextStrokeWidth:r.details.WebkitTextStrokeWidth??"0px",top:r.details.top??"0px",left:r.details.left??"0px"},i=ra(r.details.text??"",n),s=pl(e,{width:n.width??0,height:i});return{id:t,name:"",type:"text",display:{from:0,to:aP},details:{...n,height:i,top:s.top,left:s.left,fontUrl:r.details.fontUrl,text:r.details.text??""},metadata:{}}},gb=(r,e)=>{const t=r.display,n=yt(t.from,e.tScale),i=yt(t.to-t.from,e.tScale),s=ie.getClass("Audio")||jn;return new s({width:i,height:42,top:10,left:n,id:r.id,display:t,text:r.details.text,trim:r.trim||{from:0,to:r.details.duration},duration:r.details.duration,src:r.details.src,tScale:e.tScale})},pb=(r,e)=>{const t=yt(r.display.from,e.tScale),n=yt(r.details.duration||5e3,e.tScale),i=ie.getClass("Image")||gl;return new i({width:n,height:42,id:r.id,src:r.details.src,tScale:e.tScale,top:10,left:t,display:r.display})},mb=(r,e)=>{const t=yt(r.trim.from,e.tScale),n=yt(r.trim.to-r.trim.from,e.tScale),i=ie.getClass("Video")||Xi;return new i({width:n,height:42,id:r.id,tScale:e.tScale,fill:"#333333",top:10,left:t,display:r.trim,trim:r.trim,text:r.details.text})},vb=(r,e)=>{const t=r.display,n=yt(t.from,e.tScale),i=yt(t.to-t.from,e.tScale),s=ie.getClass("Text")||Yi;return new s({width:i,height:42,id:r.id,display:t,top:10,left:n,text:r.details.text,tScale:e.tScale})},yb={video:42,image:42,audio:42,text:42,caption:42,template:42},bb=(r={})=>{const e={...yb,...r};return Object.fromEntries(Object.entries(e).filter(([,t])=>typeof t=="number"))};let wb=class extends jn{static type="Audio";text;constructor(e){super(e),this.text=e.text??"Audio"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M8.24092 0C8.24092 2.51565 10.2795 4.55419 12.7951 4.55419C12.9677 4.55419 13.1331 4.62274 13.2552 4.74475C13.3772 4.86676 13.4457 5.03224 13.4457 5.20479C13.4457 5.37734 13.3772 5.54282 13.2552 5.66483C13.1331 5.78685 12.9677 5.85539 12.7951 5.85539C11.9218 5.85605 11.0594 5.66105 10.2713 5.28471C9.48319 4.90838 8.78942 4.36027 8.24092 3.68066V13.8794C8.24094 14.8271 7.91431 15.7458 7.31606 16.4808C6.71781 17.2157 5.88451 17.722 4.95657 17.9143C4.02863 18.1066 3.06276 17.9731 2.22172 17.5364C1.38067 17.0997 0.715856 16.3865 0.339286 15.5169C-0.0372842 14.6473 -0.10259 13.6744 0.154372 12.7622C0.411334 11.8501 0.974857 11.0544 1.74999 10.5092C2.52512 9.96403 3.46449 9.7027 4.40981 9.76924C5.35512 9.83579 6.24861 10.2261 6.93972 10.8745V0H8.24092ZM6.93972 13.8794C6.93972 13.1317 6.6427 12.4146 6.11398 11.8859C5.58527 11.3572 4.86818 11.0602 4.12046 11.0602C3.37275 11.0602 2.65566 11.3572 2.12694 11.8859C1.59823 12.4146 1.3012 13.1317 1.3012 13.8794C1.3012 14.6272 1.59823 15.3443 2.12694 15.873C2.65566 16.4017 3.37275 16.6987 4.12046 16.6987C4.86818 16.6987 5.58527 16.4017 6.11398 15.873C6.6427 15.3443 6.93972 14.6272 6.93972 13.8794Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,10),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,14),e.translate(10,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}};class _b extends Xi{static type="Video";text;constructor(e){super(e),this.text=e.text??"Video"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M16.5625 0.925L12.5 3.275V0.625L11.875 0H0.625L0 0.625V9.375L0.625 10H11.875L12.5 9.375V6.875L16.5625 9.2125L17.5 8.625V1.475L16.5625 0.925ZM11.25 8.75H1.25V1.25H11.25V8.75ZM16.25 7.5L12.5 5.375V4.725L16.25 2.5V7.5Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,14),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,10),e.translate(8,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}}class af extends Yi{static type="Text";constructor(e){super(e),this.fill="#303030"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M6.23982 0.361968C6.18894 0.253743 6.10832 0.162234 6.00736 0.0981357C5.9064 0.034038 5.78929 0 5.6697 0C5.55012 0 5.433 0.034038 5.33204 0.0981357C5.23109 0.162234 5.15046 0.253743 5.09959 0.361968L0.0599035 11.0713C0.0246926 11.1462 0.00457285 11.2272 0.000693114 11.3099C-0.00318662 11.3925 0.00924959 11.4751 0.0372917 11.553C0.0939253 11.7102 0.210687 11.8384 0.361891 11.9095C0.513095 11.9806 0.686354 11.9888 0.843555 11.9322C1.00076 11.8755 1.12902 11.7588 1.20013 11.6075L2.51202 8.81998H8.82738L10.1393 11.6075C10.1745 11.6824 10.2241 11.7496 10.2853 11.8053C10.3465 11.861 10.418 11.9041 10.4958 11.9322C10.5737 11.9602 10.6563 11.9726 10.7389 11.9687C10.8216 11.9649 10.9026 11.9447 10.9775 11.9095C11.0524 11.8743 11.1196 11.8247 11.1753 11.7635C11.231 11.7023 11.2741 11.6308 11.3021 11.553C11.3302 11.4751 11.3426 11.3925 11.3387 11.3099C11.3348 11.2272 11.3147 11.1462 11.2795 11.0713L6.23982 0.361968ZM3.10498 7.56005L5.6697 2.11011L8.23443 7.56005H3.10498ZM15.1191 3.78029C14.1143 3.78029 13.3292 4.05354 12.7859 4.59294C12.6721 4.71153 12.6092 4.86987 12.6106 5.03419C12.6119 5.19851 12.6774 5.3558 12.7931 5.4725C12.9088 5.58921 13.0655 5.6561 13.2298 5.6589C13.3941 5.6617 13.553 5.60018 13.6726 5.48748C13.9718 5.19062 14.46 5.04021 15.1191 5.04021C16.1609 5.04021 17.009 5.74892 17.009 6.61511V6.86867C16.45 6.49465 15.7917 6.29663 15.1191 6.30013C13.382 6.30013 11.9693 7.57187 11.9693 9.13495C11.9693 10.698 13.382 11.9698 15.1191 11.9698C15.792 11.9727 16.4503 11.7739 17.009 11.3989C17.0168 11.566 17.0907 11.7231 17.2144 11.8357C17.3381 11.9483 17.5014 12.0071 17.6685 11.9993C17.8356 11.9915 17.9927 11.9176 18.1053 11.7939C18.2179 11.6702 18.2767 11.5069 18.2689 11.3398V6.61511C18.2689 5.05202 16.8562 3.78029 15.1191 3.78029ZM15.1191 10.7099C14.0773 10.7099 13.2292 10.0012 13.2292 9.13495C13.2292 8.26876 14.0773 7.56005 15.1191 7.56005C16.1609 7.56005 17.009 8.26876 17.009 9.13495C17.009 10.0012 16.1609 10.7099 15.1191 10.7099Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,12),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,12),e.translate(8,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}}let xb=class extends gl{static type="Image";text;constructor(e){super(e),this.text=e.text??"Image"}_render(e){super._render(e),this.drawTextIdentity(e),this.updateSelected(e)}drawTextIdentity(e){const t=new Path2D("M1.55556 0H14.4444C15.3031 0 16 0.696889 16 1.55556V14.4444C16 14.857 15.8361 15.2527 15.5444 15.5444C15.2527 15.8361 14.857 16 14.4444 16H1.55556C1.143 16 0.747335 15.8361 0.455612 15.5444C0.163889 15.2527 0 14.857 0 14.4444V1.55556C0 0.696889 0.696889 0 1.55556 0ZM14.4444 1.33333H1.55556C1.49662 1.33333 1.4401 1.35675 1.39842 1.39842C1.35675 1.4401 1.33333 1.49662 1.33333 1.55556V14.4444C1.33333 14.5671 1.43289 14.6667 1.55556 14.6667H1.72444L10.456 5.93511C10.6004 5.79065 10.7719 5.67605 10.9607 5.59787C11.1494 5.51968 11.3517 5.47944 11.556 5.47944C11.7603 5.47944 11.9626 5.51968 12.1513 5.59787C12.3401 5.67605 12.5116 5.79065 12.656 5.93511L14.6667 7.94578V1.55556C14.6667 1.49662 14.6433 1.4401 14.6016 1.39842C14.5599 1.35675 14.5034 1.33333 14.4444 1.33333ZM14.6667 9.83111L11.7129 6.87733C11.6922 6.85664 11.6677 6.84022 11.6407 6.82902C11.6137 6.81781 11.5848 6.81205 11.5556 6.81205C11.5263 6.81205 11.4974 6.81781 11.4704 6.82902C11.4434 6.84022 11.4189 6.85664 11.3982 6.87733L3.60978 14.6667H14.4444C14.5034 14.6667 14.5599 14.6433 14.6016 14.6016C14.6433 14.5599 14.6667 14.5034 14.6667 14.4444V9.83111ZM4.88889 7.11111C4.29952 7.11111 3.73429 6.87699 3.31754 6.46024C2.90079 6.04349 2.66667 5.47826 2.66667 4.88889C2.66667 4.29952 2.90079 3.73429 3.31754 3.31754C3.73429 2.90079 4.29952 2.66667 4.88889 2.66667C5.47826 2.66667 6.04349 2.90079 6.46024 3.31754C6.87699 3.73429 7.11111 4.29952 7.11111 4.88889C7.11111 5.47826 6.87699 6.04349 6.46024 6.46024C6.04349 6.87699 5.47826 7.11111 4.88889 7.11111ZM4.88889 5.77778C5.12464 5.77778 5.35073 5.68413 5.51743 5.51743C5.68413 5.35073 5.77778 5.12464 5.77778 4.88889C5.77778 4.65314 5.68413 4.42705 5.51743 4.26035C5.35073 4.09365 5.12464 4 4.88889 4C4.65314 4 4.42705 4.09365 4.26035 4.26035C4.09365 4.42705 4 4.65314 4 4.88889C4 5.12464 4.09365 5.35073 4.26035 5.51743C4.42705 5.68413 4.65314 5.77778 4.88889 5.77778Z");e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,12),e.font="600 12px 'Geist variable'",e.fillStyle="#f4f4f5",e.textAlign="left",e.clip(),e.fillText(this.text,36,12),e.translate(8,1),e.fillStyle="#f4f4f5",e.fill(t),e.restore()}};class Sb extends li{static type="Track";constructor(e){super(e),this.fill="#18181b"}_render(e){super._render(e);const t=new Path2D("M14.4444 13.3263H11.0667C12.5384 12.3991 13.6259 10.9716 14.1289 9.30644C14.632 7.64131 14.5169 5.85051 13.8048 4.26348C13.0927 2.67645 11.8314 1.39993 10.2531 0.668736C8.67478 -0.0624548 6.8855 -0.199136 5.21442 0.283835C3.54334 0.766806 2.10285 1.83695 1.15794 3.2974C0.213035 4.75785 -0.172743 6.51038 0.0715766 8.23261C0.315896 9.95484 1.17388 11.5309 2.4877 12.671C3.80151 13.811 5.4828 14.4383 7.22227 14.4374H14.4444C14.5918 14.4374 14.7331 14.3789 14.8373 14.2747C14.9415 14.1705 15 14.0292 15 13.8819C15 13.7345 14.9415 13.5932 14.8373 13.489C14.7331 13.3848 14.5918 13.3263 14.4444 13.3263ZM1.1112 7.21523C1.1112 6.00658 1.46961 4.82506 2.14111 3.8201C2.8126 2.81514 3.76702 2.03187 4.88367 1.56934C6.00032 1.10681 7.22905 0.985789 8.41449 1.22159C9.59992 1.45738 10.6888 2.03941 11.5435 2.89405C12.3981 3.7487 12.9801 4.83759 13.2159 6.02302C13.4517 7.20845 13.3307 8.43719 12.8682 9.55384C12.4056 10.6705 11.6224 11.6249 10.6174 12.2964C9.61244 12.9679 8.43093 13.3263 7.22227 13.3263C5.60208 13.3245 4.04878 12.68 2.90313 11.5344C1.75748 10.3887 1.11304 8.83542 1.1112 7.21523ZM7.22227 5.54858C7.55191 5.54858 7.87414 5.45083 8.14822 5.2677C8.4223 5.08456 8.63592 4.82426 8.76206 4.51972C8.88821 4.21518 8.92121 3.88007 8.85691 3.55677C8.7926 3.23347 8.63386 2.9365 8.40078 2.70342C8.16769 2.47033 7.87072 2.3116 7.54742 2.24729C7.22412 2.18298 6.88901 2.21599 6.58447 2.34213C6.27993 2.46828 6.01964 2.6819 5.8365 2.95598C5.65337 3.23006 5.55562 3.55229 5.55562 3.88192C5.55562 4.32395 5.73121 4.74787 6.04377 5.06043C6.35633 5.37298 6.78025 5.54858 7.22227 5.54858ZM7.22227 3.32637C7.33215 3.32637 7.43956 3.35895 7.53092 3.42C7.62228 3.48104 7.69349 3.56781 7.73554 3.66932C7.77759 3.77084 7.78859 3.88254 7.76715 3.9903C7.74572 4.09807 7.6928 4.19706 7.61511 4.27476C7.53741 4.35245 7.43842 4.40536 7.33066 4.4268C7.22289 4.44824 7.11119 4.43723 7.00967 4.39519C6.90816 4.35314 6.82139 4.28193 6.76035 4.19057C6.69931 4.09921 6.66672 3.9918 6.66672 3.88192C6.66672 3.73458 6.72525 3.59327 6.82944 3.48909C6.93363 3.3849 7.07493 3.32637 7.22227 3.32637ZM8.88893 10.5485C8.88893 10.2189 8.79118 9.89668 8.60805 9.6226C8.42491 9.34852 8.16462 9.1349 7.86008 9.00875C7.55553 8.88261 7.22043 8.8496 6.89713 8.91391C6.57383 8.97822 6.27686 9.13695 6.04377 9.37004C5.81069 9.60313 5.65195 9.9001 5.58764 10.2234C5.52334 10.5467 5.55634 10.8818 5.68249 11.1863C5.80863 11.4909 6.02225 11.7512 6.29633 11.9343C6.57041 12.1175 6.89264 12.2152 7.22227 12.2152C7.6643 12.2152 8.08822 12.0396 8.40078 11.727C8.71334 11.4145 8.88893 10.9906 8.88893 10.5485ZM6.66672 10.5485C6.66672 10.4387 6.69931 10.3313 6.76035 10.2399C6.82139 10.1485 6.90816 10.0773 7.00967 10.0353C7.11119 9.99323 7.22289 9.98223 7.33066 10.0037C7.43842 10.0251 7.53741 10.078 7.61511 10.1557C7.6928 10.2334 7.74572 10.3324 7.76715 10.4402C7.78859 10.5479 7.77759 10.6596 7.73554 10.7611C7.69349 10.8627 7.62228 10.9494 7.53092 11.0105C7.43956 11.0715 7.33215 11.1041 7.22227 11.1041C7.07493 11.1041 6.93363 11.0456 6.82944 10.9414C6.72525 10.8372 6.66672 10.6959 6.66672 10.5485ZM10.5556 8.88189C10.8852 8.88189 11.2074 8.78414 11.4815 8.60101C11.7556 8.41787 11.9692 8.15758 12.0954 7.85303C12.2215 7.54849 12.2545 7.21338 12.1902 6.89008C12.1259 6.56678 11.9672 6.26982 11.7341 6.03673C11.501 5.80364 11.204 5.64491 10.8807 5.5806C10.5574 5.51629 10.2223 5.5493 9.91778 5.67544C9.61324 5.80159 9.35295 6.01521 9.16981 6.28929C8.98668 6.56337 8.88893 6.8856 8.88893 7.21523C8.88893 7.65726 9.06452 8.08118 9.37708 8.39374C9.68964 8.70629 10.1136 8.88189 10.5556 8.88189ZM10.5556 6.65968C10.6655 6.65968 10.7729 6.69226 10.8642 6.75331C10.9556 6.81435 11.0268 6.90112 11.0688 7.00263C11.1109 7.10415 11.1219 7.21585 11.1005 7.32362C11.079 7.43138 11.0261 7.53037 10.9484 7.60807C10.8707 7.68576 10.7717 7.73867 10.664 7.76011C10.5562 7.78155 10.4445 7.77054 10.343 7.7285C10.2415 7.68645 10.1547 7.61524 10.0937 7.52388C10.0326 7.43252 10 7.32511 10 7.21523C10 7.06789 10.0586 6.92658 10.1628 6.8224C10.2669 6.71821 10.4082 6.65968 10.5556 6.65968ZM3.88896 5.54858C3.55933 5.54858 3.2371 5.64633 2.96302 5.82946C2.68894 6.01259 2.47532 6.27289 2.34918 6.57743C2.22303 6.88197 2.19002 7.21708 2.25433 7.54038C2.31864 7.86368 2.47737 8.16065 2.71046 8.39374C2.94355 8.62682 3.24052 8.78556 3.56382 8.84986C3.88711 8.91417 4.22222 8.88117 4.52677 8.75502C4.83131 8.62888 5.0916 8.41526 5.27474 8.14118C5.45787 7.8671 5.55562 7.54487 5.55562 7.21523C5.55562 6.77321 5.38003 6.34929 5.06747 6.03673C4.75491 5.72417 4.33099 5.54858 3.88896 5.54858ZM3.88896 7.77078C3.77909 7.77078 3.67168 7.7382 3.58032 7.67716C3.48896 7.61611 3.41775 7.52935 3.3757 7.42783C3.33365 7.32632 3.32265 7.21462 3.34409 7.10685C3.36552 6.99908 3.41843 6.90009 3.49613 6.8224C3.57382 6.7447 3.67281 6.69179 3.78058 6.67036C3.88835 6.64892 4.00005 6.65992 4.10156 6.70197C4.20308 6.74402 4.28984 6.81522 4.35089 6.90658C4.41193 6.99794 4.44452 7.10535 4.44452 7.21523C4.44452 7.36257 4.38598 7.50388 4.2818 7.60807C4.17761 7.71225 4.03631 7.77078 3.88896 7.77078Z");this.items.length||(e.save(),e.translate(-this.width/2,-this.height/2),e.translate(0,12),e.font="600 12px 'Geist variable'",e.fillStyle="#A0A4A2",e.textAlign="left",e.clip(),e.fillText("Drag and drop media here",32,12),e.translate(8,1),e.fillStyle="#A0A4A2",e.fill(t),e.restore())}}class Cb extends Ys{static type="Helper";constructor(e){e.activeGuideFill="#ffffff",super(e)}}class Tb{addTrackItem(e){const t=e.id,n=cf(e,{tScale:this.tScale,sizesMap:this.sizesMap});this.add(n),this.trackItemIds.push(t),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=en(this.trackItemsMap)}alignItemsToTrack(){this.pauseEventListeners();const e=new Map(this.getObjects("Track").map(n=>[n.id,n])),t=this.getObjects("Image","Video","Text","Audio");this.trackItemIds.forEach(n=>{const i=this.tracks.find(c=>c.items.includes(n));if(!i)return;const s=e.get(i.id);this.duration;const a=this.getObjects().find(c=>c.id===n);a&&s&&(a.isMain=!1,this.trackItemsMap[n].isMain=!1,a.set({top:s.top}),a.setCoords())}),e.forEach(n=>{n.items=t.filter(i=>i.top===n.top).map(i=>i.id)}),this.resumeEventListeners()}updateTrackItemsPosition(){const e=this.getObjects("Image","Text","Video","Audio");e.sort((t,n)=>t.top-n.top),this.trackItemIds=e.map(t=>t.id).reverse()}restoreTrackItemPositions(){}updateTrackItemsState(){this.pauseEventListeners();const e=this.getObjects("Image","Video","Text","Audio"),t={};e.forEach(n=>{const{id:i,left:s,width:a}=n,c=this.trackItemsMap[i],u=Gn(s,this.tScale),h=u+Gn(a,this.tScale),d={from:u,to:h},g={...c,display:d,trim:n instanceof Xi||n instanceof jn?n.trim:void 0};n.display=d,t[i]=g}),this.trackItemsMap=t,this.resumeEventListeners()}deleteActiveTrackItem(){const e=this.getActiveObjects();if(!e.length)return!1;const t=e.map(i=>i.id),n=xo(this.tracks,t);this.trackItemsMap=Object.keys(this.trackItemsMap).reduce((i,s)=>(t.includes(s)||(i[s]=this.trackItemsMap[s]),i),{}),this.trackItemIds=this.trackItemIds.filter(i=>!t.includes(i)),this.tracks=n,this.discardActiveObject(),this.remove(...e),this.setActiveIds([]),this.renderTracks(),this.alignItemsToTrack(),this.updateState({updateHistory:!0,kind:"remove"})}updateTrackItemsToHistory(){this.pauseEventListeners();const e=this.getObjects();this.trackItemIds.forEach(t=>{const n=this.tracks.find(h=>h.items.includes(t)),i=e.find(h=>h.id===n?.id)?.top;if(!i){console.warn(`Track top not found for trackItemId: ${t}`);return}const s=this.trackItemsMap[t],a=e.find(h=>h.id===t);if(!a){console.warn(`Object not found for trackItemId: ${t}`);return}const c=yt(s.display.from,this.tScale),u=yt(s.display.to-s.display.from,this.tScale);a.set({left:c,width:u,top:i}),a.setCoords()}),this.requestRenderAll(),this.resumeEventListeners()}cloneActiveTrackItem(e){const t=e?.trackItemId||this.activeIds[0];if(!t)return!1;const i={...this.trackItemsMap[t],id:Et()},s=this.tracks.find(d=>d.items.includes(t)),a=this.tracks.findIndex(d=>d.id===s?.id)+1;this.findOrCreateTrack(i,{trackIndex:a});const c=cf(i,{tScale:this.tScale});c&&this.add(c);const{audioData:u,...h}=i.metadata||{};i.metadata=h,this.trackItemsMap[i.id]=i,this.trackItemIds.push(i.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}splitActiveTrackItem(e){const t=e.trackItemId??this.activeIds[0];if(!t||this.activeIds.length>1)return!1;const n=this.trackItemsMap[t],i=e.time;if(n.display.from>=i||n.display.to<=i)return!1;const s={...n,display:{from:n.display.from,to:i}},a={...n,display:{from:i,to:n.display.to},id:Et()};if(n.type==="video"||n.type==="audio"){const d=i-s.display.from;s.trim={from:n.trim.from,to:n.trim.from+d},a.trim={from:s.trim.to,to:n.trim.to}}const c=this.getObjects().find(d=>d.id===t);c.display=s.display,this.tracks.find(d=>d.items.includes(t))?.items.push(a.id);const h=cf(a,{tScale:this.tScale});h&&this.add(h),this.trackItemsMap[a.id]=a,this.trackItemsMap[t]=s,this.trackItemIds.push(a.id),this.updateTrackItemCoords(s.id),this.alignItemsToTrack(),this.updateTransitions(),this.updateState()}updateTrackItemCoords(e){const t=this.getObjects().find(a=>a.id===e),n=this.trackItemsMap[e],i=yt(n.display.from,this.tScale),s=yt(n.display.to-n.display.from,this.tScale);t?.set({left:i,width:s}),t?.setCoords()}updateTrackItemDetails(e,t){const n=t?.trackItemId;if(!n)return!1;const i=this.trackItemsMap[n],s={...i.details,...e.details};("fontSize"in s||"lineHeight"in s)&&(s.height=ra(s.text,s)),this.trackItemsMap[n]={...i,...e,details:s},this.updateState()}updateTrackItem(e,t){const n=t.trackItemId;if(!n)return!1;const i=this.trackItemsMap[n],s={...i.details,...e.details};if(i.type==="text"&&e.details.text){const a=this.getObjects("Text").find(c=>c.id===n);a instanceof af&&(a.text=e.details.text,this.requestRenderAll())}("fontSize"in s||"lineHeight"in s)&&(s.height=ra(s.text,s)),this.trackItemsMap[n]={...i,...e,details:s},this.updateState()}updateTrackItemsDetails(e,t){t?.trackItemIds?.forEach((n,i)=>{const s=this.trackItemsMap[n],a={...s.details,...e[i].details};("fontSize"in a||"lineHeight"in a)&&(a.height=ra(a.text,a)),this.trackItemsMap[n]={...s,...e[i],details:a}}),this.updateState()}getTrackItems(){return this.getObjects(...cP)}setActiveTrackItemCoords(){this.getActiveObjects().forEach(e=>e.setCoords())}deleteTrackItemById(e){const t=this.getObjects().filter(n=>e.includes(n.id));this.tracks=xo(this.tracks,e),this.trackItemsMap=Object.keys(this.trackItemsMap).filter(n=>!e.includes(n)).reduce((n,i)=>(n[i]=this.trackItemsMap[i],n),{}),this.trackItemIds=this.trackItemIds.filter(n=>!e.includes(n)),this.discardActiveObject(),this.remove(...t),this.renderTracks(),this.alignItemsToTrack(),this.calcBounding(),this.duration=en(this.trackItemsMap)}selectTrackItemByIds(e){const t=this.getActiveObjects().map(i=>i.id);if(We.isEqual(t,e))return;const n=this.getTrackItems().filter(i=>e.includes(i.id));if(n.length===0)this.discardActiveObject();else if(n.length===1)this.setActiveObject(n[0]);else{const i=new pn(n);this.setActiveObject(i)}this.requestRenderAll()}}const cP=["Image","Text","Video","Audio","Caption","Template"],cf=(r,e)=>{const n={text:vb,video:mb,image:pb,audio:gb}[r.type];return n(r,e)},Xs={text:32,image:40,video:40,audio:32,main:40},Eb=r=>{switch(r){case"text":return Xs.text;case"image":return Xs.image;case"video":return Xs.video;case"audio":return Xs.audio;case"helperTop":return 40;case"helperBottom":return 40;case"helperCenter":return 8;case"main":return Xs.main;default:return Xs.text}};class kb{findOrCreateTrack(e,{trackId:t,trackIndex:n}){const i=t;if(i){const a=this.tracks.find(c=>c.id===i);if(a)return a.items.push(e.id),i}const s={id:Et(),items:[e.id],type:e.type,accepts:this.acceptsMap?.[e.type]};return n!==void 0?this.tracks.splice(n,0,s):this.tracks.push(s),this.renderTracks(),s.id}removeTracks(){this.getObjects("Track","Helper")?.forEach(e=>this.remove(e))}renderTracks(){this.updateTracksState(),this.removeTracks();const e=this.width,t=this.tracks.flatMap(c=>[c,{id:`after-${c.id}`,type:"helper",items:[],accepts:[]}]).slice(0,-1);let n=0;const i=ie.getClass("Helper")||Ys,s=new i({id:"helperLineTop",top:n,selectable:!1,evented:!1,tScale:this.tScale,width:e,kind:"top",metadata:{}});n+=Eb("helperTop"),this.insertAt(0,s),t.forEach((c,u)=>{if(c.type==="helper"){const h=Eb("helperCenter"),d=new i({id:c.id,top:n,tScale:this.tScale,width:e,height:h,metadata:{order:(u+1)/2},kind:"center"});n+=h,this.insertAt(0,d)}else{const h=ie.getClass("Track")||li,d=new h({id:c.id,top:n,left:0,fill:"#18181b",height:42,width:e,tScale:this.tScale,accepts:this.acceptsMap?.[c.type]||[],items:c.items});n+=42,this.insertAt(0,d)}});const a=new i({id:"helperLineBottom",top:n,selectable:!1,evented:!1,tScale:this.tScale,width:e,kind:"bottom",metadata:{}});this.insertAt(0,a)}updateTracksState(){const e=this.tracks.filter(n=>n.items.length||n.type==="main"),t=new Map;e.forEach(n=>t.set(n.id,n)),this.tracks=Array.from(t.values())}updateTrackCoords(){const e=this.bounding.width+this.spacing.right;this.getObjects("Track","Helper").forEach(t=>{t.updateCoords(e),t.setCoords()})}}const lP=60,uP=188;function Ib(r,e=1,t=1){const n=uP*e;return r*(lP/1e3)*n/t}class Ab{removeTransitions(){const e=this.getObjects("Transition");this.remove(...e)}renderTransitions(){this.removeTransitions(),this.transitionIds.forEach(e=>{const t=this.transitionsMap[e],n=t.fromId,i=t.toId,s=this.getObjects(),a=s.find(p=>p.id===n),c=s.find(p=>p.id===i);if(!a||!c)return;const u=Ib(t.duration,this.tScale),h=a.left+a.width-u/2,d=a.height,g=new Lr({id:t.id,left:h,top:a.top,height:d,width:u,tScale:this.tScale,duration:t.duration,fromId:a.id,toId:c.id,kind:t.kind});t.kind==="none"&&(g.visible=!1),this.add(g)})}updateTransitionCoordinates(){this.pauseEventListeners(),this.getObjects("Transition").forEach(e=>{e.tScale=this.tScale,e.updateCoords(),e.setCoords()}),this.resumeEventListeners()}alignTransitionsToTrack(){this.pauseEventListeners(),this.transitionIds.forEach(e=>{const t=this.getObjects("Transition").find(n=>n.id===e);if(t instanceof Lr){const n=this.getObjects().find(a=>a.id===t.fromId);if(!n)return;const i=Ib(t.duration,this.tScale),s=n.left+n.width-i/2;t.set({left:s,top:n.top}),t.setCoords()}}),this.resumeEventListeners()}updateTransitions(e=!0){e&&this.pauseEventListeners();const t=this.getObjects("Track"),n=this.getObjects("Video","Image");this.removeTransitions();const i={},s=[];t.forEach(a=>{const c=n.filter(u=>a.items.includes(u.id)).sort((u,h)=>u.left-h.left);for(let u=0;u<c.length-1;u++){const h=c[u],d=c[u+1];if(Math.abs(h.left+h.width-d.left)<=1){const g=`${h.id}-${d.id}`;if(this.transitionIds.includes(g))i[g]=this.transitionsMap[g];else{const p={id:g,duration:1500,fromId:h.id,toId:d.id,kind:"none",trackId:a.id,type:"transition"};i[g]=p}s.push(g)}}}),this.transitionIds=s,this.transitionsMap=i,this.renderTransitions(),e&&this.resumeEventListeners()}}const te={canvas:null,enableGuideRedraw:!0,isPointerOverHelperTrack:!1,draggingOverTrack:null,primaryMovingObjects:[],secondaryMovingObjects:[],placeholderMovingObjects:[],objectInitialPositions:{},originTrack:{},trackToItemsMap:{},activeTrackToItemsMap:{},trackTopToIdMap:{},trackTops:[],activeObjects:[],primaryTracks:{},secondaryTracks:{}},mt={guide:null,object:null,objects:[]},hP=()=>te,dP=r=>{Object.assign(te,r)},fP=r=>{r.on("before:transform",Mb.bind(r))},gP=r=>{r.off("before:transform",Mb.bind(r))};function Mb(r){te.canvas=this,te.activeTrackToItemsMap={},te.primaryTracks={},te.secondaryTracks={},te.trackTops=[],te.trackToItemsMap={},te.activeObjects=[],te.trackTopToIdMap={},te.canvas.trackIdAfterTransform="",te.canvas.positionAfterTransform={};const e=te.canvas.getActiveObject();if(!e)return;te.activeObjects=e instanceof pn?e.getObjects():[e];const t=te.canvas.getScenePoint(r.e),n=te.canvas.getObjects("Track");te.originTrack=n.find(a=>{const c=a.getBoundingRect();return t.x>=c.left&&t.x<=c.left+c.width&&t.y>=c.top&&t.y<=c.top+c.height})??{};const i=te.canvas.getObjects("Video","Image","Audio","Text","Element");n.forEach(a=>{const c=i.filter(u=>a.items.includes(u.id));te.trackToItemsMap[a.id]=c,te.trackTopToIdMap[a.top]=a.id,te.trackTops.push(a.top)}),te.trackTops.sort((a,c)=>a-c),te.activeObjects.forEach(a=>{const c=n?.find(h=>h.items.includes(a.id));if(!c)return;const u=c.id;te.activeTrackToItemsMap[u]?te.activeTrackToItemsMap[u].push(a):te.activeTrackToItemsMap[u]=[a]}),te.primaryMovingObjects=te.activeObjects.filter(a=>{const c=a.getBoundingRect();return t.y>=c.top&&t.y<=c.top+c.height&&!(a instanceof Lr)}),te.primaryMovingObjects.forEach(a=>{const c=a.getBoundingRect().top,u=te.trackTopToIdMap[c];if(te.primaryTracks[u])te.primaryTracks[u].objects.push(a);else{const h=lf(te.trackTops,te.originTrack.top,c);if(typeof h!="number")return;te.primaryTracks[u]={objects:[a],index:h}}}),te.primaryMovingObjects=te.primaryMovingObjects.sort((a,c)=>a.left-c.left),te.secondaryMovingObjects=te.activeObjects.filter(a=>!te.primaryMovingObjects.includes(a)&&!(a instanceof Lr)),te.secondaryMovingObjects.forEach(a=>{const c=a.getBoundingRect().top,u=te.trackTopToIdMap[a.getBoundingRect().top];if(te.secondaryTracks[u])te.secondaryTracks[u].objects.push(a);else{const h=lf(te.trackTops,te.originTrack.top,c);if(typeof h!="number")return;te.secondaryTracks[u]={objects:[a],index:h}}}),te.originTrack&&(te.canvas.trackOriginBeforeTransform=te.originTrack.id),e&&(te.canvas.positionBeforeTransform={top:e.top,left:e.left}),("transform"in r?r.transform:{}).action==="drag"&&(te.placeholderMovingObjects=te.primaryMovingObjects.map(a=>{const c=a.getBoundingRect();te.objectInitialPositions[a.id]={top:c.top,left:c.left};const u=new $s({id:`${a.id}-placeholder`,left:c.left,top:c.top,width:c.width,height:c.height,for:pP[a.type]});return u.draggedObject=a,u}),te.canvas.add(...te.placeholderMovingObjects))}function lf(r,e,t){const n=r.indexOf(e),i=r.indexOf(t);return n===-1||i===-1?null:i-n}const pP={trackitemvideo:"video",trackitemimage:"image",trackitemaudio:"audio",trackitemtext:"text"};function Ob(r){if(!mt.guide)return!1;r.e.preventDefault();const e=this,t=e.getViewportPoint(r.e);mt.guide.set({left:t.x-16,top:t.y-mt.guide.height/2});const n=mP(t,mt.objects);n&&(mt.object=n,n.strokeDashArray=[5,1],n.setSelected(!0)),mt.objects.forEach(i=>{i!==n&&i.setSelected(!1)}),e.requestRenderAll()}function mP(r,e){let t=1/0,n=null;const i=new z(r.x,r.y);return e.forEach(s=>{const a=vP(s,i);a<t&&(t=a,n=s)}),n}function vP(r,e){return Math.sqrt(Math.pow(r.left-e.x,2)+Math.pow(r.top-e.y,2))}const yP=["transition","image","video","audio","caption","text"];function Pb(r){const e=r.e.dataTransfer?.types[0];if(!e)return;const t=JSON.parse(e),{type:n,duration:i=5e3}=t;if(!yP.includes(n))return;const s=this;s.discardActiveObject();const a=yt(i,s.tScale);mt.guide=bP({width:a,height:48,id:"TransitionGuide",left:0,top:0,type:n}),s.add(mt.guide),n==="transition"&&(mt.objects=s.getObjects("Transition"),mt.objects.forEach(c=>{c.visible=!0})),Ne.dispatch(Gu)}function bP({width:r,height:e,id:t,left:n,top:i,type:s}){return s==="transition"?new ea({top:0,left:0,height:48,width:48,id:"TransitionGuide"}):new ta({top:i,left:n,height:e,width:r,id:t,name:"Rivers in the mountains"})}function Db(){if(!mt.guide)return;Ne.dispatch(wo);const r=this;wP(mt.objects),r.remove(mt.guide)}function wP(r){r.forEach(e=>{e.strokeDashArray=[],e.setSelected(!1),e.kind==="none"&&(e.visible=!1)})}var _P=typeof global=="object"&&global&&global.Object===Object&&global,xP=typeof self=="object"&&self&&self.Object===Object&&self,uf=_P||xP||Function("return this")(),ui=uf.Symbol,jb=Object.prototype,SP=jb.hasOwnProperty,CP=jb.toString,na=ui?ui.toStringTag:void 0;function TP(r){var e=SP.call(r,na),t=r[na];try{r[na]=void 0;var n=!0}catch{}var i=CP.call(r);return n&&(e?r[na]=t:delete r[na]),i}var EP=Object.prototype,kP=EP.toString;function IP(r){return kP.call(r)}var AP="[object Null]",MP="[object Undefined]",Fb=ui?ui.toStringTag:void 0;function hf(r){return r==null?r===void 0?MP:AP:Fb&&Fb in Object(r)?TP(r):IP(r)}function df(r){return r!=null&&typeof r=="object"}var OP="[object Symbol]";function ff(r){return typeof r=="symbol"||df(r)&&hf(r)==OP}function PP(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var ia=Array.isArray,Lb=ui?ui.prototype:void 0,Nb=Lb?Lb.toString:void 0;function Rb(r){if(typeof r=="string")return r;if(ia(r))return PP(r,Rb)+"";if(ff(r))return Nb?Nb.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function ml(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function DP(r){return r}var jP="[object AsyncFunction]",FP="[object Function]",LP="[object GeneratorFunction]",NP="[object Proxy]";function RP(r){if(!ml(r))return!1;var e=hf(r);return e==FP||e==LP||e==jP||e==NP}var gf=uf["__core-js_shared__"],Vb=function(){var r=/[^.]+$/.exec(gf&&gf.keys&&gf.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function VP(r){return!!Vb&&Vb in r}var BP=Function.prototype,zP=BP.toString;function WP(r){if(r!=null){try{return zP.call(r)}catch{}try{return r+""}catch{}}return""}var HP=/[\\^$.*+?()[\]{}|]/g,UP=/^\[object .+?Constructor\]$/,$P=Function.prototype,YP=Object.prototype,XP=$P.toString,GP=YP.hasOwnProperty,qP=RegExp("^"+XP.call(GP).replace(HP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KP(r){if(!ml(r)||VP(r))return!1;var e=RP(r)?qP:UP;return e.test(WP(r))}function ZP(r,e){return r?.[e]}function pf(r,e){var t=ZP(r,e);return KP(t)?t:void 0}function JP(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var QP=800,eD=16,tD=Date.now;function rD(r){var e=0,t=0;return function(){var n=tD(),i=eD-(n-t);if(t=n,i>0){if(++e>=QP)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function nD(r){return function(){return r}}var vl=function(){try{var r=pf(Object,"defineProperty");return r({},"",{}),r}catch{}}(),iD=vl?function(r,e){return vl(r,"toString",{configurable:!0,enumerable:!1,value:nD(e),writable:!0})}:DP,sD=rD(iD),oD=9007199254740991,aD=/^(?:0|[1-9]\d*)$/;function Bb(r,e){var t=typeof r;return e=e??oD,!!e&&(t=="number"||t!="symbol"&&aD.test(r))&&r>-1&&r%1==0&&r<e}function cD(r,e,t){e=="__proto__"&&vl?vl(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function zb(r,e){return r===e||r!==r&&e!==e}var lD=Object.prototype,uD=lD.hasOwnProperty;function hD(r,e,t){var n=r[e];(!(uD.call(r,e)&&zb(n,t))||t===void 0&&!(e in r))&&cD(r,e,t)}var Wb=Math.max;function dD(r,e,t){return e=Wb(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,s=Wb(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=n[i];return c[e]=t(a),JP(r,this,c)}}var fD=9007199254740991;function gD(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=fD}var pD="[object Arguments]";function Hb(r){return df(r)&&hf(r)==pD}var Ub=Object.prototype,mD=Ub.hasOwnProperty,vD=Ub.propertyIsEnumerable,$b=Hb(function(){return arguments}())?Hb:function(r){return df(r)&&mD.call(r,"callee")&&!vD.call(r,"callee")},yD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bD=/^\w*$/;function wD(r,e){if(ia(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||ff(r)?!0:bD.test(r)||!yD.test(r)||e!=null&&r in Object(e)}var sa=pf(Object,"create");function _D(){this.__data__=sa?sa(null):{},this.size=0}function xD(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var SD="__lodash_hash_undefined__",CD=Object.prototype,TD=CD.hasOwnProperty;function ED(r){var e=this.__data__;if(sa){var t=e[r];return t===SD?void 0:t}return TD.call(e,r)?e[r]:void 0}var kD=Object.prototype,ID=kD.hasOwnProperty;function AD(r){var e=this.__data__;return sa?e[r]!==void 0:ID.call(e,r)}var MD="__lodash_hash_undefined__";function OD(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=sa&&e===void 0?MD:e,this}function Gi(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Gi.prototype.clear=_D,Gi.prototype.delete=xD,Gi.prototype.get=ED,Gi.prototype.has=AD,Gi.prototype.set=OD;function PD(){this.__data__=[],this.size=0}function yl(r,e){for(var t=r.length;t--;)if(zb(r[t][0],e))return t;return-1}var DD=Array.prototype,jD=DD.splice;function FD(r){var e=this.__data__,t=yl(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():jD.call(e,t,1),--this.size,!0}function LD(r){var e=this.__data__,t=yl(e,r);return t<0?void 0:e[t][1]}function ND(r){return yl(this.__data__,r)>-1}function RD(r,e){var t=this.__data__,n=yl(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function Gs(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Gs.prototype.clear=PD,Gs.prototype.delete=FD,Gs.prototype.get=LD,Gs.prototype.has=ND,Gs.prototype.set=RD;var VD=pf(uf,"Map");function BD(){this.size=0,this.__data__={hash:new Gi,map:new(VD||Gs),string:new Gi}}function zD(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function bl(r,e){var t=r.__data__;return zD(e)?t[typeof e=="string"?"string":"hash"]:t.map}function WD(r){var e=bl(this,r).delete(r);return this.size-=e?1:0,e}function HD(r){return bl(this,r).get(r)}function UD(r){return bl(this,r).has(r)}function $D(r,e){var t=bl(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function qi(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}qi.prototype.clear=BD,qi.prototype.delete=WD,qi.prototype.get=HD,qi.prototype.has=UD,qi.prototype.set=$D;var YD="Expected a function";function mf(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(YD);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var a=r.apply(this,n);return t.cache=s.set(i,a)||s,a};return t.cache=new(mf.Cache||qi),t}mf.Cache=qi;var XD=500;function GD(r){var e=mf(r,function(n){return t.size===XD&&t.clear(),n}),t=e.cache;return e}var qD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,KD=/\\(\\)?/g,ZD=GD(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(qD,function(t,n,i,s){e.push(i?s.replace(KD,"$1"):n||t)}),e});function JD(r){return r==null?"":Rb(r)}function wl(r,e){return ia(r)?r:wD(r,e)?[r]:ZD(JD(r))}function vf(r){if(typeof r=="string"||ff(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function QD(r,e){e=wl(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[vf(e[t++])];return t&&t==n?r:void 0}function e4(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var Yb=ui?ui.isConcatSpreadable:void 0;function t4(r){return ia(r)||$b(r)||!!(Yb&&r&&r[Yb])}function r4(r,e,t,n,i){var s=-1,a=r.length;for(t||(t=t4),i||(i=[]);++s<a;){var c=r[s];t(c)?e4(i,c):i[i.length]=c}return i}function n4(r){var e=r==null?0:r.length;return e?r4(r):[]}function i4(r){return sD(dD(r,void 0,n4),r+"")}function s4(r,e){return r!=null&&e in Object(r)}function o4(r,e,t){e=wl(e,r);for(var n=-1,i=e.length,s=!1;++n<i;){var a=vf(e[n]);if(!(s=r!=null&&t(r,a)))break;r=r[a]}return s||++n!=i?s:(i=r==null?0:r.length,!!i&&gD(i)&&Bb(a,i)&&(ia(r)||$b(r)))}function a4(r,e){return r!=null&&o4(r,e,s4)}function c4(r,e,t,n){if(!ml(r))return r;e=wl(e,r);for(var i=-1,s=e.length,a=s-1,c=r;c!=null&&++i<s;){var u=vf(e[i]),h=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return r;if(i!=a){var d=c[u];h=void 0,h===void 0&&(h=ml(d)?d:Bb(e[i+1])?[]:{})}hD(c,u,h),c=c[u]}return r}function l4(r,e,t){for(var n=-1,i=e.length,s={};++n<i;){var a=e[n],c=QD(r,a);t(c,a)&&c4(s,wl(a,r),c)}return s}function u4(r,e){return l4(r,e,function(t,n){return a4(r,n)})}var h4=i4(function(r,e){return r==null?{}:u4(r,e)});function Xb(r){const e=r.e.dataTransfer?.types[0];if(!e)return;const t=JSON.parse(r.e.dataTransfer.getData(e)),n=this;if(t.type!=="transition"){d4(t),n.remove(mt.guide),n.requestRenderAll(),Ne.dispatch(wo);return}mt.guide&&(mt.object&&f4(t,n),mt.objects.forEach(i=>{i.strokeDashArray=[],i.setSelected(!1),i.kind==="none"&&(i.visible=!1)}),n.remove(mt.guide),n.requestRenderAll(),Ne.dispatch(wo))}function d4(r){const e={...r,id:Et()};switch(r.type){case"image":Ne.dispatch(bs,{payload:e});break;case"video":Ne.dispatch(vs,{payload:e});break;case"audio":Ne.dispatch(ys,{payload:e});break}}function f4(r,e){const t=mt.object?.id,n=h4(r,["kind","direction"]);Object.entries(n).forEach(([i,s])=>{i==="kind"?mt.object.kind=s:mt.object[i]=s}),e.transitionsMap[t]={...e.transitionsMap[t],...n},e.updateState()}const g4=r=>{r.on("dragover",Ob),r.on("dragenter",Pb),r.on("dragleave",Db),r.on("drop",Xb)},p4=r=>{r.off("dragover",Ob),r.off("dragenter",Pb),r.off("dragleave",Db),r.off("drop",Xb)},Gb=r=>{const e=r.target.canvas,t=r.target;if(r.action==="resizing"&&t instanceof Lr&&e){const n=t.id,i=e.getObjects("Transition").find(s=>s.id===n);if(i&&i instanceof Lr){const s=We.cloneDeep(e.transitionsMap),a={...s,[n]:{...s[n],width:i.width,duration:i.duration}};e.transitionsMap=a,e.updateState()}}e&&(m4(e,e.getObjects()),v4(e.getObjects("Helper")),te.isPointerOverHelperTrack=!1,te.draggingOverTrack=null)},m4=(r,e)=>{e.forEach(t=>{t.isAlignmentAuxiliary&&r.remove(t)})},v4=r=>{r.forEach(e=>e.setSelected(!1))};function qb(r){const e=r.target.canvas;if(!e)return;const t=e.getActiveObject();if(!t||!e.positionBeforeTransform)return;const n=e.getScenePoint(r.e),i=e.getObjects("Track","Helper").find(s=>{const a=s.getBoundingRect();return n.x>=a.left&&n.x<=a.left+a.width&&n.y>=a.top&&n.y<=a.top+a.height});if(r.action==="resizing"){const s=(te.trackToItemsMap[te.originTrack.id]||[]).filter(c=>c!==t);t.setCoords();const a=_l(s,t.getBoundingRect());return e.fire("track-items:resized",{trackId:te.originTrack.id,trackItemIds:[t.id],isOverlapped:!!a}),!1}if(!i)return t&&(t?.set(e.positionBeforeTransform),t?.setCoords()),!1;if(i instanceof Ys){let s;switch(i.kind){case"top":s=0;break;case"center":s=i.metadata.order||0;break;case"bottom":s=-1;break;default:return}const a={isSecondaryOverlapped:!1,secondaryTracks:te.secondaryTracks,primaryTracks:te.primaryTracks,primaryPositions:{trackIndex:s,trackId:e.trackIdAfterTransform,positions:e.positionAfterTransform}};_4(a)}else if(i instanceof li){const s={isSecondaryOverlapped:b4(),secondaryTracks:te.secondaryTracks,primaryTracks:te.primaryTracks,primaryPositions:{trackId:e.trackIdAfterTransform,positions:e.positionAfterTransform}};y4(s)}}const y4=r=>{te.canvas&&te.canvas.fire("track-items:moved",r)};function b4(){const r=w4();return Object.keys(r).some(e=>{const t=te.trackToItemsMap[e],n=r[e].objects;return t?.length?t.filter(i=>!n.includes(i)).some(i=>_l(n,i.getBoundingRect())):!0})}function w4(){const[r]=te.primaryMovingObjects,e=r.id,n=te.canvas.positionAfterTransform[e].top-r.getBoundingRect().top,i={};return te.secondaryMovingObjects.forEach(s=>{const a=s.getBoundingRect().top+n,c=te.trackTopToIdMap[a],u=lf(te.trackTops,te.originTrack.top,a);i[c]?i[c].objects.push(s):i[c]={objects:[s],index:u}}),i}const _4=r=>{te.canvas&&te.canvas.fire("track:create",r)};function _l(r,e){return r.find(t=>{const n=t.getBoundingRect();return e.left<n.left+n.width&&e.left+e.width>n.left&&e.top<n.top+n.height&&e.top+e.height>n.top})}const x4=r=>{r.on("object:modified",Gb),r.on("object:modified",qb)},S4=r=>{r.off("object:modified",Gb),r.off("object:modified",qb)};function C4(r,e){r.remove(...e),e.length=0}function Kb(){C4(this,te.placeholderMovingObjects)}function Zb(r){const e=this.height<this.bounding.height,t=this.width<this.bounding.width;if(!e&&!t)return;const n=this.viewportTransform;let i=n[4],s=n[5];const a=2;r.e.shiftKey?i=n[4]-r.e.deltaY*a:(e&&(s=n[5]-r.e.deltaY*a),i=n[4]-r.e.deltaX*a),this.setViewportPos(i,s)}const T4=r=>{r.on("mouse:wheel",Zb),r.on("mouse:up",Kb.bind(r))},E4=r=>{r.off("mouse:wheel",Zb),r.off("mouse:up",Kb.bind(r))};function Jb(r){const e=this;if(!e)return;const t=e.getScenePoint(r.e),n=e.getObjects("Helper","Track");te.draggingOverTrack=n.find(h=>{const d=h.getBoundingRect();return t.x>=d.left&&t.x<=d.left+d.width&&t.y>=d.top&&t.y<=d.top+d.height})??null,n.forEach(h=>{if(ew(h)){const d=te.draggingOverTrack;h.setSelected(h===d)}}),te.isPointerOverHelperTrack=ew(te.draggingOverTrack),e.getObjects();const i=r.target;i.getBoundingRect(),i.setCoords();const s=[i,...e.getActiveObjects(),...e.getObjects("Track","Helper","Transition","Placeholder")],a=k4(s,e),c=A4(i);I4(a,c).forEach(h=>{h.orientation==="V"?i.left=h.lineGuide+h.offset:i.top=h.lineGuide+h.offset})}const k4=(r,e)=>{const t=[],n=[];return e.getObjects().filter(i=>i.visible).forEach(i=>{if(r.some(c=>c.id===i.id)||i.isAlignmentAuxiliary)return;const a=i.getBoundingRect();t.push(Qb(a.left,a.width,a.top,a.height)),n.push(Qb(a.top,a.height,a.left,a.width))}),{vertical:t.flat(),horizontal:[]}},Qb=(r,e,t,n)=>[r,r+e].map(i=>({val:i,start:t,end:t+n})),I4=(r,e)=>{const t=[],n=[];r.vertical.forEach(u=>{e.vertical.forEach(h=>{const d=Math.abs(u.val-h.guide);d<10&&t.push({lineGuide:u.val,diff:d,orientation:"V",snap:h.snap,offset:h.offset,targetDim:{start:u.start,end:u.end}})})}),r.horizontal.forEach(u=>{e.horizontal.forEach(h=>{const d=Math.abs(u.val-h.guide);d<10&&n.push({lineGuide:u.val,diff:d,orientation:"H",snap:h.snap,offset:h.offset,targetDim:{start:u.start,end:u.end}})})});const s=[],a=t.sort((u,h)=>u.diff-h.diff)[0],c=n.sort((u,h)=>u.diff-h.diff)[0];return a&&s.push({lineGuide:a.lineGuide,offset:a.offset,orientation:"V",snap:a.snap,targetDim:a.targetDim}),c&&s.push({lineGuide:c.lineGuide,offset:c.offset,orientation:"H",snap:c.snap,targetDim:c.targetDim}),s},A4=r=>{const e=r.getBoundingRect();return{vertical:[{guide:Math.round(e.left),offset:Math.round(r.left-e.left),snap:"start"},{guide:Math.round(e.left+e.width),offset:Math.round(r.left-e.left-e.width),snap:"end"}],horizontal:[{guide:Math.round(e.top),offset:Math.round(r.top-e.top),snap:"start"},{guide:Math.round(e.top+e.height),offset:Math.round(r.top-e.top-e.height),snap:"end"}]}},ew=r=>r instanceof Ys;function M4(r){r.opacity=te.isPointerOverHelperTrack?0:1}const tw=N4(r=>{const e=r.target.canvas;if(R4(r),!te.draggingOverTrack)return;const t=te.placeholderMovingObjects.map(s=>s.draggedObject),n=(te.trackToItemsMap[te.draggingOverTrack.id]||[]).filter(s=>!t.includes(s)),i=n.find(s=>_l(t,s.getBoundingRect()));te.placeholderMovingObjects.forEach(s=>{const a=s.draggedObject;a?.setCoords(),M4(s);const c=O4(a,n,i,te.placeholderMovingObjects.length>1);e.trackIdAfterTransform=te.trackTopToIdMap[c.top],e.positionAfterTransform[a?.id]={top:c.top,left:c.left},s.left=c.left,s.top=c.top})},5),O4=(r,e,t,n)=>!P4(r)||n&&t?rw(r):t?D4(r,t,e):L4(r),P4=r=>te.draggingOverTrack?te.draggingOverTrack.accepts?.includes(r.type)??!1:!1,rw=r=>({top:te.objectInitialPositions[r.id].top,left:te.objectInitialPositions[r.id].left}),D4=(r,e,t)=>{const n=j4(r,e);return!F4(t,r,n)||te.activeObjects.length!==1?rw(r):{left:n,top:e.top}},j4=(r,e)=>{const t=r.left+r.width/2,n=e.left+e.width/2;return t<n?e.left-r.width:e.left+e.width},F4=(r,e,t)=>!(t<0||_l(r,{...e.getBoundingRect(),left:t})),L4=r=>({left:r.getBoundingRect().left,top:te.draggingOverTrack?.top??0});function N4(r,e){let t=null;return function(...n){const i=Date.now();(t===null||i-t>=e)&&(t=i,r(...n))}}function R4(r){const e=r.target,t=e.canvas,n=e.top,i=-e.height*.75,s=t.height+e.height*.75;e.top=Math.min(Math.max(n,i),s-e.height);const a=e.left;e.left=Math.max(a,0)}const V4=r=>{r.on("object:moving",Jb.bind(r)),r.on("object:moving",tw)},B4=r=>{r.off("object:moving",Jb.bind(r)),r.off("object:moving",tw)};function nw(){const r=this,e=r.getActiveObject(),t=r.getActiveObjects().map(n=>n.id);e instanceof Dr?(e.borderColor="rgba(0, 216, 214, 0.75)",e.hasControls=!1,e.hoverCursor="default",e.borderScaleFactor=1,e.padding=0,e.getObjects().forEach(n=>{n.setSelected(!0)})):e?.setSelected(!0),this.setActiveIds(t)}function iw(r){const e=this,t=e.getActiveObject();t instanceof Dr&&(t.borderColor="transparent",t.hasControls=!1,t.hoverCursor="default"),r.selected.forEach(i=>{i.setSelected(!0)}),r.deselected.forEach(i=>{i.setSelected(!1)});const n=e.getActiveObjects().map(i=>i.id);this.setActiveIds(n)}function sw(r){this.getObjects().forEach(t=>{t.isSelected&&(t.isSelected=!1)}),r.deselected.forEach(t=>{t.setSelected(!1)});const e=this.getActiveObjects().map(t=>t.id);this.setActiveIds(e)}const z4=r=>{r.on("selection:created",nw),r.on("selection:updated",iw),r.on("selection:cleared",sw)},W4=r=>{r.off("selection:created",nw),r.off("selection:updated",iw),r.off("selection:cleared",sw)};let ow,aw,cw;const H4=r=>{const{state:e}=r;ow=e.subscribeToActiveIds(({activeIds:t})=>{if(t.length===1){const n=t[0],{trackItemIds:i,trackItemsMap:s}=e.getState();i.forEach(a=>{s[a].type}),r.selectTrackItemByIds([n])}else r.selectTrackItemByIds(t)}),aw=e.subscribeToHistory(t=>{const{tracks:n,trackItemsMap:i,trackItemIds:s,trackItemDetailsMap:a}=t;r.tracks=n,r.trackItemsMap=i,r.trackItemIds=s,r.trackItemDetailsMap=a,r.renderTracks(),r.updateTrackItemsToHistory(),r.alignItemsToTrack(),r.calcBounding(),r.updateTransitions(),r.duration=en(r.trackItemsMap)}),cw=e.subscribeToAddOrRemoveItems(()=>{const t=r.getTrackItems().map(c=>c.id),{trackItemIds:n,trackItemsMap:i,trackItemDetailsMap:s}=e.getState(),a=[];t.forEach(c=>{n.includes(c)||a.push(c)}),r.deleteTrackItemById(a),r.tracks=e.getState().tracks,r.trackItemsMap=i,r.trackItemDetailsMap=s,n.forEach(c=>{if(!t.includes(c)){const u={...i[c],details:{...s[c].details}};r.addTrackItem(u)}}),r.renderTracks(),r.alignItemsToTrack(),n.forEach(c=>{r.updateTrackItemCoords(c)}),r.updateTransitions(),r.updateTrackCoords()})},U4=r=>{ow.unsubscribe(),aw.unsubscribe(),cw.unsubscribe()};function lw(r){const{isSecondaryOverlapped:e,secondaryTracks:t,primaryTracks:n,primaryPositions:i}=r,{trackId:s,positions:a}=i,c=this.tracks.findIndex(y=>y.id===s),u=lh(Object.keys(t).map(y=>t[y].objects.map(b=>b.id))),h=xo(this.tracks,[...Object.keys(a),...u]);Object.keys(n).forEach(y=>{this.pauseEventListeners();const{objects:b}=n[y];b.forEach(S=>{const T=a[S.id];S.left=T.left}),this.resumeEventListeners();const x=h.find(S=>S.id===s);x&&x.items.push(...Object.keys(a)),this.tracks=h});const d=this.tracks[c],g=[];Object.keys(t).forEach(y=>{const{objects:b,index:x}=t[y],S=b.map(I=>I.id),[T]=S,k=this.trackItemsMap[T];if(e){const I={id:Et(),items:S,type:k.type,accepts:this.acceptsMap?.[k.type],tempIndex:x};g.push(I)}else{const I=h[c+x];I&&I.items.push(...S),this.tracks=h}});const p=uh(d,g);p.length&&h.splice(c,1,...p),this.tracks=h,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}function uw({trackItemIds:r,isOverlapped:e}){const[t]=r;if(t){if(!this.getObjects("Transition").find(n=>n.id===t)){const n=this.tracks.find(i=>i.items.includes(t));if(e){const i=$4(this.tracks,r),s={id:Et(),items:[t],type:n?.type,accepts:n?.accepts},a=this.tracks.findIndex(c=>c.id===n?.id);i.splice(a,0,s),this.tracks=i}}this.renderTracks(),this.alignItemsToTrack(),this.alignTransitionsToTrack(),this.updateTransitions(),this.updateTrackItemsPosition(),this.updateState({updateHistory:!0,kind:"update"})}}function $4(r,e){return r.map(t=>({...t,items:t.items.filter(n=>!e.includes(n))}))}function hw(r){const{secondaryTracks:e,primaryTracks:t,primaryPositions:n}=r,{positions:i,trackIndex:s}=n,a=s===-1?this.tracks.length:s,[c]=Object.keys(t),u=this.tracks.find(x=>x.id==c),h=t[c],d={id:Et(),items:h.objects.map(x=>x.id),type:u?.type,accepts:u?.accepts},g=lh(Object.keys(e).map(x=>e[x].objects.map(S=>S.id))),p=xo(this.tracks,[...Object.keys(i),...g]),y=[];Object.keys(e).forEach(x=>{const{objects:S,index:T}=e[x],k=this.tracks.find(F=>F.id==x),I=S.map(F=>F.id),M={id:Et(),items:I,type:k?.type,accepts:k?.accepts,tempIndex:T};y.push(M)});const b=uh(d,y);b.length&&p.splice(a,0,...b),this.tracks=p,this.renderTracks(),this.alignItemsToTrack(),this.updateTrackItemsPosition(),this.updateTransitions(),this.updateState({updateHistory:!0,kind:"update"})}const Y4=r=>{r.on("track:create",hw.bind(r)),r.on("track-items:resized",uw.bind(r)),r.on("track-items:moved",lw.bind(r))},X4=r=>{r.off("track:create",hw.bind(r)),r.off("track-items:resized",uw.bind(r)),r.off("track-items:moved",lw.bind(r))},dw=r=>{g4(r),x4(r),T4(r),V4(r),Y4(r),z4(r),fP(r),H4(r)},fw=r=>{p4(r),S4(r),E4(r),B4(r),X4(r),W4(r),gP(r),U4()},G4={video:["*"],image:["*"],audio:["*"],text:["*"]},q4=["video","image","audio","text"];let xl=class extends Ud{acceptsMap;tracks=[];trackItemsMap={};trackItemIds=[];transitionIds=[];transitionsMap={};trackItemDetailsMap={};bounding;onScroll;tScale;store;state;activeIds=[];spacing;scale;sizesMap;duration;setupFabricDefaults(){Ze.ownDefaults.borderColor="transparent",Ze.ownDefaults.cornerColor="white",Ze.ownDefaults.cornerStrokeColor="transparent",Ze.ownDefaults.strokeWidth=0,Ze.ownDefaults.borderOpacityWhenMoving=1,Ze.ownDefaults.borderScaleFactor=1,Ze.ownDefaults.cornerSize=8,Ze.ownDefaults.cornerStyle="rect",Ze.ownDefaults.centeredScaling=!1,Ze.ownDefaults.centeredRotation=!0,Ze.ownDefaults.transparentCorners=!1}constructor(e,t){super(e,t),this.bounding=t.bounding||{width:t.width||0,height:t.height||0},this.spacing={left:16,right:80,...t.spacing};const n=this.viewportTransform;n[4]=this.spacing.left,this.tScale=t.tScale||1/300,this.store=t.store,this.state=t.state,this.scale=t.scale,this.onScroll=t.onScroll,this.acceptsMap=this.createAcceptsItemMap(t.acceptsMap),this.sizesMap=bb(t.sizesMap),this.setupFabricDefaults(),this.initEventListeners()}createAcceptsItemMap(e=G4){const t={};return Object.keys(e).forEach(n=>{const i=e[n];t[n]=i.includes("*")?q4:i}),t}setActiveIds(e){this.activeIds=e,this.getObjects("Transition").some(n=>e.includes(n.id))||(this.state?.updateState({activeIds:We.cloneDeep(this.activeIds)}),Ne.dispatch(om,{payload:{activeIds:this.activeIds}}))}purge(){fw(this),this.dispose()}static registerItems(e){Object.keys(e).forEach(t=>{ie.setClass(e[t],t)})}initEventListeners(){dw(this)}getUpdatedState(){const e=en(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,scale:this.scale,duration:e}}getState(){const e=en(this.trackItemsMap);return{tracks:this.tracks,trackItemIds:this.trackItemIds,trackItemsMap:this.trackItemsMap,transitionIds:this.transitionIds,transitionsMap:this.transitionsMap,trackItemDetailsMap:this.trackItemDetailsMap,scale:this.scale,duration:e}}notify(e={updateHistory:!1}){const t=this.getUpdatedState();this.state.updateState(t,e)}updateState(e){this.updateTracksState(),this.updateTrackItemsState(),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords();const t=this.getUpdatedState();this.state.updateState(t,e)}scrollTo({scrollLeft:e,scrollTop:t}){const n=[...this.viewportTransform];let i=!1;if(typeof e=="number"&&(n[4]=-e+this.spacing.left,i=!0),typeof t=="number"&&(n[5]=-t,i=!0),i){this.viewportTransform=n;const s=this.getActiveObject();s&&s.setCoords(),this.requestRenderAll()}}setBoundingBox(e){this.bounding=e}calcBounding(){const e=this.getTrackItems().reduce((t,n)=>{const{left:i,top:s,width:a,height:c}=n.getBoundingRect();return{left:Math.min(t.left,i),top:Math.min(t.top,s),width:Math.max(t.width,i+a),height:Math.max(t.height,s+c)}},{left:1/0,top:1/0,width:this.width,height:0});this.bounding=e,Ne.dispatch(qu,{payload:{bounding:e}})}setScale(e){this.pauseEventListeners(),this.tScale=e.zoom,this.scale=e;const t=this.getState();this.getObjects("Video","Image","Text","Audio").forEach(n=>{const i=t.trackItemsMap[n.id],{from:s,to:a}=i.display,c=yt(s,this.tScale),u=yt(a-s,this.tScale,n.playbackRate);n.set({left:c,width:u,tScale:e.zoom}),n.setCoords()}),this.requestRenderAll(),this.calcBounding(),this.updateTrackCoords(),this.updateTransitions(!1),this.resumeEventListeners(),this.notify()}setViewportPos(e,t){const n=this.getViewportPos(e,t),i=this.viewportTransform;i[4]=n.x,i[5]=n.y,this.requestRenderAll(),this.setActiveTrackItemCoords();const s=this.onScroll;s&&s.call(this,{scrollTop:n.y,scrollLeft:n.x-this.spacing.left})}getViewportPos(e,t){const n=this.bounding.width-100>=this.width?this.spacing.right:0,i=this.width-this.bounding.width-n,s=this.spacing.left,a=Math.max(i,Math.min(e,s));if(this.bounding.height<this.height)return{x:a,y:0};const c=this.height-this.bounding.height-40,u=Math.max(c,Math.min(t,0));return{x:a,y:u}}};ib(xl,[qy,Tb,kb,Ab]);function gw(r){const e=Ne.subject.pipe(Si(({key:t})=>t.startsWith(cm))).subscribe(t=>{if(t.key===Xu){const n=t.value;r.setScale(n?.payload.scale??void 0)}});return{unsubscribe:()=>{e.unsubscribe()}}}xl.registerItems({Text:af,Image:xb,Video:_b,Audio:wb,Track:Sb,Helper:Cb});const K4=({stateManager:r})=>{const e=v.useRef(!1),[t,n]=v.useState(0),i=v.useRef(null),s=v.useRef(null),a=v.useRef(null),c=v.useRef(null),u=v.useRef(null),[h,d]=v.useState({width:0,height:0}),[g,p]=v.useState({width:0,height:0}),{scale:y,playerRef:b,fps:x,setState:S,timeline:T}=qn(),{setTimeline:k}=qn(),I=Xa(b??void 0),M=R=>{u.current&&c.current&&(c.current.scrollTop=-R.scrollTop,u.current.scrollLeft=-R.scrollLeft,n(-R.scrollLeft))};v.useEffect(()=>{const R=yt(I/x*1e3,y.zoom),X=s.current?.getBoundingClientRect().x+s.current?.clientWidth;if(R-t+40>=X){const K=u.current?.clientWidth,$=u.current?.scrollWidth,G=u.current?.scrollLeft,fe=($-(K+G))/K;fe>=0&&(fe>1?u.current?.scrollTo({left:G+K}):u.current?.scrollTo({left:$-K}))}},[I]),v.useEffect(()=>{const R=s.current,X=i.current;if(!R||!X)return;const U=X.clientWidth,K=X.clientHeight,$=new xl(R,{width:U,height:K,bounding:{width:U,height:0},selectionColor:"rgba(0, 216, 214,0.1)",selectionBorderColor:"rgba(0, 216, 214,1.0)",onScroll:M,state:r,scale:y,spacing:{left:Ya,right:ah}}),G=gw($);a.current=$,d({width:U,height:K}),p({width:U,height:0}),k($);const re=r.subscribeToSize(ne=>{S(ne)}),fe=r.subscribeToScale(ne=>{S(ne)}),Q=r.subscribeToTracks(ne=>{S(ne)}),ue=r.subscribeToDuration(ne=>{S(ne)}),oe=r.subscribeToUpdateTrackItem(()=>{const ne=r.getState();S({duration:ne.duration,trackItemsMap:ne.trackItemsMap})}),se=r.subscribeToAddOrRemoveItems(()=>{const ne=r.getState();S({trackItemDetailsMap:ne.trackItemDetailsMap,trackItemsMap:ne.trackItemsMap,trackItemIds:ne.trackItemIds,tracks:ne.tracks})}),de=r.subscribeToUpdateItemDetails(()=>{const ne=r.getState();S({trackItemDetailsMap:ne.trackItemDetailsMap})});return()=>{G.unsubscribe(),$.purge(),fe.unsubscribe(),Q.unsubscribe(),ue.unsubscribe(),se.unsubscribe(),oe.unsubscribe(),de.unsubscribe(),re.unsubscribe()}},[]),v.useEffect(()=>{const X=Ne.subject.pipe(Si(({key:U})=>U.startsWith(um))).subscribe(U=>{if(U.key===qu){const K=U.value?.payload?.bounding;K&&p({width:K.width,height:K.height})}});return()=>{X.unsubscribe()}},[]);const F=R=>{const X=R.currentTarget.scrollLeft;e.current&&a.current.scrollTo({scrollLeft:X}),n(X)},N=R=>{const X=R.currentTarget.scrollTop;e.current&&a.current.scrollTo({scrollTop:X})};v.useEffect(()=>{const R=u.current?.scrollWidth;if(!R||!T)return;const X=T.width;R<X+t&&T.scrollTo({scrollLeft:R-X})},[y]);const W=R=>{if(!a.current)return;const U=Gn(R,y.zoom);b?.current?.seekTo(U*x/1e3)};return w.jsxs("div",{className:"relative overflow-hidden h-80 w-full",children:[w.jsx(Xm,{}),w.jsx(Dv,{onClick:W,scrollLeft:t}),w.jsx(Pv,{scrollLeft:t}),w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"relative w-10 flex-none"}),w.jsxs("div",{className:"relative h-[230px] flex-1",children:[w.jsx("div",{ref:i,className:"absolute top-0 h-[230px] w-full text-sm text-white ",children:w.jsx("canvas",{ref:s,id:"designcombo-timeline-canvas"})}),w.jsxs(Ra,{type:"always",style:{position:"absolute",width:"calc(100vw - 40px)",height:"10px"},className:"ScrollAreaRootH",children:[w.jsx(ju,{onScroll:F,className:"ScrollAreaViewport",id:"viewportH",ref:u,children:w.jsx("div",{style:{width:g.width>h.width?g.width+ah:g.width},className:"pointer-events-none h-[10px]"})}),w.jsx(Dp,{className:"ScrollAreaScrollbar",orientation:"horizontal",children:w.jsx(jp,{className:"ScrollAreaThumb",onMouseDown:()=>{e.current=!0},onMouseUp:()=>{e.current=!1}})})]}),w.jsxs(Ra,{type:"always",style:{position:"absolute",height:"230px",width:"10px"},className:"ScrollAreaRootV",children:[w.jsx(ju,{onScroll:N,className:"ScrollAreaViewport",ref:c,children:w.jsx("div",{style:{height:g.height>h.height?g.height+40:h.height},className:"pointer-events-none w-[10px]"})}),w.jsx(Dp,{className:"ScrollAreaScrollbar",orientation:"vertical",children:w.jsx(jp,{className:"ScrollAreaThumb",onMouseDown:()=>{e.current=!0},onMouseUp:()=>{e.current=!1}})})]})]})]})]})},Z4={Date:!0,RegExp:!0,String:!0,Number:!0};function pw(r,e,t={cyclesFix:!0},n=[]){let i=[];const s=Array.isArray(r);for(const c in r){const u=r[c],h=s?+c:c;if(!(c in e)){i.push({type:"REMOVE",path:[h],oldValue:r[c]});continue}const d=e[c],g=typeof u=="object"&&typeof d=="object"&&Array.isArray(u)===Array.isArray(d);u&&d&&g&&!Z4[Object.getPrototypeOf(u)?.constructor?.name]&&(!t.cyclesFix||!n.includes(u))?i.push.apply(i,pw(u,d,t,t.cyclesFix?n.concat([u]):[]).map(p=>(p.path.unshift(h),p))):u!==d&&!(Number.isNaN(u)&&Number.isNaN(d))&&!(g&&(isNaN(u)?u+""==d+"":+u==+d))&&i.push({path:[h],type:"CHANGE",value:d,oldValue:u})}const a=Array.isArray(e);for(const c in e)c in r||i.push({type:"CREATE",path:[a?+c:c],value:e[c]});return i}var yf=Symbol.for("immer-nothing"),oa=Symbol.for("immer-draftable"),yr=Symbol.for("immer-state"),mw=process.env.NODE_ENV!=="production"?[function(r){return`The plugin for '${r}' has not been loaded into Immer. To enable the plugin, import and call \`enable${r}()\` when initializing your application.`},function(r){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${r}'`},"This object has been frozen and should not be mutated",function(r){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+r},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(r){return`'current' expects a draft, got: ${r}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(r){return`'original' expects a draft, got: ${r}`}]:[];function At(r,...e){if(process.env.NODE_ENV!=="production"){const t=mw[r],n=typeof t=="function"?t.apply(null,e):t;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Ki=Object.getPrototypeOf;function Zi(r){return!!r&&!!r[yr]}function hi(r){return r?vw(r)||Array.isArray(r)||!!r[oa]||!!r.constructor?.[oa]||la(r)||ua(r):!1}var J4=Object.prototype.constructor.toString();function vw(r){if(!r||typeof r!="object")return!1;const e=Ki(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===J4}function aa(r,e){Ji(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,n)=>e(n,t,r))}function Ji(r){const e=r[yr];return e?e.type_:Array.isArray(r)?1:la(r)?2:ua(r)?3:0}function ca(r,e){return Ji(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function bf(r,e){return Ji(r)===2?r.get(e):r[e]}function yw(r,e,t){const n=Ji(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function Q4(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function la(r){return r instanceof Map}function ua(r){return r instanceof Set}function Qi(r){return r.copy_||r.base_}function wf(r,e){if(la(r))return new Map(r);if(ua(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=vw(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[yr];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const a=i[s],c=n[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:r[a]})}return Object.create(Ki(r),n)}else{const n=Ki(r);if(n!==null&&t)return{...r};const i=Object.create(n);return Object.assign(i,r)}}function _f(r,e=!1){return Sl(r)||Zi(r)||!hi(r)||(Ji(r)>1&&(r.set=r.add=r.clear=r.delete=e3),Object.freeze(r),e&&Object.entries(r).forEach(([t,n])=>_f(n,!0))),r}function e3(){At(2)}function Sl(r){return Object.isFrozen(r)}var xf={};function es(r){const e=xf[r];return e||At(0,r),e}function t3(r,e){xf[r]||(xf[r]=e)}var ha;function bw(){return ha}function r3(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ww(r,e){e&&(es("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function Sf(r){Cf(r),r.drafts_.forEach(n3),r.drafts_=null}function Cf(r){r===ha&&(ha=r.parent_)}function _w(r){return ha=r3(ha,r)}function n3(r){const e=r[yr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function xw(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[yr].modified_&&(Sf(e),At(4)),hi(r)&&(r=Cl(e,r),e.parent_||Tl(e,r)),e.patches_&&es("Patches").generateReplacementPatches_(t[yr].base_,r,e.patches_,e.inversePatches_)):r=Cl(e,t,[]),Sf(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==yf?r:void 0}function Cl(r,e,t){if(Sl(e))return e;const n=e[yr];if(!n)return aa(e,(i,s)=>Sw(r,n,e,i,s,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return Tl(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let s=i,a=!1;n.type_===3&&(s=new Set(i),i.clear(),a=!0),aa(s,(c,u)=>Sw(r,n,i,c,u,t,a)),Tl(r,i,!1),t&&r.patches_&&es("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function Sw(r,e,t,n,i,s,a){if(process.env.NODE_ENV!=="production"&&i===t&&At(5),Zi(i)){const c=s&&e&&e.type_!==3&&!ca(e.assigned_,n)?s.concat(n):void 0,u=Cl(r,i,c);if(yw(t,n,u),Zi(u))r.canAutoFreeze_=!1;else return}else a&&t.add(i);if(hi(i)&&!Sl(i)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;Cl(r,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&Tl(r,i)}}function Tl(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&_f(e,t)}function i3(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:bw(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=Tf;t&&(i=[n],s=da);const{revoke:a,proxy:c}=Proxy.revocable(i,s);return n.draft_=c,n.revoke_=a,c}var Tf={get(r,e){if(e===yr)return r;const t=Qi(r);if(!ca(t,e))return s3(r,t,e);const n=t[e];return r.finalized_||!hi(n)?n:n===Ef(r.base_,e)?(If(r),r.copy_[e]=Af(n,r)):n},has(r,e){return e in Qi(r)},ownKeys(r){return Reflect.ownKeys(Qi(r))},set(r,e,t){const n=Cw(Qi(r),e);if(n?.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const i=Ef(Qi(r),e),s=i?.[yr];if(s&&s.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(Q4(t,i)&&(t!==void 0||ca(r.base_,e)))return!0;If(r),kf(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return Ef(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,If(r),kf(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=Qi(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){At(11)},getPrototypeOf(r){return Ki(r.base_)},setPrototypeOf(){At(12)}},da={};aa(Tf,(r,e)=>{da[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),da.deleteProperty=function(r,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&At(13),da.set.call(this,r,e,void 0)},da.set=function(r,e,t){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&At(14),Tf.set.call(this,r[0],e,t,r[0])};function Ef(r,e){const t=r[yr];return(t?Qi(t):r)[e]}function s3(r,e,t){const n=Cw(e,t);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function Cw(r,e){if(!(e in r))return;let t=Ki(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Ki(t)}}function kf(r){r.modified_||(r.modified_=!0,r.parent_&&kf(r.parent_))}function If(r){r.copy_||(r.copy_=wf(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var o3=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(u=s,...h){return a.produce(u,d=>t.call(this,d,...h))}}typeof t!="function"&&At(6),n!==void 0&&typeof n!="function"&&At(7);let i;if(hi(e)){const s=_w(this),a=Af(e,void 0);let c=!0;try{i=t(a),c=!1}finally{c?Sf(s):Cf(s)}return ww(s,n),xw(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===yf&&(i=void 0),this.autoFreeze_&&_f(i,!0),n){const s=[],a=[];es("Patches").generateReplacementPatches_(e,i,s,a),n(s,a)}return i}else At(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...c)=>this.produceWithPatches(a,u=>e(u,...c));let n,i;return[this.produce(e,t,(a,c)=>{n=a,i=c}),n,i]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){hi(r)||At(8),Zi(r)&&(r=a3(r));const e=_w(this),t=Af(r,void 0);return t[yr].isManual_=!0,Cf(e),t}finishDraft(r,e){const t=r&&r[yr];(!t||!t.isManual_)&&At(9);const{scope_:n}=t;return ww(n,e),xw(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}t>-1&&(e=e.slice(t+1));const n=es("Patches").applyPatches_;return Zi(r)?n(r,e):this.produce(r,i=>n(i,e))}};function Af(r,e){const t=la(r)?es("MapSet").proxyMap_(r,e):ua(r)?es("MapSet").proxySet_(r,e):i3(r,e);return(e?e.scope_:bw()).drafts_.push(t),t}function a3(r){return Zi(r)||At(10,r),Tw(r)}function Tw(r){if(!hi(r)||Sl(r))return r;const e=r[yr];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=wf(r,e.scope_.immer_.useStrictShallowCopy_)}else t=wf(r,!0);return aa(t,(n,i)=>{yw(t,n,Tw(i))}),e&&(e.finalized_=!1),t}function Ew(){process.env.NODE_ENV!=="production"&&mw.push('Sets cannot have "replace" patches.',function(p){return"Unsupported patch operation: "+p},function(p){return"Cannot apply patch, path doesn't resolve: "+p},"Patching reserved attributes like __proto__, prototype and constructor is not allowed");const e="replace",t="add",n="remove";function i(p,y,b,x){switch(p.type_){case 0:case 2:return a(p,y,b,x);case 1:return s(p,y,b,x);case 3:return c(p,y,b,x)}}function s(p,y,b,x){let{base_:S,assigned_:T}=p,k=p.copy_;k.length<S.length&&([S,k]=[k,S],[b,x]=[x,b]);for(let I=0;I<S.length;I++)if(T[I]&&k[I]!==S[I]){const M=y.concat([I]);b.push({op:e,path:M,value:g(k[I])}),x.push({op:e,path:M,value:g(S[I])})}for(let I=S.length;I<k.length;I++){const M=y.concat([I]);b.push({op:t,path:M,value:g(k[I])})}for(let I=k.length-1;S.length<=I;--I){const M=y.concat([I]);x.push({op:n,path:M})}}function a(p,y,b,x){const{base_:S,copy_:T}=p;aa(p.assigned_,(k,I)=>{const M=bf(S,k),F=bf(T,k),N=I?ca(S,k)?e:t:n;if(M===F&&N===e)return;const W=y.concat(k);b.push(N===n?{op:N,path:W}:{op:N,path:W,value:F}),x.push(N===t?{op:n,path:W}:N===n?{op:t,path:W,value:g(M)}:{op:e,path:W,value:g(M)})})}function c(p,y,b,x){let{base_:S,copy_:T}=p,k=0;S.forEach(I=>{if(!T.has(I)){const M=y.concat([k]);b.push({op:n,path:M,value:I}),x.unshift({op:t,path:M,value:I})}k++}),k=0,T.forEach(I=>{if(!S.has(I)){const M=y.concat([k]);b.push({op:t,path:M,value:I}),x.unshift({op:n,path:M,value:I})}k++})}function u(p,y,b,x){b.push({op:e,path:[],value:y===yf?void 0:y}),x.push({op:e,path:[],value:p})}function h(p,y){return y.forEach(b=>{const{path:x,op:S}=b;let T=p;for(let F=0;F<x.length-1;F++){const N=Ji(T);let W=x[F];typeof W!="string"&&typeof W!="number"&&(W=""+W),(N===0||N===1)&&(W==="__proto__"||W==="constructor")&&At(19),typeof T=="function"&&W==="prototype"&&At(19),T=bf(T,W),typeof T!="object"&&At(18,x.join("/"))}const k=Ji(T),I=d(b.value),M=x[x.length-1];switch(S){case e:switch(k){case 2:return T.set(M,I);case 3:At(16);default:return T[M]=I}case t:switch(k){case 1:return M==="-"?T.push(I):T.splice(M,0,I);case 2:return T.set(M,I);case 3:return T.add(I);default:return T[M]=I}case n:switch(k){case 1:return T.splice(M,1);case 2:return T.delete(M);case 3:return T.delete(b.value);default:return delete T[M]}default:At(17,S)}}),p}function d(p){if(!hi(p))return p;if(Array.isArray(p))return p.map(d);if(la(p))return new Map(Array.from(p.entries()).map(([b,x])=>[b,d(x)]));if(ua(p))return new Set(Array.from(p).map(d));const y=Object.create(Ki(p));for(const b in p)y[b]=d(p[b]);return ca(p,oa)&&(y[oa]=p[oa]),y}function g(p){return Zi(p)?d(p):p}t3("Patches",{applyPatches_:h,generatePatches_:i,generateReplacementPatches_:u})}var br=new o3,c3=br.produce;br.produceWithPatches.bind(br),br.setAutoFreeze.bind(br),br.setUseStrictShallowCopy.bind(br);var l3=br.applyPatches.bind(br);br.createDraft.bind(br),br.finishDraft.bind(br);function u3(r){const e=r.value,t=[];if(e?.payload?.trackItemIds){const n=e.payload.trackItemIds;t.push(n),this.updateState({activeIds:t})}if(r.key===Wu){const n=r.value?.payload.trackItemIds,i=We.cloneDeep(this.getState()),s=n?.length?n:i.activeIds,a=i.trackItemIds.filter(g=>!s.includes(g)),c=Object.fromEntries(Object.entries(i.trackItemDetailsMap).filter(([g])=>!s.includes(g))),u=ub(i.tracks,s),h=Object.fromEntries(Object.entries(i.trackItemsMap).filter(([g])=>!s.includes(g))),d=en(h);this.updateState({trackItemIds:a,trackItemDetailsMap:c,activeIds:[],trackItemsMap:h,tracks:u,duration:d},{updateHistory:!0,kind:"remove"})}if(r.key===Hu){const n=We.cloneDeep(this.getState()),i=[],s=r.value?.payload.trackItemIds||n.activeIds;if(s.length===0)return;s.forEach(c=>{const u=n.trackItemsMap[c],h=n.trackItemDetailsMap[c],d=Et();i.push(d),n.trackItemsMap={...n.trackItemsMap,[d]:{...We.cloneDeep(u),id:d}},n.trackItemDetailsMap={...n.trackItemDetailsMap,[d]:{...We.cloneDeep(h)}},n.trackItemIds.push(d)});const a=n.tracks.map(c=>{const u={...c,id:Et(),items:c.items.filter(h=>s.includes(h)).map(h=>{const d=s.indexOf(h);return i[d]})};return u.items.length?u:null}).filter(Boolean);n.tracks.unshift(...a),this.updateState({trackItemDetailsMap:n.trackItemDetailsMap,tracks:n.tracks,trackItemIds:n.trackItemIds,trackItemsMap:n.trackItemsMap},{updateHistory:!0,kind:"update"})}if(r.key===Uu){const n=We.cloneDeep(this.getState()),i=r.value?.options.time;if(n.activeIds.length!==1)return;const s=n.activeIds[0],a=n.trackItemsMap[s];if(i<=a.display.from||i>=a.display.to)return;const c=Et(),u={...a,id:c,display:{from:i,to:a.display.to},trim:{from:i,to:a.display.to}};n.trackItemsMap[s].display.to=i,n.trackItemsMap[c]=u,n.trackItemDetailsMap[c]=n.trackItemDetailsMap[s],n.trackItemIds.push(c),n.tracks.forEach(h=>{h.items.includes(s)&&h.items.push(c)}),this.updateState({trackItemsMap:n.trackItemsMap,trackItemDetailsMap:n.trackItemDetailsMap,trackItemIds:n.trackItemIds,tracks:n.tracks},{updateHistory:!0,kind:"update"})}}async function h3(r){if(r.key==="scene:load"){const e=r.value?.payload,t=e.size,n=e.trackItemIds,i=e.trackItemsMap,s=e.trackItemDetailsMap;if(!n)return;const a=n?.map(async u=>{try{const h=s[u],d=i[u];if(h.type==="text"){const g=await of({id:u,details:h.details,...d},{size:t}),{details:p,...y}=g;s[u]={type:"text",details:p},i[u]=y}return!0}catch{return!1}});await Promise.all(a);const c=en(i);this.updateState({...e,trackItemsMap:i,duration:c})}}async function d3(r){const e=We.cloneDeep(this.getState()),t=r.value?.options?.trackId,n=r.value?.options?.trackIndex;let i=[],s;if(r.key===vs){s="video";const c=await db(r.value?.payload,{size:e.size}),{details:u,...h}=c;e.trackItemDetailsMap[h.id]={type:s,details:u},e.trackItemsMap[h.id]=h,e.trackItemIds.push(h.id),i=[h.id]}if(r.key===bs){s="image";const c=await hb(r.value?.payload,{size:e.size}),{details:u,...h}=c;e.trackItemDetailsMap[h.id]={type:s,details:u},e.trackItemsMap[h.id]=h,e.trackItemIds.push(h.id),i=[h.id]}if(r.key===ys){s="audio";const c=await fb(r.value?.payload),{details:u,...h}=c;e.trackItemDetailsMap[h.id]={type:s,details:u},e.trackItemsMap[h.id]=h,e.trackItemIds.push(h.id),i=[h.id]}if(r.key===zu){s="text";const{details:c,...u}=await of(r.value?.payload??void 0,{size:e.size});e.trackItemDetailsMap[u.id]={type:s,details:c},e.trackItemsMap[u.id]=u,e.trackItemIds.push(u.id),i.push(u.id)}const a=f3(i,e.tracks,e.trackItemsMap,t,n);if(a.trackId)e.tracks.find(u=>u.id===a.trackId)?.items.push(...i);else if(a.trackIndex!==void 0){const c=kw(s,i);e.tracks.splice(a.trackIndex,0,c)}else{const c=kw(s,i);e.tracks.unshift(c)}e.duration=en(e.trackItemsMap),this.updateState({trackItemIds:e.trackItemIds,trackItemDetailsMap:e.trackItemDetailsMap,trackItemsMap:e.trackItemsMap,tracks:e.tracks,duration:e.duration,structure:e.structure},{updateHistory:!0,kind:"add"})}function kw(r,e){return{id:Et(),accepts:["text","audio","helper","video","image"],type:r,items:e,magnetic:!1,static:!1}}const f3=(r,e,t,n,i)=>{if(n===void 0&&i===void 0)return{trackId:void 0,trackIndex:void 0};const s=i!==void 0?e[Math.max(0,Math.min(i,e.length-1))]:e.find(u=>u.id===n);if(!s)return{trackId:void 0,trackIndex:i!==void 0?Math.max(0,Math.min(i,e.length-1)):void 0};const a=s.items.map(u=>t[u]),c=r.map(u=>t[u]);for(const u of a){const h=u.display.from,d=u.display.to;for(const g of c){const p=g.display.from;if(!(g.display.to<=h||p>=d))return{trackId:void 0,trackIndex:e.indexOf(s)}}}return{trackId:s.id,trackIndex:e.indexOf(s)}},Iw=["tracks","trackItemsMap","trackItemDetailsMap","transitionIds","transitionsMap","trackItemIds"],g3={size:{width:1080,height:1920},tracks:[],trackItemIds:[],trackItemsMap:{},transitionIds:[],transitionsMap:{},scale:{unit:1,zoom:1,segments:1,index:1},duration:0,activeIds:[],trackItemDetailsMap:{},structure:[]};class p3{stateSubject;stateHistorySubject;prevState;undos;redos;listener;constructor(e){this.stateSubject=null,this.stateHistorySubject=null,this.prevState=null,this.undos=[],this.redos=[],this.listener=null;const t=e||g3;this.stateSubject=new bm(t),this.stateHistorySubject=new bm({handleRedo:!1,handleUndo:!1}),this.prevState=t,this.initListeners()}initListeners(){Aw(this)}destroyListeners(){this.listener&&this.listener.unsubscribe()}purge(){this.destroyListeners()}updateHistory(e,t){const n=We.pick(e,Iw),i=We.pick(this.getState(),Iw),s=pw(i,n);s.length&&(this.undos.push({undos:s,type:t}),this.redos=[])}getStateHistory(){return this.stateHistorySubject.getValue()}subscribeHistory(e){return this.stateHistorySubject.subscribe(e)}getState(){return this.stateSubject.getValue()}subscribe(e){return this.stateSubject.subscribe(e)}updateState(e,t={updateHistory:!1,kind:void 0}){const n=this.getState(),i={...n,...e};if(!We.isEqual(n,i)){t.updateHistory&&this.updateHistory(i,t.kind);const{duration:s,trackItemsMap:a,...c}=n;this.prevState={...c,duration:this.prevState.duration,trackItemsMap:this.prevState.trackItemsMap},this.stateSubject.next(i)}}subscribeToSize(e){return this.stateSubject.asObservable().subscribe(t=>{We.isEqual(t.size,this.prevState.size)||e({size:t.size})})}subscribeToScale(e){return this.stateSubject.asObservable().subscribe(t=>{We.isEqual(t.scale,this.prevState.scale)||e({scale:t.scale})})}subscribeToUpdateTrackItem(e){return this.stateSubject.asObservable().subscribe(t=>{We.isEqual(t.trackItemsMap,this.prevState.trackItemsMap)||e({trackItemsMap:t.trackItemsMap})})}subscribeToUpdateItemDetails(e){return this.stateSubject.asObservable().subscribe(t=>{We.isEqual(t.trackItemDetailsMap,this.prevState.trackItemDetailsMap)||e({trackItemDetailsMap:t.trackItemDetailsMap})})}subscribeToDuration(e){return this.stateSubject.asObservable().subscribe(t=>{t.duration!==this.prevState.duration&&e({duration:t.duration})})}subscribeToHistory(e){return this.stateHistorySubject.asObservable().subscribe(t=>{if(t.handleRedo){const n=this.undos[this.undos.length-1]?.type;n==="update"&&e({...this.getState(),type:n}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}if(t.handleUndo){const n=this.redos[this.redos.length-1]?.type;n==="update"&&e({...this.getState(),type:n}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!1})}})}subscribeToAddOrRemoveItems(e){return this.stateSubject.asObservable().subscribe(t=>{(!t.trackItemIds?.every(n=>this.prevState.trackItemIds?.includes(n))||!We.isEqual(t.tracks,this.prevState.tracks))&&e({trackItemIds:t.trackItemIds})})}subscribeToActiveIds(e){return this.stateSubject.asObservable().subscribe(t=>{We.isEqual(t.activeIds,this.prevState.activeIds)||e({activeIds:t.activeIds})})}subscribeToTracks(e){return this.stateSubject.asObservable().subscribe(t=>{(!We.isEqual(t.tracks,this.prevState.tracks)||!We.isEqual(t.trackItemIds,this.prevState.trackItemIds)||!We.isEqual(t.trackItemsMap,this.prevState.trackItemsMap)||!We.isEqual(t.transitionIds,this.prevState.transitionIds)||!We.isEqual(t.transitionsMap,this.prevState.transitionsMap)||!We.isEqual(t.trackItemDetailsMap,this.prevState.trackItemDetailsMap))&&e({tracks:t.tracks,trackItemIds:t.trackItemIds,trackItemsMap:t.trackItemsMap,transitionIds:t.transitionIds,transitionsMap:t.transitionsMap,trackItemDetailsMap:t.trackItemDetailsMap})})}undo(){const e=this.undos.pop(),t=e?.undos,n=e?.type;if(!t||!n)return;Ew();const{trackItemDetailsMap:i,trackItemIds:s,tracks:a,transitionIds:c,transitionsMap:u,trackItemsMap:h}=this.getState(),d=We.cloneDeep({trackItemDetailsMap:i,trackItemIds:s,tracks:a,transitionIds:c,transitionsMap:u,trackItemsMap:h}),g=[],p=[],y=[],b=[],x=[],S=[];t.forEach($=>{let G;const re=$.path.slice(1);$.type==="CREATE"?G={path:re,op:"remove",value:$.value}:$.type==="CHANGE"?G={path:re,op:"replace",value:$.oldValue}:G={path:re,op:"add",value:$.oldValue},$.path.includes("trackItemIds")?y.push(G):$.path.includes("transitionIds")?p.push(G):$.path.includes("trackItemsMap")?x.push(G):$.path.includes("transitionsMap")?b.push(G):$.path.includes("tracks")?g.push(G):$.path.includes("trackItemDetailsMap")&&S.push(G)});const T=this.applyPatch(d.tracks,g),k=this.applyPatch(d.transitionIds,p),I=this.applyPatch(d.trackItemIds,y),M=this.applyPatch(d.transitionsMap,b),F=this.applyPatch(d.trackItemsMap,x),N=this.applyPatch(d.trackItemDetailsMap,S),W=We.cloneDeep({tracks:T,transitionIds:k,trackItemIds:I,transitionsMap:M,trackItemsMap:F,trackItemDetailsMap:N}),R=We.cloneDeep(this.getState()),X={...R,...W};this.prevState=R;const U={redos:t,type:n};this.redos.push(U);const K=en(X.trackItemsMap);this.stateSubject.next({...X,duration:K}),this.stateHistorySubject.next({handleRedo:!1,handleUndo:!0})}redo(){const e=this.redos.pop();if(!e?.redos||!e?.type)return;Ew();const t=this.getState(),{trackItemDetailsMap:n,trackItemIds:i,tracks:s,transitionIds:a,transitionsMap:c,trackItemsMap:u}=t,h=We.cloneDeep({trackItemDetailsMap:n,trackItemIds:i,tracks:s,transitionIds:a,transitionsMap:c,trackItemsMap:u}),d=[],g=[],p=[],y=[],b=[],x=[];e.redos.forEach(M=>{const F=M.path.slice(1);let N={};switch(M.type){case"CREATE":N={path:F,op:"add",value:M.value};break;case"CHANGE":N={path:F,op:"replace",value:M.value};break;case"REMOVE":N={path:F,op:"remove",value:M.oldValue};break;default:return null}M.path.includes("trackItemIds")?p.push(N):M.path.includes("transitionIds")?g.push(N):M.path.includes("trackItemsMap")?b.push(N):M.path.includes("transitionsMap")?y.push(N):M.path.includes("trackItemDetailsMap")?x.push(N):d.push(N)});const S={tracks:this.applyPatch(h.tracks,d),transitionIds:this.applyPatch(h.transitionIds,g),trackItemIds:this.applyPatch(h.trackItemIds,p),transitionsMap:this.applyPatch(h.transitionsMap,y),trackItemsMap:this.applyPatch(h.trackItemsMap,b),trackItemDetailsMap:this.applyPatch(h.trackItemDetailsMap,x)},T=We.cloneDeep(S),k={...We.cloneDeep(t),...T};this.prevState=t,this.undos.push({undos:e.redos,type:e.type});const I=en(k.trackItemsMap);this.stateSubject.next({...k,duration:I}),this.stateHistorySubject.next({handleRedo:!0,handleUndo:!1})}applyPatch(e,t){return t.reverse().reduce((n,i)=>c3(n,s=>{l3(s,[i])}),e)}}function Aw(r){const e=Ne.subject.pipe(Si(({key:s})=>s.startsWith(am))).subscribe(s=>{s.key===$u&&r.undo(),s.key===Yu&&r.redo()}),t=Ne.subject.pipe(Si(({key:s,value:a})=>s.startsWith(rm))).subscribe(s=>{d3.bind(r)(s)}),n=Ne.subject.pipe(Si(({key:s,value:a})=>s.startsWith("scene"))).subscribe(async s=>{await h3.bind(r)(s)}),i=Ne.subject.pipe(Si(({key:s})=>s.startsWith(sm))).subscribe(async s=>{u3.bind(r)(s)});return()=>{e.unsubscribe(),t.unsubscribe(),i.unsubscribe(),n.unsubscribe()}}A.ACTIVE_CLONE=Hu,A.ACTIVE_DELETE=Wu,A.ACTIVE_PASTE=y2,A.ACTIVE_PREFIX=sm,A.ACTIVE_SET=v2,A.ACTIVE_SPLIT=Uu,A.ADD_ANIMATION=o2,A.ADD_AUDIO=ys,A.ADD_IMAGE=bs,A.ADD_MASK=i2,A.ADD_PLACEHOLDER=n2,A.ADD_PREFIX=rm,A.ADD_SUFFIX=KC,A.ADD_TEXT=zu,A.ADD_TRANSITION=s2,A.ADD_VIDEO=vs,A.AUDIOS=Gm,A.Audio=wb,A.AudioObject=jn,A.BASE_TIMELINE_ELEMENT_DURATION_MS=lT,A.Button=zt,A.CanvasMixin=qy,A.DEFAULT_AUDIO_BITRATE=fT,A.DEFAULT_AUDIO_SAMPLE_RATE=dT,A.DEFAULT_BLUR=eE,A.DEFAULT_BLUR_STEP=QT,A.DEFAULT_BRIGHTNESS=jT,A.DEFAULT_BRIGHTNESS_STEP=DT,A.DEFAULT_CONTRAST=YT,A.DEFAULT_CONTRAST_STEP=$T,A.DEFAULT_FADE_IN=ST,A.DEFAULT_FADE_OUT=CT,A.DEFAULT_FADE_STEP=xT,A.DEFAULT_FLIP_X=AT,A.DEFAULT_FLIP_Y=MT,A.DEFAULT_FONT=hh,A.DEFAULT_FRAMERATE=Im,A.DEFAULT_MAX_BLUR=JT,A.DEFAULT_MAX_BRIGHTNESS=PT,A.DEFAULT_MAX_CONTRAST=UT,A.DEFAULT_MAX_FADE=_T,A.DEFAULT_MAX_OPACITY=GT,A.DEFAULT_MAX_ROTATION=ET,A.DEFAULT_MAX_SATURATION=LT,A.DEFAULT_MAX_SPEED=rE,A.DEFAULT_MAX_TEMPERATURE=BT,A.DEFAULT_MAX_VOLUME=oE,A.DEFAULT_MEDIA_PANEL_WIDTH=vT,A.DEFAULT_MIN_BLUR=ZT,A.DEFAULT_MIN_BRIGHTNESS=OT,A.DEFAULT_MIN_CONTRAST=HT,A.DEFAULT_MIN_FADE=wT,A.DEFAULT_MIN_OPACITY=XT,A.DEFAULT_MIN_ROTATION=TT,A.DEFAULT_MIN_SATURATION=FT,A.DEFAULT_MIN_SPEED=tE,A.DEFAULT_MIN_TEMPERATURE=VT,A.DEFAULT_MIN_VOLUME=sE,A.DEFAULT_OPACITY=KT,A.DEFAULT_OPACITY_STEP=qT,A.DEFAULT_PREVIEW_HEIGHT=pT,A.DEFAULT_PREVIEW_SCALE=oh,A.DEFAULT_PREVIEW_WIDTH=gT,A.DEFAULT_ROTATION=IT,A.DEFAULT_ROTATION_STEP=kT,A.DEFAULT_SATURATION=RT,A.DEFAULT_SATURATION_STEP=NT,A.DEFAULT_SETTINGS_PANEL_WIDTH=bT,A.DEFAULT_SPEED=iE,A.DEFAULT_SPEED_STEP=nE,A.DEFAULT_TEMPERATURE=WT,A.DEFAULT_TEMPERATURE_STEP=zT,A.DEFAULT_VIDEO_HEIGHT=km,A.DEFAULT_VIDEO_MAX_BITRATE=hT,A.DEFAULT_VIDEO_MIN_BITRATE=uT,A.DEFAULT_VIDEO_WIDTH=Em,A.DEFAULT_VOLUME=cE,A.DEFAULT_VOLUME_STEP=aE,A.DEFAULT_WEIGHT=cT,A.DRAG_END=wo,A.DRAG_PREFIX=lm,A.DRAG_START=Gu,A.Draggable=bo,A.DroppableArea=Sm,A.EDIT_OBJECT=c2,A.EDIT_PREFIX=a2,A.EDIT_SHAPE=u2,A.EDIT_TEXT=l2,A.ENTER_EDIT_MODE=h2,A.FRAME_INTERVAL=Am,A.GIANT_ICON_SIZE=tT,A.HISTORY_PREFIX=am,A.HISTORY_REDO=Yu,A.HISTORY_RESET=D2,A.HISTORY_UNDO=$u,A.Header=Xm,A.Helper=Cb,A.HelperObject=Ys,A.IMAGES=qm,A.Image=xb,A.ImageObject=gl,A.LARGER_FONT_SIZE=sT,A.LARGE_FONT_SIZE=oT,A.LARGE_ICON_SIZE=rT,A.LAYER_CLONE=A2,A.LAYER_COPY=k2,A.LAYER_CUT=O2,A.LAYER_DELETE=P2,A.LAYER_EDITING_NAME=E2,A.LAYER_HIDDEN=_2,A.LAYER_LOCKED=w2,A.LAYER_MOVE=x2,A.LAYER_PASTE=I2,A.LAYER_PREFIX=b2,A.LAYER_RENAME=T2,A.LAYER_SELECT=S2,A.LAYER_SELECTION=om,A.LAYER_SEND_TO=C2,A.LAYER_SPLIT=M2,A.MAX_MEDIA_PANEL_WIDTH=yT,A.MIN_MEDIA_PANEL_WIDTH=mT,A.MenuItem=HE,A.NORMAL_FONT_SIZE=aT,A.NORMAL_ICON_SIZE=nT,A.NavbarComponent=UE,A.PLAYER_PAUSE=im,A.PLAYER_PLAY=nm,A.PLAYER_PREFIX=d2,A.PLAYER_SEEK=f2,A.PLAYER_SEEK_BY=p2,A.PLAYER_SEEK_TO=g2,A.PLAYER_TOGGLE_PLAY=m2,A.PREVIEW_FRAME_WIDTH=_o,A.Placeholder=$s,A.Player=Ov,A.PlayheadComponent=Pv,A.PreviewTrackItem=ta,A.RulerComponent=Dv,A.SECONDARY_FONT=Tm,A.SMALL_FONT_SIZE=Cm,A.SMALL_ICON_SIZE=iT,A.STATE_CHANGED=r2,A.STATE_PREFIX=t2,A.Scene=MA,A.SceneBoard=eT,A.ScrollArea=xi,A.ScrollBar=Fu,A.SequenceItem=Tv,A.Slider=wp,A.StateManager=p3,A.TIMELINE_BOUNDING_CHANGED=qu,A.TIMELINE_OFFSET_CANVAS_LEFT=Ya,A.TIMELINE_OFFSET_CANVAS_RIGHT=ah,A.TIMELINE_OFFSET_X=$a,A.TIMELINE_PREFIX=um,A.TIMELINE_SCALE_CHANGED=Xu,A.TIMELINE_SCALE_PREFIX=cm,A.TIMELINE_ZOOM_LEVELS=$r,A.TRACKS_CHANGED=QC,A.TRACK_ITEMS_CHANGED=e2,A.TRACK_ITEMS_PREFIX=JC,A.TRACK_PREFIX=ZC,A.TRANSITIONS=Zm,A.Tabs=tm,A.TabsContent=za,A.TabsList=Bu,A.TabsTrigger=Ba,A.Text=af,A.TextObject=Yi,A.Timeline=xl,A.TimelineComponent=K4,A.Track=Sb,A.TrackItemsMixin=Tb,A.TrackObject=li,A.TracksMixin=kb,A.Transition=Lr,A.TransitionGuide=ea,A.TransitionsMixin=Ab,A.UPLOADS=ME,A.VIDEOS=Km,A.Video=_b,A.VideoObject=Xi,A.addEventListeners=dw,A.applyMixins=ib,A.buttonVariants=ip,A.calculateDisplayRange=lb,A.calculateDuration=en,A.calculatePosition=pl,A.calculateTimelineWidth=Vm,A.calculateTrim=cb,A.cn=Xn,A.createAudioControls=eb,A.createControls=rb,A.createMediaControls=Jy,A.createResizeControls=tf,A.defaultColor=Jo,A.defaultSizes=yb,A.filterAndCleanTracks=ub,A.findIndex=ch,A.formatBytes=XS,A.formatTimeToHumanReadable=lE,A.formatTimelineUnit=Mm,A.frameToTimeString=Om,A.getCurrentTime=Dm,A.getFitZoomLevel=uE,A.getMovingState=hP,A.getNextZoom=Lm,A.getNextZoomIndex=Rm,A.getNextZoomLevel=Nm,A.getOffset=Pe,A.getPreviousZoom=Fm,A.getPreviousZoomIndex=dE,A.getPreviousZoomLevel=jm,A.getTextHeight=ra,A.getZoomByIndex=hE,A.handleEvents=gw,A.handleResize=Zo,A.loadAudio=sb,A.loadAudioItem=fb,A.loadAudioObject=gb,A.loadFonts=Bm,A.loadImage=ob,A.loadImageItem=hb,A.loadImageObject=pb,A.loadTextItem=of,A.loadTextObject=vb,A.loadVideo=ab,A.loadVideoItem=db,A.loadVideoObject=mb,A.mergeSizes=bb,A.mergeTrackObjects=lh,A.movingState=te,A.positionOffsets=Ky,A.randomInt=fE,A.removeEventListeners=fw,A.removeItemsFromTrack=xo,A.renderControl=Dn,A.reorderTracksByIndex=uh,A.setupHistoryListeners=Aw,A.timeMsToUnits=yt,A.timeToString=Pm,A.transitionStore=mt,A.unitsToTimeMs=Gn,A.updateMovingState=dP,A.useCurrentPlayerFrame=Xa,A.useIsDraggingOverTimeline=So,A.useLayoutStore=dh,A.useStore=qn,A.wrapResizeWithAnchorPosition=sf,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
